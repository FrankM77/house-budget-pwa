(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function dV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qy={exports:{}},zu={};var _w;function fV(){if(_w)return zu;_w=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:o}}return zu.Fragment=e,zu.jsx=t,zu.jsxs=t,zu}var bw;function mV(){return bw||(bw=1,Qy.exports=fV()),Qy.exports}var E=mV(),Yy={exports:{}},Pe={};var Tw;function pV(){if(Tw)return Pe;Tw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function S(F){return F===null||typeof F!="object"?null:(F=_&&F[_]||F["@@iterator"],typeof F=="function"?F:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,N={};function U(F,se,pe){this.props=F,this.context=se,this.refs=N,this.updater=pe||R}U.prototype.isReactComponent={},U.prototype.setState=function(F,se){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,se,"setState")},U.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function B(){}B.prototype=U.prototype;function O(F,se,pe){this.props=F,this.context=se,this.refs=N,this.updater=pe||R}var X=O.prototype=new B;X.constructor=O,D(X,U.prototype),X.isPureReactComponent=!0;var te=Array.isArray;function ee(){}var x={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function V(F,se,pe){var ge=pe.ref;return{$$typeof:n,type:F,key:se,ref:ge!==void 0?ge:null,props:pe}}function M(F,se){return V(F.type,se,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function z(F){var se={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(pe){return se[pe]})}var P=/\/+/g;function Ce(F,se){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):se.toString(36)}function de(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(ee,ee):(F.status="pending",F.then(function(se){F.status==="pending"&&(F.status="fulfilled",F.value=se)},function(se){F.status==="pending"&&(F.status="rejected",F.reason=se)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function H(F,se,pe,ge,ke){var je=typeof F;(je==="undefined"||je==="boolean")&&(F=null);var Qe=!1;if(F===null)Qe=!0;else switch(je){case"bigint":case"string":case"number":Qe=!0;break;case"object":switch(F.$$typeof){case n:case e:Qe=!0;break;case g:return Qe=F._init,H(Qe(F._payload),se,pe,ge,ke)}}if(Qe)return ke=ke(F),Qe=ge===""?"."+Ce(F,0):ge,te(ke)?(pe="",Qe!=null&&(pe=Qe.replace(P,"$&/")+"/"),H(ke,se,pe,"",function(Ia){return Ia})):ke!=null&&(k(ke)&&(ke=M(ke,pe+(ke.key==null||F&&F.key===ke.key?"":(""+ke.key).replace(P,"$&/")+"/")+Qe)),se.push(ke)),1;Qe=0;var Wt=ge===""?".":ge+":";if(te(F))for(var vt=0;vt<F.length;vt++)ge=F[vt],je=Wt+Ce(ge,vt),Qe+=H(ge,se,pe,je,ke);else if(vt=S(F),typeof vt=="function")for(F=vt.call(F),vt=0;!(ge=F.next()).done;)ge=ge.value,je=Wt+Ce(ge,vt++),Qe+=H(ge,se,pe,je,ke);else if(je==="object"){if(typeof F.then=="function")return H(de(F),se,pe,ge,ke);throw se=String(F),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Qe}function re(F,se,pe){if(F==null)return F;var ge=[],ke=0;return H(F,ge,"","",function(je){return se.call(pe,je,ke++)}),ge}function ue(F){if(F._status===-1){var se=F._result;se=se(),se.then(function(pe){(F._status===0||F._status===-1)&&(F._status=1,F._result=pe)},function(pe){(F._status===0||F._status===-1)&&(F._status=2,F._result=pe)}),F._status===-1&&(F._status=0,F._result=se)}if(F._status===1)return F._result.default;throw F._result}var xe=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},De={map:re,forEach:function(F,se,pe){re(F,function(){se.apply(this,arguments)},pe)},count:function(F){var se=0;return re(F,function(){se++}),se},toArray:function(F){return re(F,function(se){return se})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Pe.Activity=v,Pe.Children=De,Pe.Component=U,Pe.Fragment=t,Pe.Profiler=s,Pe.PureComponent=O,Pe.StrictMode=i,Pe.Suspense=d,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(F){return x.H.useMemoCache(F)}},Pe.cache=function(F){return function(){return F.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(F,se,pe){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ge=D({},F.props),ke=F.key;if(se!=null)for(je in se.key!==void 0&&(ke=""+se.key),se)!I.call(se,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&se.ref===void 0||(ge[je]=se[je]);var je=arguments.length-2;if(je===1)ge.children=pe;else if(1<je){for(var Qe=Array(je),Wt=0;Wt<je;Wt++)Qe[Wt]=arguments[Wt+2];ge.children=Qe}return V(F.type,ke,ge)},Pe.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},Pe.createElement=function(F,se,pe){var ge,ke={},je=null;if(se!=null)for(ge in se.key!==void 0&&(je=""+se.key),se)I.call(se,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(ke[ge]=se[ge]);var Qe=arguments.length-2;if(Qe===1)ke.children=pe;else if(1<Qe){for(var Wt=Array(Qe),vt=0;vt<Qe;vt++)Wt[vt]=arguments[vt+2];ke.children=Wt}if(F&&F.defaultProps)for(ge in Qe=F.defaultProps,Qe)ke[ge]===void 0&&(ke[ge]=Qe[ge]);return V(F,je,ke)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(F){return{$$typeof:h,render:F}},Pe.isValidElement=k,Pe.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:ue}},Pe.memo=function(F,se){return{$$typeof:f,type:F,compare:se===void 0?null:se}},Pe.startTransition=function(F){var se=x.T,pe={};x.T=pe;try{var ge=F(),ke=x.S;ke!==null&&ke(pe,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(ee,xe)}catch(je){xe(je)}finally{se!==null&&pe.types!==null&&(se.types=pe.types),x.T=se}},Pe.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Pe.use=function(F){return x.H.use(F)},Pe.useActionState=function(F,se,pe){return x.H.useActionState(F,se,pe)},Pe.useCallback=function(F,se){return x.H.useCallback(F,se)},Pe.useContext=function(F){return x.H.useContext(F)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(F,se){return x.H.useDeferredValue(F,se)},Pe.useEffect=function(F,se){return x.H.useEffect(F,se)},Pe.useEffectEvent=function(F){return x.H.useEffectEvent(F)},Pe.useId=function(){return x.H.useId()},Pe.useImperativeHandle=function(F,se,pe){return x.H.useImperativeHandle(F,se,pe)},Pe.useInsertionEffect=function(F,se){return x.H.useInsertionEffect(F,se)},Pe.useLayoutEffect=function(F,se){return x.H.useLayoutEffect(F,se)},Pe.useMemo=function(F,se){return x.H.useMemo(F,se)},Pe.useOptimistic=function(F,se){return x.H.useOptimistic(F,se)},Pe.useReducer=function(F,se,pe){return x.H.useReducer(F,se,pe)},Pe.useRef=function(F){return x.H.useRef(F)},Pe.useState=function(F){return x.H.useState(F)},Pe.useSyncExternalStore=function(F,se,pe){return x.H.useSyncExternalStore(F,se,pe)},Pe.useTransition=function(){return x.H.useTransition()},Pe.version="19.2.0",Pe}var Ew;function Xv(){return Ew||(Ew=1,Yy.exports=pV()),Yy.exports}var L=Xv();const Uf=dV(L);var Xy={exports:{}},Bu={},Wy={exports:{}},Zy={};var ww;function gV(){return ww||(ww=1,(function(n){function e(H,re){var ue=H.length;H.push(re);e:for(;0<ue;){var xe=ue-1>>>1,De=H[xe];if(0<s(De,re))H[xe]=re,H[ue]=De,ue=xe;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var re=H[0],ue=H.pop();if(ue!==re){H[0]=ue;e:for(var xe=0,De=H.length,F=De>>>1;xe<F;){var se=2*(xe+1)-1,pe=H[se],ge=se+1,ke=H[ge];if(0>s(pe,ue))ge<De&&0>s(ke,pe)?(H[xe]=ke,H[ge]=ue,xe=ge):(H[xe]=pe,H[se]=ue,xe=se);else if(ge<De&&0>s(ke,ue))H[xe]=ke,H[ge]=ue,xe=ge;else break e}}return re}function s(H,re){var ue=H.sortIndex-re.sortIndex;return ue!==0?ue:H.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var d=[],f=[],g=1,v=null,_=3,S=!1,R=!1,D=!1,N=!1,U=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function X(H){for(var re=t(f);re!==null;){if(re.callback===null)i(f);else if(re.startTime<=H)i(f),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(f)}}function te(H){if(D=!1,X(H),!R)if(t(d)!==null)R=!0,ee||(ee=!0,z());else{var re=t(f);re!==null&&de(te,re.startTime-H)}}var ee=!1,x=-1,I=5,V=-1;function M(){return N?!0:!(n.unstable_now()-V<I)}function k(){if(N=!1,ee){var H=n.unstable_now();V=H;var re=!0;try{e:{R=!1,D&&(D=!1,B(x),x=-1),S=!0;var ue=_;try{t:{for(X(H),v=t(d);v!==null&&!(v.expirationTime>H&&M());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,_=v.priorityLevel;var De=xe(v.expirationTime<=H);if(H=n.unstable_now(),typeof De=="function"){v.callback=De,X(H),re=!0;break t}v===t(d)&&i(d),X(H)}else i(d);v=t(d)}if(v!==null)re=!0;else{var F=t(f);F!==null&&de(te,F.startTime-H),re=!1}}break e}finally{v=null,_=ue,S=!1}re=void 0}}finally{re?z():ee=!1}}}var z;if(typeof O=="function")z=function(){O(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ce=P.port2;P.port1.onmessage=k,z=function(){Ce.postMessage(null)}}else z=function(){U(k,0)};function de(H,re){x=U(function(){H(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(H){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var ue=_;_=re;try{return H()}finally{_=ue}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=_;_=H;try{return re()}finally{_=ue}},n.unstable_scheduleCallback=function(H,re,ue){var xe=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?xe+ue:xe):ue=xe,H){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ue+De,H={id:g++,callback:re,priorityLevel:H,startTime:ue,expirationTime:De,sortIndex:-1},ue>xe?(H.sortIndex=ue,e(f,H),t(d)===null&&H===t(f)&&(D?(B(x),x=-1):D=!0,de(te,ue-xe))):(H.sortIndex=De,e(d,H),R||S||(R=!0,ee||(ee=!0,z()))),H},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(H){var re=_;return function(){var ue=_;_=re;try{return H.apply(this,arguments)}finally{_=ue}}}})(Zy)),Zy}var Sw;function yV(){return Sw||(Sw=1,Wy.exports=gV()),Wy.exports}var Jy={exports:{}},yn={};var xw;function vV(){if(xw)return yn;xw=1;var n=Xv();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:f,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,yn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},yn.flushSync=function(d){var f=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=g,i.d.f()}},yn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},yn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},yn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,v=h(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:S}):g==="script"&&i.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},yn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},yn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=h(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},yn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},yn.requestFormReset=function(d){i.d.r(d)},yn.unstable_batchedUpdates=function(d,f){return d(f)},yn.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},yn.useFormStatus=function(){return l.H.useHostTransitionStatus()},yn.version="19.2.0",yn}var Aw;function _V(){if(Aw)return Jy.exports;Aw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jy.exports=vV(),Jy.exports}var Iw;function bV(){if(Iw)return Bu;Iw=1;var n=yV(),e=Xv(),t=_V();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function h(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var c=r,u=a;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){c=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return d(p),r;if(y===u)return d(p),a;y=y.sibling}throw Error(i(188))}if(c.return!==u.return)c=p,u=y;else{for(var T=!1,A=p.child;A;){if(A===c){T=!0,c=p,u=y;break}if(A===u){T=!0,u=p,c=y;break}A=A.sibling}if(!T){for(A=y.child;A;){if(A===c){T=!0,c=y,u=p;break}if(A===u){T=!0,u=y,c=p;break}A=A.sibling}if(!T)throw Error(i(189))}}if(c.alternate!==u)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:a}function g(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=g(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),O=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=k&&r[k]||r["@@iterator"],typeof r=="function"?r:null)}var P=Symbol.for("react.client.reference");function Ce(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===P?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case U:return"Profiler";case N:return"StrictMode";case te:return"Suspense";case ee:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case R:return"Portal";case O:return r.displayName||"Context";case B:return(r._context.displayName||"Context")+".Consumer";case X:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x:return a=r.displayName||null,a!==null?a:Ce(r.type)||"Memo";case I:a=r._payload,r=r._init;try{return Ce(r(a))}catch{}}return null}var de=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},xe=[],De=-1;function F(r){return{current:r}}function se(r){0>De||(r.current=xe[De],xe[De]=null,De--)}function pe(r,a){De++,xe[De]=r.current,r.current=a}var ge=F(null),ke=F(null),je=F(null),Qe=F(null);function Wt(r,a){switch(pe(je,a),pe(ke,r),pe(ge,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?FE(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=FE(a),r=qE(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}se(ge),pe(ge,r)}function vt(){se(ge),se(ke),se(je)}function Ia(r){r.memoizedState!==null&&pe(Qe,r);var a=ge.current,c=qE(a,r.type);a!==c&&(pe(ke,r),pe(ge,c))}function zo(r){ke.current===r&&(se(ge),se(ke)),Qe.current===r&&(se(Qe),Ou._currentValue=ue)}var Bo,Fo;function Bi(r){if(Bo===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Bo=a&&a[1]||"",Fo=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bo+r+Fo}var Oc=!1;function Ra(r,a){if(!r||Oc)return"";Oc=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var W=J}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(J){W=J}r.call(oe.prototype)}}else{try{throw Error()}catch(J){W=J}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&W&&typeof J.stack=="string")return[J.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],A=y[1];if(T&&A){var j=T.split(`
`),Y=A.split(`
`);for(p=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;if(u===j.length||p===Y.length)for(u=j.length-1,p=Y.length-1;1<=u&&0<=p&&j[u]!==Y[p];)p--;for(;1<=u&&0<=p;u--,p--)if(j[u]!==Y[p]){if(u!==1||p!==1)do if(u--,p--,0>p||j[u]!==Y[p]){var ne=`
`+j[u].replace(" at new "," at ");return r.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",r.displayName)),ne}while(1<=u&&0<=p);break}}}finally{Oc=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Bi(c):""}function Lc(r,a){switch(r.tag){case 26:case 27:case 5:return Bi(r.type);case 16:return Bi("Lazy");case 13:return r.child!==a&&a!==null?Bi("Suspense Fallback"):Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return Ra(r.type,!1);case 11:return Ra(r.type.render,!1);case 1:return Ra(r.type,!0);case 31:return Bi("Activity");default:return""}}function jc(r){try{var a="",c=null;do a+=Lc(r,c),c=r,r=r.return;while(r);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ut=Object.prototype.hasOwnProperty,Zt=n.unstable_scheduleCallback,ds=n.unstable_cancelCallback,Xp=n.unstable_shouldYield,cd=n.unstable_requestPaint,In=n.unstable_now,Ca=n.unstable_getCurrentPriorityLevel,Uc=n.unstable_ImmediatePriority,zc=n.unstable_UserBlockingPriority,fs=n.unstable_NormalPriority,Wp=n.unstable_LowPriority,ud=n.unstable_IdlePriority,hd=n.log,dd=n.unstable_setDisableYieldValue,Si=null,ln=null;function ii(r){if(typeof hd=="function"&&dd(r),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(Si,r)}catch{}}var Nt=Math.clz32?Math.clz32:md,fd=Math.log,qo=Math.LN2;function md(r){return r>>>=0,r===0?32:31-(fd(r)/qo|0)|0}var Fi=256,Da=262144,zt=4194304;function qi(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Hi(r,a,c){var u=r.pendingLanes;if(u===0)return 0;var p=0,y=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var A=u&134217727;return A!==0?(u=A&~y,u!==0?p=qi(u):(T&=A,T!==0?p=qi(T):c||(c=A&~r,c!==0&&(p=qi(c))))):(A=u&~y,A!==0?p=qi(A):T!==0?p=qi(T):c||(c=u&~r,c!==0&&(p=qi(c)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:p}function xi(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Zp(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pd(){var r=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),r}function Gi(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function Na(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Jp(r,a,c,u,p,y){var T=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var A=r.entanglements,j=r.expirationTimes,Y=r.hiddenUpdates;for(c=T&~c;0<c;){var ne=31-Nt(c),oe=1<<ne;A[ne]=0,j[ne]=-1;var W=Y[ne];if(W!==null)for(Y[ne]=null,ne=0;ne<W.length;ne++){var J=W[ne];J!==null&&(J.lane&=-536870913)}c&=~oe}u!==0&&ka(r,u,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(T&~a))}function ka(r,a,c){r.pendingLanes|=a,r.suspendedLanes&=~a;var u=31-Nt(a);r.entangledLanes|=a,r.entanglements[u]=r.entanglements[u]|1073741824|c&261930}function Bc(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var u=31-Nt(c),p=1<<u;p&a|r[u]&a&&(r[u]|=a),c&=~p}}function Fc(r,a){var c=a&-a;return c=(c&42)!==0?1:Va(c),(c&(r.suspendedLanes|a))!==0?0:c}function Va(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ar(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function gd(){var r=re.p;return r!==0?r:(r=window.event,r===void 0?32:dw(r.type))}function Ai(r,a){var c=re.p;try{return re.p=r,a()}finally{re.p=c}}var Ii=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Ii,rn="__reactProps$"+Ii,$i="__reactContainer$"+Ii,Ho="__reactEvents$"+Ii,eg="__reactListeners$"+Ii,yd="__reactHandles$"+Ii,vd="__reactResources$"+Ii,Ki="__reactMarker$"+Ii;function Go(r){delete r[Bt],delete r[rn],delete r[Ho],delete r[eg],delete r[yd]}function Qi(r){var a=r[Bt];if(a)return a;for(var c=r.parentNode;c;){if(a=c[$i]||c[Bt]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=XE(r);r!==null;){if(c=r[Bt])return c;r=XE(r)}return a}r=c,c=r.parentNode}return null}function ri(r){if(r=r[Bt]||r[$i]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Hn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Yi(r){var a=r[vd];return a||(a=r[vd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ft(r){r[Ki]=!0}var qc=new Set,Hc={};function Xi(r,a){Wi(r,a),Wi(r+"Capture",a)}function Wi(r,a){for(Hc[r]=a,r=0;r<a.length;r++)qc.add(a[r])}var Gc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$c={},Kc={};function _d(r){return Ut.call(Kc,r)?!0:Ut.call($c,r)?!1:Gc.test(r)?Kc[r]=!0:($c[r]=!0,!1)}function $o(r,a,c){if(_d(a))if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+c)}}function Gn(r,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+c)}}function qt(r,a,c,u){if(u===null)r.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(a,c,""+u)}}function sn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ms(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Qc(r,a,c){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return p.call(this)},set:function(T){c=""+T,y.call(this,T)}}),Object.defineProperty(r,a,{enumerable:u.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function rt(r){if(!r._valueTracker){var a=ms(r)?"checked":"value";r._valueTracker=Qc(r,a,""+r[a])}}function Ma(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),u="";return r&&(u=ms(r)?r.checked?"true":"false":r.value),r=u,r!==c?(a.setValue(r),!0):!1}function Zi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Pa=/[\n"\\]/g;function Vn(r){return r.replace(Pa,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ko(r,a,c,u,p,y,T,A){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),a!=null?T==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+sn(a)):r.value!==""+sn(a)&&(r.value=""+sn(a)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),a!=null?Yc(r,T,sn(a)):c!=null?Yc(r,T,sn(c)):u!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+sn(A):r.removeAttribute("name")}function bd(r,a,c,u,p,y,T,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){rt(r);return}c=c!=null?""+sn(c):"",a=a!=null?""+sn(a):c,A||a===r.value||(r.value=a),r.defaultValue=a}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=A?r.checked:!!u,r.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),rt(r)}function Yc(r,a,c){a==="number"&&Zi(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function ps(r,a,c,u){if(r=r.options,a){a={};for(var p=0;p<c.length;p++)a["$"+c[p]]=!0;for(c=0;c<r.length;c++)p=a.hasOwnProperty("$"+r[c].value),r[c].selected!==p&&(r[c].selected=p),p&&u&&(r[c].defaultSelected=!0)}else{for(c=""+sn(c),a=null,p=0;p<r.length;p++){if(r[p].value===c){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}a!==null||r[p].disabled||(a=r[p])}a!==null&&(a.selected=!0)}}function Td(r,a,c){if(a!=null&&(a=""+sn(a),a!==r.value&&(r.value=a),c==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=c!=null?""+sn(c):""}function gs(r,a,c,u){if(a==null){if(u!=null){if(c!=null)throw Error(i(92));if(de(u)){if(1<u.length)throw Error(i(93));u=u[0]}c=u}c==null&&(c=""),a=c}c=sn(a),r.defaultValue=c,u=r.textContent,u===c&&u!==""&&u!==null&&(r.value=u),rt(r)}function Mn(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var Ed=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xc(r,a,c){var u=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?u?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":u?r.setProperty(a,c):typeof c!="number"||c===0||Ed.has(a)?a==="float"?r.cssFloat=c:r[a]=(""+c).trim():r[a]=c+"px"}function Wc(r,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,c!=null){for(var u in c)!c.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var p in a)u=a[p],a.hasOwnProperty(p)&&c[p]!==u&&Xc(r,p,u)}else for(var y in a)a.hasOwnProperty(y)&&Xc(r,y,a[y])}function Qo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yo(r){return ys.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ri(){}var Zc=null;function si(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var vs=null,Ji=null;function Oa(r){var a=ri(r);if(a&&(r=a.stateNode)){var c=r[rn]||null;e:switch(r=a.stateNode,a.type){case"input":if(Ko(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Vn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var u=c[a];if(u!==r&&u.form===r.form){var p=u[rn]||null;if(!p)throw Error(i(90));Ko(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<c.length;a++)u=c[a],u.form===r.form&&Ma(u)}break e;case"textarea":Td(r,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&ps(r,!!c.multiple,a,!1)}}}var Xo=!1;function _s(r,a,c){if(Xo)return r(a,c);Xo=!0;try{var u=r(a);return u}finally{if(Xo=!1,(vs!==null||Ji!==null)&&(yf(),vs&&(a=vs,r=Ji,Ji=vs=null,Oa(a),r)))for(a=0;a<r.length;a++)Oa(r[a])}}function Ci(r,a){var c=r.stateNode;if(c===null)return null;var u=c[rn]||null;if(u===null)return null;c=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),La=!1;if(ai)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){La=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{La=!1}var er=null,Jc=null,ja=null;function eu(){if(ja)return ja;var r,a=Jc,c=a.length,u,p="value"in er?er.value:er.textContent,y=p.length;for(r=0;r<c&&a[r]===p[r];r++);var T=c-r;for(u=1;u<=T&&a[c-u]===p[y-u];u++);return ja=p.slice(r,1<u?1-u:void 0)}function Ua(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Ir(){return!0}function Di(){return!1}function cn(r){function a(c,u,p,y,T){this._reactName=c,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(c=r[A],this[A]=c?c(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ir:Di,this.isPropagationStopped=Di,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),a}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=cn(Rr),bs=v({},Rr,{view:0,detail:0}),tu=cn(bs),Ts,Wo,nr,Zo=v({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==nr&&(nr&&r.type==="mousemove"?(Ts=r.screenX-nr.screenX,Wo=r.screenY-nr.screenY):Wo=Ts=0,nr=r),Ts)},movementY:function(r){return"movementY"in r?r.movementY:Wo}}),nu=cn(Zo),za=v({},Zo,{dataTransfer:0}),Sd=cn(za),xd=v({},bs,{relatedTarget:0}),Ba=cn(xd),iu=v({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ad=cn(iu),Jo=v({},Rr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Id=cn(Jo),Rd=v({},Rr,{data:0}),ir=cn(Rd),Cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kd(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Nd[r])?!!a[r]:!1}function Es(){return kd}var Rn=v({},bs,{key:function(r){if(r.key){var a=Cd[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ua(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Dd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(r){return r.type==="keypress"?Ua(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ua(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Vd=cn(Rn),Md=v({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cr=cn(Md),m=v({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),b=cn(m),w=v({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=cn(w),K=v({},Zo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=cn(K),fe=v({},Rr,{newState:0,oldState:0}),Oe=cn(fe),kt=[9,13,27,32],tt=ai&&"CompositionEvent"in window,_t=null;ai&&"documentMode"in document&&(_t=document.documentMode);var oi=ai&&"TextEvent"in window&&!_t,rr=ai&&(!tt||_t&&8<_t&&11>=_t),Ni=" ",ki=!1;function Fa(r,a){switch(r){case"keyup":return kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function el(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var tl=!1;function ON(r,a){switch(r){case"compositionend":return el(a);case"keypress":return a.which!==32?null:(ki=!0,Ni);case"textInput":return r=a.data,r===Ni&&ki?null:r;default:return null}}function LN(r,a){if(tl)return r==="compositionend"||!tt&&Fa(r,a)?(r=eu(),ja=Jc=er=null,tl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return rr&&a.locale!=="ko"?null:a.data;default:return null}}var jN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jb(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!jN[r.type]:a==="textarea"}function eT(r,a,c,u){vs?Ji?Ji.push(u):Ji=[u]:vs=u,a=Sf(a,"onChange"),0<a.length&&(c=new tr("onChange","change",null,c,u),r.push({event:c,listeners:a}))}var ru=null,su=null;function UN(r){OE(r,0)}function Pd(r){var a=Hn(r);if(Ma(a))return r}function tT(r,a){if(r==="change")return a}var nT=!1;if(ai){var tg;if(ai){var ng="oninput"in document;if(!ng){var iT=document.createElement("div");iT.setAttribute("oninput","return;"),ng=typeof iT.oninput=="function"}tg=ng}else tg=!1;nT=tg&&(!document.documentMode||9<document.documentMode)}function rT(){ru&&(ru.detachEvent("onpropertychange",sT),su=ru=null)}function sT(r){if(r.propertyName==="value"&&Pd(su)){var a=[];eT(a,su,r,si(r)),_s(UN,a)}}function zN(r,a,c){r==="focusin"?(rT(),ru=a,su=c,ru.attachEvent("onpropertychange",sT)):r==="focusout"&&rT()}function BN(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Pd(su)}function FN(r,a){if(r==="click")return Pd(a)}function qN(r,a){if(r==="input"||r==="change")return Pd(a)}function HN(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var $n=typeof Object.is=="function"?Object.is:HN;function au(r,a){if($n(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),u=Object.keys(a);if(c.length!==u.length)return!1;for(u=0;u<c.length;u++){var p=c[u];if(!Ut.call(a,p)||!$n(r[p],a[p]))return!1}return!0}function aT(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function oT(r,a){var c=aT(r);r=0;for(var u;c;){if(c.nodeType===3){if(u=r+c.textContent.length,r<=a&&u>=a)return{node:c,offset:a-r};r=u}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=aT(c)}}function lT(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?lT(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function cT(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Zi(r.document);a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=Zi(r.document)}return a}function ig(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var GN=ai&&"documentMode"in document&&11>=document.documentMode,nl=null,rg=null,ou=null,sg=!1;function uT(r,a,c){var u=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;sg||nl==null||nl!==Zi(u)||(u=nl,"selectionStart"in u&&ig(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ou&&au(ou,u)||(ou=u,u=Sf(rg,"onSelect"),0<u.length&&(a=new tr("onSelect","select",null,a,c),r.push({event:a,listeners:u}),a.target=nl)))}function qa(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var il={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},ag={},hT={};ai&&(hT=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function Ha(r){if(ag[r])return ag[r];if(!il[r])return r;var a=il[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in hT)return ag[r]=a[c];return r}var dT=Ha("animationend"),fT=Ha("animationiteration"),mT=Ha("animationstart"),$N=Ha("transitionrun"),KN=Ha("transitionstart"),QN=Ha("transitioncancel"),pT=Ha("transitionend"),gT=new Map,og="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");og.push("scrollEnd");function Vi(r,a){gT.set(r,a),Xi(a,[r])}var Od=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},li=[],rl=0,lg=0;function Ld(){for(var r=rl,a=lg=rl=0;a<r;){var c=li[a];li[a++]=null;var u=li[a];li[a++]=null;var p=li[a];li[a++]=null;var y=li[a];if(li[a++]=null,u!==null&&p!==null){var T=u.pending;T===null?p.next=p:(p.next=T.next,T.next=p),u.pending=p}y!==0&&yT(c,p,y)}}function jd(r,a,c,u){li[rl++]=r,li[rl++]=a,li[rl++]=c,li[rl++]=u,lg|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function cg(r,a,c,u){return jd(r,a,c,u),Ud(r)}function Ga(r,a){return jd(r,null,null,a),Ud(r)}function yT(r,a,c){r.lanes|=c;var u=r.alternate;u!==null&&(u.lanes|=c);for(var p=!1,y=r.return;y!==null;)y.childLanes|=c,u=y.alternate,u!==null&&(u.childLanes|=c),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&a!==null&&(p=31-Nt(c),r=y.hiddenUpdates,u=r[p],u===null?r[p]=[a]:u.push(a),a.lane=c|536870912),y):null}function Ud(r){if(50<Cu)throw Cu=0,vy=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var sl={};function YN(r,a,c,u){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(r,a,c,u){return new YN(r,a,c,u)}function ug(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Dr(r,a){var c=r.alternate;return c===null?(c=Kn(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function vT(r,a){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,a=c.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function zd(r,a,c,u,p,y){var T=0;if(u=r,typeof r=="function")ug(r)&&(T=1);else if(typeof r=="string")T=eV(r,c,ge.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=Kn(31,c,a,p),r.elementType=V,r.lanes=y,r;case D:return $a(c.children,p,y,a);case N:T=8,p|=24;break;case U:return r=Kn(12,c,a,p|2),r.elementType=U,r.lanes=y,r;case te:return r=Kn(13,c,a,p),r.elementType=te,r.lanes=y,r;case ee:return r=Kn(19,c,a,p),r.elementType=ee,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:T=10;break e;case B:T=9;break e;case X:T=11;break e;case x:T=14;break e;case I:T=16,u=null;break e}T=29,c=Error(i(130,r===null?"null":typeof r,"")),u=null}return a=Kn(T,c,a,p),a.elementType=r,a.type=u,a.lanes=y,a}function $a(r,a,c,u){return r=Kn(7,r,u,a),r.lanes=c,r}function hg(r,a,c){return r=Kn(6,r,null,a),r.lanes=c,r}function _T(r){var a=Kn(18,null,null,0);return a.stateNode=r,a}function dg(r,a,c){return a=Kn(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var bT=new WeakMap;function ci(r,a){if(typeof r=="object"&&r!==null){var c=bT.get(r);return c!==void 0?c:(a={value:r,source:a,stack:jc(a)},bT.set(r,a),a)}return{value:r,source:a,stack:jc(a)}}var al=[],ol=0,Bd=null,lu=0,ui=[],hi=0,ws=null,sr=1,ar="";function Nr(r,a){al[ol++]=lu,al[ol++]=Bd,Bd=r,lu=a}function TT(r,a,c){ui[hi++]=sr,ui[hi++]=ar,ui[hi++]=ws,ws=r;var u=sr;r=ar;var p=32-Nt(u)-1;u&=~(1<<p),c+=1;var y=32-Nt(a)+p;if(30<y){var T=p-p%5;y=(u&(1<<T)-1).toString(32),u>>=T,p-=T,sr=1<<32-Nt(a)+p|c<<p|u,ar=y+r}else sr=1<<y|c<<p|u,ar=r}function fg(r){r.return!==null&&(Nr(r,1),TT(r,1,0))}function mg(r){for(;r===Bd;)Bd=al[--ol],al[ol]=null,lu=al[--ol],al[ol]=null;for(;r===ws;)ws=ui[--hi],ui[hi]=null,ar=ui[--hi],ui[hi]=null,sr=ui[--hi],ui[hi]=null}function ET(r,a){ui[hi++]=sr,ui[hi++]=ar,ui[hi++]=ws,sr=a.id,ar=a.overflow,ws=r}var un=null,gt=null,Ke=!1,Ss=null,di=!1,pg=Error(i(519));function xs(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cu(ci(a,r)),pg}function wT(r){var a=r.stateNode,c=r.type,u=r.memoizedProps;switch(a[Bt]=r,a[rn]=u,c){case"dialog":Fe("cancel",a),Fe("close",a);break;case"iframe":case"object":case"embed":Fe("load",a);break;case"video":case"audio":for(c=0;c<Nu.length;c++)Fe(Nu[c],a);break;case"source":Fe("error",a);break;case"img":case"image":case"link":Fe("error",a),Fe("load",a);break;case"details":Fe("toggle",a);break;case"input":Fe("invalid",a),bd(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Fe("invalid",a);break;case"textarea":Fe("invalid",a),gs(a,u.value,u.defaultValue,u.children)}c=u.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||u.suppressHydrationWarning===!0||zE(a.textContent,c)?(u.popover!=null&&(Fe("beforetoggle",a),Fe("toggle",a)),u.onScroll!=null&&Fe("scroll",a),u.onScrollEnd!=null&&Fe("scrollend",a),u.onClick!=null&&(a.onclick=Ri),a=!0):a=!1,a||xs(r,!0)}function ST(r){for(un=r.return;un;)switch(un.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:un=un.return}}function ll(r){if(r!==un)return!1;if(!Ke)return ST(r),Ke=!0,!1;var a=r.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||Vy(r.type,r.memoizedProps)),c=!c),c&&gt&&xs(r),ST(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));gt=YE(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));gt=YE(r)}else a===27?(a=gt,Us(r.type)?(r=jy,jy=null,gt=r):gt=a):gt=un?mi(r.stateNode.nextSibling):null;return!0}function Ka(){gt=un=null,Ke=!1}function gg(){var r=Ss;return r!==null&&(jn===null?jn=r:jn.push.apply(jn,r),Ss=null),r}function cu(r){Ss===null?Ss=[r]:Ss.push(r)}var yg=F(null),Qa=null,kr=null;function As(r,a,c){pe(yg,a._currentValue),a._currentValue=c}function Vr(r){r._currentValue=yg.current,se(yg)}function vg(r,a,c){for(;r!==null;){var u=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),r===c)break;r=r.return}}function _g(r,a,c,u){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=p;for(var j=0;j<a.length;j++)if(A.context===a[j]){y.lanes|=c,A=y.alternate,A!==null&&(A.lanes|=c),vg(y.return,c,r),u||(T=null);break e}y=A.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(i(341));T.lanes|=c,y=T.alternate,y!==null&&(y.lanes|=c),vg(T,c,r),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===r){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function cl(r,a,c,u){r=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var A=p.type;$n(p.pendingProps.value,T.value)||(r!==null?r.push(A):r=[A])}}else if(p===Qe.current){if(T=p.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Ou):r=[Ou])}p=p.return}r!==null&&_g(a,r,c,u),a.flags|=262144}function Fd(r){for(r=r.firstContext;r!==null;){if(!$n(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ya(r){Qa=r,kr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function hn(r){return xT(Qa,r)}function qd(r,a){return Qa===null&&Ya(r),xT(r,a)}function xT(r,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},kr===null){if(r===null)throw Error(i(308));kr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else kr=kr.next=a;return c}var XN=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(c,u){r.push(u)}};this.abort=function(){a.aborted=!0,r.forEach(function(c){return c()})}},WN=n.unstable_scheduleCallback,ZN=n.unstable_NormalPriority,Ht={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bg(){return{controller:new XN,data:new Map,refCount:0}}function uu(r){r.refCount--,r.refCount===0&&WN(ZN,function(){r.controller.abort()})}var hu=null,Tg=0,ul=0,hl=null;function JN(r,a){if(hu===null){var c=hu=[];Tg=0,ul=Sy(),hl={status:"pending",value:void 0,then:function(u){c.push(u)}}}return Tg++,a.then(AT,AT),a}function AT(){if(--Tg===0&&hu!==null){hl!==null&&(hl.status="fulfilled");var r=hu;hu=null,ul=0,hl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function ek(r,a){var c=[],u={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return r.then(function(){u.status="fulfilled",u.value=a;for(var p=0;p<c.length;p++)(0,c[p])(a)},function(p){for(u.status="rejected",u.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),u}var IT=H.S;H.S=function(r,a){uE=In(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&JN(r,a),IT!==null&&IT(r,a)};var Xa=F(null);function Eg(){var r=Xa.current;return r!==null?r:ft.pooledCache}function Hd(r,a){a===null?pe(Xa,Xa.current):pe(Xa,a.pool)}function RT(){var r=Eg();return r===null?null:{parent:Ht._currentValue,pool:r}}var dl=Error(i(460)),wg=Error(i(474)),Gd=Error(i(542)),$d={then:function(){}};function CT(r){return r=r.status,r==="fulfilled"||r==="rejected"}function DT(r,a,c){switch(c=r[c],c===void 0?r.push(a):c!==a&&(a.then(Ri,Ri),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,kT(r),r;default:if(typeof a.status=="string")a.then(Ri,Ri);else{if(r=ft,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(u){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=u}},function(u){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,kT(r),r}throw Za=a,dl}}function Wa(r){try{var a=r._init;return a(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Za=c,dl):c}}var Za=null;function NT(){if(Za===null)throw Error(i(459));var r=Za;return Za=null,r}function kT(r){if(r===dl||r===Gd)throw Error(i(483))}var fl=null,du=0;function Kd(r){var a=du;return du+=1,fl===null&&(fl=[]),DT(fl,r,a)}function fu(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Qd(r,a){throw a.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function VT(r){function a(G,q){if(r){var Q=G.deletions;Q===null?(G.deletions=[q],G.flags|=16):Q.push(q)}}function c(G,q){if(!r)return null;for(;q!==null;)a(G,q),q=q.sibling;return null}function u(G){for(var q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function p(G,q){return G=Dr(G,q),G.index=0,G.sibling=null,G}function y(G,q,Q){return G.index=Q,r?(Q=G.alternate,Q!==null?(Q=Q.index,Q<q?(G.flags|=67108866,q):Q):(G.flags|=67108866,q)):(G.flags|=1048576,q)}function T(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function A(G,q,Q,ae){return q===null||q.tag!==6?(q=hg(Q,G.mode,ae),q.return=G,q):(q=p(q,Q),q.return=G,q)}function j(G,q,Q,ae){var we=Q.type;return we===D?ne(G,q,Q.props.children,ae,Q.key):q!==null&&(q.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===I&&Wa(we)===q.type)?(q=p(q,Q.props),fu(q,Q),q.return=G,q):(q=zd(Q.type,Q.key,Q.props,null,G.mode,ae),fu(q,Q),q.return=G,q)}function Y(G,q,Q,ae){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=dg(Q,G.mode,ae),q.return=G,q):(q=p(q,Q.children||[]),q.return=G,q)}function ne(G,q,Q,ae,we){return q===null||q.tag!==7?(q=$a(Q,G.mode,ae,we),q.return=G,q):(q=p(q,Q),q.return=G,q)}function oe(G,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=hg(""+q,G.mode,Q),q.return=G,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return Q=zd(q.type,q.key,q.props,null,G.mode,Q),fu(Q,q),Q.return=G,Q;case R:return q=dg(q,G.mode,Q),q.return=G,q;case I:return q=Wa(q),oe(G,q,Q)}if(de(q)||z(q))return q=$a(q,G.mode,Q,null),q.return=G,q;if(typeof q.then=="function")return oe(G,Kd(q),Q);if(q.$$typeof===O)return oe(G,qd(G,q),Q);Qd(G,q)}return null}function W(G,q,Q,ae){var we=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return we!==null?null:A(G,q,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:return Q.key===we?j(G,q,Q,ae):null;case R:return Q.key===we?Y(G,q,Q,ae):null;case I:return Q=Wa(Q),W(G,q,Q,ae)}if(de(Q)||z(Q))return we!==null?null:ne(G,q,Q,ae,null);if(typeof Q.then=="function")return W(G,q,Kd(Q),ae);if(Q.$$typeof===O)return W(G,q,qd(G,Q),ae);Qd(G,Q)}return null}function J(G,q,Q,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return G=G.get(Q)||null,A(q,G,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return G=G.get(ae.key===null?Q:ae.key)||null,j(q,G,ae,we);case R:return G=G.get(ae.key===null?Q:ae.key)||null,Y(q,G,ae,we);case I:return ae=Wa(ae),J(G,q,Q,ae,we)}if(de(ae)||z(ae))return G=G.get(Q)||null,ne(q,G,ae,we,null);if(typeof ae.then=="function")return J(G,q,Q,Kd(ae),we);if(ae.$$typeof===O)return J(G,q,Q,qd(q,ae),we);Qd(q,ae)}return null}function ve(G,q,Q,ae){for(var we=null,We=null,be=q,Ue=q=0,He=null;be!==null&&Ue<Q.length;Ue++){be.index>Ue?(He=be,be=null):He=be.sibling;var Ze=W(G,be,Q[Ue],ae);if(Ze===null){be===null&&(be=He);break}r&&be&&Ze.alternate===null&&a(G,be),q=y(Ze,q,Ue),We===null?we=Ze:We.sibling=Ze,We=Ze,be=He}if(Ue===Q.length)return c(G,be),Ke&&Nr(G,Ue),we;if(be===null){for(;Ue<Q.length;Ue++)be=oe(G,Q[Ue],ae),be!==null&&(q=y(be,q,Ue),We===null?we=be:We.sibling=be,We=be);return Ke&&Nr(G,Ue),we}for(be=u(be);Ue<Q.length;Ue++)He=J(be,G,Ue,Q[Ue],ae),He!==null&&(r&&He.alternate!==null&&be.delete(He.key===null?Ue:He.key),q=y(He,q,Ue),We===null?we=He:We.sibling=He,We=He);return r&&be.forEach(function(Hs){return a(G,Hs)}),Ke&&Nr(G,Ue),we}function Ae(G,q,Q,ae){if(Q==null)throw Error(i(151));for(var we=null,We=null,be=q,Ue=q=0,He=null,Ze=Q.next();be!==null&&!Ze.done;Ue++,Ze=Q.next()){be.index>Ue?(He=be,be=null):He=be.sibling;var Hs=W(G,be,Ze.value,ae);if(Hs===null){be===null&&(be=He);break}r&&be&&Hs.alternate===null&&a(G,be),q=y(Hs,q,Ue),We===null?we=Hs:We.sibling=Hs,We=Hs,be=He}if(Ze.done)return c(G,be),Ke&&Nr(G,Ue),we;if(be===null){for(;!Ze.done;Ue++,Ze=Q.next())Ze=oe(G,Ze.value,ae),Ze!==null&&(q=y(Ze,q,Ue),We===null?we=Ze:We.sibling=Ze,We=Ze);return Ke&&Nr(G,Ue),we}for(be=u(be);!Ze.done;Ue++,Ze=Q.next())Ze=J(be,G,Ue,Ze.value,ae),Ze!==null&&(r&&Ze.alternate!==null&&be.delete(Ze.key===null?Ue:Ze.key),q=y(Ze,q,Ue),We===null?we=Ze:We.sibling=Ze,We=Ze);return r&&be.forEach(function(hV){return a(G,hV)}),Ke&&Nr(G,Ue),we}function dt(G,q,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===D&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:e:{for(var we=Q.key;q!==null;){if(q.key===we){if(we=Q.type,we===D){if(q.tag===7){c(G,q.sibling),ae=p(q,Q.props.children),ae.return=G,G=ae;break e}}else if(q.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===I&&Wa(we)===q.type){c(G,q.sibling),ae=p(q,Q.props),fu(ae,Q),ae.return=G,G=ae;break e}c(G,q);break}else a(G,q);q=q.sibling}Q.type===D?(ae=$a(Q.props.children,G.mode,ae,Q.key),ae.return=G,G=ae):(ae=zd(Q.type,Q.key,Q.props,null,G.mode,ae),fu(ae,Q),ae.return=G,G=ae)}return T(G);case R:e:{for(we=Q.key;q!==null;){if(q.key===we)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){c(G,q.sibling),ae=p(q,Q.children||[]),ae.return=G,G=ae;break e}else{c(G,q);break}else a(G,q);q=q.sibling}ae=dg(Q,G.mode,ae),ae.return=G,G=ae}return T(G);case I:return Q=Wa(Q),dt(G,q,Q,ae)}if(de(Q))return ve(G,q,Q,ae);if(z(Q)){if(we=z(Q),typeof we!="function")throw Error(i(150));return Q=we.call(Q),Ae(G,q,Q,ae)}if(typeof Q.then=="function")return dt(G,q,Kd(Q),ae);if(Q.$$typeof===O)return dt(G,q,qd(G,Q),ae);Qd(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(c(G,q.sibling),ae=p(q,Q),ae.return=G,G=ae):(c(G,q),ae=hg(Q,G.mode,ae),ae.return=G,G=ae),T(G)):c(G,q)}return function(G,q,Q,ae){try{du=0;var we=dt(G,q,Q,ae);return fl=null,we}catch(be){if(be===dl||be===Gd)throw be;var We=Kn(29,be,null,G.mode);return We.lanes=ae,We.return=G,We}finally{}}}var Ja=VT(!0),MT=VT(!1),Is=!1;function Sg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xg(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Rs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Cs(r,a,c){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(nt&2)!==0){var p=u.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),u.pending=a,a=Ud(r),yT(r,null,c),a}return jd(r,u,a,c),Ud(r)}function mu(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var u=a.lanes;u&=r.pendingLanes,c|=u,a.lanes=c,Bc(r,c)}}function Ag(r,a){var c=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,c===u)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,c=c.next}while(c!==null);y===null?p=y=a:y=y.next=a}else p=y=a;c={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}var Ig=!1;function pu(){if(Ig){var r=hl;if(r!==null)throw r}}function gu(r,a,c,u){Ig=!1;var p=r.updateQueue;Is=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var j=A,Y=j.next;j.next=null,T===null?y=Y:T.next=Y,T=j;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,A=ne.lastBaseUpdate,A!==T&&(A===null?ne.firstBaseUpdate=Y:A.next=Y,ne.lastBaseUpdate=j))}if(y!==null){var oe=p.baseState;T=0,ne=Y=j=null,A=y;do{var W=A.lane&-536870913,J=W!==A.lane;if(J?(qe&W)===W:(u&W)===W){W!==0&&W===ul&&(Ig=!0),ne!==null&&(ne=ne.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ve=r,Ae=A;W=a;var dt=c;switch(Ae.tag){case 1:if(ve=Ae.payload,typeof ve=="function"){oe=ve.call(dt,oe,W);break e}oe=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ae.payload,W=typeof ve=="function"?ve.call(dt,oe,W):ve,W==null)break e;oe=v({},oe,W);break e;case 2:Is=!0}}W=A.callback,W!==null&&(r.flags|=64,J&&(r.flags|=8192),J=p.callbacks,J===null?p.callbacks=[W]:J.push(W))}else J={lane:W,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ne===null?(Y=ne=J,j=oe):ne=ne.next=J,T|=W;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;J=A,A=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);ne===null&&(j=oe),p.baseState=j,p.firstBaseUpdate=Y,p.lastBaseUpdate=ne,y===null&&(p.shared.lanes=0),Ms|=T,r.lanes=T,r.memoizedState=oe}}function PT(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function OT(r,a){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)PT(c[r],a)}var ml=F(null),Yd=F(0);function LT(r,a){r=Fr,pe(Yd,r),pe(ml,a),Fr=r|a.baseLanes}function Rg(){pe(Yd,Fr),pe(ml,ml.current)}function Cg(){Fr=Yd.current,se(ml),se(Yd)}var Qn=F(null),fi=null;function Ds(r){var a=r.alternate;pe(Vt,Vt.current&1),pe(Qn,r),fi===null&&(a===null||ml.current!==null||a.memoizedState!==null)&&(fi=r)}function Dg(r){pe(Vt,Vt.current),pe(Qn,r),fi===null&&(fi=r)}function jT(r){r.tag===22?(pe(Vt,Vt.current),pe(Qn,r),fi===null&&(fi=r)):Ns()}function Ns(){pe(Vt,Vt.current),pe(Qn,Qn.current)}function Yn(r){se(Qn),fi===r&&(fi=null),se(Vt)}var Vt=F(0);function Xd(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Oy(c)||Ly(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Mr=0,Le=null,ut=null,Gt=null,Wd=!1,pl=!1,eo=!1,Zd=0,yu=0,gl=null,tk=0;function It(){throw Error(i(321))}function Ng(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!$n(r[c],a[c]))return!1;return!0}function kg(r,a,c,u,p,y){return Mr=y,Le=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=r===null||r.memoizedState===null?T1:Kg,eo=!1,y=c(u,p),eo=!1,pl&&(y=zT(a,c,u,p)),UT(r),y}function UT(r){H.H=bu;var a=ut!==null&&ut.next!==null;if(Mr=0,Gt=ut=Le=null,Wd=!1,yu=0,gl=null,a)throw Error(i(300));r===null||$t||(r=r.dependencies,r!==null&&Fd(r)&&($t=!0))}function zT(r,a,c,u){Le=r;var p=0;do{if(pl&&(gl=null),yu=0,pl=!1,25<=p)throw Error(i(301));if(p+=1,Gt=ut=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=E1,y=a(c,u)}while(pl);return y}function nk(){var r=H.H,a=r.useState()[0];return a=typeof a.then=="function"?vu(a):a,r=r.useState()[0],(ut!==null?ut.memoizedState:null)!==r&&(Le.flags|=1024),a}function Vg(){var r=Zd!==0;return Zd=0,r}function Mg(r,a,c){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~c}function Pg(r){if(Wd){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Wd=!1}Mr=0,Gt=ut=Le=null,pl=!1,yu=Zd=0,gl=null}function Cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Le.memoizedState=Gt=r:Gt=Gt.next=r,Gt}function Mt(){if(ut===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=ut.next;var a=Gt===null?Le.memoizedState:Gt.next;if(a!==null)Gt=a,ut=r;else{if(r===null)throw Le.alternate===null?Error(i(467)):Error(i(310));ut=r,r={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Gt===null?Le.memoizedState=Gt=r:Gt=Gt.next=r}return Gt}function Jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vu(r){var a=yu;return yu+=1,gl===null&&(gl=[]),r=DT(gl,r,a),a=Le,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?T1:Kg),r}function ef(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return vu(r);if(r.$$typeof===O)return hn(r)}throw Error(i(438,String(r)))}function Og(r){var a=null,c=Le.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var u=Le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Jd(),Le.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(r),u=0;u<r;u++)c[u]=M;return a.index++,c}function Pr(r,a){return typeof a=="function"?a(r):a}function tf(r){var a=Mt();return Lg(a,ut,r)}function Lg(r,a,c){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=c;var p=r.baseQueue,y=u.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}a.baseQueue=p=y,u.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{a=p.next;var A=T=null,j=null,Y=a,ne=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?(qe&oe)===oe:(Mr&oe)===oe){var W=Y.revertLane;if(W===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===ul&&(ne=!0);else if((Mr&W)===W){Y=Y.next,W===ul&&(ne=!0);continue}else oe={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(A=j=oe,T=y):j=j.next=oe,Le.lanes|=W,Ms|=W;oe=Y.action,eo&&c(y,oe),y=Y.hasEagerState?Y.eagerState:c(y,oe)}else W={lane:oe,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(A=j=W,T=y):j=j.next=W,Le.lanes|=oe,Ms|=oe;Y=Y.next}while(Y!==null&&Y!==a);if(j===null?T=y:j.next=A,!$n(y,r.memoizedState)&&($t=!0,ne&&(c=hl,c!==null)))throw c;r.memoizedState=y,r.baseState=T,r.baseQueue=j,u.lastRenderedState=y}return p===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function jg(r){var a=Mt(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var u=c.dispatch,p=c.pending,y=a.memoizedState;if(p!==null){c.pending=null;var T=p=p.next;do y=r(y,T.action),T=T.next;while(T!==p);$n(y,a.memoizedState)||($t=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,u]}function BT(r,a,c){var u=Le,p=Mt(),y=Ke;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=a();var T=!$n((ut||p).memoizedState,c);if(T&&(p.memoizedState=c,$t=!0),p=p.queue,Bg(HT.bind(null,u,p,r),[r]),p.getSnapshot!==a||T||Gt!==null&&Gt.memoizedState.tag&1){if(u.flags|=2048,yl(9,{destroy:void 0},qT.bind(null,u,p,c,a),null),ft===null)throw Error(i(349));y||(Mr&127)!==0||FT(u,a,c)}return c}function FT(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=Le.updateQueue,a===null?(a=Jd(),Le.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function qT(r,a,c,u){a.value=c,a.getSnapshot=u,GT(a)&&$T(r)}function HT(r,a,c){return c(function(){GT(a)&&$T(r)})}function GT(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!$n(r,c)}catch{return!0}}function $T(r){var a=Ga(r,2);a!==null&&Un(a,r,2)}function Ug(r){var a=Cn();if(typeof r=="function"){var c=r;if(r=c(),eo){ii(!0);try{c()}finally{ii(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:r},a}function KT(r,a,c,u){return r.baseState=c,Lg(r,ut,typeof u=="function"?u:Pr)}function ik(r,a,c,u,p){if(sf(r))throw Error(i(485));if(r=a.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};H.T!==null?c(!0):y.isTransition=!1,u(y),c=a.pending,c===null?(y.next=a.pending=y,QT(a,y)):(y.next=c.next,a.pending=c.next=y)}}function QT(r,a){var c=a.action,u=a.payload,p=r.state;if(a.isTransition){var y=H.T,T={};H.T=T;try{var A=c(p,u),j=H.S;j!==null&&j(T,A),YT(r,a,A)}catch(Y){zg(r,a,Y)}finally{y!==null&&T.types!==null&&(y.types=T.types),H.T=y}}else try{y=c(p,u),YT(r,a,y)}catch(Y){zg(r,a,Y)}}function YT(r,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(u){XT(r,a,u)},function(u){return zg(r,a,u)}):XT(r,a,c)}function XT(r,a,c){a.status="fulfilled",a.value=c,WT(a),r.state=c,a=r.pending,a!==null&&(c=a.next,c===a?r.pending=null:(c=c.next,a.next=c,QT(r,c)))}function zg(r,a,c){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=c,WT(a),a=a.next;while(a!==u)}r.action=null}function WT(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function ZT(r,a){return a}function JT(r,a){if(Ke){var c=ft.formState;if(c!==null){e:{var u=Le;if(Ke){if(gt){t:{for(var p=gt,y=di;p.nodeType!==8;){if(!y){p=null;break t}if(p=mi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){gt=mi(p.nextSibling),u=p.data==="F!";break e}}xs(u)}u=!1}u&&(a=c[0])}}return c=Cn(),c.memoizedState=c.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ZT,lastRenderedState:a},c.queue=u,c=v1.bind(null,Le,u),u.dispatch=c,u=Ug(!1),y=$g.bind(null,Le,!1,u.queue),u=Cn(),p={state:a,dispatch:null,action:r,pending:null},u.queue=p,c=ik.bind(null,Le,p,y,c),p.dispatch=c,u.memoizedState=r,[a,c,!1]}function e1(r){var a=Mt();return t1(a,ut,r)}function t1(r,a,c){if(a=Lg(r,a,ZT)[0],r=tf(Pr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=vu(a)}catch(T){throw T===dl?Gd:T}else u=a;a=Mt();var p=a.queue,y=p.dispatch;return c!==a.memoizedState&&(Le.flags|=2048,yl(9,{destroy:void 0},rk.bind(null,p,c),null)),[u,y,r]}function rk(r,a){r.action=a}function n1(r){var a=Mt(),c=ut;if(c!==null)return t1(a,c,r);Mt(),a=a.memoizedState,c=Mt();var u=c.queue.dispatch;return c.memoizedState=r,[a,u,!1]}function yl(r,a,c,u){return r={tag:r,create:c,deps:u,inst:a,next:null},a=Le.updateQueue,a===null&&(a=Jd(),Le.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=r.next=r:(u=c.next,c.next=r,r.next=u,a.lastEffect=r),r}function i1(){return Mt().memoizedState}function nf(r,a,c,u){var p=Cn();Le.flags|=r,p.memoizedState=yl(1|a,{destroy:void 0},c,u===void 0?null:u)}function rf(r,a,c,u){var p=Mt();u=u===void 0?null:u;var y=p.memoizedState.inst;ut!==null&&u!==null&&Ng(u,ut.memoizedState.deps)?p.memoizedState=yl(a,y,c,u):(Le.flags|=r,p.memoizedState=yl(1|a,y,c,u))}function r1(r,a){nf(8390656,8,r,a)}function Bg(r,a){rf(2048,8,r,a)}function sk(r){Le.flags|=4;var a=Le.updateQueue;if(a===null)a=Jd(),Le.updateQueue=a,a.events=[r];else{var c=a.events;c===null?a.events=[r]:c.push(r)}}function s1(r){var a=Mt().memoizedState;return sk({ref:a,nextImpl:r}),function(){if((nt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function a1(r,a){return rf(4,2,r,a)}function o1(r,a){return rf(4,4,r,a)}function l1(r,a){if(typeof a=="function"){r=r();var c=a(r);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function c1(r,a,c){c=c!=null?c.concat([r]):null,rf(4,4,l1.bind(null,a,r),c)}function Fg(){}function u1(r,a){var c=Mt();a=a===void 0?null:a;var u=c.memoizedState;return a!==null&&Ng(a,u[1])?u[0]:(c.memoizedState=[r,a],r)}function h1(r,a){var c=Mt();a=a===void 0?null:a;var u=c.memoizedState;if(a!==null&&Ng(a,u[1]))return u[0];if(u=r(),eo){ii(!0);try{r()}finally{ii(!1)}}return c.memoizedState=[u,a],u}function qg(r,a,c){return c===void 0||(Mr&1073741824)!==0&&(qe&261930)===0?r.memoizedState=a:(r.memoizedState=c,r=dE(),Le.lanes|=r,Ms|=r,c)}function d1(r,a,c,u){return $n(c,a)?c:ml.current!==null?(r=qg(r,c,u),$n(r,a)||($t=!0),r):(Mr&42)===0||(Mr&1073741824)!==0&&(qe&261930)===0?($t=!0,r.memoizedState=c):(r=dE(),Le.lanes|=r,Ms|=r,a)}function f1(r,a,c,u,p){var y=re.p;re.p=y!==0&&8>y?y:8;var T=H.T,A={};H.T=A,$g(r,!1,a,c);try{var j=p(),Y=H.S;if(Y!==null&&Y(A,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ne=ek(j,u);_u(r,a,ne,Zn(r))}else _u(r,a,u,Zn(r))}catch(oe){_u(r,a,{then:function(){},status:"rejected",reason:oe},Zn())}finally{re.p=y,T!==null&&A.types!==null&&(T.types=A.types),H.T=T}}function ak(){}function Hg(r,a,c,u){if(r.tag!==5)throw Error(i(476));var p=m1(r).queue;f1(r,p,a,ue,c===null?ak:function(){return p1(r),c(u)})}function m1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:ue},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:c},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function p1(r){var a=m1(r);a.next===null&&(a=r.alternate.memoizedState),_u(r,a.next.queue,{},Zn())}function Gg(){return hn(Ou)}function g1(){return Mt().memoizedState}function y1(){return Mt().memoizedState}function ok(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var c=Zn();r=Rs(c);var u=Cs(a,r,c);u!==null&&(Un(u,a,c),mu(u,a,c)),a={cache:bg()},r.payload=a;return}a=a.return}}function lk(r,a,c){var u=Zn();c={lane:u,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},sf(r)?_1(a,c):(c=cg(r,a,c,u),c!==null&&(Un(c,r,u),b1(c,a,u)))}function v1(r,a,c){var u=Zn();_u(r,a,c,u)}function _u(r,a,c,u){var p={lane:u,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(sf(r))_1(a,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,A=y(T,c);if(p.hasEagerState=!0,p.eagerState=A,$n(A,T))return jd(r,a,p,0),ft===null&&Ld(),!1}catch{}finally{}if(c=cg(r,a,p,u),c!==null)return Un(c,r,u),b1(c,a,u),!0}return!1}function $g(r,a,c,u){if(u={lane:2,revertLane:Sy(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},sf(r)){if(a)throw Error(i(479))}else a=cg(r,c,u,2),a!==null&&Un(a,r,2)}function sf(r){var a=r.alternate;return r===Le||a!==null&&a===Le}function _1(r,a){pl=Wd=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function b1(r,a,c){if((c&4194048)!==0){var u=a.lanes;u&=r.pendingLanes,c|=u,a.lanes=c,Bc(r,c)}}var bu={readContext:hn,use:ef,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};bu.useEffectEvent=It;var T1={readContext:hn,use:ef,useCallback:function(r,a){return Cn().memoizedState=[r,a===void 0?null:a],r},useContext:hn,useEffect:r1,useImperativeHandle:function(r,a,c){c=c!=null?c.concat([r]):null,nf(4194308,4,l1.bind(null,a,r),c)},useLayoutEffect:function(r,a){return nf(4194308,4,r,a)},useInsertionEffect:function(r,a){nf(4,2,r,a)},useMemo:function(r,a){var c=Cn();a=a===void 0?null:a;var u=r();if(eo){ii(!0);try{r()}finally{ii(!1)}}return c.memoizedState=[u,a],u},useReducer:function(r,a,c){var u=Cn();if(c!==void 0){var p=c(a);if(eo){ii(!0);try{c(a)}finally{ii(!1)}}}else p=a;return u.memoizedState=u.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},u.queue=r,r=r.dispatch=lk.bind(null,Le,r),[u.memoizedState,r]},useRef:function(r){var a=Cn();return r={current:r},a.memoizedState=r},useState:function(r){r=Ug(r);var a=r.queue,c=v1.bind(null,Le,a);return a.dispatch=c,[r.memoizedState,c]},useDebugValue:Fg,useDeferredValue:function(r,a){var c=Cn();return qg(c,r,a)},useTransition:function(){var r=Ug(!1);return r=f1.bind(null,Le,r.queue,!0,!1),Cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,c){var u=Le,p=Cn();if(Ke){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),ft===null)throw Error(i(349));(qe&127)!==0||FT(u,a,c)}p.memoizedState=c;var y={value:c,getSnapshot:a};return p.queue=y,r1(HT.bind(null,u,y,r),[r]),u.flags|=2048,yl(9,{destroy:void 0},qT.bind(null,u,y,c,a),null),c},useId:function(){var r=Cn(),a=ft.identifierPrefix;if(Ke){var c=ar,u=sr;c=(u&~(1<<32-Nt(u)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Zd++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=tk++,a="_"+a+"r_"+c.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:Gg,useFormState:JT,useActionState:JT,useOptimistic:function(r){var a=Cn();a.memoizedState=a.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=$g.bind(null,Le,!0,c),c.dispatch=a,[r,a]},useMemoCache:Og,useCacheRefresh:function(){return Cn().memoizedState=ok.bind(null,Le)},useEffectEvent:function(r){var a=Cn(),c={impl:r};return a.memoizedState=c,function(){if((nt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},Kg={readContext:hn,use:ef,useCallback:u1,useContext:hn,useEffect:Bg,useImperativeHandle:c1,useInsertionEffect:a1,useLayoutEffect:o1,useMemo:h1,useReducer:tf,useRef:i1,useState:function(){return tf(Pr)},useDebugValue:Fg,useDeferredValue:function(r,a){var c=Mt();return d1(c,ut.memoizedState,r,a)},useTransition:function(){var r=tf(Pr)[0],a=Mt().memoizedState;return[typeof r=="boolean"?r:vu(r),a]},useSyncExternalStore:BT,useId:g1,useHostTransitionStatus:Gg,useFormState:e1,useActionState:e1,useOptimistic:function(r,a){var c=Mt();return KT(c,ut,r,a)},useMemoCache:Og,useCacheRefresh:y1};Kg.useEffectEvent=s1;var E1={readContext:hn,use:ef,useCallback:u1,useContext:hn,useEffect:Bg,useImperativeHandle:c1,useInsertionEffect:a1,useLayoutEffect:o1,useMemo:h1,useReducer:jg,useRef:i1,useState:function(){return jg(Pr)},useDebugValue:Fg,useDeferredValue:function(r,a){var c=Mt();return ut===null?qg(c,r,a):d1(c,ut.memoizedState,r,a)},useTransition:function(){var r=jg(Pr)[0],a=Mt().memoizedState;return[typeof r=="boolean"?r:vu(r),a]},useSyncExternalStore:BT,useId:g1,useHostTransitionStatus:Gg,useFormState:n1,useActionState:n1,useOptimistic:function(r,a){var c=Mt();return ut!==null?KT(c,ut,r,a):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Og,useCacheRefresh:y1};E1.useEffectEvent=s1;function Qg(r,a,c,u){a=r.memoizedState,c=c(u,a),c=c==null?a:v({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Yg={enqueueSetState:function(r,a,c){r=r._reactInternals;var u=Zn(),p=Rs(u);p.payload=a,c!=null&&(p.callback=c),a=Cs(r,p,u),a!==null&&(Un(a,r,u),mu(a,r,u))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var u=Zn(),p=Rs(u);p.tag=1,p.payload=a,c!=null&&(p.callback=c),a=Cs(r,p,u),a!==null&&(Un(a,r,u),mu(a,r,u))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=Zn(),u=Rs(c);u.tag=2,a!=null&&(u.callback=a),a=Cs(r,u,c),a!==null&&(Un(a,r,c),mu(a,r,c))}};function w1(r,a,c,u,p,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,T):a.prototype&&a.prototype.isPureReactComponent?!au(c,u)||!au(p,y):!0}function S1(r,a,c,u){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,u),a.state!==r&&Yg.enqueueReplaceState(a,a.state,null)}function to(r,a){var c=a;if("ref"in a){c={};for(var u in a)u!=="ref"&&(c[u]=a[u])}if(r=r.defaultProps){c===a&&(c=v({},c));for(var p in r)c[p]===void 0&&(c[p]=r[p])}return c}function x1(r){Od(r)}function A1(r){console.error(r)}function I1(r){Od(r)}function af(r,a){try{var c=r.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function R1(r,a,c){try{var u=r.onCaughtError;u(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Xg(r,a,c){return c=Rs(c),c.tag=3,c.payload={element:null},c.callback=function(){af(r,a)},c}function C1(r){return r=Rs(r),r.tag=3,r}function D1(r,a,c,u){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;r.payload=function(){return p(y)},r.callback=function(){R1(a,c,u)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){R1(a,c,u),typeof p!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function ck(r,a,c,u,p){if(c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=c.alternate,a!==null&&cl(a,c,p,!0),c=Qn.current,c!==null){switch(c.tag){case 31:case 13:return fi===null?vf():c.alternate===null&&Rt===0&&(Rt=3),c.flags&=-257,c.flags|=65536,c.lanes=p,u===$d?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([u]):a.add(u),Ty(r,u,p)),!1;case 22:return c.flags|=65536,u===$d?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([u]):c.add(u)),Ty(r,u,p)),!1}throw Error(i(435,c.tag))}return Ty(r,u,p),vf(),!1}if(Ke)return a=Qn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,u!==pg&&(r=Error(i(422),{cause:u}),cu(ci(r,c)))):(u!==pg&&(a=Error(i(423),{cause:u}),cu(ci(a,c))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,u=ci(u,c),p=Xg(r.stateNode,u,p),Ag(r,p),Rt!==4&&(Rt=2)),!1;var y=Error(i(520),{cause:u});if(y=ci(y,c),Ru===null?Ru=[y]:Ru.push(y),Rt!==4&&(Rt=2),a===null)return!0;u=ci(u,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,r=p&-p,c.lanes|=r,r=Xg(c.stateNode,u,r),Ag(c,r),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ps===null||!Ps.has(y))))return c.flags|=65536,p&=-p,c.lanes|=p,p=C1(p),D1(p,r,c,u),Ag(c,p),!1}c=c.return}while(c!==null);return!1}var Wg=Error(i(461)),$t=!1;function dn(r,a,c,u){a.child=r===null?MT(a,null,c,u):Ja(a,r.child,c,u)}function N1(r,a,c,u,p){c=c.render;var y=a.ref;if("ref"in u){var T={};for(var A in u)A!=="ref"&&(T[A]=u[A])}else T=u;return Ya(a),u=kg(r,a,c,T,y,p),A=Vg(),r!==null&&!$t?(Mg(r,a,p),Or(r,a,p)):(Ke&&A&&fg(a),a.flags|=1,dn(r,a,u,p),a.child)}function k1(r,a,c,u,p){if(r===null){var y=c.type;return typeof y=="function"&&!ug(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,V1(r,a,y,u,p)):(r=zd(c.type,null,u,a,a.mode,p),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!sy(r,p)){var T=y.memoizedProps;if(c=c.compare,c=c!==null?c:au,c(T,u)&&r.ref===a.ref)return Or(r,a,p)}return a.flags|=1,r=Dr(y,u),r.ref=a.ref,r.return=a,a.child=r}function V1(r,a,c,u,p){if(r!==null){var y=r.memoizedProps;if(au(y,u)&&r.ref===a.ref)if($t=!1,a.pendingProps=u=y,sy(r,p))(r.flags&131072)!==0&&($t=!0);else return a.lanes=r.lanes,Or(r,a,p)}return Zg(r,a,c,u,p)}function M1(r,a,c,u){var p=u.children,y=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,r!==null){for(u=a.child=r.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,a.child=null;return P1(r,a,y,c,u)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Hd(a,y!==null?y.cachePool:null),y!==null?LT(a,y):Rg(),jT(a);else return u=a.lanes=536870912,P1(r,a,y!==null?y.baseLanes|c:c,c,u)}else y!==null?(Hd(a,y.cachePool),LT(a,y),Ns(),a.memoizedState=null):(r!==null&&Hd(a,null),Rg(),Ns());return dn(r,a,p,c),a.child}function Tu(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function P1(r,a,c,u,p){var y=Eg();return y=y===null?null:{parent:Ht._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},r!==null&&Hd(a,null),Rg(),jT(a),r!==null&&cl(r,a,u,!0),a.childLanes=p,null}function of(r,a){return a=cf({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function O1(r,a,c){return Ja(a,r.child,null,c),r=of(a,a.pendingProps),r.flags|=2,Yn(a),a.memoizedState=null,r}function uk(r,a,c){var u=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Ke){if(u.mode==="hidden")return r=of(a,u),a.lanes=536870912,Tu(null,r);if(Dg(a),(r=gt)?(r=QE(r,di),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ws!==null?{id:sr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},c=_T(r),c.return=a,a.child=c,un=a,gt=null)):r=null,r===null)throw xs(a);return a.lanes=536870912,null}return of(a,u)}var y=r.memoizedState;if(y!==null){var T=y.dehydrated;if(Dg(a),p)if(a.flags&256)a.flags&=-257,a=O1(r,a,c);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if($t||cl(r,a,c,!1),p=(c&r.childLanes)!==0,$t||p){if(u=ft,u!==null&&(T=Fc(u,c),T!==0&&T!==y.retryLane))throw y.retryLane=T,Ga(r,T),Un(u,r,T),Wg;vf(),a=O1(r,a,c)}else r=y.treeContext,gt=mi(T.nextSibling),un=a,Ke=!0,Ss=null,di=!1,r!==null&&ET(a,r),a=of(a,u),a.flags|=4096;return a}return r=Dr(r.child,{mode:u.mode,children:u.children}),r.ref=a.ref,a.child=r,r.return=a,r}function lf(r,a){var c=a.ref;if(c===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(a.flags|=4194816)}}function Zg(r,a,c,u,p){return Ya(a),c=kg(r,a,c,u,void 0,p),u=Vg(),r!==null&&!$t?(Mg(r,a,p),Or(r,a,p)):(Ke&&u&&fg(a),a.flags|=1,dn(r,a,c,p),a.child)}function L1(r,a,c,u,p,y){return Ya(a),a.updateQueue=null,c=zT(a,u,c,p),UT(r),u=Vg(),r!==null&&!$t?(Mg(r,a,y),Or(r,a,y)):(Ke&&u&&fg(a),a.flags|=1,dn(r,a,c,y),a.child)}function j1(r,a,c,u,p){if(Ya(a),a.stateNode===null){var y=sl,T=c.contextType;typeof T=="object"&&T!==null&&(y=hn(T)),y=new c(u,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Yg,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=u,y.state=a.memoizedState,y.refs={},Sg(a),T=c.contextType,y.context=typeof T=="object"&&T!==null?hn(T):sl,y.state=a.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(Qg(a,c,T,u),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Yg.enqueueReplaceState(y,y.state,null),gu(a,u,y,p),pu(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(r===null){y=a.stateNode;var A=a.memoizedProps,j=to(c,A);y.props=j;var Y=y.context,ne=c.contextType;T=sl,typeof ne=="object"&&ne!==null&&(T=hn(ne));var oe=c.getDerivedStateFromProps;ne=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,ne||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||Y!==T)&&S1(a,y,u,T),Is=!1;var W=a.memoizedState;y.state=W,gu(a,u,y,p),pu(),Y=a.memoizedState,A||W!==Y||Is?(typeof oe=="function"&&(Qg(a,c,oe,u),Y=a.memoizedState),(j=Is||w1(a,c,j,u,W,Y,T))?(ne||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Y),y.props=u,y.state=Y,y.context=T,u=j):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{y=a.stateNode,xg(r,a),T=a.memoizedProps,ne=to(c,T),y.props=ne,oe=a.pendingProps,W=y.context,Y=c.contextType,j=sl,typeof Y=="object"&&Y!==null&&(j=hn(Y)),A=c.getDerivedStateFromProps,(Y=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==oe||W!==j)&&S1(a,y,u,j),Is=!1,W=a.memoizedState,y.state=W,gu(a,u,y,p),pu();var J=a.memoizedState;T!==oe||W!==J||Is||r!==null&&r.dependencies!==null&&Fd(r.dependencies)?(typeof A=="function"&&(Qg(a,c,A,u),J=a.memoizedState),(ne=Is||w1(a,c,ne,u,W,J,j)||r!==null&&r.dependencies!==null&&Fd(r.dependencies))?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,J,j),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,J,j)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=J),y.props=u,y.state=J,y.context=j,u=ne):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),u=!1)}return y=u,lf(r,a),u=(a.flags&128)!==0,y||u?(y=a.stateNode,c=u&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&u?(a.child=Ja(a,r.child,null,p),a.child=Ja(a,null,c,p)):dn(r,a,c,p),a.memoizedState=y.state,r=a.child):r=Or(r,a,p),r}function U1(r,a,c,u){return Ka(),a.flags|=256,dn(r,a,c,u),a.child}var Jg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ey(r){return{baseLanes:r,cachePool:RT()}}function ty(r,a,c){return r=r!==null?r.childLanes&~c:0,a&&(r|=Wn),r}function z1(r,a,c){var u=a.pendingProps,p=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=r!==null&&r.memoizedState===null?!1:(Vt.current&2)!==0),T&&(p=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,r===null){if(Ke){if(p?Ds(a):Ns(),(r=gt)?(r=QE(r,di),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ws!==null?{id:sr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},c=_T(r),c.return=a,a.child=c,un=a,gt=null)):r=null,r===null)throw xs(a);return Ly(r)?a.lanes=32:a.lanes=536870912,null}var A=u.children;return u=u.fallback,p?(Ns(),p=a.mode,A=cf({mode:"hidden",children:A},p),u=$a(u,p,c,null),A.return=a,u.return=a,A.sibling=u,a.child=A,u=a.child,u.memoizedState=ey(c),u.childLanes=ty(r,T,c),a.memoizedState=Jg,Tu(null,u)):(Ds(a),ny(a,A))}var j=r.memoizedState;if(j!==null&&(A=j.dehydrated,A!==null)){if(y)a.flags&256?(Ds(a),a.flags&=-257,a=iy(r,a,c)):a.memoizedState!==null?(Ns(),a.child=r.child,a.flags|=128,a=null):(Ns(),A=u.fallback,p=a.mode,u=cf({mode:"visible",children:u.children},p),A=$a(A,p,c,null),A.flags|=2,u.return=a,A.return=a,u.sibling=A,a.child=u,Ja(a,r.child,null,c),u=a.child,u.memoizedState=ey(c),u.childLanes=ty(r,T,c),a.memoizedState=Jg,a=Tu(null,u));else if(Ds(a),Ly(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var Y=T.dgst;T=Y,u=Error(i(419)),u.stack="",u.digest=T,cu({value:u,source:null,stack:null}),a=iy(r,a,c)}else if($t||cl(r,a,c,!1),T=(c&r.childLanes)!==0,$t||T){if(T=ft,T!==null&&(u=Fc(T,c),u!==0&&u!==j.retryLane))throw j.retryLane=u,Ga(r,u),Un(T,r,u),Wg;Oy(A)||vf(),a=iy(r,a,c)}else Oy(A)?(a.flags|=192,a.child=r.child,a=null):(r=j.treeContext,gt=mi(A.nextSibling),un=a,Ke=!0,Ss=null,di=!1,r!==null&&ET(a,r),a=ny(a,u.children),a.flags|=4096);return a}return p?(Ns(),A=u.fallback,p=a.mode,j=r.child,Y=j.sibling,u=Dr(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,Y!==null?A=Dr(Y,A):(A=$a(A,p,c,null),A.flags|=2),A.return=a,u.return=a,u.sibling=A,a.child=u,Tu(null,u),u=a.child,A=r.child.memoizedState,A===null?A=ey(c):(p=A.cachePool,p!==null?(j=Ht._currentValue,p=p.parent!==j?{parent:j,pool:j}:p):p=RT(),A={baseLanes:A.baseLanes|c,cachePool:p}),u.memoizedState=A,u.childLanes=ty(r,T,c),a.memoizedState=Jg,Tu(r.child,u)):(Ds(a),c=r.child,r=c.sibling,c=Dr(c,{mode:"visible",children:u.children}),c.return=a,c.sibling=null,r!==null&&(T=a.deletions,T===null?(a.deletions=[r],a.flags|=16):T.push(r)),a.child=c,a.memoizedState=null,c)}function ny(r,a){return a=cf({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function cf(r,a){return r=Kn(22,r,null,a),r.lanes=0,r}function iy(r,a,c){return Ja(a,r.child,null,c),r=ny(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function B1(r,a,c){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a),vg(r.return,a,c)}function ry(r,a,c,u,p,y){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:c,tailMode:p,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=c,T.tailMode=p,T.treeForkCount=y)}function F1(r,a,c){var u=a.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var T=Vt.current,A=(T&2)!==0;if(A?(T=T&1|2,a.flags|=128):T&=1,pe(Vt,T),dn(r,a,u,c),u=Ke?lu:0,!A&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&B1(r,c,a);else if(r.tag===19)B1(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(c=a.child,p=null;c!==null;)r=c.alternate,r!==null&&Xd(r)===null&&(p=c),c=c.sibling;c=p,c===null?(p=a.child,a.child=null):(p=c.sibling,c.sibling=null),ry(a,!1,p,c,y,u);break;case"backwards":case"unstable_legacy-backwards":for(c=null,p=a.child,a.child=null;p!==null;){if(r=p.alternate,r!==null&&Xd(r)===null){a.child=p;break}r=p.sibling,p.sibling=c,c=p,p=r}ry(a,!0,c,null,y,u);break;case"together":ry(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Or(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),Ms|=a.lanes,(c&a.childLanes)===0)if(r!==null){if(cl(r,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,c=Dr(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=Dr(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function sy(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Fd(r)))}function hk(r,a,c){switch(a.tag){case 3:Wt(a,a.stateNode.containerInfo),As(a,Ht,r.memoizedState.cache),Ka();break;case 27:case 5:Ia(a);break;case 4:Wt(a,a.stateNode.containerInfo);break;case 10:As(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Dg(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Ds(a),a.flags|=128,null):(c&a.child.childLanes)!==0?z1(r,a,c):(Ds(a),r=Or(r,a,c),r!==null?r.sibling:null);Ds(a);break;case 19:var p=(r.flags&128)!==0;if(u=(c&a.childLanes)!==0,u||(cl(r,a,c,!1),u=(c&a.childLanes)!==0),p){if(u)return F1(r,a,c);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),pe(Vt,Vt.current),u)break;return null;case 22:return a.lanes=0,M1(r,a,c,a.pendingProps);case 24:As(a,Ht,r.memoizedState.cache)}return Or(r,a,c)}function q1(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps)$t=!0;else{if(!sy(r,c)&&(a.flags&128)===0)return $t=!1,hk(r,a,c);$t=(r.flags&131072)!==0}else $t=!1,Ke&&(a.flags&1048576)!==0&&TT(a,lu,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(r=Wa(a.elementType),a.type=r,typeof r=="function")ug(r)?(u=to(r,u),a.tag=1,a=j1(null,a,r,u,c)):(a.tag=0,a=Zg(null,a,r,u,c));else{if(r!=null){var p=r.$$typeof;if(p===X){a.tag=11,a=N1(null,a,r,u,c);break e}else if(p===x){a.tag=14,a=k1(null,a,r,u,c);break e}}throw a=Ce(r)||r,Error(i(306,a,""))}}return a;case 0:return Zg(r,a,a.type,a.pendingProps,c);case 1:return u=a.type,p=to(u,a.pendingProps),j1(r,a,u,p,c);case 3:e:{if(Wt(a,a.stateNode.containerInfo),r===null)throw Error(i(387));u=a.pendingProps;var y=a.memoizedState;p=y.element,xg(r,a),gu(a,u,null,c);var T=a.memoizedState;if(u=T.cache,As(a,Ht,u),u!==y.cache&&_g(a,[Ht],c,!0),pu(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=U1(r,a,u,c);break e}else if(u!==p){p=ci(Error(i(424)),a),cu(p),a=U1(r,a,u,c);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(gt=mi(r.firstChild),un=a,Ke=!0,Ss=null,di=!0,c=MT(a,null,u,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ka(),u===p){a=Or(r,a,c);break e}dn(r,a,u,c)}a=a.child}return a;case 26:return lf(r,a),r===null?(c=ew(a.type,null,a.pendingProps,null))?a.memoizedState=c:Ke||(c=a.type,r=a.pendingProps,u=xf(je.current).createElement(c),u[Bt]=a,u[rn]=r,fn(u,c,r),Ft(u),a.stateNode=u):a.memoizedState=ew(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Ia(a),r===null&&Ke&&(u=a.stateNode=WE(a.type,a.pendingProps,je.current),un=a,di=!0,p=gt,Us(a.type)?(jy=p,gt=mi(u.firstChild)):gt=p),dn(r,a,a.pendingProps.children,c),lf(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Ke&&((p=u=gt)&&(u=Bk(u,a.type,a.pendingProps,di),u!==null?(a.stateNode=u,un=a,gt=mi(u.firstChild),di=!1,p=!0):p=!1),p||xs(a)),Ia(a),p=a.type,y=a.pendingProps,T=r!==null?r.memoizedProps:null,u=y.children,Vy(p,y)?u=null:T!==null&&Vy(p,T)&&(a.flags|=32),a.memoizedState!==null&&(p=kg(r,a,nk,null,null,c),Ou._currentValue=p),lf(r,a),dn(r,a,u,c),a.child;case 6:return r===null&&Ke&&((r=c=gt)&&(c=Fk(c,a.pendingProps,di),c!==null?(a.stateNode=c,un=a,gt=null,r=!0):r=!1),r||xs(a)),null;case 13:return z1(r,a,c);case 4:return Wt(a,a.stateNode.containerInfo),u=a.pendingProps,r===null?a.child=Ja(a,null,u,c):dn(r,a,u,c),a.child;case 11:return N1(r,a,a.type,a.pendingProps,c);case 7:return dn(r,a,a.pendingProps,c),a.child;case 8:return dn(r,a,a.pendingProps.children,c),a.child;case 12:return dn(r,a,a.pendingProps.children,c),a.child;case 10:return u=a.pendingProps,As(a,a.type,u.value),dn(r,a,u.children,c),a.child;case 9:return p=a.type._context,u=a.pendingProps.children,Ya(a),p=hn(p),u=u(p),a.flags|=1,dn(r,a,u,c),a.child;case 14:return k1(r,a,a.type,a.pendingProps,c);case 15:return V1(r,a,a.type,a.pendingProps,c);case 19:return F1(r,a,c);case 31:return uk(r,a,c);case 22:return M1(r,a,c,a.pendingProps);case 24:return Ya(a),u=hn(Ht),r===null?(p=Eg(),p===null&&(p=ft,y=bg(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=c),p=y),a.memoizedState={parent:u,cache:p},Sg(a),As(a,Ht,p)):((r.lanes&c)!==0&&(xg(r,a),gu(a,null,null,c),pu()),p=r.memoizedState,y=a.memoizedState,p.parent!==u?(p={parent:u,cache:u},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),As(a,Ht,u)):(u=y.cache,As(a,Ht,u),u!==p.cache&&_g(a,[Ht],c,!0))),dn(r,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Lr(r){r.flags|=4}function ay(r,a,c,u,p){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(gE())r.flags|=8192;else throw Za=$d,wg}else r.flags&=-16777217}function H1(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!sw(a))if(gE())r.flags|=8192;else throw Za=$d,wg}function uf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?pd():536870912,r.lanes|=a,Tl|=a)}function Eu(r,a){if(!Ke)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var u=null;c!==null;)c.alternate!==null&&(u=c),c=c.sibling;u===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function yt(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,u=0;if(a)for(var p=r.child;p!==null;)c|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)c|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=c,a}function dk(r,a,c){var u=a.pendingProps;switch(mg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(a),null;case 1:return yt(a),null;case 3:return c=a.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Vr(Ht),vt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(ll(a)?Lr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,gg())),yt(a),null;case 26:var p=a.type,y=a.memoizedState;return r===null?(Lr(a),y!==null?(yt(a),H1(a,y)):(yt(a),ay(a,p,null,u,c))):y?y!==r.memoizedState?(Lr(a),yt(a),H1(a,y)):(yt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==u&&Lr(a),yt(a),ay(a,p,r,u,c)),null;case 27:if(zo(a),c=je.current,p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&Lr(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return yt(a),null}r=ge.current,ll(a)?wT(a):(r=WE(p,u,c),a.stateNode=r,Lr(a))}return yt(a),null;case 5:if(zo(a),p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&Lr(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return yt(a),null}if(y=ge.current,ll(a))wT(a);else{var T=xf(je.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(p,{is:u.is}):T.createElement(p)}}y[Bt]=a,y[rn]=u;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;e:switch(fn(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Lr(a)}}return yt(a),ay(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,c),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==u&&Lr(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(r=je.current,ll(a)){if(r=a.stateNode,c=a.memoizedProps,u=null,p=un,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}r[Bt]=a,r=!!(r.nodeValue===c||u!==null&&u.suppressHydrationWarning===!0||zE(r.nodeValue,c)),r||xs(a,!0)}else r=xf(r).createTextNode(u),r[Bt]=a,a.stateNode=r}return yt(a),null;case 31:if(c=a.memoizedState,r===null||r.memoizedState!==null){if(u=ll(a),c!==null){if(r===null){if(!u)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Bt]=a}else Ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yt(a),r=!1}else c=gg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return a.flags&256?(Yn(a),a):(Yn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return yt(a),null;case 13:if(u=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=ll(a),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Bt]=a}else Ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yt(a),p=!1}else p=gg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Yn(a),a):(Yn(a),null)}return Yn(a),(a.flags&128)!==0?(a.lanes=c,a):(c=u!==null,r=r!==null&&r.memoizedState!==null,c&&(u=a.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),c!==r&&c&&(a.child.flags|=8192),uf(a,a.updateQueue),yt(a),null);case 4:return vt(),r===null&&Ry(a.stateNode.containerInfo),yt(a),null;case 10:return Vr(a.type),yt(a),null;case 19:if(se(Vt),u=a.memoizedState,u===null)return yt(a),null;if(p=(a.flags&128)!==0,y=u.rendering,y===null)if(p)Eu(u,!1);else{if(Rt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=Xd(r),y!==null){for(a.flags|=128,Eu(u,!1),r=y.updateQueue,a.updateQueue=r,uf(a,r),a.subtreeFlags=0,r=c,c=a.child;c!==null;)vT(c,r),c=c.sibling;return pe(Vt,Vt.current&1|2),Ke&&Nr(a,u.treeForkCount),a.child}r=r.sibling}u.tail!==null&&In()>pf&&(a.flags|=128,p=!0,Eu(u,!1),a.lanes=4194304)}else{if(!p)if(r=Xd(y),r!==null){if(a.flags|=128,p=!0,r=r.updateQueue,a.updateQueue=r,uf(a,r),Eu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ke)return yt(a),null}else 2*In()-u.renderingStartTime>pf&&c!==536870912&&(a.flags|=128,p=!0,Eu(u,!1),a.lanes=4194304);u.isBackwards?(y.sibling=a.child,a.child=y):(r=u.last,r!==null?r.sibling=y:a.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=In(),r.sibling=null,c=Vt.current,pe(Vt,p?c&1|2:c&1),Ke&&Nr(a,u.treeForkCount),r):(yt(a),null);case 22:case 23:return Yn(a),Cg(),u=a.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(c&536870912)!==0&&(a.flags&128)===0&&(yt(a),a.subtreeFlags&6&&(a.flags|=8192)):yt(a),c=a.updateQueue,c!==null&&uf(a,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==c&&(a.flags|=2048),r!==null&&se(Xa),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Vr(Ht),yt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function fk(r,a){switch(mg(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Vr(Ht),vt(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return zo(a),null;case 31:if(a.memoizedState!==null){if(Yn(a),a.alternate===null)throw Error(i(340));Ka()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Yn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ka()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return se(Vt),null;case 4:return vt(),null;case 10:return Vr(a.type),null;case 22:case 23:return Yn(a),Cg(),r!==null&&se(Xa),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Vr(Ht),null;case 25:return null;default:return null}}function G1(r,a){switch(mg(a),a.tag){case 3:Vr(Ht),vt();break;case 26:case 27:case 5:zo(a);break;case 4:vt();break;case 31:a.memoizedState!==null&&Yn(a);break;case 13:Yn(a);break;case 19:se(Vt);break;case 10:Vr(a.type);break;case 22:case 23:Yn(a),Cg(),r!==null&&se(Xa);break;case 24:Vr(Ht)}}function wu(r,a){try{var c=a.updateQueue,u=c!==null?c.lastEffect:null;if(u!==null){var p=u.next;c=p;do{if((c.tag&r)===r){u=void 0;var y=c.create,T=c.inst;u=y(),T.destroy=u}c=c.next}while(c!==p)}}catch(A){at(a,a.return,A)}}function ks(r,a,c){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&r)===r){var T=u.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,p=a;var j=c,Y=A;try{Y()}catch(ne){at(p,j,ne)}}}u=u.next}while(u!==y)}}catch(ne){at(a,a.return,ne)}}function $1(r){var a=r.updateQueue;if(a!==null){var c=r.stateNode;try{OT(a,c)}catch(u){at(r,r.return,u)}}}function K1(r,a,c){c.props=to(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(u){at(r,a,u)}}function Su(r,a){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof c=="function"?r.refCleanup=c(u):c.current=u}}catch(p){at(r,a,p)}}function or(r,a){var c=r.ref,u=r.refCleanup;if(c!==null)if(typeof u=="function")try{u()}catch(p){at(r,a,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){at(r,a,p)}else c.current=null}function Q1(r){var a=r.type,c=r.memoizedProps,u=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&u.focus();break e;case"img":c.src?u.src=c.src:c.srcSet&&(u.srcset=c.srcSet)}}catch(p){at(r,r.return,p)}}function oy(r,a,c){try{var u=r.stateNode;Pk(u,r.type,c,a),u[rn]=a}catch(p){at(r,r.return,p)}}function Y1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Us(r.type)||r.tag===4}function ly(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Y1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Us(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function cy(r,a,c){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(r),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Ri));else if(u!==4&&(u===27&&Us(r.type)&&(c=r.stateNode,a=null),r=r.child,r!==null))for(cy(r,a,c),r=r.sibling;r!==null;)cy(r,a,c),r=r.sibling}function hf(r,a,c){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(u!==4&&(u===27&&Us(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(hf(r,a,c),r=r.sibling;r!==null;)hf(r,a,c),r=r.sibling}function X1(r){var a=r.stateNode,c=r.memoizedProps;try{for(var u=r.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);fn(a,u,c),a[Bt]=r,a[rn]=c}catch(y){at(r,r.return,y)}}var jr=!1,Kt=!1,uy=!1,W1=typeof WeakSet=="function"?WeakSet:Set,an=null;function mk(r,a){if(r=r.containerInfo,Ny=kf,r=cT(r),ig(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var u=c.getSelection&&c.getSelection();if(u&&u.rangeCount!==0){c=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var T=0,A=-1,j=-1,Y=0,ne=0,oe=r,W=null;t:for(;;){for(var J;oe!==c||p!==0&&oe.nodeType!==3||(A=T+p),oe!==y||u!==0&&oe.nodeType!==3||(j=T+u),oe.nodeType===3&&(T+=oe.nodeValue.length),(J=oe.firstChild)!==null;)W=oe,oe=J;for(;;){if(oe===r)break t;if(W===c&&++Y===p&&(A=T),W===y&&++ne===u&&(j=T),(J=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=J}c=A===-1||j===-1?null:{start:A,end:j}}else c=null}c=c||{start:0,end:0}}else c=null;for(ky={focusedElem:r,selectionRange:c},kf=!1,an=a;an!==null;)if(a=an,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,an=r;else for(;an!==null;){switch(a=an,y=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)p=r[c],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,c=a,p=y.memoizedProps,y=y.memoizedState,u=c.stateNode;try{var ve=to(c.type,p);r=u.getSnapshotBeforeUpdate(ve,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ae){at(c,c.return,Ae)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,c=r.nodeType,c===9)Py(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Py(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,an=r;break}an=a.return}}function Z1(r,a,c){var u=c.flags;switch(c.tag){case 0:case 11:case 15:zr(r,c),u&4&&wu(5,c);break;case 1:if(zr(r,c),u&4)if(r=c.stateNode,a===null)try{r.componentDidMount()}catch(T){at(c,c.return,T)}else{var p=to(c.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(p,a,r.__reactInternalSnapshotBeforeUpdate)}catch(T){at(c,c.return,T)}}u&64&&$1(c),u&512&&Su(c,c.return);break;case 3:if(zr(r,c),u&64&&(r=c.updateQueue,r!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{OT(r,a)}catch(T){at(c,c.return,T)}}break;case 27:a===null&&u&4&&X1(c);case 26:case 5:zr(r,c),a===null&&u&4&&Q1(c),u&512&&Su(c,c.return);break;case 12:zr(r,c);break;case 31:zr(r,c),u&4&&tE(r,c);break;case 13:zr(r,c),u&4&&nE(r,c),u&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=wk.bind(null,c),qk(r,c))));break;case 22:if(u=c.memoizedState!==null||jr,!u){a=a!==null&&a.memoizedState!==null||Kt,p=jr;var y=Kt;jr=u,(Kt=a)&&!y?Br(r,c,(c.subtreeFlags&8772)!==0):zr(r,c),jr=p,Kt=y}break;case 30:break;default:zr(r,c)}}function J1(r){var a=r.alternate;a!==null&&(r.alternate=null,J1(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Go(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,Pn=!1;function Ur(r,a,c){for(c=c.child;c!==null;)eE(r,a,c),c=c.sibling}function eE(r,a,c){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Si,c)}catch{}switch(c.tag){case 26:Kt||or(c,a),Ur(r,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Kt||or(c,a);var u=bt,p=Pn;Us(c.type)&&(bt=c.stateNode,Pn=!1),Ur(r,a,c),Vu(c.stateNode),bt=u,Pn=p;break;case 5:Kt||or(c,a);case 6:if(u=bt,p=Pn,bt=null,Ur(r,a,c),bt=u,Pn=p,bt!==null)if(Pn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(c.stateNode)}catch(y){at(c,a,y)}else try{bt.removeChild(c.stateNode)}catch(y){at(c,a,y)}break;case 18:bt!==null&&(Pn?(r=bt,$E(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Cl(r)):$E(bt,c.stateNode));break;case 4:u=bt,p=Pn,bt=c.stateNode.containerInfo,Pn=!0,Ur(r,a,c),bt=u,Pn=p;break;case 0:case 11:case 14:case 15:ks(2,c,a),Kt||ks(4,c,a),Ur(r,a,c);break;case 1:Kt||(or(c,a),u=c.stateNode,typeof u.componentWillUnmount=="function"&&K1(c,a,u)),Ur(r,a,c);break;case 21:Ur(r,a,c);break;case 22:Kt=(u=Kt)||c.memoizedState!==null,Ur(r,a,c),Kt=u;break;default:Ur(r,a,c)}}function tE(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Cl(r)}catch(c){at(a,a.return,c)}}}function nE(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Cl(r)}catch(c){at(a,a.return,c)}}function pk(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new W1),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new W1),a;default:throw Error(i(435,r.tag))}}function df(r,a){var c=pk(r);a.forEach(function(u){if(!c.has(u)){c.add(u);var p=Sk.bind(null,r,u);u.then(p,p)}})}function On(r,a){var c=a.deletions;if(c!==null)for(var u=0;u<c.length;u++){var p=c[u],y=r,T=a,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(Us(A.type)){bt=A.stateNode,Pn=!1;break e}break;case 5:bt=A.stateNode,Pn=!1;break e;case 3:case 4:bt=A.stateNode.containerInfo,Pn=!0;break e}A=A.return}if(bt===null)throw Error(i(160));eE(y,T,p),bt=null,Pn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)iE(a,r),a=a.sibling}var Mi=null;function iE(r,a){var c=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:On(a,r),Ln(r),u&4&&(ks(3,r,r.return),wu(3,r),ks(5,r,r.return));break;case 1:On(a,r),Ln(r),u&512&&(Kt||c===null||or(c,c.return)),u&64&&jr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?u:c.concat(u))));break;case 26:var p=Mi;if(On(a,r),Ln(r),u&512&&(Kt||c===null||or(c,c.return)),u&4){var y=c!==null?c.memoizedState:null;if(u=r.memoizedState,c===null)if(u===null)if(r.stateNode===null){e:{u=r.type,c=r.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Ki]||y[Bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),fn(y,u,c),y[Bt]=r,Ft(y),u=y;break e;case"link":var T=iw("link","href",p).get(u+(c.href||""));if(T){for(var A=0;A<T.length;A++)if(y=T[A],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(A,1);break t}}y=p.createElement(u),fn(y,u,c),p.head.appendChild(y);break;case"meta":if(T=iw("meta","content",p).get(u+(c.content||""))){for(A=0;A<T.length;A++)if(y=T[A],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(A,1);break t}}y=p.createElement(u),fn(y,u,c),p.head.appendChild(y);break;default:throw Error(i(468,u))}y[Bt]=r,Ft(y),u=y}r.stateNode=u}else rw(p,r.type,r.stateNode);else r.stateNode=nw(p,u,r.memoizedProps);else y!==u?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,u===null?rw(p,r.type,r.stateNode):nw(p,u,r.memoizedProps)):u===null&&r.stateNode!==null&&oy(r,r.memoizedProps,c.memoizedProps)}break;case 27:On(a,r),Ln(r),u&512&&(Kt||c===null||or(c,c.return)),c!==null&&u&4&&oy(r,r.memoizedProps,c.memoizedProps);break;case 5:if(On(a,r),Ln(r),u&512&&(Kt||c===null||or(c,c.return)),r.flags&32){p=r.stateNode;try{Mn(p,"")}catch(ve){at(r,r.return,ve)}}u&4&&r.stateNode!=null&&(p=r.memoizedProps,oy(r,p,c!==null?c.memoizedProps:p)),u&1024&&(uy=!0);break;case 6:if(On(a,r),Ln(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,c=r.stateNode;try{c.nodeValue=u}catch(ve){at(r,r.return,ve)}}break;case 3:if(Rf=null,p=Mi,Mi=Af(a.containerInfo),On(a,r),Mi=p,Ln(r),u&4&&c!==null&&c.memoizedState.isDehydrated)try{Cl(a.containerInfo)}catch(ve){at(r,r.return,ve)}uy&&(uy=!1,rE(r));break;case 4:u=Mi,Mi=Af(r.stateNode.containerInfo),On(a,r),Ln(r),Mi=u;break;case 12:On(a,r),Ln(r);break;case 31:On(a,r),Ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,df(r,u)));break;case 13:On(a,r),Ln(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(mf=In()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,df(r,u)));break;case 22:p=r.memoizedState!==null;var j=c!==null&&c.memoizedState!==null,Y=jr,ne=Kt;if(jr=Y||p,Kt=ne||j,On(a,r),Kt=ne,jr=Y,Ln(r),u&8192)e:for(a=r.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(c===null||j||jr||Kt||no(r)),c=null,a=r;;){if(a.tag===5||a.tag===26){if(c===null){j=c=a;try{if(y=j.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=j.stateNode;var oe=j.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;A.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(ve){at(j,j.return,ve)}}}else if(a.tag===6){if(c===null){j=a;try{j.stateNode.nodeValue=p?"":j.memoizedProps}catch(ve){at(j,j.return,ve)}}}else if(a.tag===18){if(c===null){j=a;try{var J=j.stateNode;p?KE(J,!0):KE(j.stateNode,!1)}catch(ve){at(j,j.return,ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=r.updateQueue,u!==null&&(c=u.retryQueue,c!==null&&(u.retryQueue=null,df(r,c))));break;case 19:On(a,r),Ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,df(r,u)));break;case 30:break;case 21:break;default:On(a,r),Ln(r)}}function Ln(r){var a=r.flags;if(a&2){try{for(var c,u=r.return;u!==null;){if(Y1(u)){c=u;break}u=u.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var p=c.stateNode,y=ly(r);hf(r,y,p);break;case 5:var T=c.stateNode;c.flags&32&&(Mn(T,""),c.flags&=-33);var A=ly(r);hf(r,A,T);break;case 3:case 4:var j=c.stateNode.containerInfo,Y=ly(r);cy(r,Y,j);break;default:throw Error(i(161))}}catch(ne){at(r,r.return,ne)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function rE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;rE(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function zr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Z1(r,a.alternate,a),a=a.sibling}function no(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:ks(4,a,a.return),no(a);break;case 1:or(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&K1(a,a.return,c),no(a);break;case 27:Vu(a.stateNode);case 26:case 5:or(a,a.return),no(a);break;case 22:a.memoizedState===null&&no(a);break;case 30:no(a);break;default:no(a)}r=r.sibling}}function Br(r,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,p=r,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:Br(p,y,c),wu(4,y);break;case 1:if(Br(p,y,c),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Y){at(u,u.return,Y)}if(u=y,p=u.updateQueue,p!==null){var A=u.stateNode;try{var j=p.shared.hiddenCallbacks;if(j!==null)for(p.shared.hiddenCallbacks=null,p=0;p<j.length;p++)PT(j[p],A)}catch(Y){at(u,u.return,Y)}}c&&T&64&&$1(y),Su(y,y.return);break;case 27:X1(y);case 26:case 5:Br(p,y,c),c&&u===null&&T&4&&Q1(y),Su(y,y.return);break;case 12:Br(p,y,c);break;case 31:Br(p,y,c),c&&T&4&&tE(p,y);break;case 13:Br(p,y,c),c&&T&4&&nE(p,y);break;case 22:y.memoizedState===null&&Br(p,y,c),Su(y,y.return);break;case 30:break;default:Br(p,y,c)}a=a.sibling}}function hy(r,a){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&uu(c))}function dy(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&uu(r))}function Pi(r,a,c,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)sE(r,a,c,u),a=a.sibling}function sE(r,a,c,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Pi(r,a,c,u),p&2048&&wu(9,a);break;case 1:Pi(r,a,c,u);break;case 3:Pi(r,a,c,u),p&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&uu(r)));break;case 12:if(p&2048){Pi(r,a,c,u),r=a.stateNode;try{var y=a.memoizedProps,T=y.id,A=y.onPostCommit;typeof A=="function"&&A(T,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){at(a,a.return,j)}}else Pi(r,a,c,u);break;case 31:Pi(r,a,c,u);break;case 13:Pi(r,a,c,u);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?Pi(r,a,c,u):xu(r,a):y._visibility&2?Pi(r,a,c,u):(y._visibility|=2,vl(r,a,c,u,(a.subtreeFlags&10256)!==0||!1)),p&2048&&hy(T,a);break;case 24:Pi(r,a,c,u),p&2048&&dy(a.alternate,a);break;default:Pi(r,a,c,u)}}function vl(r,a,c,u,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=r,T=a,A=c,j=u,Y=T.flags;switch(T.tag){case 0:case 11:case 15:vl(y,T,A,j,p),wu(8,T);break;case 23:break;case 22:var ne=T.stateNode;T.memoizedState!==null?ne._visibility&2?vl(y,T,A,j,p):xu(y,T):(ne._visibility|=2,vl(y,T,A,j,p)),p&&Y&2048&&hy(T.alternate,T);break;case 24:vl(y,T,A,j,p),p&&Y&2048&&dy(T.alternate,T);break;default:vl(y,T,A,j,p)}a=a.sibling}}function xu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=r,u=a,p=u.flags;switch(u.tag){case 22:xu(c,u),p&2048&&hy(u.alternate,u);break;case 24:xu(c,u),p&2048&&dy(u.alternate,u);break;default:xu(c,u)}a=a.sibling}}var Au=8192;function _l(r,a,c){if(r.subtreeFlags&Au)for(r=r.child;r!==null;)aE(r,a,c),r=r.sibling}function aE(r,a,c){switch(r.tag){case 26:_l(r,a,c),r.flags&Au&&r.memoizedState!==null&&tV(c,Mi,r.memoizedState,r.memoizedProps);break;case 5:_l(r,a,c);break;case 3:case 4:var u=Mi;Mi=Af(r.stateNode.containerInfo),_l(r,a,c),Mi=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Au,Au=16777216,_l(r,a,c),Au=u):_l(r,a,c));break;default:_l(r,a,c)}}function oE(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Iu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var u=a[c];an=u,cE(u,r)}oE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lE(r),r=r.sibling}function lE(r){switch(r.tag){case 0:case 11:case 15:Iu(r),r.flags&2048&&ks(9,r,r.return);break;case 3:Iu(r);break;case 12:Iu(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,ff(r)):Iu(r);break;default:Iu(r)}}function ff(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var u=a[c];an=u,cE(u,r)}oE(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:ks(8,a,a.return),ff(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,ff(a));break;default:ff(a)}r=r.sibling}}function cE(r,a){for(;an!==null;){var c=an;switch(c.tag){case 0:case 11:case 15:ks(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var u=c.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:uu(c.memoizedState.cache)}if(u=c.child,u!==null)u.return=c,an=u;else e:for(c=r;an!==null;){u=an;var p=u.sibling,y=u.return;if(J1(u),u===c){an=null;break e}if(p!==null){p.return=y,an=p;break e}an=y}}}var gk={getCacheForType:function(r){var a=hn(Ht),c=a.data.get(r);return c===void 0&&(c=r(),a.data.set(r,c)),c},cacheSignal:function(){return hn(Ht).controller.signal}},yk=typeof WeakMap=="function"?WeakMap:Map,nt=0,ft=null,Be=null,qe=0,st=0,Xn=null,Vs=!1,bl=!1,fy=!1,Fr=0,Rt=0,Ms=0,io=0,my=0,Wn=0,Tl=0,Ru=null,jn=null,py=!1,mf=0,uE=0,pf=1/0,gf=null,Ps=null,Jt=0,Os=null,El=null,qr=0,gy=0,yy=null,hE=null,Cu=0,vy=null;function Zn(){return(nt&2)!==0&&qe!==0?qe&-qe:H.T!==null?Sy():gd()}function dE(){if(Wn===0)if((qe&536870912)===0||Ke){var r=Da;Da<<=1,(Da&3932160)===0&&(Da=262144),Wn=r}else Wn=536870912;return r=Qn.current,r!==null&&(r.flags|=32),Wn}function Un(r,a,c){(r===ft&&(st===2||st===9)||r.cancelPendingCommit!==null)&&(wl(r,0),Ls(r,qe,Wn,!1)),Na(r,c),((nt&2)===0||r!==ft)&&(r===ft&&((nt&2)===0&&(io|=c),Rt===4&&Ls(r,qe,Wn,!1)),lr(r))}function fE(r,a,c){if((nt&6)!==0)throw Error(i(327));var u=!c&&(a&127)===0&&(a&r.expiredLanes)===0||xi(r,a),p=u?bk(r,a):by(r,a,!0),y=u;do{if(p===0){bl&&!u&&Ls(r,a,0,!1);break}else{if(c=r.current.alternate,y&&!vk(c)){p=by(r,a,!1),y=!1;continue}if(p===2){if(y=a,r.errorRecoveryDisabledLanes&y)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var A=r;p=Ru;var j=A.current.memoizedState.isDehydrated;if(j&&(wl(A,T).flags|=256),T=by(A,T,!1),T!==2){if(fy&&!j){A.errorRecoveryDisabledLanes|=y,io|=y,p=4;break e}y=jn,jn=p,y!==null&&(jn===null?jn=y:jn.push.apply(jn,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){wl(r,0),Ls(r,a,0,!0);break}e:{switch(u=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ls(u,a,Wn,!Vs);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=mf+300-In(),10<p)){if(Ls(u,a,Wn,!Vs),Hi(u,0,!0)!==0)break e;qr=a,u.timeoutHandle=HE(mE.bind(null,u,c,jn,gf,py,a,Wn,io,Tl,Vs,y,"Throttled",-0,0),p);break e}mE(u,c,jn,gf,py,a,Wn,io,Tl,Vs,y,null,-0,0)}}break}while(!0);lr(r)}function mE(r,a,c,u,p,y,T,A,j,Y,ne,oe,W,J){if(r.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ri},aE(a,y,oe);var ve=(y&62914560)===y?mf-In():(y&4194048)===y?uE-In():0;if(ve=nV(oe,ve),ve!==null){qr=y,r.cancelPendingCommit=ve(EE.bind(null,r,a,y,c,u,p,T,A,j,ne,oe,null,W,J)),Ls(r,y,T,!Y);return}}EE(r,a,y,c,u,p,T,A,j)}function vk(r){for(var a=r;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var u=0;u<c.length;u++){var p=c[u],y=p.getSnapshot;p=p.value;try{if(!$n(y(),p))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ls(r,a,c,u){a&=~my,a&=~io,r.suspendedLanes|=a,r.pingedLanes&=~a,u&&(r.warmLanes|=a),u=r.expirationTimes;for(var p=a;0<p;){var y=31-Nt(p),T=1<<y;u[y]=-1,p&=~T}c!==0&&ka(r,c,a)}function yf(){return(nt&6)===0?(Du(0),!1):!0}function _y(){if(Be!==null){if(st===0)var r=Be.return;else r=Be,kr=Qa=null,Pg(r),fl=null,du=0,r=Be;for(;r!==null;)G1(r.alternate,r),r=r.return;Be=null}}function wl(r,a){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,jk(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),qr=0,_y(),ft=r,Be=c=Dr(r.current,null),qe=a,st=0,Xn=null,Vs=!1,bl=xi(r,a),fy=!1,Tl=Wn=my=io=Ms=Rt=0,jn=Ru=null,py=!1,(a&8)!==0&&(a|=a&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=a;0<u;){var p=31-Nt(u),y=1<<p;a|=r[p],u&=~y}return Fr=a,Ld(),c}function pE(r,a){Le=null,H.H=bu,a===dl||a===Gd?(a=NT(),st=3):a===wg?(a=NT(),st=4):st=a===Wg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Xn=a,Be===null&&(Rt=1,af(r,ci(a,r.current)))}function gE(){var r=Qn.current;return r===null?!0:(qe&4194048)===qe?fi===null:(qe&62914560)===qe||(qe&536870912)!==0?r===fi:!1}function yE(){var r=H.H;return H.H=bu,r===null?bu:r}function vE(){var r=H.A;return H.A=gk,r}function vf(){Rt=4,Vs||(qe&4194048)!==qe&&Qn.current!==null||(bl=!0),(Ms&134217727)===0&&(io&134217727)===0||ft===null||Ls(ft,qe,Wn,!1)}function by(r,a,c){var u=nt;nt|=2;var p=yE(),y=vE();(ft!==r||qe!==a)&&(gf=null,wl(r,a)),a=!1;var T=Rt;e:do try{if(st!==0&&Be!==null){var A=Be,j=Xn;switch(st){case 8:_y(),T=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(a=!0);var Y=st;if(st=0,Xn=null,Sl(r,A,j,Y),c&&bl){T=0;break e}break;default:Y=st,st=0,Xn=null,Sl(r,A,j,Y)}}_k(),T=Rt;break}catch(ne){pE(r,ne)}while(!0);return a&&r.shellSuspendCounter++,kr=Qa=null,nt=u,H.H=p,H.A=y,Be===null&&(ft=null,qe=0,Ld()),T}function _k(){for(;Be!==null;)_E(Be)}function bk(r,a){var c=nt;nt|=2;var u=yE(),p=vE();ft!==r||qe!==a?(gf=null,pf=In()+500,wl(r,a)):bl=xi(r,a);e:do try{if(st!==0&&Be!==null){a=Be;var y=Xn;t:switch(st){case 1:st=0,Xn=null,Sl(r,a,y,1);break;case 2:case 9:if(CT(y)){st=0,Xn=null,bE(a);break}a=function(){st!==2&&st!==9||ft!==r||(st=7),lr(r)},y.then(a,a);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:CT(y)?(st=0,Xn=null,bE(a)):(st=0,Xn=null,Sl(r,a,y,7));break;case 5:var T=null;switch(Be.tag){case 26:T=Be.memoizedState;case 5:case 27:var A=Be;if(T?sw(T):A.stateNode.complete){st=0,Xn=null;var j=A.sibling;if(j!==null)Be=j;else{var Y=A.return;Y!==null?(Be=Y,_f(Y)):Be=null}break t}}st=0,Xn=null,Sl(r,a,y,5);break;case 6:st=0,Xn=null,Sl(r,a,y,6);break;case 8:_y(),Rt=6;break e;default:throw Error(i(462))}}Tk();break}catch(ne){pE(r,ne)}while(!0);return kr=Qa=null,H.H=u,H.A=p,nt=c,Be!==null?0:(ft=null,qe=0,Ld(),Rt)}function Tk(){for(;Be!==null&&!Xp();)_E(Be)}function _E(r){var a=q1(r.alternate,r,Fr);r.memoizedProps=r.pendingProps,a===null?_f(r):Be=a}function bE(r){var a=r,c=a.alternate;switch(a.tag){case 15:case 0:a=L1(c,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=L1(c,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:Pg(a);default:G1(c,a),a=Be=vT(a,Fr),a=q1(c,a,Fr)}r.memoizedProps=r.pendingProps,a===null?_f(r):Be=a}function Sl(r,a,c,u){kr=Qa=null,Pg(a),fl=null,du=0;var p=a.return;try{if(ck(r,p,a,c,qe)){Rt=1,af(r,ci(c,r.current)),Be=null;return}}catch(y){if(p!==null)throw Be=p,y;Rt=1,af(r,ci(c,r.current)),Be=null;return}a.flags&32768?(Ke||u===1?r=!0:bl||(qe&536870912)!==0?r=!1:(Vs=r=!0,(u===2||u===9||u===3||u===6)&&(u=Qn.current,u!==null&&u.tag===13&&(u.flags|=16384))),TE(a,r)):_f(a)}function _f(r){var a=r;do{if((a.flags&32768)!==0){TE(a,Vs);return}r=a.return;var c=dk(a.alternate,a,Fr);if(c!==null){Be=c;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=r}while(a!==null);Rt===0&&(Rt=5)}function TE(r,a){do{var c=fk(r.alternate,r);if(c!==null){c.flags&=32767,Be=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(r=r.sibling,r!==null)){Be=r;return}Be=r=c}while(r!==null);Rt=6,Be=null}function EE(r,a,c,u,p,y,T,A,j){r.cancelPendingCommit=null;do bf();while(Jt!==0);if((nt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=lg,Jp(r,c,y,T,A,j),r===ft&&(Be=ft=null,qe=0),El=a,Os=r,qr=c,gy=y,yy=p,hE=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,xk(fs,function(){return IE(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,p=re.p,re.p=2,T=nt,nt|=4;try{mk(r,a,c)}finally{nt=T,re.p=p,H.T=u}}Jt=1,wE(),SE(),xE()}}function wE(){if(Jt===1){Jt=0;var r=Os,a=El,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=H.T,H.T=null;var u=re.p;re.p=2;var p=nt;nt|=4;try{iE(a,r);var y=ky,T=cT(r.containerInfo),A=y.focusedElem,j=y.selectionRange;if(T!==A&&A&&A.ownerDocument&&lT(A.ownerDocument.documentElement,A)){if(j!==null&&ig(A)){var Y=j.start,ne=j.end;if(ne===void 0&&(ne=Y),"selectionStart"in A)A.selectionStart=Y,A.selectionEnd=Math.min(ne,A.value.length);else{var oe=A.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var J=W.getSelection(),ve=A.textContent.length,Ae=Math.min(j.start,ve),dt=j.end===void 0?Ae:Math.min(j.end,ve);!J.extend&&Ae>dt&&(T=dt,dt=Ae,Ae=T);var G=oT(A,Ae),q=oT(A,dt);if(G&&q&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==q.node||J.focusOffset!==q.offset)){var Q=oe.createRange();Q.setStart(G.node,G.offset),J.removeAllRanges(),Ae>dt?(J.addRange(Q),J.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),J.addRange(Q))}}}}for(oe=[],J=A;J=J.parentNode;)J.nodeType===1&&oe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<oe.length;A++){var ae=oe[A];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}kf=!!Ny,ky=Ny=null}finally{nt=p,re.p=u,H.T=c}}r.current=a,Jt=2}}function SE(){if(Jt===2){Jt=0;var r=Os,a=El,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=H.T,H.T=null;var u=re.p;re.p=2;var p=nt;nt|=4;try{Z1(r,a.alternate,a)}finally{nt=p,re.p=u,H.T=c}}Jt=3}}function xE(){if(Jt===4||Jt===3){Jt=0,cd();var r=Os,a=El,c=qr,u=hE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Jt=5:(Jt=0,El=Os=null,AE(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Ps=null),Ar(c),a=a.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Si,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=H.T,p=re.p,re.p=2,H.T=null;try{for(var y=r.onRecoverableError,T=0;T<u.length;T++){var A=u[T];y(A.value,{componentStack:A.stack})}}finally{H.T=a,re.p=p}}(qr&3)!==0&&bf(),lr(r),p=r.pendingLanes,(c&261930)!==0&&(p&42)!==0?r===vy?Cu++:(Cu=0,vy=r):Cu=0,Du(0)}}function AE(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,uu(a)))}function bf(){return wE(),SE(),xE(),IE()}function IE(){if(Jt!==5)return!1;var r=Os,a=gy;gy=0;var c=Ar(qr),u=H.T,p=re.p;try{re.p=32>c?32:c,H.T=null,c=yy,yy=null;var y=Os,T=qr;if(Jt=0,El=Os=null,qr=0,(nt&6)!==0)throw Error(i(331));var A=nt;if(nt|=4,lE(y.current),sE(y,y.current,T,c),nt=A,Du(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Si,y)}catch{}return!0}finally{re.p=p,H.T=u,AE(r,a)}}function RE(r,a,c){a=ci(c,a),a=Xg(r.stateNode,a,2),r=Cs(r,a,2),r!==null&&(Na(r,2),lr(r))}function at(r,a,c){if(r.tag===3)RE(r,r,c);else for(;a!==null;){if(a.tag===3){RE(a,r,c);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ps===null||!Ps.has(u))){r=ci(c,r),c=C1(2),u=Cs(a,c,2),u!==null&&(D1(c,u,a,r),Na(u,2),lr(u));break}}a=a.return}}function Ty(r,a,c){var u=r.pingCache;if(u===null){u=r.pingCache=new yk;var p=new Set;u.set(a,p)}else p=u.get(a),p===void 0&&(p=new Set,u.set(a,p));p.has(c)||(fy=!0,p.add(c),r=Ek.bind(null,r,a,c),a.then(r,r))}function Ek(r,a,c){var u=r.pingCache;u!==null&&u.delete(a),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,ft===r&&(qe&c)===c&&(Rt===4||Rt===3&&(qe&62914560)===qe&&300>In()-mf?(nt&2)===0&&wl(r,0):my|=c,Tl===qe&&(Tl=0)),lr(r)}function CE(r,a){a===0&&(a=pd()),r=Ga(r,a),r!==null&&(Na(r,a),lr(r))}function wk(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),CE(r,c)}function Sk(r,a){var c=0;switch(r.tag){case 31:case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(c=p.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),CE(r,c)}function xk(r,a){return Zt(r,a)}var Tf=null,xl=null,Ey=!1,Ef=!1,wy=!1,js=0;function lr(r){r!==xl&&r.next===null&&(xl===null?Tf=xl=r:xl=xl.next=r),Ef=!0,Ey||(Ey=!0,Ik())}function Du(r,a){if(!wy&&Ef){wy=!0;do for(var c=!1,u=Tf;u!==null;){if(r!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var T=u.suspendedLanes,A=u.pingedLanes;y=(1<<31-Nt(42|r)+1)-1,y&=p&~(T&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,VE(u,y))}else y=qe,y=Hi(u,u===ft?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||xi(u,y)||(c=!0,VE(u,y));u=u.next}while(c);wy=!1}}function Ak(){DE()}function DE(){Ef=Ey=!1;var r=0;js!==0&&Lk()&&(r=js);for(var a=In(),c=null,u=Tf;u!==null;){var p=u.next,y=NE(u,a);y===0?(u.next=null,c===null?Tf=p:c.next=p,p===null&&(xl=c)):(c=u,(r!==0||(y&3)!==0)&&(Ef=!0)),u=p}Jt!==0&&Jt!==5||Du(r),js!==0&&(js=0)}function NE(r,a){for(var c=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var T=31-Nt(y),A=1<<T,j=p[T];j===-1?((A&c)===0||(A&u)!==0)&&(p[T]=Zp(A,a)):j<=a&&(r.expiredLanes|=A),y&=~A}if(a=ft,c=qe,c=Hi(r,r===a?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,c===0||r===a&&(st===2||st===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&ds(u),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||xi(r,c)){if(a=c&-c,a===r.callbackPriority)return a;switch(u!==null&&ds(u),Ar(c)){case 2:case 8:c=zc;break;case 32:c=fs;break;case 268435456:c=ud;break;default:c=fs}return u=kE.bind(null,r),c=Zt(c,u),r.callbackPriority=a,r.callbackNode=c,a}return u!==null&&u!==null&&ds(u),r.callbackPriority=2,r.callbackNode=null,2}function kE(r,a){if(Jt!==0&&Jt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(bf()&&r.callbackNode!==c)return null;var u=qe;return u=Hi(r,r===ft?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(fE(r,u,a),NE(r,In()),r.callbackNode!=null&&r.callbackNode===c?kE.bind(null,r):null)}function VE(r,a){if(bf())return null;fE(r,a,!0)}function Ik(){Uk(function(){(nt&6)!==0?Zt(Uc,Ak):DE()})}function Sy(){if(js===0){var r=ul;r===0&&(r=Fi,Fi<<=1,(Fi&261888)===0&&(Fi=256)),js=r}return js}function ME(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Yo(""+r)}function PE(r,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,r.id&&c.setAttribute("form",r.id),a.parentNode.insertBefore(c,a),r=new FormData(r),c.parentNode.removeChild(c),r}function Rk(r,a,c,u,p){if(a==="submit"&&c&&c.stateNode===p){var y=ME((p[rn]||null).action),T=u.submitter;T&&(a=(a=T[rn]||null)?ME(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var A=new tr("action","action",null,u,p);r.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(js!==0){var j=T?PE(p,T):new FormData(p);Hg(c,{pending:!0,data:j,method:p.method,action:y},null,j)}}else typeof y=="function"&&(A.preventDefault(),j=T?PE(p,T):new FormData(p),Hg(c,{pending:!0,data:j,method:p.method,action:y},y,j))},currentTarget:p}]})}}for(var xy=0;xy<og.length;xy++){var Ay=og[xy],Ck=Ay.toLowerCase(),Dk=Ay[0].toUpperCase()+Ay.slice(1);Vi(Ck,"on"+Dk)}Vi(dT,"onAnimationEnd"),Vi(fT,"onAnimationIteration"),Vi(mT,"onAnimationStart"),Vi("dblclick","onDoubleClick"),Vi("focusin","onFocus"),Vi("focusout","onBlur"),Vi($N,"onTransitionRun"),Vi(KN,"onTransitionStart"),Vi(QN,"onTransitionCancel"),Vi(pT,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nu));function OE(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var u=r[c],p=u.event;u=u.listeners;e:{var y=void 0;if(a)for(var T=u.length-1;0<=T;T--){var A=u[T],j=A.instance,Y=A.currentTarget;if(A=A.listener,j!==y&&p.isPropagationStopped())break e;y=A,p.currentTarget=Y;try{y(p)}catch(ne){Od(ne)}p.currentTarget=null,y=j}else for(T=0;T<u.length;T++){if(A=u[T],j=A.instance,Y=A.currentTarget,A=A.listener,j!==y&&p.isPropagationStopped())break e;y=A,p.currentTarget=Y;try{y(p)}catch(ne){Od(ne)}p.currentTarget=null,y=j}}}}function Fe(r,a){var c=a[Ho];c===void 0&&(c=a[Ho]=new Set);var u=r+"__bubble";c.has(u)||(LE(a,r,2,!1),c.add(u))}function Iy(r,a,c){var u=0;a&&(u|=4),LE(c,r,u,a)}var wf="_reactListening"+Math.random().toString(36).slice(2);function Ry(r){if(!r[wf]){r[wf]=!0,qc.forEach(function(c){c!=="selectionchange"&&(Nk.has(c)||Iy(c,!1,r),Iy(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[wf]||(a[wf]=!0,Iy("selectionchange",!1,a))}}function LE(r,a,c,u){switch(dw(a)){case 2:var p=sV;break;case 8:p=aV;break;default:p=qy}c=p.bind(null,a,c,r),p=void 0,!La||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(a,c,{capture:!0,passive:p}):r.addEventListener(a,c,!0):p!==void 0?r.addEventListener(a,c,{passive:p}):r.addEventListener(a,c,!1)}function Cy(r,a,c,u,p){var y=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var A=u.stateNode.containerInfo;if(A===p)break;if(T===4)for(T=u.return;T!==null;){var j=T.tag;if((j===3||j===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;A!==null;){if(T=Qi(A),T===null)return;if(j=T.tag,j===5||j===6||j===26||j===27){u=y=T;continue e}A=A.parentNode}}u=u.return}_s(function(){var Y=y,ne=si(c),oe=[];e:{var W=gT.get(r);if(W!==void 0){var J=tr,ve=r;switch(r){case"keypress":if(Ua(c)===0)break e;case"keydown":case"keyup":J=Vd;break;case"focusin":ve="focus",J=Ba;break;case"focusout":ve="blur",J=Ba;break;case"beforeblur":case"afterblur":J=Ba;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=b;break;case dT:case fT:case mT:J=Ad;break;case pT:J=C;break;case"scroll":case"scrollend":J=tu;break;case"wheel":J=Z;break;case"copy":case"cut":case"paste":J=Id;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Cr;break;case"toggle":case"beforetoggle":J=Oe}var Ae=(a&4)!==0,dt=!Ae&&(r==="scroll"||r==="scrollend"),G=Ae?W!==null?W+"Capture":null:W;Ae=[];for(var q=Y,Q;q!==null;){var ae=q;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||G===null||(ae=Ci(q,G),ae!=null&&Ae.push(ku(q,ae,Q))),dt)break;q=q.return}0<Ae.length&&(W=new J(W,ve,null,c,ne),oe.push({event:W,listeners:Ae}))}}if((a&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",W&&c!==Zc&&(ve=c.relatedTarget||c.fromElement)&&(Qi(ve)||ve[$i]))break e;if((J||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,J?(ve=c.relatedTarget||c.toElement,J=Y,ve=ve?Qi(ve):null,ve!==null&&(dt=o(ve),Ae=ve.tag,ve!==dt||Ae!==5&&Ae!==27&&Ae!==6)&&(ve=null)):(J=null,ve=Y),J!==ve)){if(Ae=nu,ae="onMouseLeave",G="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ae=Cr,ae="onPointerLeave",G="onPointerEnter",q="pointer"),dt=J==null?W:Hn(J),Q=ve==null?W:Hn(ve),W=new Ae(ae,q+"leave",J,c,ne),W.target=dt,W.relatedTarget=Q,ae=null,Qi(ne)===Y&&(Ae=new Ae(G,q+"enter",ve,c,ne),Ae.target=Q,Ae.relatedTarget=dt,ae=Ae),dt=ae,J&&ve)t:{for(Ae=kk,G=J,q=ve,Q=0,ae=G;ae;ae=Ae(ae))Q++;ae=0;for(var we=q;we;we=Ae(we))ae++;for(;0<Q-ae;)G=Ae(G),Q--;for(;0<ae-Q;)q=Ae(q),ae--;for(;Q--;){if(G===q||q!==null&&G===q.alternate){Ae=G;break t}G=Ae(G),q=Ae(q)}Ae=null}else Ae=null;J!==null&&jE(oe,W,J,Ae,!1),ve!==null&&dt!==null&&jE(oe,dt,ve,Ae,!0)}}e:{if(W=Y?Hn(Y):window,J=W.nodeName&&W.nodeName.toLowerCase(),J==="select"||J==="input"&&W.type==="file")var We=tT;else if(Jb(W))if(nT)We=qN;else{We=BN;var be=zN}else J=W.nodeName,!J||J.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&Qo(Y.elementType)&&(We=tT):We=FN;if(We&&(We=We(r,Y))){eT(oe,We,c,ne);break e}be&&be(r,W,Y),r==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&Yc(W,"number",W.value)}switch(be=Y?Hn(Y):window,r){case"focusin":(Jb(be)||be.contentEditable==="true")&&(nl=be,rg=Y,ou=null);break;case"focusout":ou=rg=nl=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,uT(oe,c,ne);break;case"selectionchange":if(GN)break;case"keydown":case"keyup":uT(oe,c,ne)}var Ue;if(tt)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else tl?Fa(r,c)&&(He="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(He="onCompositionStart");He&&(rr&&c.locale!=="ko"&&(tl||He!=="onCompositionStart"?He==="onCompositionEnd"&&tl&&(Ue=eu()):(er=ne,Jc="value"in er?er.value:er.textContent,tl=!0)),be=Sf(Y,He),0<be.length&&(He=new ir(He,r,null,c,ne),oe.push({event:He,listeners:be}),Ue?He.data=Ue:(Ue=el(c),Ue!==null&&(He.data=Ue)))),(Ue=oi?ON(r,c):LN(r,c))&&(He=Sf(Y,"onBeforeInput"),0<He.length&&(be=new ir("onBeforeInput","beforeinput",null,c,ne),oe.push({event:be,listeners:He}),be.data=Ue)),Rk(oe,r,Y,c,ne)}OE(oe,a)})}function ku(r,a,c){return{instance:r,listener:a,currentTarget:c}}function Sf(r,a){for(var c=a+"Capture",u=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Ci(r,c),p!=null&&u.unshift(ku(r,p,y)),p=Ci(r,a),p!=null&&u.push(ku(r,p,y))),r.tag===3)return u;r=r.return}return[]}function kk(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function jE(r,a,c,u,p){for(var y=a._reactName,T=[];c!==null&&c!==u;){var A=c,j=A.alternate,Y=A.stateNode;if(A=A.tag,j!==null&&j===u)break;A!==5&&A!==26&&A!==27||Y===null||(j=Y,p?(Y=Ci(c,y),Y!=null&&T.unshift(ku(c,Y,j))):p||(Y=Ci(c,y),Y!=null&&T.push(ku(c,Y,j)))),c=c.return}T.length!==0&&r.push({event:a,listeners:T})}var Vk=/\r\n?/g,Mk=/\u0000|\uFFFD/g;function UE(r){return(typeof r=="string"?r:""+r).replace(Vk,`
`).replace(Mk,"")}function zE(r,a){return a=UE(a),UE(r)===a}function ht(r,a,c,u,p,y){switch(c){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Mn(r,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Mn(r,""+u);break;case"className":Gn(r,"class",u);break;case"tabIndex":Gn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Gn(r,c,u);break;case"style":Wc(r,u,y);break;case"data":if(a!=="object"){Gn(r,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||c!=="href")){r.removeAttribute(c);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(c);break}u=Yo(""+u),r.setAttribute(c,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&ht(r,a,"name",p.name,p,null),ht(r,a,"formEncType",p.formEncType,p,null),ht(r,a,"formMethod",p.formMethod,p,null),ht(r,a,"formTarget",p.formTarget,p,null)):(ht(r,a,"encType",p.encType,p,null),ht(r,a,"method",p.method,p,null),ht(r,a,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(c);break}u=Yo(""+u),r.setAttribute(c,u);break;case"onClick":u!=null&&(r.onclick=Ri);break;case"onScroll":u!=null&&Fe("scroll",r);break;case"onScrollEnd":u!=null&&Fe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(c=u.__html,c!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}c=Yo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(c,""+u):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":u===!0?r.setAttribute(c,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(c,u):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(c,u):r.removeAttribute(c);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(c):r.setAttribute(c,u);break;case"popover":Fe("beforetoggle",r),Fe("toggle",r),$o(r,"popover",u);break;case"xlinkActuate":qt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":qt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":qt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":qt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":qt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":qt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":qt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":qt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":qt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":$o(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=wd.get(c)||c,$o(r,c,u))}}function Dy(r,a,c,u,p,y){switch(c){case"style":Wc(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(c=u.__html,c!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof u=="string"?Mn(r,u):(typeof u=="number"||typeof u=="bigint")&&Mn(r,""+u);break;case"onScroll":u!=null&&Fe("scroll",r);break;case"onScrollEnd":u!=null&&Fe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),a=c.slice(2,p?c.length-7:void 0),y=r[rn]||null,y=y!=null?y[c]:null,typeof y=="function"&&r.removeEventListener(a,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(a,u,p);break e}c in r?r[c]=u:u===!0?r.setAttribute(c,""):$o(r,c,u)}}}function fn(r,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",r),Fe("load",r);var u=!1,p=!1,y;for(y in c)if(c.hasOwnProperty(y)){var T=c[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(r,a,y,T,c,null)}}p&&ht(r,a,"srcSet",c.srcSet,c,null),u&&ht(r,a,"src",c.src,c,null);return;case"input":Fe("invalid",r);var A=y=T=p=null,j=null,Y=null;for(u in c)if(c.hasOwnProperty(u)){var ne=c[u];if(ne!=null)switch(u){case"name":p=ne;break;case"type":T=ne;break;case"checked":j=ne;break;case"defaultChecked":Y=ne;break;case"value":y=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:ht(r,a,u,ne,c,null)}}bd(r,y,A,j,Y,T,p,!1);return;case"select":Fe("invalid",r),u=T=y=null;for(p in c)if(c.hasOwnProperty(p)&&(A=c[p],A!=null))switch(p){case"value":y=A;break;case"defaultValue":T=A;break;case"multiple":u=A;default:ht(r,a,p,A,c,null)}a=y,c=T,r.multiple=!!u,a!=null?ps(r,!!u,a,!1):c!=null&&ps(r,!!u,c,!0);return;case"textarea":Fe("invalid",r),y=p=u=null;for(T in c)if(c.hasOwnProperty(T)&&(A=c[T],A!=null))switch(T){case"value":u=A;break;case"defaultValue":p=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:ht(r,a,T,A,c,null)}gs(r,u,p,y);return;case"option":for(j in c)if(c.hasOwnProperty(j)&&(u=c[j],u!=null))switch(j){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ht(r,a,j,u,c,null)}return;case"dialog":Fe("beforetoggle",r),Fe("toggle",r),Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":Fe("load",r);break;case"video":case"audio":for(u=0;u<Nu.length;u++)Fe(Nu[u],r);break;case"image":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"embed":case"source":case"link":Fe("error",r),Fe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in c)if(c.hasOwnProperty(Y)&&(u=c[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(r,a,Y,u,c,null)}return;default:if(Qo(a)){for(ne in c)c.hasOwnProperty(ne)&&(u=c[ne],u!==void 0&&Dy(r,a,ne,u,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(u=c[A],u!=null&&ht(r,a,A,u,c,null))}function Pk(r,a,c,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,A=null,j=null,Y=null,ne=null;for(J in c){var oe=c[J];if(c.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":j=oe;default:u.hasOwnProperty(J)||ht(r,a,J,null,u,oe)}}for(var W in u){var J=u[W];if(oe=c[W],u.hasOwnProperty(W)&&(J!=null||oe!=null))switch(W){case"type":y=J;break;case"name":p=J;break;case"checked":Y=J;break;case"defaultChecked":ne=J;break;case"value":T=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:J!==oe&&ht(r,a,W,J,u,oe)}}Ko(r,T,A,j,Y,ne,y,p);return;case"select":J=T=A=W=null;for(y in c)if(j=c[y],c.hasOwnProperty(y)&&j!=null)switch(y){case"value":break;case"multiple":J=j;default:u.hasOwnProperty(y)||ht(r,a,y,null,u,j)}for(p in u)if(y=u[p],j=c[p],u.hasOwnProperty(p)&&(y!=null||j!=null))switch(p){case"value":W=y;break;case"defaultValue":A=y;break;case"multiple":T=y;default:y!==j&&ht(r,a,p,y,u,j)}a=A,c=T,u=J,W!=null?ps(r,!!c,W,!1):!!u!=!!c&&(a!=null?ps(r,!!c,a,!0):ps(r,!!c,c?[]:"",!1));return;case"textarea":J=W=null;for(A in c)if(p=c[A],c.hasOwnProperty(A)&&p!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ht(r,a,A,null,u,p)}for(T in u)if(p=u[T],y=c[T],u.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":W=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ht(r,a,T,p,u,y)}Td(r,W,J);return;case"option":for(var ve in c)if(W=c[ve],c.hasOwnProperty(ve)&&W!=null&&!u.hasOwnProperty(ve))switch(ve){case"selected":r.selected=!1;break;default:ht(r,a,ve,null,u,W)}for(j in u)if(W=u[j],J=c[j],u.hasOwnProperty(j)&&W!==J&&(W!=null||J!=null))switch(j){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ht(r,a,j,W,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in c)W=c[Ae],c.hasOwnProperty(Ae)&&W!=null&&!u.hasOwnProperty(Ae)&&ht(r,a,Ae,null,u,W);for(Y in u)if(W=u[Y],J=c[Y],u.hasOwnProperty(Y)&&W!==J&&(W!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,a));break;default:ht(r,a,Y,W,u,J)}return;default:if(Qo(a)){for(var dt in c)W=c[dt],c.hasOwnProperty(dt)&&W!==void 0&&!u.hasOwnProperty(dt)&&Dy(r,a,dt,void 0,u,W);for(ne in u)W=u[ne],J=c[ne],!u.hasOwnProperty(ne)||W===J||W===void 0&&J===void 0||Dy(r,a,ne,W,u,J);return}}for(var G in c)W=c[G],c.hasOwnProperty(G)&&W!=null&&!u.hasOwnProperty(G)&&ht(r,a,G,null,u,W);for(oe in u)W=u[oe],J=c[oe],!u.hasOwnProperty(oe)||W===J||W==null&&J==null||ht(r,a,oe,W,u,J)}function BE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ok(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,c=performance.getEntriesByType("resource"),u=0;u<c.length;u++){var p=c[u],y=p.transferSize,T=p.initiatorType,A=p.duration;if(y&&A&&BE(T)){for(T=0,A=p.responseEnd,u+=1;u<c.length;u++){var j=c[u],Y=j.startTime;if(Y>A)break;var ne=j.transferSize,oe=j.initiatorType;ne&&BE(oe)&&(j=j.responseEnd,T+=ne*(j<A?1:(A-Y)/(j-Y)))}if(--u,a+=8*(y+T)/(p.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Ny=null,ky=null;function xf(r){return r.nodeType===9?r:r.ownerDocument}function FE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qE(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Vy(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var My=null;function Lk(){var r=window.event;return r&&r.type==="popstate"?r===My?!1:(My=r,!0):(My=null,!1)}var HE=typeof setTimeout=="function"?setTimeout:void 0,jk=typeof clearTimeout=="function"?clearTimeout:void 0,GE=typeof Promise=="function"?Promise:void 0,Uk=typeof queueMicrotask=="function"?queueMicrotask:typeof GE<"u"?function(r){return GE.resolve(null).then(r).catch(zk)}:HE;function zk(r){setTimeout(function(){throw r})}function Us(r){return r==="head"}function $E(r,a){var c=a,u=0;do{var p=c.nextSibling;if(r.removeChild(c),p&&p.nodeType===8)if(c=p.data,c==="/$"||c==="/&"){if(u===0){r.removeChild(p),Cl(a);return}u--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")u++;else if(c==="html")Vu(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,Vu(c);for(var y=c.firstChild;y;){var T=y.nextSibling,A=y.nodeName;y[Ki]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=T}}else c==="body"&&Vu(r.ownerDocument.body);c=p}while(c);Cl(a)}function KE(r,a){var c=r;r=0;do{var u=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),u&&u.nodeType===8)if(c=u.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=u}while(c)}function Py(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Py(c),Go(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function Bk(r,a,c,u){for(;r.nodeType===1;){var p=c;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ki])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=mi(r.nextSibling),r===null)break}return null}function Fk(r,a,c){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=mi(r.nextSibling),r===null))return null;return r}function QE(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=mi(r.nextSibling),r===null))return null;return r}function Oy(r){return r.data==="$?"||r.data==="$~"}function Ly(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function qk(r,a){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||c.readyState!=="loading")a();else{var u=function(){a(),c.removeEventListener("DOMContentLoaded",u)};c.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function mi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var jy=null;function YE(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(a===0)return mi(r.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}r=r.nextSibling}return null}function XE(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return r;a--}else c!=="/$"&&c!=="/&"||a++}r=r.previousSibling}return null}function WE(r,a,c){switch(a=xf(c),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Vu(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Go(r)}var pi=new Map,ZE=new Set;function Af(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Hr=re.d;re.d={f:Hk,r:Gk,D:$k,C:Kk,L:Qk,m:Yk,X:Wk,S:Xk,M:Zk};function Hk(){var r=Hr.f(),a=yf();return r||a}function Gk(r){var a=ri(r);a!==null&&a.tag===5&&a.type==="form"?p1(a):Hr.r(r)}var Al=typeof document>"u"?null:document;function JE(r,a,c){var u=Al;if(u&&typeof a=="string"&&a){var p=Vn(a);p='link[rel="'+r+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),ZE.has(p)||(ZE.add(p),r={rel:r,crossOrigin:c,href:a},u.querySelector(p)===null&&(a=u.createElement("link"),fn(a,"link",r),Ft(a),u.head.appendChild(a)))}}function $k(r){Hr.D(r),JE("dns-prefetch",r,null)}function Kk(r,a){Hr.C(r,a),JE("preconnect",r,a)}function Qk(r,a,c){Hr.L(r,a,c);var u=Al;if(u&&r&&a){var p='link[rel="preload"][as="'+Vn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+Vn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+Vn(c.imageSizes)+'"]')):p+='[href="'+Vn(r)+'"]';var y=p;switch(a){case"style":y=Il(r);break;case"script":y=Rl(r)}pi.has(y)||(r=v({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:r,as:a},c),pi.set(y,r),u.querySelector(p)!==null||a==="style"&&u.querySelector(Mu(y))||a==="script"&&u.querySelector(Pu(y))||(a=u.createElement("link"),fn(a,"link",r),Ft(a),u.head.appendChild(a)))}}function Yk(r,a){Hr.m(r,a);var c=Al;if(c&&r){var u=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Vn(u)+'"][href="'+Vn(r)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Rl(r)}if(!pi.has(y)&&(r=v({rel:"modulepreload",href:r},a),pi.set(y,r),c.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Pu(y)))return}u=c.createElement("link"),fn(u,"link",r),Ft(u),c.head.appendChild(u)}}}function Xk(r,a,c){Hr.S(r,a,c);var u=Al;if(u&&r){var p=Yi(u).hoistableStyles,y=Il(r);a=a||"default";var T=p.get(y);if(!T){var A={loading:0,preload:null};if(T=u.querySelector(Mu(y)))A.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},c),(c=pi.get(y))&&Uy(r,c);var j=T=u.createElement("link");Ft(j),fn(j,"link",r),j._p=new Promise(function(Y,ne){j.onload=Y,j.onerror=ne}),j.addEventListener("load",function(){A.loading|=1}),j.addEventListener("error",function(){A.loading|=2}),A.loading|=4,If(T,a,u)}T={type:"stylesheet",instance:T,count:1,state:A},p.set(y,T)}}}function Wk(r,a){Hr.X(r,a);var c=Al;if(c&&r){var u=Yi(c).hoistableScripts,p=Rl(r),y=u.get(p);y||(y=c.querySelector(Pu(p)),y||(r=v({src:r,async:!0},a),(a=pi.get(p))&&zy(r,a),y=c.createElement("script"),Ft(y),fn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function Zk(r,a){Hr.M(r,a);var c=Al;if(c&&r){var u=Yi(c).hoistableScripts,p=Rl(r),y=u.get(p);y||(y=c.querySelector(Pu(p)),y||(r=v({src:r,async:!0,type:"module"},a),(a=pi.get(p))&&zy(r,a),y=c.createElement("script"),Ft(y),fn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function ew(r,a,c,u){var p=(p=je.current)?Af(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Il(c.href),c=Yi(p).hoistableStyles,u=c.get(a),u||(u={type:"style",instance:null,count:0,state:null},c.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Il(c.href);var y=Yi(p).hoistableStyles,T=y.get(r);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,T),(y=p.querySelector(Mu(r)))&&!y._p&&(T.instance=y,T.state.loading=5),pi.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},pi.set(r,c),y||Jk(p,r,c,T.state))),a&&u===null)throw Error(i(528,""));return T}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Rl(c),c=Yi(p).hoistableScripts,u=c.get(a),u||(u={type:"script",instance:null,count:0,state:null},c.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Il(r){return'href="'+Vn(r)+'"'}function Mu(r){return'link[rel="stylesheet"]['+r+"]"}function tw(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function Jk(r,a,c,u){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=r.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),fn(a,"link",c),Ft(a),r.head.appendChild(a))}function Rl(r){return'[src="'+Vn(r)+'"]'}function Pu(r){return"script[async]"+r}function nw(r,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var u=r.querySelector('style[data-href~="'+Vn(c.href)+'"]');if(u)return a.instance=u,Ft(u),u;var p=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Ft(u),fn(u,"style",p),If(u,c.precedence,r),a.instance=u;case"stylesheet":p=Il(c.href);var y=r.querySelector(Mu(p));if(y)return a.state.loading|=4,a.instance=y,Ft(y),y;u=tw(c),(p=pi.get(p))&&Uy(u,p),y=(r.ownerDocument||r).createElement("link"),Ft(y);var T=y;return T._p=new Promise(function(A,j){T.onload=A,T.onerror=j}),fn(y,"link",u),a.state.loading|=4,If(y,c.precedence,r),a.instance=y;case"script":return y=Rl(c.src),(p=r.querySelector(Pu(y)))?(a.instance=p,Ft(p),p):(u=c,(p=pi.get(y))&&(u=v({},c),zy(u,p)),r=r.ownerDocument||r,p=r.createElement("script"),Ft(p),fn(p,"link",u),r.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,If(u,c.precedence,r));return a.instance}function If(r,a,c){for(var u=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,T=0;T<u.length;T++){var A=u[T];if(A.dataset.precedence===a)y=A;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(r,a.firstChild))}function Uy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function zy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Rf=null;function iw(r,a,c){if(Rf===null){var u=new Map,p=Rf=new Map;p.set(c,u)}else p=Rf,u=p.get(c),u||(u=new Map,p.set(c,u));if(u.has(r))return u;for(u.set(r,null),c=c.getElementsByTagName(r),p=0;p<c.length;p++){var y=c[p];if(!(y[Ki]||y[Bt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=r+T;var A=u.get(T);A?A.push(y):u.set(T,[y])}}return u}function rw(r,a,c){r=r.ownerDocument||r,r.head.insertBefore(c,a==="title"?r.querySelector("head > title"):null)}function eV(r,a,c){if(c===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function sw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function tV(r,a,c,u){if(c.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var p=Il(u.href),y=a.querySelector(Mu(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Cf.bind(r),a.then(r,r)),c.state.loading|=4,c.instance=y,Ft(y);return}y=a.ownerDocument||a,u=tw(u),(p=pi.get(p))&&Uy(u,p),y=y.createElement("link"),Ft(y);var T=y;T._p=new Promise(function(A,j){T.onload=A,T.onerror=j}),fn(y,"link",u),c.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Cf.bind(r),a.addEventListener("load",c),a.addEventListener("error",c))}}var By=0;function nV(r,a){return r.stylesheets&&r.count===0&&Nf(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var u=setTimeout(function(){if(r.stylesheets&&Nf(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+a);0<r.imgBytes&&By===0&&(By=62500*Ok());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Nf(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>By?50:800)+a);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Cf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Df=null;function Nf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Df=new Map,a.forEach(iV,r),Df=null,Cf.call(r))}function iV(r,a){if(!(a.state.loading&4)){var c=Df.get(r);if(c)var u=c.get(null);else{c=new Map,Df.set(r,c);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),u=T)}u&&c.set(null,u)}p=a.instance,T=p.getAttribute("data-precedence"),y=c.get(T)||u,y===u&&c.set(null,p),c.set(T,p),this.count++,u=Cf.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),a.state.loading|=4}}var Ou={$$typeof:O,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function rV(r,a,c,u,p,y,T,A,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function aw(r,a,c,u,p,y,T,A,j,Y,ne,oe){return r=new rV(r,a,c,T,j,Y,ne,oe,A),a=1,y===!0&&(a|=24),y=Kn(3,null,null,a),r.current=y,y.stateNode=r,a=bg(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:u,isDehydrated:c,cache:a},Sg(y),r}function ow(r){return r?(r=sl,r):sl}function lw(r,a,c,u,p,y){p=ow(p),u.context===null?u.context=p:u.pendingContext=p,u=Rs(a),u.payload={element:c},y=y===void 0?null:y,y!==null&&(u.callback=y),c=Cs(r,u,a),c!==null&&(Un(c,r,a),mu(c,r,a))}function cw(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function Fy(r,a){cw(r,a),(r=r.alternate)&&cw(r,a)}function uw(r){if(r.tag===13||r.tag===31){var a=Ga(r,67108864);a!==null&&Un(a,r,67108864),Fy(r,67108864)}}function hw(r){if(r.tag===13||r.tag===31){var a=Zn();a=Va(a);var c=Ga(r,a);c!==null&&Un(c,r,a),Fy(r,a)}}var kf=!0;function sV(r,a,c,u){var p=H.T;H.T=null;var y=re.p;try{re.p=2,qy(r,a,c,u)}finally{re.p=y,H.T=p}}function aV(r,a,c,u){var p=H.T;H.T=null;var y=re.p;try{re.p=8,qy(r,a,c,u)}finally{re.p=y,H.T=p}}function qy(r,a,c,u){if(kf){var p=Hy(u);if(p===null)Cy(r,a,u,Vf,c),fw(r,u);else if(lV(p,r,a,c,u))u.stopPropagation();else if(fw(r,u),a&4&&-1<oV.indexOf(r)){for(;p!==null;){var y=ri(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=qi(y.pendingLanes);if(T!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var j=1<<31-Nt(T);A.entanglements[1]|=j,T&=~j}lr(y),(nt&6)===0&&(pf=In()+500,Du(0))}}break;case 31:case 13:A=Ga(y,2),A!==null&&Un(A,y,2),yf(),Fy(y,2)}if(y=Hy(u),y===null&&Cy(r,a,u,Vf,c),y===p)break;p=y}p!==null&&u.stopPropagation()}else Cy(r,a,u,null,c)}}function Hy(r){return r=si(r),Gy(r)}var Vf=null;function Gy(r){if(Vf=null,r=Qi(r),r!==null){var a=o(r);if(a===null)r=null;else{var c=a.tag;if(c===13){if(r=l(a),r!==null)return r;r=null}else if(c===31){if(r=h(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Vf=r,null}function dw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ca()){case Uc:return 2;case zc:return 8;case fs:case Wp:return 32;case ud:return 268435456;default:return 32}default:return 32}}var $y=!1,zs=null,Bs=null,Fs=null,Lu=new Map,ju=new Map,qs=[],oV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fw(r,a){switch(r){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":Lu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(a.pointerId)}}function Uu(r,a,c,u,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:c,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},a!==null&&(a=ri(a),a!==null&&uw(a)),r):(r.eventSystemFlags|=u,a=r.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),r)}function lV(r,a,c,u,p){switch(a){case"focusin":return zs=Uu(zs,r,a,c,u,p),!0;case"dragenter":return Bs=Uu(Bs,r,a,c,u,p),!0;case"mouseover":return Fs=Uu(Fs,r,a,c,u,p),!0;case"pointerover":var y=p.pointerId;return Lu.set(y,Uu(Lu.get(y)||null,r,a,c,u,p)),!0;case"gotpointercapture":return y=p.pointerId,ju.set(y,Uu(ju.get(y)||null,r,a,c,u,p)),!0}return!1}function mw(r){var a=Qi(r.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){r.blockedOn=a,Ai(r.priority,function(){hw(c)});return}}else if(a===31){if(a=h(c),a!==null){r.blockedOn=a,Ai(r.priority,function(){hw(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Mf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=Hy(r.nativeEvent);if(c===null){c=r.nativeEvent;var u=new c.constructor(c.type,c);Zc=u,c.target.dispatchEvent(u),Zc=null}else return a=ri(c),a!==null&&uw(a),r.blockedOn=c,!1;a.shift()}return!0}function pw(r,a,c){Mf(r)&&c.delete(a)}function cV(){$y=!1,zs!==null&&Mf(zs)&&(zs=null),Bs!==null&&Mf(Bs)&&(Bs=null),Fs!==null&&Mf(Fs)&&(Fs=null),Lu.forEach(pw),ju.forEach(pw)}function Pf(r,a){r.blockedOn===a&&(r.blockedOn=null,$y||($y=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cV)))}var Of=null;function gw(r){Of!==r&&(Of=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Of===r&&(Of=null);for(var a=0;a<r.length;a+=3){var c=r[a],u=r[a+1],p=r[a+2];if(typeof u!="function"){if(Gy(u||c)===null)continue;break}var y=ri(c);y!==null&&(r.splice(a,3),a-=3,Hg(y,{pending:!0,data:p,method:c.method,action:u},u,p))}}))}function Cl(r){function a(j){return Pf(j,r)}zs!==null&&Pf(zs,r),Bs!==null&&Pf(Bs,r),Fs!==null&&Pf(Fs,r),Lu.forEach(a),ju.forEach(a);for(var c=0;c<qs.length;c++){var u=qs[c];u.blockedOn===r&&(u.blockedOn=null)}for(;0<qs.length&&(c=qs[0],c.blockedOn===null);)mw(c),c.blockedOn===null&&qs.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(u=0;u<c.length;u+=3){var p=c[u],y=c[u+1],T=p[rn]||null;if(typeof y=="function")T||gw(c);else if(T){var A=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[rn]||null)A=T.formAction;else if(Gy(p)!==null)continue}else A=T.action;typeof A=="function"?c[u+1]=A:(c.splice(u,3),u-=3),gw(c)}}}function yw(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),u||setTimeout(c,20)}function c(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Ky(r){this._internalRoot=r}Lf.prototype.render=Ky.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,u=Zn();lw(c,u,r,a,null,null)},Lf.prototype.unmount=Ky.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;lw(r.current,2,null,r,null,null),yf(),a[$i]=null}};function Lf(r){this._internalRoot=r}Lf.prototype.unstable_scheduleHydration=function(r){if(r){var a=gd();r={blockedOn:null,target:r,priority:a};for(var c=0;c<qs.length&&a!==0&&a<qs[c].priority;c++);qs.splice(c,0,r),c===0&&mw(r)}};var vw=e.version;if(vw!=="19.2.0")throw Error(i(527,vw,"19.2.0"));re.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var uV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jf.isDisabled&&jf.supportsFiber)try{Si=jf.inject(uV),ln=jf}catch{}}return Bu.createRoot=function(r,a){if(!s(r))throw Error(i(299));var c=!1,u="",p=x1,y=A1,T=I1;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=aw(r,1,!1,null,null,c,u,null,p,y,T,yw),r[$i]=a.current,Ry(r),new Ky(a)},Bu.hydrateRoot=function(r,a,c){if(!s(r))throw Error(i(299));var u=!1,p="",y=x1,T=A1,A=I1,j=null;return c!=null&&(c.unstable_strictMode===!0&&(u=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(j=c.formState)),a=aw(r,1,!0,a,c??null,u,p,j,y,T,A,yw),a.context=ow(null),c=a.current,u=Zn(),u=Va(u),p=Rs(u),p.callback=null,Cs(c,p,u),c=u,a.current.lanes=c,Na(a,c),lr(a),r[$i]=a.current,Ry(r),new Lf(a)},Bu.version="19.2.0",Bu}var Rw;function TV(){if(Rw)return Xy.exports;Rw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xy.exports=bV(),Xy.exports}var EV=TV();const wV="modulepreload",SV=function(n){return"/house-budget-pwa/"+n},Cw={},xV=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var l=f;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=h?.nonce||h?.getAttribute("nonce");s=f(t.map(g=>{if(g=SV(g),g in Cw)return;Cw[g]=!0;const v=g.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":wV,v||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((R,D)=>{S.addEventListener("load",R),S.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(h){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=h,window.dispatchEvent(d),!d.defaultPrevented)throw h}return s.then(h=>{for(const d of h||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function AV(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:s,onRegisteredSW:o,onRegisterError:l}=n;let h,d;const f=async(v=!0)=>{await d};async function g(){if("serviceWorker"in navigator){if(h=await xV(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/house-budget-pwa/sw.js",{scope:"/house-budget-pwa/",type:"classic"})).catch(v=>{l?.(v)}),!h)return;h.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),h.addEventListener("installed",v=>{v.isUpdate||i?.()}),h.register({immediate:e}).then(v=>{o?o("/house-budget-pwa/sw.js",v):s?.(v)}).catch(v=>{l?.(v)})}}return d=g(),f}var Dw="popstate";function IV(n={}){function e(s,o){let{pathname:l="/",search:h="",hash:d=""}=jo(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),L0("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let l=s.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");h=f===-1?d:d.slice(0,f)}return h+"#"+(typeof o=="string"?o:yh(o))}function i(s,o){wi(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return CV(e,t,i,n)}function At(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RV(){return Math.random().toString(36).substring(2,10)}function Nw(n,e){return{usr:n.state,key:n.key,idx:e}}function L0(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?jo(e):e,state:t,key:e&&e.key||i||RV()}}function yh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function jo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function CV(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function v(){h="POP";let N=g(),U=N==null?null:N-f;f=N,d&&d({action:h,location:D.location,delta:U})}function _(N,U){h="PUSH";let B=L0(D.location,N,U);t&&t(B,N),f=g()+1;let O=Nw(B,f),X=D.createHref(B);try{l.pushState(O,"",X)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;s.location.assign(X)}o&&d&&d({action:h,location:D.location,delta:1})}function S(N,U){h="REPLACE";let B=L0(D.location,N,U);t&&t(B,N),f=g();let O=Nw(B,f),X=D.createHref(B);l.replaceState(O,"",X),o&&d&&d({action:h,location:D.location,delta:0})}function R(N){return DV(N)}let D={get action(){return h},get location(){return n(s,l)},listen(N){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Dw,v),d=N,()=>{s.removeEventListener(Dw,v),d=null}},createHref(N){return e(s,N)},createURL:R,encodeLocation(N){let U=R(N);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:_,replace:S,go(N){return l.go(N)}};return D}function DV(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),At(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:yh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function iI(n,e,t="/"){return NV(n,e,t,!1)}function NV(n,e,t,i){let s=typeof e=="string"?jo(e):e,o=es(s.pathname||"/",t);if(o==null)return null;let l=rI(n);kV(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let f=qV(o);h=BV(l[d],f,i)}return h}function rI(n,e=[],t=[],i="",s=!1){let o=(l,h,d=s,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;At(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let v=Zr([i,g.relativePath]),_=t.concat(g);l.children&&l.children.length>0&&(At(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),rI(l.children,e,_,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:UV(v,l.index),routesMeta:_})};return n.forEach((l,h)=>{if(l.path===""||!l.path?.includes("?"))o(l,h);else for(let d of sI(l.path))o(l,h,!0,d)}),e}function sI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=sI(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function kV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:zV(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var VV=/^:[\w-]+$/,MV=3,PV=2,OV=1,LV=10,jV=-2,kw=n=>n==="*";function UV(n,e){let t=n.split("/"),i=t.length;return t.some(kw)&&(i+=jV),e&&(i+=PV),t.filter(s=>!kw(s)).reduce((s,o)=>s+(VV.test(o)?MV:o===""?OV:LV),i)}function zV(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function BV(n,e,t=!1){let{routesMeta:i}=n,s={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],f=h===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=wm({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),_=d.route;if(!v&&f&&t&&!i[i.length-1].route.index&&(v=wm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Zr([o,v.pathname]),pathnameBase:QV(Zr([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=Zr([o,v.pathnameBase]))}return l}function wm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=FV(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:v},_)=>{if(g==="*"){let R=h[_]||"";l=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const S=h[_];return v&&!S?f[g]=void 0:f[g]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function FV(n,e=!1,t=!0){wi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function qV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function es(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var HV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GV=n=>HV.test(n);function $V(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?jo(n):n,o;if(t)if(GV(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),wi(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=Vw(t.substring(1),"/"):o=Vw(t,e)}else o=e;return{pathname:o,search:YV(i),hash:XV(s)}}function Vw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function e0(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function aI(n){let e=KV(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function oI(n,e,t,i=!1){let s;typeof n=="string"?s=jo(n):(s={...n},At(!s.pathname||!s.pathname.includes("?"),e0("?","pathname","search",s)),At(!s.pathname||!s.pathname.includes("#"),e0("#","pathname","hash",s)),At(!s.search||!s.search.includes("#"),e0("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=t;else{let v=e.length-1;if(!i&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}h=v>=0?e[v]:"/"}let d=$V(s,h),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Zr=n=>n.join("/").replace(/\/\/+/g,"/"),QV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),YV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,XV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function WV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lI=["POST","PUT","PATCH","DELETE"];new Set(lI);var ZV=["GET",...lI];new Set(ZV);var wc=L.createContext(null);wc.displayName="DataRouter";var ap=L.createContext(null);ap.displayName="DataRouterState";L.createContext(!1);var cI=L.createContext({isTransitioning:!1});cI.displayName="ViewTransition";var JV=L.createContext(new Map);JV.displayName="Fetchers";var eM=L.createContext(null);eM.displayName="Await";var Sr=L.createContext(null);Sr.displayName="Navigation";var qh=L.createContext(null);qh.displayName="Location";var xr=L.createContext({outlet:null,matches:[],isDataRoute:!1});xr.displayName="Route";var Wv=L.createContext(null);Wv.displayName="RouteError";function tM(n,{relative:e}={}){At(Hh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=L.useContext(Sr),{hash:s,pathname:o,search:l}=Gh(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Zr([t,o])),i.createHref({pathname:h,search:l,hash:s})}function Hh(){return L.useContext(qh)!=null}function _a(){return At(Hh(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(qh).location}var uI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hI(n){L.useContext(Sr).static||L.useLayoutEffect(n)}function ba(){let{isDataRoute:n}=L.useContext(xr);return n?pM():nM()}function nM(){At(Hh(),"useNavigate() may be used only in the context of a <Router> component.");let n=L.useContext(wc),{basename:e,navigator:t}=L.useContext(Sr),{matches:i}=L.useContext(xr),{pathname:s}=_a(),o=JSON.stringify(aI(i)),l=L.useRef(!1);return hI(()=>{l.current=!0}),L.useCallback((d,f={})=>{if(wi(l.current,uI),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=oI(d,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Zr([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,n])}L.createContext(null);function iM(){let{matches:n}=L.useContext(xr),e=n[n.length-1];return e?e.params:{}}function Gh(n,{relative:e}={}){let{matches:t}=L.useContext(xr),{pathname:i}=_a(),s=JSON.stringify(aI(t));return L.useMemo(()=>oI(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function rM(n,e){return dI(n,e)}function dI(n,e,t,i,s){At(Hh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=L.useContext(Sr),{matches:l}=L.useContext(xr),h=l[l.length-1],d=h?h.params:{},f=h?h.pathname:"/",g=h?h.pathnameBase:"/",v=h&&h.route;{let B=v&&v.path||"";fI(f,!v||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let _=_a(),S;if(e){let B=typeof e=="string"?jo(e):e;At(g==="/"||B.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${B.pathname}" was given in the \`location\` prop.`),S=B}else S=_;let R=S.pathname||"/",D=R;if(g!=="/"){let B=g.replace(/^\//,"").split("/");D="/"+R.replace(/^\//,"").split("/").slice(B.length).join("/")}let N=iI(n,{pathname:D});wi(v||N!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),wi(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=cM(N&&N.map(B=>Object.assign({},B,{params:Object.assign({},d,B.params),pathname:Zr([g,o.encodeLocation?o.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?g:Zr([g,o.encodeLocation?o.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),l,t,i,s);return e&&U?L.createElement(qh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},U):U}function sM(){let n=mM(),e=WV(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:o},"ErrorBoundary")," or"," ",L.createElement("code",{style:o},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:s},t):null,l)}var aM=L.createElement(sM,null),oM=class extends L.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?L.createElement(xr.Provider,{value:this.props.routeContext},L.createElement(Wv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lM({routeContext:n,match:e,children:t}){let i=L.useContext(wc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(xr.Provider,{value:n},t)}function cM(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let g=o.findIndex(v=>v.route.id&&l?.[v.route.id]!==void 0);At(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let v=o[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:_,errors:S}=t,R=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||R){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&i?(g,v)=>{i(g,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:v})}:void 0;return o.reduceRight((g,v,_)=>{let S,R=!1,D=null,N=null;t&&(S=l&&v.route.id?l[v.route.id]:void 0,D=v.route.errorElement||aM,h&&(d<0&&_===0?(fI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,N=null):d===_&&(R=!0,N=v.route.hydrateFallbackElement||null)));let U=e.concat(o.slice(0,_+1)),B=()=>{let O;return S?O=D:R?O=N:v.route.Component?O=L.createElement(v.route.Component,null):v.route.element?O=v.route.element:O=g,L.createElement(lM,{match:v,routeContext:{outlet:g,matches:U,isDataRoute:t!=null},children:O})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?L.createElement(oM,{location:t.location,revalidation:t.revalidation,component:D,error:S,children:B(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:f}):B()},null)}function Zv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uM(n){let e=L.useContext(wc);return At(e,Zv(n)),e}function hM(n){let e=L.useContext(ap);return At(e,Zv(n)),e}function dM(n){let e=L.useContext(xr);return At(e,Zv(n)),e}function Jv(n){let e=dM(n),t=e.matches[e.matches.length-1];return At(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function fM(){return Jv("useRouteId")}function mM(){let n=L.useContext(Wv),e=hM("useRouteError"),t=Jv("useRouteError");return n!==void 0?n:e.errors?.[t]}function pM(){let{router:n}=uM("useNavigate"),e=Jv("useNavigate"),t=L.useRef(!1);return hI(()=>{t.current=!0}),L.useCallback(async(s,o={})=>{wi(t.current,uI),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Mw={};function fI(n,e,t){!e&&!Mw[n]&&(Mw[n]=!0,wi(!1,t))}L.memo(gM);function gM({routes:n,future:e,state:t,unstable_onError:i}){return dI(n,void 0,t,i,e)}function ao(n){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yM({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:o=!1}){At(!Hh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),h=L.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=jo(t));let{pathname:d="/",search:f="",hash:g="",state:v=null,key:_="default"}=t,S=L.useMemo(()=>{let R=es(d,l);return R==null?null:{location:{pathname:R,search:f,hash:g,state:v,key:_},navigationType:i}},[l,d,f,g,v,_,i]);return wi(S!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:L.createElement(Sr.Provider,{value:h},L.createElement(qh.Provider,{children:e,value:S}))}function vM({children:n,location:e}){return rM(j0(n),e)}function j0(n,e=[]){let t=[];return L.Children.forEach(n,(i,s)=>{if(!L.isValidElement(i))return;let o=[...e,s];if(i.type===L.Fragment){t.push.apply(t,j0(i.props.children,o));return}At(i.type===ao,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=j0(i.props.children,o)),t.push(l)}),t}var Jf="get",em="application/x-www-form-urlencoded";function op(n){return n!=null&&typeof n.tagName=="string"}function _M(n){return op(n)&&n.tagName.toLowerCase()==="button"}function bM(n){return op(n)&&n.tagName.toLowerCase()==="form"}function TM(n){return op(n)&&n.tagName.toLowerCase()==="input"}function EM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function wM(n,e){return n.button===0&&(!e||e==="_self")&&!EM(n)}var zf=null;function SM(){if(zf===null)try{new FormData(document.createElement("form"),0),zf=!1}catch{zf=!0}return zf}var xM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function t0(n){return n!=null&&!xM.has(n)?(wi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${em}"`),null):n}function AM(n,e){let t,i,s,o,l;if(bM(n)){let h=n.getAttribute("action");i=h?es(h,e):null,t=n.getAttribute("method")||Jf,s=t0(n.getAttribute("enctype"))||em,o=new FormData(n)}else if(_M(n)||TM(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(i=d?es(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Jf,s=t0(n.getAttribute("formenctype"))||t0(h.getAttribute("enctype"))||em,o=new FormData(h,n),!SM()){let{name:f,type:g,value:v}=n;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,v)}}else{if(op(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Jf,i=null,s=em,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function e_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function IM(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&es(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function RM(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function DM(n,e,t){let i=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await RM(o,t);return l.links?l.links():[]}return[]}));return MM(i.flat(1).filter(CM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Pw(n,e,t,i,s,o){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,h=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||h(d,f)):o==="data"?e.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function NM(n,e,{includeHydrateFallback:t}={}){return kM(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function kM(n){return[...new Set(n)]}function VM(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function MM(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let o=JSON.stringify(VM(s));return t.has(o)||(t.add(o),i.push({key:o,link:s})),i},[])}function mI(){let n=L.useContext(wc);return e_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function PM(){let n=L.useContext(ap);return e_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var t_=L.createContext(void 0);t_.displayName="FrameworkContext";function pI(){let n=L.useContext(t_);return e_(n,"You must render this element inside a <HydratedRouter> element"),n}function OM(n,e){let t=L.useContext(t_),[i,s]=L.useState(!1),[o,l]=L.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=e,_=L.useRef(null);L.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let D=U=>{U.forEach(B=>{l(B.isIntersecting)})},N=new IntersectionObserver(D,{threshold:.5});return _.current&&N.observe(_.current),()=>{N.disconnect()}}},[n]),L.useEffect(()=>{if(i){let D=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(D)}}},[i]);let S=()=>{s(!0)},R=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:Fu(h,S),onBlur:Fu(d,R),onMouseEnter:Fu(f,S),onMouseLeave:Fu(g,R),onTouchStart:Fu(v,S)}]:[!1,_,{}]}function Fu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function LM({page:n,...e}){let{router:t}=mI(),i=L.useMemo(()=>iI(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?L.createElement(UM,{page:n,matches:i,...e}):null}function jM(n){let{manifest:e,routeModules:t}=pI(),[i,s]=L.useState([]);return L.useEffect(()=>{let o=!1;return DM(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),i}function UM({page:n,matches:e,...t}){let i=_a(),{manifest:s,routeModules:o}=pI(),{basename:l}=mI(),{loaderData:h,matches:d}=PM(),f=L.useMemo(()=>Pw(n,e,d,s,i,"data"),[n,e,d,s,i]),g=L.useMemo(()=>Pw(n,e,d,s,i,"assets"),[n,e,d,s,i]),v=L.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let R=new Set,D=!1;if(e.forEach(U=>{let B=s.routes[U.route.id];!B||!B.hasLoader||(!f.some(O=>O.route.id===U.route.id)&&U.route.id in h&&o[U.route.id]?.shouldRevalidate||B.hasClientLoader?D=!0:R.add(U.route.id))}),R.size===0)return[];let N=IM(n,l,"data");return D&&R.size>0&&N.searchParams.set("_routes",e.filter(U=>R.has(U.route.id)).map(U=>U.route.id).join(",")),[N.pathname+N.search]},[l,h,i,s,f,e,n,o]),_=L.useMemo(()=>NM(g,s),[g,s]),S=jM(g);return L.createElement(L.Fragment,null,v.map(R=>L.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),_.map(R=>L.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),S.map(({key:R,link:D})=>L.createElement("link",{key:R,nonce:t.nonce,...D})))}function zM(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var gI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gI&&(window.__reactRouterVersion="7.9.6")}catch{}function BM({basename:n,children:e,window:t}){let i=L.useRef();i.current==null&&(i.current=IV({window:t,v5Compat:!0}));let s=i.current,[o,l]=L.useState({action:s.action,location:s.location}),h=L.useCallback(d=>{L.startTransition(()=>l(d))},[l]);return L.useLayoutEffect(()=>s.listen(h),[s,h]),L.createElement(yM,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var yI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vI=L.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:o,replace:l,state:h,target:d,to:f,preventScrollReset:g,viewTransition:v,..._},S){let{basename:R}=L.useContext(Sr),D=typeof f=="string"&&yI.test(f),N,U=!1;if(typeof f=="string"&&D&&(N=f,gI))try{let V=new URL(window.location.href),M=f.startsWith("//")?new URL(V.protocol+f):new URL(f),k=es(M.pathname,R);M.origin===V.origin&&k!=null?f=k+M.search+M.hash:U=!0}catch{wi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=tM(f,{relative:s}),[O,X,te]=OM(i,_),ee=GM(f,{replace:l,state:h,target:d,preventScrollReset:g,relative:s,viewTransition:v});function x(V){e&&e(V),V.defaultPrevented||ee(V)}let I=L.createElement("a",{..._,...te,href:N||B,onClick:U||o?e:x,ref:zM(S,X),target:d,"data-discover":!D&&t==="render"?"true":void 0});return O&&!D?L.createElement(L.Fragment,null,I,L.createElement(LM,{page:B})):I});vI.displayName="Link";var FM=L.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:o,to:l,viewTransition:h,children:d,...f},g){let v=Gh(l,{relative:f.relative}),_=_a(),S=L.useContext(ap),{navigator:R,basename:D}=L.useContext(Sr),N=S!=null&&XM(v)&&h===!0,U=R.encodeLocation?R.encodeLocation(v).pathname:v.pathname,B=_.pathname,O=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(B=B.toLowerCase(),O=O?O.toLowerCase():null,U=U.toLowerCase()),O&&D&&(O=es(O,D)||O);const X=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let te=B===U||!s&&B.startsWith(U)&&B.charAt(X)==="/",ee=O!=null&&(O===U||!s&&O.startsWith(U)&&O.charAt(U.length)==="/"),x={isActive:te,isPending:ee,isTransitioning:N},I=te?e:void 0,V;typeof i=="function"?V=i(x):V=[i,te?"active":null,ee?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(x):o;return L.createElement(vI,{...f,"aria-current":I,className:V,ref:g,style:M,to:l,viewTransition:h},typeof d=="function"?d(x):d)});FM.displayName="NavLink";var qM=L.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:o,method:l=Jf,action:h,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:v,..._},S)=>{let R=QM(),D=YM(h,{relative:f}),N=l.toLowerCase()==="get"?"get":"post",U=typeof h=="string"&&yI.test(h),B=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let X=O.nativeEvent.submitter,te=X?.getAttribute("formmethod")||l;R(X||O.currentTarget,{fetcherKey:e,method:te,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:v})};return L.createElement("form",{ref:S,method:N,action:D,onSubmit:i?d:B,..._,"data-discover":!U&&n==="render"?"true":void 0})});qM.displayName="Form";function HM(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _I(n){let e=L.useContext(wc);return At(e,HM(n)),e}function GM(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:l}={}){let h=ba(),d=_a(),f=Gh(n,{relative:o});return L.useCallback(g=>{if(wM(g,e)){g.preventDefault();let v=t!==void 0?t:yh(d)===yh(f);h(n,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,h,f,t,i,e,n,s,o,l])}var $M=0,KM=()=>`__${String(++$M)}__`;function QM(){let{router:n}=_I("useSubmit"),{basename:e}=L.useContext(Sr),t=fM();return L.useCallback(async(i,s={})=>{let{action:o,method:l,encType:h,formData:d,body:f}=AM(i,e);if(s.navigate===!1){let g=s.fetcherKey||KM();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function YM(n,{relative:e}={}){let{basename:t}=L.useContext(Sr),i=L.useContext(xr);At(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...Gh(n||".",{relative:e})},l=_a();if(n==null){o.search=l.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let g=h.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Zr([t,o.pathname])),yh(o)}function XM(n,{relative:e}={}){let t=L.useContext(cI);At(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=_I("useViewTransitionState"),s=Gh(n,{relative:e});if(!t.isTransitioning)return!1;let o=es(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=es(t.nextLocation.pathname,i)||t.nextLocation.pathname;return wm(s.pathname,l)!=null||wm(s.pathname,o)!=null}const WM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),Ow=n=>{const e=ZM(n);return e.charAt(0).toUpperCase()+e.slice(1)},bI=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),JM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var e4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const t4=L.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:l,...h},d)=>L.createElement("svg",{ref:d,...e4,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:bI("lucide",s),...!o&&!JM(h)&&{"aria-hidden":"true"},...h},[...l.map(([f,g])=>L.createElement(f,g)),...Array.isArray(o)?o:[o]]));const et=(n,e)=>{const t=L.forwardRef(({className:i,...s},o)=>L.createElement(t4,{ref:o,iconNode:e,className:bI(`lucide-${WM(Ow(n))}`,`lucide-${n}`,i),...s}));return t.displayName=Ow(n),t};const n4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],TI=et("arrow-left",n4);const i4=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],r4=et("arrow-right-left",i4);const s4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],a4=et("chevron-down",s4);const o4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ol=et("chevron-right",o4);const l4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],c4=et("circle-arrow-down",l4);const u4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],h4=et("circle-arrow-up",u4);const d4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],f4=et("circle-check-big",d4);const m4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Lw=et("circle-check",m4);const p4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],g4=et("circle-plus",p4);const y4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jw=et("circle",y4);const v4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Sm=et("download",v4);const _4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],b4=et("eye-off",_4);const T4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],E4=et("eye",T4);const w4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],S4=et("file-text",w4);const x4=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],A4=et("folder-plus",x4);const I4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],R4=et("funnel",I4);const C4=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],D4=et("git-branch",C4);const N4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],k4=et("list",N4);const V4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],M4=et("loader",V4);const P4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],O4=et("log-out",P4);const L4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],U0=et("refresh-cw",L4);const j4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],U4=et("save",j4);const z4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],B4=et("search",z4);const F4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],q4=et("settings",F4);const H4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xm=et("trash-2",H4);const G4=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],EI=et("trash",G4);const $4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],K4=et("undo-2",$4);const Q4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Y4=et("upload",Q4);const X4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],W4=et("wallet",X4);const Z4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],J4=et("wifi-off",Z4);const eP=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],tP=et("wifi",eP);const nP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],n_=et("x",nP),Uw=n=>{let e;const t=new Set,i=(f,g)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(S=>S(e,_))}},s=()=>e,h={setState:i,getState:s,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=n(i,s,h);return h},iP=(n=>n?Uw(n):Uw),rP=n=>n;function sP(n,e=rP){const t=Uf.useSyncExternalStore(n.subscribe,Uf.useCallback(()=>e(n.getState()),[n,e]),Uf.useCallback(()=>e(n.getInitialState()),[n,e]));return Uf.useDebugValue(t),t}const zw=n=>{const e=iP(n),t=i=>sP(e,i);return Object.assign(t,e),t},i_=(n=>n?zw(n):zw);var Fl=9e15,Ta=1e9,z0="0123456789abcdef",Am="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Im="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",B0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Fl,maxE:Fl,crypto:!1},wI,Qr,Me=!0,lp="[DecimalError] ",ha=lp+"Invalid argument: ",SI=lp+"Precision limit exceeded",xI=lp+"crypto unavailable",AI="[object Decimal]",xn=Math.floor,en=Math.pow,aP=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,oP=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,lP=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,II=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ui=1e7,Ie=7,cP=9007199254740991,uP=Am.length-1,F0=Im.length-1,le={toStringTag:AI};le.absoluteValue=le.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Ee(n)};le.ceil=function(){return Ee(new this.constructor(this),this.e+1,2)};le.clampedTo=le.clamp=function(n,e){var t,i=this,s=i.constructor;if(n=new s(n),e=new s(e),!n.s||!e.s)return new s(NaN);if(n.gt(e))throw Error(ha+e);return t=i.cmp(n),t<0?n:i.cmp(e)>0?e:new s(i)};le.comparedTo=le.cmp=function(n){var e,t,i,s,o=this,l=o.d,h=(n=new o.constructor(n)).d,d=o.s,f=n.s;if(!l||!h)return!d||!f?NaN:d!==f?d:l===h?0:!l^d<0?1:-1;if(!l[0]||!h[0])return l[0]?d:h[0]?-f:0;if(d!==f)return d;if(o.e!==n.e)return o.e>n.e^d<0?1:-1;for(i=l.length,s=h.length,e=0,t=i<s?i:s;e<t;++e)if(l[e]!==h[e])return l[e]>h[e]^d<0?1:-1;return i===s?0:i>s^d<0?1:-1};le.cosine=le.cos=function(){var n,e,t=this,i=t.constructor;return t.d?t.d[0]?(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ie,i.rounding=1,t=hP(i,kI(i,t)),i.precision=n,i.rounding=e,Ee(Qr==2||Qr==3?t.neg():t,n,e,!0)):new i(1):new i(NaN)};le.cubeRoot=le.cbrt=function(){var n,e,t,i,s,o,l,h,d,f,g=this,v=g.constructor;if(!g.isFinite()||g.isZero())return new v(g);for(Me=!1,o=g.s*en(g.s*g,1/3),!o||Math.abs(o)==1/0?(t=gn(g.d),n=g.e,(o=(n-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=en(t,1/3),n=xn((n+1)/3)-(n%3==(n<0?-1:2)),o==1/0?t="5e"+n:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),i=new v(t),i.s=g.s):i=new v(o.toString()),l=(n=v.precision)+3;;)if(h=i,d=h.times(h).times(h),f=d.plus(g),i=mt(f.plus(g).times(h),f.plus(d),l+2,1),gn(h.d).slice(0,l)===(t=gn(i.d)).slice(0,l))if(t=t.slice(l-3,l+1),t=="9999"||!s&&t=="4999"){if(!s&&(Ee(h,n+1,0),h.times(h).times(h).eq(g))){i=h;break}l+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ee(i,n+1,1),e=!i.times(i).times(i).eq(g));break}return Me=!0,Ee(i,n,v.rounding,e)};le.decimalPlaces=le.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-xn(this.e/Ie))*Ie,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};le.dividedBy=le.div=function(n){return mt(this,new this.constructor(n))};le.dividedToIntegerBy=le.divToInt=function(n){var e=this,t=e.constructor;return Ee(mt(e,new t(n),0,1,1),t.precision,t.rounding)};le.equals=le.eq=function(n){return this.cmp(n)===0};le.floor=function(){return Ee(new this.constructor(this),this.e+1,3)};le.greaterThan=le.gt=function(n){return this.cmp(n)>0};le.greaterThanOrEqualTo=le.gte=function(n){var e=this.cmp(n);return e==1||e===0};le.hyperbolicCosine=le.cosh=function(){var n,e,t,i,s,o=this,l=o.constructor,h=new l(1);if(!o.isFinite())return new l(o.s?1/0:NaN);if(o.isZero())return h;t=l.precision,i=l.rounding,l.precision=t+Math.max(o.e,o.sd())+4,l.rounding=1,s=o.d.length,s<32?(n=Math.ceil(s/3),e=(1/up(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),o=ec(l,1,o.times(e),new l(1),!0);for(var d,f=n,g=new l(8);f--;)d=o.times(o),o=h.minus(d.times(g.minus(d.times(g))));return Ee(o,l.precision=t,l.rounding=i,!0)};le.hyperbolicSine=le.sinh=function(){var n,e,t,i,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<3)s=ec(o,2,s,s,!0);else{n=1.4*Math.sqrt(i),n=n>16?16:n|0,s=s.times(1/up(5,n)),s=ec(o,2,s,s,!0);for(var l,h=new o(5),d=new o(16),f=new o(20);n--;)l=s.times(s),s=s.times(h.plus(l.times(d.times(l).plus(f))))}return o.precision=e,o.rounding=t,Ee(s,e,t,!0)};le.hyperbolicTangent=le.tanh=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+7,i.rounding=1,mt(t.sinh(),t.cosh(),i.precision=n,i.rounding=e)):new i(t.s)};le.inverseCosine=le.acos=function(){var n=this,e=n.constructor,t=n.abs().cmp(1),i=e.precision,s=e.rounding;return t!==-1?t===0?n.isNeg()?fr(e,i,s):new e(0):new e(NaN):n.isZero()?fr(e,i+4,s).times(.5):(e.precision=i+6,e.rounding=1,n=new e(1).minus(n).div(n.plus(1)).sqrt().atan(),e.precision=i,e.rounding=s,n.times(2))};le.inverseHyperbolicCosine=le.acosh=function(){var n,e,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(n=i.precision,e=i.rounding,i.precision=n+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,Me=!1,t=t.times(t).minus(1).sqrt().plus(t),Me=!0,i.precision=n,i.rounding=e,t.ln()):new i(t)};le.inverseHyperbolicSine=le.asinh=function(){var n,e,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,Me=!1,t=t.times(t).plus(1).sqrt().plus(t),Me=!0,i.precision=n,i.rounding=e,t.ln())};le.inverseHyperbolicTangent=le.atanh=function(){var n,e,t,i,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(n=o.precision,e=o.rounding,i=s.sd(),Math.max(i,n)<2*-s.e-1?Ee(new o(s),n,e,!0):(o.precision=t=i-s.e,s=mt(s.plus(1),new o(1).minus(s),t+n,1),o.precision=n+4,o.rounding=1,s=s.ln(),o.precision=n,o.rounding=e,s.times(.5))):new o(NaN)};le.inverseSine=le.asin=function(){var n,e,t,i,s=this,o=s.constructor;return s.isZero()?new o(s):(e=s.abs().cmp(1),t=o.precision,i=o.rounding,e!==-1?e===0?(n=fr(o,t+4,i).times(.5),n.s=s.s,n):new o(NaN):(o.precision=t+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=i,s.times(2)))};le.inverseTangent=le.atan=function(){var n,e,t,i,s,o,l,h,d,f=this,g=f.constructor,v=g.precision,_=g.rounding;if(f.isFinite()){if(f.isZero())return new g(f);if(f.abs().eq(1)&&v+4<=F0)return l=fr(g,v+4,_).times(.25),l.s=f.s,l}else{if(!f.s)return new g(NaN);if(v+4<=F0)return l=fr(g,v+4,_).times(.5),l.s=f.s,l}for(g.precision=h=v+10,g.rounding=1,t=Math.min(28,h/Ie+2|0),n=t;n;--n)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Me=!1,e=Math.ceil(h/Ie),i=1,d=f.times(f),l=new g(f),s=f;n!==-1;)if(s=s.times(d),o=l.minus(s.div(i+=2)),s=s.times(d),l=o.plus(s.div(i+=2)),l.d[e]!==void 0)for(n=e;l.d[n]===o.d[n]&&n--;);return t&&(l=l.times(2<<t-1)),Me=!0,Ee(l,g.precision=v,g.rounding=_,!0)};le.isFinite=function(){return!!this.d};le.isInteger=le.isInt=function(){return!!this.d&&xn(this.e/Ie)>this.d.length-2};le.isNaN=function(){return!this.s};le.isNegative=le.isNeg=function(){return this.s<0};le.isPositive=le.isPos=function(){return this.s>0};le.isZero=function(){return!!this.d&&this.d[0]===0};le.lessThan=le.lt=function(n){return this.cmp(n)<0};le.lessThanOrEqualTo=le.lte=function(n){return this.cmp(n)<1};le.logarithm=le.log=function(n){var e,t,i,s,o,l,h,d,f=this,g=f.constructor,v=g.precision,_=g.rounding,S=5;if(n==null)n=new g(10),e=!0;else{if(n=new g(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new g(NaN);e=n.eq(10)}if(t=f.d,f.s<0||!t||!t[0]||f.eq(1))return new g(t&&!t[0]?-1/0:f.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(s=t[0];s%10===0;)s/=10;o=s!==1}if(Me=!1,h=v+S,l=ia(f,h),i=e?Rm(g,h+10):ia(n,h),d=mt(l,i,h,1),vh(d.d,s=v,_))do if(h+=10,l=ia(f,h),i=e?Rm(g,h+10):ia(n,h),d=mt(l,i,h,1),!o){+gn(d.d).slice(s+1,s+15)+1==1e14&&(d=Ee(d,v+1,0));break}while(vh(d.d,s+=10,_));return Me=!0,Ee(d,v,_)};le.minus=le.sub=function(n){var e,t,i,s,o,l,h,d,f,g,v,_,S=this,R=S.constructor;if(n=new R(n),!S.d||!n.d)return!S.s||!n.s?n=new R(NaN):S.d?n.s=-n.s:n=new R(n.d||S.s!==n.s?S:NaN),n;if(S.s!=n.s)return n.s=-n.s,S.plus(n);if(f=S.d,_=n.d,h=R.precision,d=R.rounding,!f[0]||!_[0]){if(_[0])n.s=-n.s;else if(f[0])n=new R(S);else return new R(d===3?-0:0);return Me?Ee(n,h,d):n}if(t=xn(n.e/Ie),g=xn(S.e/Ie),f=f.slice(),o=g-t,o){for(v=o<0,v?(e=f,o=-o,l=_.length):(e=_,t=g,l=f.length),i=Math.max(Math.ceil(h/Ie),l)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,l=_.length,v=i<l,v&&(l=i),i=0;i<l;i++)if(f[i]!=_[i]){v=f[i]<_[i];break}o=0}for(v&&(e=f,f=_,_=e,n.s=-n.s),l=f.length,i=_.length-l;i>0;--i)f[l++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(s=i;s&&f[--s]===0;)f[s]=Ui-1;--f[s],f[i]+=Ui}f[i]-=_[i]}for(;f[--l]===0;)f.pop();for(;f[0]===0;f.shift())--t;return f[0]?(n.d=f,n.e=cp(f,t),Me?Ee(n,h,d):n):new R(d===3?-0:0)};le.modulo=le.mod=function(n){var e,t=this,i=t.constructor;return n=new i(n),!t.d||!n.s||n.d&&!n.d[0]?new i(NaN):!n.d||t.d&&!t.d[0]?Ee(new i(t),i.precision,i.rounding):(Me=!1,i.modulo==9?(e=mt(t,n.abs(),0,3,1),e.s*=n.s):e=mt(t,n,0,i.modulo,1),e=e.times(n),Me=!0,t.minus(e))};le.naturalExponential=le.exp=function(){return q0(this)};le.naturalLogarithm=le.ln=function(){return ia(this)};le.negated=le.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Ee(n)};le.plus=le.add=function(n){var e,t,i,s,o,l,h,d,f,g,v=this,_=v.constructor;if(n=new _(n),!v.d||!n.d)return!v.s||!n.s?n=new _(NaN):v.d||(n=new _(n.d||v.s===n.s?v:NaN)),n;if(v.s!=n.s)return n.s=-n.s,v.minus(n);if(f=v.d,g=n.d,h=_.precision,d=_.rounding,!f[0]||!g[0])return g[0]||(n=new _(v)),Me?Ee(n,h,d):n;if(o=xn(v.e/Ie),i=xn(n.e/Ie),f=f.slice(),s=o-i,s){for(s<0?(t=f,s=-s,l=g.length):(t=g,i=o,l=f.length),o=Math.ceil(h/Ie),l=o>l?o+1:l+1,s>l&&(s=l,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(l=f.length,s=g.length,l-s<0&&(s=l,t=g,g=f,f=t),e=0;s;)e=(f[--s]=f[s]+g[s]+e)/Ui|0,f[s]%=Ui;for(e&&(f.unshift(e),++i),l=f.length;f[--l]==0;)f.pop();return n.d=f,n.e=cp(f,i),Me?Ee(n,h,d):n};le.precision=le.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(ha+n);return t.d?(e=RI(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};le.round=function(){var n=this,e=n.constructor;return Ee(new e(n),n.e+1,e.rounding)};le.sine=le.sin=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ie,i.rounding=1,t=fP(i,kI(i,t)),i.precision=n,i.rounding=e,Ee(Qr>2?t.neg():t,n,e,!0)):new i(NaN)};le.squareRoot=le.sqrt=function(){var n,e,t,i,s,o,l=this,h=l.d,d=l.e,f=l.s,g=l.constructor;if(f!==1||!h||!h[0])return new g(!f||f<0&&(!h||h[0])?NaN:h?l:1/0);for(Me=!1,f=Math.sqrt(+l),f==0||f==1/0?(e=gn(h),(e.length+d)%2==0&&(e+="0"),f=Math.sqrt(e),d=xn((d+1)/2)-(d<0||d%2),f==1/0?e="5e"+d:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+d),i=new g(e)):i=new g(f.toString()),t=(d=g.precision)+3;;)if(o=i,i=o.plus(mt(l,o,t+2,1)).times(.5),gn(o.d).slice(0,t)===(e=gn(i.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!s&&e=="4999"){if(!s&&(Ee(o,d+1,0),o.times(o).eq(l))){i=o;break}t+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ee(i,d+1,1),n=!i.times(i).eq(l));break}return Me=!0,Ee(i,d,g.rounding,n)};le.tangent=le.tan=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+10,i.rounding=1,t=t.sin(),t.s=1,t=mt(t,new i(1).minus(t.times(t)).sqrt(),n+10,0),i.precision=n,i.rounding=e,Ee(Qr==2||Qr==4?t.neg():t,n,e,!0)):new i(NaN)};le.times=le.mul=function(n){var e,t,i,s,o,l,h,d,f,g=this,v=g.constructor,_=g.d,S=(n=new v(n)).d;if(n.s*=g.s,!_||!_[0]||!S||!S[0])return new v(!n.s||_&&!_[0]&&!S||S&&!S[0]&&!_?NaN:!_||!S?n.s/0:n.s*0);for(t=xn(g.e/Ie)+xn(n.e/Ie),d=_.length,f=S.length,d<f&&(o=_,_=S,S=o,l=d,d=f,f=l),o=[],l=d+f,i=l;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,s=d+i;s>i;)h=o[s]+S[i]*_[s-i-1]+e,o[s--]=h%Ui|0,e=h/Ui|0;o[s]=(o[s]+e)%Ui|0}for(;!o[--l];)o.pop();return e?++t:o.shift(),n.d=o,n.e=cp(o,t),Me?Ee(n,v.precision,v.rounding):n};le.toBinary=function(n,e){return r_(this,2,n,e)};le.toDecimalPlaces=le.toDP=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(qn(n,0,Ta),e===void 0?e=i.rounding:qn(e,0,8),Ee(t,n+t.e+1,e))};le.toExponential=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Er(i,!0):(qn(n,0,Ta),e===void 0?e=s.rounding:qn(e,0,8),i=Ee(new s(i),n+1,e),t=Er(i,!0,n+1)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toFixed=function(n,e){var t,i,s=this,o=s.constructor;return n===void 0?t=Er(s):(qn(n,0,Ta),e===void 0?e=o.rounding:qn(e,0,8),i=Ee(new o(s),n+s.e+1,e),t=Er(i,!1,n+i.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t};le.toFraction=function(n){var e,t,i,s,o,l,h,d,f,g,v,_,S=this,R=S.d,D=S.constructor;if(!R)return new D(S);if(f=t=new D(1),i=d=new D(0),e=new D(i),o=e.e=RI(R)-S.e-1,l=o%Ie,e.d[0]=en(10,l<0?Ie+l:l),n==null)n=o>0?e:f;else{if(h=new D(n),!h.isInt()||h.lt(f))throw Error(ha+h);n=h.gt(e)?o>0?e:f:h}for(Me=!1,h=new D(gn(R)),g=D.precision,D.precision=o=R.length*Ie*2;v=mt(h,e,0,1,1),s=t.plus(v.times(i)),s.cmp(n)!=1;)t=i,i=s,s=f,f=d.plus(v.times(s)),d=s,s=e,e=h.minus(v.times(s)),h=s;return s=mt(n.minus(t),i,0,1,1),d=d.plus(s.times(f)),t=t.plus(s.times(i)),d.s=f.s=S.s,_=mt(f,i,o,1).minus(S).abs().cmp(mt(d,t,o,1).minus(S).abs())<1?[f,i]:[d,t],D.precision=g,Me=!0,_};le.toHexadecimal=le.toHex=function(n,e){return r_(this,16,n,e)};le.toNearest=function(n,e){var t=this,i=t.constructor;if(t=new i(t),n==null){if(!t.d)return t;n=new i(1),e=i.rounding}else{if(n=new i(n),e===void 0?e=i.rounding:qn(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Me=!1,t=mt(t,n,0,e,1).times(n),Me=!0,Ee(t)):(n.s=t.s,t=n),t};le.toNumber=function(){return+this};le.toOctal=function(n,e){return r_(this,8,n,e)};le.toPower=le.pow=function(n){var e,t,i,s,o,l,h=this,d=h.constructor,f=+(n=new d(n));if(!h.d||!n.d||!h.d[0]||!n.d[0])return new d(en(+h,f));if(h=new d(h),h.eq(1))return h;if(i=d.precision,o=d.rounding,n.eq(1))return Ee(h,i,o);if(e=xn(n.e/Ie),e>=n.d.length-1&&(t=f<0?-f:f)<=cP)return s=CI(d,h,t,i),n.s<0?new d(1).div(s):Ee(s,i,o);if(l=h.s,l<0){if(e<n.d.length-1)return new d(NaN);if((n.d[e]&1)==0&&(l=1),h.e==0&&h.d[0]==1&&h.d.length==1)return h.s=l,h}return t=en(+h,f),e=t==0||!isFinite(t)?xn(f*(Math.log("0."+gn(h.d))/Math.LN10+h.e+1)):new d(t+"").e,e>d.maxE+1||e<d.minE-1?new d(e>0?l/0:0):(Me=!1,d.rounding=h.s=1,t=Math.min(12,(e+"").length),s=q0(n.times(ia(h,i+t)),i),s.d&&(s=Ee(s,i+5,1),vh(s.d,i,o)&&(e=i+10,s=Ee(q0(n.times(ia(h,e+t)),e),e+5,1),+gn(s.d).slice(i+1,i+15)+1==1e14&&(s=Ee(s,i+1,0)))),s.s=l,Me=!0,d.rounding=o,Ee(s,i,o))};le.toPrecision=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Er(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(qn(n,1,Ta),e===void 0?e=s.rounding:qn(e,0,8),i=Ee(new s(i),n,e),t=Er(i,n<=i.e||i.e<=s.toExpNeg,n)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toSignificantDigits=le.toSD=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(qn(n,1,Ta),e===void 0?e=i.rounding:qn(e,0,8)),Ee(new i(t),n,e)};le.toString=function(){var n=this,e=n.constructor,t=Er(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};le.truncated=le.trunc=function(){return Ee(new this.constructor(this),this.e+1,1)};le.valueOf=le.toJSON=function(){var n=this,e=n.constructor,t=Er(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function gn(n){var e,t,i,s=n.length-1,o="",l=n[0];if(s>0){for(o+=l,e=1;e<s;e++)i=n[e]+"",t=Ie-i.length,t&&(o+=Ws(t)),o+=i;l=n[e],i=l+"",t=Ie-i.length,t&&(o+=Ws(t))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}function qn(n,e,t){if(n!==~~n||n<e||n>t)throw Error(ha+n)}function vh(n,e,t,i){var s,o,l,h;for(o=n[0];o>=10;o/=10)--e;return--e<0?(e+=Ie,s=0):(s=Math.ceil((e+1)/Ie),e%=Ie),o=en(10,Ie-e),h=n[s]%o|0,i==null?e<3?(e==0?h=h/100|0:e==1&&(h=h/10|0),l=t<4&&h==99999||t>3&&h==49999||h==5e4||h==0):l=(t<4&&h+1==o||t>3&&h+1==o/2)&&(n[s+1]/o/100|0)==en(10,e-2)-1||(h==o/2||h==0)&&(n[s+1]/o/100|0)==0:e<4?(e==0?h=h/1e3|0:e==1?h=h/100|0:e==2&&(h=h/10|0),l=(i||t<4)&&h==9999||!i&&t>3&&h==4999):l=((i||t<4)&&h+1==o||!i&&t>3&&h+1==o/2)&&(n[s+1]/o/1e3|0)==en(10,e-3)-1,l}function tm(n,e,t){for(var i,s=[0],o,l=0,h=n.length;l<h;){for(o=s.length;o--;)s[o]*=e;for(s[0]+=z0.indexOf(n.charAt(l++)),i=0;i<s.length;i++)s[i]>t-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/t|0,s[i]%=t)}return s.reverse()}function hP(n,e){var t,i,s;if(e.isZero())return e;i=e.d.length,i<32?(t=Math.ceil(i/3),s=(1/up(4,t)).toString()):(t=16,s="2.3283064365386962890625e-10"),n.precision+=t,e=ec(n,1,e.times(s),new n(1));for(var o=t;o--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return n.precision-=t,e}var mt=(function(){function n(i,s,o){var l,h=0,d=i.length;for(i=i.slice();d--;)l=i[d]*s+h,i[d]=l%o|0,h=l/o|0;return h&&i.unshift(h),i}function e(i,s,o,l){var h,d;if(o!=l)d=o>l?1:-1;else for(h=d=0;h<o;h++)if(i[h]!=s[h]){d=i[h]>s[h]?1:-1;break}return d}function t(i,s,o,l){for(var h=0;o--;)i[o]-=h,h=i[o]<s[o]?1:0,i[o]=h*l+i[o]-s[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,o,l,h,d){var f,g,v,_,S,R,D,N,U,B,O,X,te,ee,x,I,V,M,k,z,P=i.constructor,Ce=i.s==s.s?1:-1,de=i.d,H=s.d;if(!de||!de[0]||!H||!H[0])return new P(!i.s||!s.s||(de?H&&de[0]==H[0]:!H)?NaN:de&&de[0]==0||!H?Ce*0:Ce/0);for(d?(S=1,g=i.e-s.e):(d=Ui,S=Ie,g=xn(i.e/S)-xn(s.e/S)),k=H.length,V=de.length,U=new P(Ce),B=U.d=[],v=0;H[v]==(de[v]||0);v++);if(H[v]>(de[v]||0)&&g--,o==null?(ee=o=P.precision,l=P.rounding):h?ee=o+(i.e-s.e)+1:ee=o,ee<0)B.push(1),R=!0;else{if(ee=ee/S+2|0,v=0,k==1){for(_=0,H=H[0],ee++;(v<V||_)&&ee--;v++)x=_*d+(de[v]||0),B[v]=x/H|0,_=x%H|0;R=_||v<V}else{for(_=d/(H[0]+1)|0,_>1&&(H=n(H,_,d),de=n(de,_,d),k=H.length,V=de.length),I=k,O=de.slice(0,k),X=O.length;X<k;)O[X++]=0;z=H.slice(),z.unshift(0),M=H[0],H[1]>=d/2&&++M;do _=0,f=e(H,O,k,X),f<0?(te=O[0],k!=X&&(te=te*d+(O[1]||0)),_=te/M|0,_>1?(_>=d&&(_=d-1),D=n(H,_,d),N=D.length,X=O.length,f=e(D,O,N,X),f==1&&(_--,t(D,k<N?z:H,N,d))):(_==0&&(f=_=1),D=H.slice()),N=D.length,N<X&&D.unshift(0),t(O,D,X,d),f==-1&&(X=O.length,f=e(H,O,k,X),f<1&&(_++,t(O,k<X?z:H,X,d))),X=O.length):f===0&&(_++,O=[0]),B[v++]=_,f&&O[0]?O[X++]=de[I]||0:(O=[de[I]],X=1);while((I++<V||O[0]!==void 0)&&ee--);R=O[0]!==void 0}B[0]||B.shift()}if(S==1)U.e=g,wI=R;else{for(v=1,_=B[0];_>=10;_/=10)v++;U.e=v+g*S-1,Ee(U,h?o+U.e+1:o,l,R)}return U}})();function Ee(n,e,t,i){var s,o,l,h,d,f,g,v,_,S=n.constructor;e:if(e!=null){if(v=n.d,!v)return n;for(s=1,h=v[0];h>=10;h/=10)s++;if(o=e-s,o<0)o+=Ie,l=e,g=v[_=0],d=g/en(10,s-l-1)%10|0;else if(_=Math.ceil((o+1)/Ie),h=v.length,_>=h)if(i){for(;h++<=_;)v.push(0);g=d=0,s=1,o%=Ie,l=o-Ie+1}else break e;else{for(g=h=v[_],s=1;h>=10;h/=10)s++;o%=Ie,l=o-Ie+s,d=l<0?0:g/en(10,s-l-1)%10|0}if(i=i||e<0||v[_+1]!==void 0||(l<0?g:g%en(10,s-l-1)),f=t<4?(d||i)&&(t==0||t==(n.s<0?3:2)):d>5||d==5&&(t==4||i||t==6&&(o>0?l>0?g/en(10,s-l):0:v[_-1])%10&1||t==(n.s<0?8:7)),e<1||!v[0])return v.length=0,f?(e-=n.e+1,v[0]=en(10,(Ie-e%Ie)%Ie),n.e=-e||0):v[0]=n.e=0,n;if(o==0?(v.length=_,h=1,_--):(v.length=_+1,h=en(10,Ie-o),v[_]=l>0?(g/en(10,s-l)%en(10,l)|0)*h:0),f)for(;;)if(_==0){for(o=1,l=v[0];l>=10;l/=10)o++;for(l=v[0]+=h,h=1;l>=10;l/=10)h++;o!=h&&(n.e++,v[0]==Ui&&(v[0]=1));break}else{if(v[_]+=h,v[_]!=Ui)break;v[_--]=0,h=1}for(o=v.length;v[--o]===0;)v.pop()}return Me&&(n.e>S.maxE?(n.d=null,n.e=NaN):n.e<S.minE&&(n.e=0,n.d=[0])),n}function Er(n,e,t){if(!n.isFinite())return NI(n);var i,s=n.e,o=gn(n.d),l=o.length;return e?(t&&(i=t-l)>0?o=o.charAt(0)+"."+o.slice(1)+Ws(i):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n.e<0?"e":"e+")+n.e):s<0?(o="0."+Ws(-s-1)+o,t&&(i=t-l)>0&&(o+=Ws(i))):s>=l?(o+=Ws(s+1-l),t&&(i=t-s-1)>0&&(o=o+"."+Ws(i))):((i=s+1)<l&&(o=o.slice(0,i)+"."+o.slice(i)),t&&(i=t-l)>0&&(s+1===l&&(o+="."),o+=Ws(i))),o}function cp(n,e){var t=n[0];for(e*=Ie;t>=10;t/=10)e++;return e}function Rm(n,e,t){if(e>uP)throw Me=!0,t&&(n.precision=t),Error(SI);return Ee(new n(Am),e,1,!0)}function fr(n,e,t){if(e>F0)throw Error(SI);return Ee(new n(Im),e,t,!0)}function RI(n){var e=n.length-1,t=e*Ie+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function Ws(n){for(var e="";n--;)e+="0";return e}function CI(n,e,t,i){var s,o=new n(1),l=Math.ceil(i/Ie+4);for(Me=!1;;){if(t%2&&(o=o.times(e),Fw(o.d,l)&&(s=!0)),t=xn(t/2),t===0){t=o.d.length-1,s&&o.d[t]===0&&++o.d[t];break}e=e.times(e),Fw(e.d,l)}return Me=!0,o}function Bw(n){return n.d[n.d.length-1]&1}function DI(n,e,t){for(var i,s,o=new n(e[0]),l=0;++l<e.length;){if(s=new n(e[l]),!s.s){o=s;break}i=o.cmp(s),(i===t||i===0&&o.s===t)&&(o=s)}return o}function q0(n,e){var t,i,s,o,l,h,d,f=0,g=0,v=0,_=n.constructor,S=_.rounding,R=_.precision;if(!n.d||!n.d[0]||n.e>17)return new _(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Me=!1,d=R):d=e,h=new _(.03125);n.e>-2;)n=n.times(h),v+=5;for(i=Math.log(en(2,v))/Math.LN10*2+5|0,d+=i,t=o=l=new _(1),_.precision=d;;){if(o=Ee(o.times(n),d,1),t=t.times(++g),h=l.plus(mt(o,t,d,1)),gn(h.d).slice(0,d)===gn(l.d).slice(0,d)){for(s=v;s--;)l=Ee(l.times(l),d,1);if(e==null)if(f<3&&vh(l.d,d-i,S,f))_.precision=d+=10,t=o=h=new _(1),g=0,f++;else return Ee(l,_.precision=R,S,Me=!0);else return _.precision=R,l}l=h}}function ia(n,e){var t,i,s,o,l,h,d,f,g,v,_,S=1,R=10,D=n,N=D.d,U=D.constructor,B=U.rounding,O=U.precision;if(D.s<0||!N||!N[0]||!D.e&&N[0]==1&&N.length==1)return new U(N&&!N[0]?-1/0:D.s!=1?NaN:N?0:D);if(e==null?(Me=!1,g=O):g=e,U.precision=g+=R,t=gn(N),i=t.charAt(0),Math.abs(o=D.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)D=D.times(n),t=gn(D.d),i=t.charAt(0),S++;o=D.e,i>1?(D=new U("0."+t),o++):D=new U(i+"."+t.slice(1))}else return f=Rm(U,g+2,O).times(o+""),D=ia(new U(i+"."+t.slice(1)),g-R).plus(f),U.precision=O,e==null?Ee(D,O,B,Me=!0):D;for(v=D,d=l=D=mt(D.minus(1),D.plus(1),g,1),_=Ee(D.times(D),g,1),s=3;;){if(l=Ee(l.times(_),g,1),f=d.plus(mt(l,new U(s),g,1)),gn(f.d).slice(0,g)===gn(d.d).slice(0,g))if(d=d.times(2),o!==0&&(d=d.plus(Rm(U,g+2,O).times(o+""))),d=mt(d,new U(S),g,1),e==null)if(vh(d.d,g-R,B,h))U.precision=g+=R,f=l=D=mt(v.minus(1),v.plus(1),g,1),_=Ee(D.times(D),g,1),s=h=1;else return Ee(d,U.precision=O,B,Me=!0);else return U.precision=O,d;d=f,s+=2}}function NI(n){return String(n.s*n.s/0)}function nm(n,e){var t,i,s;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,n.e=t=t-i-1,n.d=[],i=(t+1)%Ie,t<0&&(i+=Ie),i<s){for(i&&n.d.push(+e.slice(0,i)),s-=Ie;i<s;)n.d.push(+e.slice(i,i+=Ie));e=e.slice(i),i=Ie-e.length}else i-=s;for(;i--;)e+="0";n.d.push(+e),Me&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function dP(n,e){var t,i,s,o,l,h,d,f,g;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),II.test(e))return nm(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(oP.test(e))t=16,e=e.toLowerCase();else if(aP.test(e))t=2;else if(lP.test(e))t=8;else throw Error(ha+e);for(o=e.search(/p/i),o>0?(d=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),l=o>=0,i=n.constructor,l&&(e=e.replace(".",""),h=e.length,o=h-o,s=CI(i,new i(t),o,o*2)),f=tm(e,t,Ui),g=f.length-1,o=g;f[o]===0;--o)f.pop();return o<0?new i(n.s*0):(n.e=cp(f,g),n.d=f,Me=!1,l&&(n=mt(n,s,h*4)),d&&(n=n.times(Math.abs(d)<54?en(2,d):Kr.pow(2,d))),Me=!0,n)}function fP(n,e){var t,i=e.d.length;if(i<3)return e.isZero()?e:ec(n,2,e,e);t=1.4*Math.sqrt(i),t=t>16?16:t|0,e=e.times(1/up(5,t)),e=ec(n,2,e,e);for(var s,o=new n(5),l=new n(16),h=new n(20);t--;)s=e.times(e),e=e.times(o.plus(s.times(l.times(s).minus(h))));return e}function ec(n,e,t,i,s){var o,l,h,d,f=n.precision,g=Math.ceil(f/Ie);for(Me=!1,d=t.times(t),h=new n(i);;){if(l=mt(h.times(d),new n(e++*e++),f,1),h=s?i.plus(l):i.minus(l),i=mt(l.times(d),new n(e++*e++),f,1),l=h.plus(i),l.d[g]!==void 0){for(o=g;l.d[o]===h.d[o]&&o--;);if(o==-1)break}o=h,h=i,i=l,l=o}return Me=!0,l.d.length=g+1,l}function up(n,e){for(var t=n;--e;)t*=n;return t}function kI(n,e){var t,i=e.s<0,s=fr(n,n.precision,1),o=s.times(.5);if(e=e.abs(),e.lte(o))return Qr=i?4:1,e;if(t=e.divToInt(s),t.isZero())Qr=i?3:2;else{if(e=e.minus(t.times(s)),e.lte(o))return Qr=Bw(t)?i?2:3:i?4:1,e;Qr=Bw(t)?i?1:4:i?3:2}return e.minus(s).abs()}function r_(n,e,t,i){var s,o,l,h,d,f,g,v,_,S=n.constructor,R=t!==void 0;if(R?(qn(t,1,Ta),i===void 0?i=S.rounding:qn(i,0,8)):(t=S.precision,i=S.rounding),!n.isFinite())g=NI(n);else{for(g=Er(n),l=g.indexOf("."),R?(s=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):s=e,l>=0&&(g=g.replace(".",""),_=new S(1),_.e=g.length-l,_.d=tm(Er(_),10,s),_.e=_.d.length),v=tm(g,10,s),o=d=v.length;v[--d]==0;)v.pop();if(!v[0])g=R?"0p+0":"0";else{if(l<0?o--:(n=new S(n),n.d=v,n.e=o,n=mt(n,_,t,i,0,s),v=n.d,o=n.e,f=wI),l=v[t],h=s/2,f=f||v[t+1]!==void 0,f=i<4?(l!==void 0||f)&&(i===0||i===(n.s<0?3:2)):l>h||l===h&&(i===4||f||i===6&&v[t-1]&1||i===(n.s<0?8:7)),v.length=t,f)for(;++v[--t]>s-1;)v[t]=0,t||(++o,v.unshift(1));for(d=v.length;!v[d-1];--d);for(l=0,g="";l<d;l++)g+=z0.charAt(v[l]);if(R){if(d>1)if(e==16||e==8){for(l=e==16?4:3,--d;d%l;d++)g+="0";for(v=tm(g,s,e),d=v.length;!v[d-1];--d);for(l=1,g="1.";l<d;l++)g+=z0.charAt(v[l])}else g=g.charAt(0)+"."+g.slice(1);g=g+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)g="0"+g;g="0."+g}else if(++o>d)for(o-=d;o--;)g+="0";else o<d&&(g=g.slice(0,o)+"."+g.slice(o))}g=(e==16?"0x":e==2?"0b":e==8?"0o":"")+g}return n.s<0?"-"+g:g}function Fw(n,e){if(n.length>e)return n.length=e,!0}function mP(n){return new this(n).abs()}function pP(n){return new this(n).acos()}function gP(n){return new this(n).acosh()}function yP(n,e){return new this(n).plus(e)}function vP(n){return new this(n).asin()}function _P(n){return new this(n).asinh()}function bP(n){return new this(n).atan()}function TP(n){return new this(n).atanh()}function EP(n,e){n=new this(n),e=new this(e);var t,i=this.precision,s=this.rounding,o=i+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=fr(this,o,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?fr(this,i,s):new this(0),t.s=n.s):!n.d||e.isZero()?(t=fr(this,o,1).times(.5),t.s=n.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(mt(n,e,o,1)),e=fr(this,o,1),this.precision=i,this.rounding=s,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(mt(n,e,o,1)),t}function wP(n){return new this(n).cbrt()}function SP(n){return Ee(n=new this(n),n.e+1,2)}function xP(n,e,t){return new this(n).clamp(e,t)}function AP(n){if(!n||typeof n!="object")throw Error(lp+"Object expected");var e,t,i,s=n.defaults===!0,o=["precision",1,Ta,"rounding",0,8,"toExpNeg",-Fl,0,"toExpPos",0,Fl,"maxE",0,Fl,"minE",-Fl,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],s&&(this[t]=B0[t]),(i=n[t])!==void 0)if(xn(i)===i&&i>=o[e+1]&&i<=o[e+2])this[t]=i;else throw Error(ha+t+": "+i);if(t="crypto",s&&(this[t]=B0[t]),(i=n[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(xI);else this[t]=!1;else throw Error(ha+t+": "+i);return this}function IP(n){return new this(n).cos()}function RP(n){return new this(n).cosh()}function VI(n){var e,t,i;function s(o){var l,h,d,f=this;if(!(f instanceof s))return new s(o);if(f.constructor=s,qw(o)){f.s=o.s,Me?!o.d||o.e>s.maxE?(f.e=NaN,f.d=null):o.e<s.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(d=typeof o,d==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(l=0,h=o;h>=10;h/=10)l++;Me?l>s.maxE?(f.e=NaN,f.d=null):l<s.minE?(f.e=0,f.d=[0]):(f.e=l,f.d=[o]):(f.e=l,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return nm(f,o.toString())}if(d==="string")return(h=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(h===43&&(o=o.slice(1)),f.s=1),II.test(o)?nm(f,o):dP(f,o);if(d==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,nm(f,o.toString());throw Error(ha+o)}if(s.prototype=le,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=AP,s.clone=VI,s.isDecimal=qw,s.abs=mP,s.acos=pP,s.acosh=gP,s.add=yP,s.asin=vP,s.asinh=_P,s.atan=bP,s.atanh=TP,s.atan2=EP,s.cbrt=wP,s.ceil=SP,s.clamp=xP,s.cos=IP,s.cosh=RP,s.div=CP,s.exp=DP,s.floor=NP,s.hypot=kP,s.ln=VP,s.log=MP,s.log10=OP,s.log2=PP,s.max=LP,s.min=jP,s.mod=UP,s.mul=zP,s.pow=BP,s.random=FP,s.round=qP,s.sign=HP,s.sin=GP,s.sinh=$P,s.sqrt=KP,s.sub=QP,s.sum=YP,s.tan=XP,s.tanh=WP,s.trunc=ZP,n===void 0&&(n={}),n&&n.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return s.config(n),s}function CP(n,e){return new this(n).div(e)}function DP(n){return new this(n).exp()}function NP(n){return Ee(n=new this(n),n.e+1,3)}function kP(){var n,e,t=new this(0);for(Me=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Me=!0,new this(1/0);t=e}return Me=!0,t.sqrt()}function qw(n){return n instanceof Kr||n&&n.toStringTag===AI||!1}function VP(n){return new this(n).ln()}function MP(n,e){return new this(n).log(e)}function PP(n){return new this(n).log(2)}function OP(n){return new this(n).log(10)}function LP(){return DI(this,arguments,-1)}function jP(){return DI(this,arguments,1)}function UP(n,e){return new this(n).mod(e)}function zP(n,e){return new this(n).mul(e)}function BP(n,e){return new this(n).pow(e)}function FP(n){var e,t,i,s,o=0,l=new this(1),h=[];if(n===void 0?n=this.precision:qn(n,1,Ta),i=Math.ceil(n/Ie),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)s=e[o],s>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:h[o++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)s=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,o):(h.push(s%1e7),o+=4);o=i/4}else throw Error(xI);else for(;o<i;)h[o++]=Math.random()*1e7|0;for(i=h[--o],n%=Ie,i&&n&&(s=en(10,Ie-n),h[o]=(i/s|0)*s);h[o]===0;o--)h.pop();if(o<0)t=0,h=[0];else{for(t=-1;h[0]===0;t-=Ie)h.shift();for(i=1,s=h[0];s>=10;s/=10)i++;i<Ie&&(t-=Ie-i)}return l.e=t,l.d=h,l}function qP(n){return Ee(n=new this(n),n.e+1,this.rounding)}function HP(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function GP(n){return new this(n).sin()}function $P(n){return new this(n).sinh()}function KP(n){return new this(n).sqrt()}function QP(n,e){return new this(n).sub(e)}function YP(){var n=0,e=arguments,t=new this(e[n]);for(Me=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Me=!0,Ee(t,this.precision,this.rounding)}function XP(n){return new this(n).tan()}function WP(n){return new this(n).tanh()}function ZP(n){return Ee(n=new this(n),n.e+1,1)}le[Symbol.for("nodejs.util.inspect.custom")]=le.toString;le[Symbol.toStringTag]="Decimal";var Kr=le.constructor=VI(B0);Am=new Kr(Am);Im=new Kr(Im);const JP=()=>{};var Hw={};const MI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},eO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},PI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,h=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,g=o>>2,v=(o&3)<<4|h>>4;let _=(h&15)<<2|f>>6,S=f&63;d||(S=64,l||(_=64)),i.push(t[g],t[v],t[_],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(MI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||f==null||v==null)throw new tO;const _=o<<2|h>>4;if(i.push(_),f!==64){const S=h<<4&240|f>>2;if(i.push(S),v!==64){const R=f<<6&192|v;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nO=function(n){const e=MI(n);return PI.encodeByteArray(e,!0)},OI=function(n){return nO(n).replace(/\./g,"")},LI=function(n){try{return PI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iO=()=>jI().__FIREBASE_DEFAULTS__,rO=()=>{if(typeof process>"u"||typeof Hw>"u")return;const n=Hw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&LI(n[1]);return e&&JSON.parse(e)},hp=()=>{try{return JP()||iO()||rO()||sO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aO=n=>hp()?.emulatorHosts?.[n],UI=()=>hp()?.config,zI=n=>hp()?.[`_${n}`];class oO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Sc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BI(n){return(await fetch(n,{credentials:"include"})).ok}const th={};function lO(){const n={prod:[],emulator:[]};for(const e of Object.keys(th))th[e]?n.emulator.push(e):n.prod.push(e);return n}function cO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Gw=!1;function uO(n,e){if(typeof window>"u"||typeof document>"u"||!Sc(window.location.host)||th[n]===e||th[n]||Gw)return;th[n]=e;function t(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=lO().prod.length>0;function l(){const _=document.getElementById(i);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,S){_.setAttribute("width","24"),_.setAttribute("id",S),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Gw=!0,l()},_}function g(_,S){_.setAttribute("id",S),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=cO(i),S=t("text"),R=document.getElementById(S)||document.createElement("span"),D=t("learnmore"),N=document.getElementById(D)||document.createElement("a"),U=t("preprendIcon"),B=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const O=_.element;h(O),g(N,D);const X=f();d(B,U),O.append(B,R,N,X),document.body.appendChild(O)}o?(R.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function FI(){const n=hp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function mO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pO(){const n=tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qI(){return!FI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HI(){return!FI()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function GI(){try{return typeof indexedDB=="object"}catch{return!1}}function gO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const yO="FirebaseError";class ls extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=yO,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$h.prototype.create)}}class $h{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?vO(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new ls(s,h,i)}}function vO(n,e){return n.replace(_O,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const _O=/\{\$([^}]+)}/g;function bO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Io(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],l=e[s];if($w(o)&&$w(l)){if(!Io(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function $w(n){return n!==null&&typeof n=="object"}function Kh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function TO(n,e){const t=new EO(n,e);return t.subscribe.bind(t)}class EO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");wO(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=n0),s.error===void 0&&(s.error=n0),s.complete===void 0&&(s.complete=n0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function n0(){}function An(n){return n&&n._delegate?n._delegate:n}class Ro{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oo="[DEFAULT]";class SO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new oO;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AO(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:xO(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xO(n){return n===oo?void 0:n}function AO(n){return n.instantiationMode==="EAGER"}class IO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const RO={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},CO=Ge.INFO,DO={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},NO=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=DO[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s_{constructor(e){this.name=e,this._logLevel=CO,this._logHandler=NO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const kO=(n,e)=>e.some(t=>n instanceof t);let Kw,Qw;function VO(){return Kw||(Kw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MO(){return Qw||(Qw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $I=new WeakMap,H0=new WeakMap,KI=new WeakMap,i0=new WeakMap,a_=new WeakMap;function PO(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(sa(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&$I.set(t,n)}).catch(()=>{}),a_.set(e,n),e}function OO(n){if(H0.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});H0.set(n,e)}let G0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return H0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||KI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function LO(n){G0=n(G0)}function jO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(r0(this),e,...t);return KI.set(i,e.sort?e.sort():[e]),sa(i)}:MO().includes(n)?function(...e){return n.apply(r0(this),e),sa($I.get(this))}:function(...e){return sa(n.apply(r0(this),e))}}function UO(n){return typeof n=="function"?jO(n):(n instanceof IDBTransaction&&OO(n),kO(n,VO())?new Proxy(n,G0):n)}function sa(n){if(n instanceof IDBRequest)return PO(n);if(i0.has(n))return i0.get(n);const e=UO(n);return e!==n&&(i0.set(n,e),a_.set(e,n)),e}const r0=n=>a_.get(n);function zO(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),h=sa(l);return i&&l.addEventListener("upgradeneeded",d=>{i(sa(l.result),d.oldVersion,d.newVersion,sa(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const BO=["get","getKey","getAll","getAllKeys","count"],FO=["put","add","delete","clear"],s0=new Map;function Yw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(s0.get(e))return s0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=FO.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||BO.includes(t)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(h.shift())),(await Promise.all([f[t](...h),s&&d.done]))[0]};return s0.set(e,o),o}LO(n=>({...n,get:(e,t,i)=>Yw(e,t)||n.get(e,t,i),has:(e,t)=>!!Yw(e,t)||n.has(e,t)}));class qO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HO(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function HO(n){return n.getComponent()?.type==="VERSION"}const $0="@firebase/app",Xw="0.14.6";const ts=new s_("@firebase/app"),GO="@firebase/app-compat",$O="@firebase/analytics-compat",KO="@firebase/analytics",QO="@firebase/app-check-compat",YO="@firebase/app-check",XO="@firebase/auth",WO="@firebase/auth-compat",ZO="@firebase/database",JO="@firebase/data-connect",e3="@firebase/database-compat",t3="@firebase/functions",n3="@firebase/functions-compat",i3="@firebase/installations",r3="@firebase/installations-compat",s3="@firebase/messaging",a3="@firebase/messaging-compat",o3="@firebase/performance",l3="@firebase/performance-compat",c3="@firebase/remote-config",u3="@firebase/remote-config-compat",h3="@firebase/storage",d3="@firebase/storage-compat",f3="@firebase/firestore",m3="@firebase/ai",p3="@firebase/firestore-compat",g3="firebase",y3="12.6.0";const K0="[DEFAULT]",v3={[$0]:"fire-core",[GO]:"fire-core-compat",[KO]:"fire-analytics",[$O]:"fire-analytics-compat",[YO]:"fire-app-check",[QO]:"fire-app-check-compat",[XO]:"fire-auth",[WO]:"fire-auth-compat",[ZO]:"fire-rtdb",[JO]:"fire-data-connect",[e3]:"fire-rtdb-compat",[t3]:"fire-fn",[n3]:"fire-fn-compat",[i3]:"fire-iid",[r3]:"fire-iid-compat",[s3]:"fire-fcm",[a3]:"fire-fcm-compat",[o3]:"fire-perf",[l3]:"fire-perf-compat",[c3]:"fire-rc",[u3]:"fire-rc-compat",[h3]:"fire-gcs",[d3]:"fire-gcs-compat",[f3]:"fire-fst",[p3]:"fire-fst-compat",[m3]:"fire-vertex","fire-js":"fire-js",[g3]:"fire-js-all"};const Cm=new Map,_3=new Map,Q0=new Map;function Ww(n,e){try{n.container.addComponent(e)}catch(t){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function tc(n){const e=n.name;if(Q0.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;Q0.set(e,n);for(const t of Cm.values())Ww(t,n);for(const t of _3.values())Ww(t,n);return!0}function o_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dr(n){return n==null?!1:n.settings!==void 0}const b3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},aa=new $h("app","Firebase",b3);class T3{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}const xc=y3;function QI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:K0,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw aa.create("bad-app-name",{appName:String(s)});if(t||(t=UI()),!t)throw aa.create("no-options");const o=Cm.get(s);if(o){if(Io(t,o.options)&&Io(i,o.config))return o;throw aa.create("duplicate-app",{appName:s})}const l=new IO(s);for(const d of Q0.values())l.addComponent(d);const h=new T3(t,i,l);return Cm.set(s,h),h}function E3(n=K0){const e=Cm.get(n);if(!e&&n===K0&&UI())return QI();if(!e)throw aa.create("no-app",{appName:n});return e}function oa(n,e,t){let i=v3[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(l.join(" "));return}tc(new Ro(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const w3="firebase-heartbeat-database",S3=1,_h="firebase-heartbeat-store";let a0=null;function YI(){return a0||(a0=zO(w3,S3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_h)}catch(t){console.warn(t)}}}}).catch(n=>{throw aa.create("idb-open",{originalErrorMessage:n.message})})),a0}async function x3(n){try{const t=(await YI()).transaction(_h),i=await t.objectStore(_h).get(XI(n));return await t.done,i}catch(e){if(e instanceof ls)ts.warn(e.message);else{const t=aa.create("idb-get",{originalErrorMessage:e?.message});ts.warn(t.message)}}}async function Zw(n,e){try{const i=(await YI()).transaction(_h,"readwrite");await i.objectStore(_h).put(e,XI(n)),await i.done}catch(t){if(t instanceof ls)ts.warn(t.message);else{const i=aa.create("idb-set",{originalErrorMessage:t?.message});ts.warn(i.message)}}}function XI(n){return`${n.name}!${n.options.appId}`}const A3=1024,I3=30;class R3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new D3(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Jw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>I3){const s=N3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ts.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jw(),{heartbeatsToSend:t,unsentEntries:i}=C3(this._heartbeatsCache.heartbeats),s=OI(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ts.warn(e),""}}}function Jw(){return new Date().toISOString().substring(0,10)}function C3(n,e=A3){const t=[];let i=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),eS(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),eS(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class D3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GI()?gO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await x3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function eS(n){return OI(JSON.stringify({version:2,heartbeats:n})).length}function N3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function k3(n){tc(new Ro("platform-logger",e=>new qO(e),"PRIVATE")),tc(new Ro("heartbeat",e=>new R3(e),"PRIVATE")),oa($0,Xw,n),oa($0,Xw,"esm2020"),oa("fire-js","")}k3("");var tS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var la,WI;(function(){var n;function e(x,I){function V(){}V.prototype=I.prototype,x.F=I.prototype,x.prototype=new V,x.prototype.constructor=x,x.D=function(M,k,z){for(var P=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)P[Ce-2]=arguments[Ce];return I.prototype[k].apply(M,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,I,V){V||(V=0);const M=Array(16);if(typeof I=="string")for(var k=0;k<16;++k)M[k]=I.charCodeAt(V++)|I.charCodeAt(V++)<<8|I.charCodeAt(V++)<<16|I.charCodeAt(V++)<<24;else for(k=0;k<16;++k)M[k]=I[V++]|I[V++]<<8|I[V++]<<16|I[V++]<<24;I=x.g[0],V=x.g[1],k=x.g[2];let z=x.g[3],P;P=I+(z^V&(k^z))+M[0]+3614090360&4294967295,I=V+(P<<7&4294967295|P>>>25),P=z+(k^I&(V^k))+M[1]+3905402710&4294967295,z=I+(P<<12&4294967295|P>>>20),P=k+(V^z&(I^V))+M[2]+606105819&4294967295,k=z+(P<<17&4294967295|P>>>15),P=V+(I^k&(z^I))+M[3]+3250441966&4294967295,V=k+(P<<22&4294967295|P>>>10),P=I+(z^V&(k^z))+M[4]+4118548399&4294967295,I=V+(P<<7&4294967295|P>>>25),P=z+(k^I&(V^k))+M[5]+1200080426&4294967295,z=I+(P<<12&4294967295|P>>>20),P=k+(V^z&(I^V))+M[6]+2821735955&4294967295,k=z+(P<<17&4294967295|P>>>15),P=V+(I^k&(z^I))+M[7]+4249261313&4294967295,V=k+(P<<22&4294967295|P>>>10),P=I+(z^V&(k^z))+M[8]+1770035416&4294967295,I=V+(P<<7&4294967295|P>>>25),P=z+(k^I&(V^k))+M[9]+2336552879&4294967295,z=I+(P<<12&4294967295|P>>>20),P=k+(V^z&(I^V))+M[10]+4294925233&4294967295,k=z+(P<<17&4294967295|P>>>15),P=V+(I^k&(z^I))+M[11]+2304563134&4294967295,V=k+(P<<22&4294967295|P>>>10),P=I+(z^V&(k^z))+M[12]+1804603682&4294967295,I=V+(P<<7&4294967295|P>>>25),P=z+(k^I&(V^k))+M[13]+4254626195&4294967295,z=I+(P<<12&4294967295|P>>>20),P=k+(V^z&(I^V))+M[14]+2792965006&4294967295,k=z+(P<<17&4294967295|P>>>15),P=V+(I^k&(z^I))+M[15]+1236535329&4294967295,V=k+(P<<22&4294967295|P>>>10),P=I+(k^z&(V^k))+M[1]+4129170786&4294967295,I=V+(P<<5&4294967295|P>>>27),P=z+(V^k&(I^V))+M[6]+3225465664&4294967295,z=I+(P<<9&4294967295|P>>>23),P=k+(I^V&(z^I))+M[11]+643717713&4294967295,k=z+(P<<14&4294967295|P>>>18),P=V+(z^I&(k^z))+M[0]+3921069994&4294967295,V=k+(P<<20&4294967295|P>>>12),P=I+(k^z&(V^k))+M[5]+3593408605&4294967295,I=V+(P<<5&4294967295|P>>>27),P=z+(V^k&(I^V))+M[10]+38016083&4294967295,z=I+(P<<9&4294967295|P>>>23),P=k+(I^V&(z^I))+M[15]+3634488961&4294967295,k=z+(P<<14&4294967295|P>>>18),P=V+(z^I&(k^z))+M[4]+3889429448&4294967295,V=k+(P<<20&4294967295|P>>>12),P=I+(k^z&(V^k))+M[9]+568446438&4294967295,I=V+(P<<5&4294967295|P>>>27),P=z+(V^k&(I^V))+M[14]+3275163606&4294967295,z=I+(P<<9&4294967295|P>>>23),P=k+(I^V&(z^I))+M[3]+4107603335&4294967295,k=z+(P<<14&4294967295|P>>>18),P=V+(z^I&(k^z))+M[8]+1163531501&4294967295,V=k+(P<<20&4294967295|P>>>12),P=I+(k^z&(V^k))+M[13]+2850285829&4294967295,I=V+(P<<5&4294967295|P>>>27),P=z+(V^k&(I^V))+M[2]+4243563512&4294967295,z=I+(P<<9&4294967295|P>>>23),P=k+(I^V&(z^I))+M[7]+1735328473&4294967295,k=z+(P<<14&4294967295|P>>>18),P=V+(z^I&(k^z))+M[12]+2368359562&4294967295,V=k+(P<<20&4294967295|P>>>12),P=I+(V^k^z)+M[5]+4294588738&4294967295,I=V+(P<<4&4294967295|P>>>28),P=z+(I^V^k)+M[8]+2272392833&4294967295,z=I+(P<<11&4294967295|P>>>21),P=k+(z^I^V)+M[11]+1839030562&4294967295,k=z+(P<<16&4294967295|P>>>16),P=V+(k^z^I)+M[14]+4259657740&4294967295,V=k+(P<<23&4294967295|P>>>9),P=I+(V^k^z)+M[1]+2763975236&4294967295,I=V+(P<<4&4294967295|P>>>28),P=z+(I^V^k)+M[4]+1272893353&4294967295,z=I+(P<<11&4294967295|P>>>21),P=k+(z^I^V)+M[7]+4139469664&4294967295,k=z+(P<<16&4294967295|P>>>16),P=V+(k^z^I)+M[10]+3200236656&4294967295,V=k+(P<<23&4294967295|P>>>9),P=I+(V^k^z)+M[13]+681279174&4294967295,I=V+(P<<4&4294967295|P>>>28),P=z+(I^V^k)+M[0]+3936430074&4294967295,z=I+(P<<11&4294967295|P>>>21),P=k+(z^I^V)+M[3]+3572445317&4294967295,k=z+(P<<16&4294967295|P>>>16),P=V+(k^z^I)+M[6]+76029189&4294967295,V=k+(P<<23&4294967295|P>>>9),P=I+(V^k^z)+M[9]+3654602809&4294967295,I=V+(P<<4&4294967295|P>>>28),P=z+(I^V^k)+M[12]+3873151461&4294967295,z=I+(P<<11&4294967295|P>>>21),P=k+(z^I^V)+M[15]+530742520&4294967295,k=z+(P<<16&4294967295|P>>>16),P=V+(k^z^I)+M[2]+3299628645&4294967295,V=k+(P<<23&4294967295|P>>>9),P=I+(k^(V|~z))+M[0]+4096336452&4294967295,I=V+(P<<6&4294967295|P>>>26),P=z+(V^(I|~k))+M[7]+1126891415&4294967295,z=I+(P<<10&4294967295|P>>>22),P=k+(I^(z|~V))+M[14]+2878612391&4294967295,k=z+(P<<15&4294967295|P>>>17),P=V+(z^(k|~I))+M[5]+4237533241&4294967295,V=k+(P<<21&4294967295|P>>>11),P=I+(k^(V|~z))+M[12]+1700485571&4294967295,I=V+(P<<6&4294967295|P>>>26),P=z+(V^(I|~k))+M[3]+2399980690&4294967295,z=I+(P<<10&4294967295|P>>>22),P=k+(I^(z|~V))+M[10]+4293915773&4294967295,k=z+(P<<15&4294967295|P>>>17),P=V+(z^(k|~I))+M[1]+2240044497&4294967295,V=k+(P<<21&4294967295|P>>>11),P=I+(k^(V|~z))+M[8]+1873313359&4294967295,I=V+(P<<6&4294967295|P>>>26),P=z+(V^(I|~k))+M[15]+4264355552&4294967295,z=I+(P<<10&4294967295|P>>>22),P=k+(I^(z|~V))+M[6]+2734768916&4294967295,k=z+(P<<15&4294967295|P>>>17),P=V+(z^(k|~I))+M[13]+1309151649&4294967295,V=k+(P<<21&4294967295|P>>>11),P=I+(k^(V|~z))+M[4]+4149444226&4294967295,I=V+(P<<6&4294967295|P>>>26),P=z+(V^(I|~k))+M[11]+3174756917&4294967295,z=I+(P<<10&4294967295|P>>>22),P=k+(I^(z|~V))+M[2]+718787259&4294967295,k=z+(P<<15&4294967295|P>>>17),P=V+(z^(k|~I))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+z&4294967295}i.prototype.v=function(x,I){I===void 0&&(I=x.length);const V=I-this.blockSize,M=this.C;let k=this.h,z=0;for(;z<I;){if(k==0)for(;z<=V;)s(this,x,z),z+=this.blockSize;if(typeof x=="string"){for(;z<I;)if(M[k++]=x.charCodeAt(z++),k==this.blockSize){s(this,M),k=0;break}}else for(;z<I;)if(M[k++]=x[z++],k==this.blockSize){s(this,M),k=0;break}}this.h=k,this.o+=I},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var V=x.length-8;V<x.length;++V)x[V]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,V=0;V<4;++V)for(let M=0;M<32;M+=8)x[I++]=this.g[V]>>>M&255;return x};function o(x,I){var V=h;return Object.prototype.hasOwnProperty.call(V,x)?V[x]:V[x]=I(x)}function l(x,I){this.h=I;const V=[];let M=!0;for(let k=x.length-1;k>=0;k--){const z=x[k]|0;M&&z==I||(V[k]=z,M=!1)}this.g=V}var h={};function d(x){return-128<=x&&x<128?o(x,function(I){return new l([I|0],I<0?-1:0)}):new l([x|0],x<0?-1:0)}function f(x){if(isNaN(x)||!isFinite(x))return v;if(x<0)return N(f(-x));const I=[];let V=1;for(let M=0;x>=V;M++)I[M]=x/V|0,V*=4294967296;return new l(I,0)}function g(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return N(g(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=f(Math.pow(I,8));let M=v;for(let z=0;z<x.length;z+=8){var k=Math.min(8,x.length-z);const P=parseInt(x.substring(z,z+k),I);k<8?(k=f(Math.pow(I,k)),M=M.j(k).add(f(P))):(M=M.j(V),M=M.add(f(P)))}return M}var v=d(0),_=d(1),S=d(16777216);n=l.prototype,n.m=function(){if(D(this))return-N(this).m();let x=0,I=1;for(let V=0;V<this.g.length;V++){const M=this.i(V);x+=(M>=0?M:4294967296+M)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(R(this))return"0";if(D(this))return"-"+N(this).toString(x);const I=f(Math.pow(x,6));var V=this;let M="";for(;;){const k=X(V,I).g;V=U(V,k.j(I));let z=((V.g.length>0?V.g[0]:V.h)>>>0).toString(x);if(V=k,R(V))return z+M;for(;z.length<6;)z="0"+z;M=z+M}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function R(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function D(x){return x.h==-1}n.l=function(x){return x=U(this,x),D(x)?-1:R(x)?0:1};function N(x){const I=x.g.length,V=[];for(let M=0;M<I;M++)V[M]=~x.g[M];return new l(V,~x.h).add(_)}n.abs=function(){return D(this)?N(this):this},n.add=function(x){const I=Math.max(this.g.length,x.g.length),V=[];let M=0;for(let k=0;k<=I;k++){let z=M+(this.i(k)&65535)+(x.i(k)&65535),P=(z>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);M=P>>>16,z&=65535,P&=65535,V[k]=P<<16|z}return new l(V,V[V.length-1]&-2147483648?-1:0)};function U(x,I){return x.add(N(I))}n.j=function(x){if(R(this)||R(x))return v;if(D(this))return D(x)?N(this).j(N(x)):N(N(this).j(x));if(D(x))return N(this.j(N(x)));if(this.l(S)<0&&x.l(S)<0)return f(this.m()*x.m());const I=this.g.length+x.g.length,V=[];for(var M=0;M<2*I;M++)V[M]=0;for(M=0;M<this.g.length;M++)for(let k=0;k<x.g.length;k++){const z=this.i(M)>>>16,P=this.i(M)&65535,Ce=x.i(k)>>>16,de=x.i(k)&65535;V[2*M+2*k]+=P*de,B(V,2*M+2*k),V[2*M+2*k+1]+=z*de,B(V,2*M+2*k+1),V[2*M+2*k+1]+=P*Ce,B(V,2*M+2*k+1),V[2*M+2*k+2]+=z*Ce,B(V,2*M+2*k+2)}for(x=0;x<I;x++)V[x]=V[2*x+1]<<16|V[2*x];for(x=I;x<2*I;x++)V[x]=0;return new l(V,0)};function B(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function O(x,I){this.g=x,this.h=I}function X(x,I){if(R(I))throw Error("division by zero");if(R(x))return new O(v,v);if(D(x))return I=X(N(x),I),new O(N(I.g),N(I.h));if(D(I))return I=X(x,N(I)),new O(N(I.g),I.h);if(x.g.length>30){if(D(x)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var V=_,M=I;M.l(x)<=0;)V=te(V),M=te(M);var k=ee(V,1),z=ee(M,1);for(M=ee(M,2),V=ee(V,2);!R(M);){var P=z.add(M);P.l(x)<=0&&(k=k.add(V),z=P),M=ee(M,1),V=ee(V,1)}return I=U(x,k.j(I)),new O(k,I)}for(k=v;x.l(I)>=0;){for(V=Math.max(1,Math.floor(x.m()/I.m())),M=Math.ceil(Math.log(V)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),z=f(V),P=z.j(I);D(P)||P.l(x)>0;)V-=M,z=f(V),P=z.j(I);R(z)&&(z=_),k=k.add(z),x=U(x,P)}return new O(k,x)}n.B=function(x){return X(this,x).h},n.and=function(x){const I=Math.max(this.g.length,x.g.length),V=[];for(let M=0;M<I;M++)V[M]=this.i(M)&x.i(M);return new l(V,this.h&x.h)},n.or=function(x){const I=Math.max(this.g.length,x.g.length),V=[];for(let M=0;M<I;M++)V[M]=this.i(M)|x.i(M);return new l(V,this.h|x.h)},n.xor=function(x){const I=Math.max(this.g.length,x.g.length),V=[];for(let M=0;M<I;M++)V[M]=this.i(M)^x.i(M);return new l(V,this.h^x.h)};function te(x){const I=x.g.length+1,V=[];for(let M=0;M<I;M++)V[M]=x.i(M)<<1|x.i(M-1)>>>31;return new l(V,x.h)}function ee(x,I){const V=I>>5;I%=32;const M=x.g.length-V,k=[];for(let z=0;z<M;z++)k[z]=I>0?x.i(z+V)>>>I|x.i(z+V+1)<<32-I:x.i(z+V);return new l(k,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,WI=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,la=l}).apply(typeof tS<"u"?tS:typeof self<"u"?self:typeof window<"u"?window:{});var Bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ZI,Yu,JI,im,Y0,e2,t2,n2;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bf=="object"&&Bf];for(var b=0;b<m.length;++b){var w=m[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function s(m,b){if(b)e:{var w=i;m=m.split(".");for(var C=0;C<m.length-1;C++){var K=m[C];if(!(K in w))break e;w=w[K]}m=m[m.length-1],C=w[m],b=b(C),b!=C&&b!=null&&e(w,m,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(b){var w=[],C;for(C in b)Object.prototype.hasOwnProperty.call(b,C)&&w.push([C,b[C]]);return w}});var o=o||{},l=this||self;function h(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function d(m,b,w){return m.call.apply(m.bind,arguments)}function f(m,b,w){return f=d,f.apply(null,arguments)}function g(m,b){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),m.apply(this,C)}}function v(m,b){function w(){}w.prototype=b.prototype,m.Z=b.prototype,m.prototype=new w,m.prototype.constructor=m,m.Ob=function(C,K,Z){for(var fe=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)fe[Oe-2]=arguments[Oe];return b.prototype[K].apply(C,fe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function S(m){const b=m.length;if(b>0){const w=Array(b);for(let C=0;C<b;C++)w[C]=m[C];return w}return[]}function R(m,b){for(let C=1;C<arguments.length;C++){const K=arguments[C];var w=typeof K;if(w=w!="object"?w:K?Array.isArray(K)?"array":w:"null",w=="array"||w=="object"&&typeof K.length=="number"){w=m.length||0;const Z=K.length||0;m.length=w+Z;for(let fe=0;fe<Z;fe++)m[w+fe]=K[fe]}else m.push(K)}}class D{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function N(m){l.setTimeout(()=>{throw m},0)}function U(){var m=x;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class B{constructor(){this.h=this.g=null}add(b,w){const C=O.get();C.set(b,w),this.h?this.h.next=C:this.g=C,this.h=C}}var O=new D(()=>new X,m=>m.reset());class X{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ee=!1,x=new B,I=()=>{const m=Promise.resolve(void 0);te=()=>{m.then(V)}};function V(){for(var m;m=U();){try{m.h.call(m.g)}catch(w){N(w)}var b=O;b.j(m),b.h<100&&(b.h++,m.next=b.g,b.g=m)}ee=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};l.addEventListener("test",w,b),l.removeEventListener("test",w,b)}catch{}return m})();function P(m){return/^[\s\xa0]*$/.test(m)}function Ce(m,b){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,b)}v(Ce,k),Ce.prototype.init=function(m,b){const w=this.type=m.type,C=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget,b||(w=="mouseover"?b=m.fromElement:w=="mouseout"&&(b=m.toElement)),this.relatedTarget=b,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),H=0;function re(m,b,w,C,K){this.listener=m,this.proxy=null,this.src=b,this.type=w,this.capture=!!C,this.ha=K,this.key=++H,this.da=this.fa=!1}function ue(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function xe(m,b,w){for(const C in m)b.call(w,m[C],C,m)}function De(m,b){for(const w in m)b.call(void 0,m[w],w,m)}function F(m){const b={};for(const w in m)b[w]=m[w];return b}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(m,b){let w,C;for(let K=1;K<arguments.length;K++){C=arguments[K];for(w in C)m[w]=C[w];for(let Z=0;Z<se.length;Z++)w=se[Z],Object.prototype.hasOwnProperty.call(C,w)&&(m[w]=C[w])}}function ge(m){this.src=m,this.g={},this.h=0}ge.prototype.add=function(m,b,w,C,K){const Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);const fe=je(m,b,C,K);return fe>-1?(b=m[fe],w||(b.fa=!1)):(b=new re(b,this.src,Z,!!C,K),b.fa=w,m.push(b)),b};function ke(m,b){const w=b.type;if(w in m.g){var C=m.g[w],K=Array.prototype.indexOf.call(C,b,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(C,K,1),Z&&(ue(b),m.g[w].length==0&&(delete m.g[w],m.h--))}}function je(m,b,w,C){for(let K=0;K<m.length;++K){const Z=m[K];if(!Z.da&&Z.listener==b&&Z.capture==!!w&&Z.ha==C)return K}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),Wt={};function vt(m,b,w,C,K){if(Array.isArray(b)){for(let Z=0;Z<b.length;Z++)vt(m,b[Z],w,C,K);return null}return w=jc(w),m&&m[de]?m.J(b,w,h(C)?!!C.capture:!1,K):Ia(m,b,w,!1,C,K)}function Ia(m,b,w,C,K,Z){if(!b)throw Error("Invalid event type");const fe=h(K)?!!K.capture:!!K;let Oe=Ra(m);if(Oe||(m[Qe]=Oe=new ge(m)),w=Oe.add(b,w,C,fe,Z),w.proxy)return w;if(C=zo(),w.proxy=C,C.src=m,C.listener=w,m.addEventListener)z||(K=fe),K===void 0&&(K=!1),m.addEventListener(b.toString(),C,K);else if(m.attachEvent)m.attachEvent(Bi(b.toString()),C);else if(m.addListener&&m.removeListener)m.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function zo(){function m(w){return b.call(m.src,m.listener,w)}const b=Oc;return m}function Bo(m,b,w,C,K){if(Array.isArray(b))for(var Z=0;Z<b.length;Z++)Bo(m,b[Z],w,C,K);else C=h(C)?!!C.capture:!!C,w=jc(w),m&&m[de]?(m=m.i,Z=String(b).toString(),Z in m.g&&(b=m.g[Z],w=je(b,w,C,K),w>-1&&(ue(b[w]),Array.prototype.splice.call(b,w,1),b.length==0&&(delete m.g[Z],m.h--)))):m&&(m=Ra(m))&&(b=m.g[b.toString()],m=-1,b&&(m=je(b,w,C,K)),(w=m>-1?b[m]:null)&&Fo(w))}function Fo(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[de])ke(b.i,m);else{var w=m.type,C=m.proxy;b.removeEventListener?b.removeEventListener(w,C,m.capture):b.detachEvent?b.detachEvent(Bi(w),C):b.addListener&&b.removeListener&&b.removeListener(C),(w=Ra(b))?(ke(w,m),w.h==0&&(w.src=null,b[Qe]=null)):ue(m)}}}function Bi(m){return m in Wt?Wt[m]:Wt[m]="on"+m}function Oc(m,b){if(m.da)m=!0;else{b=new Ce(b,this);const w=m.listener,C=m.ha||m.src;m.fa&&Fo(m),m=w.call(C,b)}return m}function Ra(m){return m=m[Qe],m instanceof ge?m:null}var Lc="__closure_events_fn_"+(Math.random()*1e9>>>0);function jc(m){return typeof m=="function"?m:(m[Lc]||(m[Lc]=function(b){return m.handleEvent(b)}),m[Lc])}function Ut(){M.call(this),this.i=new ge(this),this.M=this,this.G=null}v(Ut,M),Ut.prototype[de]=!0,Ut.prototype.removeEventListener=function(m,b,w,C){Bo(this,m,b,w,C)};function Zt(m,b){var w,C=m.G;if(C)for(w=[];C;C=C.G)w.push(C);if(m=m.M,C=b.type||b,typeof b=="string")b=new k(b,m);else if(b instanceof k)b.target=b.target||m;else{var K=b;b=new k(C,m),pe(b,K)}K=!0;let Z,fe;if(w)for(fe=w.length-1;fe>=0;fe--)Z=b.g=w[fe],K=ds(Z,C,!0,b)&&K;if(Z=b.g=m,K=ds(Z,C,!0,b)&&K,K=ds(Z,C,!1,b)&&K,w)for(fe=0;fe<w.length;fe++)Z=b.g=w[fe],K=ds(Z,C,!1,b)&&K}Ut.prototype.N=function(){if(Ut.Z.N.call(this),this.i){var m=this.i;for(const b in m.g){const w=m.g[b];for(let C=0;C<w.length;C++)ue(w[C]);delete m.g[b],m.h--}}this.G=null},Ut.prototype.J=function(m,b,w,C){return this.i.add(String(m),b,!1,w,C)},Ut.prototype.K=function(m,b,w,C){return this.i.add(String(m),b,!0,w,C)};function ds(m,b,w,C){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();let K=!0;for(let Z=0;Z<b.length;++Z){const fe=b[Z];if(fe&&!fe.da&&fe.capture==w){const Oe=fe.listener,kt=fe.ha||fe.src;fe.fa&&ke(m.i,fe),K=Oe.call(kt,C)!==!1&&K}}return K&&!C.defaultPrevented}function Xp(m,b){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:l.setTimeout(m,b||0)}function cd(m){m.g=Xp(()=>{m.g=null,m.i&&(m.i=!1,cd(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class In extends M{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:cd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ca(m){M.call(this),this.h=m,this.g={}}v(Ca,M);var Uc=[];function zc(m){xe(m.g,function(b,w){this.g.hasOwnProperty(w)&&Fo(b)},m),m.g={}}Ca.prototype.N=function(){Ca.Z.N.call(this),zc(this)},Ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fs=l.JSON.stringify,Wp=l.JSON.parse,ud=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function hd(){}function dd(){}var Si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ln(){k.call(this,"d")}v(ln,k);function ii(){k.call(this,"c")}v(ii,k);var Nt={},fd=null;function qo(){return fd=fd||new Ut}Nt.Ia="serverreachability";function md(m){k.call(this,Nt.Ia,m)}v(md,k);function Fi(m){const b=qo();Zt(b,new md(b))}Nt.STAT_EVENT="statevent";function Da(m,b){k.call(this,Nt.STAT_EVENT,m),this.stat=b}v(Da,k);function zt(m){const b=qo();Zt(b,new Da(b,m))}Nt.Ja="timingevent";function qi(m,b){k.call(this,Nt.Ja,m),this.size=b}v(qi,k);function Hi(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},b)}function xi(){this.g=!0}xi.prototype.ua=function(){this.g=!1};function Zp(m,b,w,C,K,Z){m.info(function(){if(m.g)if(Z){var fe="",Oe=Z.split("&");for(let tt=0;tt<Oe.length;tt++){var kt=Oe[tt].split("=");if(kt.length>1){const _t=kt[0];kt=kt[1];const oi=_t.split("_");fe=oi.length>=2&&oi[1]=="type"?fe+(_t+"="+kt+"&"):fe+(_t+"=redacted&")}}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+C+") [attempt "+K+"]: "+b+`
`+w+`
`+fe})}function pd(m,b,w,C,K,Z,fe){m.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+K+"]: "+b+`
`+w+`
`+Z+" "+fe})}function Gi(m,b,w,C){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Jp(m,w)+(C?" "+C:"")})}function Na(m,b){m.info(function(){return"TIMEOUT: "+b})}xi.prototype.info=function(){};function Jp(m,b){if(!m.g)return b;if(!b)return null;try{const Z=JSON.parse(b);if(Z){for(m=0;m<Z.length;m++)if(Array.isArray(Z[m])){var w=Z[m];if(!(w.length<2)){var C=w[1];if(Array.isArray(C)&&!(C.length<1)){var K=C[0];if(K!="noop"&&K!="stop"&&K!="close")for(let fe=1;fe<C.length;fe++)C[fe]=""}}}}return fs(Z)}catch{return b}}var ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fc;function Va(){}v(Va,hd),Va.prototype.g=function(){return new XMLHttpRequest},Fc=new Va;function Ar(m){return encodeURIComponent(String(m))}function gd(m){var b=1;m=m.split(":");const w=[];for(;b>0&&m.length;)w.push(m.shift()),b--;return m.length&&w.push(m.join(":")),w}function Ai(m,b,w,C){this.j=m,this.i=b,this.l=w,this.S=C||1,this.V=new Ca(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ii}function Ii(){this.i=null,this.g="",this.h=!1}var Bt={},rn={};function $i(m,b,w){m.M=1,m.A=Ma(qt(b)),m.u=w,m.R=!0,Ho(m,null)}function Ho(m,b){m.F=Date.now(),Ki(m),m.B=qt(m.A);var w=m.B,C=m.S;Array.isArray(C)||(C=[String(C)]),Qo(w.i,"t",C),m.C=0,w=m.j.L,m.h=new Ii,m.g=Nd(m.j,w?b:null,!m.u),m.P>0&&(m.O=new In(f(m.Y,m,m.g),m.P)),b=m.V,w=m.g,C=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(Uc[0]=K.toString()),K=Uc);for(let Z=0;Z<K.length;Z++){const fe=vt(w,K[Z],C||b.handleEvent,!1,b.h||b);if(!fe)break;b.g[fe.key]=fe}b=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,b)):(m.v="GET",m.g.ea(m.B,m.v,null,b)),Fi(),Zp(m.i,m.v,m.B,m.l,m.S,m.u)}Ai.prototype.ba=function(m){m=m.target;const b=this.O;b&&Di(m)==3?b.j():this.Y(m)},Ai.prototype.Y=function(m){try{if(m==this.g)e:{const Oe=Di(this.g),kt=this.g.ya(),tt=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||Oe!=4||kt==7||(kt==8||tt<=0?Fi(3):Fi(2)),Qi(this);var b=this.g.ca();this.X=b;var w=eg(this);if(this.o=b==200,pd(this.i,this.v,this.B,this.l,this.S,Oe,b),this.o){if(this.U&&!this.L){t:{if(this.g){var C,K=this.g;if((C=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(C)){var Z=C;break t}}Z=null}if(m=Z)Gi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yi(this,m);else{this.o=!1,this.m=3,zt(12),Hn(this),ri(this);break e}}if(this.R){m=!0;let _t;for(;!this.K&&this.C<w.length;)if(_t=vd(this,w),_t==rn){Oe==4&&(this.m=4,zt(14),m=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Bt){this.m=4,zt(15),Gi(this.i,this.l,w,"[Invalid Chunk]"),m=!1;break}else Gi(this.i,this.l,_t,null),Yi(this,_t);if(yd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||w.length!=0||this.h.h||(this.m=1,zt(16),m=!1),this.o=this.o&&m,!m)Gi(this.i,this.l,w,"[Invalid Chunked Response]"),Hn(this),ri(this);else if(w.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),iu(fe),fe.P=!0,zt(11))}}else Gi(this.i,this.l,w,null),Yi(this,w);Oe==4&&Hn(this),this.o&&!this.K&&(Oe==4?Id(this.j,this):(this.o=!1,Ki(this)))}else Rr(this.g),b==400&&w.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Hn(this),ri(this)}}}catch{}finally{}};function eg(m){if(!yd(m))return m.g.la();const b=cn(m.g);if(b==="")return"";let w="";const C=b.length,K=Di(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Hn(m),ri(m),"";m.h.i=new l.TextDecoder}for(let Z=0;Z<C;Z++)m.h.h=!0,w+=m.h.i.decode(b[Z],{stream:!(K&&Z==C-1)});return b.length=0,m.h.g+=w,m.C=0,m.h.g}function yd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function vd(m,b){var w=m.C,C=b.indexOf(`
`,w);return C==-1?rn:(w=Number(b.substring(w,C)),isNaN(w)?Bt:(C+=1,C+w>b.length?rn:(b=b.slice(C,C+w),m.C=C+w,b)))}Ai.prototype.cancel=function(){this.K=!0,Hn(this)};function Ki(m){m.T=Date.now()+m.H,Go(m,m.H)}function Go(m,b){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Hi(f(m.aa,m),b)}function Qi(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Ai.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Na(this.i,this.B),this.M!=2&&(Fi(),zt(17)),Hn(this),this.m=2,ri(this)):Go(this,this.T-m)};function ri(m){m.j.I==0||m.K||Id(m.j,m)}function Hn(m){Qi(m);var b=m.O;b&&typeof b.dispose=="function"&&b.dispose(),m.O=null,zc(m.V),m.g&&(b=m.g,m.g=null,b.abort(),b.dispose())}function Yi(m,b){try{var w=m.j;if(w.I!=0&&(w.g==m||Wi(w.h,m))){if(!m.L&&Wi(w.h,m)&&w.I==3){try{var C=w.Ba.g.parse(b)}catch{C=null}if(Array.isArray(C)&&C.length==3){var K=C;if(K[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<m.F)Jo(w),Ts(w);else break e;Ba(w),zt(18)}}else w.xa=K[1],0<w.xa-w.K&&K[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Hi(f(w.Va,w),6e3));Xi(w.h)<=1&&w.ta&&(w.ta=void 0)}else ir(w,11)}else if((m.L||w.g==m)&&Jo(w),!P(b))for(K=w.Ba.g.parse(b),b=0;b<K.length;b++){let tt=K[b];const _t=tt[0];if(!(_t<=w.K))if(w.K=_t,tt=tt[1],w.I==2)if(tt[0]=="c"){w.M=tt[1],w.ba=tt[2];const oi=tt[3];oi!=null&&(w.ka=oi,w.j.info("VER="+w.ka));const rr=tt[4];rr!=null&&(w.za=rr,w.j.info("SVER="+w.za));const Ni=tt[5];Ni!=null&&typeof Ni=="number"&&Ni>0&&(C=1.5*Ni,w.O=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const ki=m.g;if(ki){const Fa=ki.g?ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var Z=C.h;Z.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Gc(Z,Z.h),Z.h=null))}if(C.G){const el=ki.g?ki.g.getResponseHeader("X-HTTP-Session-Id"):null;el&&(C.wa=el,rt(C.J,C.G,el))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-m.F,w.j.info("Handshake RTT: "+w.T+"ms")),C=w;var fe=m;if(C.na=Dd(C,C.L?C.ba:null,C.W),fe.L){$c(C.h,fe);var Oe=fe,kt=C.O;kt&&(Oe.H=kt),Oe.D&&(Qi(Oe),Ki(Oe)),C.g=fe}else xd(C);w.i.length>0&&nr(w)}else tt[0]!="stop"&&tt[0]!="close"||ir(w,7);else w.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?ir(w,7):tu(w):tt[0]!="noop"&&w.l&&w.l.qa(tt),w.A=0)}}Fi(4)}catch{}}var Ft=class{constructor(m,b){this.g=m,this.map=b}};function qc(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Xi(m){return m.h?1:m.g?m.g.size:0}function Wi(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function Gc(m,b){m.g?m.g.add(b):m.h=b}function $c(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}qc.prototype.cancel=function(){if(this.i=Kc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Kc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const w of m.g.values())b=b.concat(w.G);return b}return S(m.i)}var _d=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $o(m,b){if(m){m=m.split("&");for(let w=0;w<m.length;w++){const C=m[w].indexOf("=");let K,Z=null;C>=0?(K=m[w].substring(0,C),Z=m[w].substring(C+1)):K=m[w],b(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Gn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;m instanceof Gn?(this.l=m.l,sn(this,m.j),this.o=m.o,this.g=m.g,ms(this,m.u),this.h=m.h,Qc(this,wd(m.i)),this.m=m.m):m&&(b=String(m).match(_d))?(this.l=!1,sn(this,b[1]||"",!0),this.o=Zi(b[2]||""),this.g=Zi(b[3]||"",!0),ms(this,b[4]),this.h=Zi(b[5]||"",!0),Qc(this,b[6]||"",!0),this.m=Zi(b[7]||"")):(this.l=!1,this.i=new gs(null,this.l))}Gn.prototype.toString=function(){const m=[];var b=this.j;b&&m.push(Pa(b,Ko,!0),":");var w=this.g;return(w||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Pa(b,Ko,!0),"@"),m.push(Ar(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&m.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Pa(w,w.charAt(0)=="/"?Yc:bd,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Pa(w,Td)),m.join("")},Gn.prototype.resolve=function(m){const b=qt(this);let w=!!m.j;w?sn(b,m.j):w=!!m.o,w?b.o=m.o:w=!!m.g,w?b.g=m.g:w=m.u!=null;var C=m.h;if(w)ms(b,m.u);else if(w=!!m.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var K=b.h.lastIndexOf("/");K!=-1&&(C=b.h.slice(0,K+1)+C)}if(K=C,K==".."||K==".")C="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){C=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let fe=0;fe<K.length;){const Oe=K[fe++];Oe=="."?C&&fe==K.length&&Z.push(""):Oe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),C&&fe==K.length&&Z.push("")):(Z.push(Oe),C=!0)}C=Z.join("/")}else C=K}return w?b.h=C:w=m.i.toString()!=="",w?Qc(b,wd(m.i)):w=!!m.m,w&&(b.m=m.m),b};function qt(m){return new Gn(m)}function sn(m,b,w){m.j=w?Zi(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function ms(m,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);m.u=b}else m.u=null}function Qc(m,b,w){b instanceof gs?(m.i=b,Yo(m.i,m.l)):(w||(b=Pa(b,ps)),m.i=new gs(b,m.l))}function rt(m,b,w){m.i.set(b,w)}function Ma(m){return rt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Zi(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Pa(m,b,w){return typeof m=="string"?(m=encodeURI(m).replace(b,Vn),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Vn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ko=/[#\/\?@]/g,bd=/[#\?:]/g,Yc=/[#\?]/g,ps=/[#\?@]/g,Td=/#/g;function gs(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function Mn(m){m.g||(m.g=new Map,m.h=0,m.i&&$o(m.i,function(b,w){m.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}n=gs.prototype,n.add=function(m,b){Mn(this),this.i=null,m=ys(this,m);let w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(b),this.h+=1,this};function Ed(m,b){Mn(m),b=ys(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Xc(m,b){return Mn(m),b=ys(m,b),m.g.has(b)}n.forEach=function(m,b){Mn(this),this.g.forEach(function(w,C){w.forEach(function(K){m.call(b,K,C,this)},this)},this)};function Wc(m,b){Mn(m);let w=[];if(typeof b=="string")Xc(m,b)&&(w=w.concat(m.g.get(ys(m,b))));else for(m=Array.from(m.g.values()),b=0;b<m.length;b++)w=w.concat(m[b]);return w}n.set=function(m,b){return Mn(this),this.i=null,m=ys(this,m),Xc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=Wc(this,m),m.length>0?String(m[0]):b):b};function Qo(m,b,w){Ed(m,b),w.length>0&&(m.i=null,m.g.set(ys(m,b),S(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(let C=0;C<b.length;C++){var w=b[C];const K=Ar(w);w=Wc(this,w);for(let Z=0;Z<w.length;Z++){let fe=K;w[Z]!==""&&(fe+="="+Ar(w[Z])),m.push(fe)}}return this.i=m.join("&")};function wd(m){const b=new gs;return b.i=m.i,m.g&&(b.g=new Map(m.g),b.h=m.h),b}function ys(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function Yo(m,b){b&&!m.j&&(Mn(m),m.i=null,m.g.forEach(function(w,C){const K=C.toLowerCase();C!=K&&(Ed(this,C),Qo(this,K,w))},m)),m.j=b}function Ri(m,b){const w=new xi;if(l.Image){const C=new Image;C.onload=g(si,w,"TestLoadImage: loaded",!0,b,C),C.onerror=g(si,w,"TestLoadImage: error",!1,b,C),C.onabort=g(si,w,"TestLoadImage: abort",!1,b,C),C.ontimeout=g(si,w,"TestLoadImage: timeout",!1,b,C),l.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=m}else b(!1)}function Zc(m,b){const w=new xi,C=new AbortController,K=setTimeout(()=>{C.abort(),si(w,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:C.signal}).then(Z=>{clearTimeout(K),Z.ok?si(w,"TestPingServer: ok",!0,b):si(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(K),si(w,"TestPingServer: error",!1,b)})}function si(m,b,w,C,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),C(w)}catch{}}function vs(){this.g=new ud}function Ji(m){this.i=m.Sb||null,this.h=m.ab||!1}v(Ji,hd),Ji.prototype.g=function(){return new Oa(this.i,this.h)};function Oa(m,b){Ut.call(this),this.H=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Oa,Ut),n=Oa.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=b,this.readyState=1,Ci(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(b.body=m),(this.H||l).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xo(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xo(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?_s(this):Ci(this),this.readyState==3&&Xo(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,_s(this))},n.Na=function(m){this.g&&(this.response=m,_s(this))},n.ga=function(){this.g&&_s(this)};function _s(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ci(m)}n.setRequestHeader=function(m,b){this.A.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=b.next();return m.join(`\r
`)};function Ci(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ai(m){let b="";return xe(m,function(w,C){b+=C,b+=":",b+=w,b+=`\r
`}),b}function La(m,b,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=ai(w),typeof m=="string"?w!=null&&Ar(w):rt(m,b,w))}function ct(m){Ut.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ct,Ut);var er=/^https?$/i,Jc=["POST","PUT"];n=ct.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,b,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(Z){ja(this,Z);return}if(m=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var K in C)w.set(K,C[K]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Z of C.keys())w.set(Z,C.get(Z));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(Jc,b,void 0)>=0)||C||K||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of w)this.g.setRequestHeader(Z,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Z){ja(this,Z)}};function ja(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.o=5,eu(m),Ir(m)}function eu(m){m.A||(m.A=!0,Zt(m,"complete"),Zt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Zt(this,"complete"),Zt(this,"abort"),Ir(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ir(this,!0)),ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ua(this):this.Xa())},n.Xa=function(){Ua(this)};function Ua(m){if(m.h&&typeof o<"u"){if(m.v&&Di(m)==4)setTimeout(m.Ca.bind(m),0);else if(Zt(m,"readystatechange"),Di(m)==4){m.h=!1;try{const Z=m.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var C;if(C=Z===0){let fe=String(m.D).match(_d)[1]||null;!fe&&l.self&&l.self.location&&(fe=l.self.location.protocol.slice(0,-1)),C=!er.test(fe?fe.toLowerCase():"")}w=C}if(w)Zt(m,"complete"),Zt(m,"success");else{m.o=6;try{var K=Di(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",eu(m)}}finally{Ir(m)}}}}function Ir(m,b){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const w=m.g;m.g=null,b||Zt(m,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Di(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Di(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),Wp(b)}};function cn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Rr(m){const b={};m=(m.g&&Di(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<m.length;C++){if(P(m[C]))continue;var w=gd(m[C]);const K=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=b[K]||[];b[K]=Z,Z.push(w)}De(b,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(m,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||b}function bs(m){this.za=0,this.i=[],this.j=new xi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tr("baseRetryDelayMs",5e3,m),this.Za=tr("retryDelaySeedMs",1e4,m),this.Ta=tr("forwardChannelMaxRetries",2,m),this.va=tr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new qc(m&&m.concurrentRequestLimit),this.Ba=new vs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=bs.prototype,n.ka=8,n.I=1,n.connect=function(m,b,w,C){zt(0),this.W=m,this.H=b||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.J=Dd(this,null,this.W),nr(this)};function tu(m){if(Wo(m),m.I==3){var b=m.V++,w=qt(m.J);if(rt(w,"SID",m.M),rt(w,"RID",b),rt(w,"TYPE","terminate"),za(m,w),b=new Ai(m,m.j,b),b.M=2,b.A=Ma(qt(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(b.A.toString(),"")}catch{}!w&&l.Image&&(new Image().src=b.A,w=!0),w||(b.g=Nd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ki(b)}Cd(m)}function Ts(m){m.g&&(iu(m),m.g.cancel(),m.g=null)}function Wo(m){Ts(m),m.v&&(l.clearTimeout(m.v),m.v=null),Jo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function nr(m){if(!Hc(m.h)&&!m.m){m.m=!0;var b=m.Ea;te||I(),ee||(te(),ee=!0),x.add(b,m),m.D=0}}function Zo(m,b){return Xi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=b.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Hi(f(m.Ea,m,b),Rd(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new Ai(this,this.j,m);let Z=this.o;if(this.U&&(Z?(Z=F(Z),pe(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(b+=C,b>4096){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=Sd(this,K,b),w=qt(this.J),rt(w,"RID",m),rt(w,"CVER",22),this.G&&rt(w,"X-HTTP-Session-Id",this.G),za(this,w),Z&&(this.R?b="headers="+Ar(ai(Z))+"&"+b:this.u&&La(w,this.u,Z)),Gc(this.h,K),this.Ra&&rt(w,"TYPE","init"),this.S?(rt(w,"$req",b),rt(w,"SID","null"),K.U=!0,$i(K,w,null)):$i(K,w,b),this.I=2}}else this.I==3&&(m?nu(this,m):this.i.length==0||Hc(this.h)||nu(this))};function nu(m,b){var w;b?w=b.l:w=m.V++;const C=qt(m.J);rt(C,"SID",m.M),rt(C,"RID",w),rt(C,"AID",m.K),za(m,C),m.u&&m.o&&La(C,m.u,m.o),w=new Ai(m,m.j,w,m.D+1),m.u===null&&(w.J=m.o),b&&(m.i=b.G.concat(m.i)),b=Sd(m,w,1e3),w.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Gc(m.h,w),$i(w,C,b)}function za(m,b){m.H&&xe(m.H,function(w,C){rt(b,C,w)}),m.l&&xe({},function(w,C){rt(b,C,w)})}function Sd(m,b,w){w=Math.min(m.i.length,w);const C=m.l?f(m.l.Ka,m.l,m):null;e:{var K=m.i;let Oe=-1;for(;;){const kt=["count="+w];Oe==-1?w>0?(Oe=K[0].g,kt.push("ofs="+Oe)):Oe=0:kt.push("ofs="+Oe);let tt=!0;for(let _t=0;_t<w;_t++){var Z=K[_t].g;const oi=K[_t].map;if(Z-=Oe,Z<0)Oe=Math.max(0,K[_t].g-100),tt=!1;else try{Z="req"+Z+"_"||"";try{var fe=oi instanceof Map?oi:Object.entries(oi);for(const[rr,Ni]of fe){let ki=Ni;h(Ni)&&(ki=fs(Ni)),kt.push(Z+rr+"="+encodeURIComponent(ki))}}catch(rr){throw kt.push(Z+"type="+encodeURIComponent("_badmap")),rr}}catch{C&&C(oi)}}if(tt){fe=kt.join("&");break e}}fe=void 0}return m=m.i.splice(0,w),b.G=m,fe}function xd(m){if(!m.g&&!m.v){m.Y=1;var b=m.Da;te||I(),ee||(te(),ee=!0),x.add(b,m),m.A=0}}function Ba(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Hi(f(m.Da,m),Rd(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Ad(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Hi(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),Ts(this),Ad(this))};function iu(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Ad(m){m.g=new Ai(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var b=qt(m.na);rt(b,"RID","rpc"),rt(b,"SID",m.M),rt(b,"AID",m.K),rt(b,"CI",m.F?"0":"1"),!m.F&&m.ia&&rt(b,"TO",m.ia),rt(b,"TYPE","xmlhttp"),za(m,b),m.u&&m.o&&La(b,m.u,m.o),m.O&&(m.g.H=m.O);var w=m.g;m=m.ba,w.M=1,w.A=Ma(qt(b)),w.u=null,w.R=!0,Ho(w,m)}n.Va=function(){this.C!=null&&(this.C=null,Ts(this),Ba(this),zt(19))};function Jo(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function Id(m,b){var w=null;if(m.g==b){Jo(m),iu(m),m.g=null;var C=2}else if(Wi(m.h,b))w=b.G,$c(m.h,b),C=1;else return;if(m.I!=0){if(b.o)if(C==1){w=b.u?b.u.length:0,b=Date.now()-b.F;var K=m.D;C=qo(),Zt(C,new qi(C,w)),nr(m)}else xd(m);else if(K=b.m,K==3||K==0&&b.X>0||!(C==1&&Zo(m,b)||C==2&&Ba(m)))switch(w&&w.length>0&&(b=m.h,b.i=b.i.concat(w)),K){case 1:ir(m,5);break;case 4:ir(m,10);break;case 3:ir(m,6);break;default:ir(m,2)}}}function Rd(m,b){let w=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(w*=2),w*b}function ir(m,b){if(m.j.info("Error code "+b),b==2){var w=f(m.bb,m),C=m.Ua;const K=!C;C=new Gn(C||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||sn(C,"https"),Ma(C),K?Ri(C.toString(),w):Zc(C.toString(),w)}else zt(2);m.I=0,m.l&&m.l.pa(b),Cd(m),Wo(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Cd(m){if(m.I=0,m.ja=[],m.l){const b=Kc(m.h);(b.length!=0||m.i.length!=0)&&(R(m.ja,b),R(m.ja,m.i),m.h.i.length=0,S(m.i),m.i.length=0),m.l.oa()}}function Dd(m,b,w){var C=w instanceof Gn?qt(w):new Gn(w);if(C.g!="")b&&(C.g=b+"."+C.g),ms(C,C.u);else{var K=l.location;C=K.protocol,b=b?b+"."+K.hostname:K.hostname,K=+K.port;const Z=new Gn(null);C&&sn(Z,C),b&&(Z.g=b),K&&ms(Z,K),w&&(Z.h=w),C=Z}return w=m.G,b=m.wa,w&&b&&rt(C,w,b),rt(C,"VER",m.ka),za(m,C),C}function Nd(m,b,w){if(b&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Aa&&!m.ma?new ct(new Ji({ab:w})):new ct(m.ma),b.Fa(m.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kd(){}n=kd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Es(){}Es.prototype.g=function(m,b){return new Rn(m,b)};function Rn(m,b){Ut.call(this),this.g=new bs(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(m?m["X-WebChannel-Client-Profile"]=b.sa:m={"X-WebChannel-Client-Profile":b.sa}),this.g.U=m,(m=b&&b.Qb)&&!P(m)&&(this.g.u=m),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!P(b)&&(this.g.G=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Cr(this)}v(Rn,Ut),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){tu(this.g)},Rn.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.v&&(w={},w.__data__=fs(m),m=w);b.i.push(new Ft(b.Ya++,m)),b.I==3&&nr(b)},Rn.prototype.N=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,Rn.Z.N.call(this)};function Vd(m){ln.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const w in b){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}v(Vd,ln);function Md(){ii.call(this),this.status=1}v(Md,ii);function Cr(m){this.g=m}v(Cr,kd),Cr.prototype.ra=function(){Zt(this.g,"a")},Cr.prototype.qa=function(m){Zt(this.g,new Vd(m))},Cr.prototype.pa=function(m){Zt(this.g,new Md)},Cr.prototype.oa=function(){Zt(this.g,"b")},Es.prototype.createWebChannel=Es.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,n2=function(){return new Es},t2=function(){return qo()},e2=Nt,Y0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,im=ka,Bc.COMPLETE="complete",JI=Bc,dd.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",Ut.prototype.listen=Ut.prototype.J,Yu=dd,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,ZI=ct}).apply(typeof Bf<"u"?Bf:typeof self<"u"?self:typeof window<"u"?window:{});const nS="@firebase/firestore",iS="4.9.2";class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");let Ac="12.3.0";const Co=new s_("@firebase/firestore");function Ll(){return Co.logLevel}function ce(n,...e){if(Co.logLevel<=Ge.DEBUG){const t=e.map(l_);Co.debug(`Firestore (${Ac}): ${n}`,...t)}}function Ot(n,...e){if(Co.logLevel<=Ge.ERROR){const t=e.map(l_);Co.error(`Firestore (${Ac}): ${n}`,...t)}}function bh(n,...e){if(Co.logLevel<=Ge.WARN){const t=e.map(l_);Co.warn(`Firestore (${Ac}): ${n}`,...t)}}function l_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ye(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,i2(n,i,t)}function i2(n,e,t){let i=`FIRESTORE (${Ac}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ot(i),new Error(i)}function Te(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||i2(e,s,i)}function _e(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class V3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_n.UNAUTHENTICATED)))}shutdown(){}}class P3{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jr,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},h=d=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jr)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Te(typeof i.accessToken=="string",31837,{l:i}),new V3(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new _n(e)}}class O3{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class L3{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new O3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(_n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);const i=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new rS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function U3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class c_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=U3(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%62))}return i}}function Ve(n,e){return n<e?-1:n>e?1:0}function X0(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return o0(s)===o0(o)?Ve(s,o):o0(s)?1:-1}return Ve(n.length,e.length)}const z3=55296,B3=57343;function o0(n){const e=n.charCodeAt(0);return e>=z3&&e<=B3}function nc(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function r2(n){return n+"\0"}const sS="__name__";class ur{constructor(e,t,i){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ye(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ur.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ur?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const o=ur.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Ve(e.length,t.length)}static compareSegments(e,t){const i=ur.isNumericId(e),s=ur.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?ur.extractNumericId(e).compare(ur.extractNumericId(t)):X0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return la.fromString(e.substring(4,e.length-2))}}class it extends ur{construct(e,t,i){return new it(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new it(t)}static emptyPath(){return new it([])}}const F3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends ur{construct(e,t,i){return new St(e,t,i)}static isValidIdentifier(e){return F3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sS}static keyField(){return new St([sS])}static fromServerFormat(e){const t=[];let i="",s=0;const o=()=>{if(i.length===0)throw new he(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new he(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new he(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new he(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(t)}static emptyPath(){return new St([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(it.fromString(e))}static fromName(e){return new me(it.fromString(e).popFirst(5))}static empty(){return new me(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new it(e.slice()))}}function s2(n,e,t){if(!t)throw new he(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function q3(n,e,t,i){if(e===!0&&i===!0)throw new he(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aS(n){if(!me.isDocumentKey(n))throw new he(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oS(n){if(me.isDocumentKey(n))throw new he(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function a2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function dp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function zi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dp(n);throw new he(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Qh(n,e){if(!a2(n))throw new he(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new he(ie.INVALID_ARGUMENT,t);return!0}const lS=-62135596800,cS=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*cS);return new Xe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lS)throw new he(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cS}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qh(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Xt("string",Xe._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Xe(0,0))}static max(){return new Se(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ic=-1;class Dm{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function W0(n){return n.fields.find((e=>e.kind===2))}function lo(n){return n.fields.filter((e=>e.kind!==2))}Dm.UNKNOWN_ID=-1;class rm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Th{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Th(0,ni.min())}}function o2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Se.fromTimestamp(i===1e9?new Xe(t+1,0):new Xe(t,i));return new ni(s,me.empty(),e)}function l2(n){return new ni(n.readTime,n.key,ic)}class ni{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ni(Se.min(),me.empty(),ic)}static max(){return new ni(Se.max(),me.empty(),ic)}}function u_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}const c2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ea(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==c2)throw n;ce("LocalStore","Unexpectedly lost primary lease")}class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,i)=>{t(e)}))}static reject(e){return new $(((t,i)=>{i(e)}))}static waitFor(e){return new $(((t,i)=>{let s=0,o=0,l=!1;e.forEach((h=>{++s,h.next((()=>{++o,l&&o===s&&t()}),(d=>i(d)))})),l=!0,o===s&&t()}))}static or(e){let t=$.resolve(!1);for(const i of e)t=t.next((s=>s?$.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,o)=>{i.push(t.call(this,s,o))})),this.waitFor(i)}static mapArray(e,t){return new $(((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{l[f]=g,++h,h===o&&i(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new $(((i,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):i()};o()}))}}const Jn="SimpleDb";class fp{static open(e,t,i,s){try{return new fp(t,e.transaction(s,i))}catch(o){throw new nh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Jr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new nh(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=h_(i.target.error);this.S.reject(new nh(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(Jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new G3(t)}}class ca{static delete(e){return ce(Jn,"Removing database:",e),ho(jI().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!GI())return!1;if(ca.F())return!0;const e=tn(),t=ca.M(e),i=0<t&&t<10,s=h2(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,ca.M(tn())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(Jn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const l=o.target.result;t(l)},s.onblocked=()=>{i(new nh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const l=o.target.error;l.name==="VersionError"?i(new he(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new he(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new nh(e,l))},s.onupgradeneeded=o=>{ce(Jn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,s.transaction,o.oldVersion,this.version).next((()=>{ce(Jn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const h=fp.open(this.db,e,o?"readonly":"readwrite",i),d=s(h).next((f=>(h.C(),f))).catch((f=>(h.abort(f),$.reject(f)))).toPromise();return d.catch((()=>{})),await h.D,d}catch(h){const d=h,f=d.name!=="FirebaseError"&&l<3;if(ce(Jn,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function h2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class H3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ho(this.U.delete())}}class nh extends he{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wa(n){return n.name==="IndexedDbTransactionError"}class G3{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ce(Jn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ce(Jn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ho(i)}add(e){return ce(Jn,"ADD",this.store.name,e,e),ho(this.store.add(e))}get(e){return ho(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(Jn,"GET",this.store.name,e,t),t)))}delete(e){return ce(Jn,"DELETE",this.store.name,e),ho(this.store.delete(e))}count(){return ce(Jn,"COUNT",this.store.name),ho(this.store.count())}J(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new $(((l,h)=>{o.onerror=d=>{h(d.target.error)},o.onsuccess=d=>{l(d.target.result)}}))}{const o=this.cursor(i),l=[];return this.H(o,((h,d)=>{l.push(d)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new $(((s,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{s(l.target.result)}}))}Z(e,t){ce(Jn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,((o,l,h)=>h.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}te(e){const t=this.cursor({});return new $(((i,s)=>{t.onerror=o=>{const l=h_(o.target.error);s(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((h=>{h?l.continue():i()})):i()}}))}H(e,t){const i=[];return new $(((s,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void s();const d=new H3(h),f=t(h.primaryKey,h.value,d);if(f instanceof $){const g=f.catch((v=>(d.done(),$.reject(v))));i.push(g)}d.isDone?s():d.G===null?h.continue():h.continue(d.G)}})).next((()=>$.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ho(n){return new $(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=h_(i.target.error);t(s)}}))}let uS=!1;function h_(n){const e=ca.M(tn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uS||(uS=!0,setTimeout((()=>{throw i}),0)),i}}return n}const ih="IndexBackfiller";class $3{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(ih,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(ih,`Documents written: ${t}`)}catch(t){wa(t)?ce(ih,"Ignoring IndexedDB error during index backfill: ",t):await Ea(t)}await this.re(6e4)}))}}class K3{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,o=!0;return $.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return ce(ih,`Processing collection: ${l}`),this.oe(e,l,s).next((h=>{s-=h,i.add(l)}));o=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(s,o))).next((h=>(ce(ih,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,o)=>{const l=l2(o);u_(l,i)>0&&(i=l)})),new ni(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class zn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zn.ce=-1;const _o=-1;function mp(n){return n==null}function Eh(n){return n===0&&1/n==-1/0}function d2(n){return typeof n=="number"&&Number.isInteger(n)&&!Eh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Nm="";function Sn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hS(e)),e=Q3(n.get(t),e);return hS(e)}function Q3(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Nm:t+="";break;default:t+=o}}return t}function hS(n){return n+Nm+""}function mr(n){const e=n.length;if(Te(e>=2,64408,{path:n}),e===2)return Te(n.charAt(0)===Nm&&n.charAt(1)==="",56145,{path:n}),it.emptyPath();const t=e-2,i=[];let s="";for(let o=0;o<e;){const l=n.indexOf(Nm,o);switch((l<0||l>t)&&ye(50515,{path:n}),n.charAt(l+1)){case"":const h=n.substring(o,l);let d;s.length===0?d=h:(s+=h,d=s,s=""),i.push(d);break;case"":s+=n.substring(o,l),s+="\0";break;case"":s+=n.substring(o,l+1);break;default:ye(61167,{path:n})}o=l+2}return new it(i)}const co="remoteDocuments",Yh="owner",Dl="owner",wh="mutationQueues",Y3="userId",Li="mutations",dS="batchId",go="userMutationsIndex",fS=["userId","batchId"];function sm(n,e){return[n,Sn(e)]}function f2(n,e,t){return[n,Sn(e),t]}const X3={},rc="documentMutations",km="remoteDocumentsV14",W3=["prefixPath","collectionGroup","readTime","documentId"],am="documentKeyIndex",Z3=["prefixPath","collectionGroup","documentId"],m2="collectionGroupIndex",J3=["collectionGroup","readTime","prefixPath","documentId"],Sh="remoteDocumentGlobal",Z0="remoteDocumentGlobalKey",sc="targets",p2="queryTargetsIndex",e5=["canonicalId","targetId"],ac="targetDocuments",t5=["targetId","path"],d_="documentTargetsIndex",n5=["path","targetId"],Vm="targetGlobalKey",bo="targetGlobal",xh="collectionParents",i5=["collectionId","parent"],oc="clientMetadata",r5="clientId",pp="bundles",s5="bundleId",gp="namedQueries",a5="name",f_="indexConfiguration",o5="indexId",J0="collectionGroupIndex",l5="collectionGroup",rh="indexState",c5=["indexId","uid"],g2="sequenceNumberIndex",u5=["uid","sequenceNumber"],sh="indexEntries",h5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],y2="documentKeyIndex",d5=["indexId","uid","orderedDocumentKey"],yp="documentOverlays",f5=["userId","collectionPath","documentId"],ev="collectionPathOverlayIndex",m5=["userId","collectionPath","largestBatchId"],v2="collectionGroupOverlayIndex",p5=["userId","collectionGroup","largestBatchId"],m_="globals",g5="name",_2=[wh,Li,rc,co,sc,Yh,bo,ac,oc,Sh,xh,pp,gp],y5=[..._2,yp],b2=[wh,Li,rc,km,sc,Yh,bo,ac,oc,Sh,xh,pp,gp,yp],T2=b2,p_=[...T2,f_,rh,sh],v5=p_,E2=[...p_,m_],_5=E2;class tv extends u2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function nn(n,e){const t=_e(n);return ca.O(t.le,e)}function mS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function w2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pt{constructor(e,t){this.comparator=e,this.root=t||pn.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ff(this.root,e,this.comparator,!0)}}class Ff{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??pn.RED,this.left=s??pn.EMPTY,this.right=o??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new pn(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return pn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,i,s,o){return this}insert(e,t,i){return new pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class lt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pS(this.data.getIterator())}getIteratorFrom(e){return new pS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new lt(this.comparator);return t.data=e,t}}class pS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nl(n){return n.hasNext()?n.getNext():void 0}class Bn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Bn([])}unionWith(e){let t=new lt(St.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nc(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class S2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new S2("Invalid base64 string: "+o):o}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const b5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(n){if(Te(!!n,39018),typeof n=="string"){let e=0;const t=b5.exec(n);if(Te(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function is(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}const x2="server_timestamp",A2="__type__",I2="__previous_value__",R2="__local_write_time__";function g_(n){return(n?.mapValue?.fields||{})[A2]?.stringValue===x2}function vp(n){const e=n.mapValue.fields[I2];return g_(e)?vp(e):e}function Ah(n){const e=ns(n.mapValue.fields[R2].timestampValue);return new Xe(e.seconds,e.nanos)}class T5{constructor(e,t,i,s,o,l,h,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const Mm="(default)";class Do{constructor(e,t){this.projectId=e,this.database=t||Mm}static empty(){return new Do("","")}get isDefaultDatabase(){return this.database===Mm}isEqual(e){return e instanceof Do&&e.projectId===this.projectId&&e.database===this.database}}const y_="__type__",C2="__max__",ra={mapValue:{fields:{__type__:{stringValue:C2}}}},v_="__vector__",lc="value",om={nullValue:"NULL_VALUE"};function da(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?g_(n)?4:D2(n)?9007199254740991:_p(n)?10:11:ye(28295,{value:n})}function wr(n,e){if(n===e)return!0;const t=da(n);if(t!==da(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ah(n).isEqual(Ah(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=ns(s.timestampValue),h=ns(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return is(s.bytesValue).isEqual(is(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return Tt(s.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(s.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Tt(s.integerValue)===Tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Tt(s.doubleValue),h=Tt(o.doubleValue);return l===h?Eh(l)===Eh(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return nc(n.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(mS(l)!==mS(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!wr(l[d],h[d])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function Ih(n,e){return(n.values||[]).find((t=>wr(t,e)))!==void 0}function fa(n,e){if(n===e)return 0;const t=da(n),i=da(e);if(t!==i)return Ve(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const h=Tt(o.integerValue||o.doubleValue),d=Tt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,e);case 3:return gS(n.timestampValue,e.timestampValue);case 4:return gS(Ah(n),Ah(e));case 5:return X0(n.stringValue,e.stringValue);case 6:return(function(o,l){const h=is(o),d=is(l);return h.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const h=o.split("/"),d=l.split("/");for(let f=0;f<h.length&&f<d.length;f++){const g=Ve(h[f],d[f]);if(g!==0)return g}return Ve(h.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const h=Ve(Tt(o.latitude),Tt(l.latitude));return h!==0?h:Ve(Tt(o.longitude),Tt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return yS(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const h=o.fields||{},d=l.fields||{},f=h[lc]?.arrayValue,g=d[lc]?.arrayValue,v=Ve(f?.values?.length||0,g?.values?.length||0);return v!==0?v:yS(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===ra.mapValue&&l===ra.mapValue)return 0;if(o===ra.mapValue)return 1;if(l===ra.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),f=l.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const _=X0(d[v],g[v]);if(_!==0)return _;const S=fa(h[d[v]],f[g[v]]);if(S!==0)return S}return Ve(d.length,g.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function gS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=ns(n),i=ns(e),s=Ve(t.seconds,i.seconds);return s!==0?s:Ve(t.nanos,i.nanos)}function yS(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const o=fa(t[s],i[s]);if(o)return o}return Ve(t.length,i.length)}function cc(n){return nv(n)}function nv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ns(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return is(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const o of t.values||[])s?s=!1:i+=",",i+=nv(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${nv(t.fields[l])}`;return s+"}"})(n.mapValue):ye(61005,{value:n})}function lm(n){switch(da(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vp(n);return e?16+lm(e):16;case 5:return 2*n.stringValue.length;case 6:return is(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+lm(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Sa(i.fields,((o,l)=>{s+=o.length+lm(l)})),s})(n.mapValue);default:throw ye(13486,{value:n})}}function Rh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iv(n){return!!n&&"integerValue"in n}function Ch(n){return!!n&&"arrayValue"in n}function vS(n){return!!n&&"nullValue"in n}function _S(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cm(n){return!!n&&"mapValue"in n}function _p(n){return(n?.mapValue?.fields||{})[y_]?.stringValue===v_}function ah(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Sa(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ah(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ah(n.arrayValue.values[t]);return e}return{...n}}function D2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===C2}const N2={mapValue:{fields:{[y_]:{stringValue:v_},[lc]:{arrayValue:{}}}}};function E5(n){return"nullValue"in n?om:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Rh(Do.empty(),me.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?_p(n)?N2:{mapValue:{}}:ye(35942,{value:n})}function w5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Rh(Do.empty(),me.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?N2:"mapValue"in n?_p(n)?{mapValue:{}}:ra:ye(61959,{value:n})}function bS(n,e){const t=fa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function TS(n,e){const t=fa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!cm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ah(t)}setAll(e){let t=St.emptyPath(),i={},s=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,i,s),i={},s=[],t=h.popLast()}l?i[h.lastSegment()]=ah(l):s.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){const t=this.field(e.popLast());cm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];cm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Sa(t,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new Tn(ah(this.value))}}function k2(n){const e=[];return Sa(n.fields,((t,i)=>{const s=new St([t]);if(cm(i)){const o=k2(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Bn(e)}class Dt{constructor(e,t,i,s,o,l,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Dt(e,0,Se.min(),Se.min(),Se.min(),Tn.empty(),0)}static newFoundDocument(e,t,i,s){return new Dt(e,1,t,Se.min(),i,s,0)}static newNoDocument(e,t){return new Dt(e,2,t,Se.min(),Se.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new Dt(e,3,t,Se.min(),Se.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uc{constructor(e,t){this.position=e,this.inclusive=t}}function ES(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?i=me.comparator(me.fromName(l.referenceValue),t.key):i=fa(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function wS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wr(n.position[t],e.position[t]))return!1;return!0}class Dh{constructor(e,t="asc"){this.field=e,this.dir=t}}function S5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class V2{}class $e extends V2{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new x5(e,t,i):t==="array-contains"?new R5(e,i):t==="in"?new U2(e,i):t==="not-in"?new C5(e,i):t==="array-contains-any"?new D5(e,i):new $e(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new A5(e,i):new I5(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fa(t,this.value)):t!==null&&da(this.value)===da(t)&&this.matchesComparison(fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ot extends V2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ot(e,t)}matches(e){return hc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hc(n){return n.op==="and"}function rv(n){return n.op==="or"}function __(n){return M2(n)&&hc(n)}function M2(n){for(const e of n.filters)if(e instanceof ot)return!1;return!0}function sv(n){if(n instanceof $e)return n.field.canonicalString()+n.op.toString()+cc(n.value);if(__(n))return n.filters.map((e=>sv(e))).join(",");{const e=n.filters.map((t=>sv(t))).join(",");return`${n.op}(${e})`}}function P2(n,e){return n instanceof $e?(function(i,s){return s instanceof $e&&i.op===s.op&&i.field.isEqual(s.field)&&wr(i.value,s.value)})(n,e):n instanceof ot?(function(i,s){return s instanceof ot&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,l,h)=>o&&P2(l,s.filters[h])),!0):!1})(n,e):void ye(19439)}function O2(n,e){const t=n.filters.concat(e);return ot.create(t,n.op)}function L2(n){return n instanceof $e?(function(t){return`${t.field.canonicalString()} ${t.op} ${cc(t.value)}`})(n):n instanceof ot?(function(t){return t.op.toString()+" {"+t.getFilters().map(L2).join(" ,")+"}"})(n):"Filter"}class x5 extends $e{constructor(e,t,i){super(e,t,i),this.key=me.fromName(i.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class A5 extends $e{constructor(e,t){super(e,"in",t),this.keys=j2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class I5 extends $e{constructor(e,t){super(e,"not-in",t),this.keys=j2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function j2(n,e){return(e.arrayValue?.values||[]).map((t=>me.fromName(t.referenceValue)))}class R5 extends $e{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ch(t)&&Ih(t.arrayValue,this.value)}}class U2 extends $e{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ih(this.value.arrayValue,t)}}class C5 extends $e{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ih(this.value.arrayValue,t)}}class D5 extends $e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ih(this.value.arrayValue,i)))}}class N5{constructor(e,t=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function av(n,e=null,t=[],i=[],s=null,o=null,l=null){return new N5(n,e,t,i,s,o,l)}function No(n){const e=_e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>sv(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),mp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>cc(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>cc(i))).join(",")),e.Te=t}return e.Te}function Xh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!S5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!P2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wS(n.startAt,e.startAt)&&wS(n.endAt,e.endAt)}function Pm(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Om(n,e){return n.filters.filter((t=>t instanceof $e&&t.field.isEqual(e)))}function SS(n,e,t){let i=om,s=!0;for(const o of Om(n,e)){let l=om,h=!0;switch(o.op){case"<":case"<=":l=E5(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,h=!1;break;case"!=":case"not-in":l=om}bS({value:i,inclusive:s},{value:l,inclusive:h})<0&&(i=l,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];bS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}function xS(n,e,t){let i=ra,s=!0;for(const o of Om(n,e)){let l=ra,h=!0;switch(o.op){case">=":case">":l=w5(o.value),h=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,h=!1;break;case"!=":case"not-in":l=ra}TS({value:i,inclusive:s},{value:l,inclusive:h})>0&&(i=l,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];TS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}class Ic{constructor(e,t=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function z2(n,e,t,i,s,o,l,h){return new Ic(n,e,t,i,s,o,l,h)}function bp(n){return new Ic(n)}function AS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function B2(n){return n.collectionGroup!==null}function oh(n){const e=_e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new lt(St.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(h=h.add(f.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Dh(o,i))})),t.has(St.keyField().canonicalString())||e.Ie.push(new Dh(St.keyField(),i))}return e.Ie}function ti(n){const e=_e(n);return e.Ee||(e.Ee=k5(e,oh(n))),e.Ee}function k5(n,e){if(n.limitType==="F")return av(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Dh(s.field,o)}));const t=n.endAt?new uc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new uc(n.startAt.position,n.startAt.inclusive):null;return av(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ov(n,e){const t=n.filters.concat([e]);return new Ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Lm(n,e,t){return new Ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tp(n,e){return Xh(ti(n),ti(e))&&n.limitType===e.limitType}function F2(n){return`${No(ti(n))}|lt:${n.limitType}`}function jl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>L2(s))).join(", ")}]`),mp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>cc(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>cc(s))).join(",")),`Target(${i})`})(ti(n))}; limitType=${n.limitType})`}function Wh(n,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,s){for(const o of oh(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(l,h,d){const f=ES(l,h,d);return l.inclusive?f<=0:f<0})(i.startAt,oh(i),s)||i.endAt&&!(function(l,h,d){const f=ES(l,h,d);return l.inclusive?f>=0:f>0})(i.endAt,oh(i),s))})(n,e)}function q2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function H2(n){return(e,t)=>{let i=!1;for(const s of oh(n)){const o=V5(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function V5(n,e,t){const i=n.field.isKeyField()?me.comparator(e.key,t.key):(function(o,l,h){const d=l.data.field(o),f=h.data.field(o);return d!==null&&f!==null?fa(d,f):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ye(19790,{direction:n.dir})}}class cs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,((t,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return w2(this.inner)}size(){return this.innerSize}}const M5=new pt(me.comparator);function ei(){return M5}const G2=new pt(me.comparator);function Xu(...n){let e=G2;for(const t of n)e=e.insert(t.key,t);return e}function $2(n){let e=G2;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function pr(){return lh()}function K2(){return lh()}function lh(){return new cs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const P5=new pt(me.comparator),O5=new lt(me.comparator);function ze(...n){let e=O5;for(const t of n)e=e.add(t);return e}const L5=new lt(Ve);function b_(){return L5}function T_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function Q2(n){return{integerValue:""+n}}function j5(n,e){return d2(e)?Q2(e):T_(n,e)}class Ep{constructor(){this._=void 0}}function U5(n,e,t){return n instanceof Nh?(function(s,o){const l={fields:{[A2]:{stringValue:x2},[R2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&g_(o)&&(o=vp(o)),o&&(l.fields[I2]=o),{mapValue:l}})(t,e):n instanceof dc?X2(n,e):n instanceof fc?W2(n,e):(function(s,o){const l=Y2(s,o),h=IS(l)+IS(s.Ae);return iv(l)&&iv(s.Ae)?Q2(h):T_(s.serializer,h)})(n,e)}function z5(n,e,t){return n instanceof dc?X2(n,e):n instanceof fc?W2(n,e):t}function Y2(n,e){return n instanceof kh?(function(i){return iv(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Nh extends Ep{}class dc extends Ep{constructor(e){super(),this.elements=e}}function X2(n,e){const t=Z2(e);for(const i of n.elements)t.some((s=>wr(s,i)))||t.push(i);return{arrayValue:{values:t}}}class fc extends Ep{constructor(e){super(),this.elements=e}}function W2(n,e){let t=Z2(e);for(const i of n.elements)t=t.filter((s=>!wr(s,i)));return{arrayValue:{values:t}}}class kh extends Ep{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function IS(n){return Tt(n.integerValue||n.doubleValue)}function Z2(n){return Ch(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class B5{constructor(e,t){this.field=e,this.transform=t}}function F5(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof dc&&s instanceof dc||i instanceof fc&&s instanceof fc?nc(i.elements,s.elements,wr):i instanceof kh&&s instanceof kh?wr(i.Ae,s.Ae):i instanceof Nh&&s instanceof Nh})(n.transform,e.transform)}class q5{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function um(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class wp{}function J2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sp(n.key,En.none()):new Rc(n.key,n.data,En.none());{const t=n.data,i=Tn.empty();let s=new lt(St.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new us(n.key,i,new Bn(s.toArray()),En.none())}}function H5(n,e,t){n instanceof Rc?(function(s,o,l){const h=s.value.clone(),d=CS(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof us?(function(s,o,l){if(!um(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=CS(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(eR(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function ch(n,e,t,i){return n instanceof Rc?(function(o,l,h,d){if(!um(o.precondition,l))return h;const f=o.value.clone(),g=DS(o.fieldTransforms,d,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof us?(function(o,l,h,d){if(!um(o.precondition,l))return h;const f=DS(o.fieldTransforms,d,l),g=l.data;return g.setAll(eR(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(o,l,h){return um(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function G5(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=Y2(i.transform,s||null);o!=null&&(t===null&&(t=Tn.empty()),t.set(i.field,o))}return t||null}function RS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&nc(i,s,((o,l)=>F5(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Rc extends wp{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class us extends wp{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function eR(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function CS(n,e,t){const i=new Map;Te(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,z5(l,h,t[s]))}return i}function DS(n,e,t){const i=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);i.set(s.field,U5(o,l,e))}return i}class Sp extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tR extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class E_{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&H5(o,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ch(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ch(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=K2();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=t.has(s.key)?null:h;const d=J2(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&nc(this.mutations,e.mutations,((t,i)=>RS(t,i)))&&nc(this.baseMutations,e.baseMutations,((t,i)=>RS(t,i)))}}class w_{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Te(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return P5})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new w_(e,t,i,s)}}class S_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class $5{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qt,Ye;function K5(n){switch(n){case ie.OK:return ye(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function nR(n){if(n===void 0)return Ot("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Qt.OK:return ie.OK;case Qt.CANCELLED:return ie.CANCELLED;case Qt.UNKNOWN:return ie.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return ie.INTERNAL;case Qt.UNAVAILABLE:return ie.UNAVAILABLE;case Qt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Qt.NOT_FOUND:return ie.NOT_FOUND;case Qt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Qt.ABORTED:return ie.ABORTED;case Qt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Qt.DATA_LOSS:return ie.DATA_LOSS;default:return ye(39323,{code:n})}}(Ye=Qt||(Qt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function Q5(){return new TextEncoder}const Y5=new la([4294967295,4294967295],0);function NS(n){const e=Q5().encode(n),t=new WI;return t.update(e),new Uint8Array(t.digest())}function kS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new la([t,i],0),new la([s,o],0)]}class x_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Wu(`Invalid padding: ${t}`);if(i<0)throw new Wu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Wu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=la.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(la.fromNumber(i)));return s.compare(Y5)===1&&(s=new la([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=NS(e),[i,s]=kS(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new x_(o,s,t);return i.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=NS(e),[i,s]=kS(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zh{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Zh(Se.min(),s,new pt(Ve),ei(),ze())}}class Jh{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Jh(i,t,ze(),ze(),ze())}}class hm{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class iR{constructor(e,t){this.targetId=e,this.Ce=t}}class rR{constructor(e,t,i=jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class VS{constructor(){this.ve=0,this.Fe=MS(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),i=ze();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ye(38017,{changeType:o})}})),new Jh(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=MS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class X5{constructor(e){this.Ge=e,this.ze=new Map,this.je=ei(),this.Je=qf(),this.He=qf(),this.Ye=new pt(Ve)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Pm(o))if(i===0){const l=new me(o.path);this.et(t,l,Dt.newNoDocument(l,Se.min()))}else Te(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t;let l,h;try{l=is(i).toUint8Array()}catch(d){if(d instanceof S2)return bh("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new x_(l,s,o)}catch(d){return bh(d instanceof Wu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Pm(h.target)){const d=new me(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Dt.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let i=ze();this.He.forEach(((o,l)=>{let h=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new Zh(e,t,this.Ye,this.je,i);return this.je=ei(),this.Je=qf(),this.He=qf(),this.Ye=new pt(Ve),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new VS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new lt(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new lt(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new VS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qf(){return new pt(me.comparator)}function MS(){return new pt(me.comparator)}const W5={asc:"ASCENDING",desc:"DESCENDING"},Z5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J5={and:"AND",or:"OR"};class e6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lv(n,e){return n.useProto3Json||mp(e)?e:{value:e}}function mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function t6(n,e){return mc(n,e.toTimestamp())}function Nn(n){return Te(!!n,49232),Se.fromTimestamp((function(t){const i=ns(t);return new Xe(i.seconds,i.nanos)})(n))}function A_(n,e){return cv(n,e).canonicalString()}function cv(n,e){const t=(function(s){return new it(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function aR(n){const e=it.fromString(n);return Te(pR(e),10190,{key:e.toString()}),e}function jm(n,e){return A_(n.databaseId,e.path)}function To(n,e){const t=aR(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(cR(t))}function oR(n,e){return A_(n.databaseId,e)}function lR(n){const e=aR(n);return e.length===4?it.emptyPath():cR(e)}function uv(n){return new it(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cR(n){return Te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function PS(n,e,t){return{name:jm(n,e),fields:t.value.mapValue.fields}}function n6(n,e,t){const i=To(n,e.name),s=Nn(e.updateTime),o=e.createTime?Nn(e.createTime):Se.min(),l=new Tn({mapValue:{fields:e.fields}}),h=Dt.newFoundDocument(i,s,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function i6(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ye(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Te(g===void 0||typeof g=="string",58123),jt.fromBase64String(g||"")):(Te(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),jt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(f){const g=f.code===void 0?ie.UNKNOWN:nR(f.code);return new he(g,f.message||"")})(l);t=new rR(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=To(n,i.document.name),o=Nn(i.document.updateTime),l=i.document.createTime?Nn(i.document.createTime):Se.min(),h=new Tn({mapValue:{fields:i.document.fields}}),d=Dt.newFoundDocument(s,o,l,h),f=i.targetIds||[],g=i.removedTargetIds||[];t=new hm(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=To(n,i.document),o=i.readTime?Nn(i.readTime):Se.min(),l=Dt.newNoDocument(s,o),h=i.removedTargetIds||[];t=new hm([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=To(n,i.document),o=i.removedTargetIds||[];t=new hm([],o,s,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new $5(s,o),h=i.targetId;t=new iR(h,l)}}return t}function Um(n,e){let t;if(e instanceof Rc)t={update:PS(n,e.key,e.value)};else if(e instanceof Sp)t={delete:jm(n,e.key)};else if(e instanceof us)t={update:PS(n,e.key,e.data),updateMask:c6(e.fieldMask)};else{if(!(e instanceof tR))return ye(16599,{Vt:e.type});t={verify:jm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const h=l.transform;if(h instanceof Nh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof dc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof kh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw ye(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:t6(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye(27497)})(n,e.precondition)),t}function hv(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?En.updateTime(Nn(o.updateTime)):o.exists!==void 0?En.exists(o.exists):En.none()})(e.currentDocument):En.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(l,h){let d=null;if("setToServerValue"in h)Te(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),d=new Nh;else if("appendMissingElements"in h){const g=h.appendMissingElements.values||[];d=new dc(g)}else if("removeAllFromArray"in h){const g=h.removeAllFromArray.values||[];d=new fc(g)}else"increment"in h?d=new kh(l,h.increment):ye(16584,{proto:h});const f=St.fromServerFormat(h.fieldPath);return new B5(f,d)})(n,s))):[];if(e.update){e.update.name;const s=To(n,e.update.name),o=new Tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(d){const f=d.fieldPaths||[];return new Bn(f.map((g=>St.fromServerFormat(g))))})(e.updateMask);return new us(s,o,l,t,i)}return new Rc(s,o,t,i)}if(e.delete){const s=To(n,e.delete);return new Sp(s,t)}if(e.verify){const s=To(n,e.verify);return new tR(s,t)}return ye(1463,{proto:e})}function r6(n,e){return n&&n.length>0?(Te(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?Nn(s.updateTime):Nn(o);return l.isEqual(Se.min())&&(l=Nn(o)),new q5(l,s.transformResults||[])})(t,e)))):[]}function uR(n,e){return{documents:[oR(n,e.path)]}}function hR(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=oR(n,s);const o=(function(f){if(f.length!==0)return mR(ot.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:Ul(_.field),direction:a6(_.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=lv(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function dR(n){let e=lR(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Te(i===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(v){const _=fR(v);return _ instanceof ot&&__(_)?_.getFilters():[_]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((_=>(function(R){return new Dh(zl(R.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(_)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let _;return _=typeof v=="object"?v.value:v,mp(_)?null:_})(t.limit));let d=null;t.startAt&&(d=(function(v){const _=!!v.before,S=v.values||[];return new uc(S,_)})(t.startAt));let f=null;return t.endAt&&(f=(function(v){const _=!v.before,S=v.values||[];return new uc(S,_)})(t.endAt)),z2(e,s,l,o,h,"F",d,f)}function s6(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=zl(t.unaryFilter.field);return $e.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=zl(t.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=zl(t.unaryFilter.field);return $e.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=zl(t.unaryFilter.field);return $e.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return $e.create(zl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ot.create(t.compositeFilter.filters.map((i=>fR(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function a6(n){return W5[n]}function o6(n){return Z5[n]}function l6(n){return J5[n]}function Ul(n){return{fieldPath:n.canonicalString()}}function zl(n){return St.fromServerFormat(n.fieldPath)}function mR(n){return n instanceof $e?(function(t){if(t.op==="=="){if(_S(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NAN"}};if(vS(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_S(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NOT_NAN"}};if(vS(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(t.field),op:o6(t.op),value:t.value}}})(n):n instanceof ot?(function(t){const i=t.getFilters().map((s=>mR(s)));return i.length===1?i[0]:{compositeFilter:{op:l6(t.op),filters:i}}})(n):ye(54877,{filter:n})}function c6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function pR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Yr{constructor(e,t,i,s,o=Se.min(),l=Se.min(),h=jt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gR{constructor(e){this.yt=e}}function u6(n,e){let t;if(e.document)t=n6(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=me.fromSegments(e.noDocument.path),s=Vo(e.noDocument.readTime);t=Dt.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const i=me.fromSegments(e.unknownDocument.path),s=Vo(e.unknownDocument.version);t=Dt.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const o=new Xe(s[0],s[1]);return Se.fromTimestamp(o)})(e.readTime)),t}function OS(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:zm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,l){return{name:jm(o,l.key),fields:l.data.value.mapValue.fields,updateTime:mc(o,l.version.toTimestamp()),createTime:mc(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ko(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:ko(e.version)}}return i}function zm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ko(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vo(n){const e=new Xe(n.seconds,n.nanoseconds);return Se.fromTimestamp(e)}function fo(n,e){const t=(e.baseMutations||[]).map((o=>hv(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];l.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>hv(n.yt,o))),s=Xe.fromMillis(e.localWriteTimeMs);return new E_(e.batchId,s,t,i)}function Zu(n){const e=Vo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Vo(n.lastLimboFreeSnapshotVersion):Se.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return Te(l===1,1966,{count:l}),ti(bp(lR(o.documents[0])))})(n.query):(function(o){return ti(dR(o))})(n.query),new Yr(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,jt.fromBase64String(n.resumeToken))}function yR(n,e){const t=ko(e.snapshotVersion),i=ko(e.lastLimboFreeSnapshotVersion);let s;s=Pm(e.target)?uR(n.yt,e.target):hR(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:No(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function vR(n){const e=dR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Lm(e,e.limit,"L"):e}function l0(n,e){return new S_(e.largestBatchId,hv(n.yt,e.overlayMutation))}function LS(n,e){const t=e.path.lastSegment();return[n,Sn(e.path.popLast()),t]}function jS(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:ko(i.readTime),documentKey:Sn(i.documentKey.path),largestBatchId:i.largestBatchId}}class h6{getBundleMetadata(e,t){return US(e).get(t).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:Vo(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,t){return US(e).put((function(s){return{bundleId:s.id,createTime:ko(Nn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return zS(e).get(t).next((i=>{if(i)return(function(o){return{name:o.name,query:vR(o.bundledQuery),readTime:Vo(o.readTime)}})(i)}))}saveNamedQuery(e,t){return zS(e).put((function(s){return{name:s.name,readTime:ko(Nn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function US(n){return nn(n,pp)}function zS(n){return nn(n,gp)}class xp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new xp(e,i)}getOverlay(e,t){return qu(e).get(LS(this.userId,t)).next((i=>i?l0(this.serializer,i):null))}getOverlays(e,t){const i=pr();return $.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((o,l)=>{const h=new S_(t,l);s.push(this.St(e,h))})),$.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((l=>s.add(Sn(l.getCollectionPath()))));const o=[];return s.forEach((l=>{const h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(qu(e).Z(ev,h))})),$.waitFor(o)}getOverlaysForCollection(e,t,i){const s=pr(),o=Sn(t),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return qu(e).J(ev,l).next((h=>{for(const d of h){const f=l0(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const o=pr();let l;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qu(e).ee({index:v2,range:h},((d,f,g)=>{const v=l0(this.serializer,f);o.size()<s||v.largestBatchId===l?(o.set(v.getKey(),v),l=v.largestBatchId):g.done()})).next((()=>o))}St(e,t){return qu(e).put((function(s,o,l){const[h,d,f]=LS(o,l.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Um(s.yt,l.mutation)}})(this.serializer,this.userId,t))}}function qu(n){return nn(n,yp)}class d6{bt(e){return nn(e,m_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?jt.fromUint8Array(i):jt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class mo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Tt(e.integerValue));else if("doubleValue"in e){const i=Tt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Eh(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=ns(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(is(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?D2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):_p(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ye(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const s=lc,o=i[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Tt(o)),this.Ot(s,t),this.Ct(i[s],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),me.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}mo.Kt=new mo;const kl=255;function f6(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function BS(n){const e=64-(function(i){let s=0;for(let o=0;o<8;++o){const l=f6(255&i[o]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class m6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),i=BS(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=BS(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(kl),this.sn(255)}_n(){this.an(kl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===kl?(this.sn(kl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===kl?(this.an(kl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class p6{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class g6{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Hu{constructor(){this.cn=new m6,this.ln=new p6(this.cn),this.hn=new g6(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class po{constructor(e,t,i,s){this.Tn=e,this.In=t,this.En=i,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new po(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:dm(this.En),directionalValue:dm(this.dn),orderedDocumentKey:dm(t),documentKey:i.path.toArray()}}Vn(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Gs(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=FS(n.En,e.En),t!==0?t:(t=FS(n.dn,e.dn),t!==0?t:me.comparator(n.In,e.In)))}function FS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function dm(n){return HI()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function qS(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class HS{constructor(e){this.mn=new lt(((t,i)=>St.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Te(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=W0(e);if(t!==void 0&&!this.wn(t))return!1;const i=lo(e);let s=new Set,o=0,l=0;for(;o<i.length&&this.wn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const d=i[o];if(!this.Sn(h,d)||!this.bn(this.fn[l++],d))return!1}++o}for(;o<i.length;++o){const h=i[o];if(l>=this.fn.length||!this.bn(this.fn[l++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new lt(St.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new rm(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new rm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new rm(i.field,i.dir==="asc"?0:1)));return new Dm(Dm.UNKNOWN_ID,this.collectionId,t,Th.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function _R(n){if(Te(n instanceof $e||n instanceof ot,20012),n instanceof $e){if(n instanceof U2){const t=n.value.arrayValue?.values?.map((i=>$e.create(n.field,"==",i)))||[];return ot.create(t,"or")}return n}const e=n.filters.map((t=>_R(t)));return ot.create(e,n.op)}function y6(n){if(n.getFilters().length===0)return[];const e=mv(_R(n));return Te(bR(e),7391),dv(e)||fv(e)?[e]:e.getFilters()}function dv(n){return n instanceof $e}function fv(n){return n instanceof ot&&__(n)}function bR(n){return dv(n)||fv(n)||(function(t){if(t instanceof ot&&rv(t)){for(const i of t.getFilters())if(!dv(i)&&!fv(i))return!1;return!0}return!1})(n)}function mv(n){if(Te(n instanceof $e||n instanceof ot,34018),n instanceof $e)return n;if(n.filters.length===1)return mv(n.filters[0]);const e=n.filters.map((i=>mv(i)));let t=ot.create(e,n.op);return t=Bm(t),bR(t)?t:(Te(t instanceof ot,64498),Te(hc(t),40251),Te(t.filters.length>1,57927),t.filters.reduce(((i,s)=>I_(i,s))))}function I_(n,e){let t;return Te(n instanceof $e||n instanceof ot,38388),Te(e instanceof $e||e instanceof ot,25473),t=n instanceof $e?e instanceof $e?(function(s,o){return ot.create([s,o],"and")})(n,e):GS(n,e):e instanceof $e?GS(e,n):(function(s,o){if(Te(s.filters.length>0&&o.filters.length>0,48005),hc(s)&&hc(o))return O2(s,o.getFilters());const l=rv(s)?s:o,h=rv(s)?o:s,d=l.filters.map((f=>I_(f,h)));return ot.create(d,"or")})(n,e),Bm(t)}function GS(n,e){if(hc(e))return O2(e,n.getFilters());{const t=e.filters.map((i=>I_(n,i)));return ot.create(t,"or")}}function Bm(n){if(Te(n instanceof $e||n instanceof ot,11850),n instanceof $e)return n;const e=n.getFilters();if(e.length===1)return Bm(e[0]);if(M2(n))return n;const t=e.map((s=>Bm(s))),i=[];return t.forEach((s=>{s instanceof $e?i.push(s):s instanceof ot&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:ot.create(i,n.op)}class v6{constructor(){this.Cn=new R_}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(ni.min())}updateCollectionGroup(e,t,i){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class R_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new lt(it.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new lt(it.comparator)).toArray()}}const $S="IndexedDbIndexManager",Hf=new Uint8Array(0);class _6{constructor(e,t){this.databaseId=t,this.vn=new R_,this.Fn=new cs((i=>No(i)),((i,s)=>Xh(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:i,parent:Sn(s)};return KS(e).put(o)}return $.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[r2(t),""],!1,!0);return KS(e).J(s).next((o=>{for(const l of o){if(l.collectionId!==t)break;i.push(mr(l.parent))}return i}))}addFieldIndex(e,t){const i=Gu(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=i.add(s);if(t.indexState){const l=Ml(e);return o.next((h=>{l.put(jS(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const i=Gu(e),s=Ml(e),o=Vl(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Gu(e),i=Vl(e),s=Ml(e);return t.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return $.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const o=new HS(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const i=Vl(e);let s=!0;const o=new Map;return $.forEach(this.Mn(t),(l=>this.xn(e,l).next((h=>{s&&(s=!!h),o.set(l,h)})))).next((()=>{if(s){let l=ze();const h=[];return $.forEach(o,((d,f)=>{ce($S,`Using index ${(function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map((X=>`${X.fieldPath}:${X.kind}`)).join(",")}`})(d)} to execute ${No(t)}`);const g=(function(O,X){const te=W0(X);if(te===void 0)return null;for(const ee of Om(O,te.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null})(f,d),v=(function(O,X){const te=new Map;for(const ee of lo(X))for(const x of Om(O,ee.fieldPath))switch(x.op){case"==":case"in":te.set(ee.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return te.set(ee.fieldPath.canonicalString(),x.value),Array.from(te.values())}return null})(f,d),_=(function(O,X){const te=[];let ee=!0;for(const x of lo(X)){const I=x.kind===0?SS(O,x.fieldPath,O.startAt):xS(O,x.fieldPath,O.startAt);te.push(I.value),ee&&(ee=I.inclusive)}return new uc(te,ee)})(f,d),S=(function(O,X){const te=[];let ee=!0;for(const x of lo(X)){const I=x.kind===0?xS(O,x.fieldPath,O.endAt):SS(O,x.fieldPath,O.endAt);te.push(I.value),ee&&(ee=I.inclusive)}return new uc(te,ee)})(f,d),R=this.On(d,f,_),D=this.On(d,f,S),N=this.Nn(d,f,v),U=this.Bn(d.indexId,g,R,_.inclusive,D,S.inclusive,N);return $.forEach(U,(B=>i.Y(B,t.limit).next((O=>{O.forEach((X=>{const te=me.fromSegments(X.documentKey);l.has(te)||(l=l.add(te),h.push(te))}))}))))})).next((()=>h))}return $.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=y6(ot.create(e.filters,"and")).map((i=>av(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,s,o,l,h){const d=(t!=null?t.length:1)*Math.max(i.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let v=0;v<d;++v){const _=t?this.Ln(t[v/f]):Hf,S=this.kn(e,_,i[v%f],s),R=this.qn(e,_,o[v%f],l),D=h.map((N=>this.kn(e,_,N,!0)));g.push(...this.createRange(S,R,D))}return g}kn(e,t,i,s){const o=new po(e,me.empty(),t,i);return s?o:o.An()}qn(e,t,i,s){const o=new po(e,me.empty(),t,i);return s?o.An():o}xn(e,t){const i=new HS(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let l=null;for(const h of o)i.yn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l}))}getIndexType(e,t){let i=2;const s=this.Mn(t);return $.forEach(s,(o=>this.xn(e,o).next((l=>{l?i!==0&&l.fields.length<(function(d){let f=new lt(St.comparator),g=!1;for(const v of d.filters)for(const _ of v.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?g=!0:f=f.add(_.field));for(const v of d.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(g?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&i===2?1:i))}Qn(e,t){const i=new Hu;for(const s of lo(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const l=i.Pn(s.kind);mo.Kt.Dt(o,l)}return i.un()}Ln(e){const t=new Hu;return mo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Hu;return mo.Kt.Dt(Rh(this.databaseId,t),i.Pn((function(o){const l=lo(o);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let s=[];s.push(new Hu);let o=0;for(const l of lo(e)){const h=i[o++];for(const d of s)if(this.Un(t,l.fieldPath)&&Ch(h))s=this.Kn(s,l,h);else{const f=d.Pn(l.kind);mo.Kt.Dt(h,f)}}return this.Wn(s)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const s=[...e],o=[];for(const l of i.arrayValue.values||[])for(const h of s){const d=new Hu;d.seed(h.un()),mo.Kt.Dt(l,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((i=>i instanceof $e&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Gu(e),s=Ml(e);return(t?i.J(J0,IDBKeyRange.bound(t,t)):i.J()).next((o=>{const l=[];return $.forEach(o,(h=>s.get([h.indexId,this.uid]).next((d=>{l.push((function(g,v){const _=v?new Th(v.sequenceNumber,new ni(Vo(v.readTime),new me(mr(v.documentKey)),v.largestBatchId)):Th.empty(),S=g.fields.map((([R,D])=>new rm(St.fromServerFormat(R),D)));return new Dm(g.indexId,g.collectionGroup,S,_)})(h,d))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Ve(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=Gu(e),o=Ml(e);return this.Gn(e).next((l=>s.J(J0,IDBKeyRange.bound(t,t)).next((h=>$.forEach(h,(d=>o.put(jS(d.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return $.forEach(t,((s,o)=>{const l=i.get(s.collectionGroup);return(l?$.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(i.set(s.collectionGroup,h),$.forEach(h,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?$.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,i,s){return Vl(e).put(s.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,s){return Vl(e).delete(s.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const s=Vl(e);let o=new lt(Gs);return s.ee({index:y2,range:IDBKeyRange.only([i.indexId,this.uid,dm(this.$n(i,t))])},((l,h)=>{o=o.add(new po(i.indexId,t,qS(h.arrayValue),qS(h.directionalValue)))})).next((()=>o))}jn(e,t){let i=new lt(Gs);const s=this.Qn(t,e);if(s==null)return i;const o=W0(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Ch(l))for(const h of l.arrayValue.values||[])i=i.add(new po(t.indexId,e.key,this.Ln(h),s))}else i=i.add(new po(t.indexId,e.key,Hf,s));return i}Jn(e,t,i,s,o){ce($S,"Updating index entries for document '%s'",t.key);const l=[];return(function(d,f,g,v,_){const S=d.getIterator(),R=f.getIterator();let D=Nl(S),N=Nl(R);for(;D||N;){let U=!1,B=!1;if(D&&N){const O=g(D,N);O<0?B=!0:O>0&&(U=!0)}else D!=null?B=!0:U=!0;U?(v(N),N=Nl(R)):B?(_(D),D=Nl(S)):(D=Nl(S),N=Nl(R))}})(s,o,Gs,(h=>{l.push(this.Hn(e,t,i,h))}),(h=>{l.push(this.Yn(e,t,i,h))})),$.waitFor(l)}Gn(e){let t=1;return Ml(e).ee({index:g2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,h)=>Gs(l,h))).filter(((l,h,d)=>!h||Gs(l,d[h-1])!==0));const s=[];s.push(e);for(const l of i){const h=Gs(l,e),d=Gs(l,t);if(h===0)s[0]=e.An();else if(h>0&&d<0)s.push(l),s.push(l.An());else if(d>0)break}s.push(t);const o=[];for(let l=0;l<s.length;l+=2){if(this.Zn(s[l],s[l+1]))return[];const h=s[l].Vn(this.uid,Hf,me.empty()),d=s[l+1].Vn(this.uid,Hf,me.empty());o.push(IDBKeyRange.bound(h,d))}return o}Zn(e,t){return Gs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(QS)}getMinOffset(e,t){return $.mapArray(this.Mn(t),(i=>this.xn(e,i).next((s=>s||ye(44426))))).next(QS)}}function KS(n){return nn(n,xh)}function Vl(n){return nn(n,sh)}function Gu(n){return nn(n,f_)}function Ml(n){return nn(n,rh)}function QS(n){Te(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;u_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ni(e.readTime,e.documentKey,t)}const YS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TR=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function ER(n,e,t){const i=n.store(Li),s=n.store(rc),o=[],l=IDBKeyRange.only(t.batchId);let h=0;const d=i.ee({range:l},((g,v,_)=>(h++,_.delete())));o.push(d.next((()=>{Te(h===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const v=f2(e,g.key.path,t.batchId);o.push(s.delete(v)),f.push(g.key)}return $.waitFor(o).next((()=>f))}function Fm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ye(14731);e=n.noDocument}return JSON.stringify(e).length}bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(TR,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);class Ap{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,t,i,s){Te(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Ap(o,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $s(e).ee({index:go,range:i},((s,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const o=Bl(e),l=$s(e);return l.add({}).next((h=>{Te(typeof h=="number",49019);const d=new E_(h,t,i,s),f=(function(S,R,D){const N=D.baseMutations.map((B=>Um(S.yt,B))),U=D.mutations.map((B=>Um(S.yt,B)));return{userId:R,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:N,mutations:U}})(this.serializer,this.userId,d),g=[];let v=new lt(((_,S)=>Ve(_.canonicalString(),S.canonicalString())));for(const _ of s){const S=f2(this.userId,_.key.path,h);v=v.add(_.key.path.popLast()),g.push(l.put(f)),g.push(o.put(S,X3))}return v.forEach((_=>{g.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[h]=d.keys()})),$.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return $s(e).get(t).next((i=>i?(Te(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),fo(this.serializer,i)):null))}er(e,t){return this.Xn[t]?$.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return $s(e).ee({index:go,range:s},((l,h,d)=>{h.userId===this.userId&&(Te(h.batchId>=i,47524,{tr:i}),o=fo(this.serializer,h)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=_o;return $s(e).ee({index:go,range:t,reverse:!0},((s,o,l)=>{i=o.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,_o],[this.userId,Number.POSITIVE_INFINITY]);return $s(e).J(go,t).next((i=>i.map((s=>fo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=sm(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=[];return Bl(e).ee({range:s},((l,h,d)=>{const[f,g,v]=l,_=mr(g);if(f===this.userId&&t.path.isEqual(_))return $s(e).get(v).next((S=>{if(!S)throw ye(61480,{nr:l,batchId:v});Te(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:v}),o.push(fo(this.serializer,S))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new lt(Ve);const s=[];return t.forEach((o=>{const l=sm(this.userId,o.path),h=IDBKeyRange.lowerBound(l),d=Bl(e).ee({range:h},((f,g,v)=>{const[_,S,R]=f,D=mr(S);_===this.userId&&o.path.isEqual(D)?i=i.add(R):v.done()}));s.push(d)})),$.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,o=sm(this.userId,i),l=IDBKeyRange.lowerBound(o);let h=new lt(Ve);return Bl(e).ee({range:l},((d,f,g)=>{const[v,_,S]=d,R=mr(_);v===this.userId&&i.isPrefixOf(R)?R.length===s&&(h=h.add(S)):g.done()})).next((()=>this.rr(e,h)))}rr(e,t){const i=[],s=[];return t.forEach((o=>{s.push($s(e).get(o).next((l=>{if(l===null)throw ye(35274,{batchId:o});Te(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),i.push(fo(this.serializer,l))})))})),$.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return ER(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),$.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return Bl(e).ee({range:i},((o,l,h)=>{if(o[0]===this.userId){const d=mr(o[1]);s.push(d)}else h.done()})).next((()=>{Te(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return wR(e,this.userId,t)}_r(e){return SR(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:_o,lastStreamToken:""}))}}function wR(n,e,t){const i=sm(e,t.path),s=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return Bl(n).ee({range:o,X:!0},((h,d,f)=>{const[g,v,_]=h;g===e&&v===s&&(l=!0),f.done()})).next((()=>l))}function $s(n){return nn(n,Li)}function Bl(n){return nn(n,rc)}function SR(n){return nn(n,wh)}class Mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mo(0)}static cr(){return new Mo(-1)}}class b6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Mo(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Se.fromTimestamp(new Xe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Pl(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(Te(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let s=0;const o=[];return Pl(e).ee(((l,h)=>{const d=Zu(h);d.sequenceNumber<=t&&i.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>$.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Pl(e).ee(((i,s)=>{const o=Zu(s);t(o)}))}lr(e){return XS(e).get(Vm).next((t=>(Te(t!==null,2888),t)))}hr(e,t){return XS(e).put(Vm,t)}Pr(e,t){return Pl(e).put(yR(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=No(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Pl(e).ee({range:s,index:p2},((l,h,d)=>{const f=Zu(h);Xh(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,i){const s=[],o=Zs(e);return t.forEach((l=>{const h=Sn(l.path);s.push(o.put({targetId:i,path:h})),s.push(this.referenceDelegate.addReference(e,i,l))})),$.waitFor(s)}removeMatchingKeys(e,t,i){const s=Zs(e);return $.forEach(t,(o=>{const l=Sn(o.path);return $.waitFor([s.delete([i,l]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,t){const i=Zs(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=Zs(e);let o=ze();return s.ee({range:i,X:!0},((l,h,d)=>{const f=mr(l[1]),g=new me(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const i=Sn(t.path),s=IDBKeyRange.bound([i],[r2(i)],!1,!0);let o=0;return Zs(e).ee({index:d_,X:!0,range:s},(([l,h],d,f)=>{l!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Pl(e).get(t).next((i=>i?Zu(i):null))}}function Pl(n){return nn(n,sc)}function XS(n){return nn(n,bo)}function Zs(n){return nn(n,ac)}const WS="LruGarbageCollector",xR=1048576;function ZS([n,e],[t,i]){const s=Ve(n,t);return s===0?Ve(e,i):s}class T6{constructor(e){this.Ir=e,this.buffer=new lt(ZS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ZS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(WS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wa(t)?ce(WS,"Ignoring IndexedDB error during garbage collection: ",t):await Ea(t)}await this.Vr(3e5)}))}}class E6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(zn.ce);const i=new T6(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(YS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,o,l,h,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(i=v,h=Date.now(),this.removeTargets(e,i,t)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Ll()<=Ge.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function IR(n,e){return new E6(n,e)}class w6{constructor(e,t){this.db=e,this.garbageCollector=IR(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,s)=>t(s)))}addReference(e,t,i){return Gf(e,i)}removeReference(e,t,i){return Gf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Gf(e,t)}br(e,t){return(function(s,o){let l=!1;return SR(s).te((h=>wR(s,h,o).next((d=>(d&&(l=!0),$.resolve(!d)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((l,h)=>{if(h<=t){const d=this.br(e,l).next((f=>{if(!f)return o++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Se.min()),Zs(e).delete((function(v){return[0,Sn(v.path)]})(l)))))}));s.push(d)}})).next((()=>$.waitFor(s))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Gf(e,t)}Sr(e,t){const i=Zs(e);let s,o=zn.ce;return i.ee({index:d_},(([l,h],{path:d,sequenceNumber:f})=>{l===0?(o!==zn.ce&&t(new me(mr(s)),o),o=f,s=d):o=zn.ce})).next((()=>{o!==zn.ce&&t(new me(mr(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gf(n,e){return Zs(n).put((function(i,s){return{targetId:0,path:Sn(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class RR{constructor(){this.changes=new cs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?$.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class S6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ro(e).put(i)}removeEntry(e,t,i){return ro(e).delete((function(o,l){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],zm(l),h[h.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Dt.newInvalidDocument(t);return ro(e).ee({index:am,range:IDBKeyRange.only($u(t))},((s,o)=>{i=this.Cr(t,o)})).next((()=>i))}vr(e,t){let i={size:0,document:Dt.newInvalidDocument(t)};return ro(e).ee({index:am,range:IDBKeyRange.only($u(t))},((s,o)=>{i={document:this.Cr(t,o),size:Fm(o)}})).next((()=>i))}getEntries(e,t){let i=ei();return this.Fr(e,t,((s,o)=>{const l=this.Cr(s,o);i=i.insert(s,l)})).next((()=>i))}Mr(e,t){let i=ei(),s=new pt(me.comparator);return this.Fr(e,t,((o,l)=>{const h=this.Cr(o,l);i=i.insert(o,h),s=s.insert(o,Fm(l))})).next((()=>({documents:i,Or:s})))}Fr(e,t,i){if(t.isEmpty())return $.resolve();let s=new lt(tx);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound($u(s.first()),$u(s.last())),l=s.getIterator();let h=l.getNext();return ro(e).ee({index:am,range:o},((d,f,g)=>{const v=me.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;h&&tx(h,v)<0;)i(h,null),h=l.getNext();h&&h.isEqual(v)&&(i(h,f),h=l.hasNext()?l.getNext():null),h?g.j($u(h)):g.done()})).next((()=>{for(;h;)i(h,null),h=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,o){const l=t.path,h=[l.popLast().toArray(),l.lastSegment(),zm(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ro(e).J(IDBKeyRange.bound(h,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=ei();for(const v of f){const _=this.Cr(me.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);_.isFoundDocument()&&(Wh(t,_)||s.has(_.key))&&(g=g.insert(_.key,_))}return g}))}getAllFromCollectionGroup(e,t,i,s){let o=ei();const l=ex(t,i),h=ex(t,ni.max());return ro(e).ee({index:m2,range:IDBKeyRange.bound(l,h,!0)},((d,f,g)=>{const v=this.Cr(me.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new x6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return JS(e).get(Z0).next((t=>(Te(!!t,20021),t)))}Dr(e,t){return JS(e).put(Z0,t)}Cr(e,t){if(t){const i=u6(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Se.min())))return i}return Dt.newInvalidDocument(e)}}function CR(n){return new S6(n)}class x6 extends RR{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new cs((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new lt(((o,l)=>Ve(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const h=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,h.readTime)),l.isValidDocument()){const d=OS(this.Nr.serializer,l);s=s.add(o.path.popLast());const f=Fm(d);i+=f-h.size,t.push(this.Nr.addEntry(e,o,d))}else if(i-=h.size,this.trackRemovals){const d=OS(this.Nr.serializer,l.convertToNoDocument(Se.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,i)),$.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:s})=>(s.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:i.get(o).readTime})})),i)))}}function JS(n){return nn(n,Sh)}function ro(n){return nn(n,km)}function $u(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ex(n,e){const t=e.documentKey.path.toArray();return[n,zm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tx(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(s=Ve(t[o],i[o]),s)return s;return s=Ve(t.length,i.length),s||(s=Ve(t[t.length-2],i[i.length-2]),s||Ve(t[t.length-1],i[i.length-1]))}class A6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class DR{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&ch(i.mutation,s,Bn.empty(),Xe.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const s=pr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((o=>{let l=Xu();return o.forEach(((h,d)=>{l=l.insert(h,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=pr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const s=[];return i.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,i,s){let o=ei();const l=lh(),h=(function(){return lh()})();return t.forEach(((d,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof us)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),ch(g.mutation,f,g.mutation.getFieldMask(),Xe.now())):l.set(f.key,Bn.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>l.set(f,g))),t.forEach(((f,g)=>h.set(f,new A6(g,l.get(f)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=lh();let s=new pt(((l,h)=>l-h)),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=i.get(d)||Bn.empty();g=h.applyToLocalView(f,g),i.set(d,g);const v=(s.get(h.batchId)||ze()).add(d);s=s.insert(h.batchId,v)}))})).next((()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),f=d.key,g=d.value,v=K2();g.forEach((_=>{if(!o.has(_)){const S=J2(t.get(_),i.get(_));S!==null&&v.set(_,S),o=o.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return $.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(l){return me.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):B2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):$.resolve(pr());let h=ic,d=o;return l.next((f=>$.forEach(f,((g,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(g)?$.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{d=d.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,ze()))).next((g=>({batchId:h,changes:$2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((i=>{let s=Xu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const o=t.collectionGroup;let l=Xu();return this.indexManager.getCollectionParents(e,o).next((h=>$.forEach(h,(d=>{const f=(function(v,_){return new Ic(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((g=>{g.forEach(((v,_)=>{l=l.insert(v,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s)))).next((l=>{o.forEach(((d,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,Dt.newInvalidDocument(g)))}));let h=Xu();return l.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&ch(g.mutation,f,Bn.empty(),Xe.now()),Wh(t,f)&&(h=h.insert(d,f))})),h}))}}class I6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:vR(s.bundledQuery),readTime:Nn(s.readTime)}})(t)),$.resolve()}}class R6{constructor(){this.overlays=new pt(me.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const i=pr();return $.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,o)=>{this.St(e,t,o)})),$.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),$.resolve()}getOverlaysForCollection(e,t,i){const s=pr(),o=t.length+1,l=new me(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new pt(((f,g)=>f-g));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=pr(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const h=pr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>h.set(f,g))),!(h.size()>=s)););return $.resolve(h)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new S_(t,i));let o=this.qr.get(t);o===void 0&&(o=ze(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}class C6{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}class C_{constructor(){this.Qr=new lt(on.$r),this.Ur=new lt(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new on(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new on(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new me(new it([])),i=new on(t,e),s=new on(t,e+1),o=[];return this.Ur.forEachInRange([i,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new me(new it([])),i=new on(t,e),s=new on(t,e+1);let o=ze();return this.Ur.forEachInRange([i,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new on(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return me.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||me.comparator(e.key,t.key)}}class D6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new lt(on.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new E_(o,t,i,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new on(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return $.resolve(l)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),o=s<0?0:s;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?_o:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new on(t,0),s=new on(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(l=>{const h=this.Xr(l.Yr);o.push(h)})),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new lt(Ve);return t.forEach((s=>{const o=new on(s,0),l=new on(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(h=>{i=i.add(h.Yr)}))})),$.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let o=i;me.isDocumentKey(o)||(o=o.child(""));const l=new on(new me(o),0);let h=new lt(Ve);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(h=h.add(d.Yr)),!0)}),l),$.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Te(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return $.forEach(t.mutations,(s=>{const o=new on(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new on(t,0),s=this.Zr.firstAfterOrEqual(i);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class N6{constructor(e){this.ri=e,this.docs=(function(){return new pt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return $.resolve(i?i.document.mutableCopy():Dt.newInvalidDocument(t))}getEntries(e,t){let i=ei();return t.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Dt.newInvalidDocument(s))})),$.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=ei();const l=t.path,h=new me(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||u_(l2(g),i)<=0||(s.has(g.key)||Wh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,i,s){ye(9500)}ii(e,t){return $.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new k6(this)}getSize(e){return $.resolve(this.size)}}class k6 extends RR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class V6{constructor(e){this.persistence=e,this.si=new cs((t=>No(t)),Xh),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new C_,this.targetCount=0,this.ai=Mo.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,i){let s=0;const o=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),$.waitFor(o).next((()=>s))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return $.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),$.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return $.resolve(i)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}}class D_{constructor(e,t){this.ui={},this.overlays={},this.ci=new zn(0),this.li=!1,this.li=!0,this.hi=new C6,this.referenceDelegate=e(this),this.Pi=new V6(this),this.indexManager=new v6,this.remoteDocumentCache=(function(s){return new N6(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new gR(t),this.Ii=new I6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new D6(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const s=new M6(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return $.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class M6 extends u2{constructor(e){super(),this.currentSequenceNumber=e}}class Ip{constructor(e){this.persistence=e,this.Ri=new C_,this.Vi=null}static mi(e){return new Ip(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),$.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(i=>{const s=me.fromPath(i);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class qm{constructor(e,t){this.persistence=e,this.pi=new cs((i=>Sn(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=IR(this,t)}static mi(e,t){return new qm(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return $.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?$.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((h=>{h||(i++,o.removeEntry(l,Se.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lm(e.data.value)),t}br(e,t,i){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return $.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class P6{constructor(e){this.serializer=e}k(e,t,i,s){const o=new fp("createOrUpgrade",t);i<1&&s>=1&&((function(d){d.createObjectStore(Yh)})(e),(function(d){d.createObjectStore(wh,{keyPath:Y3}),d.createObjectStore(Li,{keyPath:dS,autoIncrement:!0}).createIndex(go,fS,{unique:!0}),d.createObjectStore(rc)})(e),nx(e),(function(d){d.createObjectStore(co)})(e));let l=$.resolve();return i<3&&s>=3&&(i!==0&&((function(d){d.deleteObjectStore(ac),d.deleteObjectStore(sc),d.deleteObjectStore(bo)})(e),nx(e)),l=l.next((()=>(function(d){const f=d.store(bo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return f.put(Vm,g)})(o)))),i<4&&s>=4&&(i!==0&&(l=l.next((()=>(function(d,f){return f.store(Li).J().next((v=>{d.deleteObjectStore(Li),d.createObjectStore(Li,{keyPath:dS,autoIncrement:!0}).createIndex(go,fS,{unique:!0});const _=f.store(Li),S=v.map((R=>_.put(R)));return $.waitFor(S)}))})(e,o)))),l=l.next((()=>{(function(d){d.createObjectStore(oc,{keyPath:r5})})(e)}))),i<5&&s>=5&&(l=l.next((()=>this.yi(o)))),i<6&&s>=6&&(l=l.next((()=>((function(d){d.createObjectStore(Sh)})(e),this.wi(o))))),i<7&&s>=7&&(l=l.next((()=>this.Si(o)))),i<8&&s>=8&&(l=l.next((()=>this.bi(e,o)))),i<9&&s>=9&&(l=l.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(l=l.next((()=>this.Di(o)))),i<11&&s>=11&&(l=l.next((()=>{(function(d){d.createObjectStore(pp,{keyPath:s5})})(e),(function(d){d.createObjectStore(gp,{keyPath:a5})})(e)}))),i<12&&s>=12&&(l=l.next((()=>{(function(d){const f=d.createObjectStore(yp,{keyPath:f5});f.createIndex(ev,m5,{unique:!1}),f.createIndex(v2,p5,{unique:!1})})(e)}))),i<13&&s>=13&&(l=l.next((()=>(function(d){const f=d.createObjectStore(km,{keyPath:W3});f.createIndex(am,Z3),f.createIndex(m2,J3)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(co)))),i<14&&s>=14&&(l=l.next((()=>this.Fi(e,o)))),i<15&&s>=15&&(l=l.next((()=>(function(d){d.createObjectStore(f_,{keyPath:o5,autoIncrement:!0}).createIndex(J0,l5,{unique:!1}),d.createObjectStore(rh,{keyPath:c5}).createIndex(g2,u5,{unique:!1}),d.createObjectStore(sh,{keyPath:h5}).createIndex(y2,d5,{unique:!1})})(e)))),i<16&&s>=16&&(l=l.next((()=>{t.objectStore(rh).clear()})).next((()=>{t.objectStore(sh).clear()}))),i<17&&s>=17&&(l=l.next((()=>{(function(d){d.createObjectStore(m_,{keyPath:g5})})(e)}))),i<18&&s>=18&&HI()&&(l=l.next((()=>{t.objectStore(rh).clear()})).next((()=>{t.objectStore(sh).clear()}))),l}wi(e){let t=0;return e.store(co).ee(((i,s)=>{t+=Fm(s)})).next((()=>{const i={byteSize:t};return e.store(Sh).put(Z0,i)}))}yi(e){const t=e.store(wh),i=e.store(Li);return t.J().next((s=>$.forEach(s,(o=>{const l=IDBKeyRange.bound([o.userId,_o],[o.userId,o.lastAcknowledgedBatchId]);return i.J(go,l).next((h=>$.forEach(h,(d=>{Te(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=fo(this.serializer,d);return ER(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(ac),i=e.store(co);return e.store(bo).get(Vm).next((s=>{const o=[];return i.ee(((l,h)=>{const d=new it(l),f=(function(v){return[0,Sn(v)]})(d);o.push(t.get(f).next((g=>g?$.resolve():(v=>t.put({targetId:0,path:Sn(v),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>$.waitFor(o)))}))}bi(e,t){e.createObjectStore(xh,{keyPath:i5});const i=t.store(xh),s=new R_,o=l=>{if(s.add(l)){const h=l.lastSegment(),d=l.popLast();return i.put({collectionId:h,parent:Sn(d)})}};return t.store(co).ee({X:!0},((l,h)=>{const d=new it(l);return o(d.popLast())})).next((()=>t.store(rc).ee({X:!0},(([l,h,d],f)=>{const g=mr(h);return o(g.popLast())}))))}Di(e){const t=e.store(sc);return t.ee(((i,s)=>{const o=Zu(s),l=yR(this.serializer,o);return t.put(l)}))}Ci(e,t){const i=t.store(co),s=[];return i.ee(((o,l)=>{const h=t.store(km),d=(function(v){return v.document?new me(it.fromString(v.document.name).popFirst(5)):v.noDocument?me.fromSegments(v.noDocument.path):v.unknownDocument?me.fromSegments(v.unknownDocument.path):ye(36783)})(l).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(h.put(f))})).next((()=>$.waitFor(s)))}Fi(e,t){const i=t.store(Li),s=CR(this.serializer),o=new D_(Ip.mi,this.serializer.yt);return i.J().next((l=>{const h=new Map;return l.forEach((d=>{let f=h.get(d.userId)??ze();fo(this.serializer,d).keys().forEach((g=>f=f.add(g))),h.set(d.userId,f)})),$.forEach(h,((d,f)=>{const g=new _n(f),v=xp.wt(this.serializer,g),_=o.getIndexManager(g),S=Ap.wt(g,this.serializer,_,o.referenceDelegate);return new DR(s,S,v,_).recalculateAndSaveOverlaysForDocumentKeys(new tv(t,zn.ce),d).next()}))}))}}function nx(n){n.createObjectStore(ac,{keyPath:t5}).createIndex(d_,n5,{unique:!0}),n.createObjectStore(sc,{keyPath:"targetId"}).createIndex(p2,e5,{unique:!0}),n.createObjectStore(bo)}const Ks="IndexedDbPersistence",c0=18e5,u0=5e3,h0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",O6="main";class N_{constructor(e,t,i,s,o,l,h,d,f,g,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=o,this.window=l,this.document=h,this.xi=f,this.Oi=g,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!N_.v())throw new he(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new w6(this,s),this.$i=t+O6,this.serializer=new gR(d),this.Ui=new ca(this.$i,this.Ni,new P6(this.serializer)),this.hi=new d6,this.Pi=new b6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CR(this.serializer),this.Ii=new h6,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Ot(Ks,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(ie.FAILED_PRECONDITION,h0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new zn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>$f(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(wa(e))return ce(Ks,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(Ks,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Ku(e).get(Dl).next((t=>$.resolve(this.es(t))))}ts(e){return $f(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,c0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=nn(t,oc);return i.J().next((s=>{const o=this.ss(s,c0),l=s.filter((h=>o.indexOf(h)===-1));return $.forEach(l,(h=>i.delete(h.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?$.resolve(!0):Ku(e).get(Dl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,u0)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new he(ie.FAILED_PRECONDITION,h0);return!1}}return!(!this.networkEnabled||!this.inForeground)||$f(e).J().next((i=>this.ss(i,u0).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||l&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(Ks,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Yh,oc],(e=>{const t=new tv(e,zn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>$f(e).J().next((t=>this.ss(t,c0).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Ap.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return xp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce(Ks,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?_5:d===17?E2:d===16?v5:d===15?p_:d===14?T2:d===13?b2:d===12?y5:d===11?_2:void ye(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,s,o,(h=>(l=new tv(h,this.ci?this.ci.next():zn.ce),t==="readwrite-primary"?this.Hi(l).next((d=>!!d||this.Yi(l))).next((d=>{if(!d)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new he(ie.FAILED_PRECONDITION,c2);return i(l)})).next((d=>this.Xi(l).next((()=>d)))):this.Is(l).next((()=>i(l)))))).then((h=>(l.raiseOnCommittedEvent(),h)))}Is(e){return Ku(e).get(Dl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,u0)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(ie.FAILED_PRECONDITION,h0)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ku(e).put(Dl,t)}static v(){return ca.v()}Zi(e){const t=Ku(e);return t.get(Dl).next((i=>this.es(i)?(ce(Ks,"Releasing primary lease."),t.delete(Dl)):$.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Ot(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;qI()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ce(Ks,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ot(Ks,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ku(n){return nn(n,Yh)}function $f(n){return nn(n,oc)}function NR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class k_{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=ze(),s=ze();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new k_(e,t.fromCache,i,s)}}class L6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return qI()?8:h2(tn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new L6;return this.Ss(e,t,l).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>o.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Ll()<=Ge.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Ll()<=Ge.DEBUG&&ce("QueryEngine","Query:",jl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Ll()<=Ge.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):$.resolve())}ys(e,t){if(AS(t))return $.resolve(null);let i=ti(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Lm(t,null,"F"),i=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=ze(...o);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.Ds(t,h);return this.Cs(t,f,l,d.readTime)?this.ys(e,Lm(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,i,s){return AS(t)||s.isEqual(Se.min())?$.resolve(null):this.ps.getDocuments(e,i).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,i,s)?$.resolve(null):(Ll()<=Ge.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jl(t)),this.vs(e,l,t,o2(s,ic)).next((h=>h)))}))}Ds(e,t){let i=new lt(H2(e));return t.forEach(((s,o)=>{Wh(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,i){return Ll()<=Ge.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",jl(t)),this.ps.getDocumentsMatchingQuery(e,t,ni.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}const V_="LocalStore",j6=3e8;class U6{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new pt(Ve),this.xs=new cs((o=>No(o)),Xh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function VR(n,e,t,i){return new U6(n,e,t,i)}async function MR(n,e){const t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],h=[];let d=ze();for(const f of s){l.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){h.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(i,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:h})))}))}))}function z6(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,d,f,g){const v=f.batch,_=v.keys();let S=$.resolve();return _.forEach((R=>{S=S.next((()=>g.getEntry(d,R))).next((D=>{const N=f.docVersions.get(R);Te(N!==null,48541),D.version.compareTo(N)<0&&(v.applyToRemoteDocument(D,f),D.isValidDocument()&&(D.setReadTime(f.commitVersion),g.addEntry(D)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(d,v)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let d=ze();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(d=d.add(h.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function PR(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function B6(n,e){const t=_e(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((g,v)=>{const _=s.get(v);if(!_)return;h.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,v))));let S=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),s=s.insert(v,S),(function(D,N,U){return D.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=j6?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(_,S,g)&&h.push(t.Pi.updateTargetData(o,S))}));let d=ei(),f=ze();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),h.push(F6(o,l,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!i.isEqual(Se.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));h.push(g)}return $.waitFor(h).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function F6(n,e,t){let i=ze(),s=ze();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=ei();return t.forEach(((h,d)=>{const f=o.get(h);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Se.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ce(V_,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function q6(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=_o),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Hm(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((o=>o?(s=o,$.resolve(s)):t.Pi.allocateTargetId(i).next((l=>(s=new Yr(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function pc(n,e,t){const i=_e(n),s=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!wa(l))throw l;ce(V_,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function pv(n,e,t){const i=_e(n);let s=Se.min(),o=ze();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,g){const v=_e(d),_=v.xs.get(g);return _!==void 0?$.resolve(v.Ms.get(_)):v.Pi.getTargetData(f,g)})(i,l,ti(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next((d=>{o=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?s:Se.min(),t?o:ze()))).next((h=>(jR(i,q2(e),h),{documents:h,Qs:o})))))}function OR(n,e){const t=_e(n),i=_e(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,e).next((l=>l?l.target:null))))}function LR(n,e){const t=_e(n),i=t.Os.get(e)||Se.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,o2(i,ic),Number.MAX_SAFE_INTEGER))).then((s=>(jR(t,e,s),s)))}function jR(n,e,t){let i=n.Os.get(e)||Se.min();t.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}const UR="firestore_clients";function ix(n,e){return`${UR}_${n}_${e}`}const zR="firestore_mutations";function rx(n,e,t){let i=`${zR}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const BR="firestore_targets";function d0(n,e){return`${BR}_${n}_${e}`}const hr="SharedClientState";class Gm{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Ws(e,t,i){const s=JSON.parse(i);let o,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(o=new he(s.error.code,s.error.message))),l?new Gm(e,t,s.state,o):(Ot(hr,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new he(i.error.code,i.error.message))),o?new uh(e,i.state,s):(Ot(hr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $m{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=b_();for(let l=0;s&&l<i.activeTargetIds.length;++l)s=d2(i.activeTargetIds[l]),o=o.add(i.activeTargetIds[l]);return s?new $m(e,o):(Ot(hr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class M_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new M_(t.clientId,t.onlineState):(Ot(hr,`Failed to parse online state: ${e}`),null)}}class gv{constructor(){this.activeTargetIds=b_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f0{constructor(e,t,i,s,o){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new pt(Ve),this.started=!1,this.Xs=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=ix(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new gv),this.ro=new RegExp(`^${UR}_${l}_([^_]*)$`),this.io=new RegExp(`^${zR}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${BR}_${l}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(ix(this.persistenceKey,i));if(s){const o=$m.Ws(i,s);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(d0(this.persistenceKey,e));if(s){const o=uh.Ws(e,s);o&&(i=o.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(d0(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(hr,"READ",e,t),t}setItem(e,t){ce(hr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(hr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ce(hr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(o){let l=zn.ce;if(o!=null)try{const h=JSON.parse(o);Te(typeof h=="number",30636,{So:o}),l=h}catch(h){Ot(hr,"Failed to read sequence number from WebStorage",h)}return l})(t.newValue);i!==zn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const s=new Gm(this.currentUser,e,t,i),o=rx(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Gs())}Po(e){const t=rx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const s=d0(this.persistenceKey,e),o=new uh(e,t,i);this.setItem(s,o.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return $m.Ws(i,t)}fo(e,t){const i=this.io.exec(e),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Gm.Ws(new _n(o),s,t)}yo(e,t){const i=this.so.exec(e),s=Number(i[1]);return uh.Ws(s,t)}uo(e){return M_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ce(hr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),o=this.lo(i),l=[],h=[];return o.forEach((d=>{s.has(d)||l.push(d)})),s.forEach((d=>{o.has(d)||h.push(d)})),this.syncEngine.Fo(l,h).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=b_();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class FR{constructor(){this.Mo=new gv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class H6{Oo(e){}shutdown(){}}const sx="ConnectivityMonitor";class ax{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(sx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(sx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Kf=null;function yv(){return Kf===null?Kf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kf++,"0x"+Kf.toString(16)}const m0="RestConnection",G6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Mm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,o){const l=yv(),h=this.zo(e,t.toUriEncodedString());ce(m0,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(h),g=Sc(f);return this.Jo(e,h,d,i,g).then((v=>(ce(m0,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw bh(m0,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",i),v}))}Ho(e,t,i,s,o,l){return this.Go(e,t,i,s,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ac})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const i=G6[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class K6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const vn="WebChannelConnection";class Q6 extends $6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,o){const l=yv();return new Promise(((h,d)=>{const f=new ZI;f.setWithCredentials(!0),f.listenOnce(JI.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case im.NO_ERROR:const v=f.getResponseJson();ce(vn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case im.TIMEOUT:ce(vn,`RPC '${e}' ${l} timed out`),d(new he(ie.DEADLINE_EXCEEDED,"Request time out"));break;case im.HTTP_ERROR:const _=f.getStatus();if(ce(vn,`RPC '${e}' ${l} failed with status:`,_,"response text:",f.getResponseText()),_>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const D=(function(U){const B=U.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(B)>=0?B:ie.UNKNOWN})(R.status);d(new he(D,R.message))}else d(new he(ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new he(ie.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ce(vn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);ce(vn,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",g,i,15)}))}T_(e,t,i){const s=yv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=n2(),h=t2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=o.join("");ce(vn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=l.createWebChannel(g,d);this.I_(v);let _=!1,S=!1;const R=new K6({Yo:N=>{S?ce(vn,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(_||(ce(vn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),ce(vn,`RPC '${e}' stream ${s} sending:`,N),v.send(N))},Zo:()=>v.close()}),D=(N,U,B)=>{N.listen(U,(O=>{try{B(O)}catch(X){setTimeout((()=>{throw X}),0)}}))};return D(v,Yu.EventType.OPEN,(()=>{S||(ce(vn,`RPC '${e}' stream ${s} transport opened.`),R.o_())})),D(v,Yu.EventType.CLOSE,(()=>{S||(S=!0,ce(vn,`RPC '${e}' stream ${s} transport closed`),R.a_(),this.E_(v))})),D(v,Yu.EventType.ERROR,(N=>{S||(S=!0,bh(vn,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),R.a_(new he(ie.UNAVAILABLE,"The operation could not be completed")))})),D(v,Yu.EventType.MESSAGE,(N=>{if(!S){const U=N.data[0];Te(!!U,16349);const B=U,O=B?.error||B[0]?.error;if(O){ce(vn,`RPC '${e}' stream ${s} received error:`,O);const X=O.status;let te=(function(I){const V=Qt[I];if(V!==void 0)return nR(V)})(X),ee=O.message;te===void 0&&(te=ie.INTERNAL,ee="Unknown error status: "+X+" with message "+O.message),S=!0,R.a_(new he(te,ee)),v.close()}else ce(vn,`RPC '${e}' stream ${s} received:`,U),R.u_(U)}})),D(h,e2.STAT_EVENT,(N=>{N.stat===Y0.PROXY?ce(vn,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Y0.NOPROXY&&ce(vn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function qR(){return typeof window<"u"?window:null}function fm(){return typeof document<"u"?document:null}function Rp(n){return new e6(n,!0)}class HR{constructor(e,t,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ox="PersistentStream";class GR{constructor(e,t,i,s,o,l,h,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HR(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ot(t.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new he(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(ox,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(ox,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Y6 extends GR{constructor(e,t,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=i6(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Se.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Se.min():l.readTime?Nn(l.readTime):Se.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=uv(this.serializer),t.addTarget=(function(o,l){let h;const d=l.target;if(h=Pm(d)?{documents:uR(o,d)}:{query:hR(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=sR(o,l.resumeToken);const f=lv(o,l.expectedCount);f!==null&&(h.expectedCount=f)}else if(l.snapshotVersion.compareTo(Se.min())>0){h.readTime=mc(o,l.snapshotVersion.toTimestamp());const f=lv(o,l.expectedCount);f!==null&&(h.expectedCount=f)}return h})(this.serializer,e);const i=s6(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=uv(this.serializer),t.removeTarget=e,this.q_(t)}}class X6 extends GR{constructor(e,t,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=r6(e.writeResults,e.commitTime),i=Nn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=uv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Um(this.serializer,i)))};this.q_(t)}}class W6{}class Z6 extends W6{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new he(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,cv(t,i),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(ie.UNKNOWN,o.toString())}))}Ho(e,t,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,cv(t,i),s,l,h,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ie.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class J6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ot(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Po="RemoteStore";class e9{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{Uo(this)&&(ce(Po,"Restarting streams for network reachability change."),await(async function(d){const f=_e(d);f.Ea.add(4),await ed(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Cp(f)})(this))}))})),this.Ra=new J6(i,s)}}async function Cp(n){if(Uo(n))for(const e of n.da)await e(!0)}async function ed(n){for(const e of n.da)await e(!1)}function Dp(n,e){const t=_e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),L_(t)?O_(t):Dc(t).O_()&&P_(t,e))}function gc(n,e){const t=_e(n),i=Dc(t);t.Ia.delete(e),i.O_()&&$R(t,e),t.Ia.size===0&&(i.O_()?i.L_():Uo(t)&&t.Ra.set("Unknown"))}function P_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Dc(n).Y_(e)}function $R(n,e){n.Va.Ue(e),Dc(n).Z_(e)}function O_(n){n.Va=new X5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Dc(n).start(),n.Ra.ua()}function L_(n){return Uo(n)&&!Dc(n).x_()&&n.Ia.size>0}function Uo(n){return _e(n).Ea.size===0}function KR(n){n.Va=void 0}async function t9(n){n.Ra.set("Online")}async function n9(n){n.Ia.forEach(((e,t)=>{P_(n,e)}))}async function i9(n,e){KR(n),L_(n)?(n.Ra.ha(e),O_(n)):n.Ra.set("Unknown")}async function r9(n,e,t){if(n.Ra.set("Online"),e instanceof rR&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(i){ce(Po,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Km(n,i)}else if(e instanceof hm?n.Va.Ze(e):e instanceof iR?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const i=await PR(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,l))}})),h.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(jt.EMPTY_BYTE_STRING,g.snapshotVersion)),$R(o,d);const v=new Yr(g.target,d,f,g.sequenceNumber);P_(o,v)})),o.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){ce(Po,"Failed to raise snapshot:",i),await Km(n,i)}}async function Km(n,e,t){if(!wa(e))throw e;n.Ea.add(1),await ed(n),n.Ra.set("Offline"),t||(t=()=>PR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(Po,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Cp(n)}))}function QR(n,e){return e().catch((t=>Km(n,t,e)))}async function Cc(n){const e=_e(n),t=ma(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_o;for(;s9(e);)try{const s=await q6(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,a9(e,s)}catch(s){await Km(e,s)}YR(e)&&XR(e)}function s9(n){return Uo(n)&&n.Ta.length<10}function a9(n,e){n.Ta.push(e);const t=ma(n);t.O_()&&t.X_&&t.ea(e.mutations)}function YR(n){return Uo(n)&&!ma(n).x_()&&n.Ta.length>0}function XR(n){ma(n).start()}async function o9(n){ma(n).ra()}async function l9(n){const e=ma(n);for(const t of n.Ta)e.ea(t.mutations)}async function c9(n,e,t){const i=n.Ta.shift(),s=w_.from(i,e,t);await QR(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Cc(n)}async function u9(n,e){e&&ma(n).X_&&await(async function(i,s){if((function(l){return K5(l)&&l!==ie.ABORTED})(s.code)){const o=i.Ta.shift();ma(i).B_(),await QR(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Cc(i)}})(n,e),YR(n)&&XR(n)}async function lx(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),ce(Po,"RemoteStore received new credentials");const i=Uo(t);t.Ea.add(3),await ed(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cp(t)}async function vv(n,e){const t=_e(n);e?(t.Ea.delete(2),await Cp(t)):e||(t.Ea.add(2),await ed(t),t.Ra.set("Unknown"))}function Dc(n){return n.ma||(n.ma=(function(t,i,s){const o=_e(t);return o.sa(),new Y6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:t9.bind(null,n),t_:n9.bind(null,n),r_:i9.bind(null,n),H_:r9.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),L_(n)?O_(n):n.Ra.set("Unknown")):(await n.ma.stop(),KR(n))}))),n.ma}function ma(n){return n.fa||(n.fa=(function(t,i,s){const o=_e(t);return o.sa(),new X6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:o9.bind(null,n),r_:u9.bind(null,n),ta:l9.bind(null,n),na:c9.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Cc(n)):(await n.fa.stop(),n.Ta.length>0&&(ce(Po,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class j_{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){const l=Date.now()+i,h=new j_(e,t,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U_(n,e){if(Ot("AsyncQueue",`${e}: ${n}`),wa(n))return new he(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||me.comparator(t.key,i.key):(t,i)=>me.comparator(t.key,i.key),this.keyedMap=Xu(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class cx{constructor(){this.ga=new pt(me.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class yc{constructor(e,t,i,s,o,l,h,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,s,o){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new yc(e,t,Yl.emptySet(t),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class h9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class d9{constructor(){this.queries=ux(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=_e(t),o=s.queries;s.queries=ux(),o.forEach(((l,h)=>{for(const d of h.Sa)d.onError(i)}))})(this,new he(ie.ABORTED,"Firestore shutting down"))}}function ux(){return new cs((n=>F2(n)),Tp)}async function WR(n,e){const t=_e(n);let i=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new h9,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const h=U_(l,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&z_(t)}async function ZR(n,e){const t=_e(n),i=e.query;let s=3;const o=t.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function f9(n,e){const t=_e(n);let i=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(i=!0);l.wa=s}}i&&z_(t)}function m9(n,e,t){const i=_e(n),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);i.queries.delete(e)}function z_(n){n.Ca.forEach((e=>{e.next()}))}var _v,hx;(hx=_v||(_v={})).Ma="default",hx.Cache="cache";class JR{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new yc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_v.Cache}}class eC{constructor(e){this.key=e}}class tC{constructor(e){this.key=e}}class p9{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=H2(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new cx,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const _=s.get(g),S=Wh(this.query,v)?v:null,R=!!_&&this.mutatedKeys.has(_.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let N=!1;_&&S?_.data.isEqual(S.data)?R!==D&&(i.track({type:3,doc:S}),N=!0):this.su(_,S)||(i.track({type:2,doc:S}),N=!0,(d&&this.eu(S,d)>0||f&&this.eu(S,f)<0)&&(h=!0)):!_&&S?(i.track({type:0,doc:S}),N=!0):_&&!S&&(i.track({type:1,doc:_}),N=!0,(d||f)&&(h=!0)),N&&(S?(l=l.add(S),o=D?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:l,iu:i,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(S,R){const D=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:N})}};return D(S)-D(R)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(i),s=s??!1;const h=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new yc(this.query,e.tu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new tC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new eC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Nc="SyncEngine";class g9{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class y9{constructor(e){this.key=e,this.hu=!1}}class v9{constructor(e,t,i,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new cs((h=>F2(h)),Tp),this.Iu=new Map,this.Eu=new Set,this.du=new pt(me.comparator),this.Au=new Map,this.Ru=new C_,this.Vu={},this.mu=new Map,this.fu=Mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _9(n,e,t=!0){const i=Np(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await nC(i,e,t,!0),s}async function b9(n,e){const t=Np(n);await nC(t,e,!0,!1)}async function nC(n,e,t,i){const s=await Hm(n.localStore,ti(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await B_(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&Dp(n.remoteStore,s),h}async function B_(n,e,t,i,s){n.pu=(v,_,S)=>(async function(D,N,U,B){let O=N.view.ru(U);O.Cs&&(O=await pv(D.localStore,N.query,!1).then((({documents:x})=>N.view.ru(x,O))));const X=B&&B.targetChanges.get(N.targetId),te=B&&B.targetMismatches.get(N.targetId)!=null,ee=N.view.applyChanges(O,D.isPrimaryClient,X,te);return bv(D,N.targetId,ee.au),ee.snapshot})(n,v,_,S);const o=await pv(n.localStore,e,!0),l=new p9(e,o.Qs),h=l.ru(o.documents),d=Jh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),f=l.applyChanges(h,n.isPrimaryClient,d);bv(n,t,f.au);const g=new g9(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function T9(n,e,t){const i=_e(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((l=>!Tp(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await pc(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&gc(i.remoteStore,s.targetId),vc(i,s.targetId)})).catch(Ea)):(vc(i,s.targetId),await pc(i.localStore,s.targetId,!0))}async function E9(n,e){const t=_e(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),gc(t.remoteStore,i.targetId))}async function w9(n,e,t){const i=G_(n);try{const s=await(function(l,h){const d=_e(l),f=Xe.now(),g=h.reduce(((S,R)=>S.add(R.key)),ze());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let R=ei(),D=ze();return d.Ns.getEntries(S,g).next((N=>{R=N,R.forEach(((U,B)=>{B.isValidDocument()||(D=D.add(U))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,R))).next((N=>{v=N;const U=[];for(const B of h){const O=G5(B,v.get(B.key).overlayedDocument);O!=null&&U.push(new us(B.key,O,k2(O.value.mapValue),En.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,U,h)})).next((N=>{_=N;const U=N.applyToLocalDocumentSet(v,D);return d.documentOverlayCache.saveOverlays(S,N.batchId,U)}))})).then((()=>({batchId:_.batchId,changes:$2(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,h,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new pt(Ve)),f=f.insert(h,d),l.Vu[l.currentUser.toKey()]=f})(i,s.batchId,t),await xa(i,s.changes),await Cc(i.remoteStore)}catch(s){const o=U_(s,"Failed to persist write");t.reject(o)}}async function iC(n,e){const t=_e(n);try{const i=await B6(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Te(l.hu,14607):s.removedDocuments.size>0&&(Te(l.hu,42227),l.hu=!1))})),await xa(t,i,e)}catch(i){await Ea(i)}}function dx(n,e,t){const i=_e(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(l,h){const d=_e(l);d.onlineState=h;let f=!1;d.queries.forEach(((g,v)=>{for(const _ of v.Sa)_.va(h)&&(f=!0)})),f&&z_(d)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function S9(n,e,t){const i=_e(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new pt(me.comparator);l=l.insert(o,Dt.newNoDocument(o,Se.min()));const h=ze().add(o),d=new Zh(Se.min(),new Map,new pt(Ve),l,h);await iC(i,d),i.du=i.du.remove(o),i.Au.delete(e),H_(i)}else await pc(i.localStore,e,!1).then((()=>vc(i,e,t))).catch(Ea)}async function x9(n,e){const t=_e(n),i=e.batch.batchId;try{const s=await z6(t.localStore,e);q_(t,i,null),F_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await xa(t,s)}catch(s){await Ea(s)}}async function A9(n,e,t){const i=_e(n);try{const s=await(function(l,h){const d=_e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,h).next((v=>(Te(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(i.localStore,e);q_(i,e,t),F_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await xa(i,s)}catch(s){await Ea(s)}}function F_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function q_(n,e,t){const i=_e(n);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function vc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||rC(n,i)}))}function rC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(gc(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),H_(n))}function bv(n,e,t){for(const i of t)i instanceof eC?(n.Ru.addReference(i.key,e),I9(n,i)):i instanceof tC?(ce(Nc,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||rC(n,i.key)):ye(19791,{wu:i})}function I9(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ce(Nc,"New document in limbo: "+t),n.Eu.add(i),H_(n))}function H_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new me(it.fromString(e)),i=n.fu.next();n.Au.set(i,new y9(t)),n.du=n.du.insert(t,i),Dp(n.remoteStore,new Yr(ti(bp(t.path)),i,"TargetPurposeLimboResolution",zn.ce))}}async function xa(n,e,t){const i=_e(n),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,d)=>{l.push(i.pu(d,e,t).then((f=>{if((f||t)&&i.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=k_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(l),i.Pu.H_(s),await(async function(d,f){const g=_e(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>$.forEach(f,(_=>$.forEach(_.Es,(S=>g.persistence.referenceDelegate.addReference(v,_.targetId,S))).next((()=>$.forEach(_.ds,(S=>g.persistence.referenceDelegate.removeReference(v,_.targetId,S)))))))))}catch(v){if(!wa(v))throw v;ce(V_,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const S=g.Ms.get(_),R=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(R);g.Ms=g.Ms.insert(_,D)}}})(i.localStore,o))}async function R9(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){ce(Nc,"User change. New user:",e.toKey());const i=await MR(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((h=>{h.forEach((d=>{d.reject(new he(ie.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xa(t,i.Ls)}}function C9(n,e){const t=_e(n),i=t.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let s=ze();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const h=t.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}async function D9(n,e){const t=_e(n),i=await pv(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&bv(t,e.targetId,s.au),s}async function N9(n,e){const t=_e(n);return LR(t.localStore,e).then((i=>xa(t,i)))}async function k9(n,e,t,i){const s=_e(n),o=await(function(h,d){const f=_e(h),g=_e(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(v=>g.er(v,d).next((_=>_?f.localDocuments.getDocuments(v,_):$.resolve(null)))))})(s.localStore,e);o!==null?(t==="pending"?await Cc(s.remoteStore):t==="acknowledged"||t==="rejected"?(q_(s,e,i||null),F_(s,e),(function(h,d){_e(_e(h).mutationQueue).ir(d)})(s.localStore,e)):ye(6720,"Unknown batchState",{Su:t}),await xa(s,o)):ce(Nc,"Cannot apply mutation batch with id: "+e)}async function V9(n,e){const t=_e(n);if(Np(t),G_(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await fx(t,i.toArray());t.gu=!0,await vv(t.remoteStore,!0);for(const o of s)Dp(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):s=s.then((()=>(vc(t,l),pc(t.localStore,l,!0)))),gc(t.remoteStore,l)})),await s,await fx(t,i),(function(l){const h=_e(l);h.Au.forEach(((d,f)=>{gc(h.remoteStore,f)})),h.Ru.Jr(),h.Au=new Map,h.du=new pt(me.comparator)})(t),t.gu=!1,await vv(t.remoteStore,!1)}}async function fx(n,e,t){const i=_e(n),s=[],o=[];for(const l of e){let h;const d=i.Iu.get(l);if(d&&d.length!==0){h=await Hm(i.localStore,ti(d[0]));for(const f of d){const g=i.Tu.get(f),v=await D9(i,g);v.snapshot&&o.push(v.snapshot)}}else{const f=await OR(i.localStore,l);h=await Hm(i.localStore,f),await B_(i,sC(f),l,!1,h.resumeToken)}s.push(h)}return i.Pu.H_(o),s}function sC(n){return z2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function M9(n){return(function(t){return _e(_e(t).persistence).Ts()})(_e(n).localStore)}async function P9(n,e,t,i){const s=_e(n);if(s.gu)return void ce(Nc,"Ignoring unexpected query state notification.");const o=s.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await LR(s.localStore,q2(o[0])),h=Zh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",jt.EMPTY_BYTE_STRING);await xa(s,l,h);break}case"rejected":await pc(s.localStore,e,!0),vc(s,e,i);break;default:ye(64155,t)}}async function O9(n,e,t){const i=Np(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){ce(Nc,"Adding an already active target "+s);continue}const o=await OR(i.localStore,s),l=await Hm(i.localStore,o);await B_(i,sC(o),l.targetId,!1,l.resumeToken),Dp(i.remoteStore,l)}for(const s of t)i.Iu.has(s)&&await pc(i.localStore,s,!1).then((()=>{gc(i.remoteStore,s),vc(i,s)})).catch(Ea)}}function Np(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S9.bind(null,e),e.Pu.H_=f9.bind(null,e.eventManager),e.Pu.yu=m9.bind(null,e.eventManager),e}function G_(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A9.bind(null,e),e}class Vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return VR(this.persistence,new kR,e.initialUser,this.serializer)}Cu(e){return new D_(Ip.mi,this.serializer)}Du(e){return new FR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vh.provider={build:()=>new Vh};class L9 extends Vh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Te(this.persistence.referenceDelegate instanceof qm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new AR(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new D_((i=>qm.mi(i,t)),this.serializer)}}class aC extends Vh{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await G_(this.xu.syncEngine),await Cc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return VR(this.persistence,new kR,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new AR(i,e.asyncQueue,t)}Mu(e,t){const i=new K3(t,this.persistence);return new $3(e.asyncQueue,i)}Cu(e){const t=NR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new N_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,qR(),fm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new FR}}class j9 extends aC{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof f0&&(this.sharedClientState.syncEngine={Co:k9.bind(null,t),vo:P9.bind(null,t),Fo:O9.bind(null,t),Ts:M9.bind(null,t),Do:N9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await V9(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=qR();if(!f0.v(t))throw new he(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=NR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new f0(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Mh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=R9.bind(null,this.syncEngine),await vv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d9})()}createDatastore(e){const t=Rp(e.databaseInfo.databaseId),i=(function(o){return new Q6(o)})(e.databaseInfo);return(function(o,l,h,d){return new Z6(o,l,h,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,o,l,h){return new e9(i,s,o,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>dx(this.syncEngine,t,0)),(function(){return ax.v()?new ax:new H6})())}createSyncEngine(e,t){return(function(s,o,l,h,d,f,g){const v=new v9(s,o,l,h,d,f);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=_e(t);ce(Po,"RemoteStore shutting down."),i.Ea.add(5),await ed(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mh.provider={build:()=>new Mh};class oC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const pa="FirestoreClient";class U9{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=_n.UNAUTHENTICATED,this.clientId=c_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{ce(pa,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(ce(pa,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=U_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function p0(n,e){n.asyncQueue.verifyOperationInProgress(),ce(pa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await MR(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function mx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await z9(n);ce(pa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>lx(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>lx(e.remoteStore,s))),n._onlineComponents=e}async function z9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(pa,"Using user provided OfflineComponentProvider");try{await p0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ie.FAILED_PRECONDITION||s.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;bh("Error using user provided cache. Falling back to memory cache: "+t),await p0(n,new Vh)}}else ce(pa,"Using default OfflineComponentProvider"),await p0(n,new L9(void 0));return n._offlineComponents}async function lC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(pa,"Using user provided OnlineComponentProvider"),await mx(n,n._uninitializedComponentsProvider._online)):(ce(pa,"Using default OnlineComponentProvider"),await mx(n,new Mh))),n._onlineComponents}function B9(n){return lC(n).then((e=>e.syncEngine))}async function Tv(n){const e=await lC(n),t=e.eventManager;return t.onListen=_9.bind(null,e.syncEngine),t.onUnlisten=T9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=b9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E9.bind(null,e.syncEngine),t}function F9(n,e,t={}){const i=new Jr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,h,d,f){const g=new oC({next:_=>{g.Nu(),l.enqueueAndForget((()=>ZR(o,v))),_.fromCache&&d.source==="server"?f.reject(new he(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new JR(h,g,{includeMetadataChanges:!0,qa:!0});return WR(o,v)})(await Tv(n),n.asyncQueue,e,t,i))),i.promise}function cC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const px=new Map;const q9="firestore.googleapis.com",gx=!0;class yx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q9,this.ssl=gx}else this.host=e.host,this.ssl=e.ssl??gx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xR)throw new he(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $_{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new M3;switch(i.type){case"firstParty":return new L3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=px.get(t);i&&(ce("ComponentProvider","Removing Datastore"),px.delete(t),i.terminate())})(this),Promise.resolve()}}class hs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class Lt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Qh(t,Lt._jsonSchema))return new Lt(e,i||null,new me(it.fromString(t.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Xt("string",Lt._jsonSchemaVersion),referencePath:Xt("string")};class ua extends hs{constructor(e,t,i){super(e,t,bp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new me(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function kp(n,e,...t){if(n=An(n),s2("collection","path",e),n instanceof $_){const i=it.fromString(e,...t);return oS(i),new ua(n,null,i)}{if(!(n instanceof Lt||n instanceof ua))throw new he(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(it.fromString(e,...t));return oS(i),new ua(n.firestore,null,i)}}function Ti(n,e,...t){if(n=An(n),arguments.length===1&&(e=c_.newId()),s2("doc","path",e),n instanceof $_){const i=it.fromString(e,...t);return aS(i),new Lt(n,null,new me(i))}{if(!(n instanceof Lt||n instanceof ua))throw new he(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(it.fromString(e,...t));return aS(i),new Lt(n.firestore,n instanceof ua?n.converter:null,new me(i))}}const vx="AsyncQueue";class _x{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HR(this,"async_queue_retry"),this._c=()=>{const i=fm();i&&ce(vx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=fm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=fm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wa(e))throw e;ce(vx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ot("INTERNAL UNHANDLED ERROR: ",bx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=j_.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&ye(47125,{Pc:bx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function bx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Tx(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class ga extends $_{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new _x,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _x(e),this._firestoreClient=void 0,await e}}}function H9(n,e,t){t||(t=Mm);const i=o_(n,"firestore");if(i.isInitialized(t)){const s=i.getImmediate({identifier:t}),o=i.getOptions(t);if(Io(o,e))return s;throw new he(ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xR)throw new he(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Sc(e.host)&&BI(e.host),i.initialize({options:e,instanceIdentifier:t})}function K_(n){if(n._terminated)throw new he(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||G9(n),n._firestoreClient}function G9(n){const e=n._freezeSettings(),t=(function(s,o,l,h){return new T5(s,o,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,cC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new U9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}class _i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _i(jt.fromBase64String(e))}catch(t){throw new he(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _i(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_i._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qh(e,_i._jsonSchema))return _i.fromBase64String(e.bytes)}}_i._jsonSchemaVersion="firestore/bytes/1.0",_i._jsonSchema={type:Xt("string",_i._jsonSchemaVersion),bytes:Xt("string")};class Vp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Q_{constructor(e){this._methodName=e}}class gr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gr._jsonSchemaVersion}}static fromJSON(e){if(Qh(e,gr._jsonSchema))return new gr(e.latitude,e.longitude)}}gr._jsonSchemaVersion="firestore/geoPoint/1.0",gr._jsonSchema={type:Xt("string",gr._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};class yr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qh(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yr(e.vectorValues);throw new he(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:Xt("string",yr._jsonSchemaVersion),vectorValues:Xt("object")};const $9=/^__.*__$/;class K9{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rc(e,this.data,t,this.fieldTransforms)}}class uC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:n})}}class Y_{constructor(e,t,i,s,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Y_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hC(this.Ac)&&$9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Q9{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Rp(e)}Cc(e,t,i,s=!1){return new Y_({Ac:e,methodName:t,Dc:i,path:St.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mp(n){const e=n._freezeSettings(),t=Rp(n._databaseId);return new Q9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dC(n,e,t,i,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);X_("Data must be an object, but it was:",l,i);const h=fC(i,l);let d,f;if(o.merge)d=new Bn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const _=Ev(e,v,t);if(!l.contains(_))throw new he(ie.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);pC(g,_)||g.push(_)}d=new Bn(g),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new K9(new Tn(h),d,f)}class Pp extends Q_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pp}}function Y9(n,e,t,i){const s=n.Cc(1,e,t);X_("Data must be an object, but it was:",s,i);const o=[],l=Tn.empty();Sa(i,((d,f)=>{const g=W_(e,d,t);f=An(f);const v=s.yc(g);if(f instanceof Pp)o.push(g);else{const _=td(f,v);_!=null&&(o.push(g),l.set(g,_))}}));const h=new Bn(o);return new uC(l,h,s.fieldTransforms)}function X9(n,e,t,i,s,o){const l=n.Cc(1,e,t),h=[Ev(e,i,t)],d=[s];if(o.length%2!=0)throw new he(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)h.push(Ev(e,o[_])),d.push(o[_+1]);const f=[],g=Tn.empty();for(let _=h.length-1;_>=0;--_)if(!pC(f,h[_])){const S=h[_];let R=d[_];R=An(R);const D=l.yc(S);if(R instanceof Pp)f.push(S);else{const N=td(R,D);N!=null&&(f.push(S),g.set(S,N))}}const v=new Bn(f);return new uC(g,v,l.fieldTransforms)}function W9(n,e,t,i=!1){return td(t,n.Cc(i?4:3,e))}function td(n,e){if(mC(n=An(n)))return X_("Unsupported field value:",e,n),fC(n,e);if(n instanceof Q_)return(function(i,s){if(!hC(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let l=0;for(const h of i){let d=td(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,s){if((i=An(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return j5(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Xe.fromDate(i);return{timestampValue:mc(s.serializer,o)}}if(i instanceof Xe){const o=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mc(s.serializer,o)}}if(i instanceof gr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _i)return{bytesValue:sR(s.serializer,i._byteString)};if(i instanceof Lt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:A_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof yr)return(function(l,h){return{mapValue:{fields:{[y_]:{stringValue:v_},[lc]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return T_(h.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${dp(i)}`)})(n,e)}function fC(n,e){const t={};return w2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(n,((i,s)=>{const o=td(s,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function mC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof gr||n instanceof _i||n instanceof Lt||n instanceof Q_||n instanceof yr)}function X_(n,e,t){if(!mC(t)||!a2(t)){const i=dp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Ev(n,e,t){if((e=An(e))instanceof Vp)return e._internalPath;if(typeof e=="string")return W_(n,e);throw Qm("Field path arguments must be of type string or ",n,!1,void 0,t)}const Z9=new RegExp("[~\\*/\\[\\]]");function W_(n,e,t){if(e.search(Z9)>=0)throw Qm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vp(...e.split("."))._internalPath}catch{throw Qm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qm(n,e,t,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new he(ie.INVALID_ARGUMENT,h+n+d)}function pC(n,e){return n.some((t=>t.isEqual(e)))}class gC{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Z_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class J9 extends gC{data(){return super.data()}}function Z_(n,e){return typeof e=="string"?W_(n,e):e instanceof Vp?e._internalPath:e._delegate._internalPath}function yC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class J_{}class eb extends J_{}function Oo(n,e,...t){let i=[];e instanceof J_&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((d=>d instanceof nb)).length,h=o.filter((d=>d instanceof tb)).length;if(l>1||l>0&&h>0)throw new he(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class tb extends eb{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new tb(e,t,i)}_apply(e){const t=this._parse(e);return vC(e._query,t),new hs(e.firestore,e.converter,ov(e._query,t))}_parse(e){const t=Mp(e.firestore);return(function(o,l,h,d,f,g,v){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new he(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Sx(v,g);const R=[];for(const D of v)R.push(wx(d,o,D));_={arrayValue:{values:R}}}else _=wx(d,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Sx(v,g),_=W9(h,l,v,g==="in"||g==="not-in");return $e.create(f,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class nb extends J_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nb(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ot.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)vC(l,d),l=ov(l,d)})(e._query,t),new hs(e.firestore,e.converter,ov(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ib extends eb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ib(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new he(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dh(o,l)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new Ic(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Ph(n,e="asc"){const t=e,i=Z_("orderBy",n);return ib._create(i,t)}class rb extends eb{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new rb(e,t,i)}_apply(e){return new hs(e.firestore,e.converter,Lm(e._query,this._limit,this._limitType))}}function Ex(n){return rb._create("limit",n,"F")}function wx(n,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new he(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B2(e)&&t.indexOf("/")!==-1)throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(it.fromString(t));if(!me.isDocumentKey(i))throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Rh(n,new me(i))}if(t instanceof Lt)return Rh(n,t._key);throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dp(t)}.`)}function Sx(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vC(n,e){const t=(function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class eL{convertValue(e,t="none"){switch(da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Sa(e,((s,o)=>{i[s]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[lc].arrayValue?.values?.map((i=>Tt(i.doubleValue)));return new yr(t)}convertGeoPoint(e){return new gr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=vp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ah(e));default:return null}}convertTimestamp(e){const t=ns(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=it.fromString(e);Te(pR(i),9688,{name:e});const s=new Do(i.get(1),i.get(3)),o=new me(i.popFirst(5));return s.isEqual(t)||Ot(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function _C(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Ju{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eo extends gC{constructor(e,t,i,s,o,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Z_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Eo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Eo._jsonSchema={type:Xt("string",Eo._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class mm extends Eo{data(e={}){return super.data(e)}}class wo{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ju(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new mm(this._firestore,this._userDataWriter,i.key,i,new Ju(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((h=>{const d=new mm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ju(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const d=new mm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ju(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return h.type!==0&&(f=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:tL(h.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=c_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}wo._jsonSchemaVersion="firestore/querySnapshot/1.0",wo._jsonSchema={type:Xt("string",wo._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class sb extends eL{constructor(e){super(),this.firestore=e}convertBytes(e){return new _i(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,t)}}function Op(n){n=zi(n,hs);const e=zi(n.firestore,ga),t=K_(e),i=new sb(e);return yC(n._query),F9(t,n._query).then((s=>new wo(e,i,n,s)))}function ab(n,e,t){n=zi(n,Lt);const i=zi(n.firestore,ga),s=_C(n.converter,e,t);return Bp(i,[dC(Mp(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,En.none())])}function Lp(n,e,t,...i){n=zi(n,Lt);const s=zi(n.firestore,ga),o=Mp(s);let l;return l=typeof(e=An(e))=="string"||e instanceof Vp?X9(o,"updateDoc",n._key,e,t,i):Y9(o,"updateDoc",n._key,e),Bp(s,[l.toMutation(n._key,En.exists(!0))])}function jp(n){return Bp(zi(n.firestore,ga),[new Sp(n._key,En.none())])}function Up(n,e){const t=zi(n.firestore,ga),i=Ti(n),s=_C(n.converter,e);return Bp(t,[dC(Mp(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,En.exists(!1))]).then((()=>i))}function zp(n,...e){n=An(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Tx(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Tx(e[i])){const d=e[i];e[i]=d.next?.bind(d),e[i+1]=d.error?.bind(d),e[i+2]=d.complete?.bind(d)}let o,l,h;if(n instanceof Lt)l=zi(n.firestore,ga),h=bp(n._key.path),o={next:d=>{e[i]&&e[i](nL(l,n,d))},error:e[i+1],complete:e[i+2]};else{const d=zi(n,hs);l=zi(d.firestore,ga),h=d._query;const f=new sb(l);o={next:g=>{e[i]&&e[i](new wo(l,f,d,g))},error:e[i+1],complete:e[i+2]},yC(n._query)}return(function(f,g,v,_){const S=new oC(_),R=new JR(g,S,v);return f.asyncQueue.enqueueAndForget((async()=>WR(await Tv(f),R))),()=>{S.Nu(),f.asyncQueue.enqueueAndForget((async()=>ZR(await Tv(f),R)))}})(K_(l),h,s,o)}function Bp(n,e){return(function(i,s){const o=new Jr;return i.asyncQueue.enqueueAndForget((async()=>w9(await B9(i),s,o))),o.promise})(K_(n),e)}function nL(n,e,t){const i=t.docs.get(e._key),s=new sb(n);return new Eo(n,s,e._key,i,new Ju(t.hasPendingWrites,t.fromCache),e.converter)}class iL{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=oL(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function rL(n){return new iL(n)}class sL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Mh.provider,this._offlineComponentProvider={build:t=>new aC(t,e?.cacheSizeBytes,this.forceOwnership)}}}class aL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Mh.provider,this._offlineComponentProvider={build:t=>new j9(t,e?.cacheSizeBytes)}}}function oL(n){return new sL(n?.forceOwnership)}function lL(){return new aL}(function(e,t=!0){(function(s){Ac=s})(xc),tc(new Ro("firestore",((i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new ga(new P3(i.getProvider("auth-internal")),new j3(l,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new he(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Do(f.options.projectId,g)})(l,s),l);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),oa(nS,iS,e),oa(nS,iS,"esm2020")})();var cL="firebase",uL="12.6.0";oa(cL,uL,"app");function bC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hL=bC,TC=new $h("auth","Firebase",bC());const Ym=new s_("@firebase/auth");function dL(n,...e){Ym.logLevel<=Ge.WARN&&Ym.warn(`Auth (${xc}): ${n}`,...e)}function pm(n,...e){Ym.logLevel<=Ge.ERROR&&Ym.error(`Auth (${xc}): ${n}`,...e)}function rs(n,...e){throw ob(n,...e)}function vr(n,...e){return ob(n,...e)}function EC(n,e,t){const i={...hL(),[e]:t};return new $h("auth","Firebase",i).create(e,{appName:n.name})}function So(n){return EC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ob(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return TC.create(n,...e)}function Ne(n,e,...t){if(!n)throw ob(e,...t)}function Xr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pm(e),new Error(e)}function ss(n,e){n||Xr(e)}function wv(){return typeof self<"u"&&self.location?.href||""}function fL(){return xx()==="http:"||xx()==="https:"}function xx(){return typeof self<"u"&&self.location?.protocol||null}function mL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fL()||fO()||"connection"in navigator)?navigator.onLine:!0}function pL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class nd{constructor(e,t){this.shortDelay=e,this.longDelay=t,ss(t>e,"Short delay should be less than long delay!"),this.isMobile=hO()||mO()}get(){return mL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lb(n,e){ss(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class wC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const yL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vL=new nd(3e4,6e4);function cb(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function kc(n,e,t,i,s={}){return SC(n,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=Kh({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...o};return dO()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Sc(n.emulatorConfig.host)&&(f.credentials="include"),wC.fetch()(await xC(n,n.config.apiHost,t,h),f)})}async function SC(n,e,t){n._canInitEmulator=!1;const i={...gL,...e};try{const s=new bL(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Qf(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,f]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qf(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Qf(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Qf(n,"user-disabled",l);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw EC(n,g,f);rs(n,g)}}catch(s){if(s instanceof ls)throw s;rs(n,"network-request-failed",{message:String(s)})}}async function _L(n,e,t,i,s={}){const o=await kc(n,e,t,i,s);return"mfaPendingCredential"in o&&rs(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function xC(n,e,t,i){const s=`${e}${t}?${i}`,o=n,l=o.config.emulator?lb(n.config,s):`${n.config.apiScheme}://${s}`;return yL.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class bL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(vr(this.auth,"network-request-failed")),vL.get())})}}function Qf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=vr(n,e,i);return s.customData._tokenResponse=t,s}async function TL(n,e){return kc(n,"POST","/v1/accounts:delete",e)}async function Xm(n,e){return kc(n,"POST","/v1/accounts:lookup",e)}function hh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EL(n,e=!1){const t=An(n),i=await t.getIdToken(e),s=ub(i);Ne(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:i,authTime:hh(g0(s.auth_time)),issuedAtTime:hh(g0(s.iat)),expirationTime:hh(g0(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function g0(n){return Number(n)*1e3}function ub(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return pm("JWT malformed, contained fewer than 3 sections"),null;try{const s=LI(t);return s?JSON.parse(s):(pm("Failed to decode base64 JWT payload"),null)}catch(s){return pm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Ax(n){const e=ub(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Oh(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ls&&wL(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function wL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class SL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Sv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hh(this.lastLoginAt),this.creationTime=hh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Wm(n){const e=n.auth,t=await n.getIdToken(),i=await Oh(n,Xm(e,{idToken:t}));Ne(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?AC(s.providerUserInfo):[],l=AL(n.providerData,o),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,f=h?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Sv(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function xL(n){const e=An(n);await Wm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AL(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function AC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function IL(n,e){const t=await SC(n,{},async()=>{const i=Kh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await xC(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&Sc(n.emulatorConfig.host)&&(d.credentials="include"),wC.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RL(n,e){return kc(n,"POST","/v2/accounts:revokeToken",cb(n,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ax(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=Ax(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:o}=await IL(e,t);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:o}=t,l=new Xl;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(Ne(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ne(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return Xr("not implemented")}}function Qs(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ji{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new SL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Oh(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return EL(this,e)}reload(){return xL(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ji({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Wm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(So(this.auth));const e=await this.getIdToken();return await Oh(this,TL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:S,providerData:R,stsTokenManager:D}=t;Ne(v&&D,e,"internal-error");const N=Xl.fromJSON(this.name,D);Ne(typeof v=="string",e,"internal-error"),Qs(i,e.name),Qs(s,e.name),Ne(typeof _=="boolean",e,"internal-error"),Ne(typeof S=="boolean",e,"internal-error"),Qs(o,e.name),Qs(l,e.name),Qs(h,e.name),Qs(d,e.name),Qs(f,e.name),Qs(g,e.name);const U=new ji({uid:v,auth:e,email:s,emailVerified:_,displayName:i,isAnonymous:S,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:N,createdAt:f,lastLoginAt:g});return R&&Array.isArray(R)&&(U.providerData=R.map(B=>({...B}))),d&&(U._redirectEventId=d),U}static async _fromIdTokenResponse(e,t,i=!1){const s=new Xl;s.updateFromServerResponse(t);const o=new ji({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Wm(o),o}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Ne(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?AC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,h=new Xl;h.updateFromIdToken(i);const d=new ji({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Sv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const Ix=new Map;function Wr(n){ss(n instanceof Function,"Expected a class definition");let e=Ix.get(n);return e?(ss(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ix.set(n,e),e)}class IC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IC.type="NONE";const Rx=IC;function gm(n,e,t){return`firebase:${n}:${e}:${t}`}class Wl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=gm(this.userKey,s.apiKey,o),this.fullPersistenceKey=gm("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xm(this.auth,{idToken:e}).catch(()=>{});return t?ji._fromGetAccountInfoResponse(this.auth,t,e):null}return ji._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Wl(Wr(Rx),e,i);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Wr(Rx);const l=gm(i,e.config.apiKey,e.name);let h=null;for(const f of t)try{const g=await f._get(l);if(g){let v;if(typeof g=="string"){const _=await Xm(e,{idToken:g}).catch(()=>{});if(!_)break;v=await ji._fromGetAccountInfoResponse(e,_,g)}else v=ji._fromJSON(e,g);f!==o&&(h=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Wl(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Wl(o,e,i))}}function Cx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VC(e))return"Blackberry";if(MC(e))return"Webos";if(CC(e))return"Safari";if((e.includes("chrome/")||DC(e))&&!e.includes("edge/"))return"Chrome";if(kC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function RC(n=tn()){return/firefox\//i.test(n)}function CC(n=tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DC(n=tn()){return/crios\//i.test(n)}function NC(n=tn()){return/iemobile/i.test(n)}function kC(n=tn()){return/android/i.test(n)}function VC(n=tn()){return/blackberry/i.test(n)}function MC(n=tn()){return/webos/i.test(n)}function hb(n=tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function CL(n=tn()){return hb(n)&&!!window.navigator?.standalone}function DL(){return pO()&&document.documentMode===10}function PC(n=tn()){return hb(n)||kC(n)||MC(n)||VC(n)||/windows phone/i.test(n)||NC(n)}function OC(n,e=[]){let t;switch(n){case"Browser":t=Cx(tn());break;case"Worker":t=`${Cx(tn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xc}/${i}`}class NL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function kL(n,e={}){return kc(n,"GET","/v2/passwordPolicy",cb(n,e))}const VL=6;class ML{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??VL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class PL{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dx(this),this.idTokenSubscription=new Dx(this),this.beforeStateQueue=new NL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xm(this,{idToken:e}),i=await ji._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===l)&&h?.user&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(So(this));const t=e?An(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(So(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(So(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kL(this),t=new ML(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $h("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await RL(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wr(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[Wr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&dL(`Error while retrieving App Check token: ${e.error}`),e?.token}}function db(n){return An(n)}class Dx{constructor(e){this.auth=e,this.observer=null,this.addObserver=TO(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OL(n){fb=n}function LL(n){return fb.loadJS(n)}function jL(){return fb.gapiScript}function UL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function zL(n,e){const t=o_(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Io(o,e??{}))return s;rs(s,"already-initialized")}return t.initialize({options:e})}function BL(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Wr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function FL(n,e,t){const i=db(n);Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=LC(e),{host:l,port:h}=qL(e),d=h===null?"":`:${h}`,f={url:`${o}//${l}${d}/`},g=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ne(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ne(Io(f,i.config.emulator)&&Io(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Sc(l)?(BI(`${o}//${l}${d}`),uO("Auth",!0)):HL()}function LC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qL(n){const e=LC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Nx(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Nx(l)}}}function Nx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function HL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class jC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xr("not implemented")}_getIdTokenResponse(e){return Xr("not implemented")}_linkToIdToken(e,t){return Xr("not implemented")}_getReauthenticationResolver(e){return Xr("not implemented")}}async function Zl(n,e){return _L(n,"POST","/v1/accounts:signInWithIdp",cb(n,e))}const GL="http://localhost";class Lo extends jC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=t;if(!i||!s)return null;const l=new Lo(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Zl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:GL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Kh(t)}return e}}class UC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class id extends UC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Js extends id{constructor(){super("facebook.com")}static credential(e){return Lo._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.FACEBOOK_SIGN_IN_METHOD="facebook.com";Js.PROVIDER_ID="facebook.com";class ea extends id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Lo._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ea.credential(t,i)}catch{return null}}}ea.GOOGLE_SIGN_IN_METHOD="google.com";ea.PROVIDER_ID="google.com";class ta extends id{constructor(){super("github.com")}static credential(e){return Lo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";class na extends id{constructor(){super("twitter.com")}static credential(e,t){return Lo._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return na.credential(t,i)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";class _c{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const o=await ji._fromIdTokenResponse(e,i,s),l=kx(i);return new _c({user:o,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=kx(i);return new _c({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function kx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Zm extends ls{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Zm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Zm(e,t,i,s)}}function zC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Zm._fromErrorAndOperation(n,o,e,i):o})}async function $L(n,e,t=!1){const i=await Oh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _c._forOperation(n,"link",i)}async function KL(n,e,t=!1){const{auth:i}=n;if(dr(i.app))return Promise.reject(So(i));const s="reauthenticate";try{const o=await Oh(n,zC(i,s,e,n),t);Ne(o.idToken,i,"internal-error");const l=ub(o.idToken);Ne(l,i,"internal-error");const{sub:h}=l;return Ne(n.uid===h,i,"user-mismatch"),_c._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&rs(i,"user-mismatch"),o}}async function QL(n,e,t=!1){if(dr(n.app))return Promise.reject(So(n));const i="signIn",s=await zC(n,i,e),o=await _c._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(o.user),o}function YL(n,e,t,i){return An(n).onIdTokenChanged(e,t,i)}function XL(n,e,t){return An(n).beforeAuthStateChanged(e,t)}const Jm="__sak";class BC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jm,"1"),this.storage.removeItem(Jm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const WL=1e3,ZL=10;class FC extends BC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);DL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ZL):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},WL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FC.type="LOCAL";const JL=FC;class qC extends BC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qC.type="SESSION";const HC=qC;function ej(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Fp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Fp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async f=>f(t.origin,o)),d=await ej(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fp.receivers=[];function mb(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class tj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const f=mb("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(_.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function _r(){return window}function nj(n){_r().location.href=n}function GC(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function ij(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rj(){return navigator?.serviceWorker?.controller||null}function sj(){return GC()?self:null}const $C="firebaseLocalStorageDb",aj=1,ep="firebaseLocalStorage",KC="fbase_key";class rd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qp(n,e){return n.transaction([ep],e?"readwrite":"readonly").objectStore(ep)}function oj(){const n=indexedDB.deleteDatabase($C);return new rd(n).toPromise()}function xv(){const n=indexedDB.open($C,aj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ep,{keyPath:KC})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ep)?e(i):(i.close(),await oj(),e(await xv()))})})}async function Vx(n,e,t){const i=qp(n,!0).put({[KC]:e,value:t});return new rd(i).toPromise()}async function lj(n,e){const t=qp(n,!1).get(e),i=await new rd(t).toPromise();return i===void 0?null:i.value}function Mx(n,e){const t=qp(n,!0).delete(e);return new rd(t).toPromise()}const cj=800,uj=3;class QC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>uj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fp._getInstance(sj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ij(),!this.activeServiceWorker)return;this.sender=new tj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xv();return await Vx(e,Jm,"1"),await Mx(e,Jm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Vx(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>lj(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Mx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=qp(s,!1).getAll();return new rd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QC.type="LOCAL";const hj=QC;new nd(3e4,6e4);function dj(n,e){return e?Wr(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class pb extends jC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fj(n){return QL(n.auth,new pb(n),n.bypassAuthState)}function mj(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),KL(t,new pb(n),n.bypassAuthState)}async function pj(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),$L(t,new pb(n),n.bypassAuthState)}class YC{constructor(e,t,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fj;case"linkViaPopup":case"linkViaRedirect":return pj;case"reauthViaPopup":case"reauthViaRedirect":return mj;default:rs(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gj=new nd(2e3,1e4);class ql extends YC{constructor(e,t,i,s,o){super(e,t,s,o),this.provider=i,this.authWindow=null,this.pollId=null,ql.currentPopupAction&&ql.currentPopupAction.cancel(),ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=mb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gj.get())};e()}}ql.currentPopupAction=null;const yj="pendingRedirect",ym=new Map;class vj extends YC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ym.get(this.auth._key());if(!e){try{const i=await _j(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ym.set(this.auth._key(),e)}return this.bypassAuthState||ym.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _j(n,e){const t=Ej(e),i=Tj(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function bj(n,e){ym.set(n._key(),e)}function Tj(n){return Wr(n._redirectPersistence)}function Ej(n){return gm(yj,n.config.apiKey,n.name)}async function wj(n,e,t=!1){if(dr(n.app))return Promise.reject(So(n));const i=db(n),s=dj(i,e),l=await new vj(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}const Sj=600*1e3;class xj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Aj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!XC(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(vr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Sj&&this.cachedEventUids.clear(),this.cachedEventUids.has(Px(e))}saveEventToCache(e){this.cachedEventUids.add(Px(e)),this.lastProcessedEventTime=Date.now()}}function Px(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Aj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XC(n);default:return!1}}async function Ij(n,e={}){return kc(n,"GET","/v1/projects",e)}const Rj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cj=/^https?/;async function Dj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Ij(n);for(const t of e)try{if(Nj(t))return}catch{}rs(n,"unauthorized-domain")}function Nj(n){const e=wv(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!Cj.test(t))return!1;if(Rj.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const kj=new nd(3e4,6e4);function Ox(){const n=_r().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Vj(n){return new Promise((e,t)=>{function i(){Ox(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ox(),t(vr(n,"network-request-failed"))},timeout:kj.get()})}if(_r().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_r().gapi?.load)i();else{const s=UL("iframefcb");return _r()[s]=()=>{gapi.load?i():t(vr(n,"network-request-failed"))},LL(`${jL()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw vm=null,e})}let vm=null;function Mj(n){return vm=vm||Vj(n),vm}const Pj=new nd(5e3,15e3),Oj="__/auth/iframe",Lj="emulator/auth/iframe",jj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zj(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?lb(e,Lj):`https://${n.config.authDomain}/${Oj}`,i={apiKey:e.apiKey,appName:n.name,v:xc},s=Uj.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Kh(i).slice(1)}`}async function Bj(n){const e=await Mj(n),t=_r().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:zj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jj,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=vr(n,"network-request-failed"),h=_r().setTimeout(()=>{o(l)},Pj.get());function d(){_r().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}const Fj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qj=500,Hj=600,Gj="_blank",$j="http://localhost";class Lx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Kj(n,e,t,i=qj,s=Hj){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...Fj,width:i.toString(),height:s.toString(),top:o,left:l},f=tn().toLowerCase();t&&(h=DC(f)?Gj:t),RC(f)&&(e=e||$j,d.scrollbars="yes");const g=Object.entries(d).reduce((_,[S,R])=>`${_}${S}=${R},`,"");if(CL(f)&&h!=="_self")return Qj(e||"",h),new Lx(null);const v=window.open(e||"",h,g);Ne(v,n,"popup-blocked");try{v.focus()}catch{}return new Lx(v)}function Qj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const Yj="__/auth/handler",Xj="emulator/auth/handler",Wj=encodeURIComponent("fac");async function jx(n,e,t,i,s,o){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:xc,eventId:s};if(e instanceof UC){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",bO(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof id){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await n._getAppCheckToken(),f=d?`#${Wj}=${encodeURIComponent(d)}`:"";return`${Zj(n)}?${Kh(h).slice(1)}${f}`}function Zj({config:n}){return n.emulator?lb(n,Xj):`https://${n.authDomain}/${Yj}`}const y0="webStorageSupport";class Jj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HC,this._completeRedirectFn=wj,this._overrideRedirectResult=bj}async _openPopup(e,t,i,s){ss(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await jx(e,t,i,wv(),s);return Kj(e,o,mb())}async _openRedirect(e,t,i,s){await this._originValidation(e);const o=await jx(e,t,i,wv(),s);return nj(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(ss(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Bj(e),i=new xj(e);return t.register("authEvent",s=>(Ne(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(y0,{type:y0},s=>{const o=s?.[0]?.[y0];o!==void 0&&t(!!o),rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Dj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return PC()||CC()||hb()}}const eU=Jj;var Ux="@firebase/auth",zx="1.11.1";class tU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iU(n){tc(new Ro("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;Ne(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OC(n)},f=new PL(i,s,o,d);return BL(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),tc(new Ro("auth-internal",e=>{const t=db(e.getProvider("auth").getImmediate());return(i=>new tU(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),oa(Ux,zx,nU(n)),oa(Ux,zx,"esm2020")}const rU=300,sU=zI("authIdTokenMaxAge")||rU;let Bx=null;const aU=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>sU)return;const s=t?.token;Bx!==s&&(Bx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function oU(n=E3()){const e=o_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=zL(n,{popupRedirectResolver:eU,persistence:[hj,JL,HC]}),i=zI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=aU(o.toString());XL(t,l,()=>l(t.currentUser)),YL(t,h=>l(h))}}const s=aO("auth");return s&&FL(t,`http://${s}`),t}function lU(){return document.getElementsByTagName("head")?.[0]??document}OL({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=vr("internal-error");o.customData=s,t(o)},i.type="text/javascript",i.charset="UTF-8",lU().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iU("Browser");const cU={apiKey:"AIzaSyAQ5FdR_OjZvMkTOYy9auXDctOQXGtZPgg",authDomain:"house-budget-pwa.firebaseapp.com",projectId:"house-budget-pwa",storageBucket:"house-budget-pwa.firebasestorage.app",messagingSenderId:"7591891522",appId:"1:7591891522:web:ebf15777f6c206129753db",measurementId:"G-6QDXEYXPTE"},WC=QI(cU),kn=H9(WC,{localCache:rL({tabManager:lL()})});oU(WC);const v0=n=>kp(kn,"users",n,"transactions"),cr={subscribeToTransactions:(n,e)=>{const t=Oo(v0(n),Ph("date","desc"));return zp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllTransactions:async n=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${n}`);const e=Oo(v0(n),Ph("date","desc")),i=(await Op(e)).docs.map(s=>({id:s.id,...s.data()}));return console.log(` Fetched ${i.length} transactions:`,i.map(s=>({id:s.id,description:s.description}))),i},addTransaction:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${t}`);try{console.log(" About to call addDoc with:",i);const s=await Up(v0(e),i);console.log(" addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`),console.log(` Document path: ${s.path}`);const o={id:s.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(s){throw console.error(" addDoc failed:",s),console.error("Error message:",s.message),s}},updateTransaction:async(n,e,t)=>{const i=Ti(kn,"users",n,"transactions",e);return await Lp(i,t)},deleteTransaction:async(n,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${n}`);try{const t=Ti(kn,"users",n,"transactions",e);console.log(` Deleting document at path: ${t.path}`),await jp(t),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(t){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,t),console.error("Error message:",t.message),t}}},_0=n=>kp(kn,"users",n,"envelopes"),Ys={subscribeToEnvelopes:(n,e)=>{const t=Oo(_0(n),Ph("orderIndex","asc"));return zp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllEnvelopes:async n=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",n);const e=_0(n),s=(await Op(e)).docs.map((o,l)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??l})).sort((o,l)=>{const h=o.orderIndex??0,d=l.orderIndex??0;return h-d});return console.log(" Fetched envelopes:",s.length),s}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create envelope");console.log(` EnvelopeService.createEnvelope: Adding envelope for user ${e}:`,i),console.log(` Original envelope had temp ID: ${t}`);try{const s=await Up(_0(e),i);console.log(" Envelope addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`);const o={id:s.id,...i,userId:e};return console.log(" Final envelope result object:",o),o}catch(s){throw console.error(" Envelope addDoc failed:",s),s}},saveEnvelope:async(n,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const t=Ti(kn,"users",n,"envelopes",e.id);return await ab(t,e,{merge:!0})},updateBalance:async(n,e,t)=>{const i=Ti(kn,"users",n,"envelopes",e);return await Lp(i,{currentBalance:t,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(n,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${n}`);const t=Ti(kn,"users",n,"envelopes",e);await jp(t),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},b0=n=>kp(kn,"users",n,"distributionTemplates"),yi={subscribeToDistributionTemplates:(n,e)=>{const t=Oo(b0(n),Ph("lastUsed","desc"));return zp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllDistributionTemplates:async n=>{const e=Oo(b0(n),Ph("lastUsed","desc"));return(await Op(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const s=await Up(b0(e),i);console.log(" Template addDoc succeeded, docRef:",s);const o={id:s.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(s){throw console.error(" Template addDoc failed:",s),s}},saveDistributionTemplate:async(n,e)=>{const t=Ti(kn,"users",n,"distributionTemplates",e.id);return await ab(t,e,{merge:!0})},updateDistributionTemplate:async(n,e,t)=>{const i=Ti(kn,"users",n,"distributionTemplates",e);return await Lp(i,t)},deleteDistributionTemplate:async(n,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${n}`);const t=Ti(kn,"users",n,"distributionTemplates",e);await jp(t),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},T0=n=>kp(kn,"users",n,"appSettings"),$r={subscribeToAppSettings:(n,e)=>{const t=Oo(T0(n),Ex(1));return zp(t,s=>{if(s.empty){e(null);return}const o=s.docs.map(l=>({id:l.id,...l.data()}))[0];e(o)})},getAppSettings:async n=>{const e=Oo(T0(n),Ex(1)),t=await Op(e);if(t.empty)return null;const i=t.docs[0];return{id:i.id,...i.data()}},createAppSettings:async n=>{const{userId:e,...t}=n;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,t);try{const i=await Up(T0(e),t);console.log(" Settings addDoc succeeded, docRef:",i);const s={id:i.id,...t,userId:e};return console.log(" Final settings result object:",s),s}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(n,e)=>{const t=Ti(kn,"users",n,"appSettings",e.id);return await ab(t,e,{merge:!0})},updateAppSettings:async(n,e,t)=>{const i=Ti(kn,"users",n,"appSettings",e);return await Lp(i,t)},deleteAppSettings:async(n,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${n}`);const t=Ti(kn,"users",n,"appSettings",e);await jp(t),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}};function uU(n,e){let t;try{t=n()}catch{return}return{getItem:s=>{var o;const l=d=>d===null?null:JSON.parse(d,void 0),h=(o=t.getItem(s))!=null?o:null;return h instanceof Promise?h.then(l):l(h)},setItem:(s,o)=>t.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>t.removeItem(s)}}const Av=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(i){return Av(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return Av(i)(t)}}}},hU=(n,e)=>(t,i,s)=>{let o={storage:uU(()=>localStorage),partialize:D=>D,version:0,merge:(D,N)=>({...N,...D}),...e},l=!1;const h=new Set,d=new Set;let f=o.storage;if(!f)return n((...D)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...D)},i,s);const g=()=>{const D=o.partialize({...i()});return f.setItem(o.name,{state:D,version:o.version})},v=s.setState;s.setState=(D,N)=>(v(D,N),g());const _=n((...D)=>(t(...D),g()),i,s);s.getInitialState=()=>_;let S;const R=()=>{var D,N;if(!f)return;l=!1,h.forEach(B=>{var O;return B((O=i())!=null?O:_)});const U=((N=o.onRehydrateStorage)==null?void 0:N.call(o,(D=i())!=null?D:_))||void 0;return Av(f.getItem.bind(f))(o.name).then(B=>{if(B)if(typeof B.version=="number"&&B.version!==o.version){if(o.migrate){const O=o.migrate(B.state,B.version);return O instanceof Promise?O.then(X=>[!0,X]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,B.state];return[!1,void 0]}).then(B=>{var O;const[X,te]=B;if(S=o.merge(te,(O=i())!=null?O:_),t(S,!0),X)return g()}).then(()=>{U?.(S,void 0),S=i(),l=!0,d.forEach(B=>B(S))}).catch(B=>{U?.(void 0,B)})};return s.persist={setOptions:D=>{o={...o,...D},D.storage&&(f=D.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>R(),hasHydrated:()=>l,onHydrate:D=>(h.add(D),()=>{h.delete(D)}),onFinishHydration:D=>(d.add(D),()=>{d.delete(D)})},o.skipHydration||R(),S||_},dU=hU,Iv=n=>{let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);e=(e<<5)-e+i,e=e&e}return e.toString()},fU=[{id:"user-frank",username:"frank",displayName:"Frank",passwordHash:Iv("password123")},{id:"user-brother",username:"brother",displayName:"Brother",passwordHash:Iv("password123")}],mU=n=>fU.find(e=>e.username===n),pU=(n,e)=>{const t=mU(n);return t&&Iv(e)===t.passwordHash?t:null},bc=i_()(dU(n=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,login:async(e,t)=>{n({isLoading:!0,loginError:null});try{await new Promise(s=>setTimeout(s,500));const i=pU(e,t);return i?(n({currentUser:i,isAuthenticated:!0,isLoading:!1,loginError:null}),console.log(` User logged in: ${i.displayName} (${i.username})`),!0):(n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Invalid username or password"}),!1)}catch(i){return console.error("Login error:",i),n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Login failed. Please try again."}),!1}},logout:()=>{console.log(" User logged out"),n({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1})},clearError:()=>{n({loginError:null})}}),{name:"auth-storage",partialize:n=>({currentUser:n.currentUser,isAuthenticated:n.isAuthenticated})})),gU=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const n=await fetch("/HouseBudget_Backup_2025-11-25.json");if(n.ok){const e=await n.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(n){console.log(" Could not load fallback data:",n)}return null},wt=()=>{const{currentUser:n}=bc.getState();if(!n)throw new Error("No authenticated user found");return n.id},ZC=()=>{console.log(" Clearing user data on logout"),Je.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},JC=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const n=async(t,i={})=>{try{const s=new AbortController,o=setTimeout(()=>s.abort(),4e3);return await fetch(t,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:s.signal,...i}),clearTimeout(o),!0}catch(s){return console.log(` Connectivity test failed for ${t}:`,s instanceof Error?s.message:"Unknown error"),!1}},e=[n("https://httpstat.us/200",{method:"GET"}),n("https://httpbin.org/status/200",{method:"GET"}),n("https://www.cloudflare.com/favicon.ico"),n("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),n("https://firestore.googleapis.com/v1/projects/house-budget-pwa/databases/(default)/documents"),n("https://firebase.googleapis.com/v1/projects/house-budget-pwa"),n("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const t=await Promise.allSettled(e),i=t.filter(o=>o.status==="fulfilled"&&o.value===!0).length,s=t.length;return i>0?(console.log(` Connectivity confirmed (${i}/${s} tests passed)`),!0):(console.log(` All connectivity tests failed (${s} tests)`),!1)}catch(t){return console.log(" Connectivity testing error:",t),!1}},Gr=n=>{const e=n?.code?.toLowerCase()||"",t=n?.message?.toLowerCase()||"",i=n?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||t.includes("network")||t.includes("offline")||t.includes("disconnected")||t.includes("connection")||t.includes("fetch")||t.includes("timeout")||t.includes("err_internet_disconnected")||t.includes("err_network_changed")||t.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&t==="undefined")},Je=i_((n,e)=>({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,fetchData:async()=>{const t=e(),i=wt();if(t.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",i),n({isLoading:!0,error:null});try{console.log(" fetchData: Making Firebase calls...");let s,o,l,h;[s,o,l,h]=await Promise.all([Ys.getAllEnvelopes(i).catch(g=>(console.error(" Failed to fetch envelopes:",g),[])),cr.getAllTransactions(i).catch(g=>(console.error(" Failed to fetch transactions:",g),[])),yi.getAllDistributionTemplates(i).catch(g=>(console.error(" Failed to fetch templates:",g),[])),$r.getAppSettings(i).catch(g=>(console.error(" Failed to fetch settings:",g),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:s?.length||0,transactions:o?.length||0,templates:l?.length||0,settings:h?"found":"null"}),e().markOnlineFromFirebaseSuccess();const d=(s?.length||0)>0||(o?.length||0)>0||(l?.length||0)>0;let f=null;d||(console.log(" No data from Firebase, loading fallback data..."),f=await gU(),f&&(console.log(" Using fallback data for initialization"),s=f.envelopes||[],o=f.transactions||[],l=f.distributionTemplates||[],h=f.appSettings||null)),n(g=>{const v=x=>x.map(I=>({...I,date:I.date&&typeof I.date=="object"&&I.date.toDate?I.date.toDate().toISOString():I.date,type:I.type==="income"?"Income":I.type==="expense"?"Expense":I.type==="transfer"?"Transfer":I.type,amount:typeof I.amount=="string"?parseFloat(I.amount):I.amount})),_=x=>({id:x.id,name:x.name,currentBalance:x.currentBalance||0,lastUpdated:x.lastUpdated,isActive:x.isActive??!0,orderIndex:x.orderIndex??0}),S=s.filter(x=>!("orderIndex"in x));S.length>0&&(console.log(` Migrating ${S.length} envelopes to add orderIndex...`),S.forEach((x,I)=>{const V=I,M=wt();Ys.saveEnvelope(M,{...x,orderIndex:V}).then(()=>console.log(` Migrated envelope ${x.name} with orderIndex ${V}`)).catch(k=>console.warn(`Failed to migrate envelope ${x.id}:`,k))}));const R=s.map(_),D=new Set([...g.envelopes.map(x=>x.id),...s.map(x=>x.id)]),N=g.envelopes.filter(x=>x.id&&!s.some(I=>I.id===x.id)&&!x.id.startsWith("temp-")),U=g.transactions.filter(x=>x.id&&!o.some(I=>I.id===x.id)&&(!x.id.startsWith("temp-")||D.has(x.envelopeId)));let B,O=[];navigator.onLine?(B=l,console.log(` Online mode: Using Firebase templates only (${B.length} templates)`)):(O=g.distributionTemplates.filter(x=>x.id&&!l.some(I=>I.id===x.id)),B=l.concat(O),console.log(` Offline mode: Merged ${l.length} Firebase + ${O.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",g.envelopes.map(x=>({id:x.id,name:x.name}))),console.log("  Firebase envelopes:",s.map(x=>({id:x.id,name:x.name}))),console.log("  Store transactions:",g.transactions.map(x=>({id:x.id,envelopeId:x.envelopeId,description:x.description}))),console.log("  Firebase transactions:",o.map(x=>({id:x.id,envelopeId:x.envelopeId,description:x.description}))),console.log("  Store templates:",g.distributionTemplates.map(x=>({id:x.id,name:x.name}))),console.log("  Firebase templates:",l.map(x=>({id:x.id,name:x.name}))),console.log("  Local-only envelopes:",N.map(x=>({id:x.id,name:x.name}))),console.log("  Local-only transactions:",U.map(x=>({id:x.id,envelopeId:x.envelopeId,description:x.description}))),console.log("  Local-only templates:",O.map(x=>({id:x.id,name:x.name}))),console.log("  Total merged templates:",B.length,B.map(x=>({id:x.id,name:x.name})));const X=R.concat(N),te=v(o).concat(U);console.log("  Local-only envelopes:",N.map(x=>({id:x.id,name:x.name}))),console.log("  Merged envelopes will be:",X.length,X.map(x=>({id:x.id,name:x.name})));let ee=h;if(h&&"isDarkMode"in h&&!("theme"in h)){const x=h;if(ee={...x,theme:x.isDarkMode?"dark":"light"},delete ee.isDarkMode,ee&&ee.id){const I=wt();$r.updateAppSettings(I,ee.id,{theme:ee.theme}).catch(V=>console.warn("Failed to migrate app settings:",V))}}return{envelopes:X,transactions:te,distributionTemplates:B,appSettings:ee,isLoading:!1,pendingSync:!1}})}catch(s){console.error("Sync Failed:",s),Gr(s)?n({isLoading:!1,pendingSync:!0}):n({error:s.message,isLoading:!1})}},addTransaction:async t=>{const i=`temp-${Date.now()}-${Math.random()}`,s=wt(),o={...t,id:i,userId:s};if(n(l=>({transactions:[...l.transactions,o],isLoading:!0})),t.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${t.envelopeId}`),n({isLoading:!1,pendingSync:!0});else try{const l={...o,amount:o.amount.toString(),type:o.type.toLowerCase(),date:Xe.fromDate(new Date(o.date))},h=await cr.addTransaction(l);console.log(` Replacing temp transaction ${i} with Firebase transaction:`,h);const d=eD(h);n(f=>({transactions:f.transactions.map(g=>g.id===i?d:g),isLoading:!1,pendingSync:!1}))}catch(l){console.error("Add Transaction Failed:",l),Gr(l)?n({isLoading:!1,pendingSync:!0,error:null}):n(h=>({transactions:h.transactions.filter(d=>d.id!==i),error:l.message,isLoading:!1}))}},createEnvelope:async t=>{const i=t.currentBalance&&t.currentBalance>0,s=i?{...t,currentBalance:0,orderIndex:t.orderIndex??0}:{...t,orderIndex:t.orderIndex??0},o=`temp-${Date.now()}-${Math.random()}`,l={...s,id:o};if(n(h=>({envelopes:[...h.envelopes,l],isLoading:!0})),i){console.log(` Creating initial deposit transaction locally first: ${l.name} (tempId: ${o})`);try{await e().addTransaction({description:"Initial Deposit",amount:t.currentBalance,envelopeId:o,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const h=e().getEnvelopeBalance(o);console.log(` Test balance for temp envelope ${o}: $${h.toNumber()}`)}catch(h){console.error(" Failed to create initial deposit transaction locally:",h)}}try{console.log(" Attempting Firebase envelope creation...");const h=wt(),d={...s,id:"",userId:h},f=await Ys.createEnvelope(d);console.log(" Firebase envelope creation successful:",f);const g={id:f.id,name:f.name,currentBalance:f.currentBalance,lastUpdated:f.lastUpdated,isActive:f.isActive??!0,orderIndex:f.orderIndex??0,userId:f.userId};if(n(v=>({envelopes:v.envelopes.map(_=>_.id===o?g:_),isLoading:!1,pendingSync:!1})),i){console.log(` Updating transactions from temp envelope ID ${o} to real ID ${f.id}`),console.log(" Transactions before update:",e().transactions.map(_=>({id:_.id,envelopeId:_.envelopeId,description:_.description}))),n(_=>({transactions:_.transactions.map(S=>S.envelopeId===o?{...S,envelopeId:f.id}:S)})),console.log(" Transactions after envelopeId update:",e().transactions.map(_=>({id:_.id,envelopeId:_.envelopeId,description:_.description})));const v=e().transactions.filter(_=>_.envelopeId===f.id&&_.id&&_.id.startsWith("temp-"));console.log(` Found ${v.length} transactions to sync for envelope ${f.id}:`,v.map(_=>({id:_.id,envelopeId:_.envelopeId})));for(const _ of v)try{console.log(" Syncing transaction:",_);const S={..._,amount:_.amount.toString(),type:_.type.toLowerCase(),date:Xe.fromDate(new Date(_.date))},R=await cr.addTransaction(S);console.log(" Transaction synced:",R);const D={...R,amount:typeof R.amount=="string"?parseFloat(R.amount):R.amount,type:R.type==="income"?"Income":R.type==="expense"?"Expense":R.type==="transfer"?"Transfer":R.type,date:R.date&&typeof R.date=="object"&&R.date.toDate?R.date.toDate().toISOString():R.date};console.log(` Replacing temp transaction ${_.id} with Firebase transaction ${R.id}`),n(N=>({transactions:N.transactions.map(U=>U.id===_.id?D:U)}))}catch(S){console.error(` Failed to sync transaction ${_.id}:`,S)}console.log(" Final transactions after sync:",e().transactions.map(_=>({id:_.id,envelopeId:_.envelopeId,description:_.description}))),n({pendingSync:!1}),console.log(` All transactions synced for envelope ${f.id}`)}}catch(h){console.error("Create Envelope Failed:",h),console.log("Error details:",{code:h?.code,message:h?.message,name:h?.name,isNetworkError:Gr(h)}),Gr(h)?(console.log(" Treating as offline scenario - keeping temp envelope and transactions"),n({isLoading:!1,pendingSync:!0,error:null})):(console.log(" Real error - removing temp envelope"),n(d=>({envelopes:d.envelopes.filter(f=>f.id!==o),transactions:d.transactions.filter(f=>f.envelopeId!==o),error:h.message,isLoading:!1})))}},syncData:async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),n({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(i){console.error("Firebase reset during sync failed:",i)}return}n({pendingSync:!0});try{await e().fetchData()}catch(i){console.error("Manual sync failed:",i)}},updateOnlineStatus:async()=>{const t=await JC();n({isOnline:t})},markOnlineFromFirebaseSuccess:()=>{e().isOnline||(console.log(" Firebase operation succeeded - marking as online"),n({isOnline:!0}))},handleUserLogout:()=>{ZC()},addToEnvelope:async(t,i,s,o)=>{const l=o?typeof o=="string"?o:o.toISOString():new Date().toISOString();await e().addTransaction({description:s,amount:i,envelopeId:t,date:l,type:"Income",reconciled:!1})},spendFromEnvelope:async(t,i,s,o)=>{const l=o?typeof o=="string"?o:o.toISOString():new Date().toISOString();await e().addTransaction({description:s,amount:i,envelopeId:t,date:l,type:"Expense",reconciled:!1})},transferFunds:async(t,i,s,o,l)=>{console.log(`Transferring ${s} from ${t} to ${i} with note: ${o}`);const h=l?typeof l=="string"?l:l.toISOString():new Date().toISOString(),d=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(f=>f.id===i)?.name||"envelope"}`,amount:s,envelopeId:t,date:h,type:"Expense",transferId:d,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(f=>f.id===t)?.name||"envelope"}`,amount:s,envelopeId:i,date:h,type:"Income",transferId:d,reconciled:!1})},deleteEnvelope:async t=>{const i=e().transactions.filter(s=>s.envelopeId===t);n(s=>({envelopes:s.envelopes.filter(o=>o.id!==t),transactions:s.transactions.filter(o=>o.envelopeId!==t),isLoading:!0}));try{const s=wt();await Ys.deleteEnvelope(s,t);for(const o of i)o.id&&!o.id.startsWith("temp-")&&await cr.deleteTransaction(s,o.id);await e().removeEnvelopeFromTemplates(t),n({isLoading:!1})}catch(s){if(console.error("Delete Envelope Failed:",s),Gr(s))n({isLoading:!1,pendingSync:!0,error:null});else{const o=e().envelopes.find(l=>l.id===t);n(o?l=>({envelopes:[...l.envelopes,o],transactions:[...l.transactions,...i],error:s.message,isLoading:!1}):{error:s.message,isLoading:!1})}}},deleteTransaction:async t=>{const i=e().transactions.find(o=>o.id===t);if(!i)return;const s=[t];if(i.transferId){const o=e().transactions.find(l=>l.transferId===i.transferId&&l.id!==t);o&&o.id&&s.push(o.id)}n(o=>({transactions:o.transactions.filter(l=>l.id&&!s.includes(l.id)),isLoading:!0}));try{const o=wt(),l=s.filter(h=>!h.startsWith("temp-"));for(const h of l)console.log(` About to delete transaction ID: ${h}`),await cr.deleteTransaction(o,h),console.log(` Deleted transaction ID: ${h}`);console.log(" All transaction deletions completed"),n({isLoading:!1})}catch(o){if(console.error("Delete Transaction Failed:",o),Gr(o))n({isLoading:!1,pendingSync:!0,error:null});else{const l=s.map(h=>e().transactions.find(d=>d.id===h)||i).filter(Boolean);n(h=>({transactions:[...h.transactions,...l],error:o.message,isLoading:!1}))}}},updateTransaction:async t=>{console.log(" updateTransaction called:",t),n(i=>({transactions:i.transactions.map(s=>s.id===t.id?t:s),isLoading:!0}));try{const i=wt(),s=cr.updateTransaction(i,t.id,{description:t.description,amount:t.amount.toString(),envelopeId:t.envelopeId,date:Xe.fromDate(new Date(t.date)),type:t.type.toLowerCase()}),o=new Promise((l,h)=>setTimeout(()=>h(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([s,o]),console.log(" Transaction updated in Firebase"),n({isLoading:!1})}catch(i){console.error("Update Transaction Failed:",i),console.log(" Error details:",{name:i?.name||"Unknown",message:i?.message||"Unknown",code:i?.code||"Unknown",isNetworkError:Gr(i)}),Gr(i)?(console.log(" Treating as offline scenario - keeping local transaction update"),n({isLoading:!1,pendingSync:!0,error:null})):n({error:i.message,isLoading:!1})}},restoreTransaction:async t=>{n(i=>({transactions:[...i.transactions,t],isLoading:!0}));try{n({isLoading:!1})}catch(i){console.error("Restore Transaction Failed:",i),n({error:i.message,isLoading:!1})}},importData:async t=>{try{if(!t.envelopes||!t.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const i=wt();console.log(` Importing data for user: ${i}`);const s=t.envelopes.map(g=>({id:g.id||`imported-${Date.now()}-${Math.random()}`,name:g.name,currentBalance:g.currentBalance||g.budget||0,lastUpdated:new Date().toISOString(),isActive:g.isActive??!0,orderIndex:g.orderIndex??0,userId:i})),o=t.transactions.map(g=>({...g,id:g.id||`imported-${Date.now()}-${Math.random()}`,userId:i,date:g.date,amount:typeof g.amount=="number"?g.amount:parseFloat(g.amount)||0,type:g.type,reconciled:g.reconciled??!1})),l=(t.distributionTemplates||[]).map(g=>({...g,id:g.id||`imported-${Date.now()}-${Math.random()}`,userId:i})),h=t.appSettings?{...t.appSettings,id:t.appSettings.id||`settings-${i}`,userId:i}:null;console.log(` Importing: ${s.length} envelopes, ${o.length} transactions, ${l.length} templates`),n({envelopes:s,transactions:o,distributionTemplates:l,appSettings:h,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const g of s)try{await Ys.saveEnvelope(i,g),console.log(` Synced envelope: ${g.name}`)}catch(v){console.error(` Failed to sync envelope ${g.name}:`,v)}for(const g of o)try{const v={...g,amount:g.amount.toString(),type:g.type.toLowerCase(),date:Xe.fromDate(new Date(g.date))};await cr.addTransaction(v),console.log(` Synced transaction: ${g.description}`)}catch(v){console.error(` Failed to sync transaction ${g.description}:`,v)}for(const g of l)try{await yi.createDistributionTemplate(g),console.log(` Synced template: ${g.name}`)}catch(v){console.error(` Failed to sync template ${g.name}:`,v)}if(h)try{await $r.createAppSettings(h),console.log(" Synced app settings")}catch(g){console.error(" Failed to sync app settings:",g)}console.log(" All imported data synced to Firebase"),n({pendingSync:!1})}catch(g){console.error(" Error syncing to Firebase:",g),n({pendingSync:!0})}const d=l.length,f=h?"Settings imported.":"";return{success:!0,message:`Imported and synced ${s.length} envelopes, ${o.length} transactions${d>0?`, ${d} templates`:""} to Firebase.${f?` ${f}`:""}`}}catch(i){return console.error("Import failed:",i),{success:!1,message:"Failed to import data. Check file format."}}},performFirebaseReset:async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),n({isLoading:!0});try{const t=wt();console.log(" Querying Firebase for all data to delete...");const[i,s,o,l]=await Promise.all([Ys.getAllEnvelopes(t).catch(g=>(console.error(" Failed to fetch envelopes for reset:",g),[])),cr.getAllTransactions(t).catch(g=>(console.error(" Failed to fetch transactions for reset:",g),[])),yi.getAllDistributionTemplates(t).catch(g=>(console.error(" Failed to fetch templates for reset:",g),[])),$r.getAppSettings(t).catch(g=>(console.error(" Failed to fetch settings for reset:",g),null))]);console.log(` Found in Firebase: ${i.length} envelopes, ${s.length} transactions, ${o.length} templates`);let h=0;for(const g of i)if(g.id)try{await Ys.deleteEnvelope(t,g.id),h++,console.log(` Deleted envelope: ${g.name||g.id}`)}catch(v){console.error(` Failed to delete envelope ${g.id}:`,v)}let d=0;for(const g of s)if(g.id)try{await cr.deleteTransaction(t,g.id),d++,console.log(` Deleted transaction: ${g.id}`)}catch(v){console.error(` Failed to delete transaction ${g.id}:`,v)}let f=0;for(const g of o)if(g.id)try{await yi.deleteDistributionTemplate(t,g.id),f++,console.log(` Deleted template: ${g.name||g.id}`)}catch(v){console.error(` Failed to delete template ${g.id}:`,v)}if(l?.id)try{await $r.deleteAppSettings(t,l.id),console.log(" Deleted app settings")}catch(g){console.error(" Failed to delete app settings:",g)}console.log(` Firebase reset complete: Deleted ${h} envelopes, ${d} transactions, ${f} templates`),n({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(t){throw console.error(" Error during Firebase reset:",t),n({isLoading:!1,pendingSync:!0}),t}},resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),n({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(i){console.error(" Firebase reset failed, will retry on next sync:",i),n({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),n({isLoading:!1,pendingSync:!0})},renameEnvelope:async(t,i)=>{n(s=>({envelopes:s.envelopes.map(o=>o.id===t?{...o,name:i}:o),isLoading:!0}));try{n({isLoading:!1})}catch(s){console.error("Rename Envelope Failed:",s),n({error:s.message,isLoading:!1})}},saveTemplate:async(t,i,s)=>{console.log(" saveTemplate called with:",{name:t,distributions:i,note:s});try{const o=wt(),l={id:`temp-${Date.now()}`,userId:o,name:t,note:s,lastUsed:new Date().toISOString(),distributions:i};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const h=yi.createDistributionTemplate(l),d=new Promise((g,v)=>setTimeout(()=>v(new Error("Firebase timeout - likely offline")),5e3)),f=await Promise.race([h,d]);console.log(" Firebase template save succeeded (online mode):",f),n(g=>{const v=[...g.distributionTemplates,f];return console.log(" Updating store - old templates:",g.distributionTemplates.length,"new templates:",v.length),{distributionTemplates:v}}),console.log(" Template saved to Firebase:",f),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(h){throw console.log(" Firebase template save failed or timed out:",h.message),h}}catch(o){console.error(" Failed to save template to Firebase, saving locally:",o),console.log(" Error details:",{name:o?.name||"Unknown",message:o?.message||"Unknown",code:o?.code||"Unknown",isNetworkError:Gr(o)});const l=wt(),h={id:`local-${Date.now()}`,userId:l,name:t,note:s,lastUsed:new Date().toISOString(),distributions:i};console.log(" Saving template locally (offline):",h),n(d=>({distributionTemplates:[...d.distributionTemplates,h],pendingSync:!0})),console.log(" Template saved locally as fallback:",h),console.log(" Store now has templates:",e().distributionTemplates.length)}},deleteTemplate:async t=>{try{const i=wt();await yi.deleteDistributionTemplate(i,t),n(s=>({distributionTemplates:s.distributionTemplates.filter(o=>o.id!==t)})),console.log(" Template deleted from Firebase:",t)}catch(i){throw console.error(" Failed to delete template from Firebase:",i),i}},updateAppSettings:async t=>{const i=e();if(!i.appSettings){try{await i.initializeAppSettings();const s=e();if(s.appSettings){const o={...s.appSettings,...t};n({appSettings:o});const l=wt();await $r.updateAppSettings(l,s.appSettings.id,t),console.log(" App settings updated successfully")}}catch(s){console.error(" Failed to initialize/update settings:",s)}return}try{n(o=>({appSettings:{...o.appSettings,...t}}));const s=wt();await $r.updateAppSettings(s,i.appSettings.id,t),console.log(" App settings updated successfully")}catch(s){throw console.error(" Failed to update app settings:",s),n(o=>({appSettings:o.appSettings})),s}},initializeAppSettings:async()=>{try{const i={userId:wt(),theme:"system"},s=await $r.createAppSettings(i);n({appSettings:s}),console.log(" App settings initialized successfully")}catch(t){console.error(" Failed to initialize app settings:",t);const i=wt();n({appSettings:{id:"local-settings",userId:i,theme:"system"}})}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const t=e().distributionTemplates,i=e().envelopes,s=new Set(i.map(l=>l.id));let o=0;for(const l of t){const h={...l.distributions},d={};for(const[f,g]of Object.entries(l.distributions))s.has(f)&&(d[f]=g);if(Object.keys(d).length===0){console.log(` Deleting orphaned template: ${l.name}`);const f=wt();await yi.deleteDistributionTemplate(f,l.id),o++}else if(JSON.stringify(d)!==JSON.stringify(h)){console.log(` Updating template ${l.name} - removed orphaned envelope references`);const f=wt();await yi.updateDistributionTemplate(f,l.id,{distributions:d}),o++}}o>0?console.log(` Cleaned up ${o} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(t,i)=>{console.log(` Updating template references: ${t}  ${i}`);const s=e().distributionTemplates;let o=0;for(const l of s)if(l.distributions[t]!==void 0){const h={...l.distributions};h[i]=h[t],delete h[t],console.log(` Updating template: ${l.name}`);const d=wt();await yi.updateDistributionTemplate(d,l.id,{distributions:h}),o++}o>0&&console.log(` Updated ${o} templates with new envelope reference`)},removeEnvelopeFromTemplates:async t=>{console.log(` Removing envelope ${t} from all templates`);const i=e().distributionTemplates;let s=0,o=0;for(const l of i)if(l.distributions[t]!==void 0){const h={...l.distributions};if(delete h[t],Object.keys(h).length===0){console.log(` Deleting template ${l.name} - no envelopes left`);const d=wt();await yi.deleteDistributionTemplate(d,l.id),o++}else{console.log(` Removing envelope from template: ${l.name}`);const d=wt();await yi.updateDistributionTemplate(d,l.id,{distributions:h}),s++}}(s>0||o>0)&&console.log(` Updated ${s} templates, deleted ${o} empty templates`)},getEnvelopeBalance:t=>{const i=e();if(!i.envelopes.find(v=>v.id===t))return console.log(` getEnvelopeBalance: Envelope ${t} not found`),new Kr(0);const o=i.transactions.filter(v=>v.envelopeId===t),l=o.filter(v=>v.type==="Expense"),h=o.filter(v=>v.type==="Income"),d=l.reduce((v,_)=>v.plus(new Kr(_.amount||0)),new Kr(0));return h.reduce((v,_)=>v.plus(new Kr(_.amount||0)),new Kr(0)).minus(d)}})),eD=n=>({id:n.id,date:n.date?.toDate?.()?n.date.toDate().toISOString():n.date,amount:parseFloat(n.amount)||0,description:n.description||"",envelopeId:n.envelopeId||"",reconciled:n.reconciled||!1,type:n.type==="income"?"Income":n.type==="expense"?"Expense":"Transfer",transferId:n.transferId||void 0,userId:n.userId||void 0}),yU=n=>({id:n.id,name:n.name||"",currentBalance:n.currentBalance||0,lastUpdated:n.lastUpdated,isActive:n.isActive??!0,orderIndex:n.orderIndex??0,userId:n.userId||void 0}),vU=n=>({id:n.id,name:n.name||"",distributions:n.distributions||{},lastUsed:n.lastUsed?.toDate?.()?n.lastUsed.toDate().toISOString():n.lastUsed||new Date().toISOString(),note:n.note||"",userId:n.userId||void 0}),Fx=()=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=wt();if(!n){console.log(" No authenticated user found, skipping real-time subscriptions");return}const e=Ys.subscribeToEnvelopes(n,o=>{const l=Je.getState();if(l.isOnline&&!l.pendingSync&&!l.resetPending){console.log(" Real-time sync: Envelopes updated",o.length);const h=o.map(yU);Je.setState({envelopes:h})}}),t=cr.subscribeToTransactions(n,o=>{const l=Je.getState();if(l.isOnline&&!l.pendingSync&&!l.resetPending){console.log(" Real-time sync: Transactions updated",o.length);const h=o.map(eD);Je.setState({transactions:h})}}),i=yi.subscribeToDistributionTemplates(n,o=>{const l=Je.getState();if(l.isOnline&&!l.pendingSync&&!l.resetPending){console.log(" Real-time sync: Templates updated",o.length);const h=o.map(vU);Je.setState({distributionTemplates:h})}}),s=$r.subscribeToAppSettings(n,o=>{const l=Je.getState();l.isOnline&&!l.pendingSync&&!l.resetPending&&(console.log(" Real-time sync: Settings updated",o?"found":"null"),Je.setState({appSettings:o}))});window.__firebaseUnsubscribers={envelopes:e,transactions:t,templates:i,settings:s},console.log(" Real-time subscriptions active - cross-device sync enabled")};if(typeof window<"u"){window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await Je.getState().updateOnlineStatus();const i=Je.getState();i.isOnline&&(i.pendingSync||i.resetPending)&&(console.log(" Auto-syncing pending operations..."),i.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),Je.setState({isOnline:!1})}),setTimeout(()=>{Je.getState().updateOnlineStatus()},1e3);let n=null;const e=()=>{n&&clearInterval(n),n=setInterval(async()=>{const i=Je.getState();if(!i.isOnline&&!i.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),Je.setState({testingConnectivity:!0});try{await JC()?(console.log(" Periodic retry succeeded - back online!"),Je.setState({isOnline:!0,testingConnectivity:!1}),(i.pendingSync||i.resetPending)&&Je.getState().syncData(),n&&(clearInterval(n),n=null)):Je.setState({testingConnectivity:!1})}catch(s){console.log(" Periodic retry failed:",s),Je.setState({testingConnectivity:!1})}}else i.isOnline&&n&&(clearInterval(n),n=null)},3e4)};e(),Je.subscribe(i=>{!i.isOnline&&!n&&(console.log(" Starting periodic connectivity retry"),e())});const t=bc.getState();t.isAuthenticated&&t.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),Fx()),bc.subscribe(i=>{if(i.isAuthenticated&&i.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),Fx();else if(!i.isAuthenticated&&!i.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const s=window.__firebaseUnsubscribers;s.envelopes&&s.envelopes(),s.transactions&&s.transactions(),s.templates&&s.templates(),s.settings&&s.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}ZC()}})}const _U=({isOpen:n,onClose:e})=>{const{envelopes:t,addToEnvelope:i,distributionTemplates:s,saveTemplate:o,deleteTemplate:l,getEnvelopeBalance:h}=Je(),[d,f]=L.useState(""),[g,v]=L.useState({}),[_,S]=L.useState(""),[R,D]=L.useState(!1),[N,U]=L.useState(!1),[B,O]=L.useState(""),X=L.useMemo(()=>t.sort((de,H)=>de.name.localeCompare(H.name)),[t]),te=parseFloat(d)||0,ee=L.useMemo(()=>Object.values(g).reduce((de,H)=>de+H,0),[g]),x=te-ee,I=Math.abs(x)<.01,V=te>0&&I,M=ee>0&&I,k=(de,H)=>{const re=parseFloat(H);v(ue=>({...ue,[de]:isNaN(re)?0:re}))},z=()=>{V&&(Object.entries(g).forEach(([de,H])=>{H>0&&i(de,H,_||"Deposit",new Date)}),f(""),v({}),S(""),e())},P=()=>{B.trim()&&(o(B,g,_),D(!1),O(""))},Ce=de=>{const H=Object.fromEntries(Object.entries(de.distributions).filter(([ue])=>X.some(xe=>xe.id===ue)));v(H);const re=Object.values(H).reduce((ue,xe)=>ue+xe,0);f(re.toFixed(2)),S(de.note||""),U(!1)};return n?E.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-gray-50 dark:bg-black sm:bg-gray-100 dark:sm:bg-black",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 flex items-center justify-between shadow-sm shrink-0",children:[E.jsx("button",{onClick:e,className:"text-blue-600 dark:text-blue-400 font-medium text-base",children:"Cancel"}),E.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:"Distribute Funds"}),E.jsx("button",{onClick:z,disabled:!V,className:`font-bold text-base ${V?"text-blue-600 dark:text-blue-400":"text-gray-300 dark:text-zinc-600"}`,children:"Apply"})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 relative",children:[E.jsxs("div",{className:"sticky top-0 z-10 bg-gray-50/95 dark:bg-black/95 backdrop-blur-sm border-b border-gray-200 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[E.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[E.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-zinc-400 mb-1",children:"Deposit Amount"}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mr-2",children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",value:d,onChange:de=>f(de.target.value),placeholder:"0.00",className:"text-3xl font-bold text-black dark:text-white w-full focus:outline-none bg-white dark:bg-zinc-900 placeholder-gray-300 dark:placeholder-zinc-600 appearance-none",autoFocus:!0})]})]}),E.jsxs("div",{className:"flex justify-between items-center text-sm font-medium px-1",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Distributed"}),E.jsxs("span",{className:"text-gray-900 dark:text-white",children:["$",ee.toFixed(2)]})]}),E.jsxs("div",{className:"flex flex-col items-end",children:[E.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Remaining"}),E.jsxs("span",{className:`text-lg ${x===0?"text-green-600 dark:text-green-400":x<0?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:["$",x.toFixed(2)]})]})]}),!I&&te>0&&E.jsx("div",{className:"text-center text-sm font-medium text-red-500 dark:text-red-400",children:x>0?`You still have $${x.toFixed(2)} to distribute`:`You have over-allocated by $${Math.abs(x).toFixed(2)}`}),E.jsx("div",{className:"pt-2",children:M?E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("button",{onClick:()=>U(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[E.jsx(Sm,{size:16}),"Load Template"]}),E.jsxs("button",{onClick:()=>D(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 text-green-400 rounded-lg font-medium text-sm hover:bg-gray-700 transition-colors",children:[E.jsx(U4,{size:16}),"Save Template"]})]}):E.jsxs("div",{className:"flex flex-col gap-3",children:[E.jsxs("button",{onClick:()=>U(!0),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[E.jsx(Sm,{size:16}),"Load Template"]}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center px-2 leading-relaxed",children:"You can save this as a template once the Deposit Amount and Total Distributed are equal (Remaining = $0)."})]})}),E.jsx("input",{type:"text",placeholder:"Distribution Note (Optional)",value:_,onChange:de=>S(de.target.value),className:"w-full p-3 text-sm bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:outline-none text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600"})]}),E.jsx("div",{className:"p-4 space-y-3",children:X.filter(de=>de.id).map(de=>{const H=de.id,re=g[H]||0,ue=ee>0?Math.round(re/ee*100):0;return E.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex items-center justify-between",children:[E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:de.name}),re>0&&E.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:[ue,"%"]})]}),E.jsxs("div",{className:"text-xs text-gray-400 dark:text-zinc-400",children:["Balance: $",h(de.id).toNumber().toFixed(2)]})]}),E.jsxs("div",{className:"w-32 relative",children:[E.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",value:g[H]===0?"":g[H],onChange:xe=>k(H,xe.target.value),placeholder:"0",className:"w-full pl-6 pr-6 py-2 text-right bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 outline-none font-mono text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600 appearance-none"})]})]},H)})})]}),R&&E.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-gray-200 dark:border-zinc-700",children:[E.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Save Template"}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Name your template to easily recall this distribution later."}),E.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g. Payday Split",value:B,onChange:de=>O(de.target.value),className:"w-full p-3 bg-gray-100 dark:bg-black rounded-xl mb-4 text-gray-900 dark:text-white border border-transparent focus:border-blue-500 outline-none"}),E.jsxs("div",{className:"flex gap-3",children:[E.jsx("button",{onClick:()=>D(!1),className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-semibold",children:"Cancel"}),E.jsx("button",{onClick:P,disabled:!B.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold disabled:opacity-50",children:"Save"})]})]})}),N&&E.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-end sm:items-center justify-center sm:p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-t-2xl sm:rounded-2xl shadow-2xl border-t sm:border border-gray-200 dark:border-zinc-700 max-h-[80vh] flex flex-col",children:[E.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-zinc-800 flex justify-between items-center",children:[E.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Load Template"}),E.jsx("button",{onClick:()=>U(!1),className:"p-1 rounded-full bg-gray-100 dark:bg-zinc-800 text-gray-500",children:E.jsx(n_,{size:20})})]}),E.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:s.length===0?E.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No templates saved yet."}):s.map(de=>E.jsxs("div",{className:"flex items-center gap-2 p-3 hover:bg-gray-50 dark:hover:bg-zinc-800/50 rounded-xl group transition-colors",children:[E.jsxs("button",{onClick:()=>Ce(de),className:"flex-1 text-left",children:[E.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:de.name}),E.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: $",Object.values(de.distributions).reduce((H,re)=>H+re,0).toFixed(2),de.note&&E.jsxs("span",{className:"ml-2 opacity-75",children:[" ",de.note]})]})]}),E.jsx("button",{onClick:H=>{H.stopPropagation(),confirm("Delete this template?")&&l(de.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:E.jsx(xm,{size:18})})]},de.id))})]})})]}):null},bU=()=>{const[n,e]=L.useState(!1),t=L.useRef(null),{currentUser:i,logout:s}=bc(),{handleUserLogout:o}=Je(),l=ba();L.useEffect(()=>{const f=g=>{t.current&&!t.current.contains(g.target)&&e(!1)};if(n)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[n]);const h=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{o(),s(),l("/"),e(!1)}catch(f){console.error("Logout failed:",f)}};if(!i)return null;const d=i.displayName?.charAt(0)?.toUpperCase()||i.username?.charAt(0)?.toUpperCase()||"U";return E.jsxs("div",{className:"relative",ref:t,children:[E.jsxs("button",{onClick:()=>e(!n),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[E.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:d}),E.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:i.displayName||i.username}),E.jsx(a4,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${n?"rotate-180":""}`})]}),n&&E.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[E.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:d}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:i.displayName||i.username}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:i.username})]})]})}),E.jsxs("div",{className:"py-1",children:[E.jsxs("button",{onClick:()=>{l("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[E.jsx(q4,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),E.jsxs("button",{onClick:h,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[E.jsx(O4,{size:18}),"Log Out"]})]})]})]})},TU=()=>{const{envelopes:n,transactions:e,fetchData:t,isOnline:i,pendingSync:s,syncData:o,isLoading:l,getEnvelopeBalance:h,testingConnectivity:d}=Je(),[f,g]=L.useState(!1),v=ba();L.useEffect(()=>{n.length===0&&t()},[]);const _=[...n].sort((R,D)=>R.name.localeCompare(D.name));console.log(" EnvelopeListView render - calculating balances"),console.log(" Current envelopes:",n.length),console.log(" Current transactions:",e.length);const S=n.reduce((R,D)=>{const N=h(D.id);return console.log(` Envelope ${D.name} (${D.id}): $${N.toNumber().toFixed(2)}`),R+N.toNumber()},0);return console.log(" Total balance:",S),E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-10",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("div",{className:"flex items-center gap-2",children:i?l?E.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[E.jsx(U0,{size:16,className:"animate-spin"}),E.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):s?E.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[E.jsx(U0,{size:16}),E.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):E.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[E.jsx(tP,{size:16}),E.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):E.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[E.jsx(J4,{size:16}),E.jsx("span",{className:"text-sm font-medium",children:d?"Testing Connection...":l?"Offline (Saving...)":"Offline"})]})}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("button",{onClick:()=>v("/transactions"),className:"text-blue-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Transaction History",children:E.jsx(k4,{size:22})}),E.jsx(bU,{})]})]}),E.jsx("div",{className:"mt-4",children:E.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"House Expenses"})})]}),E.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[E.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 space-y-4",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("span",{className:"text-gray-600 dark:text-zinc-400 font-medium",children:"Total Balance"}),E.jsxs("span",{className:`text-2xl font-bold ${S>=0?"text-green-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[S<0?"-":"","$",Math.abs(S).toFixed(2)]})]}),E.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-50 dark:bg-blue-900/40 text-blue-600 dark:text-blue-300 py-3 rounded-xl font-semibold active:bg-blue-100 dark:active:bg-blue-900/60 transition-colors",children:[E.jsx(D4,{size:20,className:"rotate-90"}),"Distribute Funds"]})]}),E.jsx("section",{children:_.length===0?E.jsxs("div",{className:"text-center py-10 space-y-3",children:[E.jsx(W4,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto"}),E.jsx("h3",{className:"text-gray-500 dark:text-zinc-400 font-medium",children:"No envelopes yet"}),E.jsx("button",{onClick:()=>v("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium",children:"Create First Envelope"})]}):E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{className:"flex justify-between items-end px-1",children:[E.jsx("h2",{className:"text-sm font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-wider",children:"My Envelopes"}),E.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-300 font-medium",onClick:()=>v("/add-envelope"),children:"+ New Envelope"})]}),_.map(R=>E.jsxs("div",{onClick:()=>v(`/envelope/${R.id}`),className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex justify-between items-center active:scale-[0.99] transition-transform cursor-pointer",children:[E.jsx("div",{className:"flex flex-col",children:E.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:R.name})}),E.jsxs("span",{className:`font-bold ${h(R.id).toNumber()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-emerald-400"}`,children:[h(R.id).toNumber()<0?"-":"","$",Math.abs(h(R.id).toNumber()).toFixed(2)]})]},R.id))]})})]}),E.jsx("button",{onClick:()=>v("/add-transaction"),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",children:E.jsx(g4,{size:28})}),E.jsx(_U,{isOpen:f,onClose:()=>g(!1)})]})},gb=i_((n,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(t,i="neutral",s)=>{n({message:t,type:i,isVisible:!0,undoAction:s}),setTimeout(()=>{e().hideToast()},4e3)},hideToast:()=>{n({isVisible:!1})}})),tD=({isVisible:n,onClose:e,mode:t,currentEnvelope:i,initialTransaction:s})=>{const{addToEnvelope:o,spendFromEnvelope:l,updateTransaction:h,deleteTransaction:d}=Je(),[f,g]=L.useState(""),[v,_]=L.useState(""),[S,R]=L.useState(new Date().toISOString().split("T")[0]);if(L.useEffect(()=>{if(!n)return;const O=window.setTimeout(()=>{if(t==="edit"&&s){g(s.amount.toString()),_(s.description);try{const X=new Date(s.date);isNaN(X.getTime())?(console.warn("Invalid date in transaction:",s.date),R(new Date().toISOString().split("T")[0])):R(X.toISOString().split("T")[0])}catch(X){console.error("Error parsing transaction date:",X),R(new Date().toISOString().split("T")[0])}}else g(""),_(""),R(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(O)},[n,t,s]),!n)return null;const D=O=>{O.preventDefault();const X=parseFloat(f);isNaN(X)||X<=0||(t==="add"?o(i.id,X,v,new Date(S)):t==="spend"?l(i.id,X,v,new Date(S)):t==="edit"&&s&&h({...s,amount:X,description:v,date:new Date(S).toISOString()}),e())},N=()=>{!s||!s.id||window.confirm("Are you sure you want to delete this transaction?")&&(d(s.id),e())},U=t==="add"?"Add Money":t==="spend"?"Spend Money":"Edit Transaction",B=t==="add"?"text-green-500":"text-red-500";return E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[E.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[E.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),E.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:U}),E.jsx("button",{onClick:D,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0,children:"Save"})]}),E.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),E.jsxs("div",{className:"relative inline-block",children:[E.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${B}`,children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:f,onChange:O=>{const X=O.target.value;(X===""||!isNaN(parseFloat(X))&&parseFloat(X)>=0)&&g(X)},onKeyDown:O=>{(O.key==="e"||O.key==="E"||O.key==="+"||O.key==="-")&&O.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${B} placeholder-gray-700`})]})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),E.jsx("input",{type:"text",value:v,onChange:O=>_(O.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),E.jsx("input",{type:"date",value:S,onChange:O=>{console.log("Date changed to:",O.target.value),R(O.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),t==="edit"&&E.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:E.jsxs("button",{type:"button",onClick:N,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[E.jsx(EI,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},EU=({isVisible:n,onClose:e,sourceEnvelope:t})=>{const{envelopes:i,transferFunds:s}=Je(),[o,l]=L.useState(""),[h,d]=L.useState(""),[f,g]=L.useState(""),[v,_]=L.useState(new Date().toISOString().split("T")[0]),S=i.filter(N=>N.id!==t.id);if(L.useEffect(()=>{if(!n)return;const N=window.setTimeout(()=>{l(""),d(""),g(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(N)},[n]),!n)return null;const R=N=>{N.preventDefault();const U=parseFloat(h);isNaN(U)||U<=0||!o||(s(t.id,o,U,f,new Date(v)),e())},D=i.find(N=>N.id===o);return E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[E.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[E.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),E.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),E.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!h||parseFloat(h)<=0||!o,children:"Transfer"})]}),E.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),E.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.name})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),E.jsxs("select",{value:o,onChange:N=>l(N.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[E.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),S.map(N=>E.jsx("option",{value:N.id,className:"bg-white dark:bg-zinc-900",children:N.name},N.id))]})]}),E.jsxs("div",{className:"text-center",children:[E.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),E.jsxs("div",{className:"relative inline-block",children:[E.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:h,onChange:N=>d(N.target.value),onKeyDown:N=>{(N.key==="e"||N.key==="E"||N.key==="+"||N.key==="-")&&N.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),E.jsx("input",{type:"text",value:f,onChange:N=>g(N.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),E.jsx("input",{type:"date",value:v,onChange:N=>_(N.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),D&&h&&parseFloat(h)>0&&E.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",E.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(h).toFixed(2)]})," from"," ",E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t.name})," to"," ",E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:D.name})]})]})]})})},wU=n=>{if(!n)return"No Date";try{let e;return n&&typeof n=="object"&&n.toDate&&typeof n.toDate=="function"?e=n.toDate():typeof n=="number"?n<1e10?e=new Date((n+978307200)*1e3):e=new Date(n):e=new Date(n),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},SU=n=>{const e=typeof n=="string"?parseFloat(n):n;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},nD=({transaction:n,envelopeName:e,onReconcile:t,onEdit:i})=>{if(!n)return null;const s=n.type==="Income",o=n.type==="Expense";let l="text-gray-900 dark:text-white";return s&&(l="text-green-600 dark:text-green-400"),o&&(l="text-red-600 dark:text-red-400"),E.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[E.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:n.description||"No Description"}),n.reconciled&&E.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),E.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[E.jsx("span",{children:wU(n.date)}),e&&E.jsxs(E.Fragment,{children:[E.jsx("span",{children:""}),E.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${l}`,children:[o?"-":s?"+":"",SU(n.amount)]}),t?E.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),t()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":n.reconciled?"Mark as unreconciled":"Mark as reconciled",children:n.reconciled?E.jsx(Lw,{className:"text-green-500",size:20}):E.jsx(jw,{className:"text-gray-400",size:20})}):E.jsx("span",{children:n.reconciled?E.jsx(Lw,{className:"text-green-500",size:20}):E.jsx(jw,{className:"text-gray-400",size:20})})]})]})},yb=L.createContext({});function Hp(n){const e=L.useRef(null);return e.current===null&&(e.current=n()),e.current}const vb=typeof window<"u",_b=vb?L.useLayoutEffect:L.useEffect,Gp=L.createContext(null);function bb(n,e){n.indexOf(e)===-1&&n.push(e)}function Tb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const as=(n,e,t)=>t>e?e:t<n?n:t;let Eb=()=>{};const os={},iD=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function rD(n){return typeof n=="object"&&n!==null}const sD=n=>/^0[^.\s]+$/u.test(n);function wb(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ei=n=>n,xU=(n,e)=>t=>e(n(t)),sd=(...n)=>n.reduce(xU),Lh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class Sb{constructor(){this.subscriptions=[]}add(e){return bb(this.subscriptions,e),()=>Tb(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const br=n=>n*1e3,bi=n=>n/1e3;function aD(n,e){return e?n*(1e3/e):0}const oD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,AU=1e-7,IU=12;function RU(n,e,t,i,s){let o,l,h=0;do l=e+(t-e)/2,o=oD(l,i,s)-n,o>0?t=l:e=l;while(Math.abs(o)>AU&&++h<IU);return l}function ad(n,e,t,i){if(n===e&&t===i)return Ei;const s=o=>RU(o,0,1,n,t);return o=>o===0||o===1?o:oD(s(o),e,i)}const lD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,cD=n=>e=>1-n(1-e),uD=ad(.33,1.53,.69,.99),xb=cD(uD),hD=lD(xb),dD=n=>(n*=2)<1?.5*xb(n):.5*(2-Math.pow(2,-10*(n-1))),Ab=n=>1-Math.sin(Math.acos(n)),fD=cD(Ab),mD=lD(Ab),CU=ad(.42,0,1,1),DU=ad(0,0,.58,1),pD=ad(.42,0,.58,1),NU=n=>Array.isArray(n)&&typeof n[0]!="number",gD=n=>Array.isArray(n)&&typeof n[0]=="number",kU={linear:Ei,easeIn:CU,easeInOut:pD,easeOut:DU,circIn:Ab,circInOut:mD,circOut:fD,backIn:xb,backInOut:hD,backOut:uD,anticipate:dD},VU=n=>typeof n=="string",qx=n=>{if(gD(n)){Eb(n.length===4);const[e,t,i,s]=n;return ad(e,t,i,s)}else if(VU(n))return kU[n];return n},Yf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function MU(n,e){let t=new Set,i=new Set,s=!1,o=!1;const l=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(f.schedule(g),n()),g(h)}const f={schedule:(g,v=!1,_=!1)=>{const R=_&&s?t:i;return v&&l.add(g),R.has(g)||R.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(h=g,s){o=!0;return}s=!0,[t,i]=[i,t],t.forEach(d),t.clear(),s=!1,o&&(o=!1,f.process(g))}};return f}const PU=40;function yD(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=Yf.reduce((O,X)=>(O[X]=MU(o),O),{}),{setup:h,read:d,resolveKeyframes:f,preUpdate:g,update:v,preRender:_,render:S,postRender:R}=l,D=()=>{const O=os.useManualTiming?s.timestamp:performance.now();t=!1,os.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(O-s.timestamp,PU),1)),s.timestamp=O,s.isProcessing=!0,h.process(s),d.process(s),f.process(s),g.process(s),v.process(s),_.process(s),S.process(s),R.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(D))},N=()=>{t=!0,i=!0,s.isProcessing||n(D)};return{schedule:Yf.reduce((O,X)=>{const te=l[X];return O[X]=(ee,x=!1,I=!1)=>(t||N(),te.schedule(ee,x,I)),O},{}),cancel:O=>{for(let X=0;X<Yf.length;X++)l[Yf[X]].cancel(O)},state:s,steps:l}}const{schedule:Et,cancel:ya,state:mn,steps:E0}=yD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ei,!0);let _m;function OU(){_m=void 0}const Fn={now:()=>(_m===void 0&&Fn.set(mn.isProcessing||os.useManualTiming?mn.timestamp:performance.now()),_m),set:n=>{_m=n,queueMicrotask(OU)}},vD=n=>e=>typeof e=="string"&&e.startsWith(n),Ib=vD("--"),LU=vD("var(--"),Rb=n=>LU(n)?jU.test(n.split("/*")[0].trim()):!1,jU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Vc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},jh={...Vc,transform:n=>as(0,1,n)},Xf={...Vc,default:1},dh=n=>Math.round(n*1e5)/1e5,Cb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function UU(n){return n==null}const zU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Db=(n,e)=>t=>!!(typeof t=="string"&&zU.test(t)&&t.startsWith(n)||e&&!UU(t)&&Object.prototype.hasOwnProperty.call(t,e)),_D=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,o,l,h]=i.match(Cb);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:h!==void 0?parseFloat(h):1}},BU=n=>as(0,255,n),w0={...Vc,transform:n=>Math.round(BU(n))},yo={test:Db("rgb","red"),parse:_D("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+w0.transform(n)+", "+w0.transform(e)+", "+w0.transform(t)+", "+dh(jh.transform(i))+")"};function FU(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Rv={test:Db("#"),parse:FU,transform:yo.transform},od=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Xs=od("deg"),Tr=od("%"),Re=od("px"),qU=od("vh"),HU=od("vw"),Hx={...Tr,parse:n=>Tr.parse(n)/100,transform:n=>Tr.transform(n*100)},Hl={test:Db("hsl","hue"),parse:_D("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Tr.transform(dh(e))+", "+Tr.transform(dh(t))+", "+dh(jh.transform(i))+")"},Yt={test:n=>yo.test(n)||Rv.test(n)||Hl.test(n),parse:n=>yo.test(n)?yo.parse(n):Hl.test(n)?Hl.parse(n):Rv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?yo.transform(n):Hl.transform(n),getAnimatableNone:n=>{const e=Yt.parse(n);return e.alpha=0,Yt.transform(e)}},GU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $U(n){return isNaN(n)&&typeof n=="string"&&(n.match(Cb)?.length||0)+(n.match(GU)?.length||0)>0}const bD="number",TD="color",KU="var",QU="var(",Gx="${}",YU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Uh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let o=0;const h=e.replace(YU,d=>(Yt.test(d)?(i.color.push(o),s.push(TD),t.push(Yt.parse(d))):d.startsWith(QU)?(i.var.push(o),s.push(KU),t.push(d)):(i.number.push(o),s.push(bD),t.push(parseFloat(d))),++o,Gx)).split(Gx);return{values:t,split:h,indexes:i,types:s}}function ED(n){return Uh(n).values}function wD(n){const{split:e,types:t}=Uh(n),i=e.length;return s=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],s[l]!==void 0){const h=t[l];h===bD?o+=dh(s[l]):h===TD?o+=Yt.transform(s[l]):o+=s[l]}return o}}const XU=n=>typeof n=="number"?0:Yt.test(n)?Yt.getAnimatableNone(n):n;function WU(n){const e=ED(n);return wD(n)(e.map(XU))}const va={test:$U,parse:ED,createTransformer:wD,getAnimatableNone:WU};function S0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function ZU({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const h=t<.5?t*(1+e):t+e-t*e,d=2*t-h;s=S0(d,h,n+1/3),o=S0(d,h,n),l=S0(d,h,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function tp(n,e){return t=>t>0?e:n}const xt=(n,e,t)=>n+(e-n)*t,x0=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},JU=[Rv,yo,Hl],ez=n=>JU.find(e=>e.test(n));function $x(n){const e=ez(n);if(!e)return!1;let t=e.parse(n);return e===Hl&&(t=ZU(t)),t}const Kx=(n,e)=>{const t=$x(n),i=$x(e);if(!t||!i)return tp(n,e);const s={...t};return o=>(s.red=x0(t.red,i.red,o),s.green=x0(t.green,i.green,o),s.blue=x0(t.blue,i.blue,o),s.alpha=xt(t.alpha,i.alpha,o),yo.transform(s))},Cv=new Set(["none","hidden"]);function tz(n,e){return Cv.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function nz(n,e){return t=>xt(n,e,t)}function Nb(n){return typeof n=="number"?nz:typeof n=="string"?Rb(n)?tp:Yt.test(n)?Kx:sz:Array.isArray(n)?SD:typeof n=="object"?Yt.test(n)?Kx:iz:tp}function SD(n,e){const t=[...n],i=t.length,s=n.map((o,l)=>Nb(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)t[l]=s[l](o);return t}}function iz(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=Nb(n[s])(n[s],e[s]));return s=>{for(const o in i)t[o]=i[o](s);return t}}function rz(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][i[o]],h=n.values[l]??0;t[s]=h,i[o]++}return t}const sz=(n,e)=>{const t=va.createTransformer(e),i=Uh(n),s=Uh(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Cv.has(n)&&!s.values.length||Cv.has(e)&&!i.values.length?tz(n,e):sd(SD(rz(i,s),s.values),t):tp(n,e)};function xD(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?xt(n,e,t):Nb(n)(n,e)}const az=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Et.update(e,t),stop:()=>ya(e),now:()=>mn.isProcessing?mn.timestamp:Fn.now()}},AD=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)i+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},np=2e4;function kb(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<np;)e+=t,i=n.next(e);return e>=np?1/0:e}function oz(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(kb(i),np);return{type:"keyframes",ease:o=>i.next(s*o).value/e,duration:bi(s)}}const lz=5;function ID(n,e,t){const i=Math.max(e-lz,0);return aD(t-n(i),e-i)}const Ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},A0=.001;function cz({duration:n=Ct.duration,bounce:e=Ct.bounce,velocity:t=Ct.velocity,mass:i=Ct.mass}){let s,o,l=1-e;l=as(Ct.minDamping,Ct.maxDamping,l),n=as(Ct.minDuration,Ct.maxDuration,bi(n)),l<1?(s=f=>{const g=f*l,v=g*n,_=g-t,S=Dv(f,l),R=Math.exp(-v);return A0-_/S*R},o=f=>{const v=f*l*n,_=v*t+t,S=Math.pow(l,2)*Math.pow(f,2)*n,R=Math.exp(-v),D=Dv(Math.pow(f,2),l);return(-s(f)+A0>0?-1:1)*((_-S)*R)/D}):(s=f=>{const g=Math.exp(-f*n),v=(f-t)*n+1;return-A0+g*v},o=f=>{const g=Math.exp(-f*n),v=(t-f)*(n*n);return g*v});const h=5/n,d=hz(s,o,h);if(n=br(n),isNaN(d))return{stiffness:Ct.stiffness,damping:Ct.damping,duration:n};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:n}}}const uz=12;function hz(n,e,t){let i=t;for(let s=1;s<uz;s++)i=i-n(i)/e(i);return i}function Dv(n,e){return n*Math.sqrt(1-e*e)}const dz=["duration","bounce"],fz=["stiffness","damping","mass"];function Qx(n,e){return e.some(t=>n[t]!==void 0)}function mz(n){let e={velocity:Ct.velocity,stiffness:Ct.stiffness,damping:Ct.damping,mass:Ct.mass,isResolvedFromDuration:!1,...n};if(!Qx(n,fz)&&Qx(n,dz))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,o=2*as(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Ct.mass,stiffness:s,damping:o}}else{const t=cz(n);e={...e,...t,mass:Ct.mass},e.isResolvedFromDuration=!0}return e}function ip(n=Ct.visualDuration,e=Ct.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],h={done:!1,value:o},{stiffness:d,damping:f,mass:g,duration:v,velocity:_,isResolvedFromDuration:S}=mz({...t,velocity:-bi(t.velocity||0)}),R=_||0,D=f/(2*Math.sqrt(d*g)),N=l-o,U=bi(Math.sqrt(d/g)),B=Math.abs(N)<5;i||(i=B?Ct.restSpeed.granular:Ct.restSpeed.default),s||(s=B?Ct.restDelta.granular:Ct.restDelta.default);let O;if(D<1){const te=Dv(U,D);O=ee=>{const x=Math.exp(-D*U*ee);return l-x*((R+D*U*N)/te*Math.sin(te*ee)+N*Math.cos(te*ee))}}else if(D===1)O=te=>l-Math.exp(-U*te)*(N+(R+U*N)*te);else{const te=U*Math.sqrt(D*D-1);O=ee=>{const x=Math.exp(-D*U*ee),I=Math.min(te*ee,300);return l-x*((R+D*U*N)*Math.sinh(I)+te*N*Math.cosh(I))/te}}const X={calculatedDuration:S&&v||null,next:te=>{const ee=O(te);if(S)h.done=te>=v;else{let x=te===0?R:0;D<1&&(x=te===0?br(R):ID(O,te,ee));const I=Math.abs(x)<=i,V=Math.abs(l-ee)<=s;h.done=I&&V}return h.value=h.done?l:ee,h},toString:()=>{const te=Math.min(kb(X),np),ee=AD(x=>X.next(te*x).value,te,30);return te+"ms "+ee},toTransition:()=>{}};return X}ip.applyToOptions=n=>{const e=oz(n,100,ip);return n.ease=e.ease,n.duration=br(e.duration),n.type="keyframes",n};function Nv({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:h,max:d,restDelta:f=.5,restSpeed:g}){const v=n[0],_={done:!1,value:v},S=I=>h!==void 0&&I<h||d!==void 0&&I>d,R=I=>h===void 0?d:d===void 0||Math.abs(h-I)<Math.abs(d-I)?h:d;let D=t*e;const N=v+D,U=l===void 0?N:l(N);U!==N&&(D=U-v);const B=I=>-D*Math.exp(-I/i),O=I=>U+B(I),X=I=>{const V=B(I),M=O(I);_.done=Math.abs(V)<=f,_.value=_.done?U:M};let te,ee;const x=I=>{S(_.value)&&(te=I,ee=ip({keyframes:[_.value,R(_.value)],velocity:ID(O,I,_.value),damping:s,stiffness:o,restDelta:f,restSpeed:g}))};return x(0),{calculatedDuration:null,next:I=>{let V=!1;return!ee&&te===void 0&&(V=!0,X(I),x(I)),te!==void 0&&I>=te?ee.next(I-te):(!V&&X(I),_)}}}function pz(n,e,t){const i=[],s=t||os.mix||xD,o=n.length-1;for(let l=0;l<o;l++){let h=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Ei:e;h=sd(d,h)}i.push(h)}return i}function gz(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const o=n.length;if(Eb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=pz(e,i,s),d=h.length,f=g=>{if(l&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const _=Lh(n[v],n[v+1],g);return h[v](_)};return t?g=>f(as(n[0],n[o-1],g)):f}function yz(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=Lh(0,e,i);n.push(xt(t,1,s))}}function vz(n){const e=[0];return yz(e,n.length-1),e}function _z(n,e){return n.map(t=>t*e)}function bz(n,e){return n.map(()=>e||pD).splice(0,n.length-1)}function fh({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=NU(i)?i.map(qx):qx(i),o={done:!1,value:e[0]},l=_z(t&&t.length===e.length?t:vz(e),n),h=gz(l,e,{ease:Array.isArray(s)?s:bz(e,s)});return{calculatedDuration:n,next:d=>(o.value=h(d),o.done=d>=n,o)}}const Tz=n=>n!==null;function Vb(n,{repeat:e,repeatType:t="loop"},i,s=1){const o=n.filter(Tz),h=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!h||i===void 0?o[h]:i}const Ez={decay:Nv,inertia:Nv,tween:fh,keyframes:fh,spring:ip};function RD(n){typeof n.type=="string"&&(n.type=Ez[n.type])}class Mb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const wz=n=>n/100;class Pb extends Mb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Fn.now()&&this.tick(Fn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;RD(e);const{type:t=fh,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:h}=e;const d=t||fh;d!==fh&&typeof h[0]!="number"&&(this.mixKeyframes=sd(wz,xD(h[0],h[1])),h=[0,100]);const f=d({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=kb(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:v,repeatType:_,repeatDelay:S,type:R,onUpdate:D,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const U=this.currentTime-f*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?U<0:U>s;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let O=this.currentTime,X=i;if(v){const I=Math.min(this.currentTime,s)/h;let V=Math.floor(I),M=I%1;!M&&I>=1&&(M=1),M===1&&V--,V=Math.min(V,v+1),!!(V%2)&&(_==="reverse"?(M=1-M,S&&(M-=S/h)):_==="mirror"&&(X=l)),O=as(0,1,M)*h}const te=B?{done:!1,value:g[0]}:X.next(O);o&&(te.value=o(te.value));let{done:ee}=te;!B&&d!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return x&&R!==Nv&&(te.value=Vb(g,this.options,N,this.speed)),D&&D(te.value),x&&this.finish(),te}then(e,t){return this.finished.then(e,t)}get duration(){return bi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+bi(e)}get time(){return bi(this.currentTime)}set time(e){e=br(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Fn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=bi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=az,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Sz(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const vo=n=>n*180/Math.PI,kv=n=>{const e=vo(Math.atan2(n[1],n[0]));return Vv(e)},xz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:kv,rotateZ:kv,skewX:n=>vo(Math.atan(n[1])),skewY:n=>vo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Vv=n=>(n=n%360,n<0&&(n+=360),n),Yx=kv,Xx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Wx=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Az={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Xx,scaleY:Wx,scale:n=>(Xx(n)+Wx(n))/2,rotateX:n=>Vv(vo(Math.atan2(n[6],n[5]))),rotateY:n=>Vv(vo(Math.atan2(-n[2],n[0]))),rotateZ:Yx,rotate:Yx,skewX:n=>vo(Math.atan(n[4])),skewY:n=>vo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Mv(n){return n.includes("scale")?1:0}function Pv(n,e){if(!n||n==="none")return Mv(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=Az,s=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=xz,s=h}if(!s)return Mv(e);const o=i[e],l=s[1].split(",").map(Rz);return typeof o=="function"?o(l):l[o]}const Iz=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Pv(t,e)};function Rz(n){return parseFloat(n.trim())}const Mc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Pc=new Set(Mc),Zx=n=>n===Vc||n===Re,Cz=new Set(["x","y","z"]),Dz=Mc.filter(n=>!Cz.has(n));function Nz(n){const e=[];return Dz.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const xo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Pv(e,"x"),y:(n,{transform:e})=>Pv(e,"y")};xo.translateX=xo.x;xo.translateY=xo.y;const Ao=new Set;let Ov=!1,Lv=!1,jv=!1;function CD(){if(Lv){const n=Array.from(Ao).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=Nz(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([o,l])=>{i.getValue(o)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Lv=!1,Ov=!1,Ao.forEach(n=>n.complete(jv)),Ao.clear()}function DD(){Ao.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Lv=!0)})}function kz(){jv=!0,DD(),CD(),jv=!1}class Ob{constructor(e,t,i,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Ao.add(this),Ov||(Ov=!0,Et.read(DD),Et.resolveKeyframes(CD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const h=i.readValue(t,l);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}Sz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ao.delete(this)}cancel(){this.state==="scheduled"&&(Ao.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Vz=n=>n.startsWith("--");function Mz(n,e,t){Vz(e)?n.style.setProperty(e,t):n.style[e]=t}const Pz=wb(()=>window.ScrollTimeline!==void 0),Oz={};function Lz(n,e){const t=wb(n);return()=>Oz[e]??t()}const ND=Lz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),eh=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Jx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eh([0,.65,.55,1]),circOut:eh([.55,0,1,.45]),backIn:eh([.31,.01,.66,-.59]),backOut:eh([.33,1.53,.69,.99])};function kD(n,e){if(n)return typeof n=="function"?ND()?AD(n,e):"ease-out":gD(n)?eh(n):Array.isArray(n)?n.map(t=>kD(t,e)||Jx.easeOut):Jx[n]}function jz(n,e,t,{delay:i=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:h="easeOut",times:d}={},f=void 0){const g={[e]:t};d&&(g.offset=d);const v=kD(h,s);Array.isArray(v)&&(g.easing=v);const _={delay:i,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),n.animate(g,_)}function VD(n){return typeof n=="function"&&"applyToOptions"in n}function Uz({type:n,...e}){return VD(n)&&ND()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class zz extends Mb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,Eb(typeof e.type!="string");const f=Uz(e);this.animation=jz(t,i,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Vb(s,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):Mz(t,i,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return bi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+bi(e)}get time(){return bi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=br(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Pz()?(this.animation.timeline=e,Ei):t(this)}}const MD={anticipate:dD,backInOut:hD,circInOut:mD};function Bz(n){return n in MD}function Fz(n){typeof n.ease=="string"&&Bz(n.ease)&&(n.ease=MD[n.ease])}const eA=10;class qz extends zz{constructor(e){Fz(e),RD(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new Pb({...l,autoplay:!1}),d=br(this.finishedTime??this.time);t.setWithVelocity(h.sample(d-eA).value,h.sample(d).value,eA),h.stop()}}const tA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(va.test(n)||n==="0")&&!n.startsWith("url("));function Hz(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Gz(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=tA(s,e),h=tA(o,e);return!l||!h?!1:Hz(n)||(t==="spring"||VD(t))&&i}function Uv(n){n.duration=0,n.type="keyframes"}const $z=new Set(["opacity","clipPath","filter","transform"]),Kz=wb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Qz(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:o,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return Kz()&&t&&$z.has(t)&&(t!=="transform"||!f)&&!d&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}const Yz=40;class Xz extends Mb{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:h,name:d,motionValue:f,element:g,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Fn.now();const _={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:o,repeatType:l,name:d,motionValue:f,element:g,...v},S=g?.KeyframeResolver||Ob;this.keyframeResolver=new S(h,(R,D,N)=>this.onKeyframesResolved(R,D,_,!N),d,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:h,delay:d,isHandoff:f,onUpdate:g}=i;this.resolvedAt=Fn.now(),Gz(e,o,l,h)||((os.instantAnimations||!d)&&g?.(Vb(e,i,t)),e[0]=e[e.length-1],Uv(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Yz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},S=!f&&Qz(_)?new qz({..._,element:_.motionValue.owner.current}):new Pb(_);S.finished.then(()=>this.notifyFinished()).catch(Ei),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),kz()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Wz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Zz(n){const e=Wz.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function PD(n,e,t=1){const[i,s]=Zz(n);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return iD(l)?parseFloat(l):l}return Rb(s)?PD(s,e,t+1):s}function Lb(n,e){return n?.[e]??n?.default??n}const OD=new Set(["width","height","top","left","right","bottom",...Mc]),Jz={test:n=>n==="auto",parse:n=>n},LD=n=>e=>e.test(n),jD=[Vc,Re,Tr,Xs,HU,qU,Jz],nA=n=>jD.find(LD(n));function e8(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||sD(n):!0}const t8=new Set(["brightness","contrast","saturate","opacity"]);function n8(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Cb)||[];if(!i)return n;const s=t.replace(i,"");let o=t8.has(e)?1:0;return i!==t&&(o*=100),e+"("+o+s+")"}const i8=/\b([a-z-]*)\(.*?\)/gu,zv={...va,getAnimatableNone:n=>{const e=n.match(i8);return e?e.map(n8).join(" "):n}},iA={...Vc,transform:Math.round},r8={rotate:Xs,rotateX:Xs,rotateY:Xs,rotateZ:Xs,scale:Xf,scaleX:Xf,scaleY:Xf,scaleZ:Xf,skew:Xs,skewX:Xs,skewY:Xs,distance:Re,translateX:Re,translateY:Re,translateZ:Re,x:Re,y:Re,z:Re,perspective:Re,transformPerspective:Re,opacity:jh,originX:Hx,originY:Hx,originZ:Re},jb={borderWidth:Re,borderTopWidth:Re,borderRightWidth:Re,borderBottomWidth:Re,borderLeftWidth:Re,borderRadius:Re,radius:Re,borderTopLeftRadius:Re,borderTopRightRadius:Re,borderBottomRightRadius:Re,borderBottomLeftRadius:Re,width:Re,maxWidth:Re,height:Re,maxHeight:Re,top:Re,right:Re,bottom:Re,left:Re,padding:Re,paddingTop:Re,paddingRight:Re,paddingBottom:Re,paddingLeft:Re,margin:Re,marginTop:Re,marginRight:Re,marginBottom:Re,marginLeft:Re,backgroundPositionX:Re,backgroundPositionY:Re,...r8,zIndex:iA,fillOpacity:jh,strokeOpacity:jh,numOctaves:iA},s8={...jb,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:zv,WebkitFilter:zv},UD=n=>s8[n];function zD(n,e){let t=UD(n);return t!==zv&&(t=va),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const a8=new Set(["auto","none","0"]);function o8(n,e,t){let i=0,s;for(;i<n.length&&!s;){const o=n[i];typeof o=="string"&&!a8.has(o)&&Uh(o).values.length&&(s=n[i]),i++}if(s&&t)for(const o of e)n[o]=zD(t,s)}class l8 extends Ob{constructor(e,t,i,s,o){super(e,t,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),Rb(f))){const g=PD(f,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!OD.has(i)||e.length!==2)return;const[s,o]=e,l=nA(s),h=nA(o);if(l!==h)if(Zx(l)&&Zx(h))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else xo[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||e8(e[s]))&&i.push(s);i.length&&o8(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xo[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=xo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,d])=>{e.getValue(h).set(d)}),this.resolveNoneKeyframes()}}function c8(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=t?.[n]??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const BD=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function FD(n){return rD(n)&&"offsetHeight"in n}const rA=30,u8=n=>!isNaN(parseFloat(n));class h8{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=Fn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Fn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=u8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Sb);const i=this.events[e].add(t);return e==="change"?()=>{i(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>rA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,rA);return aD(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tc(n,e){return new h8(n,e)}const{schedule:Ub}=yD(queueMicrotask,!1),Oi={x:!1,y:!1};function qD(){return Oi.x||Oi.y}function d8(n){return n==="x"||n==="y"?Oi[n]?null:(Oi[n]=!0,()=>{Oi[n]=!1}):Oi.x||Oi.y?null:(Oi.x=Oi.y=!0,()=>{Oi.x=Oi.y=!1})}function HD(n,e){const t=c8(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function sA(n){return!(n.pointerType==="touch"||qD())}function f8(n,e,t={}){const[i,s,o]=HD(n,t),l=h=>{if(!sA(h))return;const{target:d}=h,f=e(d,h);if(typeof f!="function"||!d)return;const g=v=>{sA(v)&&(f(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return i.forEach(h=>{h.addEventListener("pointerenter",l,s)}),o}const GD=(n,e)=>e?n===e?!0:GD(n,e.parentElement):!1,zb=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,m8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function p8(n){return m8.has(n.tagName)||n.tabIndex!==-1}const bm=new WeakSet;function aA(n){return e=>{e.key==="Enter"&&n(e)}}function I0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const g8=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=aA(()=>{if(bm.has(t))return;I0(t,"down");const s=aA(()=>{I0(t,"up")}),o=()=>I0(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function oA(n){return zb(n)&&!qD()}function y8(n,e,t={}){const[i,s,o]=HD(n,t),l=h=>{const d=h.currentTarget;if(!oA(h))return;bm.add(d);const f=e(d,h),g=(S,R)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),bm.has(d)&&bm.delete(d),oA(S)&&typeof f=="function"&&f(S,{success:R})},v=S=>{g(S,d===window||d===document||t.useGlobalTarget||GD(d,S.target))},_=S=>{g(S,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return i.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",l,s),FD(h)&&(h.addEventListener("focus",f=>g8(f,s)),!p8(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function $D(n){return rD(n)&&"ownerSVGElement"in n}function v8(n){return $D(n)&&n.tagName==="svg"}const wn=n=>!!(n&&n.getVelocity),_8=[...jD,Yt,va],b8=n=>_8.find(LD(n)),Bb=L.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function lA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function T8(...n){return e=>{let t=!1;const i=n.map(s=>{const o=lA(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():lA(n[s],null)}}}}function E8(...n){return L.useCallback(T8(...n),n)}class w8 extends L.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=FD(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function S8({children:n,isPresent:e,anchorX:t,root:i}){const s=L.useId(),o=L.useRef(null),l=L.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=L.useContext(Bb),d=E8(o,n?.ref);return L.useInsertionEffect(()=>{const{width:f,height:g,top:v,left:_,right:S}=l.current;if(e||!o.current||!f||!g)return;const R=t==="left"?`left: ${_}`:`right: ${S}`;o.current.dataset.motionPopId=s;const D=document.createElement("style");h&&(D.nonce=h);const N=i??document.head;return N.appendChild(D),D.sheet&&D.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${R}px !important;
            top: ${v}px !important;
          }
        `),()=>{N.contains(D)&&N.removeChild(D)}},[e]),E.jsx(w8,{isPresent:e,childRef:o,sizeRef:l,children:L.cloneElement(n,{ref:d})})}const x8=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:l,anchorX:h,root:d})=>{const f=Hp(A8),g=L.useId();let v=!0,_=L.useMemo(()=>(v=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:S=>{f.set(S,!0);for(const R of f.values())if(!R)return;i&&i()},register:S=>(f.set(S,!1),()=>f.delete(S))}),[t,f,i]);return o&&v&&(_={..._}),L.useMemo(()=>{f.forEach((S,R)=>f.set(R,!1))},[t]),L.useEffect(()=>{!t&&!f.size&&i&&i()},[t]),l==="popLayout"&&(n=E.jsx(S8,{isPresent:t,anchorX:h,root:d,children:n})),E.jsx(Gp.Provider,{value:_,children:n})};function A8(){return new Map}function KD(n=!0){const e=L.useContext(Gp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,o=L.useId();L.useEffect(()=>{if(n)return s(o)},[n]);const l=L.useCallback(()=>n&&i&&i(o),[o,i,n]);return!t&&i?[!1,l]:[!0]}const Wf=n=>n.key||"";function cA(n){const e=[];return L.Children.forEach(n,t=>{L.isValidElement(t)&&e.push(t)}),e}const Fb=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:h="left",root:d})=>{const[f,g]=KD(l),v=L.useMemo(()=>cA(n),[n]),_=l&&!f?[]:v.map(Wf),S=L.useRef(!0),R=L.useRef(v),D=Hp(()=>new Map),[N,U]=L.useState(v),[B,O]=L.useState(v);_b(()=>{S.current=!1,R.current=v;for(let ee=0;ee<B.length;ee++){const x=Wf(B[ee]);_.includes(x)?D.delete(x):D.get(x)!==!0&&D.set(x,!1)}},[B,_.length,_.join("-")]);const X=[];if(v!==N){let ee=[...v];for(let x=0;x<B.length;x++){const I=B[x],V=Wf(I);_.includes(V)||(ee.splice(x,0,I),X.push(I))}return o==="wait"&&X.length&&(ee=X),O(cA(ee)),U(v),null}const{forceRender:te}=L.useContext(yb);return E.jsx(E.Fragment,{children:B.map(ee=>{const x=Wf(ee),I=l&&!f?!1:v===B||_.includes(x),V=()=>{if(D.has(x))D.set(x,!0);else return;let M=!0;D.forEach(k=>{k||(M=!1)}),M&&(te?.(),O(R.current),l&&g?.(),i&&i())};return E.jsx(x8,{isPresent:I,initial:!S.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:I?void 0:V,anchorX:h,children:ee},x)})})},QD=L.createContext({strict:!1}),uA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ec={};for(const n in uA)Ec[n]={isEnabled:e=>uA[n].some(t=>!!e[t])};function I8(n){for(const e in n)Ec[e]={...Ec[e],...n[e]}}const R8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||R8.has(n)}let YD=n=>!rp(n);function C8(n){typeof n=="function"&&(YD=e=>e.startsWith("on")?!rp(e):n(e))}try{C8(require("@emotion/is-prop-valid").default)}catch{}function D8(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(YD(s)||t===!0&&rp(s)||!e&&!rp(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const $p=L.createContext({});function Kp(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function zh(n){return typeof n=="string"||Array.isArray(n)}const qb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Hb=["initial",...qb];function Qp(n){return Kp(n.animate)||Hb.some(e=>zh(n[e]))}function XD(n){return!!(Qp(n)||n.variants)}function N8(n,e){if(Qp(n)){const{initial:t,animate:i}=n;return{initial:t===!1||zh(t)?t:void 0,animate:zh(i)?i:void 0}}return n.inherit!==!1?e:{}}function k8(n){const{initial:e,animate:t}=N8(n,L.useContext($p));return L.useMemo(()=>({initial:e,animate:t}),[hA(e),hA(t)])}function hA(n){return Array.isArray(n)?n.join(" "):n}const Bh={};function V8(n){for(const e in n)Bh[e]=n[e],Ib(e)&&(Bh[e].isCSSVariable=!0)}function WD(n,{layout:e,layoutId:t}){return Pc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Bh[n]||n==="opacity")}const M8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},P8=Mc.length;function O8(n,e,t){let i="",s=!0;for(let o=0;o<P8;o++){const l=Mc[o],h=n[l];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(l.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||t){const f=BD(h,jb[l]);if(!d){s=!1;const g=M8[l]||l;i+=`${g}(${f}) `}t&&(e[l]=f)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function Gb(n,e,t){const{style:i,vars:s,transformOrigin:o}=n;let l=!1,h=!1;for(const d in e){const f=e[d];if(Pc.has(d)){l=!0;continue}else if(Ib(d)){s[d]=f;continue}else{const g=BD(f,jb[d]);d.startsWith("origin")?(h=!0,o[d]=g):i[d]=g}}if(e.transform||(l||t?i.transform=O8(e,n.transform,t):i.transform&&(i.transform="none")),h){const{originX:d="50%",originY:f="50%",originZ:g=0}=o;i.transformOrigin=`${d} ${f} ${g}`}}const $b=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ZD(n,e,t){for(const i in e)!wn(e[i])&&!WD(i,t)&&(n[i]=e[i])}function L8({transformTemplate:n},e){return L.useMemo(()=>{const t=$b();return Gb(t,e,n),Object.assign({},t.vars,t.style)},[e])}function j8(n,e){const t=n.style||{},i={};return ZD(i,t,n),Object.assign(i,L8(n,e)),i}function U8(n,e){const t={},i=j8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const z8={offset:"stroke-dashoffset",array:"stroke-dasharray"},B8={offset:"strokeDashoffset",array:"strokeDasharray"};function F8(n,e,t=1,i=0,s=!0){n.pathLength=1;const o=s?z8:B8;n[o.offset]=Re.transform(-i);const l=Re.transform(e),h=Re.transform(t);n[o.array]=`${l} ${h}`}function JD(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...h},d,f,g){if(Gb(n,h,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_}=n;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),s!==void 0&&F8(v,s,o,l,!1)}const eN=()=>({...$b(),attrs:{}}),tN=n=>typeof n=="string"&&n.toLowerCase()==="svg";function q8(n,e,t,i){const s=L.useMemo(()=>{const o=eN();return JD(o,e,tN(i),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};ZD(o,n.style,n),s.style={...o,...s.style}}return s}const H8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Kb(n){return typeof n!="string"||n.includes("-")?!1:!!(H8.indexOf(n)>-1||/[A-Z]/u.test(n))}function G8(n,e,t,{latestValues:i},s,o=!1){const h=(Kb(n)?q8:U8)(e,i,s,n),d=D8(e,typeof n=="string",o),f=n!==L.Fragment?{...d,...h,ref:t}:{},{children:g}=e,v=L.useMemo(()=>wn(g)?g.get():g,[g]);return L.createElement(n,{...f,children:v})}function dA(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Qb(n,e,t,i){if(typeof e=="function"){const[s,o]=dA(i);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=dA(i);e=e(t!==void 0?t:n.custom,s,o)}return e}function Tm(n){return wn(n)?n.get():n}function $8({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:K8(t,i,s,n),renderState:e()}}function K8(n,e,t,i){const s={},o=i(n,{});for(const _ in o)s[_]=Tm(o[_]);let{initial:l,animate:h}=n;const d=Qp(n),f=XD(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),h===void 0&&(h=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?h:l;if(v&&typeof v!="boolean"&&!Kp(v)){const _=Array.isArray(v)?v:[v];for(let S=0;S<_.length;S++){const R=Qb(n,_[S]);if(R){const{transitionEnd:D,transition:N,...U}=R;for(const B in U){let O=U[B];if(Array.isArray(O)){const X=g?O.length-1:0;O=O[X]}O!==null&&(s[B]=O)}for(const B in D)s[B]=D[B]}}}return s}const nN=n=>(e,t)=>{const i=L.useContext($p),s=L.useContext(Gp),o=()=>$8(n,e,i,s);return t?o():Hp(o)};function Yb(n,e,t){const{style:i}=n,s={};for(const o in i)(wn(i[o])||e.style&&wn(e.style[o])||WD(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const Q8=nN({scrapeMotionValuesFromProps:Yb,createRenderState:$b});function iN(n,e,t){const i=Yb(n,e,t);for(const s in n)if(wn(n[s])||wn(e[s])){const o=Mc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=n[s]}return i}const Y8=nN({scrapeMotionValuesFromProps:iN,createRenderState:eN}),X8=Symbol.for("motionComponentSymbol");function Gl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function W8(n,e,t){return L.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Gl(t)&&(t.current=i))},[e])}const Xb=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Z8="framerAppearId",rN="data-"+Xb(Z8),sN=L.createContext({});function J8(n,e,t,i,s){const{visualElement:o}=L.useContext($p),l=L.useContext(QD),h=L.useContext(Gp),d=L.useContext(Bb).reducedMotion,f=L.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:o,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,v=L.useContext(sN);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&eB(f.current,t,s,v);const _=L.useRef(!1);L.useInsertionEffect(()=>{g&&_.current&&g.update(t,h)});const S=t[rN],R=L.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return _b(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),R.current&&g.animationState&&g.animationState.animateChanges())}),L.useEffect(()=>{g&&(!R.current&&g.animationState&&g.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),R.current=!1),g.enteringChildren=void 0)}),g}function eB(n,e,t,i){const{layoutId:s,layout:o,drag:l,dragConstraints:h,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:aN(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||h&&Gl(h),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:d,layoutRoot:f})}function aN(n){if(n)return n.options.allowProjection!==!1?n.projection:aN(n.parent)}function R0(n,{forwardMotionProps:e=!1}={},t,i){t&&I8(t);const s=Kb(n)?Y8:Q8;function o(h,d){let f;const g={...L.useContext(Bb),...h,layoutId:tB(h)},{isStatic:v}=g,_=k8(h),S=s(h,v);if(!v&&vb){nB();const R=iB(g);f=R.MeasureLayout,_.visualElement=J8(n,S,g,i,R.ProjectionNode)}return E.jsxs($p.Provider,{value:_,children:[f&&_.visualElement?E.jsx(f,{visualElement:_.visualElement,...g}):null,G8(n,h,W8(S,_.visualElement,d),S,v,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=L.forwardRef(o);return l[X8]=n,l}function tB({layoutId:n}){const e=L.useContext(yb).id;return e&&n!==void 0?e+"-"+n:n}function nB(n,e){L.useContext(QD).strict}function iB(n){const{drag:e,layout:t}=Ec;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function rB(n,e){if(typeof Proxy>"u")return R0;const t=new Map,i=(o,l)=>R0(o,l,n,e),s=(o,l)=>i(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?i:(t.has(l)||t.set(l,R0(l,void 0,n,e)),t.get(l))})}function oN({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function sB({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function aB(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function C0(n){return n===void 0||n===1}function Bv({scale:n,scaleX:e,scaleY:t}){return!C0(n)||!C0(e)||!C0(t)}function uo(n){return Bv(n)||lN(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function lN(n){return fA(n.x)||fA(n.y)}function fA(n){return n&&n!=="0%"}function sp(n,e,t){const i=n-t,s=e*i;return t+s}function mA(n,e,t,i,s){return s!==void 0&&(n=sp(n,s,i)),sp(n,t,i)+e}function Fv(n,e=0,t=1,i,s){n.min=mA(n.min,e,t,i,s),n.max=mA(n.max,e,t,i,s)}function cN(n,{x:e,y:t}){Fv(n.x,e.translate,e.scale,e.originPoint),Fv(n.y,t.translate,t.scale,t.originPoint)}const pA=.999999999999,gA=1.0000000000001;function oB(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let h=0;h<s;h++){o=t[h],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Kl(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,cN(n,l)),i&&uo(o.latestValues)&&Kl(n,o.latestValues))}e.x<gA&&e.x>pA&&(e.x=1),e.y<gA&&e.y>pA&&(e.y=1)}function $l(n,e){n.min=n.min+e,n.max=n.max+e}function yA(n,e,t,i,s=.5){const o=xt(n.min,n.max,s);Fv(n,e,t,o,i)}function Kl(n,e){yA(n.x,e.x,e.scaleX,e.scale,e.originX),yA(n.y,e.y,e.scaleY,e.scale,e.originY)}function uN(n,e){return oN(aB(n.getBoundingClientRect(),e))}function lB(n,e,t){const i=uN(n,t),{scroll:s}=e;return s&&($l(i.x,s.offset.x),$l(i.y,s.offset.y)),i}const vA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ql=()=>({x:vA(),y:vA()}),_A=()=>({min:0,max:0}),Pt=()=>({x:_A(),y:_A()}),qv={current:null},hN={current:!1};function cB(){if(hN.current=!0,!!vb)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>qv.current=n.matches;n.addEventListener("change",e),e()}else qv.current=!1}const uB=new WeakMap;function hB(n,e,t){for(const i in e){const s=e[i],o=t[i];if(wn(s))n.addValue(i,s);else if(wn(o))n.addValue(i,Tc(s,{owner:n}));else if(o!==s)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,Tc(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const bA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dB{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ob,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Fn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Et.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=Qp(t),this.isVariantNode=XD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const S=v[_];d[_]!==void 0&&wn(S)&&S.set(d[_])}}mount(e){this.current=e,uB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),hN.current||cB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ya(this.notifyUpdate),ya(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Pc.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Et.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ec){const t=Ec[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<bA.length;i++){const s=bA[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=hB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Tc(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(iD(i)||sD(i))?i=parseFloat(i):!b8(i)&&va.test(t)&&(i=zD(e,t)),this.setBaseTarget(e,wn(i)?i.get():i)),wn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const o=Qb(this.props,t,this.presenceContext?.custom);o&&(i=o[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!wn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Sb),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Ub.render(this.render)}}class dN extends dB{constructor(){super(...arguments),this.KeyframeResolver=l8}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function fN(n,{style:e,vars:t},i,s){const o=n.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,i);for(l in t)o.setProperty(l,t[l])}function fB(n){return window.getComputedStyle(n)}class mB extends dN{constructor(){super(...arguments),this.type="html",this.renderInstance=fN}readValueFromInstance(e,t){if(Pc.has(t))return this.projection?.isProjecting?Mv(t):Iz(e,t);{const i=fB(e),s=(Ib(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return uN(e,t)}build(e,t,i){Gb(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Yb(e,t,i)}}const mN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pB(n,e,t,i){fN(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(mN.has(s)?s:Xb(s),e.attrs[s])}class gB extends dN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Pc.has(t)){const i=UD(t);return i&&i.default||0}return t=mN.has(t)?t:Xb(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return iN(e,t,i)}build(e,t,i){JD(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){pB(e,t,i,s)}mount(e){this.isSVGTag=tN(e.tagName),super.mount(e)}}const yB=(n,e)=>Kb(n)?new gB(e):new mB(e,{allowProjection:n!==L.Fragment});function Jl(n,e,t){const i=n.getProps();return Qb(i,e,t!==void 0?t:i.custom,n)}const Hv=n=>Array.isArray(n);function vB(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Tc(t))}function _B(n){return Hv(n)?n[n.length-1]||0:n}function Wb(n,e){const t=Jl(n,e);let{transitionEnd:i={},transition:s={},...o}=t||{};o={...o,...i};for(const l in o){const h=_B(o[l]);vB(n,l,h)}}function bB(n){return!!(wn(n)&&n.add)}function Gv(n,e){const t=n.getValue("willChange");if(bB(t))return t.add(e);if(!t&&os.WillChange){const i=new os.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function pN(n){return n.props[rN]}const TB=n=>n!==null;function EB(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(TB),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}const wB={type:"spring",stiffness:500,damping:25,restSpeed:10},SB=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),xB={type:"keyframes",duration:.8},AB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IB=(n,{keyframes:e})=>e.length>2?xB:Pc.has(n)?n.startsWith("scale")?SB(e[1]):wB:AB;function RB({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:h,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const Zb=(n,e,t,i={},s,o)=>l=>{const h=Lb(i,n)||{},d=h.delay||i.delay||0;let{elapsed:f=0}=i;f=f-br(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-f,onUpdate:_=>{e.set(_),h.onUpdate&&h.onUpdate(_)},onComplete:()=>{l(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:o?void 0:s};RB(h)||Object.assign(g,IB(n,g)),g.duration&&(g.duration=br(g.duration)),g.repeatDelay&&(g.repeatDelay=br(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Uv(g),g.delay===0&&(v=!0)),(os.instantAnimations||os.skipAnimations)&&(v=!0,Uv(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,v&&!o&&e.get()!==void 0){const _=EB(g.keyframes,h);if(_!==void 0){Et.update(()=>{g.onUpdate(_),g.onComplete()});return}}return h.isSync?new Pb(g):new Xz(g)};function CB({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function gN(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...h}=e;i&&(o=i);const d=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const g in h){const v=n.getValue(g,n.latestValues[g]??null),_=h[g];if(_===void 0||f&&CB(f,g))continue;const S={delay:t,...Lb(o||{},g)},R=v.get();if(R!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===R&&!S.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const U=pN(n);if(U){const B=window.MotionHandoffAnimation(U,g,Et);B!==null&&(S.startTime=B,D=!0)}}Gv(n,g),v.start(Zb(g,v,_,n.shouldReduceMotion&&OD.has(g)?{type:!1}:S,n,D));const N=v.animation;N&&d.push(N)}return l&&Promise.all(d).then(()=>{Et.update(()=>{l&&Wb(n,l)})}),d}function yN(n,e,t,i=0,s=1){const o=Array.from(n).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),l=n.size,h=(l-1)*i;return typeof t=="function"?t(o,l):s===1?o*i:h-o*i}function $v(n,e,t={}){const i=Jl(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(gN(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:v}=s;return DB(n,e,d,f,g,v,t)}:()=>Promise.resolve(),{when:h}=s;if(h){const[d,f]=h==="beforeChildren"?[o,l]:[l,o];return d().then(()=>f())}else return Promise.all([o(),l(t.delay)])}function DB(n,e,t=0,i=0,s=0,o=1,l){const h=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),h.push($v(d,e,{...l,delay:t+(typeof i=="function"?0:i)+yN(n.variantChildren,d,i,s,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function vN(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(o=>$v(n,o,t));i=Promise.all(s)}else if(typeof e=="string")i=$v(n,e,t);else{const s=typeof e=="function"?Jl(n,e,t.custom):e;i=Promise.all(gN(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function _N(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const NB=Hb.length;function bN(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?bN(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<NB;t++){const i=Hb[t],s=n.props[i];(zh(s)||s===!1)&&(e[i]=s)}return e}const kB=[...qb].reverse(),VB=qb.length;function MB(n){return e=>Promise.all(e.map(({animation:t,options:i})=>vN(n,t,i)))}function PB(n){let e=MB(n),t=TA(),i=!0;const s=d=>(f,g)=>{const v=Jl(n,g,d==="exit"?n.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:S,...R}=v;f={...f,...R,...S}}return f};function o(d){e=d(n)}function l(d){const{props:f}=n,g=bN(n.parent)||{},v=[],_=new Set;let S={},R=1/0;for(let N=0;N<VB;N++){const U=kB[N],B=t[U],O=f[U]!==void 0?f[U]:g[U],X=zh(O),te=U===d?B.isActive:null;te===!1&&(R=N);let ee=O===g[U]&&O!==f[U]&&X;if(ee&&i&&n.manuallyAnimateOnMount&&(ee=!1),B.protectedKeys={...S},!B.isActive&&te===null||!O&&!B.prevProp||Kp(O)||typeof O=="boolean")continue;const x=OB(B.prevProp,O);let I=x||U===d&&B.isActive&&!ee&&X||N>R&&X,V=!1;const M=Array.isArray(O)?O:[O];let k=M.reduce(s(U),{});te===!1&&(k={});const{prevResolvedValues:z={}}=B,P={...z,...k},Ce=re=>{I=!0,_.has(re)&&(V=!0,_.delete(re)),B.needsAnimating[re]=!0;const ue=n.getValue(re);ue&&(ue.liveStyle=!1)};for(const re in P){const ue=k[re],xe=z[re];if(S.hasOwnProperty(re))continue;let De=!1;Hv(ue)&&Hv(xe)?De=!_N(ue,xe):De=ue!==xe,De?ue!=null?Ce(re):_.add(re):ue!==void 0&&_.has(re)?Ce(re):B.protectedKeys[re]=!0}B.prevProp=O,B.prevResolvedValues=k,B.isActive&&(S={...S,...k}),i&&n.blockInitialAnimation&&(I=!1);const de=ee&&x;I&&(!de||V)&&v.push(...M.map(re=>{const ue={type:U};if(typeof re=="string"&&i&&!de&&n.manuallyAnimateOnMount&&n.parent){const{parent:xe}=n,De=Jl(xe,re);if(xe.enteringChildren&&De){const{delayChildren:F}=De.transition||{};ue.delay=yN(xe.enteringChildren,n,F)}}return{animation:re,options:ue}}))}if(_.size){const N={};if(typeof f.initial!="boolean"){const U=Jl(n,Array.isArray(f.initial)?f.initial[0]:f.initial);U&&U.transition&&(N.transition=U.transition)}_.forEach(U=>{const B=n.getBaseTarget(U),O=n.getValue(U);O&&(O.liveStyle=!0),N[U]=B??null}),v.push({animation:N})}let D=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(D=!1),i=!1,D?e(v):Promise.resolve()}function h(d,f){if(t[d].isActive===f)return Promise.resolve();n.variantChildren?.forEach(v=>v.animationState?.setActive(d,f)),t[d].isActive=f;const g=l(d);for(const v in t)t[v].protectedKeys={};return g}return{animateChanges:l,setActive:h,setAnimateFunction:o,getState:()=>t,reset:()=>{t=TA()}}}function OB(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!_N(e,n):!1}function so(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function TA(){return{animate:so(!0),whileInView:so(),whileHover:so(),whileTap:so(),whileDrag:so(),whileFocus:so(),exit:so()}}class Aa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class LB extends Aa{constructor(e){super(e),e.animationState||(e.animationState=PB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Kp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let jB=0;class UB extends Aa{constructor(){super(...arguments),this.id=jB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const zB={animation:{Feature:LB},exit:{Feature:UB}};function Fh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function ld(n){return{point:{x:n.pageX,y:n.pageY}}}const BB=n=>e=>zb(e)&&n(e,ld(e));function mh(n,e,t,i){return Fh(n,e,BB(t),i)}const TN=1e-4,FB=1-TN,qB=1+TN,EN=.01,HB=0-EN,GB=0+EN;function Dn(n){return n.max-n.min}function $B(n,e,t){return Math.abs(n-e)<=t}function EA(n,e,t,i=.5){n.origin=i,n.originPoint=xt(e.min,e.max,n.origin),n.scale=Dn(t)/Dn(e),n.translate=xt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=FB&&n.scale<=qB||isNaN(n.scale))&&(n.scale=1),(n.translate>=HB&&n.translate<=GB||isNaN(n.translate))&&(n.translate=0)}function ph(n,e,t,i){EA(n.x,e.x,t.x,i?i.originX:void 0),EA(n.y,e.y,t.y,i?i.originY:void 0)}function wA(n,e,t){n.min=t.min+e.min,n.max=n.min+Dn(e)}function KB(n,e,t){wA(n.x,e.x,t.x),wA(n.y,e.y,t.y)}function SA(n,e,t){n.min=e.min-t.min,n.max=n.min+Dn(e)}function gh(n,e,t){SA(n.x,e.x,t.x),SA(n.y,e.y,t.y)}function vi(n){return[n("x"),n("y")]}const wN=({current:n})=>n?n.ownerDocument.defaultView:null,xA=(n,e)=>Math.abs(n-e);function QB(n,e){const t=xA(n.x,e.x),i=xA(n.y,e.y);return Math.sqrt(t**2+i**2)}class SN{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=N0(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,R=QB(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!R)return;const{point:D}=_,{timestamp:N}=mn;this.history.push({...D,timestamp:N});const{onStart:U,onMove:B}=this.handlers;S||(U&&U(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,_)},this.handlePointerMove=(_,S)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=D0(S,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(_,S)=>{this.end();const{onEnd:R,onSessionEnd:D,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=N0(_.type==="pointercancel"?this.lastMoveEventInfo:D0(S,this.transformPagePoint),this.history);this.startEvent&&R&&R(_,U),D&&D(_,U)},!zb(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=s||window;const h=ld(e),d=D0(h,this.transformPagePoint),{point:f}=d,{timestamp:g}=mn;this.history=[{...f,timestamp:g}];const{onSessionStart:v}=t;v&&v(e,N0(d,this.history)),this.removeListeners=sd(mh(this.contextWindow,"pointermove",this.handlePointerMove),mh(this.contextWindow,"pointerup",this.handlePointerUp),mh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ya(this.updatePoint)}}function D0(n,e){return e?{point:e(n.point)}:n}function AA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function N0({point:n},e){return{point:n,delta:AA(n,xN(e)),offset:AA(n,YB(e)),velocity:XB(e,.1)}}function YB(n){return n[0]}function xN(n){return n[n.length-1]}function XB(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=xN(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>br(e)));)t--;if(!i)return{x:0,y:0};const o=bi(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function WB(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?xt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?xt(t,n,i.max):Math.min(n,t)),n}function IA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function ZB(n,{top:e,left:t,bottom:i,right:s}){return{x:IA(n.x,t,s),y:IA(n.y,e,i)}}function RA(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function JB(n,e){return{x:RA(n.x,e.x),y:RA(n.y,e.y)}}function e7(n,e){let t=.5;const i=Dn(n),s=Dn(e);return s>i?t=Lh(e.min,e.max-i,n.min):i>s&&(t=Lh(n.min,n.max-s,e.min)),as(0,1,t)}function t7(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Kv=.35;function n7(n=Kv){return n===!1?n=0:n===!0&&(n=Kv),{x:CA(n,"left","right"),y:CA(n,"top","bottom")}}function CA(n,e,t){return{min:DA(n,e),max:DA(n,t)}}function DA(n,e){return typeof n=="number"?n:n[e]||0}const i7=new WeakMap;class r7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ld(v).point)},l=(v,_)=>{const{drag:S,dragPropagation:R,onDragStart:D}=this.getProps();if(S&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d8(S),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vi(U=>{let B=this.getAxisMotionValue(U).get()||0;if(Tr.test(B)){const{projection:O}=this.visualElement;if(O&&O.layout){const X=O.layout.layoutBox[U];X&&(B=Dn(X)*(parseFloat(B)/100))}}this.originPoint[U]=B}),D&&Et.postRender(()=>D(v,_)),Gv(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},h=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:S,dragDirectionLock:R,onDirectionLock:D,onDrag:N}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:U}=_;if(R&&this.currentDirection===null){this.currentDirection=s7(U),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",_.point,U),this.updateAxis("y",_.point,U),this.visualElement.render(),N&&N(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>vi(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new SN(e,{onSessionStart:o,onStart:l,onMove:h,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:wN(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:h}=this.getProps();h&&Et.postRender(()=>h(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!Zf(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=WB(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Gl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=ZB(i.layoutBox,e):this.constraints=!1,this.elastic=n7(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&vi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=t7(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Gl(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=lB(i,s.root,this.visualElement.getTransformPagePoint());let l=JB(s.layout.layoutBox,o);if(t){const h=t(sB(l));this.hasMutatedConstraints=!!h,h&&(l=oN(h))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},f=vi(g=>{if(!Zf(g,t,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const _=s?200:1e6,S=s?40:1e7,R={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,R)});return Promise.all(f).then(h)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Gv(this.visualElement,e),i.start(Zb(e,i,0,t,this.visualElement,!1))}stopAnimation(){vi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){vi(t=>{const{drag:i}=this.getProps();if(!Zf(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:h}=s.layout.layoutBox[t];o.set(e[t]-xt(l,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Gl(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};vi(l=>{const h=this.getAxisMotionValue(l);if(h&&this.constraints!==!1){const d=h.get();s[l]=e7({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),vi(l=>{if(!Zf(l,e,null))return;const h=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];h.set(xt(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;i7.set(this.visualElement,this);const e=this.visualElement.current,t=mh(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Gl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Et.read(i);const l=Fh(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(vi(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Kv,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:h}}}function Zf(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function s7(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class a7 extends Aa{constructor(e){super(e),this.removeGroupControls=Ei,this.removeListeners=Ei,this.controls=new r7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ei}unmount(){this.removeGroupControls(),this.removeListeners()}}const NA=n=>(e,t)=>{n&&Et.postRender(()=>n(e,t))};class o7 extends Aa{constructor(){super(...arguments),this.removePointerDownListener=Ei}onPointerDown(e){this.session=new SN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:NA(e),onStart:NA(t),onMove:i,onEnd:(o,l)=>{delete this.session,s&&Et.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=mh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Em={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Qu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Re.test(n))n=parseFloat(n);else return n;const t=kA(n,e.target.x),i=kA(n,e.target.y);return`${t}% ${i}%`}},l7={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=va.parse(n);if(s.length>5)return i;const o=va.createTransformer(n),l=typeof s[0]!="number"?1:0,h=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=h,s[1+l]/=d;const f=xt(h,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),o(s)}};let k0=!1;class c7 extends L.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=e;V8(u7),o&&(t.group&&t.group.add(o),i&&i.register&&s&&i.register(o),k0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Em.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:o}=this.props,{projection:l}=i;return l&&(l.isPresent=o,k0=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Et.postRender(()=>{const h=l.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ub.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;k0=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function AN(n){const[e,t]=KD(),i=L.useContext(yb);return E.jsx(c7,{...n,layoutGroup:i,switchLayoutGroup:L.useContext(sN),isPresent:e,safeToRemove:t})}const u7={borderRadius:{...Qu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qu,borderTopRightRadius:Qu,borderBottomLeftRadius:Qu,borderBottomRightRadius:Qu,boxShadow:l7};function h7(n,e,t){const i=wn(n)?n:Tc(n);return i.start(Zb("",i,e,t)),i.animation}const d7=(n,e)=>n.depth-e.depth;class f7{constructor(){this.children=[],this.isDirty=!1}add(e){bb(this.children,e),this.isDirty=!0}remove(e){Tb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(d7),this.isDirty=!1,this.children.forEach(e)}}function m7(n,e){const t=Fn.now(),i=({timestamp:s})=>{const o=s-t;o>=e&&(ya(i),n(o-e))};return Et.setup(i,!0),()=>ya(i)}const IN=["TopLeft","TopRight","BottomLeft","BottomRight"],p7=IN.length,VA=n=>typeof n=="string"?parseFloat(n):n,MA=n=>typeof n=="number"||Re.test(n);function g7(n,e,t,i,s,o){s?(n.opacity=xt(0,t.opacity??1,y7(i)),n.opacityExit=xt(e.opacity??1,0,v7(i))):o&&(n.opacity=xt(e.opacity??1,t.opacity??1,i));for(let l=0;l<p7;l++){const h=`border${IN[l]}Radius`;let d=PA(e,h),f=PA(t,h);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||MA(d)===MA(f)?(n[h]=Math.max(xt(VA(d),VA(f),i),0),(Tr.test(f)||Tr.test(d))&&(n[h]+="%")):n[h]=f}(e.rotate||t.rotate)&&(n.rotate=xt(e.rotate||0,t.rotate||0,i))}function PA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const y7=RN(0,.5,fD),v7=RN(.5,.95,Ei);function RN(n,e,t){return i=>i<n?0:i>e?1:t(Lh(n,e,i))}function OA(n,e){n.min=e.min,n.max=e.max}function gi(n,e){OA(n.x,e.x),OA(n.y,e.y)}function LA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function jA(n,e,t,i,s){return n-=e,n=sp(n,1/t,i),s!==void 0&&(n=sp(n,1/s,i)),n}function _7(n,e=0,t=1,i=.5,s,o=n,l=n){if(Tr.test(e)&&(e=parseFloat(e),e=xt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let h=xt(o.min,o.max,i);n===o&&(h-=e),n.min=jA(n.min,e,t,h,s),n.max=jA(n.max,e,t,h,s)}function UA(n,e,[t,i,s],o,l){_7(n,e[t],e[i],e[s],e.scale,o,l)}const b7=["x","scaleX","originX"],T7=["y","scaleY","originY"];function zA(n,e,t,i){UA(n.x,e,b7,t?t.x:void 0,i?i.x:void 0),UA(n.y,e,T7,t?t.y:void 0,i?i.y:void 0)}function BA(n){return n.translate===0&&n.scale===1}function CN(n){return BA(n.x)&&BA(n.y)}function FA(n,e){return n.min===e.min&&n.max===e.max}function E7(n,e){return FA(n.x,e.x)&&FA(n.y,e.y)}function qA(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function DN(n,e){return qA(n.x,e.x)&&qA(n.y,e.y)}function HA(n){return Dn(n.x)/Dn(n.y)}function GA(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class w7{constructor(){this.members=[]}add(e){bb(this.members,e),e.scheduleRender()}remove(e){if(Tb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function S7(n,e,t){let i="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=t?.z||0;if((s||o||l)&&(i=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:v,rotateY:_,skewX:S,skewY:R}=t;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),v&&(i+=`rotateX(${v}deg) `),_&&(i+=`rotateY(${_}deg) `),S&&(i+=`skewX(${S}deg) `),R&&(i+=`skewY(${R}deg) `)}const h=n.x.scale*e.x,d=n.y.scale*e.y;return(h!==1||d!==1)&&(i+=`scale(${h}, ${d})`),i||"none"}const V0=["","X","Y","Z"],x7=1e3;let A7=0;function M0(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function NN(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=pN(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Et,!(s||o))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&NN(i)}function kN({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},h=e?.()){this.id=A7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(C7),this.nodes.forEach(V7),this.nodes.forEach(M7),this.nodes.forEach(D7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new f7)}addEventListener(l,h){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Sb),this.eventHandlers.get(l).add(h)}notifyListeners(l,...h){const d=this.eventHandlers.get(l);d&&d.notify(...h)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=$D(l)&&!v8(l),this.instance=l;const{layoutId:h,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),n){let g,v=0;const _=()=>this.root.updateBlockedByResize=!1;Et.read(()=>{v=window.innerWidth}),n(l,()=>{const S=window.innerWidth;S!==v&&(v=S,this.root.updateBlockedByResize=!0,g&&g(),g=m7(_,250),Em.hasAnimatedSinceResize&&(Em.hasAnimatedSinceResize=!1,this.nodes.forEach(QA)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&f&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||f.getDefaultTransition()||U7,{onLayoutAnimationStart:D,onLayoutAnimationComplete:N}=f.getProps(),U=!this.targetLayout||!DN(this.targetLayout,S),B=!v&&_;if(this.options.layoutRoot||this.resumeFrom||B||v&&(U||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...Lb(R,"layout"),onPlay:D,onComplete:N};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(g,B)}else v||QA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ya(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(P7),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&NN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($A);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(KA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(k7),this.nodes.forEach(I7),this.nodes.forEach(R7)):this.nodes.forEach(KA),this.clearAllSnapshots();const h=Fn.now();mn.delta=as(0,1e3/60,h-mn.timestamp),mn.timestamp=h,mn.isProcessing=!0,E0.update.process(mn),E0.preRender.process(mn),E0.render.process(mn),mn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ub.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(N7),this.sharedNodes.forEach(O7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(h=!1),h&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!CN(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;l&&this.instance&&(h||uo(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return l&&(d=this.removeTransform(d)),z7(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Pt();const h=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(B7))){const{scroll:f}=this.root;f&&($l(h.x,f.offset.x),$l(h.y,f.offset.y))}return h}removeElementScroll(l){const h=Pt();if(gi(h,l),this.scroll?.wasRoot)return h;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:g,options:v}=f;f!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&gi(h,l),$l(h.x,g.offset.x),$l(h.y,g.offset.y))}return h}applyTransform(l,h=!1){const d=Pt();gi(d,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Kl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),uo(g.latestValues)&&Kl(d,g.latestValues)}return uo(this.latestValues)&&Kl(d,this.latestValues),d}removeTransform(l){const h=Pt();gi(h,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!uo(f.latestValues))continue;Bv(f.latestValues)&&f.updateSnapshot();const g=Pt(),v=f.measurePageBox();gi(g,v),zA(h,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return uo(this.latestValues)&&zA(h,this.latestValues),h}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=mn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),gh(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),KB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gi(this.target,this.layout.layoutBox),cN(this.target,this.targetDelta)):gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),gh(this.relativeTargetOrigin,this.target,_.target),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Bv(this.parent.latestValues)||lN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),h=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===mn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;gi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;oB(this.layoutCorrected,this.treeScale,this.path,h),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Pt());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LA(this.prevProjectionDelta.x,this.projectionDelta.x),LA(this.prevProjectionDelta.y,this.projectionDelta.y)),ph(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!GA(this.projectionDelta.x,this.prevProjectionDelta.x)||!GA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ql(),this.projectionDelta=Ql(),this.projectionDeltaWithTransform=Ql()}setAnimationOrigin(l,h=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},v=Ql();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const _=Pt(),S=d?d.source:void 0,R=this.layout?this.layout.source:void 0,D=S!==R,N=this.getStack(),U=!N||N.members.length<=1,B=!!(D&&!U&&this.options.crossfade===!0&&!this.path.some(j7));this.animationProgress=0;let O;this.mixTargetDelta=X=>{const te=X/1e3;YA(v.x,l.x,te),YA(v.y,l.y,te),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gh(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),L7(this.relativeTarget,this.relativeTargetOrigin,_,te),O&&E7(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Pt()),gi(O,this.relativeTarget)),D&&(this.animationValues=g,g7(g,f,this.latestValues,te,B,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ya(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{Em.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Tc(0)),this.currentAnimation=h7(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),l.onUpdate&&l.onUpdate(h)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(x7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:h,target:d,layout:f,latestValues:g}=l;if(!(!h||!d||!f)){if(this!==l&&this.layout&&f&&VN(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Pt();const v=Dn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const _=Dn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}gi(h,d),Kl(h,g),ph(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(l,h){this.sharedNodes.has(l)||this.sharedNodes.set(l,new w7),this.sharedNodes.get(l).add(h);const f=h.options.initialPromotionConfig;h.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(h):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:h,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let h=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const f={};d.z&&M0("z",l,f,this.animationValues);for(let g=0;g<V0.length;g++)M0(`rotate${V0[g]}`,l,f,this.animationValues),M0(`skew${V0[g]}`,l,f,this.animationValues);l.render();for(const g in f)l.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);l.scheduleRender()}applyProjectionStyles(l,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Tm(h?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Tm(h?.pointerEvents)||""),this.hasProjected&&!uo(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=S7(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),l.transform=v;const{x:_,y:S}=this.projectionDelta;l.transformOrigin=`${_.origin*100}% ${S.origin*100}% 0`,f.animationValues?l.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const R in Bh){if(g[R]===void 0)continue;const{correct:D,applyTo:N,isCSSVariable:U}=Bh[R],B=v==="none"?g[R]:D(g[R],f);if(N){const O=N.length;for(let X=0;X<O;X++)l[N[X]]=B}else U?this.options.visualElement.renderState.vars[R]=B:l[R]=B}this.options.layoutId&&(l.pointerEvents=f===this?Tm(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach($A),this.root.sharedNodes.clear()}}}function I7(n){n.updateLayout()}function R7(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?vi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Dn(v);v.min=t[g].min,v.max=v.min+_}):VN(s,e.layoutBox,t)&&vi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Dn(t[g]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+_)});const l=Ql();ph(l,t,e.layoutBox);const h=Ql();o?ph(h,n.applyTransform(i,!0),e.measuredBox):ph(h,t,e.layoutBox);const d=!CN(l);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:_}=g;if(v&&_){const S=Pt();gh(S,e.layoutBox,v.layoutBox);const R=Pt();gh(R,t,_.layoutBox),DN(S,R)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=R,n.relativeTargetOrigin=S,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:h,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function C7(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function D7(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function N7(n){n.clearSnapshot()}function $A(n){n.clearMeasurements()}function KA(n){n.isLayoutDirty=!1}function k7(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function QA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function V7(n){n.resolveTargetDelta()}function M7(n){n.calcProjection()}function P7(n){n.resetSkewAndRotation()}function O7(n){n.removeLeadSnapshot()}function YA(n,e,t){n.translate=xt(e.translate,0,t),n.scale=xt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function XA(n,e,t,i){n.min=xt(e.min,t.min,i),n.max=xt(e.max,t.max,i)}function L7(n,e,t,i){XA(n.x,e.x,t.x,i),XA(n.y,e.y,t.y,i)}function j7(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const U7={duration:.45,ease:[.4,0,.1,1]},WA=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),ZA=WA("applewebkit/")&&!WA("chrome/")?Math.round:Ei;function JA(n){n.min=ZA(n.min),n.max=ZA(n.max)}function z7(n){JA(n.x),JA(n.y)}function VN(n,e,t){return n==="position"||n==="preserve-aspect"&&!$B(HA(e),HA(t),.2)}function B7(n){return n!==n.root&&n.scroll?.wasRoot}const F7=kN({attachResizeListener:(n,e)=>Fh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),P0={current:void 0},MN=kN({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!P0.current){const n=new F7({});n.mount(window),n.setOptions({layoutScroll:!0}),P0.current=n}return P0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),q7={pan:{Feature:o7},drag:{Feature:a7,ProjectionNode:MN,MeasureLayout:AN}};function eI(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=i[s];o&&Et.postRender(()=>o(e,ld(e)))}class H7 extends Aa{mount(){const{current:e}=this.node;e&&(this.unmount=f8(e,(t,i)=>(eI(this.node,i,"Start"),s=>eI(this.node,s,"End"))))}unmount(){}}class G7 extends Aa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sd(Fh(this.node.current,"focus",()=>this.onFocus()),Fh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function tI(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=i[s];o&&Et.postRender(()=>o(e,ld(e)))}class $7 extends Aa{mount(){const{current:e}=this.node;e&&(this.unmount=y8(e,(t,i)=>(tI(this.node,i,"Start"),(s,{success:o})=>tI(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qv=new WeakMap,O0=new WeakMap,K7=n=>{const e=Qv.get(n.target);e&&e(n)},Q7=n=>{n.forEach(K7)};function Y7({root:n,...e}){const t=n||document;O0.has(t)||O0.set(t,{});const i=O0.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(Q7,{root:n,...e})),i[s]}function X7(n,e,t){const i=Y7(e);return Qv.set(n,t),i.observe(n),()=>{Qv.delete(n),i.unobserve(n)}}const W7={some:0,all:1};class Z7 extends Aa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:W7[s]},h=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=f?g:v;_&&_(d)};return X7(this.node.current,l,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(J7(e,t))&&this.startObserver()}unmount(){}}function J7({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const eF={inView:{Feature:Z7},tap:{Feature:$7},focus:{Feature:G7},hover:{Feature:H7}},tF={layout:{ProjectionNode:MN,MeasureLayout:AN}},nF={...zB,...eF,...q7,...tF},Yp=rB(nF,yB);function iF(n){n.values.forEach(e=>e.stop())}function Yv(n,e){[...e].reverse().forEach(i=>{const s=n.getVariant(i);s&&Wb(n,s),n.variantChildren&&n.variantChildren.forEach(o=>{Yv(o,e)})})}function rF(n,e){if(Array.isArray(e))return Yv(n,e);if(typeof e=="string")return Yv(n,[e]);Wb(n,e)}function sF(){const n=new Set,e={subscribe(t){return n.add(t),()=>void n.delete(t)},start(t,i){const s=[];return n.forEach(o=>{s.push(vN(o,t,{transitionOverride:i}))}),Promise.all(s)},set(t){return n.forEach(i=>{rF(i,t)})},stop(){n.forEach(t=>{iF(t)})},mount(){return()=>{e.stop()}}};return e}function aF(){const n=Hp(sF);return _b(n.mount,[]),n}const oF=aF,PN=({children:n,onDelete:e,threshold:t=-100})=>{const i=oF(),[s,o]=L.useState(!1),l=L.useRef(0),h=()=>{o(!0),l.current=Date.now()},d=async(f,g)=>{const v=g.offset.x,_=g.velocity.x;setTimeout(()=>o(!1),100),v<t||v<-50&&_<-500?e():i.start({x:0})};return E.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[E.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:E.jsx(xm,{className:"text-white w-6 h-6"})}),E.jsx(Yp.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:h,onDragEnd:d,animate:i,className:"relative bg-white dark:bg-zinc-900 z-10 rounded-xl",style:{touchAction:"pan-y",pointerEvents:s?"none":"auto"},children:n})]})},nI=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),lF=()=>{const{id:n}=iM(),{envelopes:e,transactions:t,fetchData:i,isLoading:s,deleteEnvelope:o,renameEnvelope:l,updateTransaction:h,deleteTransaction:d,restoreTransaction:f,getEnvelopeBalance:g}=Je(),{showToast:v}=gb(),_=ba(),S=_a(),[R,D]=L.useState(!1),[N,U]=L.useState(!1),[B,O]=L.useState(!1),[X,te]=L.useState(null);L.useEffect(()=>{e.length===0&&i()},[]);const ee=e.find(k=>k.id===n);if(!ee)return s?E.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:E.jsx("p",{children:"Loading envelope..."})}):E.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:E.jsx("p",{children:"Envelope not found."})});const x=t.filter(k=>k.envelopeId===ee.id).sort((k,z)=>new Date(z.date).getTime()-new Date(k.date).getTime()),I=()=>{S.state?.fromGlobalFAB?_("/"):_(-1)},V=()=>{n&&(o(n),_(-1))},M=k=>{const z={...k,reconciled:!k.reconciled};h(z)};return E.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4",children:[E.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[E.jsx("button",{onClick:()=>{const k=prompt("Rename envelope:",ee.name);k&&k.trim()&&n&&l(n,k)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),E.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.name}),E.jsx("button",{onClick:I,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),E.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const k=g(ee.id).toNumber();return console.log(`Debug: Envelope ${ee.name} Balance:`,k),E.jsx("span",{className:`text-xl font-bold ${k<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:nI(k)})})()]}),E.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-zinc-400",children:[E.jsx("span",{children:"Budget"}),E.jsx("span",{children:nI(ee.currentBalance||0)})]})]}),E.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[E.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>D(!0),children:[E.jsx(h4,{className:"w-5 h-5 mr-3"}),"Add Money"]}),E.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>U(!0),children:[E.jsx(c4,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),E.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[E.jsx(r4,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),E.jsxs("section",{className:"mt-6",children:[E.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),E.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:x.length===0?E.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):E.jsx(Fb,{initial:!1,mode:"popLayout",children:x.map(k=>E.jsx(Yp.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:E.jsx(PN,{onDelete:()=>{if(!k.id)return;const z={...k};d(k.id),v("Transaction deleted","neutral",()=>f(z))},children:E.jsx(nD,{transaction:k,onReconcile:()=>M(k),onEdit:()=>te(k)})})},k.id))})})]}),E.jsx("div",{className:"mt-8",children:E.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${ee.name}"? This will delete all transactions.`)&&V()},children:[E.jsx(EI,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(R||N||X)&&E.jsx(tD,{isVisible:R||N||!!X,onClose:()=>{D(!1),U(!1),te(null)},mode:R?"add":N?"spend":"edit",currentEnvelope:ee,initialTransaction:X}),B&&E.jsx(EU,{isVisible:B,onClose:()=>O(!1),sourceEnvelope:ee})]})},cF=()=>{const n=ba(),e=L.useRef(null),{envelopes:t,transactions:i,distributionTemplates:s,resetData:o,importData:l,getEnvelopeBalance:h,appSettings:d,updateAppSettings:f,initializeAppSettings:g,cleanupOrphanedTemplates:v}=Je(),[_,S]=L.useState(null),[R,D]=L.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[N,U]=L.useState(!1),B=978307200,O=d?.theme??"system";L.useEffect(()=>{d||g().catch(z=>{console.error("Failed to initialize app settings:",z)})},[d,g]);const X=(z,P)=>{S({type:z,text:P}),setTimeout(()=>S(null),3500)},te=L.useMemo(()=>{const z=t.length,P=i.length,Ce=s.length,de=t.reduce((xe,De)=>xe+h(De.id).toNumber(),0),H=0,re=i.reduce((xe,De)=>{let F=0;if(typeof De.date=="string"){const se=Date.parse(De.date);F=Number.isNaN(se)?0:se}else typeof De.date=="number"&&(F=De.date<2e9?(De.date+B)*1e3:De.date);return Math.max(xe,F)},0),ue=H||re?new Date(Math.max(H,re)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:z,transactionCount:P,templateCount:Ce,totalBalance:de,lastUpdated:ue}},[t,i,s]),ee=()=>{try{const z={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:d||{theme:"system"},envelopes:t.map(re=>({...re,currentBalance:h(re.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:s},P=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),Ce=URL.createObjectURL(P),de=document.createElement("a");de.href=Ce,de.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(Ce);const H=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",H),D(H),X("success","Backup downloaded successfully.")}catch(z){console.error(z),X("error","Failed to create backup file.")}},x=()=>{try{const z=["Date","Description","Amount","Type","Envelope","Reconciled"],P=i.map(ue=>{const xe=t.find(se=>se.id===ue.envelopeId)?.name||"Unknown",De=(ue.description||"").replace(/"/g,'""');let F="Invalid Date";if(ue.date){if(typeof ue.date=="string")F=ue.date.split("T")[0];else if(typeof ue.date=="number"){const se=ue.date<2e9?(ue.date+B)*1e3:ue.date;F=new Date(se).toISOString().split("T")[0]}}return[F,`"${De}"`,ue.amount.toFixed(2),ue.type,`"${xe}"`,ue.reconciled?"Yes":"No"].join(",")}),Ce=[z.join(","),...P].join(`
`),de=new Blob([Ce],{type:"text/csv;charset=utf-8;"}),H=URL.createObjectURL(de),re=document.createElement("a");re.href=H,re.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(H),X("success","CSV export ready to open in Excel/Numbers.")}catch(z){console.error(z),X("error","Failed to export CSV.")}},I=()=>{e.current?.click()},V=z=>{const P=z.target.files?.[0];if(!P)return;const Ce=new FileReader;Ce.onload=async de=>{try{const H=JSON.parse(de.target?.result),re=await l(H);if(!re.success){X("error",re.message);return}if(H.appSettings?.theme)try{await f({theme:H.appSettings.theme})}catch(ue){console.error("Failed to update imported settings:",ue)}else if(H.appSettings?.isDarkMode!==void 0)try{const ue=H.appSettings.isDarkMode?"dark":"light";await f({theme:ue})}catch(ue){console.error("Failed to update imported settings:",ue)}X("success",`Loaded ${H.envelopes?.length??0} envelopes, ${H.transactions?.length??0} transactions, and ${H.distributionTemplates?.length??0} templates.`)}catch(H){console.error(H),X("error","Invalid backup file. Please verify the JSON.")}},Ce.readAsText(P),z.target.value=""},M=async()=>{U(!0);try{X("success","Scanning templates for orphaned references..."),await v(),X("success","Orphaned templates have been cleaned up successfully.")}catch(z){console.error("Template cleanup failed:",z),X("error","Failed to clean up orphaned templates. Check console for details.")}finally{U(!1)}},k=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),X("success","All data has been permanently deleted."),n("/")}catch(z){console.error("Reset failed:",z),X("error","Failed to delete all data. Some data may remain.")}};return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[E.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:E.jsxs("div",{className:"flex items-center",children:[E.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),E.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),E.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[_&&E.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${_.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[_.type==="success"?E.jsx(f4,{size:18}):E.jsx(xm,{size:18}),_.text]}),E.jsx("section",{children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Sm,{className:"text-blue-500",size:22}),E.jsxs("div",{children:[E.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),E.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),E.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.envelopeCount})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),E.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.transactionCount})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),E.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.templateCount})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),E.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:te.lastUpdated})]})]})]})}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[O==="light"&&E.jsx("span",{className:"text-orange-500 text-lg",children:""}),O==="dark"&&E.jsx("span",{className:"text-purple-500 text-lg",children:""}),O==="system"&&E.jsx("span",{className:"text-gray-500 text-lg",children:""}),E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),E.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:O})]}),E.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),E.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(z=>E.jsx("button",{onClick:async()=>{try{await f({theme:z.value})}catch(P){console.error("Failed to update theme setting:",P)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${O===z.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:z.label},z.value))})]})]}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[E.jsxs("button",{onClick:ee,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Sm,{className:"text-blue-500",size:20}),E.jsxs("div",{className:"flex flex-col items-start",children:[E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),E.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",R]})]})]}),E.jsx(Ol,{className:"text-gray-400",size:18})]}),E.jsxs("button",{onClick:I,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Y4,{className:"text-blue-500",size:20}),E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),E.jsx(Ol,{className:"text-gray-400",size:18})]}),E.jsxs("button",{onClick:x,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(S4,{className:"text-blue-500",size:20}),E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),E.jsx(Ol,{className:"text-gray-400",size:18})]}),E.jsxs("button",{onClick:M,disabled:N,className:`w-full p-4 flex items-center justify-between transition-colors ${N?"bg-gray-50 dark:bg-zinc-800/50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[E.jsxs("div",{className:"flex items-center gap-3",children:[N?E.jsx(M4,{className:"text-blue-500 animate-spin",size:20}):E.jsx(U0,{className:"text-blue-500",size:20}),E.jsx("span",{className:`font-medium ${N?"text-gray-500 dark:text-zinc-400":"text-gray-900 dark:text-white"}`,children:N?"Cleaning Templates...":"Clean Up Orphaned Templates"})]}),N?E.jsx("div",{className:"text-gray-400 text-sm",children:"Working..."}):E.jsx(Ol,{className:"text-gray-400",size:18})]}),E.jsx("input",{type:"file",ref:e,onChange:V,accept:".json",className:"hidden"})]})]}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[E.jsx("p",{children:"Create regular backups before major changes."}),E.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),E.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),E.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),E.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:E.jsxs("button",{onClick:k,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(xm,{className:"text-red-500 group-hover:text-red-600",size:20}),E.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),E.jsx(Ol,{className:"text-gray-400",size:18})]})}),E.jsx("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500",children:"This clears every envelope, transaction, and template. Use with caution."})]}),E.jsx("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:"House Budget PWA  App Version 2.0.1"})]})]})},uF=()=>{const n=ba(),{createEnvelope:e}=Je(),[t,i]=L.useState(""),[s,o]=L.useState(""),l=h=>{if(h.preventDefault(),!t.trim())return;const d=parseFloat(s),f=isNaN(d)?0:d,g=Je.getState().envelopes,_=(g.length>0?Math.max(...g.map(S=>S.orderIndex??0)):-1)+1;e({name:t,currentBalance:f,lastUpdated:new Date().toISOString(),isActive:!0,orderIndex:_}),n("/")};return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[E.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:E.jsx(TI,{size:24})}),E.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Envelope"})]}),E.jsx("div",{className:"p-4 max-w-md mx-auto",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[E.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:E.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:E.jsx(A4,{size:40})})}),E.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Envelope Name"}),E.jsx("input",{type:"text",id:"name",value:t,onChange:h=>i(h.target.value),placeholder:"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),E.jsxs("div",{className:"relative",children:[E.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),E.jsx("input",{type:"number",id:"balance",value:s,onChange:h=>o(h.target.value),onKeyDown:h=>{(h.key==="e"||h.key==="E"||h.key==="+"||h.key==="-")&&h.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later via the "Distribute Funds" screen.'})]}),E.jsxs("div",{className:"pt-4 flex gap-3",children:[E.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),E.jsx("button",{type:"submit",disabled:!t.trim(),className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${t.trim()?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:"Create Envelope"})]})]})]})})]})},hF=()=>{const n=ba(),{envelopes:e}=Je(),t=[...e].sort((i,s)=>i.name.localeCompare(s.name));return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[E.jsx("button",{onClick:()=>n(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),E.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),E.jsx("div",{className:"w-12"})," "]}),E.jsx("div",{className:"p-4 max-w-md mx-auto",children:E.jsx("section",{className:"mb-6",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[E.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:E.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:"SELECT ENVELOPE"})}),t.length===0?E.jsx("div",{className:"px-4 py-8 text-center text-gray-500 dark:text-zinc-400",children:E.jsx("p",{children:"No envelopes available"})}):E.jsx("div",{className:"divide-y divide-gray-200 dark:divide-zinc-700",children:t.map(i=>E.jsxs("button",{onClick:()=>n(`/envelope/${i.id}`,{state:{fromGlobalFAB:!0}}),className:"w-full px-4 py-4 text-left flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700 transition-colors",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.name}),E.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Balance calculation not available here"})]}),E.jsx(Ol,{size:20,className:"text-gray-400 dark:text-zinc-500"})]},i.id))})]})})})]})},dF=()=>{const n=ba(),{transactions:e,envelopes:t,updateTransaction:i,deleteTransaction:s,restoreTransaction:o}=Je(),{showToast:l}=gb(),[h,d]=L.useState(!1),[f,g]=L.useState(""),[v,_]=L.useState("all"),[S,R]=L.useState("All"),[D,N]=L.useState(!1),[U,B]=L.useState(()=>{const M=new Date;return M.setMonth(M.getMonth()-1),M.toISOString().split("T")[0]}),[O,X]=L.useState(()=>new Date().toISOString().split("T")[0]),[te,ee]=L.useState(null),x=L.useMemo(()=>e.map(k=>{if(!k)return null;let z=k.date;if(typeof k.date=="number"){const Ce=(k.date+978307200)*1e3;z=new Date(Ce).toISOString()}else if(!k.date||typeof k.date!="string")return null;return{...k,date:z}}).filter(Boolean).filter(k=>{if(f){const P=f.toLowerCase(),Ce=t.find(re=>re.id===k.envelopeId)?.name.toLowerCase()||"",de=k.amount.toFixed(2);if(!(k.description.toLowerCase().includes(P)||Ce.includes(P)||de.includes(P)))return!1}if(v!=="all"&&k.envelopeId!==v||S!=="All"&&k.type!==S||!k.date||typeof k.date!="string")return!1;const z=k.date.split("T")[0];return!(z<U||z>O||D&&!k.reconciled)}).sort((k,z)=>new Date(z.date).getTime()-new Date(k.date).getTime()),[e,t,f,v,S,U,O,D]),I=te?t.find(M=>M.id===te.envelopeId):null,V=M=>{const k={...M,reconciled:!M.reconciled};i(k)};return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:E.jsx(TI,{size:24})}),E.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),E.jsx("button",{onClick:()=>d(!h),className:`p-2 rounded-full transition-colors ${h?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:E.jsx(R4,{size:20,className:h?"fill-current":""})})]}),E.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${h?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:E.jsxs("div",{className:"p-4 space-y-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx(B4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),E.jsx("input",{type:"text",placeholder:"Search transactions...",value:f,onChange:M=>g(M.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),f&&E.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:E.jsx(n_,{size:16})})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),E.jsxs("select",{value:v,onChange:M=>_(M.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[E.jsx("option",{value:"all",children:"All Envelopes"}),t.sort((M,k)=>M.name.localeCompare(k.name)).map(M=>E.jsx("option",{value:M.id,children:M.name},M.id))]})]}),E.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(M=>E.jsx("button",{onClick:()=>R(M),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${S===M?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:M},M))}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),E.jsx("div",{className:"relative",children:E.jsx("input",{type:"date",value:U,onChange:M=>B(M.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),E.jsx("div",{className:"relative",children:E.jsx("input",{type:"date",value:O,onChange:M=>X(M.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),E.jsxs("div",{className:"flex items-center justify-between pt-2",children:[E.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),E.jsx("button",{onClick:()=>N(!D),className:`w-11 h-6 rounded-full transition-colors relative ${D?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:E.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${D?"translate-x-5":"translate-x-0"}`})})]})]})}),E.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:E.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:x.length===0?E.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):E.jsx(Fb,{initial:!1,mode:"popLayout",children:x.map(M=>{const k=t.find(z=>z.id===M.envelopeId);return E.jsx(Yp.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:E.jsx(PN,{onDelete:()=>{if(!M.id)return;const z={...M};s(M.id),l("Transaction deleted","neutral",()=>o(z))},children:E.jsx(nD,{transaction:M,envelopeName:k?.name||"Unknown Envelope",onReconcile:()=>V(M),onEdit:()=>{k?ee(M):alert("Cannot edit: Envelope deleted.")}})})},M.id)})})})}),te&&I&&E.jsx(tD,{isVisible:!!te,onClose:()=>ee(null),mode:"edit",currentEnvelope:I,initialTransaction:te})]})},fF=()=>{const[n,e]=L.useState(""),[t,i]=L.useState(""),[s,o]=L.useState(!1),{login:l,isLoading:h,loginError:d,clearError:f}=bc(),g=async v=>{v.preventDefault(),n.trim()&&t.trim()&&await l(n.trim(),t)};return L.useEffect(()=>{d&&f()},[n,t,d,f]),E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:E.jsxs("div",{className:"max-w-md w-full space-y-8",children:[E.jsxs("div",{className:"text-center",children:[E.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[E.jsx("img",{src:"/house-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),E.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]}),E.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for your household"})]}),E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:[E.jsxs("form",{onSubmit:g,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),E.jsx("input",{id:"username",type:"text",value:n,onChange:v=>e(v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your username",required:!0,disabled:h})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{id:"password",type:s?"text":"password",value:t,onChange:v=>i(v.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",required:!0,disabled:h}),E.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none focus:text-gray-600 dark:focus:text-gray-300",disabled:h,children:s?E.jsx(b4,{className:"h-5 w-5"}):E.jsx(E4,{className:"h-5 w-5"})})]})]}),d&&E.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:d}),E.jsx("button",{type:"submit",disabled:h||!n.trim()||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:h?"Signing in...":"Sign In"})]}),E.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[E.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center mb-3",children:"Demo Credentials:"}),E.jsxs("div",{className:"space-y-2 text-xs text-gray-500 dark:text-gray-400",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Frank:"}),E.jsx("span",{children:"frank / password123"})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Brother:"}),E.jsx("span",{children:"brother / password123"})]})]})]})]})]})})},mF=()=>{const{message:n,type:e,isVisible:t,undoAction:i,hideToast:s}=gb(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return E.jsx(Fb,{children:t&&E.jsx(Yp.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:E.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[E.jsx("div",{className:"flex items-center flex-1 min-w-0",children:E.jsx("span",{className:"text-sm font-medium truncate pr-2",children:n})}),E.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&E.jsxs("button",{onClick:()=>{i(),s()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[E.jsx(K4,{size:14,className:"inline mr-1"}),"Undo"]}),E.jsx("button",{onClick:s,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:E.jsx(n_,{size:16})})]})]})})})};function pF(){const[n,e]=L.useState(!0),{appSettings:t}=Je(),{isAuthenticated:i}=bc();return L.useEffect(()=>{const s=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(s)},[]),L.useEffect(()=>{const s=document.documentElement,o=window.matchMedia("(prefers-color-scheme: dark)"),l=()=>{const h=t?.theme??"system",d=o.matches;h==="dark"||h==="system"&&d?s.classList.add("dark"):s.classList.remove("dark")};if(l(),t?.theme==="system")return o.addEventListener("change",l),()=>o.removeEventListener("change",l)},[t]),n?E.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-blue-600 text-white dark:bg-black",children:E.jsx("div",{className:"text-3xl font-bold animate-pulse",children:"House Budget"})}):i?E.jsxs(E.Fragment,{children:[E.jsx(BM,{children:E.jsxs(vM,{children:[E.jsx(ao,{path:"/",element:E.jsx(TU,{})}),E.jsx(ao,{path:"/envelope/:id",element:E.jsx(lF,{})}),E.jsx(ao,{path:"/add-envelope",element:E.jsx(uF,{})}),E.jsx(ao,{path:"/add-transaction",element:E.jsx(hF,{})}),E.jsx(ao,{path:"/transactions",element:E.jsx(dF,{})}),E.jsx(ao,{path:"/settings",element:E.jsx(cF,{})})]})}),E.jsx(mF,{})]}):E.jsx(fF,{})}AV({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});EV.createRoot(document.getElementById("root")).render(E.jsx(L.StrictMode,{children:E.jsx(pF,{})}));
