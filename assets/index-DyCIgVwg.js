(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function aV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ky={exports:{}},zc={};var pw;function oV(){if(pw)return zc;pw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:o}}return zc.Fragment=e,zc.jsx=t,zc.jsxs=t,zc}var gw;function lV(){return gw||(gw=1,Ky.exports=oV()),Ky.exports}var w=lV(),Qy={exports:{}},Pe={};var yw;function uV(){if(yw)return Pe;yw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function S(B){return B===null||typeof B!="object"?null:(B=_&&B[_]||B["@@iterator"],typeof B=="function"?B:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,k={};function U(B,se,pe){this.props=B,this.context=se,this.refs=k,this.updater=pe||C}U.prototype.isReactComponent={},U.prototype.setState=function(B,se){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,se,"setState")},U.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function q(){}q.prototype=U.prototype;function O(B,se,pe){this.props=B,this.context=se,this.refs=k,this.updater=pe||C}var Z=O.prototype=new q;Z.constructor=O,N(Z,U.prototype),Z.isPureReactComponent=!0;var te=Array.isArray;function H(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function V(B,se,pe){var ge=pe.ref;return{$$typeof:n,type:B,key:se,ref:ge!==void 0?ge:null,props:pe}}function M(B,se){return V(B.type,se,B.props)}function D(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function j(B){var se={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(pe){return se[pe]})}var P=/\/+/g;function Ce(B,se){return typeof B=="object"&&B!==null&&B.key!=null?j(""+B.key):se.toString(36)}function de(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(H,H):(B.status="pending",B.then(function(se){B.status==="pending"&&(B.status="fulfilled",B.value=se)},function(se){B.status==="pending"&&(B.status="rejected",B.reason=se)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function G(B,se,pe,ge,ke){var je=typeof B;(je==="undefined"||je==="boolean")&&(B=null);var Ye=!1;if(B===null)Ye=!0;else switch(je){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(B.$$typeof){case n:case e:Ye=!0;break;case g:return Ye=B._init,G(Ye(B._payload),se,pe,ge,ke)}}if(Ye)return ke=ke(B),Ye=ge===""?"."+Ce(B,0):ge,te(ke)?(pe="",Ye!=null&&(pe=Ye.replace(P,"$&/")+"/"),G(ke,se,pe,"",function(xa){return xa})):ke!=null&&(D(ke)&&(ke=M(ke,pe+(ke.key==null||B&&B.key===ke.key?"":(""+ke.key).replace(P,"$&/")+"/")+Ye)),se.push(ke)),1;Ye=0;var Wt=ge===""?".":ge+":";if(te(B))for(var vt=0;vt<B.length;vt++)ge=B[vt],je=Wt+Ce(ge,vt),Ye+=G(ge,se,pe,je,ke);else if(vt=S(B),typeof vt=="function")for(B=vt.call(B),vt=0;!(ge=B.next()).done;)ge=ge.value,je=Wt+Ce(ge,vt++),Ye+=G(ge,se,pe,je,ke);else if(je==="object"){if(typeof B.then=="function")return G(de(B),se,pe,ge,ke);throw se=String(B),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function re(B,se,pe){if(B==null)return B;var ge=[],ke=0;return G(B,ge,"","",function(je){return se.call(pe,je,ke++)}),ge}function ce(B){if(B._status===-1){var se=B._result;se=se(),se.then(function(pe){(B._status===0||B._status===-1)&&(B._status=1,B._result=pe)},function(pe){(B._status===0||B._status===-1)&&(B._status=2,B._result=pe)}),B._status===-1&&(B._status=0,B._result=se)}if(B._status===1)return B._result.default;throw B._result}var xe=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},De={map:re,forEach:function(B,se,pe){re(B,function(){se.apply(this,arguments)},pe)},count:function(B){var se=0;return re(B,function(){se++}),se},toArray:function(B){return re(B,function(se){return se})||[]},only:function(B){if(!D(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Pe.Activity=v,Pe.Children=De,Pe.Component=U,Pe.Fragment=t,Pe.Profiler=s,Pe.PureComponent=O,Pe.StrictMode=i,Pe.Suspense=d,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return I.H.useMemoCache(B)}},Pe.cache=function(B){return function(){return B.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(B,se,pe){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ge=N({},B.props),ke=B.key;if(se!=null)for(je in se.key!==void 0&&(ke=""+se.key),se)!A.call(se,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&se.ref===void 0||(ge[je]=se[je]);var je=arguments.length-2;if(je===1)ge.children=pe;else if(1<je){for(var Ye=Array(je),Wt=0;Wt<je;Wt++)Ye[Wt]=arguments[Wt+2];ge.children=Ye}return V(B.type,ke,ge)},Pe.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Pe.createElement=function(B,se,pe){var ge,ke={},je=null;if(se!=null)for(ge in se.key!==void 0&&(je=""+se.key),se)A.call(se,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(ke[ge]=se[ge]);var Ye=arguments.length-2;if(Ye===1)ke.children=pe;else if(1<Ye){for(var Wt=Array(Ye),vt=0;vt<Ye;vt++)Wt[vt]=arguments[vt+2];ke.children=Wt}if(B&&B.defaultProps)for(ge in Ye=B.defaultProps,Ye)ke[ge]===void 0&&(ke[ge]=Ye[ge]);return V(B,je,ke)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(B){return{$$typeof:h,render:B}},Pe.isValidElement=D,Pe.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:ce}},Pe.memo=function(B,se){return{$$typeof:f,type:B,compare:se===void 0?null:se}},Pe.startTransition=function(B){var se=I.T,pe={};I.T=pe;try{var ge=B(),ke=I.S;ke!==null&&ke(pe,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(H,xe)}catch(je){xe(je)}finally{se!==null&&pe.types!==null&&(se.types=pe.types),I.T=se}},Pe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Pe.use=function(B){return I.H.use(B)},Pe.useActionState=function(B,se,pe){return I.H.useActionState(B,se,pe)},Pe.useCallback=function(B,se){return I.H.useCallback(B,se)},Pe.useContext=function(B){return I.H.useContext(B)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(B,se){return I.H.useDeferredValue(B,se)},Pe.useEffect=function(B,se){return I.H.useEffect(B,se)},Pe.useEffectEvent=function(B){return I.H.useEffectEvent(B)},Pe.useId=function(){return I.H.useId()},Pe.useImperativeHandle=function(B,se,pe){return I.H.useImperativeHandle(B,se,pe)},Pe.useInsertionEffect=function(B,se){return I.H.useInsertionEffect(B,se)},Pe.useLayoutEffect=function(B,se){return I.H.useLayoutEffect(B,se)},Pe.useMemo=function(B,se){return I.H.useMemo(B,se)},Pe.useOptimistic=function(B,se){return I.H.useOptimistic(B,se)},Pe.useReducer=function(B,se,pe){return I.H.useReducer(B,se,pe)},Pe.useRef=function(B){return I.H.useRef(B)},Pe.useState=function(B){return I.H.useState(B)},Pe.useSyncExternalStore=function(B,se,pe){return I.H.useSyncExternalStore(B,se,pe)},Pe.useTransition=function(){return I.H.useTransition()},Pe.version="19.2.0",Pe}var vw;function Kv(){return vw||(vw=1,Qy.exports=uV()),Qy.exports}var z=Kv();const jf=aV(z);var Yy={exports:{}},Uc={},Xy={exports:{}},Wy={};var _w;function cV(){return _w||(_w=1,(function(n){function e(G,re){var ce=G.length;G.push(re);e:for(;0<ce;){var xe=ce-1>>>1,De=G[xe];if(0<s(De,re))G[xe]=re,G[ce]=De,ce=xe;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var re=G[0],ce=G.pop();if(ce!==re){G[0]=ce;e:for(var xe=0,De=G.length,B=De>>>1;xe<B;){var se=2*(xe+1)-1,pe=G[se],ge=se+1,ke=G[ge];if(0>s(pe,ce))ge<De&&0>s(ke,pe)?(G[xe]=ke,G[ge]=ce,xe=ge):(G[xe]=pe,G[se]=ce,xe=se);else if(ge<De&&0>s(ke,ce))G[xe]=ke,G[ge]=ce,xe=ge;else break e}}return re}function s(G,re){var ce=G.sortIndex-re.sortIndex;return ce!==0?ce:G.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var d=[],f=[],g=1,v=null,_=3,S=!1,C=!1,N=!1,k=!1,U=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function Z(G){for(var re=t(f);re!==null;){if(re.callback===null)i(f);else if(re.startTime<=G)i(f),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(f)}}function te(G){if(N=!1,Z(G),!C)if(t(d)!==null)C=!0,H||(H=!0,j());else{var re=t(f);re!==null&&de(te,re.startTime-G)}}var H=!1,I=-1,A=5,V=-1;function M(){return k?!0:!(n.unstable_now()-V<A)}function D(){if(k=!1,H){var G=n.unstable_now();V=G;var re=!0;try{e:{C=!1,N&&(N=!1,q(I),I=-1),S=!0;var ce=_;try{t:{for(Z(G),v=t(d);v!==null&&!(v.expirationTime>G&&M());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,_=v.priorityLevel;var De=xe(v.expirationTime<=G);if(G=n.unstable_now(),typeof De=="function"){v.callback=De,Z(G),re=!0;break t}v===t(d)&&i(d),Z(G)}else i(d);v=t(d)}if(v!==null)re=!0;else{var B=t(f);B!==null&&de(te,B.startTime-G),re=!1}}break e}finally{v=null,_=ce,S=!1}re=void 0}}finally{re?j():H=!1}}}var j;if(typeof O=="function")j=function(){O(D)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ce=P.port2;P.port1.onmessage=D,j=function(){Ce.postMessage(null)}}else j=function(){U(D,0)};function de(G,re){I=U(function(){G(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(G){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var ce=_;_=re;try{return G()}finally{_=ce}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ce=_;_=G;try{return re()}finally{_=ce}},n.unstable_scheduleCallback=function(G,re,ce){var xe=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?xe+ce:xe):ce=xe,G){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ce+De,G={id:g++,callback:re,priorityLevel:G,startTime:ce,expirationTime:De,sortIndex:-1},ce>xe?(G.sortIndex=ce,e(f,G),t(d)===null&&G===t(f)&&(N?(q(I),I=-1):N=!0,de(te,ce-xe))):(G.sortIndex=De,e(d,G),C||S||(C=!0,H||(H=!0,j()))),G},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(G){var re=_;return function(){var ce=_;_=re;try{return G.apply(this,arguments)}finally{_=ce}}}})(Wy)),Wy}var bw;function hV(){return bw||(bw=1,Xy.exports=cV()),Xy.exports}var Zy={exports:{}},yn={};var Tw;function dV(){if(Tw)return yn;Tw=1;var n=Kv();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:f,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,yn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},yn.flushSync=function(d){var f=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=g,i.d.f()}},yn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},yn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},yn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,v=h(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:S}):g==="script"&&i.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},yn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},yn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=h(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},yn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},yn.requestFormReset=function(d){i.d.r(d)},yn.unstable_batchedUpdates=function(d,f){return d(f)},yn.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},yn.useFormStatus=function(){return l.H.useHostTransitionStatus()},yn.version="19.2.0",yn}var Ew;function fV(){if(Ew)return Zy.exports;Ew=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zy.exports=dV(),Zy.exports}var ww;function mV(){if(ww)return Uc;ww=1;var n=hV(),e=Kv(),t=fV();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function h(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var u=r,c=a;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){u=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return d(p),r;if(y===c)return d(p),a;y=y.sibling}throw Error(i(188))}if(u.return!==c.return)u=p,c=y;else{for(var T=!1,x=p.child;x;){if(x===u){T=!0,u=p,c=y;break}if(x===c){T=!0,c=p,u=y;break}x=x.sibling}if(!T){for(x=y.child;x;){if(x===u){T=!0,u=y,c=p;break}if(x===c){T=!0,c=y,u=p;break}x=x.sibling}if(!T)throw Error(i(189))}}if(u.alternate!==c)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:a}function g(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=g(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),O=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function j(r){return r===null||typeof r!="object"?null:(r=D&&r[D]||r["@@iterator"],typeof r=="function"?r:null)}var P=Symbol.for("react.client.reference");function Ce(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===P?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case U:return"Profiler";case k:return"StrictMode";case te:return"Suspense";case H:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case C:return"Portal";case O:return r.displayName||"Context";case q:return(r._context.displayName||"Context")+".Consumer";case Z:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return a=r.displayName||null,a!==null?a:Ce(r.type)||"Memo";case A:a=r._payload,r=r._init;try{return Ce(r(a))}catch{}}return null}var de=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},xe=[],De=-1;function B(r){return{current:r}}function se(r){0>De||(r.current=xe[De],xe[De]=null,De--)}function pe(r,a){De++,xe[De]=r.current,r.current=a}var ge=B(null),ke=B(null),je=B(null),Ye=B(null);function Wt(r,a){switch(pe(je,a),pe(ke,r),pe(ge,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?jE(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=jE(a),r=zE(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}se(ge),pe(ge,r)}function vt(){se(ge),se(ke),se(je)}function xa(r){r.memoizedState!==null&&pe(Ye,r);var a=ge.current,u=zE(a,r.type);a!==u&&(pe(ke,r),pe(ge,u))}function Uo(r){ke.current===r&&(se(ge),se(ke)),Ye.current===r&&(se(Ye),Pc._currentValue=ce)}var Bo,Fo;function Bi(r){if(Bo===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Bo=a&&a[1]||"",Fo=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bo+r+Fo}var Pu=!1;function Aa(r,a){if(!r||Pu)return"";Pu=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ee){var W=ee}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(ee){W=ee}r.call(oe.prototype)}}else{try{throw Error()}catch(ee){W=ee}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ee){if(ee&&W&&typeof ee.stack=="string")return[ee.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),T=y[0],x=y[1];if(T&&x){var L=T.split(`
`),X=x.split(`
`);for(p=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(c===L.length||p===X.length)for(c=L.length-1,p=X.length-1;1<=c&&0<=p&&L[c]!==X[p];)p--;for(;1<=c&&0<=p;c--,p--)if(L[c]!==X[p]){if(c!==1||p!==1)do if(c--,p--,0>p||L[c]!==X[p]){var ne=`
`+L[c].replace(" at new "," at ");return r.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",r.displayName)),ne}while(1<=c&&0<=p);break}}}finally{Pu=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Bi(u):""}function Ou(r,a){switch(r.tag){case 26:case 27:case 5:return Bi(r.type);case 16:return Bi("Lazy");case 13:return r.child!==a&&a!==null?Bi("Suspense Fallback"):Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return Aa(r.type,!1);case 11:return Aa(r.type.render,!1);case 1:return Aa(r.type,!0);case 31:return Bi("Activity");default:return""}}function Lu(r){try{var a="",u=null;do a+=Ou(r,u),u=r,r=r.return;while(r);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var zt=Object.prototype.hasOwnProperty,Zt=n.unstable_scheduleCallback,hs=n.unstable_cancelCallback,Yp=n.unstable_shouldYield,ld=n.unstable_requestPaint,In=n.unstable_now,Ia=n.unstable_getCurrentPriorityLevel,ju=n.unstable_ImmediatePriority,zu=n.unstable_UserBlockingPriority,ds=n.unstable_NormalPriority,Xp=n.unstable_LowPriority,ud=n.unstable_IdlePriority,cd=n.log,hd=n.unstable_setDisableYieldValue,wi=null,ln=null;function ii(r){if(typeof cd=="function"&&hd(r),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(wi,r)}catch{}}var Nt=Math.clz32?Math.clz32:fd,dd=Math.log,qo=Math.LN2;function fd(r){return r>>>=0,r===0?32:31-(dd(r)/qo|0)|0}var Fi=256,Ra=262144,Ut=4194304;function qi(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Hi(r,a,u){var c=r.pendingLanes;if(c===0)return 0;var p=0,y=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var x=c&134217727;return x!==0?(c=x&~y,c!==0?p=qi(c):(T&=x,T!==0?p=qi(T):u||(u=x&~r,u!==0&&(p=qi(u))))):(x=c&~y,x!==0?p=qi(x):T!==0?p=qi(T):u||(u=c&~r,u!==0&&(p=qi(u)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,u=a&-a,y>=u||y===32&&(u&4194048)!==0)?a:p}function Si(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Wp(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function md(){var r=Ut;return Ut<<=1,(Ut&62914560)===0&&(Ut=4194304),r}function Gi(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function Ca(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Zp(r,a,u,c,p,y){var T=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var x=r.entanglements,L=r.expirationTimes,X=r.hiddenUpdates;for(u=T&~u;0<u;){var ne=31-Nt(u),oe=1<<ne;x[ne]=0,L[ne]=-1;var W=X[ne];if(W!==null)for(X[ne]=null,ne=0;ne<W.length;ne++){var ee=W[ne];ee!==null&&(ee.lane&=-536870913)}u&=~oe}c!==0&&Da(r,c,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(T&~a))}function Da(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var c=31-Nt(a);r.entangledLanes|=a,r.entanglements[c]=r.entanglements[c]|1073741824|u&261930}function Uu(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var c=31-Nt(u),p=1<<c;p&a|r[c]&a&&(r[c]|=a),u&=~p}}function Bu(r,a){var u=a&-a;return u=(u&42)!==0?1:Na(u),(u&(r.suspendedLanes|a))!==0?0:u}function Na(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function xr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function pd(){var r=re.p;return r!==0?r:(r=window.event,r===void 0?32:lw(r.type))}function xi(r,a){var u=re.p;try{return re.p=r,a()}finally{re.p=u}}var Ai=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Ai,rn="__reactProps$"+Ai,$i="__reactContainer$"+Ai,Ho="__reactEvents$"+Ai,Jp="__reactListeners$"+Ai,gd="__reactHandles$"+Ai,yd="__reactResources$"+Ai,Ki="__reactMarker$"+Ai;function Go(r){delete r[Bt],delete r[rn],delete r[Ho],delete r[Jp],delete r[gd]}function Qi(r){var a=r[Bt];if(a)return a;for(var u=r.parentNode;u;){if(a=u[$i]||u[Bt]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=$E(r);r!==null;){if(u=r[Bt])return u;r=$E(r)}return a}r=u,u=r.parentNode}return null}function ri(r){if(r=r[Bt]||r[$i]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Hn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Yi(r){var a=r[yd];return a||(a=r[yd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ft(r){r[Ki]=!0}var Fu=new Set,qu={};function Xi(r,a){Wi(r,a),Wi(r+"Capture",a)}function Wi(r,a){for(qu[r]=a,r=0;r<a.length;r++)Fu.add(a[r])}var Hu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gu={},$u={};function vd(r){return zt.call($u,r)?!0:zt.call(Gu,r)?!1:Hu.test(r)?$u[r]=!0:(Gu[r]=!0,!1)}function $o(r,a,u){if(vd(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function Gn(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function qt(r,a,u,c){if(c===null)r.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+c)}}function sn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function fs(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ku(r,a,u){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return p.call(this)},set:function(T){u=""+T,y.call(this,T)}}),Object.defineProperty(r,a,{enumerable:c.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function it(r){if(!r._valueTracker){var a=fs(r)?"checked":"value";r._valueTracker=Ku(r,a,""+r[a])}}function ka(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),c="";return r&&(c=fs(r)?r.checked?"true":"false":r.value),r=c,r!==u?(a.setValue(r),!0):!1}function Zi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Va=/[\n"\\]/g;function Vn(r){return r.replace(Va,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ko(r,a,u,c,p,y,T,x){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),a!=null?T==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+sn(a)):r.value!==""+sn(a)&&(r.value=""+sn(a)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),a!=null?Qu(r,T,sn(a)):u!=null?Qu(r,T,sn(u)):c!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.name=""+sn(x):r.removeAttribute("name")}function _d(r,a,u,c,p,y,T,x){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){it(r);return}u=u!=null?""+sn(u):"",a=a!=null?""+sn(a):u,x||a===r.value||(r.value=a),r.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=x?r.checked:!!c,r.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),it(r)}function Qu(r,a,u){a==="number"&&Zi(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function ms(r,a,u,c){if(r=r.options,a){a={};for(var p=0;p<u.length;p++)a["$"+u[p]]=!0;for(u=0;u<r.length;u++)p=a.hasOwnProperty("$"+r[u].value),r[u].selected!==p&&(r[u].selected=p),p&&c&&(r[u].defaultSelected=!0)}else{for(u=""+sn(u),a=null,p=0;p<r.length;p++){if(r[p].value===u){r[p].selected=!0,c&&(r[p].defaultSelected=!0);return}a!==null||r[p].disabled||(a=r[p])}a!==null&&(a.selected=!0)}}function bd(r,a,u){if(a!=null&&(a=""+sn(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+sn(u):""}function ps(r,a,u,c){if(a==null){if(c!=null){if(u!=null)throw Error(i(92));if(de(c)){if(1<c.length)throw Error(i(93));c=c[0]}u=c}u==null&&(u=""),a=u}u=sn(a),r.defaultValue=u,c=r.textContent,c===u&&c!==""&&c!==null&&(r.value=c),it(r)}function Mn(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var Td=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yu(r,a,u){var c=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?c?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":c?r.setProperty(a,u):typeof u!="number"||u===0||Td.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function Xu(r,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,u!=null){for(var c in u)!u.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&u[p]!==c&&Yu(r,p,c)}else for(var y in a)a.hasOwnProperty(y)&&Yu(r,y,a[y])}function Qo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ed=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yo(r){return gs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ii(){}var Wu=null;function si(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ys=null,Ji=null;function Ma(r){var a=ri(r);if(a&&(r=a.stateNode)){var u=r[rn]||null;e:switch(r=a.stateNode,a.type){case"input":if(Ko(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Vn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var c=u[a];if(c!==r&&c.form===r.form){var p=c[rn]||null;if(!p)throw Error(i(90));Ko(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<u.length;a++)c=u[a],c.form===r.form&&ka(c)}break e;case"textarea":bd(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&ms(r,!!u.multiple,a,!1)}}}var Xo=!1;function vs(r,a,u){if(Xo)return r(a,u);Xo=!0;try{var c=r(a);return c}finally{if(Xo=!1,(ys!==null||Ji!==null)&&(gf(),ys&&(a=ys,r=Ji,Ji=ys=null,Ma(a),r)))for(a=0;a<r.length;a++)Ma(r[a])}}function Ri(r,a){var u=r.stateNode;if(u===null)return null;var c=u[rn]||null;if(c===null)return null;u=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pa=!1;if(ai)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){Pa=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{Pa=!1}var er=null,Zu=null,Oa=null;function Ju(){if(Oa)return Oa;var r,a=Zu,u=a.length,c,p="value"in er?er.value:er.textContent,y=p.length;for(r=0;r<u&&a[r]===p[r];r++);var T=u-r;for(c=1;c<=T&&a[u-c]===p[y-c];c++);return Oa=p.slice(r,1<c?1-c:void 0)}function La(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Ar(){return!0}function Ci(){return!1}function un(r){function a(u,c,p,y,T){this._reactName=u,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var x in r)r.hasOwnProperty(x)&&(u=r[x],this[x]=u?u(y):y[x]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ar:Ci,this.isPropagationStopped=Ci,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ar)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ar)},persist:function(){},isPersistent:Ar}),a}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=un(Ir),_s=v({},Ir,{view:0,detail:0}),ec=un(_s),bs,Wo,nr,Zo=v({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==nr&&(nr&&r.type==="mousemove"?(bs=r.screenX-nr.screenX,Wo=r.screenY-nr.screenY):Wo=bs=0,nr=r),bs)},movementY:function(r){return"movementY"in r?r.movementY:Wo}}),tc=un(Zo),ja=v({},Zo,{dataTransfer:0}),wd=un(ja),Sd=v({},_s,{relatedTarget:0}),za=un(Sd),nc=v({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),xd=un(nc),Jo=v({},Ir,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ad=un(Jo),Id=v({},Ir,{data:0}),ir=un(Id),Rd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nd(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Dd[r])?!!a[r]:!1}function Ts(){return Nd}var Rn=v({},_s,{key:function(r){if(r.key){var a=Rd[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=La(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Cd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(r){return r.type==="keypress"?La(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?La(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),kd=un(Rn),Vd=v({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rr=un(Vd),m=v({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),b=un(m),E=v({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=un(E),Q=v({},Zo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),J=un(Q),fe=v({},Ir,{newState:0,oldState:0}),Oe=un(fe),kt=[9,13,27,32],et=ai&&"CompositionEvent"in window,_t=null;ai&&"documentMode"in document&&(_t=document.documentMode);var oi=ai&&"TextEvent"in window&&!_t,rr=ai&&(!et||_t&&8<_t&&11>=_t),Di=" ",Ni=!1;function Ua(r,a){switch(r){case"keyup":return kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function el(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var tl=!1;function DN(r,a){switch(r){case"compositionend":return el(a);case"keypress":return a.which!==32?null:(Ni=!0,Di);case"textInput":return r=a.data,r===Di&&Ni?null:r;default:return null}}function NN(r,a){if(tl)return r==="compositionend"||!et&&Ua(r,a)?(r=Ju(),Oa=Zu=er=null,tl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return rr&&a.locale!=="ko"?null:a.data;default:return null}}var kN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yb(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!kN[r.type]:a==="textarea"}function Xb(r,a,u,c){ys?Ji?Ji.push(c):Ji=[c]:ys=c,a=wf(a,"onChange"),0<a.length&&(u=new tr("onChange","change",null,u,c),r.push({event:u,listeners:a}))}var ic=null,rc=null;function VN(r){kE(r,0)}function Md(r){var a=Hn(r);if(ka(a))return r}function Wb(r,a){if(r==="change")return a}var Zb=!1;if(ai){var eg;if(ai){var tg="oninput"in document;if(!tg){var Jb=document.createElement("div");Jb.setAttribute("oninput","return;"),tg=typeof Jb.oninput=="function"}eg=tg}else eg=!1;Zb=eg&&(!document.documentMode||9<document.documentMode)}function eT(){ic&&(ic.detachEvent("onpropertychange",tT),rc=ic=null)}function tT(r){if(r.propertyName==="value"&&Md(rc)){var a=[];Xb(a,rc,r,si(r)),vs(VN,a)}}function MN(r,a,u){r==="focusin"?(eT(),ic=a,rc=u,ic.attachEvent("onpropertychange",tT)):r==="focusout"&&eT()}function PN(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Md(rc)}function ON(r,a){if(r==="click")return Md(a)}function LN(r,a){if(r==="input"||r==="change")return Md(a)}function jN(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var $n=typeof Object.is=="function"?Object.is:jN;function sc(r,a){if($n(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),c=Object.keys(a);if(u.length!==c.length)return!1;for(c=0;c<u.length;c++){var p=u[c];if(!zt.call(a,p)||!$n(r[p],a[p]))return!1}return!0}function nT(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function iT(r,a){var u=nT(r);r=0;for(var c;u;){if(u.nodeType===3){if(c=r+u.textContent.length,r<=a&&c>=a)return{node:u,offset:a-r};r=c}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=nT(u)}}function rT(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?rT(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function sT(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Zi(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=Zi(r.document)}return a}function ng(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var zN=ai&&"documentMode"in document&&11>=document.documentMode,nl=null,ig=null,ac=null,rg=!1;function aT(r,a,u){var c=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;rg||nl==null||nl!==Zi(c)||(c=nl,"selectionStart"in c&&ng(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ac&&sc(ac,c)||(ac=c,c=wf(ig,"onSelect"),0<c.length&&(a=new tr("onSelect","select",null,a,u),r.push({event:a,listeners:c}),a.target=nl)))}function Ba(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var il={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},sg={},oT={};ai&&(oT=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function Fa(r){if(sg[r])return sg[r];if(!il[r])return r;var a=il[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in oT)return sg[r]=a[u];return r}var lT=Fa("animationend"),uT=Fa("animationiteration"),cT=Fa("animationstart"),UN=Fa("transitionrun"),BN=Fa("transitionstart"),FN=Fa("transitioncancel"),hT=Fa("transitionend"),dT=new Map,ag="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ag.push("scrollEnd");function ki(r,a){dT.set(r,a),Xi(a,[r])}var Pd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},li=[],rl=0,og=0;function Od(){for(var r=rl,a=og=rl=0;a<r;){var u=li[a];li[a++]=null;var c=li[a];li[a++]=null;var p=li[a];li[a++]=null;var y=li[a];if(li[a++]=null,c!==null&&p!==null){var T=c.pending;T===null?p.next=p:(p.next=T.next,T.next=p),c.pending=p}y!==0&&fT(u,p,y)}}function Ld(r,a,u,c){li[rl++]=r,li[rl++]=a,li[rl++]=u,li[rl++]=c,og|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function lg(r,a,u,c){return Ld(r,a,u,c),jd(r)}function qa(r,a){return Ld(r,null,null,a),jd(r)}function fT(r,a,u){r.lanes|=u;var c=r.alternate;c!==null&&(c.lanes|=u);for(var p=!1,y=r.return;y!==null;)y.childLanes|=u,c=y.alternate,c!==null&&(c.childLanes|=u),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&a!==null&&(p=31-Nt(u),r=y.hiddenUpdates,c=r[p],c===null?r[p]=[a]:c.push(a),a.lane=u|536870912),y):null}function jd(r){if(50<Rc)throw Rc=0,yy=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var sl={};function qN(r,a,u,c){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(r,a,u,c){return new qN(r,a,u,c)}function ug(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Cr(r,a){var u=r.alternate;return u===null?(u=Kn(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function mT(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function zd(r,a,u,c,p,y){var T=0;if(c=r,typeof r=="function")ug(r)&&(T=1);else if(typeof r=="string")T=Qk(r,u,ge.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=Kn(31,u,a,p),r.elementType=V,r.lanes=y,r;case N:return Ha(u.children,p,y,a);case k:T=8,p|=24;break;case U:return r=Kn(12,u,a,p|2),r.elementType=U,r.lanes=y,r;case te:return r=Kn(13,u,a,p),r.elementType=te,r.lanes=y,r;case H:return r=Kn(19,u,a,p),r.elementType=H,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:T=10;break e;case q:T=9;break e;case Z:T=11;break e;case I:T=14;break e;case A:T=16,c=null;break e}T=29,u=Error(i(130,r===null?"null":typeof r,"")),c=null}return a=Kn(T,u,a,p),a.elementType=r,a.type=c,a.lanes=y,a}function Ha(r,a,u,c){return r=Kn(7,r,c,a),r.lanes=u,r}function cg(r,a,u){return r=Kn(6,r,null,a),r.lanes=u,r}function pT(r){var a=Kn(18,null,null,0);return a.stateNode=r,a}function hg(r,a,u){return a=Kn(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var gT=new WeakMap;function ui(r,a){if(typeof r=="object"&&r!==null){var u=gT.get(r);return u!==void 0?u:(a={value:r,source:a,stack:Lu(a)},gT.set(r,a),a)}return{value:r,source:a,stack:Lu(a)}}var al=[],ol=0,Ud=null,oc=0,ci=[],hi=0,Es=null,sr=1,ar="";function Dr(r,a){al[ol++]=oc,al[ol++]=Ud,Ud=r,oc=a}function yT(r,a,u){ci[hi++]=sr,ci[hi++]=ar,ci[hi++]=Es,Es=r;var c=sr;r=ar;var p=32-Nt(c)-1;c&=~(1<<p),u+=1;var y=32-Nt(a)+p;if(30<y){var T=p-p%5;y=(c&(1<<T)-1).toString(32),c>>=T,p-=T,sr=1<<32-Nt(a)+p|u<<p|c,ar=y+r}else sr=1<<y|u<<p|c,ar=r}function dg(r){r.return!==null&&(Dr(r,1),yT(r,1,0))}function fg(r){for(;r===Ud;)Ud=al[--ol],al[ol]=null,oc=al[--ol],al[ol]=null;for(;r===Es;)Es=ci[--hi],ci[hi]=null,ar=ci[--hi],ci[hi]=null,sr=ci[--hi],ci[hi]=null}function vT(r,a){ci[hi++]=sr,ci[hi++]=ar,ci[hi++]=Es,sr=a.id,ar=a.overflow,Es=r}var cn=null,gt=null,Qe=!1,ws=null,di=!1,mg=Error(i(519));function Ss(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lc(ui(a,r)),mg}function _T(r){var a=r.stateNode,u=r.type,c=r.memoizedProps;switch(a[Bt]=r,a[rn]=c,u){case"dialog":Fe("cancel",a),Fe("close",a);break;case"iframe":case"object":case"embed":Fe("load",a);break;case"video":case"audio":for(u=0;u<Dc.length;u++)Fe(Dc[u],a);break;case"source":Fe("error",a);break;case"img":case"image":case"link":Fe("error",a),Fe("load",a);break;case"details":Fe("toggle",a);break;case"input":Fe("invalid",a),_d(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Fe("invalid",a);break;case"textarea":Fe("invalid",a),ps(a,c.value,c.defaultValue,c.children)}u=c.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||c.suppressHydrationWarning===!0||OE(a.textContent,u)?(c.popover!=null&&(Fe("beforetoggle",a),Fe("toggle",a)),c.onScroll!=null&&Fe("scroll",a),c.onScrollEnd!=null&&Fe("scrollend",a),c.onClick!=null&&(a.onclick=Ii),a=!0):a=!1,a||Ss(r,!0)}function bT(r){for(cn=r.return;cn;)switch(cn.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:cn=cn.return}}function ll(r){if(r!==cn)return!1;if(!Qe)return bT(r),Qe=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||ky(r.type,r.memoizedProps)),u=!u),u&&gt&&Ss(r),bT(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));gt=GE(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));gt=GE(r)}else a===27?(a=gt,js(r.type)?(r=Ly,Ly=null,gt=r):gt=a):gt=cn?mi(r.stateNode.nextSibling):null;return!0}function Ga(){gt=cn=null,Qe=!1}function pg(){var r=ws;return r!==null&&(jn===null?jn=r:jn.push.apply(jn,r),ws=null),r}function lc(r){ws===null?ws=[r]:ws.push(r)}var gg=B(null),$a=null,Nr=null;function xs(r,a,u){pe(gg,a._currentValue),a._currentValue=u}function kr(r){r._currentValue=gg.current,se(gg)}function yg(r,a,u){for(;r!==null;){var c=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),r===u)break;r=r.return}}function vg(r,a,u,c){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var x=y;y=p;for(var L=0;L<a.length;L++)if(x.context===a[L]){y.lanes|=u,x=y.alternate,x!==null&&(x.lanes|=u),yg(y.return,u,r),c||(T=null);break e}y=x.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(i(341));T.lanes|=u,y=T.alternate,y!==null&&(y.lanes|=u),yg(T,u,r),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===r){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function ul(r,a,u,c){r=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var x=p.type;$n(p.pendingProps.value,T.value)||(r!==null?r.push(x):r=[x])}}else if(p===Ye.current){if(T=p.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Pc):r=[Pc])}p=p.return}r!==null&&vg(a,r,u,c),a.flags|=262144}function Bd(r){for(r=r.firstContext;r!==null;){if(!$n(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ka(r){$a=r,Nr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function hn(r){return TT($a,r)}function Fd(r,a){return $a===null&&Ka(r),TT(r,a)}function TT(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Nr===null){if(r===null)throw Error(i(308));Nr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Nr=Nr.next=a;return u}var HN=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,c){r.push(c)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},GN=n.unstable_scheduleCallback,$N=n.unstable_NormalPriority,Ht={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _g(){return{controller:new HN,data:new Map,refCount:0}}function uc(r){r.refCount--,r.refCount===0&&GN($N,function(){r.controller.abort()})}var cc=null,bg=0,cl=0,hl=null;function KN(r,a){if(cc===null){var u=cc=[];bg=0,cl=wy(),hl={status:"pending",value:void 0,then:function(c){u.push(c)}}}return bg++,a.then(ET,ET),a}function ET(){if(--bg===0&&cc!==null){hl!==null&&(hl.status="fulfilled");var r=cc;cc=null,cl=0,hl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function QN(r,a){var u=[],c={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return r.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<u.length;p++)(0,u[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),c}var wT=G.S;G.S=function(r,a){aE=In(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&KN(r,a),wT!==null&&wT(r,a)};var Qa=B(null);function Tg(){var r=Qa.current;return r!==null?r:ft.pooledCache}function qd(r,a){a===null?pe(Qa,Qa.current):pe(Qa,a.pool)}function ST(){var r=Tg();return r===null?null:{parent:Ht._currentValue,pool:r}}var dl=Error(i(460)),Eg=Error(i(474)),Hd=Error(i(542)),Gd={then:function(){}};function xT(r){return r=r.status,r==="fulfilled"||r==="rejected"}function AT(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then(Ii,Ii),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,RT(r),r;default:if(typeof a.status=="string")a.then(Ii,Ii);else{if(r=ft,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,RT(r),r}throw Xa=a,dl}}function Ya(r){try{var a=r._init;return a(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Xa=u,dl):u}}var Xa=null;function IT(){if(Xa===null)throw Error(i(459));var r=Xa;return Xa=null,r}function RT(r){if(r===dl||r===Hd)throw Error(i(483))}var fl=null,hc=0;function $d(r){var a=hc;return hc+=1,fl===null&&(fl=[]),AT(fl,r,a)}function dc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Kd(r,a){throw a.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function CT(r){function a($,F){if(r){var Y=$.deletions;Y===null?($.deletions=[F],$.flags|=16):Y.push(F)}}function u($,F){if(!r)return null;for(;F!==null;)a($,F),F=F.sibling;return null}function c($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function p($,F){return $=Cr($,F),$.index=0,$.sibling=null,$}function y($,F,Y){return $.index=Y,r?(Y=$.alternate,Y!==null?(Y=Y.index,Y<F?($.flags|=67108866,F):Y):($.flags|=67108866,F)):($.flags|=1048576,F)}function T($){return r&&$.alternate===null&&($.flags|=67108866),$}function x($,F,Y,ae){return F===null||F.tag!==6?(F=cg(Y,$.mode,ae),F.return=$,F):(F=p(F,Y),F.return=$,F)}function L($,F,Y,ae){var we=Y.type;return we===N?ne($,F,Y.props.children,ae,Y.key):F!==null&&(F.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===A&&Ya(we)===F.type)?(F=p(F,Y.props),dc(F,Y),F.return=$,F):(F=zd(Y.type,Y.key,Y.props,null,$.mode,ae),dc(F,Y),F.return=$,F)}function X($,F,Y,ae){return F===null||F.tag!==4||F.stateNode.containerInfo!==Y.containerInfo||F.stateNode.implementation!==Y.implementation?(F=hg(Y,$.mode,ae),F.return=$,F):(F=p(F,Y.children||[]),F.return=$,F)}function ne($,F,Y,ae,we){return F===null||F.tag!==7?(F=Ha(Y,$.mode,ae,we),F.return=$,F):(F=p(F,Y),F.return=$,F)}function oe($,F,Y){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=cg(""+F,$.mode,Y),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return Y=zd(F.type,F.key,F.props,null,$.mode,Y),dc(Y,F),Y.return=$,Y;case C:return F=hg(F,$.mode,Y),F.return=$,F;case A:return F=Ya(F),oe($,F,Y)}if(de(F)||j(F))return F=Ha(F,$.mode,Y,null),F.return=$,F;if(typeof F.then=="function")return oe($,$d(F),Y);if(F.$$typeof===O)return oe($,Fd($,F),Y);Kd($,F)}return null}function W($,F,Y,ae){var we=F!==null?F.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return we!==null?null:x($,F,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return Y.key===we?L($,F,Y,ae):null;case C:return Y.key===we?X($,F,Y,ae):null;case A:return Y=Ya(Y),W($,F,Y,ae)}if(de(Y)||j(Y))return we!==null?null:ne($,F,Y,ae,null);if(typeof Y.then=="function")return W($,F,$d(Y),ae);if(Y.$$typeof===O)return W($,F,Fd($,Y),ae);Kd($,Y)}return null}function ee($,F,Y,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return $=$.get(Y)||null,x(F,$,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return $=$.get(ae.key===null?Y:ae.key)||null,L(F,$,ae,we);case C:return $=$.get(ae.key===null?Y:ae.key)||null,X(F,$,ae,we);case A:return ae=Ya(ae),ee($,F,Y,ae,we)}if(de(ae)||j(ae))return $=$.get(Y)||null,ne(F,$,ae,we,null);if(typeof ae.then=="function")return ee($,F,Y,$d(ae),we);if(ae.$$typeof===O)return ee($,F,Y,Fd(F,ae),we);Kd(F,ae)}return null}function ve($,F,Y,ae){for(var we=null,We=null,be=F,ze=F=0,Ge=null;be!==null&&ze<Y.length;ze++){be.index>ze?(Ge=be,be=null):Ge=be.sibling;var Ze=W($,be,Y[ze],ae);if(Ze===null){be===null&&(be=Ge);break}r&&be&&Ze.alternate===null&&a($,be),F=y(Ze,F,ze),We===null?we=Ze:We.sibling=Ze,We=Ze,be=Ge}if(ze===Y.length)return u($,be),Qe&&Dr($,ze),we;if(be===null){for(;ze<Y.length;ze++)be=oe($,Y[ze],ae),be!==null&&(F=y(be,F,ze),We===null?we=be:We.sibling=be,We=be);return Qe&&Dr($,ze),we}for(be=c(be);ze<Y.length;ze++)Ge=ee(be,$,ze,Y[ze],ae),Ge!==null&&(r&&Ge.alternate!==null&&be.delete(Ge.key===null?ze:Ge.key),F=y(Ge,F,ze),We===null?we=Ge:We.sibling=Ge,We=Ge);return r&&be.forEach(function(qs){return a($,qs)}),Qe&&Dr($,ze),we}function Ae($,F,Y,ae){if(Y==null)throw Error(i(151));for(var we=null,We=null,be=F,ze=F=0,Ge=null,Ze=Y.next();be!==null&&!Ze.done;ze++,Ze=Y.next()){be.index>ze?(Ge=be,be=null):Ge=be.sibling;var qs=W($,be,Ze.value,ae);if(qs===null){be===null&&(be=Ge);break}r&&be&&qs.alternate===null&&a($,be),F=y(qs,F,ze),We===null?we=qs:We.sibling=qs,We=qs,be=Ge}if(Ze.done)return u($,be),Qe&&Dr($,ze),we;if(be===null){for(;!Ze.done;ze++,Ze=Y.next())Ze=oe($,Ze.value,ae),Ze!==null&&(F=y(Ze,F,ze),We===null?we=Ze:We.sibling=Ze,We=Ze);return Qe&&Dr($,ze),we}for(be=c(be);!Ze.done;ze++,Ze=Y.next())Ze=ee(be,$,ze,Ze.value,ae),Ze!==null&&(r&&Ze.alternate!==null&&be.delete(Ze.key===null?ze:Ze.key),F=y(Ze,F,ze),We===null?we=Ze:We.sibling=Ze,We=Ze);return r&&be.forEach(function(sV){return a($,sV)}),Qe&&Dr($,ze),we}function ht($,F,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===N&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:e:{for(var we=Y.key;F!==null;){if(F.key===we){if(we=Y.type,we===N){if(F.tag===7){u($,F.sibling),ae=p(F,Y.props.children),ae.return=$,$=ae;break e}}else if(F.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===A&&Ya(we)===F.type){u($,F.sibling),ae=p(F,Y.props),dc(ae,Y),ae.return=$,$=ae;break e}u($,F);break}else a($,F);F=F.sibling}Y.type===N?(ae=Ha(Y.props.children,$.mode,ae,Y.key),ae.return=$,$=ae):(ae=zd(Y.type,Y.key,Y.props,null,$.mode,ae),dc(ae,Y),ae.return=$,$=ae)}return T($);case C:e:{for(we=Y.key;F!==null;){if(F.key===we)if(F.tag===4&&F.stateNode.containerInfo===Y.containerInfo&&F.stateNode.implementation===Y.implementation){u($,F.sibling),ae=p(F,Y.children||[]),ae.return=$,$=ae;break e}else{u($,F);break}else a($,F);F=F.sibling}ae=hg(Y,$.mode,ae),ae.return=$,$=ae}return T($);case A:return Y=Ya(Y),ht($,F,Y,ae)}if(de(Y))return ve($,F,Y,ae);if(j(Y)){if(we=j(Y),typeof we!="function")throw Error(i(150));return Y=we.call(Y),Ae($,F,Y,ae)}if(typeof Y.then=="function")return ht($,F,$d(Y),ae);if(Y.$$typeof===O)return ht($,F,Fd($,Y),ae);Kd($,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,F!==null&&F.tag===6?(u($,F.sibling),ae=p(F,Y),ae.return=$,$=ae):(u($,F),ae=cg(Y,$.mode,ae),ae.return=$,$=ae),T($)):u($,F)}return function($,F,Y,ae){try{hc=0;var we=ht($,F,Y,ae);return fl=null,we}catch(be){if(be===dl||be===Hd)throw be;var We=Kn(29,be,null,$.mode);return We.lanes=ae,We.return=$,We}finally{}}}var Wa=CT(!0),DT=CT(!1),As=!1;function wg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sg(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Is(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Rs(r,a,u){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=jd(r),fT(r,null,u),a}return Ld(r,c,a,u),jd(r)}function fc(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var c=a.lanes;c&=r.pendingLanes,u|=c,a.lanes=u,Uu(r,u)}}function xg(r,a){var u=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,u===c)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var T={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,u=u.next}while(u!==null);y===null?p=y=a:y=y.next=a}else p=y=a;u={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var Ag=!1;function mc(){if(Ag){var r=hl;if(r!==null)throw r}}function pc(r,a,u,c){Ag=!1;var p=r.updateQueue;As=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,x=p.shared.pending;if(x!==null){p.shared.pending=null;var L=x,X=L.next;L.next=null,T===null?y=X:T.next=X,T=L;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,x=ne.lastBaseUpdate,x!==T&&(x===null?ne.firstBaseUpdate=X:x.next=X,ne.lastBaseUpdate=L))}if(y!==null){var oe=p.baseState;T=0,ne=X=L=null,x=y;do{var W=x.lane&-536870913,ee=W!==x.lane;if(ee?(He&W)===W:(c&W)===W){W!==0&&W===cl&&(Ag=!0),ne!==null&&(ne=ne.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ve=r,Ae=x;W=a;var ht=u;switch(Ae.tag){case 1:if(ve=Ae.payload,typeof ve=="function"){oe=ve.call(ht,oe,W);break e}oe=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ae.payload,W=typeof ve=="function"?ve.call(ht,oe,W):ve,W==null)break e;oe=v({},oe,W);break e;case 2:As=!0}}W=x.callback,W!==null&&(r.flags|=64,ee&&(r.flags|=8192),ee=p.callbacks,ee===null?p.callbacks=[W]:ee.push(W))}else ee={lane:W,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ne===null?(X=ne=ee,L=oe):ne=ne.next=ee,T|=W;if(x=x.next,x===null){if(x=p.shared.pending,x===null)break;ee=x,x=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);ne===null&&(L=oe),p.baseState=L,p.firstBaseUpdate=X,p.lastBaseUpdate=ne,y===null&&(p.shared.lanes=0),Vs|=T,r.lanes=T,r.memoizedState=oe}}function NT(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function kT(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)NT(u[r],a)}var ml=B(null),Qd=B(0);function VT(r,a){r=Br,pe(Qd,r),pe(ml,a),Br=r|a.baseLanes}function Ig(){pe(Qd,Br),pe(ml,ml.current)}function Rg(){Br=Qd.current,se(ml),se(Qd)}var Qn=B(null),fi=null;function Cs(r){var a=r.alternate;pe(Vt,Vt.current&1),pe(Qn,r),fi===null&&(a===null||ml.current!==null||a.memoizedState!==null)&&(fi=r)}function Cg(r){pe(Vt,Vt.current),pe(Qn,r),fi===null&&(fi=r)}function MT(r){r.tag===22?(pe(Vt,Vt.current),pe(Qn,r),fi===null&&(fi=r)):Ds()}function Ds(){pe(Vt,Vt.current),pe(Qn,Qn.current)}function Yn(r){se(Qn),fi===r&&(fi=null),se(Vt)}var Vt=B(0);function Yd(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Py(u)||Oy(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Vr=0,Le=null,ut=null,Gt=null,Xd=!1,pl=!1,Za=!1,Wd=0,gc=0,gl=null,YN=0;function It(){throw Error(i(321))}function Dg(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!$n(r[u],a[u]))return!1;return!0}function Ng(r,a,u,c,p,y){return Vr=y,Le=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=r===null||r.memoizedState===null?y1:$g,Za=!1,y=u(c,p),Za=!1,pl&&(y=OT(a,u,c,p)),PT(r),y}function PT(r){G.H=_c;var a=ut!==null&&ut.next!==null;if(Vr=0,Gt=ut=Le=null,Xd=!1,gc=0,gl=null,a)throw Error(i(300));r===null||$t||(r=r.dependencies,r!==null&&Bd(r)&&($t=!0))}function OT(r,a,u,c){Le=r;var p=0;do{if(pl&&(gl=null),gc=0,pl=!1,25<=p)throw Error(i(301));if(p+=1,Gt=ut=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=v1,y=a(u,c)}while(pl);return y}function XN(){var r=G.H,a=r.useState()[0];return a=typeof a.then=="function"?yc(a):a,r=r.useState()[0],(ut!==null?ut.memoizedState:null)!==r&&(Le.flags|=1024),a}function kg(){var r=Wd!==0;return Wd=0,r}function Vg(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function Mg(r){if(Xd){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Xd=!1}Vr=0,Gt=ut=Le=null,pl=!1,gc=Wd=0,gl=null}function Cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Le.memoizedState=Gt=r:Gt=Gt.next=r,Gt}function Mt(){if(ut===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=ut.next;var a=Gt===null?Le.memoizedState:Gt.next;if(a!==null)Gt=a,ut=r;else{if(r===null)throw Le.alternate===null?Error(i(467)):Error(i(310));ut=r,r={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Gt===null?Le.memoizedState=Gt=r:Gt=Gt.next=r}return Gt}function Zd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yc(r){var a=gc;return gc+=1,gl===null&&(gl=[]),r=AT(gl,r,a),a=Le,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?y1:$g),r}function Jd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return yc(r);if(r.$$typeof===O)return hn(r)}throw Error(i(438,String(r)))}function Pg(r){var a=null,u=Le.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var c=Le.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Zd(),Le.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),c=0;c<r;c++)u[c]=M;return a.index++,u}function Mr(r,a){return typeof a=="function"?a(r):a}function ef(r){var a=Mt();return Og(a,ut,r)}function Og(r,a,u){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=u;var p=r.baseQueue,y=c.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}a.baseQueue=p=y,c.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{a=p.next;var x=T=null,L=null,X=a,ne=!1;do{var oe=X.lane&-536870913;if(oe!==X.lane?(He&oe)===oe:(Vr&oe)===oe){var W=X.revertLane;if(W===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),oe===cl&&(ne=!0);else if((Vr&W)===W){X=X.next,W===cl&&(ne=!0);continue}else oe={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(x=L=oe,T=y):L=L.next=oe,Le.lanes|=W,Vs|=W;oe=X.action,Za&&u(y,oe),y=X.hasEagerState?X.eagerState:u(y,oe)}else W={lane:oe,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(x=L=W,T=y):L=L.next=W,Le.lanes|=oe,Vs|=oe;X=X.next}while(X!==null&&X!==a);if(L===null?T=y:L.next=x,!$n(y,r.memoizedState)&&($t=!0,ne&&(u=hl,u!==null)))throw u;r.memoizedState=y,r.baseState=T,r.baseQueue=L,c.lastRenderedState=y}return p===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Lg(r){var a=Mt(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var c=u.dispatch,p=u.pending,y=a.memoizedState;if(p!==null){u.pending=null;var T=p=p.next;do y=r(y,T.action),T=T.next;while(T!==p);$n(y,a.memoizedState)||($t=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),u.lastRenderedState=y}return[y,c]}function LT(r,a,u){var c=Le,p=Mt(),y=Qe;if(y){if(u===void 0)throw Error(i(407));u=u()}else u=a();var T=!$n((ut||p).memoizedState,u);if(T&&(p.memoizedState=u,$t=!0),p=p.queue,Ug(UT.bind(null,c,p,r),[r]),p.getSnapshot!==a||T||Gt!==null&&Gt.memoizedState.tag&1){if(c.flags|=2048,yl(9,{destroy:void 0},zT.bind(null,c,p,u,a),null),ft===null)throw Error(i(349));y||(Vr&127)!==0||jT(c,a,u)}return u}function jT(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=Le.updateQueue,a===null?(a=Zd(),Le.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function zT(r,a,u,c){a.value=u,a.getSnapshot=c,BT(a)&&FT(r)}function UT(r,a,u){return u(function(){BT(a)&&FT(r)})}function BT(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!$n(r,u)}catch{return!0}}function FT(r){var a=qa(r,2);a!==null&&zn(a,r,2)}function jg(r){var a=Cn();if(typeof r=="function"){var u=r;if(r=u(),Za){ii(!0);try{u()}finally{ii(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:r},a}function qT(r,a,u,c){return r.baseState=u,Og(r,ut,typeof c=="function"?c:Mr)}function WN(r,a,u,c,p){if(rf(r))throw Error(i(485));if(r=a.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};G.T!==null?u(!0):y.isTransition=!1,c(y),u=a.pending,u===null?(y.next=a.pending=y,HT(a,y)):(y.next=u.next,a.pending=u.next=y)}}function HT(r,a){var u=a.action,c=a.payload,p=r.state;if(a.isTransition){var y=G.T,T={};G.T=T;try{var x=u(p,c),L=G.S;L!==null&&L(T,x),GT(r,a,x)}catch(X){zg(r,a,X)}finally{y!==null&&T.types!==null&&(y.types=T.types),G.T=y}}else try{y=u(p,c),GT(r,a,y)}catch(X){zg(r,a,X)}}function GT(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(c){$T(r,a,c)},function(c){return zg(r,a,c)}):$T(r,a,u)}function $T(r,a,u){a.status="fulfilled",a.value=u,KT(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,HT(r,u)))}function zg(r,a,u){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=u,KT(a),a=a.next;while(a!==c)}r.action=null}function KT(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function QT(r,a){return a}function YT(r,a){if(Qe){var u=ft.formState;if(u!==null){e:{var c=Le;if(Qe){if(gt){t:{for(var p=gt,y=di;p.nodeType!==8;){if(!y){p=null;break t}if(p=mi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){gt=mi(p.nextSibling),c=p.data==="F!";break e}}Ss(c)}c=!1}c&&(a=u[0])}}return u=Cn(),u.memoizedState=u.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QT,lastRenderedState:a},u.queue=c,u=m1.bind(null,Le,c),c.dispatch=u,c=jg(!1),y=Gg.bind(null,Le,!1,c.queue),c=Cn(),p={state:a,dispatch:null,action:r,pending:null},c.queue=p,u=WN.bind(null,Le,p,y,u),p.dispatch=u,c.memoizedState=r,[a,u,!1]}function XT(r){var a=Mt();return WT(a,ut,r)}function WT(r,a,u){if(a=Og(r,a,QT)[0],r=ef(Mr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=yc(a)}catch(T){throw T===dl?Hd:T}else c=a;a=Mt();var p=a.queue,y=p.dispatch;return u!==a.memoizedState&&(Le.flags|=2048,yl(9,{destroy:void 0},ZN.bind(null,p,u),null)),[c,y,r]}function ZN(r,a){r.action=a}function ZT(r){var a=Mt(),u=ut;if(u!==null)return WT(a,u,r);Mt(),a=a.memoizedState,u=Mt();var c=u.queue.dispatch;return u.memoizedState=r,[a,c,!1]}function yl(r,a,u,c){return r={tag:r,create:u,deps:c,inst:a,next:null},a=Le.updateQueue,a===null&&(a=Zd(),Le.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(c=u.next,u.next=r,r.next=c,a.lastEffect=r),r}function JT(){return Mt().memoizedState}function tf(r,a,u,c){var p=Cn();Le.flags|=r,p.memoizedState=yl(1|a,{destroy:void 0},u,c===void 0?null:c)}function nf(r,a,u,c){var p=Mt();c=c===void 0?null:c;var y=p.memoizedState.inst;ut!==null&&c!==null&&Dg(c,ut.memoizedState.deps)?p.memoizedState=yl(a,y,u,c):(Le.flags|=r,p.memoizedState=yl(1|a,y,u,c))}function e1(r,a){tf(8390656,8,r,a)}function Ug(r,a){nf(2048,8,r,a)}function JN(r){Le.flags|=4;var a=Le.updateQueue;if(a===null)a=Zd(),Le.updateQueue=a,a.events=[r];else{var u=a.events;u===null?a.events=[r]:u.push(r)}}function t1(r){var a=Mt().memoizedState;return JN({ref:a,nextImpl:r}),function(){if((tt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function n1(r,a){return nf(4,2,r,a)}function i1(r,a){return nf(4,4,r,a)}function r1(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function s1(r,a,u){u=u!=null?u.concat([r]):null,nf(4,4,r1.bind(null,a,r),u)}function Bg(){}function a1(r,a){var u=Mt();a=a===void 0?null:a;var c=u.memoizedState;return a!==null&&Dg(a,c[1])?c[0]:(u.memoizedState=[r,a],r)}function o1(r,a){var u=Mt();a=a===void 0?null:a;var c=u.memoizedState;if(a!==null&&Dg(a,c[1]))return c[0];if(c=r(),Za){ii(!0);try{r()}finally{ii(!1)}}return u.memoizedState=[c,a],c}function Fg(r,a,u){return u===void 0||(Vr&1073741824)!==0&&(He&261930)===0?r.memoizedState=a:(r.memoizedState=u,r=lE(),Le.lanes|=r,Vs|=r,u)}function l1(r,a,u,c){return $n(u,a)?u:ml.current!==null?(r=Fg(r,u,c),$n(r,a)||($t=!0),r):(Vr&42)===0||(Vr&1073741824)!==0&&(He&261930)===0?($t=!0,r.memoizedState=u):(r=lE(),Le.lanes|=r,Vs|=r,a)}function u1(r,a,u,c,p){var y=re.p;re.p=y!==0&&8>y?y:8;var T=G.T,x={};G.T=x,Gg(r,!1,a,u);try{var L=p(),X=G.S;if(X!==null&&X(x,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ne=QN(L,c);vc(r,a,ne,Zn(r))}else vc(r,a,c,Zn(r))}catch(oe){vc(r,a,{then:function(){},status:"rejected",reason:oe},Zn())}finally{re.p=y,T!==null&&x.types!==null&&(T.types=x.types),G.T=T}}function ek(){}function qg(r,a,u,c){if(r.tag!==5)throw Error(i(476));var p=c1(r).queue;u1(r,p,a,ce,u===null?ek:function(){return h1(r),u(c)})}function c1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:ce},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function h1(r){var a=c1(r);a.next===null&&(a=r.alternate.memoizedState),vc(r,a.next.queue,{},Zn())}function Hg(){return hn(Pc)}function d1(){return Mt().memoizedState}function f1(){return Mt().memoizedState}function tk(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=Zn();r=Is(u);var c=Rs(a,r,u);c!==null&&(zn(c,a,u),fc(c,a,u)),a={cache:_g()},r.payload=a;return}a=a.return}}function nk(r,a,u){var c=Zn();u={lane:c,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},rf(r)?p1(a,u):(u=lg(r,a,u,c),u!==null&&(zn(u,r,c),g1(u,a,c)))}function m1(r,a,u){var c=Zn();vc(r,a,u,c)}function vc(r,a,u,c){var p={lane:c,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(rf(r))p1(a,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,x=y(T,u);if(p.hasEagerState=!0,p.eagerState=x,$n(x,T))return Ld(r,a,p,0),ft===null&&Od(),!1}catch{}finally{}if(u=lg(r,a,p,c),u!==null)return zn(u,r,c),g1(u,a,c),!0}return!1}function Gg(r,a,u,c){if(c={lane:2,revertLane:wy(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},rf(r)){if(a)throw Error(i(479))}else a=lg(r,u,c,2),a!==null&&zn(a,r,2)}function rf(r){var a=r.alternate;return r===Le||a!==null&&a===Le}function p1(r,a){pl=Xd=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function g1(r,a,u){if((u&4194048)!==0){var c=a.lanes;c&=r.pendingLanes,u|=c,a.lanes=u,Uu(r,u)}}var _c={readContext:hn,use:Jd,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};_c.useEffectEvent=It;var y1={readContext:hn,use:Jd,useCallback:function(r,a){return Cn().memoizedState=[r,a===void 0?null:a],r},useContext:hn,useEffect:e1,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,tf(4194308,4,r1.bind(null,a,r),u)},useLayoutEffect:function(r,a){return tf(4194308,4,r,a)},useInsertionEffect:function(r,a){tf(4,2,r,a)},useMemo:function(r,a){var u=Cn();a=a===void 0?null:a;var c=r();if(Za){ii(!0);try{r()}finally{ii(!1)}}return u.memoizedState=[c,a],c},useReducer:function(r,a,u){var c=Cn();if(u!==void 0){var p=u(a);if(Za){ii(!0);try{u(a)}finally{ii(!1)}}}else p=a;return c.memoizedState=c.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},c.queue=r,r=r.dispatch=nk.bind(null,Le,r),[c.memoizedState,r]},useRef:function(r){var a=Cn();return r={current:r},a.memoizedState=r},useState:function(r){r=jg(r);var a=r.queue,u=m1.bind(null,Le,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:Bg,useDeferredValue:function(r,a){var u=Cn();return Fg(u,r,a)},useTransition:function(){var r=jg(!1);return r=u1.bind(null,Le,r.queue,!0,!1),Cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var c=Le,p=Cn();if(Qe){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),ft===null)throw Error(i(349));(He&127)!==0||jT(c,a,u)}p.memoizedState=u;var y={value:u,getSnapshot:a};return p.queue=y,e1(UT.bind(null,c,y,r),[r]),c.flags|=2048,yl(9,{destroy:void 0},zT.bind(null,c,y,u,a),null),u},useId:function(){var r=Cn(),a=ft.identifierPrefix;if(Qe){var u=ar,c=sr;u=(c&~(1<<32-Nt(c)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Wd++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=YN++,a="_"+a+"r_"+u.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:Hg,useFormState:YT,useActionState:YT,useOptimistic:function(r){var a=Cn();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Gg.bind(null,Le,!0,u),u.dispatch=a,[r,a]},useMemoCache:Pg,useCacheRefresh:function(){return Cn().memoizedState=tk.bind(null,Le)},useEffectEvent:function(r){var a=Cn(),u={impl:r};return a.memoizedState=u,function(){if((tt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},$g={readContext:hn,use:Jd,useCallback:a1,useContext:hn,useEffect:Ug,useImperativeHandle:s1,useInsertionEffect:n1,useLayoutEffect:i1,useMemo:o1,useReducer:ef,useRef:JT,useState:function(){return ef(Mr)},useDebugValue:Bg,useDeferredValue:function(r,a){var u=Mt();return l1(u,ut.memoizedState,r,a)},useTransition:function(){var r=ef(Mr)[0],a=Mt().memoizedState;return[typeof r=="boolean"?r:yc(r),a]},useSyncExternalStore:LT,useId:d1,useHostTransitionStatus:Hg,useFormState:XT,useActionState:XT,useOptimistic:function(r,a){var u=Mt();return qT(u,ut,r,a)},useMemoCache:Pg,useCacheRefresh:f1};$g.useEffectEvent=t1;var v1={readContext:hn,use:Jd,useCallback:a1,useContext:hn,useEffect:Ug,useImperativeHandle:s1,useInsertionEffect:n1,useLayoutEffect:i1,useMemo:o1,useReducer:Lg,useRef:JT,useState:function(){return Lg(Mr)},useDebugValue:Bg,useDeferredValue:function(r,a){var u=Mt();return ut===null?Fg(u,r,a):l1(u,ut.memoizedState,r,a)},useTransition:function(){var r=Lg(Mr)[0],a=Mt().memoizedState;return[typeof r=="boolean"?r:yc(r),a]},useSyncExternalStore:LT,useId:d1,useHostTransitionStatus:Hg,useFormState:ZT,useActionState:ZT,useOptimistic:function(r,a){var u=Mt();return ut!==null?qT(u,ut,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Pg,useCacheRefresh:f1};v1.useEffectEvent=t1;function Kg(r,a,u,c){a=r.memoizedState,u=u(c,a),u=u==null?a:v({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Qg={enqueueSetState:function(r,a,u){r=r._reactInternals;var c=Zn(),p=Is(c);p.payload=a,u!=null&&(p.callback=u),a=Rs(r,p,c),a!==null&&(zn(a,r,c),fc(a,r,c))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var c=Zn(),p=Is(c);p.tag=1,p.payload=a,u!=null&&(p.callback=u),a=Rs(r,p,c),a!==null&&(zn(a,r,c),fc(a,r,c))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Zn(),c=Is(u);c.tag=2,a!=null&&(c.callback=a),a=Rs(r,c,u),a!==null&&(zn(a,r,u),fc(a,r,u))}};function _1(r,a,u,c,p,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,y,T):a.prototype&&a.prototype.isPureReactComponent?!sc(u,c)||!sc(p,y):!0}function b1(r,a,u,c){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,c),a.state!==r&&Qg.enqueueReplaceState(a,a.state,null)}function Ja(r,a){var u=a;if("ref"in a){u={};for(var c in a)c!=="ref"&&(u[c]=a[c])}if(r=r.defaultProps){u===a&&(u=v({},u));for(var p in r)u[p]===void 0&&(u[p]=r[p])}return u}function T1(r){Pd(r)}function E1(r){console.error(r)}function w1(r){Pd(r)}function sf(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function S1(r,a,u){try{var c=r.onCaughtError;c(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Yg(r,a,u){return u=Is(u),u.tag=3,u.payload={element:null},u.callback=function(){sf(r,a)},u}function x1(r){return r=Is(r),r.tag=3,r}function A1(r,a,u,c){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;r.payload=function(){return p(y)},r.callback=function(){S1(a,u,c)}}var T=u.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){S1(a,u,c),typeof p!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function ik(r,a,u,c,p){if(u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=u.alternate,a!==null&&ul(a,u,p,!0),u=Qn.current,u!==null){switch(u.tag){case 31:case 13:return fi===null?yf():u.alternate===null&&Rt===0&&(Rt=3),u.flags&=-257,u.flags|=65536,u.lanes=p,c===Gd?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([c]):a.add(c),by(r,c,p)),!1;case 22:return u.flags|=65536,c===Gd?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([c]):u.add(c)),by(r,c,p)),!1}throw Error(i(435,u.tag))}return by(r,c,p),yf(),!1}if(Qe)return a=Qn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==mg&&(r=Error(i(422),{cause:c}),lc(ui(r,u)))):(c!==mg&&(a=Error(i(423),{cause:c}),lc(ui(a,u))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,c=ui(c,u),p=Yg(r.stateNode,c,p),xg(r,p),Rt!==4&&(Rt=2)),!1;var y=Error(i(520),{cause:c});if(y=ui(y,u),Ic===null?Ic=[y]:Ic.push(y),Rt!==4&&(Rt=2),a===null)return!0;c=ui(c,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=p&-p,u.lanes|=r,r=Yg(u.stateNode,c,r),xg(u,r),!1;case 1:if(a=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ms===null||!Ms.has(y))))return u.flags|=65536,p&=-p,u.lanes|=p,p=x1(p),A1(p,r,u,c),xg(u,p),!1}u=u.return}while(u!==null);return!1}var Xg=Error(i(461)),$t=!1;function dn(r,a,u,c){a.child=r===null?DT(a,null,u,c):Wa(a,r.child,u,c)}function I1(r,a,u,c,p){u=u.render;var y=a.ref;if("ref"in c){var T={};for(var x in c)x!=="ref"&&(T[x]=c[x])}else T=c;return Ka(a),c=Ng(r,a,u,T,y,p),x=kg(),r!==null&&!$t?(Vg(r,a,p),Pr(r,a,p)):(Qe&&x&&dg(a),a.flags|=1,dn(r,a,c,p),a.child)}function R1(r,a,u,c,p){if(r===null){var y=u.type;return typeof y=="function"&&!ug(y)&&y.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=y,C1(r,a,y,c,p)):(r=zd(u.type,null,c,a,a.mode,p),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!ry(r,p)){var T=y.memoizedProps;if(u=u.compare,u=u!==null?u:sc,u(T,c)&&r.ref===a.ref)return Pr(r,a,p)}return a.flags|=1,r=Cr(y,c),r.ref=a.ref,r.return=a,a.child=r}function C1(r,a,u,c,p){if(r!==null){var y=r.memoizedProps;if(sc(y,c)&&r.ref===a.ref)if($t=!1,a.pendingProps=c=y,ry(r,p))(r.flags&131072)!==0&&($t=!0);else return a.lanes=r.lanes,Pr(r,a,p)}return Wg(r,a,u,c,p)}function D1(r,a,u,c){var p=c.children,y=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|u:u,r!==null){for(c=a.child=r.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~y}else c=0,a.child=null;return N1(r,a,y,u,c)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&qd(a,y!==null?y.cachePool:null),y!==null?VT(a,y):Ig(),MT(a);else return c=a.lanes=536870912,N1(r,a,y!==null?y.baseLanes|u:u,u,c)}else y!==null?(qd(a,y.cachePool),VT(a,y),Ds(),a.memoizedState=null):(r!==null&&qd(a,null),Ig(),Ds());return dn(r,a,p,u),a.child}function bc(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function N1(r,a,u,c,p){var y=Tg();return y=y===null?null:{parent:Ht._currentValue,pool:y},a.memoizedState={baseLanes:u,cachePool:y},r!==null&&qd(a,null),Ig(),MT(a),r!==null&&ul(r,a,c,!0),a.childLanes=p,null}function af(r,a){return a=lf({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function k1(r,a,u){return Wa(a,r.child,null,u),r=af(a,a.pendingProps),r.flags|=2,Yn(a),a.memoizedState=null,r}function rk(r,a,u){var c=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Qe){if(c.mode==="hidden")return r=af(a,c),a.lanes=536870912,bc(null,r);if(Cg(a),(r=gt)?(r=HE(r,di),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Es!==null?{id:sr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},u=pT(r),u.return=a,a.child=u,cn=a,gt=null)):r=null,r===null)throw Ss(a);return a.lanes=536870912,null}return af(a,c)}var y=r.memoizedState;if(y!==null){var T=y.dehydrated;if(Cg(a),p)if(a.flags&256)a.flags&=-257,a=k1(r,a,u);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if($t||ul(r,a,u,!1),p=(u&r.childLanes)!==0,$t||p){if(c=ft,c!==null&&(T=Bu(c,u),T!==0&&T!==y.retryLane))throw y.retryLane=T,qa(r,T),zn(c,r,T),Xg;yf(),a=k1(r,a,u)}else r=y.treeContext,gt=mi(T.nextSibling),cn=a,Qe=!0,ws=null,di=!1,r!==null&&vT(a,r),a=af(a,c),a.flags|=4096;return a}return r=Cr(r.child,{mode:c.mode,children:c.children}),r.ref=a.ref,a.child=r,r.return=a,r}function of(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function Wg(r,a,u,c,p){return Ka(a),u=Ng(r,a,u,c,void 0,p),c=kg(),r!==null&&!$t?(Vg(r,a,p),Pr(r,a,p)):(Qe&&c&&dg(a),a.flags|=1,dn(r,a,u,p),a.child)}function V1(r,a,u,c,p,y){return Ka(a),a.updateQueue=null,u=OT(a,c,u,p),PT(r),c=kg(),r!==null&&!$t?(Vg(r,a,y),Pr(r,a,y)):(Qe&&c&&dg(a),a.flags|=1,dn(r,a,u,y),a.child)}function M1(r,a,u,c,p){if(Ka(a),a.stateNode===null){var y=sl,T=u.contextType;typeof T=="object"&&T!==null&&(y=hn(T)),y=new u(c,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Qg,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=c,y.state=a.memoizedState,y.refs={},wg(a),T=u.contextType,y.context=typeof T=="object"&&T!==null?hn(T):sl,y.state=a.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(Kg(a,u,T,c),y.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Qg.enqueueReplaceState(y,y.state,null),pc(a,c,y,p),mc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(r===null){y=a.stateNode;var x=a.memoizedProps,L=Ja(u,x);y.props=L;var X=y.context,ne=u.contextType;T=sl,typeof ne=="object"&&ne!==null&&(T=hn(ne));var oe=u.getDerivedStateFromProps;ne=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",x=a.pendingProps!==x,ne||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x||X!==T)&&b1(a,y,c,T),As=!1;var W=a.memoizedState;y.state=W,pc(a,c,y,p),mc(),X=a.memoizedState,x||W!==X||As?(typeof oe=="function"&&(Kg(a,u,oe,c),X=a.memoizedState),(L=As||_1(a,u,L,c,W,X,T))?(ne||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=X),y.props=c,y.state=X,y.context=T,c=L):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{y=a.stateNode,Sg(r,a),T=a.memoizedProps,ne=Ja(u,T),y.props=ne,oe=a.pendingProps,W=y.context,X=u.contextType,L=sl,typeof X=="object"&&X!==null&&(L=hn(X)),x=u.getDerivedStateFromProps,(X=typeof x=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==oe||W!==L)&&b1(a,y,c,L),As=!1,W=a.memoizedState,y.state=W,pc(a,c,y,p),mc();var ee=a.memoizedState;T!==oe||W!==ee||As||r!==null&&r.dependencies!==null&&Bd(r.dependencies)?(typeof x=="function"&&(Kg(a,u,x,c),ee=a.memoizedState),(ne=As||_1(a,u,ne,c,W,ee,L)||r!==null&&r.dependencies!==null&&Bd(r.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,ee,L),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,ee,L)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ee),y.props=c,y.state=ee,y.context=L,c=ne):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),c=!1)}return y=c,of(r,a),c=(a.flags&128)!==0,y||c?(y=a.stateNode,u=c&&typeof u.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&c?(a.child=Wa(a,r.child,null,p),a.child=Wa(a,null,u,p)):dn(r,a,u,p),a.memoizedState=y.state,r=a.child):r=Pr(r,a,p),r}function P1(r,a,u,c){return Ga(),a.flags|=256,dn(r,a,u,c),a.child}var Zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jg(r){return{baseLanes:r,cachePool:ST()}}function ey(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=Wn),r}function O1(r,a,u){var c=a.pendingProps,p=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=r!==null&&r.memoizedState===null?!1:(Vt.current&2)!==0),T&&(p=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,r===null){if(Qe){if(p?Cs(a):Ds(),(r=gt)?(r=HE(r,di),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Es!==null?{id:sr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},u=pT(r),u.return=a,a.child=u,cn=a,gt=null)):r=null,r===null)throw Ss(a);return Oy(r)?a.lanes=32:a.lanes=536870912,null}var x=c.children;return c=c.fallback,p?(Ds(),p=a.mode,x=lf({mode:"hidden",children:x},p),c=Ha(c,p,u,null),x.return=a,c.return=a,x.sibling=c,a.child=x,c=a.child,c.memoizedState=Jg(u),c.childLanes=ey(r,T,u),a.memoizedState=Zg,bc(null,c)):(Cs(a),ty(a,x))}var L=r.memoizedState;if(L!==null&&(x=L.dehydrated,x!==null)){if(y)a.flags&256?(Cs(a),a.flags&=-257,a=ny(r,a,u)):a.memoizedState!==null?(Ds(),a.child=r.child,a.flags|=128,a=null):(Ds(),x=c.fallback,p=a.mode,c=lf({mode:"visible",children:c.children},p),x=Ha(x,p,u,null),x.flags|=2,c.return=a,x.return=a,c.sibling=x,a.child=c,Wa(a,r.child,null,u),c=a.child,c.memoizedState=Jg(u),c.childLanes=ey(r,T,u),a.memoizedState=Zg,a=bc(null,c));else if(Cs(a),Oy(x)){if(T=x.nextSibling&&x.nextSibling.dataset,T)var X=T.dgst;T=X,c=Error(i(419)),c.stack="",c.digest=T,lc({value:c,source:null,stack:null}),a=ny(r,a,u)}else if($t||ul(r,a,u,!1),T=(u&r.childLanes)!==0,$t||T){if(T=ft,T!==null&&(c=Bu(T,u),c!==0&&c!==L.retryLane))throw L.retryLane=c,qa(r,c),zn(T,r,c),Xg;Py(x)||yf(),a=ny(r,a,u)}else Py(x)?(a.flags|=192,a.child=r.child,a=null):(r=L.treeContext,gt=mi(x.nextSibling),cn=a,Qe=!0,ws=null,di=!1,r!==null&&vT(a,r),a=ty(a,c.children),a.flags|=4096);return a}return p?(Ds(),x=c.fallback,p=a.mode,L=r.child,X=L.sibling,c=Cr(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,X!==null?x=Cr(X,x):(x=Ha(x,p,u,null),x.flags|=2),x.return=a,c.return=a,c.sibling=x,a.child=c,bc(null,c),c=a.child,x=r.child.memoizedState,x===null?x=Jg(u):(p=x.cachePool,p!==null?(L=Ht._currentValue,p=p.parent!==L?{parent:L,pool:L}:p):p=ST(),x={baseLanes:x.baseLanes|u,cachePool:p}),c.memoizedState=x,c.childLanes=ey(r,T,u),a.memoizedState=Zg,bc(r.child,c)):(Cs(a),u=r.child,r=u.sibling,u=Cr(u,{mode:"visible",children:c.children}),u.return=a,u.sibling=null,r!==null&&(T=a.deletions,T===null?(a.deletions=[r],a.flags|=16):T.push(r)),a.child=u,a.memoizedState=null,u)}function ty(r,a){return a=lf({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function lf(r,a){return r=Kn(22,r,null,a),r.lanes=0,r}function ny(r,a,u){return Wa(a,r.child,null,u),r=ty(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function L1(r,a,u){r.lanes|=a;var c=r.alternate;c!==null&&(c.lanes|=a),yg(r.return,a,u)}function iy(r,a,u,c,p,y){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:u,tailMode:p,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=u,T.tailMode=p,T.treeForkCount=y)}function j1(r,a,u){var c=a.pendingProps,p=c.revealOrder,y=c.tail;c=c.children;var T=Vt.current,x=(T&2)!==0;if(x?(T=T&1|2,a.flags|=128):T&=1,pe(Vt,T),dn(r,a,c,u),c=Qe?oc:0,!x&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&L1(r,u,a);else if(r.tag===19)L1(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(u=a.child,p=null;u!==null;)r=u.alternate,r!==null&&Yd(r)===null&&(p=u),u=u.sibling;u=p,u===null?(p=a.child,a.child=null):(p=u.sibling,u.sibling=null),iy(a,!1,p,u,y,c);break;case"backwards":case"unstable_legacy-backwards":for(u=null,p=a.child,a.child=null;p!==null;){if(r=p.alternate,r!==null&&Yd(r)===null){a.child=p;break}r=p.sibling,p.sibling=u,u=p,p=r}iy(a,!0,u,null,y,c);break;case"together":iy(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function Pr(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),Vs|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(ul(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,u=Cr(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=Cr(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function ry(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Bd(r)))}function sk(r,a,u){switch(a.tag){case 3:Wt(a,a.stateNode.containerInfo),xs(a,Ht,r.memoizedState.cache),Ga();break;case 27:case 5:xa(a);break;case 4:Wt(a,a.stateNode.containerInfo);break;case 10:xs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Cg(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Cs(a),a.flags|=128,null):(u&a.child.childLanes)!==0?O1(r,a,u):(Cs(a),r=Pr(r,a,u),r!==null?r.sibling:null);Cs(a);break;case 19:var p=(r.flags&128)!==0;if(c=(u&a.childLanes)!==0,c||(ul(r,a,u,!1),c=(u&a.childLanes)!==0),p){if(c)return j1(r,a,u);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),pe(Vt,Vt.current),c)break;return null;case 22:return a.lanes=0,D1(r,a,u,a.pendingProps);case 24:xs(a,Ht,r.memoizedState.cache)}return Pr(r,a,u)}function z1(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)$t=!0;else{if(!ry(r,u)&&(a.flags&128)===0)return $t=!1,sk(r,a,u);$t=(r.flags&131072)!==0}else $t=!1,Qe&&(a.flags&1048576)!==0&&yT(a,oc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(r=Ya(a.elementType),a.type=r,typeof r=="function")ug(r)?(c=Ja(r,c),a.tag=1,a=M1(null,a,r,c,u)):(a.tag=0,a=Wg(null,a,r,c,u));else{if(r!=null){var p=r.$$typeof;if(p===Z){a.tag=11,a=I1(null,a,r,c,u);break e}else if(p===I){a.tag=14,a=R1(null,a,r,c,u);break e}}throw a=Ce(r)||r,Error(i(306,a,""))}}return a;case 0:return Wg(r,a,a.type,a.pendingProps,u);case 1:return c=a.type,p=Ja(c,a.pendingProps),M1(r,a,c,p,u);case 3:e:{if(Wt(a,a.stateNode.containerInfo),r===null)throw Error(i(387));c=a.pendingProps;var y=a.memoizedState;p=y.element,Sg(r,a),pc(a,c,null,u);var T=a.memoizedState;if(c=T.cache,xs(a,Ht,c),c!==y.cache&&vg(a,[Ht],u,!0),mc(),c=T.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=P1(r,a,c,u);break e}else if(c!==p){p=ui(Error(i(424)),a),lc(p),a=P1(r,a,c,u);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(gt=mi(r.firstChild),cn=a,Qe=!0,ws=null,di=!0,u=DT(a,null,c,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ga(),c===p){a=Pr(r,a,u);break e}dn(r,a,c,u)}a=a.child}return a;case 26:return of(r,a),r===null?(u=XE(a.type,null,a.pendingProps,null))?a.memoizedState=u:Qe||(u=a.type,r=a.pendingProps,c=Sf(je.current).createElement(u),c[Bt]=a,c[rn]=r,fn(c,u,r),Ft(c),a.stateNode=c):a.memoizedState=XE(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return xa(a),r===null&&Qe&&(c=a.stateNode=KE(a.type,a.pendingProps,je.current),cn=a,di=!0,p=gt,js(a.type)?(Ly=p,gt=mi(c.firstChild)):gt=p),dn(r,a,a.pendingProps.children,u),of(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Qe&&((p=c=gt)&&(c=Pk(c,a.type,a.pendingProps,di),c!==null?(a.stateNode=c,cn=a,gt=mi(c.firstChild),di=!1,p=!0):p=!1),p||Ss(a)),xa(a),p=a.type,y=a.pendingProps,T=r!==null?r.memoizedProps:null,c=y.children,ky(p,y)?c=null:T!==null&&ky(p,T)&&(a.flags|=32),a.memoizedState!==null&&(p=Ng(r,a,XN,null,null,u),Pc._currentValue=p),of(r,a),dn(r,a,c,u),a.child;case 6:return r===null&&Qe&&((r=u=gt)&&(u=Ok(u,a.pendingProps,di),u!==null?(a.stateNode=u,cn=a,gt=null,r=!0):r=!1),r||Ss(a)),null;case 13:return O1(r,a,u);case 4:return Wt(a,a.stateNode.containerInfo),c=a.pendingProps,r===null?a.child=Wa(a,null,c,u):dn(r,a,c,u),a.child;case 11:return I1(r,a,a.type,a.pendingProps,u);case 7:return dn(r,a,a.pendingProps,u),a.child;case 8:return dn(r,a,a.pendingProps.children,u),a.child;case 12:return dn(r,a,a.pendingProps.children,u),a.child;case 10:return c=a.pendingProps,xs(a,a.type,c.value),dn(r,a,c.children,u),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,Ka(a),p=hn(p),c=c(p),a.flags|=1,dn(r,a,c,u),a.child;case 14:return R1(r,a,a.type,a.pendingProps,u);case 15:return C1(r,a,a.type,a.pendingProps,u);case 19:return j1(r,a,u);case 31:return rk(r,a,u);case 22:return D1(r,a,u,a.pendingProps);case 24:return Ka(a),c=hn(Ht),r===null?(p=Tg(),p===null&&(p=ft,y=_g(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=u),p=y),a.memoizedState={parent:c,cache:p},wg(a),xs(a,Ht,p)):((r.lanes&u)!==0&&(Sg(r,a),pc(a,null,null,u),mc()),p=r.memoizedState,y=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),xs(a,Ht,c)):(c=y.cache,xs(a,Ht,c),c!==p.cache&&vg(a,[Ht],u,!0))),dn(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Or(r){r.flags|=4}function sy(r,a,u,c,p){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(dE())r.flags|=8192;else throw Xa=Gd,Eg}else r.flags&=-16777217}function U1(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!tw(a))if(dE())r.flags|=8192;else throw Xa=Gd,Eg}function uf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?md():536870912,r.lanes|=a,Tl|=a)}function Tc(r,a){if(!Qe)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function yt(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,c=0;if(a)for(var p=r.child;p!==null;)u|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)u|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=c,r.childLanes=u,a}function ak(r,a,u){var c=a.pendingProps;switch(fg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(a),null;case 1:return yt(a),null;case 3:return u=a.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),kr(Ht),vt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(ll(a)?Or(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,pg())),yt(a),null;case 26:var p=a.type,y=a.memoizedState;return r===null?(Or(a),y!==null?(yt(a),U1(a,y)):(yt(a),sy(a,p,null,c,u))):y?y!==r.memoizedState?(Or(a),yt(a),U1(a,y)):(yt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==c&&Or(a),yt(a),sy(a,p,r,c,u)),null;case 27:if(Uo(a),u=je.current,p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==c&&Or(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return yt(a),null}r=ge.current,ll(a)?_T(a):(r=KE(p,c,u),a.stateNode=r,Or(a))}return yt(a),null;case 5:if(Uo(a),p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==c&&Or(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return yt(a),null}if(y=ge.current,ll(a))_T(a);else{var T=Sf(je.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?T.createElement(p,{is:c.is}):T.createElement(p)}}y[Bt]=a,y[rn]=c;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;e:switch(fn(y,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Or(a)}}return yt(a),sy(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,u),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==c&&Or(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(i(166));if(r=je.current,ll(a)){if(r=a.stateNode,u=a.memoizedProps,c=null,p=cn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}r[Bt]=a,r=!!(r.nodeValue===u||c!==null&&c.suppressHydrationWarning===!0||OE(r.nodeValue,u)),r||Ss(a,!0)}else r=Sf(r).createTextNode(c),r[Bt]=a,a.stateNode=r}return yt(a),null;case 31:if(u=a.memoizedState,r===null||r.memoizedState!==null){if(c=ll(a),u!==null){if(r===null){if(!c)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Bt]=a}else Ga(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yt(a),r=!1}else u=pg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return a.flags&256?(Yn(a),a):(Yn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return yt(a),null;case 13:if(c=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=ll(a),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Bt]=a}else Ga(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yt(a),p=!1}else p=pg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Yn(a),a):(Yn(a),null)}return Yn(a),(a.flags&128)!==0?(a.lanes=u,a):(u=c!==null,r=r!==null&&r.memoizedState!==null,u&&(c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)),u!==r&&u&&(a.child.flags|=8192),uf(a,a.updateQueue),yt(a),null);case 4:return vt(),r===null&&Iy(a.stateNode.containerInfo),yt(a),null;case 10:return kr(a.type),yt(a),null;case 19:if(se(Vt),c=a.memoizedState,c===null)return yt(a),null;if(p=(a.flags&128)!==0,y=c.rendering,y===null)if(p)Tc(c,!1);else{if(Rt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=Yd(r),y!==null){for(a.flags|=128,Tc(c,!1),r=y.updateQueue,a.updateQueue=r,uf(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)mT(u,r),u=u.sibling;return pe(Vt,Vt.current&1|2),Qe&&Dr(a,c.treeForkCount),a.child}r=r.sibling}c.tail!==null&&In()>mf&&(a.flags|=128,p=!0,Tc(c,!1),a.lanes=4194304)}else{if(!p)if(r=Yd(y),r!==null){if(a.flags|=128,p=!0,r=r.updateQueue,a.updateQueue=r,uf(a,r),Tc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!Qe)return yt(a),null}else 2*In()-c.renderingStartTime>mf&&u!==536870912&&(a.flags|=128,p=!0,Tc(c,!1),a.lanes=4194304);c.isBackwards?(y.sibling=a.child,a.child=y):(r=c.last,r!==null?r.sibling=y:a.child=y,c.last=y)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=In(),r.sibling=null,u=Vt.current,pe(Vt,p?u&1|2:u&1),Qe&&Dr(a,c.treeForkCount),r):(yt(a),null);case 22:case 23:return Yn(a),Rg(),c=a.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(u&536870912)!==0&&(a.flags&128)===0&&(yt(a),a.subtreeFlags&6&&(a.flags|=8192)):yt(a),u=a.updateQueue,u!==null&&uf(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==u&&(a.flags|=2048),r!==null&&se(Qa),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),kr(Ht),yt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function ok(r,a){switch(fg(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return kr(Ht),vt(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Uo(a),null;case 31:if(a.memoizedState!==null){if(Yn(a),a.alternate===null)throw Error(i(340));Ga()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Yn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ga()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return se(Vt),null;case 4:return vt(),null;case 10:return kr(a.type),null;case 22:case 23:return Yn(a),Rg(),r!==null&&se(Qa),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return kr(Ht),null;case 25:return null;default:return null}}function B1(r,a){switch(fg(a),a.tag){case 3:kr(Ht),vt();break;case 26:case 27:case 5:Uo(a);break;case 4:vt();break;case 31:a.memoizedState!==null&&Yn(a);break;case 13:Yn(a);break;case 19:se(Vt);break;case 10:kr(a.type);break;case 22:case 23:Yn(a),Rg(),r!==null&&se(Qa);break;case 24:kr(Ht)}}function Ec(r,a){try{var u=a.updateQueue,c=u!==null?u.lastEffect:null;if(c!==null){var p=c.next;u=p;do{if((u.tag&r)===r){c=void 0;var y=u.create,T=u.inst;c=y(),T.destroy=c}u=u.next}while(u!==p)}}catch(x){st(a,a.return,x)}}function Ns(r,a,u){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&r)===r){var T=c.inst,x=T.destroy;if(x!==void 0){T.destroy=void 0,p=a;var L=u,X=x;try{X()}catch(ne){st(p,L,ne)}}}c=c.next}while(c!==y)}}catch(ne){st(a,a.return,ne)}}function F1(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{kT(a,u)}catch(c){st(r,r.return,c)}}}function q1(r,a,u){u.props=Ja(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(c){st(r,a,c)}}function wc(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof u=="function"?r.refCleanup=u(c):u.current=c}}catch(p){st(r,a,p)}}function or(r,a){var u=r.ref,c=r.refCleanup;if(u!==null)if(typeof c=="function")try{c()}catch(p){st(r,a,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){st(r,a,p)}else u.current=null}function H1(r){var a=r.type,u=r.memoizedProps,c=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&c.focus();break e;case"img":u.src?c.src=u.src:u.srcSet&&(c.srcset=u.srcSet)}}catch(p){st(r,r.return,p)}}function ay(r,a,u){try{var c=r.stateNode;Ck(c,r.type,u,a),c[rn]=a}catch(p){st(r,r.return,p)}}function G1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&js(r.type)||r.tag===4}function oy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||G1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&js(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ly(r,a,u){var c=r.tag;if(c===5||c===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Ii));else if(c!==4&&(c===27&&js(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(ly(r,a,u),r=r.sibling;r!==null;)ly(r,a,u),r=r.sibling}function cf(r,a,u){var c=r.tag;if(c===5||c===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(c!==4&&(c===27&&js(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(cf(r,a,u),r=r.sibling;r!==null;)cf(r,a,u),r=r.sibling}function $1(r){var a=r.stateNode,u=r.memoizedProps;try{for(var c=r.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);fn(a,c,u),a[Bt]=r,a[rn]=u}catch(y){st(r,r.return,y)}}var Lr=!1,Kt=!1,uy=!1,K1=typeof WeakSet=="function"?WeakSet:Set,an=null;function lk(r,a){if(r=r.containerInfo,Dy=Nf,r=sT(r),ng(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&c.rangeCount!==0){u=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var T=0,x=-1,L=-1,X=0,ne=0,oe=r,W=null;t:for(;;){for(var ee;oe!==u||p!==0&&oe.nodeType!==3||(x=T+p),oe!==y||c!==0&&oe.nodeType!==3||(L=T+c),oe.nodeType===3&&(T+=oe.nodeValue.length),(ee=oe.firstChild)!==null;)W=oe,oe=ee;for(;;){if(oe===r)break t;if(W===u&&++X===p&&(x=T),W===y&&++ne===c&&(L=T),(ee=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=ee}u=x===-1||L===-1?null:{start:x,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ny={focusedElem:r,selectionRange:u},Nf=!1,an=a;an!==null;)if(a=an,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,an=r;else for(;an!==null;){switch(a=an,y=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)p=r[u],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,u=a,p=y.memoizedProps,y=y.memoizedState,c=u.stateNode;try{var ve=Ja(u.type,p);r=c.getSnapshotBeforeUpdate(ve,y),c.__reactInternalSnapshotBeforeUpdate=r}catch(Ae){st(u,u.return,Ae)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)My(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":My(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,an=r;break}an=a.return}}function Q1(r,a,u){var c=u.flags;switch(u.tag){case 0:case 11:case 15:zr(r,u),c&4&&Ec(5,u);break;case 1:if(zr(r,u),c&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(T){st(u,u.return,T)}else{var p=Ja(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(p,a,r.__reactInternalSnapshotBeforeUpdate)}catch(T){st(u,u.return,T)}}c&64&&F1(u),c&512&&wc(u,u.return);break;case 3:if(zr(r,u),c&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{kT(r,a)}catch(T){st(u,u.return,T)}}break;case 27:a===null&&c&4&&$1(u);case 26:case 5:zr(r,u),a===null&&c&4&&H1(u),c&512&&wc(u,u.return);break;case 12:zr(r,u);break;case 31:zr(r,u),c&4&&W1(r,u);break;case 13:zr(r,u),c&4&&Z1(r,u),c&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=yk.bind(null,u),Lk(r,u))));break;case 22:if(c=u.memoizedState!==null||Lr,!c){a=a!==null&&a.memoizedState!==null||Kt,p=Lr;var y=Kt;Lr=c,(Kt=a)&&!y?Ur(r,u,(u.subtreeFlags&8772)!==0):zr(r,u),Lr=p,Kt=y}break;case 30:break;default:zr(r,u)}}function Y1(r){var a=r.alternate;a!==null&&(r.alternate=null,Y1(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Go(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,Pn=!1;function jr(r,a,u){for(u=u.child;u!==null;)X1(r,a,u),u=u.sibling}function X1(r,a,u){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(wi,u)}catch{}switch(u.tag){case 26:Kt||or(u,a),jr(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Kt||or(u,a);var c=bt,p=Pn;js(u.type)&&(bt=u.stateNode,Pn=!1),jr(r,a,u),kc(u.stateNode),bt=c,Pn=p;break;case 5:Kt||or(u,a);case 6:if(c=bt,p=Pn,bt=null,jr(r,a,u),bt=c,Pn=p,bt!==null)if(Pn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(u.stateNode)}catch(y){st(u,a,y)}else try{bt.removeChild(u.stateNode)}catch(y){st(u,a,y)}break;case 18:bt!==null&&(Pn?(r=bt,FE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),Cl(r)):FE(bt,u.stateNode));break;case 4:c=bt,p=Pn,bt=u.stateNode.containerInfo,Pn=!0,jr(r,a,u),bt=c,Pn=p;break;case 0:case 11:case 14:case 15:Ns(2,u,a),Kt||Ns(4,u,a),jr(r,a,u);break;case 1:Kt||(or(u,a),c=u.stateNode,typeof c.componentWillUnmount=="function"&&q1(u,a,c)),jr(r,a,u);break;case 21:jr(r,a,u);break;case 22:Kt=(c=Kt)||u.memoizedState!==null,jr(r,a,u),Kt=c;break;default:jr(r,a,u)}}function W1(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Cl(r)}catch(u){st(a,a.return,u)}}}function Z1(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Cl(r)}catch(u){st(a,a.return,u)}}function uk(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new K1),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new K1),a;default:throw Error(i(435,r.tag))}}function hf(r,a){var u=uk(r);a.forEach(function(c){if(!u.has(c)){u.add(c);var p=vk.bind(null,r,c);c.then(p,p)}})}function On(r,a){var u=a.deletions;if(u!==null)for(var c=0;c<u.length;c++){var p=u[c],y=r,T=a,x=T;e:for(;x!==null;){switch(x.tag){case 27:if(js(x.type)){bt=x.stateNode,Pn=!1;break e}break;case 5:bt=x.stateNode,Pn=!1;break e;case 3:case 4:bt=x.stateNode.containerInfo,Pn=!0;break e}x=x.return}if(bt===null)throw Error(i(160));X1(y,T,p),bt=null,Pn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)J1(a,r),a=a.sibling}var Vi=null;function J1(r,a){var u=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:On(a,r),Ln(r),c&4&&(Ns(3,r,r.return),Ec(3,r),Ns(5,r,r.return));break;case 1:On(a,r),Ln(r),c&512&&(Kt||u===null||or(u,u.return)),c&64&&Lr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?c:u.concat(c))));break;case 26:var p=Vi;if(On(a,r),Ln(r),c&512&&(Kt||u===null||or(u,u.return)),c&4){var y=u!==null?u.memoizedState:null;if(c=r.memoizedState,u===null)if(c===null)if(r.stateNode===null){e:{c=r.type,u=r.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Ki]||y[Bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),fn(y,c,u),y[Bt]=r,Ft(y),c=y;break e;case"link":var T=JE("link","href",p).get(c+(u.href||""));if(T){for(var x=0;x<T.length;x++)if(y=T[x],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){T.splice(x,1);break t}}y=p.createElement(c),fn(y,c,u),p.head.appendChild(y);break;case"meta":if(T=JE("meta","content",p).get(c+(u.content||""))){for(x=0;x<T.length;x++)if(y=T[x],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){T.splice(x,1);break t}}y=p.createElement(c),fn(y,c,u),p.head.appendChild(y);break;default:throw Error(i(468,c))}y[Bt]=r,Ft(y),c=y}r.stateNode=c}else ew(p,r.type,r.stateNode);else r.stateNode=ZE(p,c,r.memoizedProps);else y!==c?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,c===null?ew(p,r.type,r.stateNode):ZE(p,c,r.memoizedProps)):c===null&&r.stateNode!==null&&ay(r,r.memoizedProps,u.memoizedProps)}break;case 27:On(a,r),Ln(r),c&512&&(Kt||u===null||or(u,u.return)),u!==null&&c&4&&ay(r,r.memoizedProps,u.memoizedProps);break;case 5:if(On(a,r),Ln(r),c&512&&(Kt||u===null||or(u,u.return)),r.flags&32){p=r.stateNode;try{Mn(p,"")}catch(ve){st(r,r.return,ve)}}c&4&&r.stateNode!=null&&(p=r.memoizedProps,ay(r,p,u!==null?u.memoizedProps:p)),c&1024&&(uy=!0);break;case 6:if(On(a,r),Ln(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,u=r.stateNode;try{u.nodeValue=c}catch(ve){st(r,r.return,ve)}}break;case 3:if(If=null,p=Vi,Vi=xf(a.containerInfo),On(a,r),Vi=p,Ln(r),c&4&&u!==null&&u.memoizedState.isDehydrated)try{Cl(a.containerInfo)}catch(ve){st(r,r.return,ve)}uy&&(uy=!1,eE(r));break;case 4:c=Vi,Vi=xf(r.stateNode.containerInfo),On(a,r),Ln(r),Vi=c;break;case 12:On(a,r),Ln(r);break;case 31:On(a,r),Ln(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hf(r,c)));break;case 13:On(a,r),Ln(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ff=In()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hf(r,c)));break;case 22:p=r.memoizedState!==null;var L=u!==null&&u.memoizedState!==null,X=Lr,ne=Kt;if(Lr=X||p,Kt=ne||L,On(a,r),Kt=ne,Lr=X,Ln(r),c&8192)e:for(a=r.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(u===null||L||Lr||Kt||eo(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){L=u=a;try{if(y=L.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{x=L.stateNode;var oe=L.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;x.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(ve){st(L,L.return,ve)}}}else if(a.tag===6){if(u===null){L=a;try{L.stateNode.nodeValue=p?"":L.memoizedProps}catch(ve){st(L,L.return,ve)}}}else if(a.tag===18){if(u===null){L=a;try{var ee=L.stateNode;p?qE(ee,!0):qE(L.stateNode,!1)}catch(ve){st(L,L.return,ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=r.updateQueue,c!==null&&(u=c.retryQueue,u!==null&&(c.retryQueue=null,hf(r,u))));break;case 19:On(a,r),Ln(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hf(r,c)));break;case 30:break;case 21:break;default:On(a,r),Ln(r)}}function Ln(r){var a=r.flags;if(a&2){try{for(var u,c=r.return;c!==null;){if(G1(c)){u=c;break}c=c.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var p=u.stateNode,y=oy(r);cf(r,y,p);break;case 5:var T=u.stateNode;u.flags&32&&(Mn(T,""),u.flags&=-33);var x=oy(r);cf(r,x,T);break;case 3:case 4:var L=u.stateNode.containerInfo,X=oy(r);ly(r,X,L);break;default:throw Error(i(161))}}catch(ne){st(r,r.return,ne)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function eE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;eE(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function zr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Q1(r,a.alternate,a),a=a.sibling}function eo(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Ns(4,a,a.return),eo(a);break;case 1:or(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&q1(a,a.return,u),eo(a);break;case 27:kc(a.stateNode);case 26:case 5:or(a,a.return),eo(a);break;case 22:a.memoizedState===null&&eo(a);break;case 30:eo(a);break;default:eo(a)}r=r.sibling}}function Ur(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=r,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:Ur(p,y,u),Ec(4,y);break;case 1:if(Ur(p,y,u),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){st(c,c.return,X)}if(c=y,p=c.updateQueue,p!==null){var x=c.stateNode;try{var L=p.shared.hiddenCallbacks;if(L!==null)for(p.shared.hiddenCallbacks=null,p=0;p<L.length;p++)NT(L[p],x)}catch(X){st(c,c.return,X)}}u&&T&64&&F1(y),wc(y,y.return);break;case 27:$1(y);case 26:case 5:Ur(p,y,u),u&&c===null&&T&4&&H1(y),wc(y,y.return);break;case 12:Ur(p,y,u);break;case 31:Ur(p,y,u),u&&T&4&&W1(p,y);break;case 13:Ur(p,y,u),u&&T&4&&Z1(p,y);break;case 22:y.memoizedState===null&&Ur(p,y,u),wc(y,y.return);break;case 30:break;default:Ur(p,y,u)}a=a.sibling}}function cy(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&uc(u))}function hy(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&uc(r))}function Mi(r,a,u,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)tE(r,a,u,c),a=a.sibling}function tE(r,a,u,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(r,a,u,c),p&2048&&Ec(9,a);break;case 1:Mi(r,a,u,c);break;case 3:Mi(r,a,u,c),p&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&uc(r)));break;case 12:if(p&2048){Mi(r,a,u,c),r=a.stateNode;try{var y=a.memoizedProps,T=y.id,x=y.onPostCommit;typeof x=="function"&&x(T,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){st(a,a.return,L)}}else Mi(r,a,u,c);break;case 31:Mi(r,a,u,c);break;case 13:Mi(r,a,u,c);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?Mi(r,a,u,c):Sc(r,a):y._visibility&2?Mi(r,a,u,c):(y._visibility|=2,vl(r,a,u,c,(a.subtreeFlags&10256)!==0||!1)),p&2048&&cy(T,a);break;case 24:Mi(r,a,u,c),p&2048&&hy(a.alternate,a);break;default:Mi(r,a,u,c)}}function vl(r,a,u,c,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=r,T=a,x=u,L=c,X=T.flags;switch(T.tag){case 0:case 11:case 15:vl(y,T,x,L,p),Ec(8,T);break;case 23:break;case 22:var ne=T.stateNode;T.memoizedState!==null?ne._visibility&2?vl(y,T,x,L,p):Sc(y,T):(ne._visibility|=2,vl(y,T,x,L,p)),p&&X&2048&&cy(T.alternate,T);break;case 24:vl(y,T,x,L,p),p&&X&2048&&hy(T.alternate,T);break;default:vl(y,T,x,L,p)}a=a.sibling}}function Sc(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,c=a,p=c.flags;switch(c.tag){case 22:Sc(u,c),p&2048&&cy(c.alternate,c);break;case 24:Sc(u,c),p&2048&&hy(c.alternate,c);break;default:Sc(u,c)}a=a.sibling}}var xc=8192;function _l(r,a,u){if(r.subtreeFlags&xc)for(r=r.child;r!==null;)nE(r,a,u),r=r.sibling}function nE(r,a,u){switch(r.tag){case 26:_l(r,a,u),r.flags&xc&&r.memoizedState!==null&&Yk(u,Vi,r.memoizedState,r.memoizedProps);break;case 5:_l(r,a,u);break;case 3:case 4:var c=Vi;Vi=xf(r.stateNode.containerInfo),_l(r,a,u),Vi=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=xc,xc=16777216,_l(r,a,u),xc=c):_l(r,a,u));break;default:_l(r,a,u)}}function iE(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Ac(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var c=a[u];an=c,sE(c,r)}iE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)rE(r),r=r.sibling}function rE(r){switch(r.tag){case 0:case 11:case 15:Ac(r),r.flags&2048&&Ns(9,r,r.return);break;case 3:Ac(r);break;case 12:Ac(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,df(r)):Ac(r);break;default:Ac(r)}}function df(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var c=a[u];an=c,sE(c,r)}iE(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Ns(8,a,a.return),df(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,df(a));break;default:df(a)}r=r.sibling}}function sE(r,a){for(;an!==null;){var u=an;switch(u.tag){case 0:case 11:case 15:Ns(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var c=u.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:uc(u.memoizedState.cache)}if(c=u.child,c!==null)c.return=u,an=c;else e:for(u=r;an!==null;){c=an;var p=c.sibling,y=c.return;if(Y1(c),c===u){an=null;break e}if(p!==null){p.return=y,an=p;break e}an=y}}}var ck={getCacheForType:function(r){var a=hn(Ht),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u},cacheSignal:function(){return hn(Ht).controller.signal}},hk=typeof WeakMap=="function"?WeakMap:Map,tt=0,ft=null,Be=null,He=0,rt=0,Xn=null,ks=!1,bl=!1,dy=!1,Br=0,Rt=0,Vs=0,to=0,fy=0,Wn=0,Tl=0,Ic=null,jn=null,my=!1,ff=0,aE=0,mf=1/0,pf=null,Ms=null,Jt=0,Ps=null,El=null,Fr=0,py=0,gy=null,oE=null,Rc=0,yy=null;function Zn(){return(tt&2)!==0&&He!==0?He&-He:G.T!==null?wy():pd()}function lE(){if(Wn===0)if((He&536870912)===0||Qe){var r=Ra;Ra<<=1,(Ra&3932160)===0&&(Ra=262144),Wn=r}else Wn=536870912;return r=Qn.current,r!==null&&(r.flags|=32),Wn}function zn(r,a,u){(r===ft&&(rt===2||rt===9)||r.cancelPendingCommit!==null)&&(wl(r,0),Os(r,He,Wn,!1)),Ca(r,u),((tt&2)===0||r!==ft)&&(r===ft&&((tt&2)===0&&(to|=u),Rt===4&&Os(r,He,Wn,!1)),lr(r))}function uE(r,a,u){if((tt&6)!==0)throw Error(i(327));var c=!u&&(a&127)===0&&(a&r.expiredLanes)===0||Si(r,a),p=c?mk(r,a):_y(r,a,!0),y=c;do{if(p===0){bl&&!c&&Os(r,a,0,!1);break}else{if(u=r.current.alternate,y&&!dk(u)){p=_y(r,a,!1),y=!1;continue}if(p===2){if(y=a,r.errorRecoveryDisabledLanes&y)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var x=r;p=Ic;var L=x.current.memoizedState.isDehydrated;if(L&&(wl(x,T).flags|=256),T=_y(x,T,!1),T!==2){if(dy&&!L){x.errorRecoveryDisabledLanes|=y,to|=y,p=4;break e}y=jn,jn=p,y!==null&&(jn===null?jn=y:jn.push.apply(jn,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){wl(r,0),Os(r,a,0,!0);break}e:{switch(c=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Os(c,a,Wn,!ks);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=ff+300-In(),10<p)){if(Os(c,a,Wn,!ks),Hi(c,0,!0)!==0)break e;Fr=a,c.timeoutHandle=UE(cE.bind(null,c,u,jn,pf,my,a,Wn,to,Tl,ks,y,"Throttled",-0,0),p);break e}cE(c,u,jn,pf,my,a,Wn,to,Tl,ks,y,null,-0,0)}}break}while(!0);lr(r)}function cE(r,a,u,c,p,y,T,x,L,X,ne,oe,W,ee){if(r.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ii},nE(a,y,oe);var ve=(y&62914560)===y?ff-In():(y&4194048)===y?aE-In():0;if(ve=Xk(oe,ve),ve!==null){Fr=y,r.cancelPendingCommit=ve(vE.bind(null,r,a,y,u,c,p,T,x,L,ne,oe,null,W,ee)),Os(r,y,T,!X);return}}vE(r,a,y,u,c,p,T,x,L)}function dk(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var c=0;c<u.length;c++){var p=u[c],y=p.getSnapshot;p=p.value;try{if(!$n(y(),p))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Os(r,a,u,c){a&=~fy,a&=~to,r.suspendedLanes|=a,r.pingedLanes&=~a,c&&(r.warmLanes|=a),c=r.expirationTimes;for(var p=a;0<p;){var y=31-Nt(p),T=1<<y;c[y]=-1,p&=~T}u!==0&&Da(r,u,a)}function gf(){return(tt&6)===0?(Cc(0),!1):!0}function vy(){if(Be!==null){if(rt===0)var r=Be.return;else r=Be,Nr=$a=null,Mg(r),fl=null,hc=0,r=Be;for(;r!==null;)B1(r.alternate,r),r=r.return;Be=null}}function wl(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,kk(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Fr=0,vy(),ft=r,Be=u=Cr(r.current,null),He=a,rt=0,Xn=null,ks=!1,bl=Si(r,a),dy=!1,Tl=Wn=fy=to=Vs=Rt=0,jn=Ic=null,my=!1,(a&8)!==0&&(a|=a&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=a;0<c;){var p=31-Nt(c),y=1<<p;a|=r[p],c&=~y}return Br=a,Od(),u}function hE(r,a){Le=null,G.H=_c,a===dl||a===Hd?(a=IT(),rt=3):a===Eg?(a=IT(),rt=4):rt=a===Xg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Xn=a,Be===null&&(Rt=1,sf(r,ui(a,r.current)))}function dE(){var r=Qn.current;return r===null?!0:(He&4194048)===He?fi===null:(He&62914560)===He||(He&536870912)!==0?r===fi:!1}function fE(){var r=G.H;return G.H=_c,r===null?_c:r}function mE(){var r=G.A;return G.A=ck,r}function yf(){Rt=4,ks||(He&4194048)!==He&&Qn.current!==null||(bl=!0),(Vs&134217727)===0&&(to&134217727)===0||ft===null||Os(ft,He,Wn,!1)}function _y(r,a,u){var c=tt;tt|=2;var p=fE(),y=mE();(ft!==r||He!==a)&&(pf=null,wl(r,a)),a=!1;var T=Rt;e:do try{if(rt!==0&&Be!==null){var x=Be,L=Xn;switch(rt){case 8:vy(),T=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(a=!0);var X=rt;if(rt=0,Xn=null,Sl(r,x,L,X),u&&bl){T=0;break e}break;default:X=rt,rt=0,Xn=null,Sl(r,x,L,X)}}fk(),T=Rt;break}catch(ne){hE(r,ne)}while(!0);return a&&r.shellSuspendCounter++,Nr=$a=null,tt=c,G.H=p,G.A=y,Be===null&&(ft=null,He=0,Od()),T}function fk(){for(;Be!==null;)pE(Be)}function mk(r,a){var u=tt;tt|=2;var c=fE(),p=mE();ft!==r||He!==a?(pf=null,mf=In()+500,wl(r,a)):bl=Si(r,a);e:do try{if(rt!==0&&Be!==null){a=Be;var y=Xn;t:switch(rt){case 1:rt=0,Xn=null,Sl(r,a,y,1);break;case 2:case 9:if(xT(y)){rt=0,Xn=null,gE(a);break}a=function(){rt!==2&&rt!==9||ft!==r||(rt=7),lr(r)},y.then(a,a);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:xT(y)?(rt=0,Xn=null,gE(a)):(rt=0,Xn=null,Sl(r,a,y,7));break;case 5:var T=null;switch(Be.tag){case 26:T=Be.memoizedState;case 5:case 27:var x=Be;if(T?tw(T):x.stateNode.complete){rt=0,Xn=null;var L=x.sibling;if(L!==null)Be=L;else{var X=x.return;X!==null?(Be=X,vf(X)):Be=null}break t}}rt=0,Xn=null,Sl(r,a,y,5);break;case 6:rt=0,Xn=null,Sl(r,a,y,6);break;case 8:vy(),Rt=6;break e;default:throw Error(i(462))}}pk();break}catch(ne){hE(r,ne)}while(!0);return Nr=$a=null,G.H=c,G.A=p,tt=u,Be!==null?0:(ft=null,He=0,Od(),Rt)}function pk(){for(;Be!==null&&!Yp();)pE(Be)}function pE(r){var a=z1(r.alternate,r,Br);r.memoizedProps=r.pendingProps,a===null?vf(r):Be=a}function gE(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=V1(u,a,a.pendingProps,a.type,void 0,He);break;case 11:a=V1(u,a,a.pendingProps,a.type.render,a.ref,He);break;case 5:Mg(a);default:B1(u,a),a=Be=mT(a,Br),a=z1(u,a,Br)}r.memoizedProps=r.pendingProps,a===null?vf(r):Be=a}function Sl(r,a,u,c){Nr=$a=null,Mg(a),fl=null,hc=0;var p=a.return;try{if(ik(r,p,a,u,He)){Rt=1,sf(r,ui(u,r.current)),Be=null;return}}catch(y){if(p!==null)throw Be=p,y;Rt=1,sf(r,ui(u,r.current)),Be=null;return}a.flags&32768?(Qe||c===1?r=!0:bl||(He&536870912)!==0?r=!1:(ks=r=!0,(c===2||c===9||c===3||c===6)&&(c=Qn.current,c!==null&&c.tag===13&&(c.flags|=16384))),yE(a,r)):vf(a)}function vf(r){var a=r;do{if((a.flags&32768)!==0){yE(a,ks);return}r=a.return;var u=ak(a.alternate,a,Br);if(u!==null){Be=u;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=r}while(a!==null);Rt===0&&(Rt=5)}function yE(r,a){do{var u=ok(r.alternate,r);if(u!==null){u.flags&=32767,Be=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){Be=r;return}Be=r=u}while(r!==null);Rt=6,Be=null}function vE(r,a,u,c,p,y,T,x,L){r.cancelPendingCommit=null;do _f();while(Jt!==0);if((tt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=og,Zp(r,u,y,T,x,L),r===ft&&(Be=ft=null,He=0),El=a,Ps=r,Fr=u,py=y,gy=p,oE=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,_k(ds,function(){return wE(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=G.T,G.T=null,p=re.p,re.p=2,T=tt,tt|=4;try{lk(r,a,u)}finally{tt=T,re.p=p,G.T=c}}Jt=1,_E(),bE(),TE()}}function _E(){if(Jt===1){Jt=0;var r=Ps,a=El,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=G.T,G.T=null;var c=re.p;re.p=2;var p=tt;tt|=4;try{J1(a,r);var y=Ny,T=sT(r.containerInfo),x=y.focusedElem,L=y.selectionRange;if(T!==x&&x&&x.ownerDocument&&rT(x.ownerDocument.documentElement,x)){if(L!==null&&ng(x)){var X=L.start,ne=L.end;if(ne===void 0&&(ne=X),"selectionStart"in x)x.selectionStart=X,x.selectionEnd=Math.min(ne,x.value.length);else{var oe=x.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var ee=W.getSelection(),ve=x.textContent.length,Ae=Math.min(L.start,ve),ht=L.end===void 0?Ae:Math.min(L.end,ve);!ee.extend&&Ae>ht&&(T=ht,ht=Ae,Ae=T);var $=iT(x,Ae),F=iT(x,ht);if($&&F&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==F.node||ee.focusOffset!==F.offset)){var Y=oe.createRange();Y.setStart($.node,$.offset),ee.removeAllRanges(),Ae>ht?(ee.addRange(Y),ee.extend(F.node,F.offset)):(Y.setEnd(F.node,F.offset),ee.addRange(Y))}}}}for(oe=[],ee=x;ee=ee.parentNode;)ee.nodeType===1&&oe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<oe.length;x++){var ae=oe[x];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Nf=!!Dy,Ny=Dy=null}finally{tt=p,re.p=c,G.T=u}}r.current=a,Jt=2}}function bE(){if(Jt===2){Jt=0;var r=Ps,a=El,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=G.T,G.T=null;var c=re.p;re.p=2;var p=tt;tt|=4;try{Q1(r,a.alternate,a)}finally{tt=p,re.p=c,G.T=u}}Jt=3}}function TE(){if(Jt===4||Jt===3){Jt=0,ld();var r=Ps,a=El,u=Fr,c=oE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Jt=5:(Jt=0,El=Ps=null,EE(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Ms=null),xr(u),a=a.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(wi,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=G.T,p=re.p,re.p=2,G.T=null;try{for(var y=r.onRecoverableError,T=0;T<c.length;T++){var x=c[T];y(x.value,{componentStack:x.stack})}}finally{G.T=a,re.p=p}}(Fr&3)!==0&&_f(),lr(r),p=r.pendingLanes,(u&261930)!==0&&(p&42)!==0?r===yy?Rc++:(Rc=0,yy=r):Rc=0,Cc(0)}}function EE(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,uc(a)))}function _f(){return _E(),bE(),TE(),wE()}function wE(){if(Jt!==5)return!1;var r=Ps,a=py;py=0;var u=xr(Fr),c=G.T,p=re.p;try{re.p=32>u?32:u,G.T=null,u=gy,gy=null;var y=Ps,T=Fr;if(Jt=0,El=Ps=null,Fr=0,(tt&6)!==0)throw Error(i(331));var x=tt;if(tt|=4,rE(y.current),tE(y,y.current,T,u),tt=x,Cc(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(wi,y)}catch{}return!0}finally{re.p=p,G.T=c,EE(r,a)}}function SE(r,a,u){a=ui(u,a),a=Yg(r.stateNode,a,2),r=Rs(r,a,2),r!==null&&(Ca(r,2),lr(r))}function st(r,a,u){if(r.tag===3)SE(r,r,u);else for(;a!==null;){if(a.tag===3){SE(a,r,u);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ms===null||!Ms.has(c))){r=ui(u,r),u=x1(2),c=Rs(a,u,2),c!==null&&(A1(u,c,a,r),Ca(c,2),lr(c));break}}a=a.return}}function by(r,a,u){var c=r.pingCache;if(c===null){c=r.pingCache=new hk;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(u)||(dy=!0,p.add(u),r=gk.bind(null,r,a,u),a.then(r,r))}function gk(r,a,u){var c=r.pingCache;c!==null&&c.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,ft===r&&(He&u)===u&&(Rt===4||Rt===3&&(He&62914560)===He&&300>In()-ff?(tt&2)===0&&wl(r,0):fy|=u,Tl===He&&(Tl=0)),lr(r)}function xE(r,a){a===0&&(a=md()),r=qa(r,a),r!==null&&(Ca(r,a),lr(r))}function yk(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),xE(r,u)}function vk(r,a){var u=0;switch(r.tag){case 31:case 13:var c=r.stateNode,p=r.memoizedState;p!==null&&(u=p.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(a),xE(r,u)}function _k(r,a){return Zt(r,a)}var bf=null,xl=null,Ty=!1,Tf=!1,Ey=!1,Ls=0;function lr(r){r!==xl&&r.next===null&&(xl===null?bf=xl=r:xl=xl.next=r),Tf=!0,Ty||(Ty=!0,Tk())}function Cc(r,a){if(!Ey&&Tf){Ey=!0;do for(var u=!1,c=bf;c!==null;){if(r!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var T=c.suspendedLanes,x=c.pingedLanes;y=(1<<31-Nt(42|r)+1)-1,y&=p&~(T&~x),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,CE(c,y))}else y=He,y=Hi(c,c===ft?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Si(c,y)||(u=!0,CE(c,y));c=c.next}while(u);Ey=!1}}function bk(){AE()}function AE(){Tf=Ty=!1;var r=0;Ls!==0&&Nk()&&(r=Ls);for(var a=In(),u=null,c=bf;c!==null;){var p=c.next,y=IE(c,a);y===0?(c.next=null,u===null?bf=p:u.next=p,p===null&&(xl=u)):(u=c,(r!==0||(y&3)!==0)&&(Tf=!0)),c=p}Jt!==0&&Jt!==5||Cc(r),Ls!==0&&(Ls=0)}function IE(r,a){for(var u=r.suspendedLanes,c=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var T=31-Nt(y),x=1<<T,L=p[T];L===-1?((x&u)===0||(x&c)!==0)&&(p[T]=Wp(x,a)):L<=a&&(r.expiredLanes|=x),y&=~x}if(a=ft,u=He,u=Hi(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,u===0||r===a&&(rt===2||rt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&hs(c),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Si(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(c!==null&&hs(c),xr(u)){case 2:case 8:u=zu;break;case 32:u=ds;break;case 268435456:u=ud;break;default:u=ds}return c=RE.bind(null,r),u=Zt(u,c),r.callbackPriority=a,r.callbackNode=u,a}return c!==null&&c!==null&&hs(c),r.callbackPriority=2,r.callbackNode=null,2}function RE(r,a){if(Jt!==0&&Jt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(_f()&&r.callbackNode!==u)return null;var c=He;return c=Hi(r,r===ft?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(uE(r,c,a),IE(r,In()),r.callbackNode!=null&&r.callbackNode===u?RE.bind(null,r):null)}function CE(r,a){if(_f())return null;uE(r,a,!0)}function Tk(){Vk(function(){(tt&6)!==0?Zt(ju,bk):AE()})}function wy(){if(Ls===0){var r=cl;r===0&&(r=Fi,Fi<<=1,(Fi&261888)===0&&(Fi=256)),Ls=r}return Ls}function DE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Yo(""+r)}function NE(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function Ek(r,a,u,c,p){if(a==="submit"&&u&&u.stateNode===p){var y=DE((p[rn]||null).action),T=c.submitter;T&&(a=(a=T[rn]||null)?DE(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var x=new tr("action","action",null,c,p);r.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ls!==0){var L=T?NE(p,T):new FormData(p);qg(u,{pending:!0,data:L,method:p.method,action:y},null,L)}}else typeof y=="function"&&(x.preventDefault(),L=T?NE(p,T):new FormData(p),qg(u,{pending:!0,data:L,method:p.method,action:y},y,L))},currentTarget:p}]})}}for(var Sy=0;Sy<ag.length;Sy++){var xy=ag[Sy],wk=xy.toLowerCase(),Sk=xy[0].toUpperCase()+xy.slice(1);ki(wk,"on"+Sk)}ki(lT,"onAnimationEnd"),ki(uT,"onAnimationIteration"),ki(cT,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(UN,"onTransitionRun"),ki(BN,"onTransitionStart"),ki(FN,"onTransitionCancel"),ki(hT,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function kE(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var c=r[u],p=c.event;c=c.listeners;e:{var y=void 0;if(a)for(var T=c.length-1;0<=T;T--){var x=c[T],L=x.instance,X=x.currentTarget;if(x=x.listener,L!==y&&p.isPropagationStopped())break e;y=x,p.currentTarget=X;try{y(p)}catch(ne){Pd(ne)}p.currentTarget=null,y=L}else for(T=0;T<c.length;T++){if(x=c[T],L=x.instance,X=x.currentTarget,x=x.listener,L!==y&&p.isPropagationStopped())break e;y=x,p.currentTarget=X;try{y(p)}catch(ne){Pd(ne)}p.currentTarget=null,y=L}}}}function Fe(r,a){var u=a[Ho];u===void 0&&(u=a[Ho]=new Set);var c=r+"__bubble";u.has(c)||(VE(a,r,2,!1),u.add(c))}function Ay(r,a,u){var c=0;a&&(c|=4),VE(u,r,c,a)}var Ef="_reactListening"+Math.random().toString(36).slice(2);function Iy(r){if(!r[Ef]){r[Ef]=!0,Fu.forEach(function(u){u!=="selectionchange"&&(xk.has(u)||Ay(u,!1,r),Ay(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Ef]||(a[Ef]=!0,Ay("selectionchange",!1,a))}}function VE(r,a,u,c){switch(lw(a)){case 2:var p=Jk;break;case 8:p=eV;break;default:p=Fy}u=p.bind(null,a,u,r),p=void 0,!Pa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?r.addEventListener(a,u,{capture:!0,passive:p}):r.addEventListener(a,u,!0):p!==void 0?r.addEventListener(a,u,{passive:p}):r.addEventListener(a,u,!1)}function Ry(r,a,u,c,p){var y=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var x=c.stateNode.containerInfo;if(x===p)break;if(T===4)for(T=c.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;x!==null;){if(T=Qi(x),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){c=y=T;continue e}x=x.parentNode}}c=c.return}vs(function(){var X=y,ne=si(u),oe=[];e:{var W=dT.get(r);if(W!==void 0){var ee=tr,ve=r;switch(r){case"keypress":if(La(u)===0)break e;case"keydown":case"keyup":ee=kd;break;case"focusin":ve="focus",ee=za;break;case"focusout":ve="blur",ee=za;break;case"beforeblur":case"afterblur":ee=za;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=wd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=b;break;case lT:case uT:case cT:ee=xd;break;case hT:ee=R;break;case"scroll":case"scrollend":ee=ec;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=Ad;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Rr;break;case"toggle":case"beforetoggle":ee=Oe}var Ae=(a&4)!==0,ht=!Ae&&(r==="scroll"||r==="scrollend"),$=Ae?W!==null?W+"Capture":null:W;Ae=[];for(var F=X,Y;F!==null;){var ae=F;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||$===null||(ae=Ri(F,$),ae!=null&&Ae.push(Nc(F,ae,Y))),ht)break;F=F.return}0<Ae.length&&(W=new ee(W,ve,null,u,ne),oe.push({event:W,listeners:Ae}))}}if((a&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",ee=r==="mouseout"||r==="pointerout",W&&u!==Wu&&(ve=u.relatedTarget||u.fromElement)&&(Qi(ve)||ve[$i]))break e;if((ee||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,ee?(ve=u.relatedTarget||u.toElement,ee=X,ve=ve?Qi(ve):null,ve!==null&&(ht=o(ve),Ae=ve.tag,ve!==ht||Ae!==5&&Ae!==27&&Ae!==6)&&(ve=null)):(ee=null,ve=X),ee!==ve)){if(Ae=tc,ae="onMouseLeave",$="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Ae=Rr,ae="onPointerLeave",$="onPointerEnter",F="pointer"),ht=ee==null?W:Hn(ee),Y=ve==null?W:Hn(ve),W=new Ae(ae,F+"leave",ee,u,ne),W.target=ht,W.relatedTarget=Y,ae=null,Qi(ne)===X&&(Ae=new Ae($,F+"enter",ve,u,ne),Ae.target=Y,Ae.relatedTarget=ht,ae=Ae),ht=ae,ee&&ve)t:{for(Ae=Ak,$=ee,F=ve,Y=0,ae=$;ae;ae=Ae(ae))Y++;ae=0;for(var we=F;we;we=Ae(we))ae++;for(;0<Y-ae;)$=Ae($),Y--;for(;0<ae-Y;)F=Ae(F),ae--;for(;Y--;){if($===F||F!==null&&$===F.alternate){Ae=$;break t}$=Ae($),F=Ae(F)}Ae=null}else Ae=null;ee!==null&&ME(oe,W,ee,Ae,!1),ve!==null&&ht!==null&&ME(oe,ht,ve,Ae,!0)}}e:{if(W=X?Hn(X):window,ee=W.nodeName&&W.nodeName.toLowerCase(),ee==="select"||ee==="input"&&W.type==="file")var We=Wb;else if(Yb(W))if(Zb)We=LN;else{We=PN;var be=MN}else ee=W.nodeName,!ee||ee.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&Qo(X.elementType)&&(We=Wb):We=ON;if(We&&(We=We(r,X))){Xb(oe,We,u,ne);break e}be&&be(r,W,X),r==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&Qu(W,"number",W.value)}switch(be=X?Hn(X):window,r){case"focusin":(Yb(be)||be.contentEditable==="true")&&(nl=be,ig=X,ac=null);break;case"focusout":ac=ig=nl=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":rg=!1,aT(oe,u,ne);break;case"selectionchange":if(zN)break;case"keydown":case"keyup":aT(oe,u,ne)}var ze;if(et)e:{switch(r){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else tl?Ua(r,u)&&(Ge="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Ge="onCompositionStart");Ge&&(rr&&u.locale!=="ko"&&(tl||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&tl&&(ze=Ju()):(er=ne,Zu="value"in er?er.value:er.textContent,tl=!0)),be=wf(X,Ge),0<be.length&&(Ge=new ir(Ge,r,null,u,ne),oe.push({event:Ge,listeners:be}),ze?Ge.data=ze:(ze=el(u),ze!==null&&(Ge.data=ze)))),(ze=oi?DN(r,u):NN(r,u))&&(Ge=wf(X,"onBeforeInput"),0<Ge.length&&(be=new ir("onBeforeInput","beforeinput",null,u,ne),oe.push({event:be,listeners:Ge}),be.data=ze)),Ek(oe,r,X,u,ne)}kE(oe,a)})}function Nc(r,a,u){return{instance:r,listener:a,currentTarget:u}}function wf(r,a){for(var u=a+"Capture",c=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Ri(r,u),p!=null&&c.unshift(Nc(r,p,y)),p=Ri(r,a),p!=null&&c.push(Nc(r,p,y))),r.tag===3)return c;r=r.return}return[]}function Ak(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ME(r,a,u,c,p){for(var y=a._reactName,T=[];u!==null&&u!==c;){var x=u,L=x.alternate,X=x.stateNode;if(x=x.tag,L!==null&&L===c)break;x!==5&&x!==26&&x!==27||X===null||(L=X,p?(X=Ri(u,y),X!=null&&T.unshift(Nc(u,X,L))):p||(X=Ri(u,y),X!=null&&T.push(Nc(u,X,L)))),u=u.return}T.length!==0&&r.push({event:a,listeners:T})}var Ik=/\r\n?/g,Rk=/\u0000|\uFFFD/g;function PE(r){return(typeof r=="string"?r:""+r).replace(Ik,`
`).replace(Rk,"")}function OE(r,a){return a=PE(a),PE(r)===a}function ct(r,a,u,c,p,y){switch(u){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Mn(r,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Mn(r,""+c);break;case"className":Gn(r,"class",c);break;case"tabIndex":Gn(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Gn(r,u,c);break;case"style":Xu(r,c,y);break;case"data":if(a!=="object"){Gn(r,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(u);break}c=Yo(""+c),r.setAttribute(u,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(a!=="input"&&ct(r,a,"name",p.name,p,null),ct(r,a,"formEncType",p.formEncType,p,null),ct(r,a,"formMethod",p.formMethod,p,null),ct(r,a,"formTarget",p.formTarget,p,null)):(ct(r,a,"encType",p.encType,p,null),ct(r,a,"method",p.method,p,null),ct(r,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(u);break}c=Yo(""+c),r.setAttribute(u,c);break;case"onClick":c!=null&&(r.onclick=Ii);break;case"onScroll":c!=null&&Fe("scroll",r);break;case"onScrollEnd":c!=null&&Fe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(u=c.__html,u!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}u=Yo(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(u,""+c):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":c===!0?r.setAttribute(u,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(u,c):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(u,c):r.removeAttribute(u);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(u):r.setAttribute(u,c);break;case"popover":Fe("beforetoggle",r),Fe("toggle",r),$o(r,"popover",c);break;case"xlinkActuate":qt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$o(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Ed.get(u)||u,$o(r,u,c))}}function Cy(r,a,u,c,p,y){switch(u){case"style":Xu(r,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(u=c.__html,u!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof c=="string"?Mn(r,c):(typeof c=="number"||typeof c=="bigint")&&Mn(r,""+c);break;case"onScroll":c!=null&&Fe("scroll",r);break;case"onScrollEnd":c!=null&&Fe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qu.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),a=u.slice(2,p?u.length-7:void 0),y=r[rn]||null,y=y!=null?y[u]:null,typeof y=="function"&&r.removeEventListener(a,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,c,p);break e}u in r?r[u]=c:c===!0?r.setAttribute(u,""):$o(r,u,c)}}}function fn(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",r),Fe("load",r);var c=!1,p=!1,y;for(y in u)if(u.hasOwnProperty(y)){var T=u[y];if(T!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ct(r,a,y,T,u,null)}}p&&ct(r,a,"srcSet",u.srcSet,u,null),c&&ct(r,a,"src",u.src,u,null);return;case"input":Fe("invalid",r);var x=y=T=p=null,L=null,X=null;for(c in u)if(u.hasOwnProperty(c)){var ne=u[c];if(ne!=null)switch(c){case"name":p=ne;break;case"type":T=ne;break;case"checked":L=ne;break;case"defaultChecked":X=ne;break;case"value":y=ne;break;case"defaultValue":x=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:ct(r,a,c,ne,u,null)}}_d(r,y,x,L,X,T,p,!1);return;case"select":Fe("invalid",r),c=T=y=null;for(p in u)if(u.hasOwnProperty(p)&&(x=u[p],x!=null))switch(p){case"value":y=x;break;case"defaultValue":T=x;break;case"multiple":c=x;default:ct(r,a,p,x,u,null)}a=y,u=T,r.multiple=!!c,a!=null?ms(r,!!c,a,!1):u!=null&&ms(r,!!c,u,!0);return;case"textarea":Fe("invalid",r),y=p=c=null;for(T in u)if(u.hasOwnProperty(T)&&(x=u[T],x!=null))switch(T){case"value":c=x;break;case"defaultValue":p=x;break;case"children":y=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:ct(r,a,T,x,u,null)}ps(r,c,p,y);return;case"option":for(L in u)if(u.hasOwnProperty(L)&&(c=u[L],c!=null))switch(L){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ct(r,a,L,c,u,null)}return;case"dialog":Fe("beforetoggle",r),Fe("toggle",r),Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":Fe("load",r);break;case"video":case"audio":for(c=0;c<Dc.length;c++)Fe(Dc[c],r);break;case"image":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"embed":case"source":case"link":Fe("error",r),Fe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(c=u[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ct(r,a,X,c,u,null)}return;default:if(Qo(a)){for(ne in u)u.hasOwnProperty(ne)&&(c=u[ne],c!==void 0&&Cy(r,a,ne,c,u,void 0));return}}for(x in u)u.hasOwnProperty(x)&&(c=u[x],c!=null&&ct(r,a,x,c,u,null))}function Ck(r,a,u,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,x=null,L=null,X=null,ne=null;for(ee in u){var oe=u[ee];if(u.hasOwnProperty(ee)&&oe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":L=oe;default:c.hasOwnProperty(ee)||ct(r,a,ee,null,c,oe)}}for(var W in c){var ee=c[W];if(oe=u[W],c.hasOwnProperty(W)&&(ee!=null||oe!=null))switch(W){case"type":y=ee;break;case"name":p=ee;break;case"checked":X=ee;break;case"defaultChecked":ne=ee;break;case"value":T=ee;break;case"defaultValue":x=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,a));break;default:ee!==oe&&ct(r,a,W,ee,c,oe)}}Ko(r,T,x,L,X,ne,y,p);return;case"select":ee=T=x=W=null;for(y in u)if(L=u[y],u.hasOwnProperty(y)&&L!=null)switch(y){case"value":break;case"multiple":ee=L;default:c.hasOwnProperty(y)||ct(r,a,y,null,c,L)}for(p in c)if(y=c[p],L=u[p],c.hasOwnProperty(p)&&(y!=null||L!=null))switch(p){case"value":W=y;break;case"defaultValue":x=y;break;case"multiple":T=y;default:y!==L&&ct(r,a,p,y,c,L)}a=x,u=T,c=ee,W!=null?ms(r,!!u,W,!1):!!c!=!!u&&(a!=null?ms(r,!!u,a,!0):ms(r,!!u,u?[]:"",!1));return;case"textarea":ee=W=null;for(x in u)if(p=u[x],u.hasOwnProperty(x)&&p!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:ct(r,a,x,null,c,p)}for(T in c)if(p=c[T],y=u[T],c.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":W=p;break;case"defaultValue":ee=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ct(r,a,T,p,c,y)}bd(r,W,ee);return;case"option":for(var ve in u)if(W=u[ve],u.hasOwnProperty(ve)&&W!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":r.selected=!1;break;default:ct(r,a,ve,null,c,W)}for(L in c)if(W=c[L],ee=u[L],c.hasOwnProperty(L)&&W!==ee&&(W!=null||ee!=null))switch(L){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ct(r,a,L,W,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in u)W=u[Ae],u.hasOwnProperty(Ae)&&W!=null&&!c.hasOwnProperty(Ae)&&ct(r,a,Ae,null,c,W);for(X in c)if(W=c[X],ee=u[X],c.hasOwnProperty(X)&&W!==ee&&(W!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,a));break;default:ct(r,a,X,W,c,ee)}return;default:if(Qo(a)){for(var ht in u)W=u[ht],u.hasOwnProperty(ht)&&W!==void 0&&!c.hasOwnProperty(ht)&&Cy(r,a,ht,void 0,c,W);for(ne in c)W=c[ne],ee=u[ne],!c.hasOwnProperty(ne)||W===ee||W===void 0&&ee===void 0||Cy(r,a,ne,W,c,ee);return}}for(var $ in u)W=u[$],u.hasOwnProperty($)&&W!=null&&!c.hasOwnProperty($)&&ct(r,a,$,null,c,W);for(oe in c)W=c[oe],ee=u[oe],!c.hasOwnProperty(oe)||W===ee||W==null&&ee==null||ct(r,a,oe,W,c,ee)}function LE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Dk(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,u=performance.getEntriesByType("resource"),c=0;c<u.length;c++){var p=u[c],y=p.transferSize,T=p.initiatorType,x=p.duration;if(y&&x&&LE(T)){for(T=0,x=p.responseEnd,c+=1;c<u.length;c++){var L=u[c],X=L.startTime;if(X>x)break;var ne=L.transferSize,oe=L.initiatorType;ne&&LE(oe)&&(L=L.responseEnd,T+=ne*(L<x?1:(x-X)/(L-X)))}if(--c,a+=8*(y+T)/(p.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Dy=null,Ny=null;function Sf(r){return r.nodeType===9?r:r.ownerDocument}function jE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zE(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function ky(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Vy=null;function Nk(){var r=window.event;return r&&r.type==="popstate"?r===Vy?!1:(Vy=r,!0):(Vy=null,!1)}var UE=typeof setTimeout=="function"?setTimeout:void 0,kk=typeof clearTimeout=="function"?clearTimeout:void 0,BE=typeof Promise=="function"?Promise:void 0,Vk=typeof queueMicrotask=="function"?queueMicrotask:typeof BE<"u"?function(r){return BE.resolve(null).then(r).catch(Mk)}:UE;function Mk(r){setTimeout(function(){throw r})}function js(r){return r==="head"}function FE(r,a){var u=a,c=0;do{var p=u.nextSibling;if(r.removeChild(u),p&&p.nodeType===8)if(u=p.data,u==="/$"||u==="/&"){if(c===0){r.removeChild(p),Cl(a);return}c--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")c++;else if(u==="html")kc(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,kc(u);for(var y=u.firstChild;y;){var T=y.nextSibling,x=y.nodeName;y[Ki]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&y.rel.toLowerCase()==="stylesheet"||u.removeChild(y),y=T}}else u==="body"&&kc(r.ownerDocument.body);u=p}while(u);Cl(a)}function qE(r,a){var u=r;r=0;do{var c=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),c&&c.nodeType===8)if(u=c.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=c}while(u)}function My(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":My(u),Go(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function Pk(r,a,u,c){for(;r.nodeType===1;){var p=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Ki])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=mi(r.nextSibling),r===null)break}return null}function Ok(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=mi(r.nextSibling),r===null))return null;return r}function HE(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=mi(r.nextSibling),r===null))return null;return r}function Py(r){return r.data==="$?"||r.data==="$~"}function Oy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function Lk(r,a){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||u.readyState!=="loading")a();else{var c=function(){a(),u.removeEventListener("DOMContentLoaded",c)};u.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function mi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Ly=null;function GE(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(a===0)return mi(r.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}r=r.nextSibling}return null}function $E(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return r;a--}else u!=="/$"&&u!=="/&"||a++}r=r.previousSibling}return null}function KE(r,a,u){switch(a=Sf(u),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function kc(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Go(r)}var pi=new Map,QE=new Set;function xf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var qr=re.d;re.d={f:jk,r:zk,D:Uk,C:Bk,L:Fk,m:qk,X:Gk,S:Hk,M:$k};function jk(){var r=qr.f(),a=gf();return r||a}function zk(r){var a=ri(r);a!==null&&a.tag===5&&a.type==="form"?h1(a):qr.r(r)}var Al=typeof document>"u"?null:document;function YE(r,a,u){var c=Al;if(c&&typeof a=="string"&&a){var p=Vn(a);p='link[rel="'+r+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),QE.has(p)||(QE.add(p),r={rel:r,crossOrigin:u,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),fn(a,"link",r),Ft(a),c.head.appendChild(a)))}}function Uk(r){qr.D(r),YE("dns-prefetch",r,null)}function Bk(r,a){qr.C(r,a),YE("preconnect",r,a)}function Fk(r,a,u){qr.L(r,a,u);var c=Al;if(c&&r&&a){var p='link[rel="preload"][as="'+Vn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+Vn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+Vn(u.imageSizes)+'"]')):p+='[href="'+Vn(r)+'"]';var y=p;switch(a){case"style":y=Il(r);break;case"script":y=Rl(r)}pi.has(y)||(r=v({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),pi.set(y,r),c.querySelector(p)!==null||a==="style"&&c.querySelector(Vc(y))||a==="script"&&c.querySelector(Mc(y))||(a=c.createElement("link"),fn(a,"link",r),Ft(a),c.head.appendChild(a)))}}function qk(r,a){qr.m(r,a);var u=Al;if(u&&r){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Vn(c)+'"][href="'+Vn(r)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Rl(r)}if(!pi.has(y)&&(r=v({rel:"modulepreload",href:r},a),pi.set(y,r),u.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Mc(y)))return}c=u.createElement("link"),fn(c,"link",r),Ft(c),u.head.appendChild(c)}}}function Hk(r,a,u){qr.S(r,a,u);var c=Al;if(c&&r){var p=Yi(c).hoistableStyles,y=Il(r);a=a||"default";var T=p.get(y);if(!T){var x={loading:0,preload:null};if(T=c.querySelector(Vc(y)))x.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},u),(u=pi.get(y))&&jy(r,u);var L=T=c.createElement("link");Ft(L),fn(L,"link",r),L._p=new Promise(function(X,ne){L.onload=X,L.onerror=ne}),L.addEventListener("load",function(){x.loading|=1}),L.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Af(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:x},p.set(y,T)}}}function Gk(r,a){qr.X(r,a);var u=Al;if(u&&r){var c=Yi(u).hoistableScripts,p=Rl(r),y=c.get(p);y||(y=u.querySelector(Mc(p)),y||(r=v({src:r,async:!0},a),(a=pi.get(p))&&zy(r,a),y=u.createElement("script"),Ft(y),fn(y,"link",r),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function $k(r,a){qr.M(r,a);var u=Al;if(u&&r){var c=Yi(u).hoistableScripts,p=Rl(r),y=c.get(p);y||(y=u.querySelector(Mc(p)),y||(r=v({src:r,async:!0,type:"module"},a),(a=pi.get(p))&&zy(r,a),y=u.createElement("script"),Ft(y),fn(y,"link",r),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function XE(r,a,u,c){var p=(p=je.current)?xf(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Il(u.href),u=Yi(p).hoistableStyles,c=u.get(a),c||(c={type:"style",instance:null,count:0,state:null},u.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Il(u.href);var y=Yi(p).hoistableStyles,T=y.get(r);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,T),(y=p.querySelector(Vc(r)))&&!y._p&&(T.instance=y,T.state.loading=5),pi.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},pi.set(r,u),y||Kk(p,r,u,T.state))),a&&c===null)throw Error(i(528,""));return T}if(a&&c!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Rl(u),u=Yi(p).hoistableScripts,c=u.get(a),c||(c={type:"script",instance:null,count:0,state:null},u.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Il(r){return'href="'+Vn(r)+'"'}function Vc(r){return'link[rel="stylesheet"]['+r+"]"}function WE(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function Kk(r,a,u,c){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=r.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),fn(a,"link",u),Ft(a),r.head.appendChild(a))}function Rl(r){return'[src="'+Vn(r)+'"]'}function Mc(r){return"script[async]"+r}function ZE(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var c=r.querySelector('style[data-href~="'+Vn(u.href)+'"]');if(c)return a.instance=c,Ft(c),c;var p=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Ft(c),fn(c,"style",p),Af(c,u.precedence,r),a.instance=c;case"stylesheet":p=Il(u.href);var y=r.querySelector(Vc(p));if(y)return a.state.loading|=4,a.instance=y,Ft(y),y;c=WE(u),(p=pi.get(p))&&jy(c,p),y=(r.ownerDocument||r).createElement("link"),Ft(y);var T=y;return T._p=new Promise(function(x,L){T.onload=x,T.onerror=L}),fn(y,"link",c),a.state.loading|=4,Af(y,u.precedence,r),a.instance=y;case"script":return y=Rl(u.src),(p=r.querySelector(Mc(y)))?(a.instance=p,Ft(p),p):(c=u,(p=pi.get(y))&&(c=v({},u),zy(c,p)),r=r.ownerDocument||r,p=r.createElement("script"),Ft(p),fn(p,"link",c),r.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Af(c,u.precedence,r));return a.instance}function Af(r,a,u){for(var c=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,T=0;T<c.length;T++){var x=c[T];if(x.dataset.precedence===a)y=x;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function jy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function zy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var If=null;function JE(r,a,u){if(If===null){var c=new Map,p=If=new Map;p.set(u,c)}else p=If,c=p.get(u),c||(c=new Map,p.set(u,c));if(c.has(r))return c;for(c.set(r,null),u=u.getElementsByTagName(r),p=0;p<u.length;p++){var y=u[p];if(!(y[Ki]||y[Bt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=r+T;var x=c.get(T);x?x.push(y):c.set(T,[y])}}return c}function ew(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function Qk(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function tw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Yk(r,a,u,c){if(u.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var p=Il(c.href),y=a.querySelector(Vc(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Rf.bind(r),a.then(r,r)),u.state.loading|=4,u.instance=y,Ft(y);return}y=a.ownerDocument||a,c=WE(c),(p=pi.get(p))&&jy(c,p),y=y.createElement("link"),Ft(y);var T=y;T._p=new Promise(function(x,L){T.onload=x,T.onerror=L}),fn(y,"link",c),u.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=Rf.bind(r),a.addEventListener("load",u),a.addEventListener("error",u))}}var Uy=0;function Xk(r,a){return r.stylesheets&&r.count===0&&Df(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var c=setTimeout(function(){if(r.stylesheets&&Df(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+a);0<r.imgBytes&&Uy===0&&(Uy=62500*Dk());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Df(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Uy?50:800)+a);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Rf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Df(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Cf=null;function Df(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Cf=new Map,a.forEach(Wk,r),Cf=null,Rf.call(r))}function Wk(r,a){if(!(a.state.loading&4)){var u=Cf.get(r);if(u)var c=u.get(null);else{u=new Map,Cf.set(r,u);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(u.set(T.dataset.precedence,T),c=T)}c&&u.set(null,c)}p=a.instance,T=p.getAttribute("data-precedence"),y=u.get(T)||c,y===c&&u.set(null,p),u.set(T,p),this.count++,c=Rf.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),a.state.loading|=4}}var Pc={$$typeof:O,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Zk(r,a,u,c,p,y,T,x,L){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function nw(r,a,u,c,p,y,T,x,L,X,ne,oe){return r=new Zk(r,a,u,T,L,X,ne,oe,x),a=1,y===!0&&(a|=24),y=Kn(3,null,null,a),r.current=y,y.stateNode=r,a=_g(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:c,isDehydrated:u,cache:a},wg(y),r}function iw(r){return r?(r=sl,r):sl}function rw(r,a,u,c,p,y){p=iw(p),c.context===null?c.context=p:c.pendingContext=p,c=Is(a),c.payload={element:u},y=y===void 0?null:y,y!==null&&(c.callback=y),u=Rs(r,c,a),u!==null&&(zn(u,r,a),fc(u,r,a))}function sw(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function By(r,a){sw(r,a),(r=r.alternate)&&sw(r,a)}function aw(r){if(r.tag===13||r.tag===31){var a=qa(r,67108864);a!==null&&zn(a,r,67108864),By(r,67108864)}}function ow(r){if(r.tag===13||r.tag===31){var a=Zn();a=Na(a);var u=qa(r,a);u!==null&&zn(u,r,a),By(r,a)}}var Nf=!0;function Jk(r,a,u,c){var p=G.T;G.T=null;var y=re.p;try{re.p=2,Fy(r,a,u,c)}finally{re.p=y,G.T=p}}function eV(r,a,u,c){var p=G.T;G.T=null;var y=re.p;try{re.p=8,Fy(r,a,u,c)}finally{re.p=y,G.T=p}}function Fy(r,a,u,c){if(Nf){var p=qy(c);if(p===null)Ry(r,a,c,kf,u),uw(r,c);else if(nV(p,r,a,u,c))c.stopPropagation();else if(uw(r,c),a&4&&-1<tV.indexOf(r)){for(;p!==null;){var y=ri(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=qi(y.pendingLanes);if(T!==0){var x=y;for(x.pendingLanes|=2,x.entangledLanes|=2;T;){var L=1<<31-Nt(T);x.entanglements[1]|=L,T&=~L}lr(y),(tt&6)===0&&(mf=In()+500,Cc(0))}}break;case 31:case 13:x=qa(y,2),x!==null&&zn(x,y,2),gf(),By(y,2)}if(y=qy(c),y===null&&Ry(r,a,c,kf,u),y===p)break;p=y}p!==null&&c.stopPropagation()}else Ry(r,a,c,null,u)}}function qy(r){return r=si(r),Hy(r)}var kf=null;function Hy(r){if(kf=null,r=Qi(r),r!==null){var a=o(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=l(a),r!==null)return r;r=null}else if(u===31){if(r=h(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return kf=r,null}function lw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ia()){case ju:return 2;case zu:return 8;case ds:case Xp:return 32;case ud:return 268435456;default:return 32}default:return 32}}var Gy=!1,zs=null,Us=null,Bs=null,Oc=new Map,Lc=new Map,Fs=[],tV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uw(r,a){switch(r){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":Oc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(a.pointerId)}}function jc(r,a,u,c,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:u,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},a!==null&&(a=ri(a),a!==null&&aw(a)),r):(r.eventSystemFlags|=c,a=r.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),r)}function nV(r,a,u,c,p){switch(a){case"focusin":return zs=jc(zs,r,a,u,c,p),!0;case"dragenter":return Us=jc(Us,r,a,u,c,p),!0;case"mouseover":return Bs=jc(Bs,r,a,u,c,p),!0;case"pointerover":var y=p.pointerId;return Oc.set(y,jc(Oc.get(y)||null,r,a,u,c,p)),!0;case"gotpointercapture":return y=p.pointerId,Lc.set(y,jc(Lc.get(y)||null,r,a,u,c,p)),!0}return!1}function cw(r){var a=Qi(r.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){r.blockedOn=a,xi(r.priority,function(){ow(u)});return}}else if(a===31){if(a=h(u),a!==null){r.blockedOn=a,xi(r.priority,function(){ow(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Vf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=qy(r.nativeEvent);if(u===null){u=r.nativeEvent;var c=new u.constructor(u.type,u);Wu=c,u.target.dispatchEvent(c),Wu=null}else return a=ri(u),a!==null&&aw(a),r.blockedOn=u,!1;a.shift()}return!0}function hw(r,a,u){Vf(r)&&u.delete(a)}function iV(){Gy=!1,zs!==null&&Vf(zs)&&(zs=null),Us!==null&&Vf(Us)&&(Us=null),Bs!==null&&Vf(Bs)&&(Bs=null),Oc.forEach(hw),Lc.forEach(hw)}function Mf(r,a){r.blockedOn===a&&(r.blockedOn=null,Gy||(Gy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,iV)))}var Pf=null;function dw(r){Pf!==r&&(Pf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Pf===r&&(Pf=null);for(var a=0;a<r.length;a+=3){var u=r[a],c=r[a+1],p=r[a+2];if(typeof c!="function"){if(Hy(c||u)===null)continue;break}var y=ri(u);y!==null&&(r.splice(a,3),a-=3,qg(y,{pending:!0,data:p,method:u.method,action:c},c,p))}}))}function Cl(r){function a(L){return Mf(L,r)}zs!==null&&Mf(zs,r),Us!==null&&Mf(Us,r),Bs!==null&&Mf(Bs,r),Oc.forEach(a),Lc.forEach(a);for(var u=0;u<Fs.length;u++){var c=Fs[u];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Fs.length&&(u=Fs[0],u.blockedOn===null);)cw(u),u.blockedOn===null&&Fs.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(c=0;c<u.length;c+=3){var p=u[c],y=u[c+1],T=p[rn]||null;if(typeof y=="function")T||dw(u);else if(T){var x=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[rn]||null)x=T.formAction;else if(Hy(p)!==null)continue}else x=T.action;typeof x=="function"?u[c+1]=x:(u.splice(c,3),c-=3),dw(u)}}}function fw(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),c||setTimeout(u,20)}function u(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function $y(r){this._internalRoot=r}Of.prototype.render=$y.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,c=Zn();rw(u,c,r,a,null,null)},Of.prototype.unmount=$y.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;rw(r.current,2,null,r,null,null),gf(),a[$i]=null}};function Of(r){this._internalRoot=r}Of.prototype.unstable_scheduleHydration=function(r){if(r){var a=pd();r={blockedOn:null,target:r,priority:a};for(var u=0;u<Fs.length&&a!==0&&a<Fs[u].priority;u++);Fs.splice(u,0,r),u===0&&cw(r)}};var mw=e.version;if(mw!=="19.2.0")throw Error(i(527,mw,"19.2.0"));re.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var rV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lf.isDisabled&&Lf.supportsFiber)try{wi=Lf.inject(rV),ln=Lf}catch{}}return Uc.createRoot=function(r,a){if(!s(r))throw Error(i(299));var u=!1,c="",p=T1,y=E1,T=w1;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=nw(r,1,!1,null,null,u,c,null,p,y,T,fw),r[$i]=a.current,Iy(r),new $y(a)},Uc.hydrateRoot=function(r,a,u){if(!s(r))throw Error(i(299));var c=!1,p="",y=T1,T=E1,x=w1,L=null;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(x=u.onRecoverableError),u.formState!==void 0&&(L=u.formState)),a=nw(r,1,!0,a,u??null,c,p,L,y,T,x,fw),a.context=iw(null),u=a.current,c=Zn(),c=Na(c),p=Is(c),p.callback=null,Rs(u,p,c),u=c,a.current.lanes=u,Ca(a,u),lr(a),r[$i]=a.current,Iy(r),new Of(a)},Uc.version="19.2.0",Uc}var Sw;function pV(){if(Sw)return Yy.exports;Sw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yy.exports=mV(),Yy.exports}var gV=pV();const yV="modulepreload",vV=function(n){return"/house-budget-pwa/"+n},xw={},_V=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var l=f;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=h?.nonce||h?.getAttribute("nonce");s=f(t.map(g=>{if(g=vV(g),g in xw)return;xw[g]=!0;const v=g.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":yV,v||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((C,N)=>{S.addEventListener("load",C),S.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(h){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=h,window.dispatchEvent(d),!d.defaultPrevented)throw h}return s.then(h=>{for(const d of h||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function bV(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:s,onRegisteredSW:o,onRegisterError:l}=n;let h,d;const f=async(v=!0)=>{await d};async function g(){if("serviceWorker"in navigator){if(h=await _V(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/house-budget-pwa/sw.js",{scope:"/house-budget-pwa/",type:"classic"})).catch(v=>{l?.(v)}),!h)return;h.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),h.addEventListener("installed",v=>{v.isUpdate||i?.()}),h.register({immediate:e}).then(v=>{o?o("/house-budget-pwa/sw.js",v):s?.(v)}).catch(v=>{l?.(v)})}}return d=g(),f}var Aw="popstate";function TV(n={}){function e(s,o){let{pathname:l="/",search:h="",hash:d=""}=Lo(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),O0("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let l=s.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");h=f===-1?d:d.slice(0,f)}return h+"#"+(typeof o=="string"?o:gh(o))}function i(s,o){Ei(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return wV(e,t,i,n)}function At(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ei(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EV(){return Math.random().toString(36).substring(2,10)}function Iw(n,e){return{usr:n.state,key:n.key,idx:e}}function O0(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Lo(e):e,state:t,key:e&&e.key||i||EV()}}function gh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Lo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function wV(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function v(){h="POP";let k=g(),U=k==null?null:k-f;f=k,d&&d({action:h,location:N.location,delta:U})}function _(k,U){h="PUSH";let q=O0(N.location,k,U);t&&t(q,k),f=g()+1;let O=Iw(q,f),Z=N.createHref(q);try{l.pushState(O,"",Z)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;s.location.assign(Z)}o&&d&&d({action:h,location:N.location,delta:1})}function S(k,U){h="REPLACE";let q=O0(N.location,k,U);t&&t(q,k),f=g();let O=Iw(q,f),Z=N.createHref(q);l.replaceState(O,"",Z),o&&d&&d({action:h,location:N.location,delta:0})}function C(k){return SV(k)}let N={get action(){return h},get location(){return n(s,l)},listen(k){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Aw,v),d=k,()=>{s.removeEventListener(Aw,v),d=null}},createHref(k){return e(s,k)},createURL:C,encodeLocation(k){let U=C(k);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:_,replace:S,go(k){return l.go(k)}};return N}function SV(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),At(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:gh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function ZA(n,e,t="/"){return xV(n,e,t,!1)}function xV(n,e,t,i){let s=typeof e=="string"?Lo(e):e,o=Jr(s.pathname||"/",t);if(o==null)return null;let l=JA(n);AV(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let f=LV(o);h=PV(l[d],f,i)}return h}function JA(n,e=[],t=[],i="",s=!1){let o=(l,h,d=s,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;At(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let v=Wr([i,g.relativePath]),_=t.concat(g);l.children&&l.children.length>0&&(At(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),JA(l.children,e,_,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:VV(v,l.index),routesMeta:_})};return n.forEach((l,h)=>{if(l.path===""||!l.path?.includes("?"))o(l,h);else for(let d of eI(l.path))o(l,h,!0,d)}),e}function eI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=eI(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function AV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:MV(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var IV=/^:[\w-]+$/,RV=3,CV=2,DV=1,NV=10,kV=-2,Rw=n=>n==="*";function VV(n,e){let t=n.split("/"),i=t.length;return t.some(Rw)&&(i+=kV),e&&(i+=CV),t.filter(s=>!Rw(s)).reduce((s,o)=>s+(IV.test(o)?RV:o===""?DV:NV),i)}function MV(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function PV(n,e,t=!1){let{routesMeta:i}=n,s={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],f=h===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Em({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),_=d.route;if(!v&&f&&t&&!i[i.length-1].route.index&&(v=Em({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Wr([o,v.pathname]),pathnameBase:FV(Wr([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=Wr([o,v.pathnameBase]))}return l}function Em(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=OV(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:v},_)=>{if(g==="*"){let C=h[_]||"";l=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const S=h[_];return v&&!S?f[g]=void 0:f[g]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function OV(n,e=!1,t=!0){Ei(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function LV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ei(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Jr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var jV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zV=n=>jV.test(n);function UV(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Lo(n):n,o;if(t)if(zV(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Ei(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=Cw(t.substring(1),"/"):o=Cw(t,e)}else o=e;return{pathname:o,search:qV(i),hash:HV(s)}}function Cw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Jy(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function tI(n){let e=BV(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function nI(n,e,t,i=!1){let s;typeof n=="string"?s=Lo(n):(s={...n},At(!s.pathname||!s.pathname.includes("?"),Jy("?","pathname","search",s)),At(!s.pathname||!s.pathname.includes("#"),Jy("#","pathname","hash",s)),At(!s.search||!s.search.includes("#"),Jy("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=t;else{let v=e.length-1;if(!i&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}h=v>=0?e[v]:"/"}let d=UV(s,h),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Wr=n=>n.join("/").replace(/\/\/+/g,"/"),FV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),qV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function GV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var iI=["POST","PUT","PATCH","DELETE"];new Set(iI);var $V=["GET",...iI];new Set($V);var Eu=z.createContext(null);Eu.displayName="DataRouter";var sp=z.createContext(null);sp.displayName="DataRouterState";z.createContext(!1);var rI=z.createContext({isTransitioning:!1});rI.displayName="ViewTransition";var KV=z.createContext(new Map);KV.displayName="Fetchers";var QV=z.createContext(null);QV.displayName="Await";var wr=z.createContext(null);wr.displayName="Navigation";var Fh=z.createContext(null);Fh.displayName="Location";var Sr=z.createContext({outlet:null,matches:[],isDataRoute:!1});Sr.displayName="Route";var Qv=z.createContext(null);Qv.displayName="RouteError";function YV(n,{relative:e}={}){At(qh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext(wr),{hash:s,pathname:o,search:l}=Hh(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Wr([t,o])),i.createHref({pathname:h,search:l,hash:s})}function qh(){return z.useContext(Fh)!=null}function va(){return At(qh(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Fh).location}var sI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aI(n){z.useContext(wr).static||z.useLayoutEffect(n)}function jo(){let{isDataRoute:n}=z.useContext(Sr);return n?uM():XV()}function XV(){At(qh(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(Eu),{basename:e,navigator:t}=z.useContext(wr),{matches:i}=z.useContext(Sr),{pathname:s}=va(),o=JSON.stringify(tI(i)),l=z.useRef(!1);return aI(()=>{l.current=!0}),z.useCallback((d,f={})=>{if(Ei(l.current,sI),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=nI(d,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Wr([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,n])}z.createContext(null);function WV(){let{matches:n}=z.useContext(Sr),e=n[n.length-1];return e?e.params:{}}function Hh(n,{relative:e}={}){let{matches:t}=z.useContext(Sr),{pathname:i}=va(),s=JSON.stringify(tI(t));return z.useMemo(()=>nI(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function ZV(n,e){return oI(n,e)}function oI(n,e,t,i,s){At(qh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=z.useContext(wr),{matches:l}=z.useContext(Sr),h=l[l.length-1],d=h?h.params:{},f=h?h.pathname:"/",g=h?h.pathnameBase:"/",v=h&&h.route;{let q=v&&v.path||"";lI(f,!v||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let _=va(),S;if(e){let q=typeof e=="string"?Lo(e):e;At(g==="/"||q.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${q.pathname}" was given in the \`location\` prop.`),S=q}else S=_;let C=S.pathname||"/",N=C;if(g!=="/"){let q=g.replace(/^\//,"").split("/");N="/"+C.replace(/^\//,"").split("/").slice(q.length).join("/")}let k=ZA(n,{pathname:N});Ei(v||k!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Ei(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=iM(k&&k.map(q=>Object.assign({},q,{params:Object.assign({},d,q.params),pathname:Wr([g,o.encodeLocation?o.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:Wr([g,o.encodeLocation?o.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),l,t,i,s);return e&&U?z.createElement(Fh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},U):U}function JV(){let n=lM(),e=GV(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:o},"ErrorBoundary")," or"," ",z.createElement("code",{style:o},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:s},t):null,l)}var eM=z.createElement(JV,null),tM=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?z.createElement(Sr.Provider,{value:this.props.routeContext},z.createElement(Qv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nM({routeContext:n,match:e,children:t}){let i=z.useContext(Eu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Sr.Provider,{value:n},t)}function iM(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let g=o.findIndex(v=>v.route.id&&l?.[v.route.id]!==void 0);At(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let v=o[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:_,errors:S}=t,C=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||C){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&i?(g,v)=>{i(g,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:v})}:void 0;return o.reduceRight((g,v,_)=>{let S,C=!1,N=null,k=null;t&&(S=l&&v.route.id?l[v.route.id]:void 0,N=v.route.errorElement||eM,h&&(d<0&&_===0?(lI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,k=null):d===_&&(C=!0,k=v.route.hydrateFallbackElement||null)));let U=e.concat(o.slice(0,_+1)),q=()=>{let O;return S?O=N:C?O=k:v.route.Component?O=z.createElement(v.route.Component,null):v.route.element?O=v.route.element:O=g,z.createElement(nM,{match:v,routeContext:{outlet:g,matches:U,isDataRoute:t!=null},children:O})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?z.createElement(tM,{location:t.location,revalidation:t.revalidation,component:N,error:S,children:q(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:f}):q()},null)}function Yv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rM(n){let e=z.useContext(Eu);return At(e,Yv(n)),e}function sM(n){let e=z.useContext(sp);return At(e,Yv(n)),e}function aM(n){let e=z.useContext(Sr);return At(e,Yv(n)),e}function Xv(n){let e=aM(n),t=e.matches[e.matches.length-1];return At(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function oM(){return Xv("useRouteId")}function lM(){let n=z.useContext(Qv),e=sM("useRouteError"),t=Xv("useRouteError");return n!==void 0?n:e.errors?.[t]}function uM(){let{router:n}=rM("useNavigate"),e=Xv("useNavigate"),t=z.useRef(!1);return aI(()=>{t.current=!0}),z.useCallback(async(s,o={})=>{Ei(t.current,sI),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Dw={};function lI(n,e,t){!e&&!Dw[n]&&(Dw[n]=!0,Ei(!1,t))}z.memo(cM);function cM({routes:n,future:e,state:t,unstable_onError:i}){return oI(n,void 0,t,i,e)}function ro(n){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hM({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:o=!1}){At(!qh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),h=z.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=Lo(t));let{pathname:d="/",search:f="",hash:g="",state:v=null,key:_="default"}=t,S=z.useMemo(()=>{let C=Jr(d,l);return C==null?null:{location:{pathname:C,search:f,hash:g,state:v,key:_},navigationType:i}},[l,d,f,g,v,_,i]);return Ei(S!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:z.createElement(wr.Provider,{value:h},z.createElement(Fh.Provider,{children:e,value:S}))}function dM({children:n,location:e}){return ZV(L0(n),e)}function L0(n,e=[]){let t=[];return z.Children.forEach(n,(i,s)=>{if(!z.isValidElement(i))return;let o=[...e,s];if(i.type===z.Fragment){t.push.apply(t,L0(i.props.children,o));return}At(i.type===ro,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=L0(i.props.children,o)),t.push(l)}),t}var Zf="get",Jf="application/x-www-form-urlencoded";function ap(n){return n!=null&&typeof n.tagName=="string"}function fM(n){return ap(n)&&n.tagName.toLowerCase()==="button"}function mM(n){return ap(n)&&n.tagName.toLowerCase()==="form"}function pM(n){return ap(n)&&n.tagName.toLowerCase()==="input"}function gM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function yM(n,e){return n.button===0&&(!e||e==="_self")&&!gM(n)}var zf=null;function vM(){if(zf===null)try{new FormData(document.createElement("form"),0),zf=!1}catch{zf=!0}return zf}var _M=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function e0(n){return n!=null&&!_M.has(n)?(Ei(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jf}"`),null):n}function bM(n,e){let t,i,s,o,l;if(mM(n)){let h=n.getAttribute("action");i=h?Jr(h,e):null,t=n.getAttribute("method")||Zf,s=e0(n.getAttribute("enctype"))||Jf,o=new FormData(n)}else if(fM(n)||pM(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(i=d?Jr(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Zf,s=e0(n.getAttribute("formenctype"))||e0(h.getAttribute("enctype"))||Jf,o=new FormData(h,n),!vM()){let{name:f,type:g,value:v}=n;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,v)}}else{if(ap(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zf,i=null,s=Jf,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function TM(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Jr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function EM(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function SM(n,e,t){let i=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await EM(o,t);return l.links?l.links():[]}return[]}));return RM(i.flat(1).filter(wM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Nw(n,e,t,i,s,o){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,h=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||h(d,f)):o==="data"?e.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function xM(n,e,{includeHydrateFallback:t}={}){return AM(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function AM(n){return[...new Set(n)]}function IM(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function RM(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let o=JSON.stringify(IM(s));return t.has(o)||(t.add(o),i.push({key:o,link:s})),i},[])}function uI(){let n=z.useContext(Eu);return Wv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function CM(){let n=z.useContext(sp);return Wv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Zv=z.createContext(void 0);Zv.displayName="FrameworkContext";function cI(){let n=z.useContext(Zv);return Wv(n,"You must render this element inside a <HydratedRouter> element"),n}function DM(n,e){let t=z.useContext(Zv),[i,s]=z.useState(!1),[o,l]=z.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=e,_=z.useRef(null);z.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let N=U=>{U.forEach(q=>{l(q.isIntersecting)})},k=new IntersectionObserver(N,{threshold:.5});return _.current&&k.observe(_.current),()=>{k.disconnect()}}},[n]),z.useEffect(()=>{if(i){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[i]);let S=()=>{s(!0)},C=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:Bc(h,S),onBlur:Bc(d,C),onMouseEnter:Bc(f,S),onMouseLeave:Bc(g,C),onTouchStart:Bc(v,S)}]:[!1,_,{}]}function Bc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function NM({page:n,...e}){let{router:t}=uI(),i=z.useMemo(()=>ZA(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?z.createElement(VM,{page:n,matches:i,...e}):null}function kM(n){let{manifest:e,routeModules:t}=cI(),[i,s]=z.useState([]);return z.useEffect(()=>{let o=!1;return SM(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),i}function VM({page:n,matches:e,...t}){let i=va(),{manifest:s,routeModules:o}=cI(),{basename:l}=uI(),{loaderData:h,matches:d}=CM(),f=z.useMemo(()=>Nw(n,e,d,s,i,"data"),[n,e,d,s,i]),g=z.useMemo(()=>Nw(n,e,d,s,i,"assets"),[n,e,d,s,i]),v=z.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let C=new Set,N=!1;if(e.forEach(U=>{let q=s.routes[U.route.id];!q||!q.hasLoader||(!f.some(O=>O.route.id===U.route.id)&&U.route.id in h&&o[U.route.id]?.shouldRevalidate||q.hasClientLoader?N=!0:C.add(U.route.id))}),C.size===0)return[];let k=TM(n,l,"data");return N&&C.size>0&&k.searchParams.set("_routes",e.filter(U=>C.has(U.route.id)).map(U=>U.route.id).join(",")),[k.pathname+k.search]},[l,h,i,s,f,e,n,o]),_=z.useMemo(()=>xM(g,s),[g,s]),S=kM(g);return z.createElement(z.Fragment,null,v.map(C=>z.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),_.map(C=>z.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),S.map(({key:C,link:N})=>z.createElement("link",{key:C,nonce:t.nonce,...N})))}function MM(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var hI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hI&&(window.__reactRouterVersion="7.9.6")}catch{}function PM({basename:n,children:e,window:t}){let i=z.useRef();i.current==null&&(i.current=TV({window:t,v5Compat:!0}));let s=i.current,[o,l]=z.useState({action:s.action,location:s.location}),h=z.useCallback(d=>{z.startTransition(()=>l(d))},[l]);return z.useLayoutEffect(()=>s.listen(h),[s,h]),z.createElement(hM,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var dI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fI=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:o,replace:l,state:h,target:d,to:f,preventScrollReset:g,viewTransition:v,..._},S){let{basename:C}=z.useContext(wr),N=typeof f=="string"&&dI.test(f),k,U=!1;if(typeof f=="string"&&N&&(k=f,hI))try{let V=new URL(window.location.href),M=f.startsWith("//")?new URL(V.protocol+f):new URL(f),D=Jr(M.pathname,C);M.origin===V.origin&&D!=null?f=D+M.search+M.hash:U=!0}catch{Ei(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=YV(f,{relative:s}),[O,Z,te]=DM(i,_),H=zM(f,{replace:l,state:h,target:d,preventScrollReset:g,relative:s,viewTransition:v});function I(V){e&&e(V),V.defaultPrevented||H(V)}let A=z.createElement("a",{..._,...te,href:k||q,onClick:U||o?e:I,ref:MM(S,Z),target:d,"data-discover":!N&&t==="render"?"true":void 0});return O&&!N?z.createElement(z.Fragment,null,A,z.createElement(NM,{page:q})):A});fI.displayName="Link";var OM=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:o,to:l,viewTransition:h,children:d,...f},g){let v=Hh(l,{relative:f.relative}),_=va(),S=z.useContext(sp),{navigator:C,basename:N}=z.useContext(wr),k=S!=null&&HM(v)&&h===!0,U=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,q=_.pathname,O=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(q=q.toLowerCase(),O=O?O.toLowerCase():null,U=U.toLowerCase()),O&&N&&(O=Jr(O,N)||O);const Z=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let te=q===U||!s&&q.startsWith(U)&&q.charAt(Z)==="/",H=O!=null&&(O===U||!s&&O.startsWith(U)&&O.charAt(U.length)==="/"),I={isActive:te,isPending:H,isTransitioning:k},A=te?e:void 0,V;typeof i=="function"?V=i(I):V=[i,te?"active":null,H?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(I):o;return z.createElement(fI,{...f,"aria-current":A,className:V,ref:g,style:M,to:l,viewTransition:h},typeof d=="function"?d(I):d)});OM.displayName="NavLink";var LM=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:o,method:l=Zf,action:h,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:v,..._},S)=>{let C=FM(),N=qM(h,{relative:f}),k=l.toLowerCase()==="get"?"get":"post",U=typeof h=="string"&&dI.test(h),q=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let Z=O.nativeEvent.submitter,te=Z?.getAttribute("formmethod")||l;C(Z||O.currentTarget,{fetcherKey:e,method:te,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:v})};return z.createElement("form",{ref:S,method:k,action:N,onSubmit:i?d:q,..._,"data-discover":!U&&n==="render"?"true":void 0})});LM.displayName="Form";function jM(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mI(n){let e=z.useContext(Eu);return At(e,jM(n)),e}function zM(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:l}={}){let h=jo(),d=va(),f=Hh(n,{relative:o});return z.useCallback(g=>{if(yM(g,e)){g.preventDefault();let v=t!==void 0?t:gh(d)===gh(f);h(n,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,h,f,t,i,e,n,s,o,l])}var UM=0,BM=()=>`__${String(++UM)}__`;function FM(){let{router:n}=mI("useSubmit"),{basename:e}=z.useContext(wr),t=oM();return z.useCallback(async(i,s={})=>{let{action:o,method:l,encType:h,formData:d,body:f}=bM(i,e);if(s.navigate===!1){let g=s.fetcherKey||BM();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function qM(n,{relative:e}={}){let{basename:t}=z.useContext(wr),i=z.useContext(Sr);At(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...Hh(n||".",{relative:e})},l=va();if(n==null){o.search=l.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let g=h.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Wr([t,o.pathname])),gh(o)}function HM(n,{relative:e}={}){let t=z.useContext(rI);At(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=mI("useViewTransitionState"),s=Hh(n,{relative:e});if(!t.isTransitioning)return!1;let o=Jr(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=Jr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Em(s.pathname,l)!=null||Em(s.pathname,o)!=null}const GM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$M=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),kw=n=>{const e=$M(n);return e.charAt(0).toUpperCase()+e.slice(1)},pI=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),KM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var QM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const YM=z.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:l,...h},d)=>z.createElement("svg",{ref:d,...QM,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:pI("lucide",s),...!o&&!KM(h)&&{"aria-hidden":"true"},...h},[...l.map(([f,g])=>z.createElement(f,g)),...Array.isArray(o)?o:[o]]));const dt=(n,e)=>{const t=z.forwardRef(({className:i,...s},o)=>z.createElement(YM,{ref:o,iconNode:e,className:pI(`lucide-${GM(kw(n))}`,`lucide-${n}`,i),...s}));return t.displayName=kw(n),t};const XM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gI=dt("arrow-left",XM);const WM=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],ZM=dt("arrow-right-left",WM);const JM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ol=dt("chevron-right",JM);const e4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],t4=dt("circle-arrow-down",e4);const n4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],i4=dt("circle-arrow-up",n4);const r4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],s4=dt("circle-check-big",r4);const a4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Vw=dt("circle-check",a4);const o4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],l4=dt("circle-plus",o4);const u4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Mw=dt("circle",u4);const c4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wm=dt("download",c4);const h4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],d4=dt("file-text",h4);const f4=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],m4=dt("folder-plus",f4);const p4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],g4=dt("funnel",p4);const y4=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],v4=dt("git-branch",y4);const _4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],b4=dt("list",_4);const T4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],E4=dt("loader",T4);const w4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],j0=dt("refresh-cw",w4);const S4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],x4=dt("save",S4);const A4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],I4=dt("search",A4);const R4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],C4=dt("settings",R4);const D4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sm=dt("trash-2",D4);const N4=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yI=dt("trash",N4);const k4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],V4=dt("undo-2",k4);const M4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],P4=dt("upload",M4);const O4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],L4=dt("wallet",O4);const j4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],z4=dt("wifi-off",j4);const U4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],B4=dt("wifi",U4);const F4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Jv=dt("x",F4),Pw=n=>{let e;const t=new Set,i=(f,g)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(S=>S(e,_))}},s=()=>e,h={setState:i,getState:s,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=n(i,s,h);return h},q4=(n=>n?Pw(n):Pw),H4=n=>n;function G4(n,e=H4){const t=jf.useSyncExternalStore(n.subscribe,jf.useCallback(()=>e(n.getState()),[n,e]),jf.useCallback(()=>e(n.getInitialState()),[n,e]));return jf.useDebugValue(t),t}const Ow=n=>{const e=q4(n),t=i=>G4(e,i);return Object.assign(t,e),t},vI=(n=>n?Ow(n):Ow);var Fl=9e15,_a=1e9,z0="0123456789abcdef",xm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Am="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",U0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Fl,maxE:Fl,crypto:!1},_I,Kr,Me=!0,op="[DecimalError] ",ca=op+"Invalid argument: ",bI=op+"Precision limit exceeded",TI=op+"crypto unavailable",EI="[object Decimal]",xn=Math.floor,en=Math.pow,$4=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,K4=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Q4=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,wI=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,zi=1e7,Ie=7,Y4=9007199254740991,X4=xm.length-1,B0=Am.length-1,le={toStringTag:EI};le.absoluteValue=le.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Ee(n)};le.ceil=function(){return Ee(new this.constructor(this),this.e+1,2)};le.clampedTo=le.clamp=function(n,e){var t,i=this,s=i.constructor;if(n=new s(n),e=new s(e),!n.s||!e.s)return new s(NaN);if(n.gt(e))throw Error(ca+e);return t=i.cmp(n),t<0?n:i.cmp(e)>0?e:new s(i)};le.comparedTo=le.cmp=function(n){var e,t,i,s,o=this,l=o.d,h=(n=new o.constructor(n)).d,d=o.s,f=n.s;if(!l||!h)return!d||!f?NaN:d!==f?d:l===h?0:!l^d<0?1:-1;if(!l[0]||!h[0])return l[0]?d:h[0]?-f:0;if(d!==f)return d;if(o.e!==n.e)return o.e>n.e^d<0?1:-1;for(i=l.length,s=h.length,e=0,t=i<s?i:s;e<t;++e)if(l[e]!==h[e])return l[e]>h[e]^d<0?1:-1;return i===s?0:i>s^d<0?1:-1};le.cosine=le.cos=function(){var n,e,t=this,i=t.constructor;return t.d?t.d[0]?(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ie,i.rounding=1,t=W4(i,RI(i,t)),i.precision=n,i.rounding=e,Ee(Kr==2||Kr==3?t.neg():t,n,e,!0)):new i(1):new i(NaN)};le.cubeRoot=le.cbrt=function(){var n,e,t,i,s,o,l,h,d,f,g=this,v=g.constructor;if(!g.isFinite()||g.isZero())return new v(g);for(Me=!1,o=g.s*en(g.s*g,1/3),!o||Math.abs(o)==1/0?(t=gn(g.d),n=g.e,(o=(n-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=en(t,1/3),n=xn((n+1)/3)-(n%3==(n<0?-1:2)),o==1/0?t="5e"+n:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),i=new v(t),i.s=g.s):i=new v(o.toString()),l=(n=v.precision)+3;;)if(h=i,d=h.times(h).times(h),f=d.plus(g),i=mt(f.plus(g).times(h),f.plus(d),l+2,1),gn(h.d).slice(0,l)===(t=gn(i.d)).slice(0,l))if(t=t.slice(l-3,l+1),t=="9999"||!s&&t=="4999"){if(!s&&(Ee(h,n+1,0),h.times(h).times(h).eq(g))){i=h;break}l+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ee(i,n+1,1),e=!i.times(i).times(i).eq(g));break}return Me=!0,Ee(i,n,v.rounding,e)};le.decimalPlaces=le.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-xn(this.e/Ie))*Ie,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};le.dividedBy=le.div=function(n){return mt(this,new this.constructor(n))};le.dividedToIntegerBy=le.divToInt=function(n){var e=this,t=e.constructor;return Ee(mt(e,new t(n),0,1,1),t.precision,t.rounding)};le.equals=le.eq=function(n){return this.cmp(n)===0};le.floor=function(){return Ee(new this.constructor(this),this.e+1,3)};le.greaterThan=le.gt=function(n){return this.cmp(n)>0};le.greaterThanOrEqualTo=le.gte=function(n){var e=this.cmp(n);return e==1||e===0};le.hyperbolicCosine=le.cosh=function(){var n,e,t,i,s,o=this,l=o.constructor,h=new l(1);if(!o.isFinite())return new l(o.s?1/0:NaN);if(o.isZero())return h;t=l.precision,i=l.rounding,l.precision=t+Math.max(o.e,o.sd())+4,l.rounding=1,s=o.d.length,s<32?(n=Math.ceil(s/3),e=(1/up(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),o=eu(l,1,o.times(e),new l(1),!0);for(var d,f=n,g=new l(8);f--;)d=o.times(o),o=h.minus(d.times(g.minus(d.times(g))));return Ee(o,l.precision=t,l.rounding=i,!0)};le.hyperbolicSine=le.sinh=function(){var n,e,t,i,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<3)s=eu(o,2,s,s,!0);else{n=1.4*Math.sqrt(i),n=n>16?16:n|0,s=s.times(1/up(5,n)),s=eu(o,2,s,s,!0);for(var l,h=new o(5),d=new o(16),f=new o(20);n--;)l=s.times(s),s=s.times(h.plus(l.times(d.times(l).plus(f))))}return o.precision=e,o.rounding=t,Ee(s,e,t,!0)};le.hyperbolicTangent=le.tanh=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+7,i.rounding=1,mt(t.sinh(),t.cosh(),i.precision=n,i.rounding=e)):new i(t.s)};le.inverseCosine=le.acos=function(){var n=this,e=n.constructor,t=n.abs().cmp(1),i=e.precision,s=e.rounding;return t!==-1?t===0?n.isNeg()?dr(e,i,s):new e(0):new e(NaN):n.isZero()?dr(e,i+4,s).times(.5):(e.precision=i+6,e.rounding=1,n=new e(1).minus(n).div(n.plus(1)).sqrt().atan(),e.precision=i,e.rounding=s,n.times(2))};le.inverseHyperbolicCosine=le.acosh=function(){var n,e,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(n=i.precision,e=i.rounding,i.precision=n+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,Me=!1,t=t.times(t).minus(1).sqrt().plus(t),Me=!0,i.precision=n,i.rounding=e,t.ln()):new i(t)};le.inverseHyperbolicSine=le.asinh=function(){var n,e,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,Me=!1,t=t.times(t).plus(1).sqrt().plus(t),Me=!0,i.precision=n,i.rounding=e,t.ln())};le.inverseHyperbolicTangent=le.atanh=function(){var n,e,t,i,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(n=o.precision,e=o.rounding,i=s.sd(),Math.max(i,n)<2*-s.e-1?Ee(new o(s),n,e,!0):(o.precision=t=i-s.e,s=mt(s.plus(1),new o(1).minus(s),t+n,1),o.precision=n+4,o.rounding=1,s=s.ln(),o.precision=n,o.rounding=e,s.times(.5))):new o(NaN)};le.inverseSine=le.asin=function(){var n,e,t,i,s=this,o=s.constructor;return s.isZero()?new o(s):(e=s.abs().cmp(1),t=o.precision,i=o.rounding,e!==-1?e===0?(n=dr(o,t+4,i).times(.5),n.s=s.s,n):new o(NaN):(o.precision=t+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=i,s.times(2)))};le.inverseTangent=le.atan=function(){var n,e,t,i,s,o,l,h,d,f=this,g=f.constructor,v=g.precision,_=g.rounding;if(f.isFinite()){if(f.isZero())return new g(f);if(f.abs().eq(1)&&v+4<=B0)return l=dr(g,v+4,_).times(.25),l.s=f.s,l}else{if(!f.s)return new g(NaN);if(v+4<=B0)return l=dr(g,v+4,_).times(.5),l.s=f.s,l}for(g.precision=h=v+10,g.rounding=1,t=Math.min(28,h/Ie+2|0),n=t;n;--n)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Me=!1,e=Math.ceil(h/Ie),i=1,d=f.times(f),l=new g(f),s=f;n!==-1;)if(s=s.times(d),o=l.minus(s.div(i+=2)),s=s.times(d),l=o.plus(s.div(i+=2)),l.d[e]!==void 0)for(n=e;l.d[n]===o.d[n]&&n--;);return t&&(l=l.times(2<<t-1)),Me=!0,Ee(l,g.precision=v,g.rounding=_,!0)};le.isFinite=function(){return!!this.d};le.isInteger=le.isInt=function(){return!!this.d&&xn(this.e/Ie)>this.d.length-2};le.isNaN=function(){return!this.s};le.isNegative=le.isNeg=function(){return this.s<0};le.isPositive=le.isPos=function(){return this.s>0};le.isZero=function(){return!!this.d&&this.d[0]===0};le.lessThan=le.lt=function(n){return this.cmp(n)<0};le.lessThanOrEqualTo=le.lte=function(n){return this.cmp(n)<1};le.logarithm=le.log=function(n){var e,t,i,s,o,l,h,d,f=this,g=f.constructor,v=g.precision,_=g.rounding,S=5;if(n==null)n=new g(10),e=!0;else{if(n=new g(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new g(NaN);e=n.eq(10)}if(t=f.d,f.s<0||!t||!t[0]||f.eq(1))return new g(t&&!t[0]?-1/0:f.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(s=t[0];s%10===0;)s/=10;o=s!==1}if(Me=!1,h=v+S,l=na(f,h),i=e?Im(g,h+10):na(n,h),d=mt(l,i,h,1),yh(d.d,s=v,_))do if(h+=10,l=na(f,h),i=e?Im(g,h+10):na(n,h),d=mt(l,i,h,1),!o){+gn(d.d).slice(s+1,s+15)+1==1e14&&(d=Ee(d,v+1,0));break}while(yh(d.d,s+=10,_));return Me=!0,Ee(d,v,_)};le.minus=le.sub=function(n){var e,t,i,s,o,l,h,d,f,g,v,_,S=this,C=S.constructor;if(n=new C(n),!S.d||!n.d)return!S.s||!n.s?n=new C(NaN):S.d?n.s=-n.s:n=new C(n.d||S.s!==n.s?S:NaN),n;if(S.s!=n.s)return n.s=-n.s,S.plus(n);if(f=S.d,_=n.d,h=C.precision,d=C.rounding,!f[0]||!_[0]){if(_[0])n.s=-n.s;else if(f[0])n=new C(S);else return new C(d===3?-0:0);return Me?Ee(n,h,d):n}if(t=xn(n.e/Ie),g=xn(S.e/Ie),f=f.slice(),o=g-t,o){for(v=o<0,v?(e=f,o=-o,l=_.length):(e=_,t=g,l=f.length),i=Math.max(Math.ceil(h/Ie),l)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,l=_.length,v=i<l,v&&(l=i),i=0;i<l;i++)if(f[i]!=_[i]){v=f[i]<_[i];break}o=0}for(v&&(e=f,f=_,_=e,n.s=-n.s),l=f.length,i=_.length-l;i>0;--i)f[l++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(s=i;s&&f[--s]===0;)f[s]=zi-1;--f[s],f[i]+=zi}f[i]-=_[i]}for(;f[--l]===0;)f.pop();for(;f[0]===0;f.shift())--t;return f[0]?(n.d=f,n.e=lp(f,t),Me?Ee(n,h,d):n):new C(d===3?-0:0)};le.modulo=le.mod=function(n){var e,t=this,i=t.constructor;return n=new i(n),!t.d||!n.s||n.d&&!n.d[0]?new i(NaN):!n.d||t.d&&!t.d[0]?Ee(new i(t),i.precision,i.rounding):(Me=!1,i.modulo==9?(e=mt(t,n.abs(),0,3,1),e.s*=n.s):e=mt(t,n,0,i.modulo,1),e=e.times(n),Me=!0,t.minus(e))};le.naturalExponential=le.exp=function(){return F0(this)};le.naturalLogarithm=le.ln=function(){return na(this)};le.negated=le.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Ee(n)};le.plus=le.add=function(n){var e,t,i,s,o,l,h,d,f,g,v=this,_=v.constructor;if(n=new _(n),!v.d||!n.d)return!v.s||!n.s?n=new _(NaN):v.d||(n=new _(n.d||v.s===n.s?v:NaN)),n;if(v.s!=n.s)return n.s=-n.s,v.minus(n);if(f=v.d,g=n.d,h=_.precision,d=_.rounding,!f[0]||!g[0])return g[0]||(n=new _(v)),Me?Ee(n,h,d):n;if(o=xn(v.e/Ie),i=xn(n.e/Ie),f=f.slice(),s=o-i,s){for(s<0?(t=f,s=-s,l=g.length):(t=g,i=o,l=f.length),o=Math.ceil(h/Ie),l=o>l?o+1:l+1,s>l&&(s=l,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(l=f.length,s=g.length,l-s<0&&(s=l,t=g,g=f,f=t),e=0;s;)e=(f[--s]=f[s]+g[s]+e)/zi|0,f[s]%=zi;for(e&&(f.unshift(e),++i),l=f.length;f[--l]==0;)f.pop();return n.d=f,n.e=lp(f,i),Me?Ee(n,h,d):n};le.precision=le.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(ca+n);return t.d?(e=SI(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};le.round=function(){var n=this,e=n.constructor;return Ee(new e(n),n.e+1,e.rounding)};le.sine=le.sin=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ie,i.rounding=1,t=J4(i,RI(i,t)),i.precision=n,i.rounding=e,Ee(Kr>2?t.neg():t,n,e,!0)):new i(NaN)};le.squareRoot=le.sqrt=function(){var n,e,t,i,s,o,l=this,h=l.d,d=l.e,f=l.s,g=l.constructor;if(f!==1||!h||!h[0])return new g(!f||f<0&&(!h||h[0])?NaN:h?l:1/0);for(Me=!1,f=Math.sqrt(+l),f==0||f==1/0?(e=gn(h),(e.length+d)%2==0&&(e+="0"),f=Math.sqrt(e),d=xn((d+1)/2)-(d<0||d%2),f==1/0?e="5e"+d:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+d),i=new g(e)):i=new g(f.toString()),t=(d=g.precision)+3;;)if(o=i,i=o.plus(mt(l,o,t+2,1)).times(.5),gn(o.d).slice(0,t)===(e=gn(i.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!s&&e=="4999"){if(!s&&(Ee(o,d+1,0),o.times(o).eq(l))){i=o;break}t+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ee(i,d+1,1),n=!i.times(i).eq(l));break}return Me=!0,Ee(i,d,g.rounding,n)};le.tangent=le.tan=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+10,i.rounding=1,t=t.sin(),t.s=1,t=mt(t,new i(1).minus(t.times(t)).sqrt(),n+10,0),i.precision=n,i.rounding=e,Ee(Kr==2||Kr==4?t.neg():t,n,e,!0)):new i(NaN)};le.times=le.mul=function(n){var e,t,i,s,o,l,h,d,f,g=this,v=g.constructor,_=g.d,S=(n=new v(n)).d;if(n.s*=g.s,!_||!_[0]||!S||!S[0])return new v(!n.s||_&&!_[0]&&!S||S&&!S[0]&&!_?NaN:!_||!S?n.s/0:n.s*0);for(t=xn(g.e/Ie)+xn(n.e/Ie),d=_.length,f=S.length,d<f&&(o=_,_=S,S=o,l=d,d=f,f=l),o=[],l=d+f,i=l;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,s=d+i;s>i;)h=o[s]+S[i]*_[s-i-1]+e,o[s--]=h%zi|0,e=h/zi|0;o[s]=(o[s]+e)%zi|0}for(;!o[--l];)o.pop();return e?++t:o.shift(),n.d=o,n.e=lp(o,t),Me?Ee(n,v.precision,v.rounding):n};le.toBinary=function(n,e){return e_(this,2,n,e)};le.toDecimalPlaces=le.toDP=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(qn(n,0,_a),e===void 0?e=i.rounding:qn(e,0,8),Ee(t,n+t.e+1,e))};le.toExponential=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Tr(i,!0):(qn(n,0,_a),e===void 0?e=s.rounding:qn(e,0,8),i=Ee(new s(i),n+1,e),t=Tr(i,!0,n+1)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toFixed=function(n,e){var t,i,s=this,o=s.constructor;return n===void 0?t=Tr(s):(qn(n,0,_a),e===void 0?e=o.rounding:qn(e,0,8),i=Ee(new o(s),n+s.e+1,e),t=Tr(i,!1,n+i.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t};le.toFraction=function(n){var e,t,i,s,o,l,h,d,f,g,v,_,S=this,C=S.d,N=S.constructor;if(!C)return new N(S);if(f=t=new N(1),i=d=new N(0),e=new N(i),o=e.e=SI(C)-S.e-1,l=o%Ie,e.d[0]=en(10,l<0?Ie+l:l),n==null)n=o>0?e:f;else{if(h=new N(n),!h.isInt()||h.lt(f))throw Error(ca+h);n=h.gt(e)?o>0?e:f:h}for(Me=!1,h=new N(gn(C)),g=N.precision,N.precision=o=C.length*Ie*2;v=mt(h,e,0,1,1),s=t.plus(v.times(i)),s.cmp(n)!=1;)t=i,i=s,s=f,f=d.plus(v.times(s)),d=s,s=e,e=h.minus(v.times(s)),h=s;return s=mt(n.minus(t),i,0,1,1),d=d.plus(s.times(f)),t=t.plus(s.times(i)),d.s=f.s=S.s,_=mt(f,i,o,1).minus(S).abs().cmp(mt(d,t,o,1).minus(S).abs())<1?[f,i]:[d,t],N.precision=g,Me=!0,_};le.toHexadecimal=le.toHex=function(n,e){return e_(this,16,n,e)};le.toNearest=function(n,e){var t=this,i=t.constructor;if(t=new i(t),n==null){if(!t.d)return t;n=new i(1),e=i.rounding}else{if(n=new i(n),e===void 0?e=i.rounding:qn(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Me=!1,t=mt(t,n,0,e,1).times(n),Me=!0,Ee(t)):(n.s=t.s,t=n),t};le.toNumber=function(){return+this};le.toOctal=function(n,e){return e_(this,8,n,e)};le.toPower=le.pow=function(n){var e,t,i,s,o,l,h=this,d=h.constructor,f=+(n=new d(n));if(!h.d||!n.d||!h.d[0]||!n.d[0])return new d(en(+h,f));if(h=new d(h),h.eq(1))return h;if(i=d.precision,o=d.rounding,n.eq(1))return Ee(h,i,o);if(e=xn(n.e/Ie),e>=n.d.length-1&&(t=f<0?-f:f)<=Y4)return s=xI(d,h,t,i),n.s<0?new d(1).div(s):Ee(s,i,o);if(l=h.s,l<0){if(e<n.d.length-1)return new d(NaN);if((n.d[e]&1)==0&&(l=1),h.e==0&&h.d[0]==1&&h.d.length==1)return h.s=l,h}return t=en(+h,f),e=t==0||!isFinite(t)?xn(f*(Math.log("0."+gn(h.d))/Math.LN10+h.e+1)):new d(t+"").e,e>d.maxE+1||e<d.minE-1?new d(e>0?l/0:0):(Me=!1,d.rounding=h.s=1,t=Math.min(12,(e+"").length),s=F0(n.times(na(h,i+t)),i),s.d&&(s=Ee(s,i+5,1),yh(s.d,i,o)&&(e=i+10,s=Ee(F0(n.times(na(h,e+t)),e),e+5,1),+gn(s.d).slice(i+1,i+15)+1==1e14&&(s=Ee(s,i+1,0)))),s.s=l,Me=!0,d.rounding=o,Ee(s,i,o))};le.toPrecision=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Tr(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(qn(n,1,_a),e===void 0?e=s.rounding:qn(e,0,8),i=Ee(new s(i),n,e),t=Tr(i,n<=i.e||i.e<=s.toExpNeg,n)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toSignificantDigits=le.toSD=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(qn(n,1,_a),e===void 0?e=i.rounding:qn(e,0,8)),Ee(new i(t),n,e)};le.toString=function(){var n=this,e=n.constructor,t=Tr(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};le.truncated=le.trunc=function(){return Ee(new this.constructor(this),this.e+1,1)};le.valueOf=le.toJSON=function(){var n=this,e=n.constructor,t=Tr(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function gn(n){var e,t,i,s=n.length-1,o="",l=n[0];if(s>0){for(o+=l,e=1;e<s;e++)i=n[e]+"",t=Ie-i.length,t&&(o+=Xs(t)),o+=i;l=n[e],i=l+"",t=Ie-i.length,t&&(o+=Xs(t))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}function qn(n,e,t){if(n!==~~n||n<e||n>t)throw Error(ca+n)}function yh(n,e,t,i){var s,o,l,h;for(o=n[0];o>=10;o/=10)--e;return--e<0?(e+=Ie,s=0):(s=Math.ceil((e+1)/Ie),e%=Ie),o=en(10,Ie-e),h=n[s]%o|0,i==null?e<3?(e==0?h=h/100|0:e==1&&(h=h/10|0),l=t<4&&h==99999||t>3&&h==49999||h==5e4||h==0):l=(t<4&&h+1==o||t>3&&h+1==o/2)&&(n[s+1]/o/100|0)==en(10,e-2)-1||(h==o/2||h==0)&&(n[s+1]/o/100|0)==0:e<4?(e==0?h=h/1e3|0:e==1?h=h/100|0:e==2&&(h=h/10|0),l=(i||t<4)&&h==9999||!i&&t>3&&h==4999):l=((i||t<4)&&h+1==o||!i&&t>3&&h+1==o/2)&&(n[s+1]/o/1e3|0)==en(10,e-3)-1,l}function em(n,e,t){for(var i,s=[0],o,l=0,h=n.length;l<h;){for(o=s.length;o--;)s[o]*=e;for(s[0]+=z0.indexOf(n.charAt(l++)),i=0;i<s.length;i++)s[i]>t-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/t|0,s[i]%=t)}return s.reverse()}function W4(n,e){var t,i,s;if(e.isZero())return e;i=e.d.length,i<32?(t=Math.ceil(i/3),s=(1/up(4,t)).toString()):(t=16,s="2.3283064365386962890625e-10"),n.precision+=t,e=eu(n,1,e.times(s),new n(1));for(var o=t;o--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return n.precision-=t,e}var mt=(function(){function n(i,s,o){var l,h=0,d=i.length;for(i=i.slice();d--;)l=i[d]*s+h,i[d]=l%o|0,h=l/o|0;return h&&i.unshift(h),i}function e(i,s,o,l){var h,d;if(o!=l)d=o>l?1:-1;else for(h=d=0;h<o;h++)if(i[h]!=s[h]){d=i[h]>s[h]?1:-1;break}return d}function t(i,s,o,l){for(var h=0;o--;)i[o]-=h,h=i[o]<s[o]?1:0,i[o]=h*l+i[o]-s[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,o,l,h,d){var f,g,v,_,S,C,N,k,U,q,O,Z,te,H,I,A,V,M,D,j,P=i.constructor,Ce=i.s==s.s?1:-1,de=i.d,G=s.d;if(!de||!de[0]||!G||!G[0])return new P(!i.s||!s.s||(de?G&&de[0]==G[0]:!G)?NaN:de&&de[0]==0||!G?Ce*0:Ce/0);for(d?(S=1,g=i.e-s.e):(d=zi,S=Ie,g=xn(i.e/S)-xn(s.e/S)),D=G.length,V=de.length,U=new P(Ce),q=U.d=[],v=0;G[v]==(de[v]||0);v++);if(G[v]>(de[v]||0)&&g--,o==null?(H=o=P.precision,l=P.rounding):h?H=o+(i.e-s.e)+1:H=o,H<0)q.push(1),C=!0;else{if(H=H/S+2|0,v=0,D==1){for(_=0,G=G[0],H++;(v<V||_)&&H--;v++)I=_*d+(de[v]||0),q[v]=I/G|0,_=I%G|0;C=_||v<V}else{for(_=d/(G[0]+1)|0,_>1&&(G=n(G,_,d),de=n(de,_,d),D=G.length,V=de.length),A=D,O=de.slice(0,D),Z=O.length;Z<D;)O[Z++]=0;j=G.slice(),j.unshift(0),M=G[0],G[1]>=d/2&&++M;do _=0,f=e(G,O,D,Z),f<0?(te=O[0],D!=Z&&(te=te*d+(O[1]||0)),_=te/M|0,_>1?(_>=d&&(_=d-1),N=n(G,_,d),k=N.length,Z=O.length,f=e(N,O,k,Z),f==1&&(_--,t(N,D<k?j:G,k,d))):(_==0&&(f=_=1),N=G.slice()),k=N.length,k<Z&&N.unshift(0),t(O,N,Z,d),f==-1&&(Z=O.length,f=e(G,O,D,Z),f<1&&(_++,t(O,D<Z?j:G,Z,d))),Z=O.length):f===0&&(_++,O=[0]),q[v++]=_,f&&O[0]?O[Z++]=de[A]||0:(O=[de[A]],Z=1);while((A++<V||O[0]!==void 0)&&H--);C=O[0]!==void 0}q[0]||q.shift()}if(S==1)U.e=g,_I=C;else{for(v=1,_=q[0];_>=10;_/=10)v++;U.e=v+g*S-1,Ee(U,h?o+U.e+1:o,l,C)}return U}})();function Ee(n,e,t,i){var s,o,l,h,d,f,g,v,_,S=n.constructor;e:if(e!=null){if(v=n.d,!v)return n;for(s=1,h=v[0];h>=10;h/=10)s++;if(o=e-s,o<0)o+=Ie,l=e,g=v[_=0],d=g/en(10,s-l-1)%10|0;else if(_=Math.ceil((o+1)/Ie),h=v.length,_>=h)if(i){for(;h++<=_;)v.push(0);g=d=0,s=1,o%=Ie,l=o-Ie+1}else break e;else{for(g=h=v[_],s=1;h>=10;h/=10)s++;o%=Ie,l=o-Ie+s,d=l<0?0:g/en(10,s-l-1)%10|0}if(i=i||e<0||v[_+1]!==void 0||(l<0?g:g%en(10,s-l-1)),f=t<4?(d||i)&&(t==0||t==(n.s<0?3:2)):d>5||d==5&&(t==4||i||t==6&&(o>0?l>0?g/en(10,s-l):0:v[_-1])%10&1||t==(n.s<0?8:7)),e<1||!v[0])return v.length=0,f?(e-=n.e+1,v[0]=en(10,(Ie-e%Ie)%Ie),n.e=-e||0):v[0]=n.e=0,n;if(o==0?(v.length=_,h=1,_--):(v.length=_+1,h=en(10,Ie-o),v[_]=l>0?(g/en(10,s-l)%en(10,l)|0)*h:0),f)for(;;)if(_==0){for(o=1,l=v[0];l>=10;l/=10)o++;for(l=v[0]+=h,h=1;l>=10;l/=10)h++;o!=h&&(n.e++,v[0]==zi&&(v[0]=1));break}else{if(v[_]+=h,v[_]!=zi)break;v[_--]=0,h=1}for(o=v.length;v[--o]===0;)v.pop()}return Me&&(n.e>S.maxE?(n.d=null,n.e=NaN):n.e<S.minE&&(n.e=0,n.d=[0])),n}function Tr(n,e,t){if(!n.isFinite())return II(n);var i,s=n.e,o=gn(n.d),l=o.length;return e?(t&&(i=t-l)>0?o=o.charAt(0)+"."+o.slice(1)+Xs(i):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n.e<0?"e":"e+")+n.e):s<0?(o="0."+Xs(-s-1)+o,t&&(i=t-l)>0&&(o+=Xs(i))):s>=l?(o+=Xs(s+1-l),t&&(i=t-s-1)>0&&(o=o+"."+Xs(i))):((i=s+1)<l&&(o=o.slice(0,i)+"."+o.slice(i)),t&&(i=t-l)>0&&(s+1===l&&(o+="."),o+=Xs(i))),o}function lp(n,e){var t=n[0];for(e*=Ie;t>=10;t/=10)e++;return e}function Im(n,e,t){if(e>X4)throw Me=!0,t&&(n.precision=t),Error(bI);return Ee(new n(xm),e,1,!0)}function dr(n,e,t){if(e>B0)throw Error(bI);return Ee(new n(Am),e,t,!0)}function SI(n){var e=n.length-1,t=e*Ie+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function Xs(n){for(var e="";n--;)e+="0";return e}function xI(n,e,t,i){var s,o=new n(1),l=Math.ceil(i/Ie+4);for(Me=!1;;){if(t%2&&(o=o.times(e),jw(o.d,l)&&(s=!0)),t=xn(t/2),t===0){t=o.d.length-1,s&&o.d[t]===0&&++o.d[t];break}e=e.times(e),jw(e.d,l)}return Me=!0,o}function Lw(n){return n.d[n.d.length-1]&1}function AI(n,e,t){for(var i,s,o=new n(e[0]),l=0;++l<e.length;){if(s=new n(e[l]),!s.s){o=s;break}i=o.cmp(s),(i===t||i===0&&o.s===t)&&(o=s)}return o}function F0(n,e){var t,i,s,o,l,h,d,f=0,g=0,v=0,_=n.constructor,S=_.rounding,C=_.precision;if(!n.d||!n.d[0]||n.e>17)return new _(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Me=!1,d=C):d=e,h=new _(.03125);n.e>-2;)n=n.times(h),v+=5;for(i=Math.log(en(2,v))/Math.LN10*2+5|0,d+=i,t=o=l=new _(1),_.precision=d;;){if(o=Ee(o.times(n),d,1),t=t.times(++g),h=l.plus(mt(o,t,d,1)),gn(h.d).slice(0,d)===gn(l.d).slice(0,d)){for(s=v;s--;)l=Ee(l.times(l),d,1);if(e==null)if(f<3&&yh(l.d,d-i,S,f))_.precision=d+=10,t=o=h=new _(1),g=0,f++;else return Ee(l,_.precision=C,S,Me=!0);else return _.precision=C,l}l=h}}function na(n,e){var t,i,s,o,l,h,d,f,g,v,_,S=1,C=10,N=n,k=N.d,U=N.constructor,q=U.rounding,O=U.precision;if(N.s<0||!k||!k[0]||!N.e&&k[0]==1&&k.length==1)return new U(k&&!k[0]?-1/0:N.s!=1?NaN:k?0:N);if(e==null?(Me=!1,g=O):g=e,U.precision=g+=C,t=gn(k),i=t.charAt(0),Math.abs(o=N.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)N=N.times(n),t=gn(N.d),i=t.charAt(0),S++;o=N.e,i>1?(N=new U("0."+t),o++):N=new U(i+"."+t.slice(1))}else return f=Im(U,g+2,O).times(o+""),N=na(new U(i+"."+t.slice(1)),g-C).plus(f),U.precision=O,e==null?Ee(N,O,q,Me=!0):N;for(v=N,d=l=N=mt(N.minus(1),N.plus(1),g,1),_=Ee(N.times(N),g,1),s=3;;){if(l=Ee(l.times(_),g,1),f=d.plus(mt(l,new U(s),g,1)),gn(f.d).slice(0,g)===gn(d.d).slice(0,g))if(d=d.times(2),o!==0&&(d=d.plus(Im(U,g+2,O).times(o+""))),d=mt(d,new U(S),g,1),e==null)if(yh(d.d,g-C,q,h))U.precision=g+=C,f=l=N=mt(v.minus(1),v.plus(1),g,1),_=Ee(N.times(N),g,1),s=h=1;else return Ee(d,U.precision=O,q,Me=!0);else return U.precision=O,d;d=f,s+=2}}function II(n){return String(n.s*n.s/0)}function tm(n,e){var t,i,s;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,n.e=t=t-i-1,n.d=[],i=(t+1)%Ie,t<0&&(i+=Ie),i<s){for(i&&n.d.push(+e.slice(0,i)),s-=Ie;i<s;)n.d.push(+e.slice(i,i+=Ie));e=e.slice(i),i=Ie-e.length}else i-=s;for(;i--;)e+="0";n.d.push(+e),Me&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function Z4(n,e){var t,i,s,o,l,h,d,f,g;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),wI.test(e))return tm(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(K4.test(e))t=16,e=e.toLowerCase();else if($4.test(e))t=2;else if(Q4.test(e))t=8;else throw Error(ca+e);for(o=e.search(/p/i),o>0?(d=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),l=o>=0,i=n.constructor,l&&(e=e.replace(".",""),h=e.length,o=h-o,s=xI(i,new i(t),o,o*2)),f=em(e,t,zi),g=f.length-1,o=g;f[o]===0;--o)f.pop();return o<0?new i(n.s*0):(n.e=lp(f,g),n.d=f,Me=!1,l&&(n=mt(n,s,h*4)),d&&(n=n.times(Math.abs(d)<54?en(2,d):$r.pow(2,d))),Me=!0,n)}function J4(n,e){var t,i=e.d.length;if(i<3)return e.isZero()?e:eu(n,2,e,e);t=1.4*Math.sqrt(i),t=t>16?16:t|0,e=e.times(1/up(5,t)),e=eu(n,2,e,e);for(var s,o=new n(5),l=new n(16),h=new n(20);t--;)s=e.times(e),e=e.times(o.plus(s.times(l.times(s).minus(h))));return e}function eu(n,e,t,i,s){var o,l,h,d,f=n.precision,g=Math.ceil(f/Ie);for(Me=!1,d=t.times(t),h=new n(i);;){if(l=mt(h.times(d),new n(e++*e++),f,1),h=s?i.plus(l):i.minus(l),i=mt(l.times(d),new n(e++*e++),f,1),l=h.plus(i),l.d[g]!==void 0){for(o=g;l.d[o]===h.d[o]&&o--;);if(o==-1)break}o=h,h=i,i=l,l=o}return Me=!0,l.d.length=g+1,l}function up(n,e){for(var t=n;--e;)t*=n;return t}function RI(n,e){var t,i=e.s<0,s=dr(n,n.precision,1),o=s.times(.5);if(e=e.abs(),e.lte(o))return Kr=i?4:1,e;if(t=e.divToInt(s),t.isZero())Kr=i?3:2;else{if(e=e.minus(t.times(s)),e.lte(o))return Kr=Lw(t)?i?2:3:i?4:1,e;Kr=Lw(t)?i?1:4:i?3:2}return e.minus(s).abs()}function e_(n,e,t,i){var s,o,l,h,d,f,g,v,_,S=n.constructor,C=t!==void 0;if(C?(qn(t,1,_a),i===void 0?i=S.rounding:qn(i,0,8)):(t=S.precision,i=S.rounding),!n.isFinite())g=II(n);else{for(g=Tr(n),l=g.indexOf("."),C?(s=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):s=e,l>=0&&(g=g.replace(".",""),_=new S(1),_.e=g.length-l,_.d=em(Tr(_),10,s),_.e=_.d.length),v=em(g,10,s),o=d=v.length;v[--d]==0;)v.pop();if(!v[0])g=C?"0p+0":"0";else{if(l<0?o--:(n=new S(n),n.d=v,n.e=o,n=mt(n,_,t,i,0,s),v=n.d,o=n.e,f=_I),l=v[t],h=s/2,f=f||v[t+1]!==void 0,f=i<4?(l!==void 0||f)&&(i===0||i===(n.s<0?3:2)):l>h||l===h&&(i===4||f||i===6&&v[t-1]&1||i===(n.s<0?8:7)),v.length=t,f)for(;++v[--t]>s-1;)v[t]=0,t||(++o,v.unshift(1));for(d=v.length;!v[d-1];--d);for(l=0,g="";l<d;l++)g+=z0.charAt(v[l]);if(C){if(d>1)if(e==16||e==8){for(l=e==16?4:3,--d;d%l;d++)g+="0";for(v=em(g,s,e),d=v.length;!v[d-1];--d);for(l=1,g="1.";l<d;l++)g+=z0.charAt(v[l])}else g=g.charAt(0)+"."+g.slice(1);g=g+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)g="0"+g;g="0."+g}else if(++o>d)for(o-=d;o--;)g+="0";else o<d&&(g=g.slice(0,o)+"."+g.slice(o))}g=(e==16?"0x":e==2?"0b":e==8?"0o":"")+g}return n.s<0?"-"+g:g}function jw(n,e){if(n.length>e)return n.length=e,!0}function eP(n){return new this(n).abs()}function tP(n){return new this(n).acos()}function nP(n){return new this(n).acosh()}function iP(n,e){return new this(n).plus(e)}function rP(n){return new this(n).asin()}function sP(n){return new this(n).asinh()}function aP(n){return new this(n).atan()}function oP(n){return new this(n).atanh()}function lP(n,e){n=new this(n),e=new this(e);var t,i=this.precision,s=this.rounding,o=i+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=dr(this,o,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?dr(this,i,s):new this(0),t.s=n.s):!n.d||e.isZero()?(t=dr(this,o,1).times(.5),t.s=n.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(mt(n,e,o,1)),e=dr(this,o,1),this.precision=i,this.rounding=s,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(mt(n,e,o,1)),t}function uP(n){return new this(n).cbrt()}function cP(n){return Ee(n=new this(n),n.e+1,2)}function hP(n,e,t){return new this(n).clamp(e,t)}function dP(n){if(!n||typeof n!="object")throw Error(op+"Object expected");var e,t,i,s=n.defaults===!0,o=["precision",1,_a,"rounding",0,8,"toExpNeg",-Fl,0,"toExpPos",0,Fl,"maxE",0,Fl,"minE",-Fl,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],s&&(this[t]=U0[t]),(i=n[t])!==void 0)if(xn(i)===i&&i>=o[e+1]&&i<=o[e+2])this[t]=i;else throw Error(ca+t+": "+i);if(t="crypto",s&&(this[t]=U0[t]),(i=n[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(TI);else this[t]=!1;else throw Error(ca+t+": "+i);return this}function fP(n){return new this(n).cos()}function mP(n){return new this(n).cosh()}function CI(n){var e,t,i;function s(o){var l,h,d,f=this;if(!(f instanceof s))return new s(o);if(f.constructor=s,zw(o)){f.s=o.s,Me?!o.d||o.e>s.maxE?(f.e=NaN,f.d=null):o.e<s.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(d=typeof o,d==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(l=0,h=o;h>=10;h/=10)l++;Me?l>s.maxE?(f.e=NaN,f.d=null):l<s.minE?(f.e=0,f.d=[0]):(f.e=l,f.d=[o]):(f.e=l,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return tm(f,o.toString())}if(d==="string")return(h=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(h===43&&(o=o.slice(1)),f.s=1),wI.test(o)?tm(f,o):Z4(f,o);if(d==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,tm(f,o.toString());throw Error(ca+o)}if(s.prototype=le,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=dP,s.clone=CI,s.isDecimal=zw,s.abs=eP,s.acos=tP,s.acosh=nP,s.add=iP,s.asin=rP,s.asinh=sP,s.atan=aP,s.atanh=oP,s.atan2=lP,s.cbrt=uP,s.ceil=cP,s.clamp=hP,s.cos=fP,s.cosh=mP,s.div=pP,s.exp=gP,s.floor=yP,s.hypot=vP,s.ln=_P,s.log=bP,s.log10=EP,s.log2=TP,s.max=wP,s.min=SP,s.mod=xP,s.mul=AP,s.pow=IP,s.random=RP,s.round=CP,s.sign=DP,s.sin=NP,s.sinh=kP,s.sqrt=VP,s.sub=MP,s.sum=PP,s.tan=OP,s.tanh=LP,s.trunc=jP,n===void 0&&(n={}),n&&n.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return s.config(n),s}function pP(n,e){return new this(n).div(e)}function gP(n){return new this(n).exp()}function yP(n){return Ee(n=new this(n),n.e+1,3)}function vP(){var n,e,t=new this(0);for(Me=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Me=!0,new this(1/0);t=e}return Me=!0,t.sqrt()}function zw(n){return n instanceof $r||n&&n.toStringTag===EI||!1}function _P(n){return new this(n).ln()}function bP(n,e){return new this(n).log(e)}function TP(n){return new this(n).log(2)}function EP(n){return new this(n).log(10)}function wP(){return AI(this,arguments,-1)}function SP(){return AI(this,arguments,1)}function xP(n,e){return new this(n).mod(e)}function AP(n,e){return new this(n).mul(e)}function IP(n,e){return new this(n).pow(e)}function RP(n){var e,t,i,s,o=0,l=new this(1),h=[];if(n===void 0?n=this.precision:qn(n,1,_a),i=Math.ceil(n/Ie),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)s=e[o],s>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:h[o++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)s=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,o):(h.push(s%1e7),o+=4);o=i/4}else throw Error(TI);else for(;o<i;)h[o++]=Math.random()*1e7|0;for(i=h[--o],n%=Ie,i&&n&&(s=en(10,Ie-n),h[o]=(i/s|0)*s);h[o]===0;o--)h.pop();if(o<0)t=0,h=[0];else{for(t=-1;h[0]===0;t-=Ie)h.shift();for(i=1,s=h[0];s>=10;s/=10)i++;i<Ie&&(t-=Ie-i)}return l.e=t,l.d=h,l}function CP(n){return Ee(n=new this(n),n.e+1,this.rounding)}function DP(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function NP(n){return new this(n).sin()}function kP(n){return new this(n).sinh()}function VP(n){return new this(n).sqrt()}function MP(n,e){return new this(n).sub(e)}function PP(){var n=0,e=arguments,t=new this(e[n]);for(Me=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Me=!0,Ee(t,this.precision,this.rounding)}function OP(n){return new this(n).tan()}function LP(n){return new this(n).tanh()}function jP(n){return Ee(n=new this(n),n.e+1,1)}le[Symbol.for("nodejs.util.inspect.custom")]=le.toString;le[Symbol.toStringTag]="Decimal";var $r=le.constructor=CI(U0);xm=new $r(xm);Am=new $r(Am);const zP=()=>{};var Uw={};const DI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},UP=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},NI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,h=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,g=o>>2,v=(o&3)<<4|h>>4;let _=(h&15)<<2|f>>6,S=f&63;d||(S=64,l||(_=64)),i.push(t[g],t[v],t[_],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):UP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||f==null||v==null)throw new BP;const _=o<<2|h>>4;if(i.push(_),f!==64){const S=h<<4&240|f>>2;if(i.push(S),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FP=function(n){const e=DI(n);return NI.encodeByteArray(e,!0)},kI=function(n){return FP(n).replace(/\./g,"")},VI=function(n){try{return NI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function MI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const qP=()=>MI().__FIREBASE_DEFAULTS__,HP=()=>{if(typeof process>"u"||typeof Uw>"u")return;const n=Uw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&VI(n[1]);return e&&JSON.parse(e)},cp=()=>{try{return zP()||qP()||HP()||GP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$P=n=>cp()?.emulatorHosts?.[n],PI=()=>cp()?.config,OI=n=>cp()?.[`_${n}`];class KP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function wu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LI(n){return(await fetch(n,{credentials:"include"})).ok}const eh={};function QP(){const n={prod:[],emulator:[]};for(const e of Object.keys(eh))eh[e]?n.emulator.push(e):n.prod.push(e);return n}function YP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Bw=!1;function XP(n,e){if(typeof window>"u"||typeof document>"u"||!wu(window.location.host)||eh[n]===e||eh[n]||Bw)return;eh[n]=e;function t(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=QP().prod.length>0;function l(){const _=document.getElementById(i);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,S){_.setAttribute("width","24"),_.setAttribute("id",S),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Bw=!0,l()},_}function g(_,S){_.setAttribute("id",S),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=YP(i),S=t("text"),C=document.getElementById(S)||document.createElement("span"),N=t("learnmore"),k=document.getElementById(N)||document.createElement("a"),U=t("preprendIcon"),q=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const O=_.element;h(O),g(k,N);const Z=f();d(q,U),O.append(q,C,k,Z),document.body.appendChild(O)}o?(C.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function jI(){const n=cp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tO(){const n=tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function zI(){return!jI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UI(){return!jI()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function BI(){try{return typeof indexedDB=="object"}catch{return!1}}function nO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const iO="FirebaseError";class os extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=iO,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gh.prototype.create)}}class Gh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?rO(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new os(s,h,i)}}function rO(n,e){return n.replace(sO,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const sO=/\{\$([^}]+)}/g;function aO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ao(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],l=e[s];if(Fw(o)&&Fw(l)){if(!Ao(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Fw(n){return n!==null&&typeof n=="object"}function $h(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function oO(n,e){const t=new lO(n,e);return t.subscribe.bind(t)}class lO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");uO(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=t0),s.error===void 0&&(s.error=t0),s.complete===void 0&&(s.complete=t0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function t0(){}function An(n){return n&&n._delegate?n._delegate:n}class Io{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const so="[DEFAULT]";class cO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new KP;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dO(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hO(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hO(n){return n===so?void 0:n}function dO(n){return n.instantiationMode==="EAGER"}class fO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const mO={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},pO=$e.INFO,gO={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},yO=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=gO[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class t_{constructor(e){this.name=e,this._logLevel=pO,this._logHandler=yO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const vO=(n,e)=>e.some(t=>n instanceof t);let qw,Hw;function _O(){return qw||(qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bO(){return Hw||(Hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FI=new WeakMap,q0=new WeakMap,qI=new WeakMap,n0=new WeakMap,n_=new WeakMap;function TO(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(ra(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&FI.set(t,n)}).catch(()=>{}),n_.set(e,n),e}function EO(n){if(q0.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});q0.set(n,e)}let H0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return q0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ra(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function wO(n){H0=n(H0)}function SO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(i0(this),e,...t);return qI.set(i,e.sort?e.sort():[e]),ra(i)}:bO().includes(n)?function(...e){return n.apply(i0(this),e),ra(FI.get(this))}:function(...e){return ra(n.apply(i0(this),e))}}function xO(n){return typeof n=="function"?SO(n):(n instanceof IDBTransaction&&EO(n),vO(n,_O())?new Proxy(n,H0):n)}function ra(n){if(n instanceof IDBRequest)return TO(n);if(n0.has(n))return n0.get(n);const e=xO(n);return e!==n&&(n0.set(n,e),n_.set(e,n)),e}const i0=n=>n_.get(n);function AO(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),h=ra(l);return i&&l.addEventListener("upgradeneeded",d=>{i(ra(l.result),d.oldVersion,d.newVersion,ra(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const IO=["get","getKey","getAll","getAllKeys","count"],RO=["put","add","delete","clear"],r0=new Map;function Gw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(r0.get(e))return r0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=RO.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||IO.includes(t)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(h.shift())),(await Promise.all([f[t](...h),s&&d.done]))[0]};return r0.set(e,o),o}wO(n=>({...n,get:(e,t,i)=>Gw(e,t)||n.get(e,t,i),has:(e,t)=>!!Gw(e,t)||n.has(e,t)}));class CO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DO(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function DO(n){return n.getComponent()?.type==="VERSION"}const G0="@firebase/app",$w="0.14.6";const es=new t_("@firebase/app"),NO="@firebase/app-compat",kO="@firebase/analytics-compat",VO="@firebase/analytics",MO="@firebase/app-check-compat",PO="@firebase/app-check",OO="@firebase/auth",LO="@firebase/auth-compat",jO="@firebase/database",zO="@firebase/data-connect",UO="@firebase/database-compat",BO="@firebase/functions",FO="@firebase/functions-compat",qO="@firebase/installations",HO="@firebase/installations-compat",GO="@firebase/messaging",$O="@firebase/messaging-compat",KO="@firebase/performance",QO="@firebase/performance-compat",YO="@firebase/remote-config",XO="@firebase/remote-config-compat",WO="@firebase/storage",ZO="@firebase/storage-compat",JO="@firebase/firestore",e3="@firebase/ai",t3="@firebase/firestore-compat",n3="firebase",i3="12.6.0";const $0="[DEFAULT]",r3={[G0]:"fire-core",[NO]:"fire-core-compat",[VO]:"fire-analytics",[kO]:"fire-analytics-compat",[PO]:"fire-app-check",[MO]:"fire-app-check-compat",[OO]:"fire-auth",[LO]:"fire-auth-compat",[jO]:"fire-rtdb",[zO]:"fire-data-connect",[UO]:"fire-rtdb-compat",[BO]:"fire-fn",[FO]:"fire-fn-compat",[qO]:"fire-iid",[HO]:"fire-iid-compat",[GO]:"fire-fcm",[$O]:"fire-fcm-compat",[KO]:"fire-perf",[QO]:"fire-perf-compat",[YO]:"fire-rc",[XO]:"fire-rc-compat",[WO]:"fire-gcs",[ZO]:"fire-gcs-compat",[JO]:"fire-fst",[t3]:"fire-fst-compat",[e3]:"fire-vertex","fire-js":"fire-js",[n3]:"fire-js-all"};const Rm=new Map,s3=new Map,K0=new Map;function Kw(n,e){try{n.container.addComponent(e)}catch(t){es.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function tu(n){const e=n.name;if(K0.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;K0.set(e,n);for(const t of Rm.values())Kw(t,n);for(const t of s3.values())Kw(t,n);return!0}function i_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hr(n){return n==null?!1:n.settings!==void 0}const a3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sa=new Gh("app","Firebase",a3);class o3{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sa.create("app-deleted",{appName:this._name})}}const Su=i3;function HI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:$0,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw sa.create("bad-app-name",{appName:String(s)});if(t||(t=PI()),!t)throw sa.create("no-options");const o=Rm.get(s);if(o){if(Ao(t,o.options)&&Ao(i,o.config))return o;throw sa.create("duplicate-app",{appName:s})}const l=new fO(s);for(const d of K0.values())l.addComponent(d);const h=new o3(t,i,l);return Rm.set(s,h),h}function l3(n=$0){const e=Rm.get(n);if(!e&&n===$0&&PI())return HI();if(!e)throw sa.create("no-app",{appName:n});return e}function aa(n,e,t){let i=r3[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(l.join(" "));return}tu(new Io(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const u3="firebase-heartbeat-database",c3=1,vh="firebase-heartbeat-store";let s0=null;function GI(){return s0||(s0=AO(u3,c3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vh)}catch(t){console.warn(t)}}}}).catch(n=>{throw sa.create("idb-open",{originalErrorMessage:n.message})})),s0}async function h3(n){try{const t=(await GI()).transaction(vh),i=await t.objectStore(vh).get($I(n));return await t.done,i}catch(e){if(e instanceof os)es.warn(e.message);else{const t=sa.create("idb-get",{originalErrorMessage:e?.message});es.warn(t.message)}}}async function Qw(n,e){try{const i=(await GI()).transaction(vh,"readwrite");await i.objectStore(vh).put(e,$I(n)),await i.done}catch(t){if(t instanceof os)es.warn(t.message);else{const i=sa.create("idb-set",{originalErrorMessage:t?.message});es.warn(i.message)}}}function $I(n){return`${n.name}!${n.options.appId}`}const d3=1024,f3=30;class m3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new g3(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>f3){const s=y3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){es.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Yw(),{heartbeatsToSend:t,unsentEntries:i}=p3(this._heartbeatsCache.heartbeats),s=kI(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return es.warn(e),""}}}function Yw(){return new Date().toISOString().substring(0,10)}function p3(n,e=d3){const t=[];let i=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Xw(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Xw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class g3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BI()?nO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await h3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Qw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Qw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xw(n){return kI(JSON.stringify({version:2,heartbeats:n})).length}function y3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function v3(n){tu(new Io("platform-logger",e=>new CO(e),"PRIVATE")),tu(new Io("heartbeat",e=>new m3(e),"PRIVATE")),aa(G0,$w,n),aa(G0,$w,"esm2020"),aa("fire-js","")}v3("");var Ww=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oa,KI;(function(){var n;function e(I,A){function V(){}V.prototype=A.prototype,I.F=A.prototype,I.prototype=new V,I.prototype.constructor=I,I.D=function(M,D,j){for(var P=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)P[Ce-2]=arguments[Ce];return A.prototype[D].apply(M,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,A,V){V||(V=0);const M=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)M[D]=A.charCodeAt(V++)|A.charCodeAt(V++)<<8|A.charCodeAt(V++)<<16|A.charCodeAt(V++)<<24;else for(D=0;D<16;++D)M[D]=A[V++]|A[V++]<<8|A[V++]<<16|A[V++]<<24;A=I.g[0],V=I.g[1],D=I.g[2];let j=I.g[3],P;P=A+(j^V&(D^j))+M[0]+3614090360&4294967295,A=V+(P<<7&4294967295|P>>>25),P=j+(D^A&(V^D))+M[1]+3905402710&4294967295,j=A+(P<<12&4294967295|P>>>20),P=D+(V^j&(A^V))+M[2]+606105819&4294967295,D=j+(P<<17&4294967295|P>>>15),P=V+(A^D&(j^A))+M[3]+3250441966&4294967295,V=D+(P<<22&4294967295|P>>>10),P=A+(j^V&(D^j))+M[4]+4118548399&4294967295,A=V+(P<<7&4294967295|P>>>25),P=j+(D^A&(V^D))+M[5]+1200080426&4294967295,j=A+(P<<12&4294967295|P>>>20),P=D+(V^j&(A^V))+M[6]+2821735955&4294967295,D=j+(P<<17&4294967295|P>>>15),P=V+(A^D&(j^A))+M[7]+4249261313&4294967295,V=D+(P<<22&4294967295|P>>>10),P=A+(j^V&(D^j))+M[8]+1770035416&4294967295,A=V+(P<<7&4294967295|P>>>25),P=j+(D^A&(V^D))+M[9]+2336552879&4294967295,j=A+(P<<12&4294967295|P>>>20),P=D+(V^j&(A^V))+M[10]+4294925233&4294967295,D=j+(P<<17&4294967295|P>>>15),P=V+(A^D&(j^A))+M[11]+2304563134&4294967295,V=D+(P<<22&4294967295|P>>>10),P=A+(j^V&(D^j))+M[12]+1804603682&4294967295,A=V+(P<<7&4294967295|P>>>25),P=j+(D^A&(V^D))+M[13]+4254626195&4294967295,j=A+(P<<12&4294967295|P>>>20),P=D+(V^j&(A^V))+M[14]+2792965006&4294967295,D=j+(P<<17&4294967295|P>>>15),P=V+(A^D&(j^A))+M[15]+1236535329&4294967295,V=D+(P<<22&4294967295|P>>>10),P=A+(D^j&(V^D))+M[1]+4129170786&4294967295,A=V+(P<<5&4294967295|P>>>27),P=j+(V^D&(A^V))+M[6]+3225465664&4294967295,j=A+(P<<9&4294967295|P>>>23),P=D+(A^V&(j^A))+M[11]+643717713&4294967295,D=j+(P<<14&4294967295|P>>>18),P=V+(j^A&(D^j))+M[0]+3921069994&4294967295,V=D+(P<<20&4294967295|P>>>12),P=A+(D^j&(V^D))+M[5]+3593408605&4294967295,A=V+(P<<5&4294967295|P>>>27),P=j+(V^D&(A^V))+M[10]+38016083&4294967295,j=A+(P<<9&4294967295|P>>>23),P=D+(A^V&(j^A))+M[15]+3634488961&4294967295,D=j+(P<<14&4294967295|P>>>18),P=V+(j^A&(D^j))+M[4]+3889429448&4294967295,V=D+(P<<20&4294967295|P>>>12),P=A+(D^j&(V^D))+M[9]+568446438&4294967295,A=V+(P<<5&4294967295|P>>>27),P=j+(V^D&(A^V))+M[14]+3275163606&4294967295,j=A+(P<<9&4294967295|P>>>23),P=D+(A^V&(j^A))+M[3]+4107603335&4294967295,D=j+(P<<14&4294967295|P>>>18),P=V+(j^A&(D^j))+M[8]+1163531501&4294967295,V=D+(P<<20&4294967295|P>>>12),P=A+(D^j&(V^D))+M[13]+2850285829&4294967295,A=V+(P<<5&4294967295|P>>>27),P=j+(V^D&(A^V))+M[2]+4243563512&4294967295,j=A+(P<<9&4294967295|P>>>23),P=D+(A^V&(j^A))+M[7]+1735328473&4294967295,D=j+(P<<14&4294967295|P>>>18),P=V+(j^A&(D^j))+M[12]+2368359562&4294967295,V=D+(P<<20&4294967295|P>>>12),P=A+(V^D^j)+M[5]+4294588738&4294967295,A=V+(P<<4&4294967295|P>>>28),P=j+(A^V^D)+M[8]+2272392833&4294967295,j=A+(P<<11&4294967295|P>>>21),P=D+(j^A^V)+M[11]+1839030562&4294967295,D=j+(P<<16&4294967295|P>>>16),P=V+(D^j^A)+M[14]+4259657740&4294967295,V=D+(P<<23&4294967295|P>>>9),P=A+(V^D^j)+M[1]+2763975236&4294967295,A=V+(P<<4&4294967295|P>>>28),P=j+(A^V^D)+M[4]+1272893353&4294967295,j=A+(P<<11&4294967295|P>>>21),P=D+(j^A^V)+M[7]+4139469664&4294967295,D=j+(P<<16&4294967295|P>>>16),P=V+(D^j^A)+M[10]+3200236656&4294967295,V=D+(P<<23&4294967295|P>>>9),P=A+(V^D^j)+M[13]+681279174&4294967295,A=V+(P<<4&4294967295|P>>>28),P=j+(A^V^D)+M[0]+3936430074&4294967295,j=A+(P<<11&4294967295|P>>>21),P=D+(j^A^V)+M[3]+3572445317&4294967295,D=j+(P<<16&4294967295|P>>>16),P=V+(D^j^A)+M[6]+76029189&4294967295,V=D+(P<<23&4294967295|P>>>9),P=A+(V^D^j)+M[9]+3654602809&4294967295,A=V+(P<<4&4294967295|P>>>28),P=j+(A^V^D)+M[12]+3873151461&4294967295,j=A+(P<<11&4294967295|P>>>21),P=D+(j^A^V)+M[15]+530742520&4294967295,D=j+(P<<16&4294967295|P>>>16),P=V+(D^j^A)+M[2]+3299628645&4294967295,V=D+(P<<23&4294967295|P>>>9),P=A+(D^(V|~j))+M[0]+4096336452&4294967295,A=V+(P<<6&4294967295|P>>>26),P=j+(V^(A|~D))+M[7]+1126891415&4294967295,j=A+(P<<10&4294967295|P>>>22),P=D+(A^(j|~V))+M[14]+2878612391&4294967295,D=j+(P<<15&4294967295|P>>>17),P=V+(j^(D|~A))+M[5]+4237533241&4294967295,V=D+(P<<21&4294967295|P>>>11),P=A+(D^(V|~j))+M[12]+1700485571&4294967295,A=V+(P<<6&4294967295|P>>>26),P=j+(V^(A|~D))+M[3]+2399980690&4294967295,j=A+(P<<10&4294967295|P>>>22),P=D+(A^(j|~V))+M[10]+4293915773&4294967295,D=j+(P<<15&4294967295|P>>>17),P=V+(j^(D|~A))+M[1]+2240044497&4294967295,V=D+(P<<21&4294967295|P>>>11),P=A+(D^(V|~j))+M[8]+1873313359&4294967295,A=V+(P<<6&4294967295|P>>>26),P=j+(V^(A|~D))+M[15]+4264355552&4294967295,j=A+(P<<10&4294967295|P>>>22),P=D+(A^(j|~V))+M[6]+2734768916&4294967295,D=j+(P<<15&4294967295|P>>>17),P=V+(j^(D|~A))+M[13]+1309151649&4294967295,V=D+(P<<21&4294967295|P>>>11),P=A+(D^(V|~j))+M[4]+4149444226&4294967295,A=V+(P<<6&4294967295|P>>>26),P=j+(V^(A|~D))+M[11]+3174756917&4294967295,j=A+(P<<10&4294967295|P>>>22),P=D+(A^(j|~V))+M[2]+718787259&4294967295,D=j+(P<<15&4294967295|P>>>17),P=V+(j^(D|~A))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(D+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+j&4294967295}i.prototype.v=function(I,A){A===void 0&&(A=I.length);const V=A-this.blockSize,M=this.C;let D=this.h,j=0;for(;j<A;){if(D==0)for(;j<=V;)s(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<A;)if(M[D++]=I.charCodeAt(j++),D==this.blockSize){s(this,M),D=0;break}}else for(;j<A;)if(M[D++]=I[j++],D==this.blockSize){s(this,M),D=0;break}}this.h=D,this.o+=A},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var V=I.length-8;V<I.length;++V)I[V]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,V=0;V<4;++V)for(let M=0;M<32;M+=8)I[A++]=this.g[V]>>>M&255;return I};function o(I,A){var V=h;return Object.prototype.hasOwnProperty.call(V,I)?V[I]:V[I]=A(I)}function l(I,A){this.h=A;const V=[];let M=!0;for(let D=I.length-1;D>=0;D--){const j=I[D]|0;M&&j==A||(V[D]=j,M=!1)}this.g=V}var h={};function d(I){return-128<=I&&I<128?o(I,function(A){return new l([A|0],A<0?-1:0)}):new l([I|0],I<0?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return v;if(I<0)return k(f(-I));const A=[];let V=1;for(let M=0;I>=V;M++)A[M]=I/V|0,V*=4294967296;return new l(A,0)}function g(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return k(g(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=f(Math.pow(A,8));let M=v;for(let j=0;j<I.length;j+=8){var D=Math.min(8,I.length-j);const P=parseInt(I.substring(j,j+D),A);D<8?(D=f(Math.pow(A,D)),M=M.j(D).add(f(P))):(M=M.j(V),M=M.add(f(P)))}return M}var v=d(0),_=d(1),S=d(16777216);n=l.prototype,n.m=function(){if(N(this))return-k(this).m();let I=0,A=1;for(let V=0;V<this.g.length;V++){const M=this.i(V);I+=(M>=0?M:4294967296+M)*A,A*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(N(this))return"-"+k(this).toString(I);const A=f(Math.pow(I,6));var V=this;let M="";for(;;){const D=Z(V,A).g;V=U(V,D.j(A));let j=((V.g.length>0?V.g[0]:V.h)>>>0).toString(I);if(V=D,C(V))return j+M;for(;j.length<6;)j="0"+j;M=j+M}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function N(I){return I.h==-1}n.l=function(I){return I=U(this,I),N(I)?-1:C(I)?0:1};function k(I){const A=I.g.length,V=[];for(let M=0;M<A;M++)V[M]=~I.g[M];return new l(V,~I.h).add(_)}n.abs=function(){return N(this)?k(this):this},n.add=function(I){const A=Math.max(this.g.length,I.g.length),V=[];let M=0;for(let D=0;D<=A;D++){let j=M+(this.i(D)&65535)+(I.i(D)&65535),P=(j>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);M=P>>>16,j&=65535,P&=65535,V[D]=P<<16|j}return new l(V,V[V.length-1]&-2147483648?-1:0)};function U(I,A){return I.add(k(A))}n.j=function(I){if(C(this)||C(I))return v;if(N(this))return N(I)?k(this).j(k(I)):k(k(this).j(I));if(N(I))return k(this.j(k(I)));if(this.l(S)<0&&I.l(S)<0)return f(this.m()*I.m());const A=this.g.length+I.g.length,V=[];for(var M=0;M<2*A;M++)V[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<I.g.length;D++){const j=this.i(M)>>>16,P=this.i(M)&65535,Ce=I.i(D)>>>16,de=I.i(D)&65535;V[2*M+2*D]+=P*de,q(V,2*M+2*D),V[2*M+2*D+1]+=j*de,q(V,2*M+2*D+1),V[2*M+2*D+1]+=P*Ce,q(V,2*M+2*D+1),V[2*M+2*D+2]+=j*Ce,q(V,2*M+2*D+2)}for(I=0;I<A;I++)V[I]=V[2*I+1]<<16|V[2*I];for(I=A;I<2*A;I++)V[I]=0;return new l(V,0)};function q(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function O(I,A){this.g=I,this.h=A}function Z(I,A){if(C(A))throw Error("division by zero");if(C(I))return new O(v,v);if(N(I))return A=Z(k(I),A),new O(k(A.g),k(A.h));if(N(A))return A=Z(I,k(A)),new O(k(A.g),A.h);if(I.g.length>30){if(N(I)||N(A))throw Error("slowDivide_ only works with positive integers.");for(var V=_,M=A;M.l(I)<=0;)V=te(V),M=te(M);var D=H(V,1),j=H(M,1);for(M=H(M,2),V=H(V,2);!C(M);){var P=j.add(M);P.l(I)<=0&&(D=D.add(V),j=P),M=H(M,1),V=H(V,1)}return A=U(I,D.j(A)),new O(D,A)}for(D=v;I.l(A)>=0;){for(V=Math.max(1,Math.floor(I.m()/A.m())),M=Math.ceil(Math.log(V)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),j=f(V),P=j.j(A);N(P)||P.l(I)>0;)V-=M,j=f(V),P=j.j(A);C(j)&&(j=_),D=D.add(j),I=U(I,P)}return new O(D,I)}n.B=function(I){return Z(this,I).h},n.and=function(I){const A=Math.max(this.g.length,I.g.length),V=[];for(let M=0;M<A;M++)V[M]=this.i(M)&I.i(M);return new l(V,this.h&I.h)},n.or=function(I){const A=Math.max(this.g.length,I.g.length),V=[];for(let M=0;M<A;M++)V[M]=this.i(M)|I.i(M);return new l(V,this.h|I.h)},n.xor=function(I){const A=Math.max(this.g.length,I.g.length),V=[];for(let M=0;M<A;M++)V[M]=this.i(M)^I.i(M);return new l(V,this.h^I.h)};function te(I){const A=I.g.length+1,V=[];for(let M=0;M<A;M++)V[M]=I.i(M)<<1|I.i(M-1)>>>31;return new l(V,I.h)}function H(I,A){const V=A>>5;A%=32;const M=I.g.length-V,D=[];for(let j=0;j<M;j++)D[j]=A>0?I.i(j+V)>>>A|I.i(j+V+1)<<32-A:I.i(j+V);return new l(D,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,KI=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,oa=l}).apply(typeof Ww<"u"?Ww:typeof self<"u"?self:typeof window<"u"?window:{});var Uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var QI,Qc,YI,nm,Q0,XI,WI,ZI;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uf=="object"&&Uf];for(var b=0;b<m.length;++b){var E=m[b];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function s(m,b){if(b)e:{var E=i;m=m.split(".");for(var R=0;R<m.length-1;R++){var Q=m[R];if(!(Q in E))break e;E=E[Q]}m=m[m.length-1],R=E[m],b=b(R),b!=R&&b!=null&&e(E,m,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(b){var E=[],R;for(R in b)Object.prototype.hasOwnProperty.call(b,R)&&E.push([R,b[R]]);return E}});var o=o||{},l=this||self;function h(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function d(m,b,E){return m.call.apply(m.bind,arguments)}function f(m,b,E){return f=d,f.apply(null,arguments)}function g(m,b){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function v(m,b){function E(){}E.prototype=b.prototype,m.Z=b.prototype,m.prototype=new E,m.prototype.constructor=m,m.Ob=function(R,Q,J){for(var fe=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)fe[Oe-2]=arguments[Oe];return b.prototype[Q].apply(R,fe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function S(m){const b=m.length;if(b>0){const E=Array(b);for(let R=0;R<b;R++)E[R]=m[R];return E}return[]}function C(m,b){for(let R=1;R<arguments.length;R++){const Q=arguments[R];var E=typeof Q;if(E=E!="object"?E:Q?Array.isArray(Q)?"array":E:"null",E=="array"||E=="object"&&typeof Q.length=="number"){E=m.length||0;const J=Q.length||0;m.length=E+J;for(let fe=0;fe<J;fe++)m[E+fe]=Q[fe]}else m.push(Q)}}class N{constructor(b,E){this.i=b,this.j=E,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function k(m){l.setTimeout(()=>{throw m},0)}function U(){var m=I;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class q{constructor(){this.h=this.g=null}add(b,E){const R=O.get();R.set(b,E),this.h?this.h.next=R:this.g=R,this.h=R}}var O=new N(()=>new Z,m=>m.reset());class Z{constructor(){this.next=this.g=this.h=null}set(b,E){this.h=b,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let te,H=!1,I=new q,A=()=>{const m=Promise.resolve(void 0);te=()=>{m.then(V)}};function V(){for(var m;m=U();){try{m.h.call(m.g)}catch(E){k(E)}var b=O;b.j(m),b.h<100&&(b.h++,m.next=b.g,b.g=m)}H=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const E=()=>{};l.addEventListener("test",E,b),l.removeEventListener("test",E,b)}catch{}return m})();function P(m){return/^[\s\xa0]*$/.test(m)}function Ce(m,b){D.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,b)}v(Ce,D),Ce.prototype.init=function(m,b){const E=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget,b||(E=="mouseover"?b=m.fromElement:E=="mouseout"&&(b=m.toElement)),this.relatedTarget=b,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),G=0;function re(m,b,E,R,Q){this.listener=m,this.proxy=null,this.src=b,this.type=E,this.capture=!!R,this.ha=Q,this.key=++G,this.da=this.fa=!1}function ce(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function xe(m,b,E){for(const R in m)b.call(E,m[R],R,m)}function De(m,b){for(const E in m)b.call(void 0,m[E],E,m)}function B(m){const b={};for(const E in m)b[E]=m[E];return b}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(m,b){let E,R;for(let Q=1;Q<arguments.length;Q++){R=arguments[Q];for(E in R)m[E]=R[E];for(let J=0;J<se.length;J++)E=se[J],Object.prototype.hasOwnProperty.call(R,E)&&(m[E]=R[E])}}function ge(m){this.src=m,this.g={},this.h=0}ge.prototype.add=function(m,b,E,R,Q){const J=m.toString();m=this.g[J],m||(m=this.g[J]=[],this.h++);const fe=je(m,b,R,Q);return fe>-1?(b=m[fe],E||(b.fa=!1)):(b=new re(b,this.src,J,!!R,Q),b.fa=E,m.push(b)),b};function ke(m,b){const E=b.type;if(E in m.g){var R=m.g[E],Q=Array.prototype.indexOf.call(R,b,void 0),J;(J=Q>=0)&&Array.prototype.splice.call(R,Q,1),J&&(ce(b),m.g[E].length==0&&(delete m.g[E],m.h--))}}function je(m,b,E,R){for(let Q=0;Q<m.length;++Q){const J=m[Q];if(!J.da&&J.listener==b&&J.capture==!!E&&J.ha==R)return Q}return-1}var Ye="closure_lm_"+(Math.random()*1e6|0),Wt={};function vt(m,b,E,R,Q){if(Array.isArray(b)){for(let J=0;J<b.length;J++)vt(m,b[J],E,R,Q);return null}return E=Lu(E),m&&m[de]?m.J(b,E,h(R)?!!R.capture:!1,Q):xa(m,b,E,!1,R,Q)}function xa(m,b,E,R,Q,J){if(!b)throw Error("Invalid event type");const fe=h(Q)?!!Q.capture:!!Q;let Oe=Aa(m);if(Oe||(m[Ye]=Oe=new ge(m)),E=Oe.add(b,E,R,fe,J),E.proxy)return E;if(R=Uo(),E.proxy=R,R.src=m,R.listener=E,m.addEventListener)j||(Q=fe),Q===void 0&&(Q=!1),m.addEventListener(b.toString(),R,Q);else if(m.attachEvent)m.attachEvent(Bi(b.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Uo(){function m(E){return b.call(m.src,m.listener,E)}const b=Pu;return m}function Bo(m,b,E,R,Q){if(Array.isArray(b))for(var J=0;J<b.length;J++)Bo(m,b[J],E,R,Q);else R=h(R)?!!R.capture:!!R,E=Lu(E),m&&m[de]?(m=m.i,J=String(b).toString(),J in m.g&&(b=m.g[J],E=je(b,E,R,Q),E>-1&&(ce(b[E]),Array.prototype.splice.call(b,E,1),b.length==0&&(delete m.g[J],m.h--)))):m&&(m=Aa(m))&&(b=m.g[b.toString()],m=-1,b&&(m=je(b,E,R,Q)),(E=m>-1?b[m]:null)&&Fo(E))}function Fo(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[de])ke(b.i,m);else{var E=m.type,R=m.proxy;b.removeEventListener?b.removeEventListener(E,R,m.capture):b.detachEvent?b.detachEvent(Bi(E),R):b.addListener&&b.removeListener&&b.removeListener(R),(E=Aa(b))?(ke(E,m),E.h==0&&(E.src=null,b[Ye]=null)):ce(m)}}}function Bi(m){return m in Wt?Wt[m]:Wt[m]="on"+m}function Pu(m,b){if(m.da)m=!0;else{b=new Ce(b,this);const E=m.listener,R=m.ha||m.src;m.fa&&Fo(m),m=E.call(R,b)}return m}function Aa(m){return m=m[Ye],m instanceof ge?m:null}var Ou="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lu(m){return typeof m=="function"?m:(m[Ou]||(m[Ou]=function(b){return m.handleEvent(b)}),m[Ou])}function zt(){M.call(this),this.i=new ge(this),this.M=this,this.G=null}v(zt,M),zt.prototype[de]=!0,zt.prototype.removeEventListener=function(m,b,E,R){Bo(this,m,b,E,R)};function Zt(m,b){var E,R=m.G;if(R)for(E=[];R;R=R.G)E.push(R);if(m=m.M,R=b.type||b,typeof b=="string")b=new D(b,m);else if(b instanceof D)b.target=b.target||m;else{var Q=b;b=new D(R,m),pe(b,Q)}Q=!0;let J,fe;if(E)for(fe=E.length-1;fe>=0;fe--)J=b.g=E[fe],Q=hs(J,R,!0,b)&&Q;if(J=b.g=m,Q=hs(J,R,!0,b)&&Q,Q=hs(J,R,!1,b)&&Q,E)for(fe=0;fe<E.length;fe++)J=b.g=E[fe],Q=hs(J,R,!1,b)&&Q}zt.prototype.N=function(){if(zt.Z.N.call(this),this.i){var m=this.i;for(const b in m.g){const E=m.g[b];for(let R=0;R<E.length;R++)ce(E[R]);delete m.g[b],m.h--}}this.G=null},zt.prototype.J=function(m,b,E,R){return this.i.add(String(m),b,!1,E,R)},zt.prototype.K=function(m,b,E,R){return this.i.add(String(m),b,!0,E,R)};function hs(m,b,E,R){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();let Q=!0;for(let J=0;J<b.length;++J){const fe=b[J];if(fe&&!fe.da&&fe.capture==E){const Oe=fe.listener,kt=fe.ha||fe.src;fe.fa&&ke(m.i,fe),Q=Oe.call(kt,R)!==!1&&Q}}return Q&&!R.defaultPrevented}function Yp(m,b){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:l.setTimeout(m,b||0)}function ld(m){m.g=Yp(()=>{m.g=null,m.i&&(m.i=!1,ld(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class In extends M{constructor(b,E){super(),this.m=b,this.l=E,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:ld(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ia(m){M.call(this),this.h=m,this.g={}}v(Ia,M);var ju=[];function zu(m){xe(m.g,function(b,E){this.g.hasOwnProperty(E)&&Fo(b)},m),m.g={}}Ia.prototype.N=function(){Ia.Z.N.call(this),zu(this)},Ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ds=l.JSON.stringify,Xp=l.JSON.parse,ud=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function cd(){}function hd(){}var wi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ln(){D.call(this,"d")}v(ln,D);function ii(){D.call(this,"c")}v(ii,D);var Nt={},dd=null;function qo(){return dd=dd||new zt}Nt.Ia="serverreachability";function fd(m){D.call(this,Nt.Ia,m)}v(fd,D);function Fi(m){const b=qo();Zt(b,new fd(b))}Nt.STAT_EVENT="statevent";function Ra(m,b){D.call(this,Nt.STAT_EVENT,m),this.stat=b}v(Ra,D);function Ut(m){const b=qo();Zt(b,new Ra(b,m))}Nt.Ja="timingevent";function qi(m,b){D.call(this,Nt.Ja,m),this.size=b}v(qi,D);function Hi(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},b)}function Si(){this.g=!0}Si.prototype.ua=function(){this.g=!1};function Wp(m,b,E,R,Q,J){m.info(function(){if(m.g)if(J){var fe="",Oe=J.split("&");for(let et=0;et<Oe.length;et++){var kt=Oe[et].split("=");if(kt.length>1){const _t=kt[0];kt=kt[1];const oi=_t.split("_");fe=oi.length>=2&&oi[1]=="type"?fe+(_t+"="+kt+"&"):fe+(_t+"=redacted&")}}}else fe=null;else fe=J;return"XMLHTTP REQ ("+R+") [attempt "+Q+"]: "+b+`
`+E+`
`+fe})}function md(m,b,E,R,Q,J,fe){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Q+"]: "+b+`
`+E+`
`+J+" "+fe})}function Gi(m,b,E,R){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Zp(m,E)+(R?" "+R:"")})}function Ca(m,b){m.info(function(){return"TIMEOUT: "+b})}Si.prototype.info=function(){};function Zp(m,b){if(!m.g)return b;if(!b)return null;try{const J=JSON.parse(b);if(J){for(m=0;m<J.length;m++)if(Array.isArray(J[m])){var E=J[m];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var Q=R[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let fe=1;fe<R.length;fe++)R[fe]=""}}}}return ds(J)}catch{return b}}var Da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Uu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bu;function Na(){}v(Na,cd),Na.prototype.g=function(){return new XMLHttpRequest},Bu=new Na;function xr(m){return encodeURIComponent(String(m))}function pd(m){var b=1;m=m.split(":");const E=[];for(;b>0&&m.length;)E.push(m.shift()),b--;return m.length&&E.push(m.join(":")),E}function xi(m,b,E,R){this.j=m,this.i=b,this.l=E,this.S=R||1,this.V=new Ia(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ai}function Ai(){this.i=null,this.g="",this.h=!1}var Bt={},rn={};function $i(m,b,E){m.M=1,m.A=ka(qt(b)),m.u=E,m.R=!0,Ho(m,null)}function Ho(m,b){m.F=Date.now(),Ki(m),m.B=qt(m.A);var E=m.B,R=m.S;Array.isArray(R)||(R=[String(R)]),Qo(E.i,"t",R),m.C=0,E=m.j.L,m.h=new Ai,m.g=Dd(m.j,E?b:null,!m.u),m.P>0&&(m.O=new In(f(m.Y,m,m.g),m.P)),b=m.V,E=m.g,R=m.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(ju[0]=Q.toString()),Q=ju);for(let J=0;J<Q.length;J++){const fe=vt(E,Q[J],R||b.handleEvent,!1,b.h||b);if(!fe)break;b.g[fe.key]=fe}b=m.J?B(m.J):{},m.u?(m.v||(m.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,b)):(m.v="GET",m.g.ea(m.B,m.v,null,b)),Fi(),Wp(m.i,m.v,m.B,m.l,m.S,m.u)}xi.prototype.ba=function(m){m=m.target;const b=this.O;b&&Ci(m)==3?b.j():this.Y(m)},xi.prototype.Y=function(m){try{if(m==this.g)e:{const Oe=Ci(this.g),kt=this.g.ya(),et=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||Oe!=4||kt==7||(kt==8||et<=0?Fi(3):Fi(2)),Qi(this);var b=this.g.ca();this.X=b;var E=Jp(this);if(this.o=b==200,md(this.i,this.v,this.B,this.l,this.S,Oe,b),this.o){if(this.U&&!this.L){t:{if(this.g){var R,Q=this.g;if((R=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(R)){var J=R;break t}}J=null}if(m=J)Gi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yi(this,m);else{this.o=!1,this.m=3,Ut(12),Hn(this),ri(this);break e}}if(this.R){m=!0;let _t;for(;!this.K&&this.C<E.length;)if(_t=yd(this,E),_t==rn){Oe==4&&(this.m=4,Ut(14),m=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Bt){this.m=4,Ut(15),Gi(this.i,this.l,E,"[Invalid Chunk]"),m=!1;break}else Gi(this.i,this.l,_t,null),Yi(this,_t);if(gd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||E.length!=0||this.h.h||(this.m=1,Ut(16),m=!1),this.o=this.o&&m,!m)Gi(this.i,this.l,E,"[Invalid Chunked Response]"),Hn(this),ri(this);else if(E.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),nc(fe),fe.P=!0,Ut(11))}}else Gi(this.i,this.l,E,null),Yi(this,E);Oe==4&&Hn(this),this.o&&!this.K&&(Oe==4?Ad(this.j,this):(this.o=!1,Ki(this)))}else Ir(this.g),b==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),Hn(this),ri(this)}}}catch{}finally{}};function Jp(m){if(!gd(m))return m.g.la();const b=un(m.g);if(b==="")return"";let E="";const R=b.length,Q=Ci(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Hn(m),ri(m),"";m.h.i=new l.TextDecoder}for(let J=0;J<R;J++)m.h.h=!0,E+=m.h.i.decode(b[J],{stream:!(Q&&J==R-1)});return b.length=0,m.h.g+=E,m.C=0,m.h.g}function gd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function yd(m,b){var E=m.C,R=b.indexOf(`
`,E);return R==-1?rn:(E=Number(b.substring(E,R)),isNaN(E)?Bt:(R+=1,R+E>b.length?rn:(b=b.slice(R,R+E),m.C=R+E,b)))}xi.prototype.cancel=function(){this.K=!0,Hn(this)};function Ki(m){m.T=Date.now()+m.H,Go(m,m.H)}function Go(m,b){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Hi(f(m.aa,m),b)}function Qi(m){m.D&&(l.clearTimeout(m.D),m.D=null)}xi.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Ca(this.i,this.B),this.M!=2&&(Fi(),Ut(17)),Hn(this),this.m=2,ri(this)):Go(this,this.T-m)};function ri(m){m.j.I==0||m.K||Ad(m.j,m)}function Hn(m){Qi(m);var b=m.O;b&&typeof b.dispose=="function"&&b.dispose(),m.O=null,zu(m.V),m.g&&(b=m.g,m.g=null,b.abort(),b.dispose())}function Yi(m,b){try{var E=m.j;if(E.I!=0&&(E.g==m||Wi(E.h,m))){if(!m.L&&Wi(E.h,m)&&E.I==3){try{var R=E.Ba.g.parse(b)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Q=R;if(Q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<m.F)Jo(E),bs(E);else break e;za(E),Ut(18)}}else E.xa=Q[1],0<E.xa-E.K&&Q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Hi(f(E.Va,E),6e3));Xi(E.h)<=1&&E.ta&&(E.ta=void 0)}else ir(E,11)}else if((m.L||E.g==m)&&Jo(E),!P(b))for(Q=E.Ba.g.parse(b),b=0;b<Q.length;b++){let et=Q[b];const _t=et[0];if(!(_t<=E.K))if(E.K=_t,et=et[1],E.I==2)if(et[0]=="c"){E.M=et[1],E.ba=et[2];const oi=et[3];oi!=null&&(E.ka=oi,E.j.info("VER="+E.ka));const rr=et[4];rr!=null&&(E.za=rr,E.j.info("SVER="+E.za));const Di=et[5];Di!=null&&typeof Di=="number"&&Di>0&&(R=1.5*Di,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Ni=m.g;if(Ni){const Ua=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var J=R.h;J.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Hu(J,J.h),J.h=null))}if(R.G){const el=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;el&&(R.wa=el,it(R.J,R.G,el))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-m.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var fe=m;if(R.na=Cd(R,R.L?R.ba:null,R.W),fe.L){Gu(R.h,fe);var Oe=fe,kt=R.O;kt&&(Oe.H=kt),Oe.D&&(Qi(Oe),Ki(Oe)),R.g=fe}else Sd(R);E.i.length>0&&nr(E)}else et[0]!="stop"&&et[0]!="close"||ir(E,7);else E.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?ir(E,7):ec(E):et[0]!="noop"&&E.l&&E.l.qa(et),E.A=0)}}Fi(4)}catch{}}var Ft=class{constructor(m,b){this.g=m,this.map=b}};function Fu(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qu(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Xi(m){return m.h?1:m.g?m.g.size:0}function Wi(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function Hu(m,b){m.g?m.g.add(b):m.h=b}function Gu(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Fu.prototype.cancel=function(){if(this.i=$u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function $u(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const E of m.g.values())b=b.concat(E.G);return b}return S(m.i)}var vd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $o(m,b){if(m){m=m.split("&");for(let E=0;E<m.length;E++){const R=m[E].indexOf("=");let Q,J=null;R>=0?(Q=m[E].substring(0,R),J=m[E].substring(R+1)):Q=m[E],b(Q,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Gn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;m instanceof Gn?(this.l=m.l,sn(this,m.j),this.o=m.o,this.g=m.g,fs(this,m.u),this.h=m.h,Ku(this,Ed(m.i)),this.m=m.m):m&&(b=String(m).match(vd))?(this.l=!1,sn(this,b[1]||"",!0),this.o=Zi(b[2]||""),this.g=Zi(b[3]||"",!0),fs(this,b[4]),this.h=Zi(b[5]||"",!0),Ku(this,b[6]||"",!0),this.m=Zi(b[7]||"")):(this.l=!1,this.i=new ps(null,this.l))}Gn.prototype.toString=function(){const m=[];var b=this.j;b&&m.push(Va(b,Ko,!0),":");var E=this.g;return(E||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Va(b,Ko,!0),"@"),m.push(xr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&m.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&m.push("/"),m.push(Va(E,E.charAt(0)=="/"?Qu:_d,!0))),(E=this.i.toString())&&m.push("?",E),(E=this.m)&&m.push("#",Va(E,bd)),m.join("")},Gn.prototype.resolve=function(m){const b=qt(this);let E=!!m.j;E?sn(b,m.j):E=!!m.o,E?b.o=m.o:E=!!m.g,E?b.g=m.g:E=m.u!=null;var R=m.h;if(E)fs(b,m.u);else if(E=!!m.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var Q=b.h.lastIndexOf("/");Q!=-1&&(R=b.h.slice(0,Q+1)+R)}if(Q=R,Q==".."||Q==".")R="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){R=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const J=[];for(let fe=0;fe<Q.length;){const Oe=Q[fe++];Oe=="."?R&&fe==Q.length&&J.push(""):Oe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),R&&fe==Q.length&&J.push("")):(J.push(Oe),R=!0)}R=J.join("/")}else R=Q}return E?b.h=R:E=m.i.toString()!=="",E?Ku(b,Ed(m.i)):E=!!m.m,E&&(b.m=m.m),b};function qt(m){return new Gn(m)}function sn(m,b,E){m.j=E?Zi(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function fs(m,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);m.u=b}else m.u=null}function Ku(m,b,E){b instanceof ps?(m.i=b,Yo(m.i,m.l)):(E||(b=Va(b,ms)),m.i=new ps(b,m.l))}function it(m,b,E){m.i.set(b,E)}function ka(m){return it(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Zi(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Va(m,b,E){return typeof m=="string"?(m=encodeURI(m).replace(b,Vn),E&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Vn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ko=/[#\/\?@]/g,_d=/[#\?:]/g,Qu=/[#\?]/g,ms=/[#\?@]/g,bd=/#/g;function ps(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function Mn(m){m.g||(m.g=new Map,m.h=0,m.i&&$o(m.i,function(b,E){m.add(decodeURIComponent(b.replace(/\+/g," ")),E)}))}n=ps.prototype,n.add=function(m,b){Mn(this),this.i=null,m=gs(this,m);let E=this.g.get(m);return E||this.g.set(m,E=[]),E.push(b),this.h+=1,this};function Td(m,b){Mn(m),b=gs(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Yu(m,b){return Mn(m),b=gs(m,b),m.g.has(b)}n.forEach=function(m,b){Mn(this),this.g.forEach(function(E,R){E.forEach(function(Q){m.call(b,Q,R,this)},this)},this)};function Xu(m,b){Mn(m);let E=[];if(typeof b=="string")Yu(m,b)&&(E=E.concat(m.g.get(gs(m,b))));else for(m=Array.from(m.g.values()),b=0;b<m.length;b++)E=E.concat(m[b]);return E}n.set=function(m,b){return Mn(this),this.i=null,m=gs(this,m),Yu(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=Xu(this,m),m.length>0?String(m[0]):b):b};function Qo(m,b,E){Td(m,b),E.length>0&&(m.i=null,m.g.set(gs(m,b),S(E)),m.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(let R=0;R<b.length;R++){var E=b[R];const Q=xr(E);E=Xu(this,E);for(let J=0;J<E.length;J++){let fe=Q;E[J]!==""&&(fe+="="+xr(E[J])),m.push(fe)}}return this.i=m.join("&")};function Ed(m){const b=new ps;return b.i=m.i,m.g&&(b.g=new Map(m.g),b.h=m.h),b}function gs(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function Yo(m,b){b&&!m.j&&(Mn(m),m.i=null,m.g.forEach(function(E,R){const Q=R.toLowerCase();R!=Q&&(Td(this,R),Qo(this,Q,E))},m)),m.j=b}function Ii(m,b){const E=new Si;if(l.Image){const R=new Image;R.onload=g(si,E,"TestLoadImage: loaded",!0,b,R),R.onerror=g(si,E,"TestLoadImage: error",!1,b,R),R.onabort=g(si,E,"TestLoadImage: abort",!1,b,R),R.ontimeout=g(si,E,"TestLoadImage: timeout",!1,b,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else b(!1)}function Wu(m,b){const E=new Si,R=new AbortController,Q=setTimeout(()=>{R.abort(),si(E,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:R.signal}).then(J=>{clearTimeout(Q),J.ok?si(E,"TestPingServer: ok",!0,b):si(E,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Q),si(E,"TestPingServer: error",!1,b)})}function si(m,b,E,R,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),R(E)}catch{}}function ys(){this.g=new ud}function Ji(m){this.i=m.Sb||null,this.h=m.ab||!1}v(Ji,cd),Ji.prototype.g=function(){return new Ma(this.i,this.h)};function Ma(m,b){zt.call(this),this.H=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ma,zt),n=Ma.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=b,this.readyState=1,Ri(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(b.body=m),(this.H||l).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xo(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xo(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?vs(this):Ri(this),this.readyState==3&&Xo(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,vs(this))},n.Na=function(m){this.g&&(this.response=m,vs(this))},n.ga=function(){this.g&&vs(this)};function vs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ri(m)}n.setRequestHeader=function(m,b){this.A.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var E=b.next();!E.done;)E=E.value,m.push(E[0]+": "+E[1]),E=b.next();return m.join(`\r
`)};function Ri(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ai(m){let b="";return xe(m,function(E,R){b+=R,b+=":",b+=E,b+=`\r
`}),b}function Pa(m,b,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=ai(E),typeof m=="string"?E!=null&&xr(E):it(m,b,E))}function lt(m){zt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(lt,zt);var er=/^https?$/i,Zu=["POST","PUT"];n=lt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,b,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bu.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(J){Oa(this,J);return}if(m=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Q in R)E.set(Q,R[Q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())E.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),Q=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(Zu,b,void 0)>=0)||R||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,fe]of E)this.g.setRequestHeader(J,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(J){Oa(this,J)}};function Oa(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.o=5,Ju(m),Ar(m)}function Ju(m){m.A||(m.A=!0,Zt(m,"complete"),Zt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Zt(this,"complete"),Zt(this,"abort"),Ar(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ar(this,!0)),lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?La(this):this.Xa())},n.Xa=function(){La(this)};function La(m){if(m.h&&typeof o<"u"){if(m.v&&Ci(m)==4)setTimeout(m.Ca.bind(m),0);else if(Zt(m,"readystatechange"),Ci(m)==4){m.h=!1;try{const J=m.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var E;if(!(E=b)){var R;if(R=J===0){let fe=String(m.D).match(vd)[1]||null;!fe&&l.self&&l.self.location&&(fe=l.self.location.protocol.slice(0,-1)),R=!er.test(fe?fe.toLowerCase():"")}E=R}if(E)Zt(m,"complete"),Zt(m,"success");else{m.o=6;try{var Q=Ci(m)>2?m.g.statusText:""}catch{Q=""}m.l=Q+" ["+m.ca()+"]",Ju(m)}}finally{Ar(m)}}}}function Ar(m,b){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const E=m.g;m.g=null,b||Zt(m,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ci(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Ci(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),Xp(b)}};function un(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ir(m){const b={};m=(m.g&&Ci(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(P(m[R]))continue;var E=pd(m[R]);const Q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=b[Q]||[];b[Q]=J,J.push(E)}De(b,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(m,b,E){return E&&E.internalChannelParams&&E.internalChannelParams[m]||b}function _s(m){this.za=0,this.i=[],this.j=new Si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tr("baseRetryDelayMs",5e3,m),this.Za=tr("retryDelaySeedMs",1e4,m),this.Ta=tr("forwardChannelMaxRetries",2,m),this.va=tr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Fu(m&&m.concurrentRequestLimit),this.Ba=new ys,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_s.prototype,n.ka=8,n.I=1,n.connect=function(m,b,E,R){Ut(0),this.W=m,this.H=b||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=Cd(this,null,this.W),nr(this)};function ec(m){if(Wo(m),m.I==3){var b=m.V++,E=qt(m.J);if(it(E,"SID",m.M),it(E,"RID",b),it(E,"TYPE","terminate"),ja(m,E),b=new xi(m,m.j,b),b.M=2,b.A=ka(qt(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(b.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=b.A,E=!0),E||(b.g=Dd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ki(b)}Rd(m)}function bs(m){m.g&&(nc(m),m.g.cancel(),m.g=null)}function Wo(m){bs(m),m.v&&(l.clearTimeout(m.v),m.v=null),Jo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function nr(m){if(!qu(m.h)&&!m.m){m.m=!0;var b=m.Ea;te||A(),H||(te(),H=!0),I.add(b,m),m.D=0}}function Zo(m,b){return Xi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=b.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Hi(f(m.Ea,m,b),Id(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Q=new xi(this,this.j,m);let J=this.o;if(this.U&&(J?(J=B(J),pe(J,this.U)):J=this.U),this.u!==null||this.R||(Q.J=J,J=null),this.S)e:{for(var b=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(b+=R,b>4096){b=E;break e}if(b===4096||E===this.i.length-1){b=E+1;break e}}b=1e3}else b=1e3;b=wd(this,Q,b),E=qt(this.J),it(E,"RID",m),it(E,"CVER",22),this.G&&it(E,"X-HTTP-Session-Id",this.G),ja(this,E),J&&(this.R?b="headers="+xr(ai(J))+"&"+b:this.u&&Pa(E,this.u,J)),Hu(this.h,Q),this.Ra&&it(E,"TYPE","init"),this.S?(it(E,"$req",b),it(E,"SID","null"),Q.U=!0,$i(Q,E,null)):$i(Q,E,b),this.I=2}}else this.I==3&&(m?tc(this,m):this.i.length==0||qu(this.h)||tc(this))};function tc(m,b){var E;b?E=b.l:E=m.V++;const R=qt(m.J);it(R,"SID",m.M),it(R,"RID",E),it(R,"AID",m.K),ja(m,R),m.u&&m.o&&Pa(R,m.u,m.o),E=new xi(m,m.j,E,m.D+1),m.u===null&&(E.J=m.o),b&&(m.i=b.G.concat(m.i)),b=wd(m,E,1e3),E.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Hu(m.h,E),$i(E,R,b)}function ja(m,b){m.H&&xe(m.H,function(E,R){it(b,R,E)}),m.l&&xe({},function(E,R){it(b,R,E)})}function wd(m,b,E){E=Math.min(m.i.length,E);const R=m.l?f(m.l.Ka,m.l,m):null;e:{var Q=m.i;let Oe=-1;for(;;){const kt=["count="+E];Oe==-1?E>0?(Oe=Q[0].g,kt.push("ofs="+Oe)):Oe=0:kt.push("ofs="+Oe);let et=!0;for(let _t=0;_t<E;_t++){var J=Q[_t].g;const oi=Q[_t].map;if(J-=Oe,J<0)Oe=Math.max(0,Q[_t].g-100),et=!1;else try{J="req"+J+"_"||"";try{var fe=oi instanceof Map?oi:Object.entries(oi);for(const[rr,Di]of fe){let Ni=Di;h(Di)&&(Ni=ds(Di)),kt.push(J+rr+"="+encodeURIComponent(Ni))}}catch(rr){throw kt.push(J+"type="+encodeURIComponent("_badmap")),rr}}catch{R&&R(oi)}}if(et){fe=kt.join("&");break e}}fe=void 0}return m=m.i.splice(0,E),b.G=m,fe}function Sd(m){if(!m.g&&!m.v){m.Y=1;var b=m.Da;te||A(),H||(te(),H=!0),I.add(b,m),m.A=0}}function za(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Hi(f(m.Da,m),Id(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,xd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Hi(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),bs(this),xd(this))};function nc(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function xd(m){m.g=new xi(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var b=qt(m.na);it(b,"RID","rpc"),it(b,"SID",m.M),it(b,"AID",m.K),it(b,"CI",m.F?"0":"1"),!m.F&&m.ia&&it(b,"TO",m.ia),it(b,"TYPE","xmlhttp"),ja(m,b),m.u&&m.o&&Pa(b,m.u,m.o),m.O&&(m.g.H=m.O);var E=m.g;m=m.ba,E.M=1,E.A=ka(qt(b)),E.u=null,E.R=!0,Ho(E,m)}n.Va=function(){this.C!=null&&(this.C=null,bs(this),za(this),Ut(19))};function Jo(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function Ad(m,b){var E=null;if(m.g==b){Jo(m),nc(m),m.g=null;var R=2}else if(Wi(m.h,b))E=b.G,Gu(m.h,b),R=1;else return;if(m.I!=0){if(b.o)if(R==1){E=b.u?b.u.length:0,b=Date.now()-b.F;var Q=m.D;R=qo(),Zt(R,new qi(R,E)),nr(m)}else Sd(m);else if(Q=b.m,Q==3||Q==0&&b.X>0||!(R==1&&Zo(m,b)||R==2&&za(m)))switch(E&&E.length>0&&(b=m.h,b.i=b.i.concat(E)),Q){case 1:ir(m,5);break;case 4:ir(m,10);break;case 3:ir(m,6);break;default:ir(m,2)}}}function Id(m,b){let E=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(E*=2),E*b}function ir(m,b){if(m.j.info("Error code "+b),b==2){var E=f(m.bb,m),R=m.Ua;const Q=!R;R=new Gn(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||sn(R,"https"),ka(R),Q?Ii(R.toString(),E):Wu(R.toString(),E)}else Ut(2);m.I=0,m.l&&m.l.pa(b),Rd(m),Wo(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Rd(m){if(m.I=0,m.ja=[],m.l){const b=$u(m.h);(b.length!=0||m.i.length!=0)&&(C(m.ja,b),C(m.ja,m.i),m.h.i.length=0,S(m.i),m.i.length=0),m.l.oa()}}function Cd(m,b,E){var R=E instanceof Gn?qt(E):new Gn(E);if(R.g!="")b&&(R.g=b+"."+R.g),fs(R,R.u);else{var Q=l.location;R=Q.protocol,b=b?b+"."+Q.hostname:Q.hostname,Q=+Q.port;const J=new Gn(null);R&&sn(J,R),b&&(J.g=b),Q&&fs(J,Q),E&&(J.h=E),R=J}return E=m.G,b=m.wa,E&&b&&it(R,E,b),it(R,"VER",m.ka),ja(m,R),R}function Dd(m,b,E){if(b&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Aa&&!m.ma?new lt(new Ji({ab:E})):new lt(m.ma),b.Fa(m.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nd(){}n=Nd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ts(){}Ts.prototype.g=function(m,b){return new Rn(m,b)};function Rn(m,b){zt.call(this),this.g=new _s(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(m?m["X-WebChannel-Client-Profile"]=b.sa:m={"X-WebChannel-Client-Profile":b.sa}),this.g.U=m,(m=b&&b.Qb)&&!P(m)&&(this.g.u=m),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!P(b)&&(this.g.G=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Rr(this)}v(Rn,zt),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){ec(this.g)},Rn.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var E={};E.__data__=m,m=E}else this.v&&(E={},E.__data__=ds(m),m=E);b.i.push(new Ft(b.Ya++,m)),b.I==3&&nr(b)},Rn.prototype.N=function(){this.g.l=null,delete this.j,ec(this.g),delete this.g,Rn.Z.N.call(this)};function kd(m){ln.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const E in b){m=E;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}v(kd,ln);function Vd(){ii.call(this),this.status=1}v(Vd,ii);function Rr(m){this.g=m}v(Rr,Nd),Rr.prototype.ra=function(){Zt(this.g,"a")},Rr.prototype.qa=function(m){Zt(this.g,new kd(m))},Rr.prototype.pa=function(m){Zt(this.g,new Vd)},Rr.prototype.oa=function(){Zt(this.g,"b")},Ts.prototype.createWebChannel=Ts.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,ZI=function(){return new Ts},WI=function(){return qo()},XI=Nt,Q0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,nm=Da,Uu.COMPLETE="complete",YI=Uu,hd.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",zt.prototype.listen=zt.prototype.J,Qc=hd,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,QI=lt}).apply(typeof Uf<"u"?Uf:typeof self<"u"?self:typeof window<"u"?window:{});const Zw="@firebase/firestore",Jw="4.9.2";class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");let xu="12.3.0";const Ro=new t_("@firebase/firestore");function Ll(){return Ro.logLevel}function ue(n,...e){if(Ro.logLevel<=$e.DEBUG){const t=e.map(r_);Ro.debug(`Firestore (${xu}): ${n}`,...t)}}function Ot(n,...e){if(Ro.logLevel<=$e.ERROR){const t=e.map(r_);Ro.error(`Firestore (${xu}): ${n}`,...t)}}function _h(n,...e){if(Ro.logLevel<=$e.WARN){const t=e.map(r_);Ro.warn(`Firestore (${xu}): ${n}`,...t)}}function r_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ye(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,JI(n,i,t)}function JI(n,e,t){let i=`FIRESTORE (${xu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ot(i),new Error(i)}function Te(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||JI(e,s,i)}function _e(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends os{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class _3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_n.UNAUTHENTICATED)))}shutdown(){}}class T3{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zr,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},h=d=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zr)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Te(typeof i.accessToken=="string",31837,{l:i}),new _3(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new _n(e)}}class E3{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class w3{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new E3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(_n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);const i=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new eS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function x3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class s_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=x3(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%62))}return i}}function Ve(n,e){return n<e?-1:n>e?1:0}function Y0(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return a0(s)===a0(o)?Ve(s,o):a0(s)?1:-1}return Ve(n.length,e.length)}const A3=55296,I3=57343;function a0(n){const e=n.charCodeAt(0);return e>=A3&&e<=I3}function nu(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function eR(n){return n+"\0"}const tS="__name__";class ur{constructor(e,t,i){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ye(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ur.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ur?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const o=ur.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Ve(e.length,t.length)}static compareSegments(e,t){const i=ur.isNumericId(e),s=ur.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?ur.extractNumericId(e).compare(ur.extractNumericId(t)):Y0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oa.fromString(e.substring(4,e.length-2))}}class nt extends ur{construct(e,t,i){return new nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const R3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends ur{construct(e,t,i){return new St(e,t,i)}static isValidIdentifier(e){return R3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tS}static keyField(){return new St([tS])}static fromServerFormat(e){const t=[];let i="",s=0;const o=()=>{if(i.length===0)throw new he(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new he(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new he(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new he(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(t)}static emptyPath(){return new St([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(nt.fromString(e))}static fromName(e){return new me(nt.fromString(e).popFirst(5))}static empty(){return new me(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new nt(e.slice()))}}function tR(n,e,t){if(!t)throw new he(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function C3(n,e,t,i){if(e===!0&&i===!0)throw new he(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nS(n){if(!me.isDocumentKey(n))throw new he(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iS(n){if(me.isDocumentKey(n))throw new he(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function hp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function Ui(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hp(n);throw new he(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Kh(n,e){if(!nR(n))throw new he(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new he(ie.INVALID_ARGUMENT,t);return!0}const rS=-62135596800,sS=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*sS);return new Je(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rS)throw new he(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sS}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kh(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:Xt("string",Je._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Je(0,0))}static max(){return new Se(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const iu=-1;class Cm{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function X0(n){return n.fields.find((e=>e.kind===2))}function ao(n){return n.fields.filter((e=>e.kind!==2))}Cm.UNKNOWN_ID=-1;class im{constructor(e,t){this.fieldPath=e,this.kind=t}}class bh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bh(0,ni.min())}}function iR(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Se.fromTimestamp(i===1e9?new Je(t+1,0):new Je(t,i));return new ni(s,me.empty(),e)}function rR(n){return new ni(n.readTime,n.key,iu)}class ni{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ni(Se.min(),me.empty(),iu)}static max(){return new ni(Se.max(),me.empty(),iu)}}function a_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}const sR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ba(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==sR)throw n;ue("LocalStore","Unexpectedly lost primary lease")}class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,i)=>{t(e)}))}static reject(e){return new K(((t,i)=>{i(e)}))}static waitFor(e){return new K(((t,i)=>{let s=0,o=0,l=!1;e.forEach((h=>{++s,h.next((()=>{++o,l&&o===s&&t()}),(d=>i(d)))})),l=!0,o===s&&t()}))}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next((s=>s?K.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,o)=>{i.push(t.call(this,s,o))})),this.waitFor(i)}static mapArray(e,t){return new K(((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{l[f]=g,++h,h===o&&i(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new K(((i,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):i()};o()}))}}const Jn="SimpleDb";class dp{static open(e,t,i,s){try{return new dp(t,e.transaction(s,i))}catch(o){throw new th(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Zr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new th(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=o_(i.target.error);this.S.reject(new th(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ue(Jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new N3(t)}}class la{static delete(e){return ue(Jn,"Removing database:",e),co(MI().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!BI())return!1;if(la.F())return!0;const e=tn(),t=la.M(e),i=0<t&&t<10,s=oR(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,la.M(tn())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ue(Jn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const l=o.target.result;t(l)},s.onblocked=()=>{i(new th(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const l=o.target.error;l.name==="VersionError"?i(new he(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new he(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new th(e,l))},s.onupgradeneeded=o=>{ue(Jn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,s.transaction,o.oldVersion,this.version).next((()=>{ue(Jn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const h=dp.open(this.db,e,o?"readonly":"readwrite",i),d=s(h).next((f=>(h.C(),f))).catch((f=>(h.abort(f),K.reject(f)))).toPromise();return d.catch((()=>{})),await h.D,d}catch(h){const d=h,f=d.name!=="FirebaseError"&&l<3;if(ue(Jn,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class D3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return co(this.U.delete())}}class th extends he{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ta(n){return n.name==="IndexedDbTransactionError"}class N3{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ue(Jn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ue(Jn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),co(i)}add(e){return ue(Jn,"ADD",this.store.name,e,e),co(this.store.add(e))}get(e){return co(this.store.get(e)).next((t=>(t===void 0&&(t=null),ue(Jn,"GET",this.store.name,e,t),t)))}delete(e){return ue(Jn,"DELETE",this.store.name,e),co(this.store.delete(e))}count(){return ue(Jn,"COUNT",this.store.name),co(this.store.count())}J(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new K(((l,h)=>{o.onerror=d=>{h(d.target.error)},o.onsuccess=d=>{l(d.target.result)}}))}{const o=this.cursor(i),l=[];return this.H(o,((h,d)=>{l.push(d)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new K(((s,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{s(l.target.result)}}))}Z(e,t){ue(Jn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,((o,l,h)=>h.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}te(e){const t=this.cursor({});return new K(((i,s)=>{t.onerror=o=>{const l=o_(o.target.error);s(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((h=>{h?l.continue():i()})):i()}}))}H(e,t){const i=[];return new K(((s,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void s();const d=new D3(h),f=t(h.primaryKey,h.value,d);if(f instanceof K){const g=f.catch((v=>(d.done(),K.reject(v))));i.push(g)}d.isDone?s():d.G===null?h.continue():h.continue(d.G)}})).next((()=>K.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function co(n){return new K(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=o_(i.target.error);t(s)}}))}let aS=!1;function o_(n){const e=la.M(tn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aS||(aS=!0,setTimeout((()=>{throw i}),0)),i}}return n}const nh="IndexBackfiller";class k3{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ue(nh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ue(nh,`Documents written: ${t}`)}catch(t){Ta(t)?ue(nh,"Ignoring IndexedDB error during index backfill: ",t):await ba(t)}await this.re(6e4)}))}}class V3{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,o=!0;return K.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return ue(nh,`Processing collection: ${l}`),this.oe(e,l,s).next((h=>{s-=h,i.add(l)}));o=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(s,o))).next((h=>(ue(nh,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,o)=>{const l=rR(o);a_(l,i)>0&&(i=l)})),new ni(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Un.ce=-1;const vo=-1;function fp(n){return n==null}function Th(n){return n===0&&1/n==-1/0}function lR(n){return typeof n=="number"&&Number.isInteger(n)&&!Th(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Dm="";function Sn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oS(e)),e=M3(n.get(t),e);return oS(e)}function M3(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Dm:t+="";break;default:t+=o}}return t}function oS(n){return n+Dm+""}function fr(n){const e=n.length;if(Te(e>=2,64408,{path:n}),e===2)return Te(n.charAt(0)===Dm&&n.charAt(1)==="",56145,{path:n}),nt.emptyPath();const t=e-2,i=[];let s="";for(let o=0;o<e;){const l=n.indexOf(Dm,o);switch((l<0||l>t)&&ye(50515,{path:n}),n.charAt(l+1)){case"":const h=n.substring(o,l);let d;s.length===0?d=h:(s+=h,d=s,s=""),i.push(d);break;case"":s+=n.substring(o,l),s+="\0";break;case"":s+=n.substring(o,l+1);break;default:ye(61167,{path:n})}o=l+2}return new nt(i)}const oo="remoteDocuments",Qh="owner",Dl="owner",Eh="mutationQueues",P3="userId",Li="mutations",lS="batchId",po="userMutationsIndex",uS=["userId","batchId"];function rm(n,e){return[n,Sn(e)]}function uR(n,e,t){return[n,Sn(e),t]}const O3={},ru="documentMutations",Nm="remoteDocumentsV14",L3=["prefixPath","collectionGroup","readTime","documentId"],sm="documentKeyIndex",j3=["prefixPath","collectionGroup","documentId"],cR="collectionGroupIndex",z3=["collectionGroup","readTime","prefixPath","documentId"],wh="remoteDocumentGlobal",W0="remoteDocumentGlobalKey",su="targets",hR="queryTargetsIndex",U3=["canonicalId","targetId"],au="targetDocuments",B3=["targetId","path"],l_="documentTargetsIndex",F3=["path","targetId"],km="targetGlobalKey",_o="targetGlobal",Sh="collectionParents",q3=["collectionId","parent"],ou="clientMetadata",H3="clientId",mp="bundles",G3="bundleId",pp="namedQueries",$3="name",u_="indexConfiguration",K3="indexId",Z0="collectionGroupIndex",Q3="collectionGroup",ih="indexState",Y3=["indexId","uid"],dR="sequenceNumberIndex",X3=["uid","sequenceNumber"],rh="indexEntries",W3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fR="documentKeyIndex",Z3=["indexId","uid","orderedDocumentKey"],gp="documentOverlays",J3=["userId","collectionPath","documentId"],J0="collectionPathOverlayIndex",e5=["userId","collectionPath","largestBatchId"],mR="collectionGroupOverlayIndex",t5=["userId","collectionGroup","largestBatchId"],c_="globals",n5="name",pR=[Eh,Li,ru,oo,su,Qh,_o,au,ou,wh,Sh,mp,pp],i5=[...pR,gp],gR=[Eh,Li,ru,Nm,su,Qh,_o,au,ou,wh,Sh,mp,pp,gp],yR=gR,h_=[...yR,u_,ih,rh],r5=h_,vR=[...h_,c_],s5=vR;class ev extends aR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function nn(n,e){const t=_e(n);return la.O(t.le,e)}function cS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ea(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _R(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pt{constructor(e,t){this.comparator=e,this.root=t||pn.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bf(this.root,e,this.comparator,!0)}}class Bf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??pn.RED,this.left=s??pn.EMPTY,this.right=o??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new pn(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return pn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,i,s,o){return this}insert(e,t,i){return new pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ot{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hS(this.data.getIterator())}getIteratorFrom(e){return new hS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ot(this.comparator);return t.data=e,t}}class hS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nl(n){return n.hasNext()?n.getNext():void 0}class Bn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Bn([])}unionWith(e){let t=new ot(St.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nu(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class bR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new bR("Invalid base64 string: "+o):o}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const a5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(n){if(Te(!!n,39018),typeof n=="string"){let e=0;const t=a5.exec(n);if(Te(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ns(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}const TR="server_timestamp",ER="__type__",wR="__previous_value__",SR="__local_write_time__";function d_(n){return(n?.mapValue?.fields||{})[ER]?.stringValue===TR}function yp(n){const e=n.mapValue.fields[wR];return d_(e)?yp(e):e}function xh(n){const e=ts(n.mapValue.fields[SR].timestampValue);return new Je(e.seconds,e.nanos)}class o5{constructor(e,t,i,s,o,l,h,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const Vm="(default)";class Co{constructor(e,t){this.projectId=e,this.database=t||Vm}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===Vm}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}const f_="__type__",xR="__max__",ia={mapValue:{fields:{__type__:{stringValue:xR}}}},m_="__vector__",lu="value",am={nullValue:"NULL_VALUE"};function ha(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d_(n)?4:AR(n)?9007199254740991:vp(n)?10:11:ye(28295,{value:n})}function Er(n,e){if(n===e)return!0;const t=ha(n);if(t!==ha(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xh(n).isEqual(xh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=ts(s.timestampValue),h=ts(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return ns(s.bytesValue).isEqual(ns(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return Tt(s.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(s.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Tt(s.integerValue)===Tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Tt(s.doubleValue),h=Tt(o.doubleValue);return l===h?Th(l)===Th(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return nu(n.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(cS(l)!==cS(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!Er(l[d],h[d])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function Ah(n,e){return(n.values||[]).find((t=>Er(t,e)))!==void 0}function da(n,e){if(n===e)return 0;const t=ha(n),i=ha(e);if(t!==i)return Ve(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const h=Tt(o.integerValue||o.doubleValue),d=Tt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,e);case 3:return dS(n.timestampValue,e.timestampValue);case 4:return dS(xh(n),xh(e));case 5:return Y0(n.stringValue,e.stringValue);case 6:return(function(o,l){const h=ns(o),d=ns(l);return h.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const h=o.split("/"),d=l.split("/");for(let f=0;f<h.length&&f<d.length;f++){const g=Ve(h[f],d[f]);if(g!==0)return g}return Ve(h.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const h=Ve(Tt(o.latitude),Tt(l.latitude));return h!==0?h:Ve(Tt(o.longitude),Tt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return fS(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const h=o.fields||{},d=l.fields||{},f=h[lu]?.arrayValue,g=d[lu]?.arrayValue,v=Ve(f?.values?.length||0,g?.values?.length||0);return v!==0?v:fS(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===ia.mapValue&&l===ia.mapValue)return 0;if(o===ia.mapValue)return 1;if(l===ia.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),f=l.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const _=Y0(d[v],g[v]);if(_!==0)return _;const S=da(h[d[v]],f[g[v]]);if(S!==0)return S}return Ve(d.length,g.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function dS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=ts(n),i=ts(e),s=Ve(t.seconds,i.seconds);return s!==0?s:Ve(t.nanos,i.nanos)}function fS(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const o=da(t[s],i[s]);if(o)return o}return Ve(t.length,i.length)}function uu(n){return tv(n)}function tv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ts(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ns(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const o of t.values||[])s?s=!1:i+=",",i+=tv(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${tv(t.fields[l])}`;return s+"}"})(n.mapValue):ye(61005,{value:n})}function om(n){switch(ha(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yp(n);return e?16+om(e):16;case 5:return 2*n.stringValue.length;case 6:return ns(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+om(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Ea(i.fields,((o,l)=>{s+=o.length+om(l)})),s})(n.mapValue);default:throw ye(13486,{value:n})}}function Ih(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nv(n){return!!n&&"integerValue"in n}function Rh(n){return!!n&&"arrayValue"in n}function mS(n){return!!n&&"nullValue"in n}function pS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lm(n){return!!n&&"mapValue"in n}function vp(n){return(n?.mapValue?.fields||{})[f_]?.stringValue===m_}function sh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ea(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=sh(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sh(n.arrayValue.values[t]);return e}return{...n}}function AR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xR}const IR={mapValue:{fields:{[f_]:{stringValue:m_},[lu]:{arrayValue:{}}}}};function l5(n){return"nullValue"in n?am:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ih(Co.empty(),me.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?vp(n)?IR:{mapValue:{}}:ye(35942,{value:n})}function u5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ih(Co.empty(),me.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?IR:"mapValue"in n?vp(n)?{mapValue:{}}:ia:ye(61959,{value:n})}function gS(n,e){const t=da(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yS(n,e){const t=da(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!lm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sh(t)}setAll(e){let t=St.emptyPath(),i={},s=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,i,s),i={},s=[],t=h.popLast()}l?i[h.lastSegment()]=sh(l):s.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){const t=this.field(e.popLast());lm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];lm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Ea(t,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new Tn(sh(this.value))}}function RR(n){const e=[];return Ea(n.fields,((t,i)=>{const s=new St([t]);if(lm(i)){const o=RR(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Bn(e)}class Dt{constructor(e,t,i,s,o,l,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Dt(e,0,Se.min(),Se.min(),Se.min(),Tn.empty(),0)}static newFoundDocument(e,t,i,s){return new Dt(e,1,t,Se.min(),i,s,0)}static newNoDocument(e,t){return new Dt(e,2,t,Se.min(),Se.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new Dt(e,3,t,Se.min(),Se.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cu{constructor(e,t){this.position=e,this.inclusive=t}}function vS(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?i=me.comparator(me.fromName(l.referenceValue),t.key):i=da(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function _S(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Er(n.position[t],e.position[t]))return!1;return!0}class Ch{constructor(e,t="asc"){this.field=e,this.dir=t}}function c5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class CR{}class Ke extends CR{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new h5(e,t,i):t==="array-contains"?new m5(e,i):t==="in"?new PR(e,i):t==="not-in"?new p5(e,i):t==="array-contains-any"?new g5(e,i):new Ke(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new d5(e,i):new f5(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(da(t,this.value)):t!==null&&ha(this.value)===ha(t)&&this.matchesComparison(da(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class at extends CR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new at(e,t)}matches(e){return hu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hu(n){return n.op==="and"}function iv(n){return n.op==="or"}function p_(n){return DR(n)&&hu(n)}function DR(n){for(const e of n.filters)if(e instanceof at)return!1;return!0}function rv(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+uu(n.value);if(p_(n))return n.filters.map((e=>rv(e))).join(",");{const e=n.filters.map((t=>rv(t))).join(",");return`${n.op}(${e})`}}function NR(n,e){return n instanceof Ke?(function(i,s){return s instanceof Ke&&i.op===s.op&&i.field.isEqual(s.field)&&Er(i.value,s.value)})(n,e):n instanceof at?(function(i,s){return s instanceof at&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,l,h)=>o&&NR(l,s.filters[h])),!0):!1})(n,e):void ye(19439)}function kR(n,e){const t=n.filters.concat(e);return at.create(t,n.op)}function VR(n){return n instanceof Ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${uu(t.value)}`})(n):n instanceof at?(function(t){return t.op.toString()+" {"+t.getFilters().map(VR).join(" ,")+"}"})(n):"Filter"}class h5 extends Ke{constructor(e,t,i){super(e,t,i),this.key=me.fromName(i.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class d5 extends Ke{constructor(e,t){super(e,"in",t),this.keys=MR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class f5 extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=MR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function MR(n,e){return(e.arrayValue?.values||[]).map((t=>me.fromName(t.referenceValue)))}class m5 extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rh(t)&&Ah(t.arrayValue,this.value)}}class PR extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ah(this.value.arrayValue,t)}}class p5 extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ah(this.value.arrayValue,t)}}class g5 extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ah(this.value.arrayValue,i)))}}class y5{constructor(e,t=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function sv(n,e=null,t=[],i=[],s=null,o=null,l=null){return new y5(n,e,t,i,s,o,l)}function Do(n){const e=_e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>rv(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>uu(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>uu(i))).join(",")),e.Te=t}return e.Te}function Yh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_S(n.startAt,e.startAt)&&_S(n.endAt,e.endAt)}function Mm(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Pm(n,e){return n.filters.filter((t=>t instanceof Ke&&t.field.isEqual(e)))}function bS(n,e,t){let i=am,s=!0;for(const o of Pm(n,e)){let l=am,h=!0;switch(o.op){case"<":case"<=":l=l5(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,h=!1;break;case"!=":case"not-in":l=am}gS({value:i,inclusive:s},{value:l,inclusive:h})<0&&(i=l,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];gS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}function TS(n,e,t){let i=ia,s=!0;for(const o of Pm(n,e)){let l=ia,h=!0;switch(o.op){case">=":case">":l=u5(o.value),h=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,h=!1;break;case"!=":case"not-in":l=ia}yS({value:i,inclusive:s},{value:l,inclusive:h})>0&&(i=l,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];yS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}class Au{constructor(e,t=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OR(n,e,t,i,s,o,l,h){return new Au(n,e,t,i,s,o,l,h)}function _p(n){return new Au(n)}function ES(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function LR(n){return n.collectionGroup!==null}function ah(n){const e=_e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new ot(St.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(h=h.add(f.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ch(o,i))})),t.has(St.keyField().canonicalString())||e.Ie.push(new Ch(St.keyField(),i))}return e.Ie}function ti(n){const e=_e(n);return e.Ee||(e.Ee=v5(e,ah(n))),e.Ee}function v5(n,e){if(n.limitType==="F")return sv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Ch(s.field,o)}));const t=n.endAt?new cu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new cu(n.startAt.position,n.startAt.inclusive):null;return sv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function av(n,e){const t=n.filters.concat([e]);return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Om(n,e,t){return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bp(n,e){return Yh(ti(n),ti(e))&&n.limitType===e.limitType}function jR(n){return`${Do(ti(n))}|lt:${n.limitType}`}function jl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>VR(s))).join(", ")}]`),fp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>uu(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>uu(s))).join(",")),`Target(${i})`})(ti(n))}; limitType=${n.limitType})`}function Xh(n,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,s){for(const o of ah(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(l,h,d){const f=vS(l,h,d);return l.inclusive?f<=0:f<0})(i.startAt,ah(i),s)||i.endAt&&!(function(l,h,d){const f=vS(l,h,d);return l.inclusive?f>=0:f>0})(i.endAt,ah(i),s))})(n,e)}function zR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UR(n){return(e,t)=>{let i=!1;for(const s of ah(n)){const o=_5(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function _5(n,e,t){const i=n.field.isKeyField()?me.comparator(e.key,t.key):(function(o,l,h){const d=l.data.field(o),f=h.data.field(o);return d!==null&&f!==null?da(d,f):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ye(19790,{direction:n.dir})}}class ls{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,((t,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return _R(this.inner)}size(){return this.innerSize}}const b5=new pt(me.comparator);function ei(){return b5}const BR=new pt(me.comparator);function Yc(...n){let e=BR;for(const t of n)e=e.insert(t.key,t);return e}function FR(n){let e=BR;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function mr(){return oh()}function qR(){return oh()}function oh(){return new ls((n=>n.toString()),((n,e)=>n.isEqual(e)))}const T5=new pt(me.comparator),E5=new ot(me.comparator);function Ue(...n){let e=E5;for(const t of n)e=e.add(t);return e}const w5=new ot(Ve);function g_(){return w5}function y_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(e)?"-0":e}}function HR(n){return{integerValue:""+n}}function S5(n,e){return lR(e)?HR(e):y_(n,e)}class Tp{constructor(){this._=void 0}}function x5(n,e,t){return n instanceof Dh?(function(s,o){const l={fields:{[ER]:{stringValue:TR},[SR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&d_(o)&&(o=yp(o)),o&&(l.fields[wR]=o),{mapValue:l}})(t,e):n instanceof du?$R(n,e):n instanceof fu?KR(n,e):(function(s,o){const l=GR(s,o),h=wS(l)+wS(s.Ae);return nv(l)&&nv(s.Ae)?HR(h):y_(s.serializer,h)})(n,e)}function A5(n,e,t){return n instanceof du?$R(n,e):n instanceof fu?KR(n,e):t}function GR(n,e){return n instanceof Nh?(function(i){return nv(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Dh extends Tp{}class du extends Tp{constructor(e){super(),this.elements=e}}function $R(n,e){const t=QR(e);for(const i of n.elements)t.some((s=>Er(s,i)))||t.push(i);return{arrayValue:{values:t}}}class fu extends Tp{constructor(e){super(),this.elements=e}}function KR(n,e){let t=QR(e);for(const i of n.elements)t=t.filter((s=>!Er(s,i)));return{arrayValue:{values:t}}}class Nh extends Tp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function wS(n){return Tt(n.integerValue||n.doubleValue)}function QR(n){return Rh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class I5{constructor(e,t){this.field=e,this.transform=t}}function R5(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof du&&s instanceof du||i instanceof fu&&s instanceof fu?nu(i.elements,s.elements,Er):i instanceof Nh&&s instanceof Nh?Er(i.Ae,s.Ae):i instanceof Dh&&s instanceof Dh})(n.transform,e.transform)}class C5{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function um(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ep{}function YR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wp(n.key,En.none()):new Iu(n.key,n.data,En.none());{const t=n.data,i=Tn.empty();let s=new ot(St.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new us(n.key,i,new Bn(s.toArray()),En.none())}}function D5(n,e,t){n instanceof Iu?(function(s,o,l){const h=s.value.clone(),d=xS(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof us?(function(s,o,l){if(!um(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=xS(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(XR(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function lh(n,e,t,i){return n instanceof Iu?(function(o,l,h,d){if(!um(o.precondition,l))return h;const f=o.value.clone(),g=AS(o.fieldTransforms,d,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof us?(function(o,l,h,d){if(!um(o.precondition,l))return h;const f=AS(o.fieldTransforms,d,l),g=l.data;return g.setAll(XR(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(o,l,h){return um(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function N5(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=GR(i.transform,s||null);o!=null&&(t===null&&(t=Tn.empty()),t.set(i.field,o))}return t||null}function SS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&nu(i,s,((o,l)=>R5(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Iu extends Ep{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class us extends Ep{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function XR(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function xS(n,e,t){const i=new Map;Te(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,A5(l,h,t[s]))}return i}function AS(n,e,t){const i=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);i.set(s.field,x5(o,l,e))}return i}class wp extends Ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WR extends Ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class v_{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&D5(o,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=lh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=lh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=qR();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=t.has(s.key)?null:h;const d=YR(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&nu(this.mutations,e.mutations,((t,i)=>SS(t,i)))&&nu(this.baseMutations,e.baseMutations,((t,i)=>SS(t,i)))}}class __{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Te(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return T5})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new __(e,t,i,s)}}class b_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class k5{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qt,Xe;function V5(n){switch(n){case ie.OK:return ye(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function ZR(n){if(n===void 0)return Ot("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Qt.OK:return ie.OK;case Qt.CANCELLED:return ie.CANCELLED;case Qt.UNKNOWN:return ie.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return ie.INTERNAL;case Qt.UNAVAILABLE:return ie.UNAVAILABLE;case Qt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Qt.NOT_FOUND:return ie.NOT_FOUND;case Qt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Qt.ABORTED:return ie.ABORTED;case Qt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Qt.DATA_LOSS:return ie.DATA_LOSS;default:return ye(39323,{code:n})}}(Xe=Qt||(Qt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function M5(){return new TextEncoder}const P5=new oa([4294967295,4294967295],0);function IS(n){const e=M5().encode(n),t=new KI;return t.update(e),new Uint8Array(t.digest())}function RS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new oa([t,i],0),new oa([s,o],0)]}class T_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Xc(`Invalid padding: ${t}`);if(i<0)throw new Xc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Xc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Xc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=oa.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(oa.fromNumber(i)));return s.compare(P5)===1&&(s=new oa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=IS(e),[i,s]=RS(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new T_(o,s,t);return i.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=IS(e),[i,s]=RS(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wh{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Zh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Wh(Se.min(),s,new pt(Ve),ei(),Ue())}}class Zh{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Zh(i,t,Ue(),Ue(),Ue())}}class cm{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class JR{constructor(e,t){this.targetId=e,this.Ce=t}}class e2{constructor(e,t,i=jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class CS{constructor(){this.ve=0,this.Fe=DS(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),i=Ue();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ye(38017,{changeType:o})}})),new Zh(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=DS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class O5{constructor(e){this.Ge=e,this.ze=new Map,this.je=ei(),this.Je=Ff(),this.He=Ff(),this.Ye=new pt(Ve)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Mm(o))if(i===0){const l=new me(o.path);this.et(t,l,Dt.newNoDocument(l,Se.min()))}else Te(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t;let l,h;try{l=ns(i).toUint8Array()}catch(d){if(d instanceof bR)return _h("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new T_(l,s,o)}catch(d){return _h(d instanceof Xc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Mm(h.target)){const d=new me(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Dt.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let i=Ue();this.He.forEach(((o,l)=>{let h=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new Wh(e,t,this.Ye,this.je,i);return this.je=ei(),this.Je=Ff(),this.He=Ff(),this.Ye=new pt(Ve),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new CS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ot(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ot(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new CS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ff(){return new pt(me.comparator)}function DS(){return new pt(me.comparator)}const L5={asc:"ASCENDING",desc:"DESCENDING"},j5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z5={and:"AND",or:"OR"};class U5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ov(n,e){return n.useProto3Json||fp(e)?e:{value:e}}function mu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function B5(n,e){return mu(n,e.toTimestamp())}function Nn(n){return Te(!!n,49232),Se.fromTimestamp((function(t){const i=ts(t);return new Je(i.seconds,i.nanos)})(n))}function E_(n,e){return lv(n,e).canonicalString()}function lv(n,e){const t=(function(s){return new nt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function n2(n){const e=nt.fromString(n);return Te(h2(e),10190,{key:e.toString()}),e}function Lm(n,e){return E_(n.databaseId,e.path)}function bo(n,e){const t=n2(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(s2(t))}function i2(n,e){return E_(n.databaseId,e)}function r2(n){const e=n2(n);return e.length===4?nt.emptyPath():s2(e)}function uv(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function s2(n){return Te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function NS(n,e,t){return{name:Lm(n,e),fields:t.value.mapValue.fields}}function F5(n,e,t){const i=bo(n,e.name),s=Nn(e.updateTime),o=e.createTime?Nn(e.createTime):Se.min(),l=new Tn({mapValue:{fields:e.fields}}),h=Dt.newFoundDocument(i,s,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function q5(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ye(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Te(g===void 0||typeof g=="string",58123),jt.fromBase64String(g||"")):(Te(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),jt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(f){const g=f.code===void 0?ie.UNKNOWN:ZR(f.code);return new he(g,f.message||"")})(l);t=new e2(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=bo(n,i.document.name),o=Nn(i.document.updateTime),l=i.document.createTime?Nn(i.document.createTime):Se.min(),h=new Tn({mapValue:{fields:i.document.fields}}),d=Dt.newFoundDocument(s,o,l,h),f=i.targetIds||[],g=i.removedTargetIds||[];t=new cm(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=bo(n,i.document),o=i.readTime?Nn(i.readTime):Se.min(),l=Dt.newNoDocument(s,o),h=i.removedTargetIds||[];t=new cm([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=bo(n,i.document),o=i.removedTargetIds||[];t=new cm([],o,s,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new k5(s,o),h=i.targetId;t=new JR(h,l)}}return t}function jm(n,e){let t;if(e instanceof Iu)t={update:NS(n,e.key,e.value)};else if(e instanceof wp)t={delete:Lm(n,e.key)};else if(e instanceof us)t={update:NS(n,e.key,e.data),updateMask:Y5(e.fieldMask)};else{if(!(e instanceof WR))return ye(16599,{Vt:e.type});t={verify:Lm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const h=l.transform;if(h instanceof Dh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof du)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Nh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw ye(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:B5(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye(27497)})(n,e.precondition)),t}function cv(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?En.updateTime(Nn(o.updateTime)):o.exists!==void 0?En.exists(o.exists):En.none()})(e.currentDocument):En.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(l,h){let d=null;if("setToServerValue"in h)Te(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),d=new Dh;else if("appendMissingElements"in h){const g=h.appendMissingElements.values||[];d=new du(g)}else if("removeAllFromArray"in h){const g=h.removeAllFromArray.values||[];d=new fu(g)}else"increment"in h?d=new Nh(l,h.increment):ye(16584,{proto:h});const f=St.fromServerFormat(h.fieldPath);return new I5(f,d)})(n,s))):[];if(e.update){e.update.name;const s=bo(n,e.update.name),o=new Tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(d){const f=d.fieldPaths||[];return new Bn(f.map((g=>St.fromServerFormat(g))))})(e.updateMask);return new us(s,o,l,t,i)}return new Iu(s,o,t,i)}if(e.delete){const s=bo(n,e.delete);return new wp(s,t)}if(e.verify){const s=bo(n,e.verify);return new WR(s,t)}return ye(1463,{proto:e})}function H5(n,e){return n&&n.length>0?(Te(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?Nn(s.updateTime):Nn(o);return l.isEqual(Se.min())&&(l=Nn(o)),new C5(l,s.transformResults||[])})(t,e)))):[]}function a2(n,e){return{documents:[i2(n,e.path)]}}function o2(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=i2(n,s);const o=(function(f){if(f.length!==0)return c2(at.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:zl(_.field),direction:$5(_.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=ov(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function l2(n){let e=r2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Te(i===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(v){const _=u2(v);return _ instanceof at&&p_(_)?_.getFilters():[_]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((_=>(function(C){return new Ch(Ul(C.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(_)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let _;return _=typeof v=="object"?v.value:v,fp(_)?null:_})(t.limit));let d=null;t.startAt&&(d=(function(v){const _=!!v.before,S=v.values||[];return new cu(S,_)})(t.startAt));let f=null;return t.endAt&&(f=(function(v){const _=!v.before,S=v.values||[];return new cu(S,_)})(t.endAt)),OR(e,s,l,o,h,"F",d,f)}function G5(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function u2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ul(t.unaryFilter.field);return Ke.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ul(t.unaryFilter.field);return Ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ul(t.unaryFilter.field);return Ke.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ul(t.unaryFilter.field);return Ke.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ke.create(Ul(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return at.create(t.compositeFilter.filters.map((i=>u2(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function $5(n){return L5[n]}function K5(n){return j5[n]}function Q5(n){return z5[n]}function zl(n){return{fieldPath:n.canonicalString()}}function Ul(n){return St.fromServerFormat(n.fieldPath)}function c2(n){return n instanceof Ke?(function(t){if(t.op==="=="){if(pS(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NAN"}};if(mS(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pS(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NOT_NAN"}};if(mS(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(t.field),op:K5(t.op),value:t.value}}})(n):n instanceof at?(function(t){const i=t.getFilters().map((s=>c2(s)));return i.length===1?i[0]:{compositeFilter:{op:Q5(t.op),filters:i}}})(n):ye(54877,{filter:n})}function Y5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function h2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Qr{constructor(e,t,i,s,o=Se.min(),l=Se.min(),h=jt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class d2{constructor(e){this.yt=e}}function X5(n,e){let t;if(e.document)t=F5(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=me.fromSegments(e.noDocument.path),s=ko(e.noDocument.readTime);t=Dt.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const i=me.fromSegments(e.unknownDocument.path),s=ko(e.unknownDocument.version);t=Dt.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const o=new Je(s[0],s[1]);return Se.fromTimestamp(o)})(e.readTime)),t}function kS(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:zm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,l){return{name:Lm(o,l.key),fields:l.data.value.mapValue.fields,updateTime:mu(o,l.version.toTimestamp()),createTime:mu(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:No(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:No(e.version)}}return i}function zm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function No(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ko(n){const e=new Je(n.seconds,n.nanoseconds);return Se.fromTimestamp(e)}function ho(n,e){const t=(e.baseMutations||[]).map((o=>cv(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];l.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>cv(n.yt,o))),s=Je.fromMillis(e.localWriteTimeMs);return new v_(e.batchId,s,t,i)}function Wc(n){const e=ko(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ko(n.lastLimboFreeSnapshotVersion):Se.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return Te(l===1,1966,{count:l}),ti(_p(r2(o.documents[0])))})(n.query):(function(o){return ti(l2(o))})(n.query),new Qr(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,jt.fromBase64String(n.resumeToken))}function f2(n,e){const t=No(e.snapshotVersion),i=No(e.lastLimboFreeSnapshotVersion);let s;s=Mm(e.target)?a2(n.yt,e.target):o2(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Do(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function m2(n){const e=l2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Om(e,e.limit,"L"):e}function o0(n,e){return new b_(e.largestBatchId,cv(n.yt,e.overlayMutation))}function VS(n,e){const t=e.path.lastSegment();return[n,Sn(e.path.popLast()),t]}function MS(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:No(i.readTime),documentKey:Sn(i.documentKey.path),largestBatchId:i.largestBatchId}}class W5{getBundleMetadata(e,t){return PS(e).get(t).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:ko(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,t){return PS(e).put((function(s){return{bundleId:s.id,createTime:No(Nn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return OS(e).get(t).next((i=>{if(i)return(function(o){return{name:o.name,query:m2(o.bundledQuery),readTime:ko(o.readTime)}})(i)}))}saveNamedQuery(e,t){return OS(e).put((function(s){return{name:s.name,readTime:No(Nn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function PS(n){return nn(n,mp)}function OS(n){return nn(n,pp)}class Sp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Sp(e,i)}getOverlay(e,t){return Fc(e).get(VS(this.userId,t)).next((i=>i?o0(this.serializer,i):null))}getOverlays(e,t){const i=mr();return K.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((o,l)=>{const h=new b_(t,l);s.push(this.St(e,h))})),K.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((l=>s.add(Sn(l.getCollectionPath()))));const o=[];return s.forEach((l=>{const h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(Fc(e).Z(J0,h))})),K.waitFor(o)}getOverlaysForCollection(e,t,i){const s=mr(),o=Sn(t),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Fc(e).J(J0,l).next((h=>{for(const d of h){const f=o0(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const o=mr();let l;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Fc(e).ee({index:mR,range:h},((d,f,g)=>{const v=o0(this.serializer,f);o.size()<s||v.largestBatchId===l?(o.set(v.getKey(),v),l=v.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Fc(e).put((function(s,o,l){const[h,d,f]=VS(o,l.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:jm(s.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Fc(n){return nn(n,gp)}class Z5{bt(e){return nn(e,c_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?jt.fromUint8Array(i):jt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class fo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Tt(e.integerValue));else if("doubleValue"in e){const i=Tt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Th(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=ts(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ns(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?AR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):vp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ye(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const s=lu,o=i[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Tt(o)),this.Ot(s,t),this.Ct(i[s],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),me.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}fo.Kt=new fo;const kl=255;function J5(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function LS(n){const e=64-(function(i){let s=0;for(let o=0;o<8;++o){const l=J5(255&i[o]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class e6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),i=LS(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=LS(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(kl),this.sn(255)}_n(){this.an(kl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===kl?(this.sn(kl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===kl?(this.an(kl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class t6{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class n6{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class qc{constructor(){this.cn=new e6,this.ln=new t6(this.cn),this.hn=new n6(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class mo{constructor(e,t,i,s){this.Tn=e,this.In=t,this.En=i,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new mo(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:hm(this.En),directionalValue:hm(this.dn),orderedDocumentKey:hm(t),documentKey:i.path.toArray()}}Vn(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Hs(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=jS(n.En,e.En),t!==0?t:(t=jS(n.dn,e.dn),t!==0?t:me.comparator(n.In,e.In)))}function jS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function hm(n){return UI()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function zS(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class US{constructor(e){this.mn=new ot(((t,i)=>St.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Te(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=X0(e);if(t!==void 0&&!this.wn(t))return!1;const i=ao(e);let s=new Set,o=0,l=0;for(;o<i.length&&this.wn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const d=i[o];if(!this.Sn(h,d)||!this.bn(this.fn[l++],d))return!1}++o}for(;o<i.length;++o){const h=i[o];if(l>=this.fn.length||!this.bn(this.fn[l++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new ot(St.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new im(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new im(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new im(i.field,i.dir==="asc"?0:1)));return new Cm(Cm.UNKNOWN_ID,this.collectionId,t,bh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function p2(n){if(Te(n instanceof Ke||n instanceof at,20012),n instanceof Ke){if(n instanceof PR){const t=n.value.arrayValue?.values?.map((i=>Ke.create(n.field,"==",i)))||[];return at.create(t,"or")}return n}const e=n.filters.map((t=>p2(t)));return at.create(e,n.op)}function i6(n){if(n.getFilters().length===0)return[];const e=fv(p2(n));return Te(g2(e),7391),hv(e)||dv(e)?[e]:e.getFilters()}function hv(n){return n instanceof Ke}function dv(n){return n instanceof at&&p_(n)}function g2(n){return hv(n)||dv(n)||(function(t){if(t instanceof at&&iv(t)){for(const i of t.getFilters())if(!hv(i)&&!dv(i))return!1;return!0}return!1})(n)}function fv(n){if(Te(n instanceof Ke||n instanceof at,34018),n instanceof Ke)return n;if(n.filters.length===1)return fv(n.filters[0]);const e=n.filters.map((i=>fv(i)));let t=at.create(e,n.op);return t=Um(t),g2(t)?t:(Te(t instanceof at,64498),Te(hu(t),40251),Te(t.filters.length>1,57927),t.filters.reduce(((i,s)=>w_(i,s))))}function w_(n,e){let t;return Te(n instanceof Ke||n instanceof at,38388),Te(e instanceof Ke||e instanceof at,25473),t=n instanceof Ke?e instanceof Ke?(function(s,o){return at.create([s,o],"and")})(n,e):BS(n,e):e instanceof Ke?BS(e,n):(function(s,o){if(Te(s.filters.length>0&&o.filters.length>0,48005),hu(s)&&hu(o))return kR(s,o.getFilters());const l=iv(s)?s:o,h=iv(s)?o:s,d=l.filters.map((f=>w_(f,h)));return at.create(d,"or")})(n,e),Um(t)}function BS(n,e){if(hu(e))return kR(e,n.getFilters());{const t=e.filters.map((i=>w_(n,i)));return at.create(t,"or")}}function Um(n){if(Te(n instanceof Ke||n instanceof at,11850),n instanceof Ke)return n;const e=n.getFilters();if(e.length===1)return Um(e[0]);if(DR(n))return n;const t=e.map((s=>Um(s))),i=[];return t.forEach((s=>{s instanceof Ke?i.push(s):s instanceof at&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:at.create(i,n.op)}class r6{constructor(){this.Cn=new S_}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ni.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class S_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new ot(nt.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ot(nt.comparator)).toArray()}}const FS="IndexedDbIndexManager",qf=new Uint8Array(0);class s6{constructor(e,t){this.databaseId=t,this.vn=new S_,this.Fn=new ls((i=>Do(i)),((i,s)=>Yh(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:i,parent:Sn(s)};return qS(e).put(o)}return K.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[eR(t),""],!1,!0);return qS(e).J(s).next((o=>{for(const l of o){if(l.collectionId!==t)break;i.push(fr(l.parent))}return i}))}addFieldIndex(e,t){const i=Hc(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=i.add(s);if(t.indexState){const l=Ml(e);return o.next((h=>{l.put(MS(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const i=Hc(e),s=Ml(e),o=Vl(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Hc(e),i=Vl(e),s=Ml(e);return t.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return K.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const o=new US(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const i=Vl(e);let s=!0;const o=new Map;return K.forEach(this.Mn(t),(l=>this.xn(e,l).next((h=>{s&&(s=!!h),o.set(l,h)})))).next((()=>{if(s){let l=Ue();const h=[];return K.forEach(o,((d,f)=>{ue(FS,`Using index ${(function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map((Z=>`${Z.fieldPath}:${Z.kind}`)).join(",")}`})(d)} to execute ${Do(t)}`);const g=(function(O,Z){const te=X0(Z);if(te===void 0)return null;for(const H of Pm(O,te.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null})(f,d),v=(function(O,Z){const te=new Map;for(const H of ao(Z))for(const I of Pm(O,H.fieldPath))switch(I.op){case"==":case"in":te.set(H.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return te.set(H.fieldPath.canonicalString(),I.value),Array.from(te.values())}return null})(f,d),_=(function(O,Z){const te=[];let H=!0;for(const I of ao(Z)){const A=I.kind===0?bS(O,I.fieldPath,O.startAt):TS(O,I.fieldPath,O.startAt);te.push(A.value),H&&(H=A.inclusive)}return new cu(te,H)})(f,d),S=(function(O,Z){const te=[];let H=!0;for(const I of ao(Z)){const A=I.kind===0?TS(O,I.fieldPath,O.endAt):bS(O,I.fieldPath,O.endAt);te.push(A.value),H&&(H=A.inclusive)}return new cu(te,H)})(f,d),C=this.On(d,f,_),N=this.On(d,f,S),k=this.Nn(d,f,v),U=this.Bn(d.indexId,g,C,_.inclusive,N,S.inclusive,k);return K.forEach(U,(q=>i.Y(q,t.limit).next((O=>{O.forEach((Z=>{const te=me.fromSegments(Z.documentKey);l.has(te)||(l=l.add(te),h.push(te))}))}))))})).next((()=>h))}return K.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=i6(at.create(e.filters,"and")).map((i=>sv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,s,o,l,h){const d=(t!=null?t.length:1)*Math.max(i.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let v=0;v<d;++v){const _=t?this.Ln(t[v/f]):qf,S=this.kn(e,_,i[v%f],s),C=this.qn(e,_,o[v%f],l),N=h.map((k=>this.kn(e,_,k,!0)));g.push(...this.createRange(S,C,N))}return g}kn(e,t,i,s){const o=new mo(e,me.empty(),t,i);return s?o:o.An()}qn(e,t,i,s){const o=new mo(e,me.empty(),t,i);return s?o.An():o}xn(e,t){const i=new US(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let l=null;for(const h of o)i.yn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l}))}getIndexType(e,t){let i=2;const s=this.Mn(t);return K.forEach(s,(o=>this.xn(e,o).next((l=>{l?i!==0&&l.fields.length<(function(d){let f=new ot(St.comparator),g=!1;for(const v of d.filters)for(const _ of v.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?g=!0:f=f.add(_.field));for(const v of d.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(g?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&i===2?1:i))}Qn(e,t){const i=new qc;for(const s of ao(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const l=i.Pn(s.kind);fo.Kt.Dt(o,l)}return i.un()}Ln(e){const t=new qc;return fo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new qc;return fo.Kt.Dt(Ih(this.databaseId,t),i.Pn((function(o){const l=ao(o);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let s=[];s.push(new qc);let o=0;for(const l of ao(e)){const h=i[o++];for(const d of s)if(this.Un(t,l.fieldPath)&&Rh(h))s=this.Kn(s,l,h);else{const f=d.Pn(l.kind);fo.Kt.Dt(h,f)}}return this.Wn(s)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const s=[...e],o=[];for(const l of i.arrayValue.values||[])for(const h of s){const d=new qc;d.seed(h.un()),fo.Kt.Dt(l,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((i=>i instanceof Ke&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Hc(e),s=Ml(e);return(t?i.J(Z0,IDBKeyRange.bound(t,t)):i.J()).next((o=>{const l=[];return K.forEach(o,(h=>s.get([h.indexId,this.uid]).next((d=>{l.push((function(g,v){const _=v?new bh(v.sequenceNumber,new ni(ko(v.readTime),new me(fr(v.documentKey)),v.largestBatchId)):bh.empty(),S=g.fields.map((([C,N])=>new im(St.fromServerFormat(C),N)));return new Cm(g.indexId,g.collectionGroup,S,_)})(h,d))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Ve(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=Hc(e),o=Ml(e);return this.Gn(e).next((l=>s.J(Z0,IDBKeyRange.bound(t,t)).next((h=>K.forEach(h,(d=>o.put(MS(d.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return K.forEach(t,((s,o)=>{const l=i.get(s.collectionGroup);return(l?K.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(i.set(s.collectionGroup,h),K.forEach(h,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?K.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,i,s){return Vl(e).put(s.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,s){return Vl(e).delete(s.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const s=Vl(e);let o=new ot(Hs);return s.ee({index:fR,range:IDBKeyRange.only([i.indexId,this.uid,hm(this.$n(i,t))])},((l,h)=>{o=o.add(new mo(i.indexId,t,zS(h.arrayValue),zS(h.directionalValue)))})).next((()=>o))}jn(e,t){let i=new ot(Hs);const s=this.Qn(t,e);if(s==null)return i;const o=X0(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Rh(l))for(const h of l.arrayValue.values||[])i=i.add(new mo(t.indexId,e.key,this.Ln(h),s))}else i=i.add(new mo(t.indexId,e.key,qf,s));return i}Jn(e,t,i,s,o){ue(FS,"Updating index entries for document '%s'",t.key);const l=[];return(function(d,f,g,v,_){const S=d.getIterator(),C=f.getIterator();let N=Nl(S),k=Nl(C);for(;N||k;){let U=!1,q=!1;if(N&&k){const O=g(N,k);O<0?q=!0:O>0&&(U=!0)}else N!=null?q=!0:U=!0;U?(v(k),k=Nl(C)):q?(_(N),N=Nl(S)):(N=Nl(S),k=Nl(C))}})(s,o,Hs,(h=>{l.push(this.Hn(e,t,i,h))}),(h=>{l.push(this.Yn(e,t,i,h))})),K.waitFor(l)}Gn(e){let t=1;return Ml(e).ee({index:dR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,h)=>Hs(l,h))).filter(((l,h,d)=>!h||Hs(l,d[h-1])!==0));const s=[];s.push(e);for(const l of i){const h=Hs(l,e),d=Hs(l,t);if(h===0)s[0]=e.An();else if(h>0&&d<0)s.push(l),s.push(l.An());else if(d>0)break}s.push(t);const o=[];for(let l=0;l<s.length;l+=2){if(this.Zn(s[l],s[l+1]))return[];const h=s[l].Vn(this.uid,qf,me.empty()),d=s[l+1].Vn(this.uid,qf,me.empty());o.push(IDBKeyRange.bound(h,d))}return o}Zn(e,t){return Hs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(HS)}getMinOffset(e,t){return K.mapArray(this.Mn(t),(i=>this.xn(e,i).next((s=>s||ye(44426))))).next(HS)}}function qS(n){return nn(n,Sh)}function Vl(n){return nn(n,rh)}function Hc(n){return nn(n,u_)}function Ml(n){return nn(n,ih)}function HS(n){Te(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;a_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ni(e.readTime,e.documentKey,t)}const GS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},y2=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function v2(n,e,t){const i=n.store(Li),s=n.store(ru),o=[],l=IDBKeyRange.only(t.batchId);let h=0;const d=i.ee({range:l},((g,v,_)=>(h++,_.delete())));o.push(d.next((()=>{Te(h===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const v=uR(e,g.key.path,t.batchId);o.push(s.delete(v)),f.push(g.key)}return K.waitFor(o).next((()=>f))}function Bm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ye(14731);e=n.noDocument}return JSON.stringify(e).length}bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(y2,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);class xp{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,t,i,s){Te(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new xp(o,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gs(e).ee({index:po,range:i},((s,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const o=Bl(e),l=Gs(e);return l.add({}).next((h=>{Te(typeof h=="number",49019);const d=new v_(h,t,i,s),f=(function(S,C,N){const k=N.baseMutations.map((q=>jm(S.yt,q))),U=N.mutations.map((q=>jm(S.yt,q)));return{userId:C,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:k,mutations:U}})(this.serializer,this.userId,d),g=[];let v=new ot(((_,S)=>Ve(_.canonicalString(),S.canonicalString())));for(const _ of s){const S=uR(this.userId,_.key.path,h);v=v.add(_.key.path.popLast()),g.push(l.put(f)),g.push(o.put(S,O3))}return v.forEach((_=>{g.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[h]=d.keys()})),K.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return Gs(e).get(t).next((i=>i?(Te(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),ho(this.serializer,i)):null))}er(e,t){return this.Xn[t]?K.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Gs(e).ee({index:po,range:s},((l,h,d)=>{h.userId===this.userId&&(Te(h.batchId>=i,47524,{tr:i}),o=ho(this.serializer,h)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=vo;return Gs(e).ee({index:po,range:t,reverse:!0},((s,o,l)=>{i=o.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,vo],[this.userId,Number.POSITIVE_INFINITY]);return Gs(e).J(po,t).next((i=>i.map((s=>ho(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=rm(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=[];return Bl(e).ee({range:s},((l,h,d)=>{const[f,g,v]=l,_=fr(g);if(f===this.userId&&t.path.isEqual(_))return Gs(e).get(v).next((S=>{if(!S)throw ye(61480,{nr:l,batchId:v});Te(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:v}),o.push(ho(this.serializer,S))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(Ve);const s=[];return t.forEach((o=>{const l=rm(this.userId,o.path),h=IDBKeyRange.lowerBound(l),d=Bl(e).ee({range:h},((f,g,v)=>{const[_,S,C]=f,N=fr(S);_===this.userId&&o.path.isEqual(N)?i=i.add(C):v.done()}));s.push(d)})),K.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,o=rm(this.userId,i),l=IDBKeyRange.lowerBound(o);let h=new ot(Ve);return Bl(e).ee({range:l},((d,f,g)=>{const[v,_,S]=d,C=fr(_);v===this.userId&&i.isPrefixOf(C)?C.length===s&&(h=h.add(S)):g.done()})).next((()=>this.rr(e,h)))}rr(e,t){const i=[],s=[];return t.forEach((o=>{s.push(Gs(e).get(o).next((l=>{if(l===null)throw ye(35274,{batchId:o});Te(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),i.push(ho(this.serializer,l))})))})),K.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return v2(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),K.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return K.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return Bl(e).ee({range:i},((o,l,h)=>{if(o[0]===this.userId){const d=fr(o[1]);s.push(d)}else h.done()})).next((()=>{Te(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return _2(e,this.userId,t)}_r(e){return b2(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:vo,lastStreamToken:""}))}}function _2(n,e,t){const i=rm(e,t.path),s=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return Bl(n).ee({range:o,X:!0},((h,d,f)=>{const[g,v,_]=h;g===e&&v===s&&(l=!0),f.done()})).next((()=>l))}function Gs(n){return nn(n,Li)}function Bl(n){return nn(n,ru)}function b2(n){return nn(n,Eh)}class Vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vo(0)}static cr(){return new Vo(-1)}}class a6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Vo(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Se.fromTimestamp(new Je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Pl(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(Te(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let s=0;const o=[];return Pl(e).ee(((l,h)=>{const d=Wc(h);d.sequenceNumber<=t&&i.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>K.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Pl(e).ee(((i,s)=>{const o=Wc(s);t(o)}))}lr(e){return $S(e).get(km).next((t=>(Te(t!==null,2888),t)))}hr(e,t){return $S(e).put(km,t)}Pr(e,t){return Pl(e).put(f2(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Do(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Pl(e).ee({range:s,index:hR},((l,h,d)=>{const f=Wc(h);Yh(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,i){const s=[],o=Ws(e);return t.forEach((l=>{const h=Sn(l.path);s.push(o.put({targetId:i,path:h})),s.push(this.referenceDelegate.addReference(e,i,l))})),K.waitFor(s)}removeMatchingKeys(e,t,i){const s=Ws(e);return K.forEach(t,(o=>{const l=Sn(o.path);return K.waitFor([s.delete([i,l]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,t){const i=Ws(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ws(e);let o=Ue();return s.ee({range:i,X:!0},((l,h,d)=>{const f=fr(l[1]),g=new me(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const i=Sn(t.path),s=IDBKeyRange.bound([i],[eR(i)],!1,!0);let o=0;return Ws(e).ee({index:l_,X:!0,range:s},(([l,h],d,f)=>{l!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Pl(e).get(t).next((i=>i?Wc(i):null))}}function Pl(n){return nn(n,su)}function $S(n){return nn(n,_o)}function Ws(n){return nn(n,au)}const KS="LruGarbageCollector",T2=1048576;function QS([n,e],[t,i]){const s=Ve(n,t);return s===0?Ve(e,i):s}class o6{constructor(e){this.Ir=e,this.buffer=new ot(QS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();QS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class E2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(KS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ta(t)?ue(KS,"Ignoring IndexedDB error during garbage collection: ",t):await ba(t)}await this.Vr(3e5)}))}}class l6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Un.ce);const i=new o6(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(GS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,o,l,h,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(i=v,h=Date.now(),this.removeTargets(e,i,t)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Ll()<=$e.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function w2(n,e){return new l6(n,e)}class u6{constructor(e,t){this.db=e,this.garbageCollector=w2(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,s)=>t(s)))}addReference(e,t,i){return Hf(e,i)}removeReference(e,t,i){return Hf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Hf(e,t)}br(e,t){return(function(s,o){let l=!1;return b2(s).te((h=>_2(s,h,o).next((d=>(d&&(l=!0),K.resolve(!d)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((l,h)=>{if(h<=t){const d=this.br(e,l).next((f=>{if(!f)return o++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Se.min()),Ws(e).delete((function(v){return[0,Sn(v.path)]})(l)))))}));s.push(d)}})).next((()=>K.waitFor(s))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Hf(e,t)}Sr(e,t){const i=Ws(e);let s,o=Un.ce;return i.ee({index:l_},(([l,h],{path:d,sequenceNumber:f})=>{l===0?(o!==Un.ce&&t(new me(fr(s)),o),o=f,s=d):o=Un.ce})).next((()=>{o!==Un.ce&&t(new me(fr(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hf(n,e){return Ws(n).put((function(i,s){return{targetId:0,path:Sn(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class S2{constructor(){this.changes=new ls((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class c6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return no(e).put(i)}removeEntry(e,t,i){return no(e).delete((function(o,l){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],zm(l),h[h.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Dt.newInvalidDocument(t);return no(e).ee({index:sm,range:IDBKeyRange.only(Gc(t))},((s,o)=>{i=this.Cr(t,o)})).next((()=>i))}vr(e,t){let i={size:0,document:Dt.newInvalidDocument(t)};return no(e).ee({index:sm,range:IDBKeyRange.only(Gc(t))},((s,o)=>{i={document:this.Cr(t,o),size:Bm(o)}})).next((()=>i))}getEntries(e,t){let i=ei();return this.Fr(e,t,((s,o)=>{const l=this.Cr(s,o);i=i.insert(s,l)})).next((()=>i))}Mr(e,t){let i=ei(),s=new pt(me.comparator);return this.Fr(e,t,((o,l)=>{const h=this.Cr(o,l);i=i.insert(o,h),s=s.insert(o,Bm(l))})).next((()=>({documents:i,Or:s})))}Fr(e,t,i){if(t.isEmpty())return K.resolve();let s=new ot(WS);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Gc(s.first()),Gc(s.last())),l=s.getIterator();let h=l.getNext();return no(e).ee({index:sm,range:o},((d,f,g)=>{const v=me.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;h&&WS(h,v)<0;)i(h,null),h=l.getNext();h&&h.isEqual(v)&&(i(h,f),h=l.hasNext()?l.getNext():null),h?g.j(Gc(h)):g.done()})).next((()=>{for(;h;)i(h,null),h=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,o){const l=t.path,h=[l.popLast().toArray(),l.lastSegment(),zm(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return no(e).J(IDBKeyRange.bound(h,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=ei();for(const v of f){const _=this.Cr(me.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);_.isFoundDocument()&&(Xh(t,_)||s.has(_.key))&&(g=g.insert(_.key,_))}return g}))}getAllFromCollectionGroup(e,t,i,s){let o=ei();const l=XS(t,i),h=XS(t,ni.max());return no(e).ee({index:cR,range:IDBKeyRange.bound(l,h,!0)},((d,f,g)=>{const v=this.Cr(me.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new h6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return YS(e).get(W0).next((t=>(Te(!!t,20021),t)))}Dr(e,t){return YS(e).put(W0,t)}Cr(e,t){if(t){const i=X5(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Se.min())))return i}return Dt.newInvalidDocument(e)}}function x2(n){return new c6(n)}class h6 extends S2{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ls((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new ot(((o,l)=>Ve(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const h=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,h.readTime)),l.isValidDocument()){const d=kS(this.Nr.serializer,l);s=s.add(o.path.popLast());const f=Bm(d);i+=f-h.size,t.push(this.Nr.addEntry(e,o,d))}else if(i-=h.size,this.trackRemovals){const d=kS(this.Nr.serializer,l.convertToNoDocument(Se.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,i)),K.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:s})=>(s.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:i.get(o).readTime})})),i)))}}function YS(n){return nn(n,wh)}function no(n){return nn(n,Nm)}function Gc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XS(n,e){const t=e.documentKey.path.toArray();return[n,zm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WS(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(s=Ve(t[o],i[o]),s)return s;return s=Ve(t.length,i.length),s||(s=Ve(t[t.length-2],i[i.length-2]),s||Ve(t[t.length-1],i[i.length-1]))}class d6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class A2{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&lh(i.mutation,s,Bn.empty(),Je.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ue()){const s=mr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((o=>{let l=Yc();return o.forEach(((h,d)=>{l=l.insert(h,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=mr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ue())))}populateOverlays(e,t,i){const s=[];return i.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,i,s){let o=ei();const l=oh(),h=(function(){return oh()})();return t.forEach(((d,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof us)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),lh(g.mutation,f,g.mutation.getFieldMask(),Je.now())):l.set(f.key,Bn.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>l.set(f,g))),t.forEach(((f,g)=>h.set(f,new d6(g,l.get(f)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=oh();let s=new pt(((l,h)=>l-h)),o=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=i.get(d)||Bn.empty();g=h.applyToLocalView(f,g),i.set(d,g);const v=(s.get(h.batchId)||Ue()).add(d);s=s.insert(h.batchId,v)}))})).next((()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),f=d.key,g=d.value,v=qR();g.forEach((_=>{if(!o.has(_)){const S=YR(t.get(_),i.get(_));S!==null&&v.set(_,S),o=o.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return K.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(l){return me.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):LR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):K.resolve(mr());let h=iu,d=o;return l.next((f=>K.forEach(f,((g,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(g)?K.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{d=d.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ue()))).next((g=>({batchId:h,changes:FR(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((i=>{let s=Yc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const o=t.collectionGroup;let l=Yc();return this.indexManager.getCollectionParents(e,o).next((h=>K.forEach(h,(d=>{const f=(function(v,_){return new Au(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((g=>{g.forEach(((v,_)=>{l=l.insert(v,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s)))).next((l=>{o.forEach(((d,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,Dt.newInvalidDocument(g)))}));let h=Yc();return l.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&lh(g.mutation,f,Bn.empty(),Je.now()),Xh(t,f)&&(h=h.insert(d,f))})),h}))}}class f6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:m2(s.bundledQuery),readTime:Nn(s.readTime)}})(t)),K.resolve()}}class m6{constructor(){this.overlays=new pt(me.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=mr();return K.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,o)=>{this.St(e,t,o)})),K.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const s=mr(),o=t.length+1,l=new me(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return K.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new pt(((f,g)=>f-g));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=mr(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const h=mr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>h.set(f,g))),!(h.size()>=s)););return K.resolve(h)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new b_(t,i));let o=this.qr.get(t);o===void 0&&(o=Ue(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}class p6{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}class x_{constructor(){this.Qr=new ot(on.$r),this.Ur=new ot(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new on(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new on(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new me(new nt([])),i=new on(t,e),s=new on(t,e+1),o=[];return this.Ur.forEachInRange([i,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new me(new nt([])),i=new on(t,e),s=new on(t,e+1);let o=Ue();return this.Ur.forEachInRange([i,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new on(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return me.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||me.comparator(e.key,t.key)}}class g6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ot(on.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new v_(o,t,i,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new on(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(l)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),o=s<0?0:s;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?vo:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new on(t,0),s=new on(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(l=>{const h=this.Xr(l.Yr);o.push(h)})),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(Ve);return t.forEach((s=>{const o=new on(s,0),l=new on(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(h=>{i=i.add(h.Yr)}))})),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let o=i;me.isDocumentKey(o)||(o=o.child(""));const l=new on(new me(o),0);let h=new ot(Ve);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(h=h.add(d.Yr)),!0)}),l),K.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Te(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(t.mutations,(s=>{const o=new on(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new on(t,0),s=this.Zr.firstAfterOrEqual(i);return K.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class y6{constructor(e){this.ri=e,this.docs=(function(){return new pt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Dt.newInvalidDocument(t))}getEntries(e,t){let i=ei();return t.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Dt.newInvalidDocument(s))})),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=ei();const l=t.path,h=new me(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||a_(rR(g),i)<=0||(s.has(g.key)||Xh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,t,i,s){ye(9500)}ii(e,t){return K.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new v6(this)}getSize(e){return K.resolve(this.size)}}class v6 extends S2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class _6{constructor(e){this.persistence=e,this.si=new ls((t=>Do(t)),Yh),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new x_,this.targetCount=0,this.ai=Vo.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let s=0;const o=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),K.waitFor(o).next((()=>s))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),K.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}class A_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Un(0),this.li=!1,this.li=!0,this.hi=new p6,this.referenceDelegate=e(this),this.Pi=new _6(this),this.indexManager=new r6,this.remoteDocumentCache=(function(s){return new y6(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new d2(t),this.Ii=new f6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new m6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new g6(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const s=new b6(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return K.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class b6 extends aR{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Ri=new x_,this.Vi=null}static mi(e){return new Ap(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(i=>{const s=me.fromPath(i);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Fm{constructor(e,t){this.persistence=e,this.pi=new ls((i=>Sn(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=w2(this,t)}static mi(e,t){return new Fm(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?K.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((h=>{h||(i++,o.removeEntry(l,Se.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=om(e.data.value)),t}br(e,t,i){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return K.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class T6{constructor(e){this.serializer=e}k(e,t,i,s){const o=new dp("createOrUpgrade",t);i<1&&s>=1&&((function(d){d.createObjectStore(Qh)})(e),(function(d){d.createObjectStore(Eh,{keyPath:P3}),d.createObjectStore(Li,{keyPath:lS,autoIncrement:!0}).createIndex(po,uS,{unique:!0}),d.createObjectStore(ru)})(e),ZS(e),(function(d){d.createObjectStore(oo)})(e));let l=K.resolve();return i<3&&s>=3&&(i!==0&&((function(d){d.deleteObjectStore(au),d.deleteObjectStore(su),d.deleteObjectStore(_o)})(e),ZS(e)),l=l.next((()=>(function(d){const f=d.store(_o),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return f.put(km,g)})(o)))),i<4&&s>=4&&(i!==0&&(l=l.next((()=>(function(d,f){return f.store(Li).J().next((v=>{d.deleteObjectStore(Li),d.createObjectStore(Li,{keyPath:lS,autoIncrement:!0}).createIndex(po,uS,{unique:!0});const _=f.store(Li),S=v.map((C=>_.put(C)));return K.waitFor(S)}))})(e,o)))),l=l.next((()=>{(function(d){d.createObjectStore(ou,{keyPath:H3})})(e)}))),i<5&&s>=5&&(l=l.next((()=>this.yi(o)))),i<6&&s>=6&&(l=l.next((()=>((function(d){d.createObjectStore(wh)})(e),this.wi(o))))),i<7&&s>=7&&(l=l.next((()=>this.Si(o)))),i<8&&s>=8&&(l=l.next((()=>this.bi(e,o)))),i<9&&s>=9&&(l=l.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(l=l.next((()=>this.Di(o)))),i<11&&s>=11&&(l=l.next((()=>{(function(d){d.createObjectStore(mp,{keyPath:G3})})(e),(function(d){d.createObjectStore(pp,{keyPath:$3})})(e)}))),i<12&&s>=12&&(l=l.next((()=>{(function(d){const f=d.createObjectStore(gp,{keyPath:J3});f.createIndex(J0,e5,{unique:!1}),f.createIndex(mR,t5,{unique:!1})})(e)}))),i<13&&s>=13&&(l=l.next((()=>(function(d){const f=d.createObjectStore(Nm,{keyPath:L3});f.createIndex(sm,j3),f.createIndex(cR,z3)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(oo)))),i<14&&s>=14&&(l=l.next((()=>this.Fi(e,o)))),i<15&&s>=15&&(l=l.next((()=>(function(d){d.createObjectStore(u_,{keyPath:K3,autoIncrement:!0}).createIndex(Z0,Q3,{unique:!1}),d.createObjectStore(ih,{keyPath:Y3}).createIndex(dR,X3,{unique:!1}),d.createObjectStore(rh,{keyPath:W3}).createIndex(fR,Z3,{unique:!1})})(e)))),i<16&&s>=16&&(l=l.next((()=>{t.objectStore(ih).clear()})).next((()=>{t.objectStore(rh).clear()}))),i<17&&s>=17&&(l=l.next((()=>{(function(d){d.createObjectStore(c_,{keyPath:n5})})(e)}))),i<18&&s>=18&&UI()&&(l=l.next((()=>{t.objectStore(ih).clear()})).next((()=>{t.objectStore(rh).clear()}))),l}wi(e){let t=0;return e.store(oo).ee(((i,s)=>{t+=Bm(s)})).next((()=>{const i={byteSize:t};return e.store(wh).put(W0,i)}))}yi(e){const t=e.store(Eh),i=e.store(Li);return t.J().next((s=>K.forEach(s,(o=>{const l=IDBKeyRange.bound([o.userId,vo],[o.userId,o.lastAcknowledgedBatchId]);return i.J(po,l).next((h=>K.forEach(h,(d=>{Te(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=ho(this.serializer,d);return v2(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(au),i=e.store(oo);return e.store(_o).get(km).next((s=>{const o=[];return i.ee(((l,h)=>{const d=new nt(l),f=(function(v){return[0,Sn(v)]})(d);o.push(t.get(f).next((g=>g?K.resolve():(v=>t.put({targetId:0,path:Sn(v),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>K.waitFor(o)))}))}bi(e,t){e.createObjectStore(Sh,{keyPath:q3});const i=t.store(Sh),s=new S_,o=l=>{if(s.add(l)){const h=l.lastSegment(),d=l.popLast();return i.put({collectionId:h,parent:Sn(d)})}};return t.store(oo).ee({X:!0},((l,h)=>{const d=new nt(l);return o(d.popLast())})).next((()=>t.store(ru).ee({X:!0},(([l,h,d],f)=>{const g=fr(h);return o(g.popLast())}))))}Di(e){const t=e.store(su);return t.ee(((i,s)=>{const o=Wc(s),l=f2(this.serializer,o);return t.put(l)}))}Ci(e,t){const i=t.store(oo),s=[];return i.ee(((o,l)=>{const h=t.store(Nm),d=(function(v){return v.document?new me(nt.fromString(v.document.name).popFirst(5)):v.noDocument?me.fromSegments(v.noDocument.path):v.unknownDocument?me.fromSegments(v.unknownDocument.path):ye(36783)})(l).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(h.put(f))})).next((()=>K.waitFor(s)))}Fi(e,t){const i=t.store(Li),s=x2(this.serializer),o=new A_(Ap.mi,this.serializer.yt);return i.J().next((l=>{const h=new Map;return l.forEach((d=>{let f=h.get(d.userId)??Ue();ho(this.serializer,d).keys().forEach((g=>f=f.add(g))),h.set(d.userId,f)})),K.forEach(h,((d,f)=>{const g=new _n(f),v=Sp.wt(this.serializer,g),_=o.getIndexManager(g),S=xp.wt(g,this.serializer,_,o.referenceDelegate);return new A2(s,S,v,_).recalculateAndSaveOverlaysForDocumentKeys(new ev(t,Un.ce),d).next()}))}))}}function ZS(n){n.createObjectStore(au,{keyPath:B3}).createIndex(l_,F3,{unique:!0}),n.createObjectStore(su,{keyPath:"targetId"}).createIndex(hR,U3,{unique:!0}),n.createObjectStore(_o)}const $s="IndexedDbPersistence",l0=18e5,u0=5e3,c0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",E6="main";class I_{constructor(e,t,i,s,o,l,h,d,f,g,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=o,this.window=l,this.document=h,this.xi=f,this.Oi=g,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!I_.v())throw new he(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new u6(this,s),this.$i=t+E6,this.serializer=new d2(d),this.Ui=new la(this.$i,this.Ni,new T6(this.serializer)),this.hi=new Z5,this.Pi=new a6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=x2(this.serializer),this.Ii=new W5,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Ot($s,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(ie.FAILED_PRECONDITION,c0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Un(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Gf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ta(e))return ue($s,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue($s,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return $c(e).get(Dl).next((t=>K.resolve(this.es(t))))}ts(e){return Gf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,l0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=nn(t,ou);return i.J().next((s=>{const o=this.ss(s,l0),l=s.filter((h=>o.indexOf(h)===-1));return K.forEach(l,(h=>i.delete(h.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?K.resolve(!0):$c(e).get(Dl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,u0)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new he(ie.FAILED_PRECONDITION,c0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gf(e).J().next((i=>this.ss(i,u0).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||l&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ue($s,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Qh,ou],(e=>{const t=new ev(e,Un.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Gf(e).J().next((t=>this.ss(t,l0).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return xp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new s6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Sp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue($s,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?s5:d===17?vR:d===16?r5:d===15?h_:d===14?yR:d===13?gR:d===12?i5:d===11?pR:void ye(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,s,o,(h=>(l=new ev(h,this.ci?this.ci.next():Un.ce),t==="readwrite-primary"?this.Hi(l).next((d=>!!d||this.Yi(l))).next((d=>{if(!d)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new he(ie.FAILED_PRECONDITION,sR);return i(l)})).next((d=>this.Xi(l).next((()=>d)))):this.Is(l).next((()=>i(l)))))).then((h=>(l.raiseOnCommittedEvent(),h)))}Is(e){return $c(e).get(Dl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,u0)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(ie.FAILED_PRECONDITION,c0)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $c(e).put(Dl,t)}static v(){return la.v()}Zi(e){const t=$c(e);return t.get(Dl).next((i=>this.es(i)?(ue($s,"Releasing primary lease."),t.delete(Dl)):K.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Ot(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;zI()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ue($s,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ot($s,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $c(n){return nn(n,Qh)}function Gf(n){return nn(n,ou)}function I2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class R_{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=Ue(),s=Ue();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new R_(e,t.fromCache,i,s)}}class w6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class R2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return zI()?8:oR(tn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new w6;return this.Ss(e,t,l).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>o.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Ll()<=$e.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Ll()<=$e.DEBUG&&ue("QueryEngine","Query:",jl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Ll()<=$e.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):K.resolve())}ys(e,t){if(ES(t))return K.resolve(null);let i=ti(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Om(t,null,"F"),i=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=Ue(...o);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.Ds(t,h);return this.Cs(t,f,l,d.readTime)?this.ys(e,Om(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,i,s){return ES(t)||s.isEqual(Se.min())?K.resolve(null):this.ps.getDocuments(e,i).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,i,s)?K.resolve(null):(Ll()<=$e.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jl(t)),this.vs(e,l,t,iR(s,iu)).next((h=>h)))}))}Ds(e,t){let i=new ot(UR(e));return t.forEach(((s,o)=>{Xh(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,i){return Ll()<=$e.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",jl(t)),this.ps.getDocumentsMatchingQuery(e,t,ni.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}const C_="LocalStore",S6=3e8;class x6{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new pt(Ve),this.xs=new ls((o=>Do(o)),Yh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function C2(n,e,t,i){return new x6(n,e,t,i)}async function D2(n,e){const t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],h=[];let d=Ue();for(const f of s){l.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){h.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(i,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:h})))}))}))}function A6(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,d,f,g){const v=f.batch,_=v.keys();let S=K.resolve();return _.forEach((C=>{S=S.next((()=>g.getEntry(d,C))).next((N=>{const k=f.docVersions.get(C);Te(k!==null,48541),N.version.compareTo(k)<0&&(v.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),g.addEntry(N)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(d,v)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let d=Ue();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(d=d.add(h.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function N2(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function I6(n,e){const t=_e(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((g,v)=>{const _=s.get(v);if(!_)return;h.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,v))));let S=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),s=s.insert(v,S),(function(N,k,U){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=S6?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(_,S,g)&&h.push(t.Pi.updateTargetData(o,S))}));let d=ei(),f=Ue();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),h.push(R6(o,l,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!i.isEqual(Se.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));h.push(g)}return K.waitFor(h).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function R6(n,e,t){let i=Ue(),s=Ue();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=ei();return t.forEach(((h,d)=>{const f=o.get(h);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Se.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ue(C_,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function C6(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=vo),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function qm(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((o=>o?(s=o,K.resolve(s)):t.Pi.allocateTargetId(i).next((l=>(s=new Qr(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function pu(n,e,t){const i=_e(n),s=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Ta(l))throw l;ue(C_,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function mv(n,e,t){const i=_e(n);let s=Se.min(),o=Ue();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,g){const v=_e(d),_=v.xs.get(g);return _!==void 0?K.resolve(v.Ms.get(_)):v.Pi.getTargetData(f,g)})(i,l,ti(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next((d=>{o=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?s:Se.min(),t?o:Ue()))).next((h=>(M2(i,zR(e),h),{documents:h,Qs:o})))))}function k2(n,e){const t=_e(n),i=_e(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,e).next((l=>l?l.target:null))))}function V2(n,e){const t=_e(n),i=t.Os.get(e)||Se.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,iR(i,iu),Number.MAX_SAFE_INTEGER))).then((s=>(M2(t,e,s),s)))}function M2(n,e,t){let i=n.Os.get(e)||Se.min();t.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}const P2="firestore_clients";function JS(n,e){return`${P2}_${n}_${e}`}const O2="firestore_mutations";function ex(n,e,t){let i=`${O2}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const L2="firestore_targets";function h0(n,e){return`${L2}_${n}_${e}`}const cr="SharedClientState";class Hm{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Ws(e,t,i){const s=JSON.parse(i);let o,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(o=new he(s.error.code,s.error.message))),l?new Hm(e,t,s.state,o):(Ot(cr,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new he(i.error.code,i.error.message))),o?new uh(e,i.state,s):(Ot(cr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=g_();for(let l=0;s&&l<i.activeTargetIds.length;++l)s=lR(i.activeTargetIds[l]),o=o.add(i.activeTargetIds[l]);return s?new Gm(e,o):(Ot(cr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class D_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new D_(t.clientId,t.onlineState):(Ot(cr,`Failed to parse online state: ${e}`),null)}}class pv{constructor(){this.activeTargetIds=g_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class d0{constructor(e,t,i,s,o){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new pt(Ve),this.started=!1,this.Xs=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=JS(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new pv),this.ro=new RegExp(`^${P2}_${l}_([^_]*)$`),this.io=new RegExp(`^${O2}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${L2}_${l}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(JS(this.persistenceKey,i));if(s){const o=Gm.Ws(i,s);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(h0(this.persistenceKey,e));if(s){const o=uh.Ws(e,s);o&&(i=o.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(h0(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue(cr,"READ",e,t),t}setItem(e,t){ue(cr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue(cr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ue(cr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(o){let l=Un.ce;if(o!=null)try{const h=JSON.parse(o);Te(typeof h=="number",30636,{So:o}),l=h}catch(h){Ot(cr,"Failed to read sequence number from WebStorage",h)}return l})(t.newValue);i!==Un.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const s=new Hm(this.currentUser,e,t,i),o=ex(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Gs())}Po(e){const t=ex(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const s=h0(this.persistenceKey,e),o=new uh(e,t,i);this.setItem(s,o.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return Gm.Ws(i,t)}fo(e,t){const i=this.io.exec(e),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Hm.Ws(new _n(o),s,t)}yo(e,t){const i=this.so.exec(e),s=Number(i[1]);return uh.Ws(s,t)}uo(e){return D_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ue(cr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),o=this.lo(i),l=[],h=[];return o.forEach((d=>{s.has(d)||l.push(d)})),s.forEach((d=>{o.has(d)||h.push(d)})),this.syncEngine.Fo(l,h).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=g_();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class j2{constructor(){this.Mo=new pv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class D6{Oo(e){}shutdown(){}}const tx="ConnectivityMonitor";class nx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(tx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(tx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let $f=null;function gv(){return $f===null?$f=(function(){return 268435456+Math.round(2147483648*Math.random())})():$f++,"0x"+$f.toString(16)}const f0="RestConnection",N6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Vm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,o){const l=gv(),h=this.zo(e,t.toUriEncodedString());ue(f0,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(h),g=wu(f);return this.Jo(e,h,d,i,g).then((v=>(ue(f0,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw _h(f0,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",i),v}))}Ho(e,t,i,s,o,l){return this.Go(e,t,i,s,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const i=N6[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class V6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const vn="WebChannelConnection";class M6 extends k6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,o){const l=gv();return new Promise(((h,d)=>{const f=new QI;f.setWithCredentials(!0),f.listenOnce(YI.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case nm.NO_ERROR:const v=f.getResponseJson();ue(vn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case nm.TIMEOUT:ue(vn,`RPC '${e}' ${l} timed out`),d(new he(ie.DEADLINE_EXCEEDED,"Request time out"));break;case nm.HTTP_ERROR:const _=f.getStatus();if(ue(vn,`RPC '${e}' ${l} failed with status:`,_,"response text:",f.getResponseText()),_>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const C=S?.error;if(C&&C.status&&C.message){const N=(function(U){const q=U.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(q)>=0?q:ie.UNKNOWN})(C.status);d(new he(N,C.message))}else d(new he(ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new he(ie.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ue(vn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);ue(vn,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",g,i,15)}))}T_(e,t,i){const s=gv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ZI(),h=WI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=o.join("");ue(vn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=l.createWebChannel(g,d);this.I_(v);let _=!1,S=!1;const C=new V6({Yo:k=>{S?ue(vn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(_||(ue(vn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),ue(vn,`RPC '${e}' stream ${s} sending:`,k),v.send(k))},Zo:()=>v.close()}),N=(k,U,q)=>{k.listen(U,(O=>{try{q(O)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return N(v,Qc.EventType.OPEN,(()=>{S||(ue(vn,`RPC '${e}' stream ${s} transport opened.`),C.o_())})),N(v,Qc.EventType.CLOSE,(()=>{S||(S=!0,ue(vn,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(v))})),N(v,Qc.EventType.ERROR,(k=>{S||(S=!0,_h(vn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),C.a_(new he(ie.UNAVAILABLE,"The operation could not be completed")))})),N(v,Qc.EventType.MESSAGE,(k=>{if(!S){const U=k.data[0];Te(!!U,16349);const q=U,O=q?.error||q[0]?.error;if(O){ue(vn,`RPC '${e}' stream ${s} received error:`,O);const Z=O.status;let te=(function(A){const V=Qt[A];if(V!==void 0)return ZR(V)})(Z),H=O.message;te===void 0&&(te=ie.INTERNAL,H="Unknown error status: "+Z+" with message "+O.message),S=!0,C.a_(new he(te,H)),v.close()}else ue(vn,`RPC '${e}' stream ${s} received:`,U),C.u_(U)}})),N(h,XI.STAT_EVENT,(k=>{k.stat===Q0.PROXY?ue(vn,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Q0.NOPROXY&&ue(vn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function z2(){return typeof window<"u"?window:null}function dm(){return typeof document<"u"?document:null}function Ip(n){return new U5(n,!0)}class U2{constructor(e,t,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ix="PersistentStream";class B2{constructor(e,t,i,s,o,l,h,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new U2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ot(t.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new he(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(ix,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(ix,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class P6 extends B2{constructor(e,t,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=q5(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Se.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Se.min():l.readTime?Nn(l.readTime):Se.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=uv(this.serializer),t.addTarget=(function(o,l){let h;const d=l.target;if(h=Mm(d)?{documents:a2(o,d)}:{query:o2(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=t2(o,l.resumeToken);const f=ov(o,l.expectedCount);f!==null&&(h.expectedCount=f)}else if(l.snapshotVersion.compareTo(Se.min())>0){h.readTime=mu(o,l.snapshotVersion.toTimestamp());const f=ov(o,l.expectedCount);f!==null&&(h.expectedCount=f)}return h})(this.serializer,e);const i=G5(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=uv(this.serializer),t.removeTarget=e,this.q_(t)}}class O6 extends B2{constructor(e,t,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=H5(e.writeResults,e.commitTime),i=Nn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=uv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>jm(this.serializer,i)))};this.q_(t)}}class L6{}class j6 extends L6{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new he(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,lv(t,i),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(ie.UNKNOWN,o.toString())}))}Ho(e,t,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,lv(t,i),s,l,h,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ie.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class z6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ot(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Mo="RemoteStore";class U6{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{zo(this)&&(ue(Mo,"Restarting streams for network reachability change."),await(async function(d){const f=_e(d);f.Ea.add(4),await Jh(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Rp(f)})(this))}))})),this.Ra=new z6(i,s)}}async function Rp(n){if(zo(n))for(const e of n.da)await e(!0)}async function Jh(n){for(const e of n.da)await e(!1)}function Cp(n,e){const t=_e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),V_(t)?k_(t):Cu(t).O_()&&N_(t,e))}function gu(n,e){const t=_e(n),i=Cu(t);t.Ia.delete(e),i.O_()&&F2(t,e),t.Ia.size===0&&(i.O_()?i.L_():zo(t)&&t.Ra.set("Unknown"))}function N_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cu(n).Y_(e)}function F2(n,e){n.Va.Ue(e),Cu(n).Z_(e)}function k_(n){n.Va=new O5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Cu(n).start(),n.Ra.ua()}function V_(n){return zo(n)&&!Cu(n).x_()&&n.Ia.size>0}function zo(n){return _e(n).Ea.size===0}function q2(n){n.Va=void 0}async function B6(n){n.Ra.set("Online")}async function F6(n){n.Ia.forEach(((e,t)=>{N_(n,e)}))}async function q6(n,e){q2(n),V_(n)?(n.Ra.ha(e),k_(n)):n.Ra.set("Unknown")}async function H6(n,e,t){if(n.Ra.set("Online"),e instanceof e2&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(i){ue(Mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await $m(n,i)}else if(e instanceof cm?n.Va.Ze(e):e instanceof JR?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const i=await N2(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,l))}})),h.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(jt.EMPTY_BYTE_STRING,g.snapshotVersion)),F2(o,d);const v=new Qr(g.target,d,f,g.sequenceNumber);N_(o,v)})),o.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){ue(Mo,"Failed to raise snapshot:",i),await $m(n,i)}}async function $m(n,e,t){if(!Ta(e))throw e;n.Ea.add(1),await Jh(n),n.Ra.set("Offline"),t||(t=()=>N2(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(Mo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Rp(n)}))}function H2(n,e){return e().catch((t=>$m(n,t,e)))}async function Ru(n){const e=_e(n),t=fa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vo;for(;G6(e);)try{const s=await C6(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,$6(e,s)}catch(s){await $m(e,s)}G2(e)&&$2(e)}function G6(n){return zo(n)&&n.Ta.length<10}function $6(n,e){n.Ta.push(e);const t=fa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function G2(n){return zo(n)&&!fa(n).x_()&&n.Ta.length>0}function $2(n){fa(n).start()}async function K6(n){fa(n).ra()}async function Q6(n){const e=fa(n);for(const t of n.Ta)e.ea(t.mutations)}async function Y6(n,e,t){const i=n.Ta.shift(),s=__.from(i,e,t);await H2(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Ru(n)}async function X6(n,e){e&&fa(n).X_&&await(async function(i,s){if((function(l){return V5(l)&&l!==ie.ABORTED})(s.code)){const o=i.Ta.shift();fa(i).B_(),await H2(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Ru(i)}})(n,e),G2(n)&&$2(n)}async function rx(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),ue(Mo,"RemoteStore received new credentials");const i=zo(t);t.Ea.add(3),await Jh(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Rp(t)}async function yv(n,e){const t=_e(n);e?(t.Ea.delete(2),await Rp(t)):e||(t.Ea.add(2),await Jh(t),t.Ra.set("Unknown"))}function Cu(n){return n.ma||(n.ma=(function(t,i,s){const o=_e(t);return o.sa(),new P6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:B6.bind(null,n),t_:F6.bind(null,n),r_:q6.bind(null,n),H_:H6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),V_(n)?k_(n):n.Ra.set("Unknown")):(await n.ma.stop(),q2(n))}))),n.ma}function fa(n){return n.fa||(n.fa=(function(t,i,s){const o=_e(t);return o.sa(),new O6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:K6.bind(null,n),r_:X6.bind(null,n),ta:Q6.bind(null,n),na:Y6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ru(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(Mo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class M_{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){const l=Date.now()+i,h=new M_(e,t,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function P_(n,e){if(Ot("AsyncQueue",`${e}: ${n}`),Ta(n))return new he(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||me.comparator(t.key,i.key):(t,i)=>me.comparator(t.key,i.key),this.keyedMap=Yc(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class sx{constructor(){this.ga=new pt(me.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class yu{constructor(e,t,i,s,o,l,h,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,s,o){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new yu(e,t,Yl.emptySet(t),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class W6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Z6{constructor(){this.queries=ax(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=_e(t),o=s.queries;s.queries=ax(),o.forEach(((l,h)=>{for(const d of h.Sa)d.onError(i)}))})(this,new he(ie.ABORTED,"Firestore shutting down"))}}function ax(){return new ls((n=>jR(n)),bp)}async function K2(n,e){const t=_e(n);let i=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new W6,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const h=P_(l,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&O_(t)}async function Q2(n,e){const t=_e(n),i=e.query;let s=3;const o=t.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function J6(n,e){const t=_e(n);let i=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(i=!0);l.wa=s}}i&&O_(t)}function e9(n,e,t){const i=_e(n),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);i.queries.delete(e)}function O_(n){n.Ca.forEach((e=>{e.next()}))}var vv,ox;(ox=vv||(vv={})).Ma="default",ox.Cache="cache";class Y2{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new yu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vv.Cache}}class X2{constructor(e){this.key=e}}class W2{constructor(e){this.key=e}}class t9{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=UR(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new sx,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const _=s.get(g),S=Xh(this.query,v)?v:null,C=!!_&&this.mutatedKeys.has(_.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let k=!1;_&&S?_.data.isEqual(S.data)?C!==N&&(i.track({type:3,doc:S}),k=!0):this.su(_,S)||(i.track({type:2,doc:S}),k=!0,(d&&this.eu(S,d)>0||f&&this.eu(S,f)<0)&&(h=!0)):!_&&S?(i.track({type:0,doc:S}),k=!0):_&&!S&&(i.track({type:1,doc:_}),k=!0,(d||f)&&(h=!0)),k&&(S?(l=l.add(S),o=N?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:l,iu:i,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(S,C){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:k})}};return N(S)-N(C)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(i),s=s??!1;const h=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new yu(this.query,e.tu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new W2(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new X2(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Du="SyncEngine";class n9{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class i9{constructor(e){this.key=e,this.hu=!1}}class r9{constructor(e,t,i,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ls((h=>jR(h)),bp),this.Iu=new Map,this.Eu=new Set,this.du=new pt(me.comparator),this.Au=new Map,this.Ru=new x_,this.Vu={},this.mu=new Map,this.fu=Vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function s9(n,e,t=!0){const i=Dp(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await Z2(i,e,t,!0),s}async function a9(n,e){const t=Dp(n);await Z2(t,e,!0,!1)}async function Z2(n,e,t,i){const s=await qm(n.localStore,ti(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await L_(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&Cp(n.remoteStore,s),h}async function L_(n,e,t,i,s){n.pu=(v,_,S)=>(async function(N,k,U,q){let O=k.view.ru(U);O.Cs&&(O=await mv(N.localStore,k.query,!1).then((({documents:I})=>k.view.ru(I,O))));const Z=q&&q.targetChanges.get(k.targetId),te=q&&q.targetMismatches.get(k.targetId)!=null,H=k.view.applyChanges(O,N.isPrimaryClient,Z,te);return _v(N,k.targetId,H.au),H.snapshot})(n,v,_,S);const o=await mv(n.localStore,e,!0),l=new t9(e,o.Qs),h=l.ru(o.documents),d=Zh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),f=l.applyChanges(h,n.isPrimaryClient,d);_v(n,t,f.au);const g=new n9(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function o9(n,e,t){const i=_e(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((l=>!bp(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await pu(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&gu(i.remoteStore,s.targetId),vu(i,s.targetId)})).catch(ba)):(vu(i,s.targetId),await pu(i.localStore,s.targetId,!0))}async function l9(n,e){const t=_e(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),gu(t.remoteStore,i.targetId))}async function u9(n,e,t){const i=B_(n);try{const s=await(function(l,h){const d=_e(l),f=Je.now(),g=h.reduce(((S,C)=>S.add(C.key)),Ue());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let C=ei(),N=Ue();return d.Ns.getEntries(S,g).next((k=>{C=k,C.forEach(((U,q)=>{q.isValidDocument()||(N=N.add(U))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,C))).next((k=>{v=k;const U=[];for(const q of h){const O=N5(q,v.get(q.key).overlayedDocument);O!=null&&U.push(new us(q.key,O,RR(O.value.mapValue),En.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,U,h)})).next((k=>{_=k;const U=k.applyToLocalDocumentSet(v,N);return d.documentOverlayCache.saveOverlays(S,k.batchId,U)}))})).then((()=>({batchId:_.batchId,changes:FR(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,h,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new pt(Ve)),f=f.insert(h,d),l.Vu[l.currentUser.toKey()]=f})(i,s.batchId,t),await wa(i,s.changes),await Ru(i.remoteStore)}catch(s){const o=P_(s,"Failed to persist write");t.reject(o)}}async function J2(n,e){const t=_e(n);try{const i=await I6(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Te(l.hu,14607):s.removedDocuments.size>0&&(Te(l.hu,42227),l.hu=!1))})),await wa(t,i,e)}catch(i){await ba(i)}}function lx(n,e,t){const i=_e(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(l,h){const d=_e(l);d.onlineState=h;let f=!1;d.queries.forEach(((g,v)=>{for(const _ of v.Sa)_.va(h)&&(f=!0)})),f&&O_(d)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function c9(n,e,t){const i=_e(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new pt(me.comparator);l=l.insert(o,Dt.newNoDocument(o,Se.min()));const h=Ue().add(o),d=new Wh(Se.min(),new Map,new pt(Ve),l,h);await J2(i,d),i.du=i.du.remove(o),i.Au.delete(e),U_(i)}else await pu(i.localStore,e,!1).then((()=>vu(i,e,t))).catch(ba)}async function h9(n,e){const t=_e(n),i=e.batch.batchId;try{const s=await A6(t.localStore,e);z_(t,i,null),j_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await wa(t,s)}catch(s){await ba(s)}}async function d9(n,e,t){const i=_e(n);try{const s=await(function(l,h){const d=_e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,h).next((v=>(Te(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(i.localStore,e);z_(i,e,t),j_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await wa(i,s)}catch(s){await ba(s)}}function j_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function z_(n,e,t){const i=_e(n);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function vu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||eC(n,i)}))}function eC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(gu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),U_(n))}function _v(n,e,t){for(const i of t)i instanceof X2?(n.Ru.addReference(i.key,e),f9(n,i)):i instanceof W2?(ue(Du,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||eC(n,i.key)):ye(19791,{wu:i})}function f9(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ue(Du,"New document in limbo: "+t),n.Eu.add(i),U_(n))}function U_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new me(nt.fromString(e)),i=n.fu.next();n.Au.set(i,new i9(t)),n.du=n.du.insert(t,i),Cp(n.remoteStore,new Qr(ti(_p(t.path)),i,"TargetPurposeLimboResolution",Un.ce))}}async function wa(n,e,t){const i=_e(n),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,d)=>{l.push(i.pu(d,e,t).then((f=>{if((f||t)&&i.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=R_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(l),i.Pu.H_(s),await(async function(d,f){const g=_e(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>K.forEach(f,(_=>K.forEach(_.Es,(S=>g.persistence.referenceDelegate.addReference(v,_.targetId,S))).next((()=>K.forEach(_.ds,(S=>g.persistence.referenceDelegate.removeReference(v,_.targetId,S)))))))))}catch(v){if(!Ta(v))throw v;ue(C_,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const S=g.Ms.get(_),C=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(C);g.Ms=g.Ms.insert(_,N)}}})(i.localStore,o))}async function m9(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){ue(Du,"User change. New user:",e.toKey());const i=await D2(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((h=>{h.forEach((d=>{d.reject(new he(ie.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await wa(t,i.Ls)}}function p9(n,e){const t=_e(n),i=t.Au.get(e);if(i&&i.hu)return Ue().add(i.key);{let s=Ue();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const h=t.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}async function g9(n,e){const t=_e(n),i=await mv(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&_v(t,e.targetId,s.au),s}async function y9(n,e){const t=_e(n);return V2(t.localStore,e).then((i=>wa(t,i)))}async function v9(n,e,t,i){const s=_e(n),o=await(function(h,d){const f=_e(h),g=_e(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(v=>g.er(v,d).next((_=>_?f.localDocuments.getDocuments(v,_):K.resolve(null)))))})(s.localStore,e);o!==null?(t==="pending"?await Ru(s.remoteStore):t==="acknowledged"||t==="rejected"?(z_(s,e,i||null),j_(s,e),(function(h,d){_e(_e(h).mutationQueue).ir(d)})(s.localStore,e)):ye(6720,"Unknown batchState",{Su:t}),await wa(s,o)):ue(Du,"Cannot apply mutation batch with id: "+e)}async function _9(n,e){const t=_e(n);if(Dp(t),B_(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await ux(t,i.toArray());t.gu=!0,await yv(t.remoteStore,!0);for(const o of s)Cp(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):s=s.then((()=>(vu(t,l),pu(t.localStore,l,!0)))),gu(t.remoteStore,l)})),await s,await ux(t,i),(function(l){const h=_e(l);h.Au.forEach(((d,f)=>{gu(h.remoteStore,f)})),h.Ru.Jr(),h.Au=new Map,h.du=new pt(me.comparator)})(t),t.gu=!1,await yv(t.remoteStore,!1)}}async function ux(n,e,t){const i=_e(n),s=[],o=[];for(const l of e){let h;const d=i.Iu.get(l);if(d&&d.length!==0){h=await qm(i.localStore,ti(d[0]));for(const f of d){const g=i.Tu.get(f),v=await g9(i,g);v.snapshot&&o.push(v.snapshot)}}else{const f=await k2(i.localStore,l);h=await qm(i.localStore,f),await L_(i,tC(f),l,!1,h.resumeToken)}s.push(h)}return i.Pu.H_(o),s}function tC(n){return OR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function b9(n){return(function(t){return _e(_e(t).persistence).Ts()})(_e(n).localStore)}async function T9(n,e,t,i){const s=_e(n);if(s.gu)return void ue(Du,"Ignoring unexpected query state notification.");const o=s.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await V2(s.localStore,zR(o[0])),h=Wh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",jt.EMPTY_BYTE_STRING);await wa(s,l,h);break}case"rejected":await pu(s.localStore,e,!0),vu(s,e,i);break;default:ye(64155,t)}}async function E9(n,e,t){const i=Dp(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){ue(Du,"Adding an already active target "+s);continue}const o=await k2(i.localStore,s),l=await qm(i.localStore,o);await L_(i,tC(o),l.targetId,!1,l.resumeToken),Cp(i.remoteStore,l)}for(const s of t)i.Iu.has(s)&&await pu(i.localStore,s,!1).then((()=>{gu(i.remoteStore,s),vu(i,s)})).catch(ba)}}function Dp(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=J2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c9.bind(null,e),e.Pu.H_=J6.bind(null,e.eventManager),e.Pu.yu=e9.bind(null,e.eventManager),e}function B_(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d9.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ip(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return C2(this.persistence,new R2,e.initialUser,this.serializer)}Cu(e){return new A_(Ap.mi,this.serializer)}Du(e){return new j2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class w9 extends kh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Te(this.persistence.referenceDelegate instanceof Fm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new E2(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new A_((i=>Fm.mi(i,t)),this.serializer)}}class nC extends kh{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await B_(this.xu.syncEngine),await Ru(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return C2(this.persistence,new R2,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new E2(i,e.asyncQueue,t)}Mu(e,t){const i=new V3(t,this.persistence);return new k3(e.asyncQueue,i)}Cu(e){const t=I2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new I_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,z2(),dm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new j2}}class S9 extends nC{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof d0&&(this.sharedClientState.syncEngine={Co:v9.bind(null,t),vo:T9.bind(null,t),Fo:E9.bind(null,t),Ts:b9.bind(null,t),Do:y9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await _9(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=z2();if(!d0.v(t))throw new he(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=I2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new d0(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Vh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=m9.bind(null,this.syncEngine),await yv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Z6})()}createDatastore(e){const t=Ip(e.databaseInfo.databaseId),i=(function(o){return new M6(o)})(e.databaseInfo);return(function(o,l,h,d){return new j6(o,l,h,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,o,l,h){return new U6(i,s,o,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>lx(this.syncEngine,t,0)),(function(){return nx.v()?new nx:new D6})())}createSyncEngine(e,t){return(function(s,o,l,h,d,f,g){const v=new r9(s,o,l,h,d,f);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=_e(t);ue(Mo,"RemoteStore shutting down."),i.Ea.add(5),await Jh(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vh.provider={build:()=>new Vh};class iC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ma="FirestoreClient";class x9{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=_n.UNAUTHENTICATED,this.clientId=s_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{ue(ma,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(ue(ma,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=P_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function m0(n,e){n.asyncQueue.verifyOperationInProgress(),ue(ma,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await D2(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function cx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await A9(n);ue(ma,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>rx(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>rx(e.remoteStore,s))),n._onlineComponents=e}async function A9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(ma,"Using user provided OfflineComponentProvider");try{await m0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ie.FAILED_PRECONDITION||s.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;_h("Error using user provided cache. Falling back to memory cache: "+t),await m0(n,new kh)}}else ue(ma,"Using default OfflineComponentProvider"),await m0(n,new w9(void 0));return n._offlineComponents}async function rC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(ma,"Using user provided OnlineComponentProvider"),await cx(n,n._uninitializedComponentsProvider._online)):(ue(ma,"Using default OnlineComponentProvider"),await cx(n,new Vh))),n._onlineComponents}function I9(n){return rC(n).then((e=>e.syncEngine))}async function bv(n){const e=await rC(n),t=e.eventManager;return t.onListen=s9.bind(null,e.syncEngine),t.onUnlisten=o9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=a9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=l9.bind(null,e.syncEngine),t}function R9(n,e,t={}){const i=new Zr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,h,d,f){const g=new iC({next:_=>{g.Nu(),l.enqueueAndForget((()=>Q2(o,v))),_.fromCache&&d.source==="server"?f.reject(new he(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new Y2(h,g,{includeMetadataChanges:!0,qa:!0});return K2(o,v)})(await bv(n),n.asyncQueue,e,t,i))),i.promise}function sC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const hx=new Map;const C9="firestore.googleapis.com",dx=!0;class fx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C9,this.ssl=dx}else this.host=e.host,this.ssl=e.ssl??dx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=y2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T2)throw new he(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class F_{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new b3;switch(i.type){case"firstParty":return new w3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=hx.get(t);i&&(ue("ComponentProvider","Removing Datastore"),hx.delete(t),i.terminate())})(this),Promise.resolve()}}class cs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class Lt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Kh(t,Lt._jsonSchema))return new Lt(e,i||null,new me(nt.fromString(t.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Xt("string",Lt._jsonSchemaVersion),referencePath:Xt("string")};class ua extends cs{constructor(e,t,i){super(e,t,_p(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new me(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function Np(n,e,...t){if(n=An(n),tR("collection","path",e),n instanceof F_){const i=nt.fromString(e,...t);return iS(i),new ua(n,null,i)}{if(!(n instanceof Lt||n instanceof ua))throw new he(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return iS(i),new ua(n.firestore,null,i)}}function bi(n,e,...t){if(n=An(n),arguments.length===1&&(e=s_.newId()),tR("doc","path",e),n instanceof F_){const i=nt.fromString(e,...t);return nS(i),new Lt(n,null,new me(i))}{if(!(n instanceof Lt||n instanceof ua))throw new he(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return nS(i),new Lt(n.firestore,n instanceof ua?n.converter:null,new me(i))}}const mx="AsyncQueue";class px{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new U2(this,"async_queue_retry"),this._c=()=>{const i=dm();i&&ue(mx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=dm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ta(e))throw e;ue(mx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ot("INTERNAL UNHANDLED ERROR: ",gx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=M_.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&ye(47125,{Pc:gx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function gx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function yx(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class pa extends F_{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new px,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new px(e),this._firestoreClient=void 0,await e}}}function D9(n,e,t){t||(t=Vm);const i=i_(n,"firestore");if(i.isInitialized(t)){const s=i.getImmediate({identifier:t}),o=i.getOptions(t);if(Ao(o,e))return s;throw new he(ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T2)throw new he(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&wu(e.host)&&LI(e.host),i.initialize({options:e,instanceIdentifier:t})}function q_(n){if(n._terminated)throw new he(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||N9(n),n._firestoreClient}function N9(n){const e=n._freezeSettings(),t=(function(s,o,l,h){return new o5(s,o,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,sC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new x9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}class vi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vi(jt.fromBase64String(e))}catch(t){throw new he(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vi(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kh(e,vi._jsonSchema))return vi.fromBase64String(e.bytes)}}vi._jsonSchemaVersion="firestore/bytes/1.0",vi._jsonSchema={type:Xt("string",vi._jsonSchemaVersion),bytes:Xt("string")};class kp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class H_{constructor(e){this._methodName=e}}class pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(Kh(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:Xt("string",pr._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};class gr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kh(e,gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new gr(e.vectorValues);throw new he(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gr._jsonSchemaVersion="firestore/vectorValue/1.0",gr._jsonSchema={type:Xt("string",gr._jsonSchemaVersion),vectorValues:Xt("object")};const k9=/^__.*__$/;class V9{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iu(e,this.data,t,this.fieldTransforms)}}class aC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:n})}}class G_{constructor(e,t,i,s,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new G_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Km(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oC(this.Ac)&&k9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class M9{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ip(e)}Cc(e,t,i,s=!1){return new G_({Ac:e,methodName:t,Dc:i,path:St.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vp(n){const e=n._freezeSettings(),t=Ip(n._databaseId);return new M9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lC(n,e,t,i,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);$_("Data must be an object, but it was:",l,i);const h=uC(i,l);let d,f;if(o.merge)d=new Bn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const _=Tv(e,v,t);if(!l.contains(_))throw new he(ie.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);hC(g,_)||g.push(_)}d=new Bn(g),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new V9(new Tn(h),d,f)}class Mp extends H_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mp}}function P9(n,e,t,i){const s=n.Cc(1,e,t);$_("Data must be an object, but it was:",s,i);const o=[],l=Tn.empty();Ea(i,((d,f)=>{const g=K_(e,d,t);f=An(f);const v=s.yc(g);if(f instanceof Mp)o.push(g);else{const _=ed(f,v);_!=null&&(o.push(g),l.set(g,_))}}));const h=new Bn(o);return new aC(l,h,s.fieldTransforms)}function O9(n,e,t,i,s,o){const l=n.Cc(1,e,t),h=[Tv(e,i,t)],d=[s];if(o.length%2!=0)throw new he(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)h.push(Tv(e,o[_])),d.push(o[_+1]);const f=[],g=Tn.empty();for(let _=h.length-1;_>=0;--_)if(!hC(f,h[_])){const S=h[_];let C=d[_];C=An(C);const N=l.yc(S);if(C instanceof Mp)f.push(S);else{const k=ed(C,N);k!=null&&(f.push(S),g.set(S,k))}}const v=new Bn(f);return new aC(g,v,l.fieldTransforms)}function L9(n,e,t,i=!1){return ed(t,n.Cc(i?4:3,e))}function ed(n,e){if(cC(n=An(n)))return $_("Unsupported field value:",e,n),uC(n,e);if(n instanceof H_)return(function(i,s){if(!oC(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let l=0;for(const h of i){let d=ed(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,s){if((i=An(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return S5(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Je.fromDate(i);return{timestampValue:mu(s.serializer,o)}}if(i instanceof Je){const o=new Je(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mu(s.serializer,o)}}if(i instanceof pr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vi)return{bytesValue:t2(s.serializer,i._byteString)};if(i instanceof Lt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:E_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof gr)return(function(l,h){return{mapValue:{fields:{[f_]:{stringValue:m_},[lu]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return y_(h.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${hp(i)}`)})(n,e)}function uC(n,e){const t={};return _R(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ea(n,((i,s)=>{const o=ed(s,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function cC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Je||n instanceof pr||n instanceof vi||n instanceof Lt||n instanceof H_||n instanceof gr)}function $_(n,e,t){if(!cC(t)||!nR(t)){const i=hp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Tv(n,e,t){if((e=An(e))instanceof kp)return e._internalPath;if(typeof e=="string")return K_(n,e);throw Km("Field path arguments must be of type string or ",n,!1,void 0,t)}const j9=new RegExp("[~\\*/\\[\\]]");function K_(n,e,t){if(e.search(j9)>=0)throw Km(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kp(...e.split("."))._internalPath}catch{throw Km(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Km(n,e,t,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new he(ie.INVALID_ARGUMENT,h+n+d)}function hC(n,e){return n.some((t=>t.isEqual(e)))}class dC{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Q_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class z9 extends dC{data(){return super.data()}}function Q_(n,e){return typeof e=="string"?K_(n,e):e instanceof kp?e._internalPath:e._delegate._internalPath}function fC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Y_{}class X_ extends Y_{}function Po(n,e,...t){let i=[];e instanceof Y_&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((d=>d instanceof Z_)).length,h=o.filter((d=>d instanceof W_)).length;if(l>1||l>0&&h>0)throw new he(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class W_ extends X_{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new W_(e,t,i)}_apply(e){const t=this._parse(e);return mC(e._query,t),new cs(e.firestore,e.converter,av(e._query,t))}_parse(e){const t=Vp(e.firestore);return(function(o,l,h,d,f,g,v){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new he(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){bx(v,g);const C=[];for(const N of v)C.push(_x(d,o,N));_={arrayValue:{values:C}}}else _=_x(d,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||bx(v,g),_=L9(h,l,v,g==="in"||g==="not-in");return Ke.create(f,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Z_ extends Y_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Z_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:at.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)mC(l,d),l=av(l,d)})(e._query,t),new cs(e.firestore,e.converter,av(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class J_ extends X_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new J_(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new he(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ch(o,l)})(e._query,this._field,this._direction);return new cs(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new Au(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Mh(n,e="asc"){const t=e,i=Q_("orderBy",n);return J_._create(i,t)}class eb extends X_{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new eb(e,t,i)}_apply(e){return new cs(e.firestore,e.converter,Om(e._query,this._limit,this._limitType))}}function vx(n){return eb._create("limit",n,"F")}function _x(n,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new he(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LR(e)&&t.indexOf("/")!==-1)throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(nt.fromString(t));if(!me.isDocumentKey(i))throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ih(n,new me(i))}if(t instanceof Lt)return Ih(n,t._key);throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hp(t)}.`)}function bx(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mC(n,e){const t=(function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class U9{convertValue(e,t="none"){switch(ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ea(e,((s,o)=>{i[s]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[lu].arrayValue?.values?.map((i=>Tt(i.doubleValue)));return new gr(t)}convertGeoPoint(e){return new pr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=yp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(xh(e));default:return null}}convertTimestamp(e){const t=ts(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=nt.fromString(e);Te(h2(i),9688,{name:e});const s=new Co(i.get(1),i.get(3)),o=new me(i.popFirst(5));return s.isEqual(t)||Ot(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function pC(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class To extends dC{constructor(e,t,i,s,o,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Q_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=To._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}To._jsonSchemaVersion="firestore/documentSnapshot/1.0",To._jsonSchema={type:Xt("string",To._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class fm extends To{data(e={}){return super.data(e)}}class Eo{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Zc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new fm(this._firestore,this._userDataWriter,i.key,i,new Zc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((h=>{const d=new fm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Zc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const d=new fm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Zc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return h.type!==0&&(f=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:B9(h.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=s_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function B9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:Xt("string",Eo._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class tb extends U9{constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,t)}}function Pp(n){n=Ui(n,cs);const e=Ui(n.firestore,pa),t=q_(e),i=new tb(e);return fC(n._query),R9(t,n._query).then((s=>new Eo(e,i,n,s)))}function nb(n,e,t){n=Ui(n,Lt);const i=Ui(n.firestore,pa),s=pC(n.converter,e,t);return Up(i,[lC(Vp(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,En.none())])}function Op(n,e,t,...i){n=Ui(n,Lt);const s=Ui(n.firestore,pa),o=Vp(s);let l;return l=typeof(e=An(e))=="string"||e instanceof kp?O9(o,"updateDoc",n._key,e,t,i):P9(o,"updateDoc",n._key,e),Up(s,[l.toMutation(n._key,En.exists(!0))])}function Lp(n){return Up(Ui(n.firestore,pa),[new wp(n._key,En.none())])}function jp(n,e){const t=Ui(n.firestore,pa),i=bi(n),s=pC(n.converter,e);return Up(t,[lC(Vp(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,En.exists(!1))]).then((()=>i))}function zp(n,...e){n=An(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||yx(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(yx(e[i])){const d=e[i];e[i]=d.next?.bind(d),e[i+1]=d.error?.bind(d),e[i+2]=d.complete?.bind(d)}let o,l,h;if(n instanceof Lt)l=Ui(n.firestore,pa),h=_p(n._key.path),o={next:d=>{e[i]&&e[i](F9(l,n,d))},error:e[i+1],complete:e[i+2]};else{const d=Ui(n,cs);l=Ui(d.firestore,pa),h=d._query;const f=new tb(l);o={next:g=>{e[i]&&e[i](new Eo(l,f,d,g))},error:e[i+1],complete:e[i+2]},fC(n._query)}return(function(f,g,v,_){const S=new iC(_),C=new Y2(g,S,v);return f.asyncQueue.enqueueAndForget((async()=>K2(await bv(f),C))),()=>{S.Nu(),f.asyncQueue.enqueueAndForget((async()=>Q2(await bv(f),C)))}})(q_(l),h,s,o)}function Up(n,e){return(function(i,s){const o=new Zr;return i.asyncQueue.enqueueAndForget((async()=>u9(await I9(i),s,o))),o.promise})(q_(n),e)}function F9(n,e,t){const i=t.docs.get(e._key),s=new tb(n);return new To(n,s,e._key,i,new Zc(t.hasPendingWrites,t.fromCache),e.converter)}class q9{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=K9(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function H9(n){return new q9(n)}class G9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vh.provider,this._offlineComponentProvider={build:t=>new nC(t,e?.cacheSizeBytes,this.forceOwnership)}}}class $9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vh.provider,this._offlineComponentProvider={build:t=>new S9(t,e?.cacheSizeBytes)}}}function K9(n){return new G9(n?.forceOwnership)}function Q9(){return new $9}(function(e,t=!0){(function(s){xu=s})(Su),tu(new Io("firestore",((i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new pa(new T3(i.getProvider("auth-internal")),new S3(l,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new he(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(f.options.projectId,g)})(l,s),l);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),aa(Zw,Jw,e),aa(Zw,Jw,"esm2020")})();var Y9="firebase",X9="12.6.0";aa(Y9,X9,"app");function gC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W9=gC,yC=new Gh("auth","Firebase",gC());const Qm=new t_("@firebase/auth");function Z9(n,...e){Qm.logLevel<=$e.WARN&&Qm.warn(`Auth (${Su}): ${n}`,...e)}function mm(n,...e){Qm.logLevel<=$e.ERROR&&Qm.error(`Auth (${Su}): ${n}`,...e)}function is(n,...e){throw ib(n,...e)}function yr(n,...e){return ib(n,...e)}function vC(n,e,t){const i={...W9(),[e]:t};return new Gh("auth","Firebase",i).create(e,{appName:n.name})}function wo(n){return vC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ib(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return yC.create(n,...e)}function Ne(n,e,...t){if(!n)throw ib(e,...t)}function Yr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw mm(e),new Error(e)}function rs(n,e){n||Yr(e)}function Ev(){return typeof self<"u"&&self.location?.href||""}function J9(){return Tx()==="http:"||Tx()==="https:"}function Tx(){return typeof self<"u"&&self.location?.protocol||null}function eL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J9()||JP()||"connection"in navigator)?navigator.onLine:!0}function tL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class td{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=WP()||eO()}get(){return eL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rb(n,e){rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class _C{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rL=new td(3e4,6e4);function sb(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Nu(n,e,t,i,s={}){return bC(n,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=$h({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...o};return ZP()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&wu(n.emulatorConfig.host)&&(f.credentials="include"),_C.fetch()(await TC(n,n.config.apiHost,t,h),f)})}async function bC(n,e,t){n._canInitEmulator=!1;const i={...nL,...e};try{const s=new aL(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Kf(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,f]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kf(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Kf(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Kf(n,"user-disabled",l);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw vC(n,g,f);is(n,g)}}catch(s){if(s instanceof os)throw s;is(n,"network-request-failed",{message:String(s)})}}async function sL(n,e,t,i,s={}){const o=await Nu(n,e,t,i,s);return"mfaPendingCredential"in o&&is(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function TC(n,e,t,i){const s=`${e}${t}?${i}`,o=n,l=o.config.emulator?rb(n.config,s):`${n.config.apiScheme}://${s}`;return iL.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class aL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yr(this.auth,"network-request-failed")),rL.get())})}}function Kf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=yr(n,e,i);return s.customData._tokenResponse=t,s}async function oL(n,e){return Nu(n,"POST","/v1/accounts:delete",e)}async function Ym(n,e){return Nu(n,"POST","/v1/accounts:lookup",e)}function ch(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lL(n,e=!1){const t=An(n),i=await t.getIdToken(e),s=ab(i);Ne(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:i,authTime:ch(p0(s.auth_time)),issuedAtTime:ch(p0(s.iat)),expirationTime:ch(p0(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function p0(n){return Number(n)*1e3}function ab(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return mm("JWT malformed, contained fewer than 3 sections"),null;try{const s=VI(t);return s?JSON.parse(s):(mm("Failed to decode base64 JWT payload"),null)}catch(s){return mm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Ex(n){const e=ab(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ph(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof os&&uL(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function uL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class cL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class wv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ch(this.lastLoginAt),this.creationTime=ch(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xm(n){const e=n.auth,t=await n.getIdToken(),i=await Ph(n,Ym(e,{idToken:t}));Ne(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?EC(s.providerUserInfo):[],l=dL(n.providerData,o),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,f=h?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new wv(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function hL(n){const e=An(n);await Xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dL(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function EC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function fL(n,e){const t=await bC(n,{},async()=>{const i=$h({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await TC(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&wu(n.emulatorConfig.host)&&(d.credentials="include"),_C.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mL(n,e){return Nu(n,"POST","/v2/accounts:revokeToken",sb(n,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=Ex(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:o}=await fL(e,t);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:o}=t,l=new Xl;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(Ne(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ne(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return Yr("not implemented")}}function Ks(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ji{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new cL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ph(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lL(this,e)}reload(){return hL(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ji({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Xm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(wo(this.auth));const e=await this.getIdToken();return await Ph(this,oL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:S,providerData:C,stsTokenManager:N}=t;Ne(v&&N,e,"internal-error");const k=Xl.fromJSON(this.name,N);Ne(typeof v=="string",e,"internal-error"),Ks(i,e.name),Ks(s,e.name),Ne(typeof _=="boolean",e,"internal-error"),Ne(typeof S=="boolean",e,"internal-error"),Ks(o,e.name),Ks(l,e.name),Ks(h,e.name),Ks(d,e.name),Ks(f,e.name),Ks(g,e.name);const U=new ji({uid:v,auth:e,email:s,emailVerified:_,displayName:i,isAnonymous:S,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:k,createdAt:f,lastLoginAt:g});return C&&Array.isArray(C)&&(U.providerData=C.map(q=>({...q}))),d&&(U._redirectEventId=d),U}static async _fromIdTokenResponse(e,t,i=!1){const s=new Xl;s.updateFromServerResponse(t);const o=new ji({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Xm(o),o}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Ne(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?EC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,h=new Xl;h.updateFromIdToken(i);const d=new ji({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new wv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const wx=new Map;function Xr(n){rs(n instanceof Function,"Expected a class definition");let e=wx.get(n);return e?(rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wx.set(n,e),e)}class wC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wC.type="NONE";const Sx=wC;function pm(n,e,t){return`firebase:${n}:${e}:${t}`}class Wl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=pm(this.userKey,s.apiKey,o),this.fullPersistenceKey=pm("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ym(this.auth,{idToken:e}).catch(()=>{});return t?ji._fromGetAccountInfoResponse(this.auth,t,e):null}return ji._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Wl(Xr(Sx),e,i);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Xr(Sx);const l=pm(i,e.config.apiKey,e.name);let h=null;for(const f of t)try{const g=await f._get(l);if(g){let v;if(typeof g=="string"){const _=await Ym(e,{idToken:g}).catch(()=>{});if(!_)break;v=await ji._fromGetAccountInfoResponse(e,_,g)}else v=ji._fromJSON(e,g);f!==o&&(h=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Wl(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Wl(o,e,i))}}function xx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CC(e))return"Blackberry";if(DC(e))return"Webos";if(xC(e))return"Safari";if((e.includes("chrome/")||AC(e))&&!e.includes("edge/"))return"Chrome";if(RC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function SC(n=tn()){return/firefox\//i.test(n)}function xC(n=tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AC(n=tn()){return/crios\//i.test(n)}function IC(n=tn()){return/iemobile/i.test(n)}function RC(n=tn()){return/android/i.test(n)}function CC(n=tn()){return/blackberry/i.test(n)}function DC(n=tn()){return/webos/i.test(n)}function ob(n=tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function pL(n=tn()){return ob(n)&&!!window.navigator?.standalone}function gL(){return tO()&&document.documentMode===10}function NC(n=tn()){return ob(n)||RC(n)||DC(n)||CC(n)||/windows phone/i.test(n)||IC(n)}function kC(n,e=[]){let t;switch(n){case"Browser":t=xx(tn());break;case"Worker":t=`${xx(tn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Su}/${i}`}class yL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function vL(n,e={}){return Nu(n,"GET","/v2/passwordPolicy",sb(n,e))}const _L=6;class bL{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_L,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class TL{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ax(this),this.idTokenSubscription=new Ax(this),this.beforeStateQueue=new yL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ym(this,{idToken:e}),i=await ji._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===l)&&h?.user&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(wo(this));const t=e?An(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vL(this),t=new bL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await mL(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Z9(`Error while retrieving App Check token: ${e.error}`),e?.token}}function lb(n){return An(n)}class Ax{constructor(e){this.auth=e,this.observer=null,this.addObserver=oO(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ub={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EL(n){ub=n}function wL(n){return ub.loadJS(n)}function SL(){return ub.gapiScript}function xL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function AL(n,e){const t=i_(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Ao(o,e??{}))return s;is(s,"already-initialized")}return t.initialize({options:e})}function IL(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Xr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function RL(n,e,t){const i=lb(n);Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=VC(e),{host:l,port:h}=CL(e),d=h===null?"":`:${h}`,f={url:`${o}//${l}${d}/`},g=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ne(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ne(Ao(f,i.config.emulator)&&Ao(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,wu(l)?(LI(`${o}//${l}${d}`),XP("Auth",!0)):DL()}function VC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CL(n){const e=VC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Ix(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Ix(l)}}}function Ix(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function DL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class MC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,t){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}async function Zl(n,e){return sL(n,"POST","/v1/accounts:signInWithIdp",sb(n,e))}const NL="http://localhost";class Oo extends MC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):is("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=t;if(!i||!s)return null;const l=new Oo(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Zl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:NL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$h(t)}return e}}class PC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class nd extends PC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zs extends nd{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zs.PROVIDER_ID="facebook.com";class Js extends nd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oo._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Js.credential(t,i)}catch{return null}}}Js.GOOGLE_SIGN_IN_METHOD="google.com";Js.PROVIDER_ID="google.com";class ea extends nd{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.GITHUB_SIGN_IN_METHOD="github.com";ea.PROVIDER_ID="github.com";class ta extends nd{constructor(){super("twitter.com")}static credential(e,t){return Oo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ta.credential(t,i)}catch{return null}}}ta.TWITTER_SIGN_IN_METHOD="twitter.com";ta.PROVIDER_ID="twitter.com";class _u{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const o=await ji._fromIdTokenResponse(e,i,s),l=Rx(i);return new _u({user:o,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=Rx(i);return new _u({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function Rx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Wm extends os{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Wm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Wm(e,t,i,s)}}function OC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Wm._fromErrorAndOperation(n,o,e,i):o})}async function kL(n,e,t=!1){const i=await Ph(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _u._forOperation(n,"link",i)}async function VL(n,e,t=!1){const{auth:i}=n;if(hr(i.app))return Promise.reject(wo(i));const s="reauthenticate";try{const o=await Ph(n,OC(i,s,e,n),t);Ne(o.idToken,i,"internal-error");const l=ab(o.idToken);Ne(l,i,"internal-error");const{sub:h}=l;return Ne(n.uid===h,i,"user-mismatch"),_u._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&is(i,"user-mismatch"),o}}async function ML(n,e,t=!1){if(hr(n.app))return Promise.reject(wo(n));const i="signIn",s=await OC(n,i,e),o=await _u._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(o.user),o}function PL(n,e,t,i){return An(n).onIdTokenChanged(e,t,i)}function OL(n,e,t){return An(n).beforeAuthStateChanged(e,t)}const Zm="__sak";class LC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zm,"1"),this.storage.removeItem(Zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const LL=1e3,jL=10;class jC extends LC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);gL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,jL):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},LL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jC.type="LOCAL";const zL=jC;class zC extends LC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zC.type="SESSION";const UC=zC;function UL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Bp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Bp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async f=>f(t.origin,o)),d=await UL(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bp.receivers=[];function cb(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class BL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const f=cb("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(_.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function vr(){return window}function FL(n){vr().location.href=n}function BC(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function qL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HL(){return navigator?.serviceWorker?.controller||null}function GL(){return BC()?self:null}const FC="firebaseLocalStorageDb",$L=1,Jm="firebaseLocalStorage",qC="fbase_key";class id{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fp(n,e){return n.transaction([Jm],e?"readwrite":"readonly").objectStore(Jm)}function KL(){const n=indexedDB.deleteDatabase(FC);return new id(n).toPromise()}function Sv(){const n=indexedDB.open(FC,$L);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Jm,{keyPath:qC})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Jm)?e(i):(i.close(),await KL(),e(await Sv()))})})}async function Cx(n,e,t){const i=Fp(n,!0).put({[qC]:e,value:t});return new id(i).toPromise()}async function QL(n,e){const t=Fp(n,!1).get(e),i=await new id(t).toPromise();return i===void 0?null:i.value}function Dx(n,e){const t=Fp(n,!0).delete(e);return new id(t).toPromise()}const YL=800,XL=3;class HC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>XL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bp._getInstance(GL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await qL(),!this.activeServiceWorker)return;this.sender=new BL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sv();return await Cx(e,Zm,"1"),await Dx(e,Zm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Cx(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>QL(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Fp(s,!1).getAll();return new id(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HC.type="LOCAL";const WL=HC;new td(3e4,6e4);function ZL(n,e){return e?Xr(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class hb extends MC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JL(n){return ML(n.auth,new hb(n),n.bypassAuthState)}function ej(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),VL(t,new hb(n),n.bypassAuthState)}async function tj(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),kL(t,new hb(n),n.bypassAuthState)}class GC{constructor(e,t,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JL;case"linkViaPopup":case"linkViaRedirect":return tj;case"reauthViaPopup":case"reauthViaRedirect":return ej;default:is(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nj=new td(2e3,1e4);class ql extends GC{constructor(e,t,i,s,o){super(e,t,s,o),this.provider=i,this.authWindow=null,this.pollId=null,ql.currentPopupAction&&ql.currentPopupAction.cancel(),ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=cb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nj.get())};e()}}ql.currentPopupAction=null;const ij="pendingRedirect",gm=new Map;class rj extends GC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=gm.get(this.auth._key());if(!e){try{const i=await sj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}gm.set(this.auth._key(),e)}return this.bypassAuthState||gm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sj(n,e){const t=lj(e),i=oj(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function aj(n,e){gm.set(n._key(),e)}function oj(n){return Xr(n._redirectPersistence)}function lj(n){return pm(ij,n.config.apiKey,n.name)}async function uj(n,e,t=!1){if(hr(n.app))return Promise.reject(wo(n));const i=lb(n),s=ZL(i,e),l=await new rj(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}const cj=600*1e3;class hj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!$C(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cj&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nx(e))}saveEventToCache(e){this.cachedEventUids.add(Nx(e)),this.lastProcessedEventTime=Date.now()}}function Nx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $C({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function dj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $C(n);default:return!1}}async function fj(n,e={}){return Nu(n,"GET","/v1/projects",e)}const mj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pj=/^https?/;async function gj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await fj(n);for(const t of e)try{if(yj(t))return}catch{}is(n,"unauthorized-domain")}function yj(n){const e=Ev(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!pj.test(t))return!1;if(mj.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const vj=new td(3e4,6e4);function kx(){const n=vr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _j(n){return new Promise((e,t)=>{function i(){kx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kx(),t(yr(n,"network-request-failed"))},timeout:vj.get()})}if(vr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vr().gapi?.load)i();else{const s=xL("iframefcb");return vr()[s]=()=>{gapi.load?i():t(yr(n,"network-request-failed"))},wL(`${SL()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw ym=null,e})}let ym=null;function bj(n){return ym=ym||_j(n),ym}const Tj=new td(5e3,15e3),Ej="__/auth/iframe",wj="emulator/auth/iframe",Sj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Aj(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?rb(e,wj):`https://${n.config.authDomain}/${Ej}`,i={apiKey:e.apiKey,appName:n.name,v:Su},s=xj.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${$h(i).slice(1)}`}async function Ij(n){const e=await bj(n),t=vr().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:Aj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sj,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=yr(n,"network-request-failed"),h=vr().setTimeout(()=>{o(l)},Tj.get());function d(){vr().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}const Rj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Cj=500,Dj=600,Nj="_blank",kj="http://localhost";class Vx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Vj(n,e,t,i=Cj,s=Dj){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...Rj,width:i.toString(),height:s.toString(),top:o,left:l},f=tn().toLowerCase();t&&(h=AC(f)?Nj:t),SC(f)&&(e=e||kj,d.scrollbars="yes");const g=Object.entries(d).reduce((_,[S,C])=>`${_}${S}=${C},`,"");if(pL(f)&&h!=="_self")return Mj(e||"",h),new Vx(null);const v=window.open(e||"",h,g);Ne(v,n,"popup-blocked");try{v.focus()}catch{}return new Vx(v)}function Mj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const Pj="__/auth/handler",Oj="emulator/auth/handler",Lj=encodeURIComponent("fac");async function Mx(n,e,t,i,s,o){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Su,eventId:s};if(e instanceof PC){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",aO(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof nd){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await n._getAppCheckToken(),f=d?`#${Lj}=${encodeURIComponent(d)}`:"";return`${jj(n)}?${$h(h).slice(1)}${f}`}function jj({config:n}){return n.emulator?rb(n,Oj):`https://${n.authDomain}/${Pj}`}const g0="webStorageSupport";class zj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UC,this._completeRedirectFn=uj,this._overrideRedirectResult=aj}async _openPopup(e,t,i,s){rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Mx(e,t,i,Ev(),s);return Vj(e,o,cb())}async _openRedirect(e,t,i,s){await this._originValidation(e);const o=await Mx(e,t,i,Ev(),s);return FL(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(rs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Ij(e),i=new hj(e);return t.register("authEvent",s=>(Ne(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(g0,{type:g0},s=>{const o=s?.[0]?.[g0];o!==void 0&&t(!!o),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NC()||xC()||ob()}}const Uj=zj;var Px="@firebase/auth",Ox="1.11.1";class Bj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qj(n){tu(new Io("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;Ne(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kC(n)},f=new TL(i,s,o,d);return IL(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),tu(new Io("auth-internal",e=>{const t=lb(e.getProvider("auth").getImmediate());return(i=>new Bj(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(Px,Ox,Fj(n)),aa(Px,Ox,"esm2020")}const Hj=300,Gj=OI("authIdTokenMaxAge")||Hj;let Lx=null;const $j=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Gj)return;const s=t?.token;Lx!==s&&(Lx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Kj(n=l3()){const e=i_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=AL(n,{popupRedirectResolver:Uj,persistence:[WL,zL,UC]}),i=OI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=$j(o.toString());OL(t,l,()=>l(t.currentUser)),PL(t,h=>l(h))}}const s=$P("auth");return s&&RL(t,`http://${s}`),t}function Qj(){return document.getElementsByTagName("head")?.[0]??document}EL({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=yr("internal-error");o.customData=s,t(o)},i.type="text/javascript",i.charset="UTF-8",Qj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qj("Browser");const Yj={apiKey:"AIzaSyAQ5FdR_OjZvMkTOYy9auXDctOQXGtZPgg",authDomain:"house-budget-pwa.firebaseapp.com",projectId:"house-budget-pwa",storageBucket:"house-budget-pwa.firebasestorage.app",messagingSenderId:"7591891522",appId:"1:7591891522:web:ebf15777f6c206129753db",measurementId:"G-6QDXEYXPTE"},KC=HI(Yj),kn=D9(KC,{localCache:H9({tabManager:Q9()})});Kj(KC);const y0=n=>Np(kn,"users",n,"transactions"),Gr={subscribeToTransactions:(n,e)=>{const t=Po(y0(n),Mh("date","desc"));return zp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllTransactions:async n=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${n}`);const e=Po(y0(n),Mh("date","desc")),i=(await Pp(e)).docs.map(s=>({id:s.id,...s.data()}));return console.log(` Fetched ${i.length} transactions:`,i.map(s=>({id:s.id,description:s.description}))),i},addTransaction:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${t}`);try{console.log(" About to call addDoc with:",i);const s=await jp(y0(e),i);console.log(" addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`),console.log(` Document path: ${s.path}`);const o={id:s.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(s){throw console.error(" addDoc failed:",s),console.error("Error message:",s.message),s}},updateTransaction:async(n,e,t)=>{const i=bi(kn,"users",n,"transactions",e);return await Op(i,t)},deleteTransaction:async(n,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${n}`);try{const t=bi(kn,"users",n,"transactions",e);console.log(` Deleting document at path: ${t.path}`),await Lp(t),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(t){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,t),console.error("Error message:",t.message),t}}},v0=n=>Np(kn,"users",n,"envelopes"),lo={subscribeToEnvelopes:(n,e)=>{const t=Po(v0(n),Mh("orderIndex","asc"));return zp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllEnvelopes:async n=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",n);const e=v0(n),s=(await Pp(e)).docs.map((o,l)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??l})).sort((o,l)=>{const h=o.orderIndex??0,d=l.orderIndex??0;return h-d});return console.log(" Fetched envelopes:",s.length),s}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create envelope");console.log(` EnvelopeService.createEnvelope: Adding envelope for user ${e}:`,i),console.log(` Original envelope had temp ID: ${t}`);try{const s=await jp(v0(e),i);console.log(" Envelope addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`);const o={id:s.id,...i,userId:e};return console.log(" Final envelope result object:",o),o}catch(s){throw console.error(" Envelope addDoc failed:",s),s}},saveEnvelope:async(n,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const t=bi(kn,"users",n,"envelopes",e.id);return await nb(t,e,{merge:!0})},updateBalance:async(n,e,t)=>{const i=bi(kn,"users",n,"envelopes",e);return await Op(i,{currentBalance:t,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(n,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${n}`);const t=bi(kn,"users",n,"envelopes",e);await Lp(t),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},_0=n=>Np(kn,"users",n,"distributionTemplates"),Pi={subscribeToDistributionTemplates:(n,e)=>{const t=Po(_0(n),Mh("lastUsed","desc"));return zp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllDistributionTemplates:async n=>{const e=Po(_0(n),Mh("lastUsed","desc"));return(await Pp(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const s=await jp(_0(e),i);console.log(" Template addDoc succeeded, docRef:",s);const o={id:s.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(s){throw console.error(" Template addDoc failed:",s),s}},saveDistributionTemplate:async(n,e)=>{const t=bi(kn,"users",n,"distributionTemplates",e.id);return await nb(t,e,{merge:!0})},updateDistributionTemplate:async(n,e,t)=>{const i=bi(kn,"users",n,"distributionTemplates",e);return await Op(i,t)},deleteDistributionTemplate:async(n,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${n}`);const t=bi(kn,"users",n,"distributionTemplates",e);await Lp(t),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},b0=n=>Np(kn,"users",n,"appSettings"),Qs={subscribeToAppSettings:(n,e)=>{const t=Po(b0(n),vx(1));return zp(t,s=>{if(s.empty){e(null);return}const o=s.docs.map(l=>({id:l.id,...l.data()}))[0];e(o)})},getAppSettings:async n=>{const e=Po(b0(n),vx(1)),t=await Pp(e);if(t.empty)return null;const i=t.docs[0];return{id:i.id,...i.data()}},createAppSettings:async n=>{const{userId:e,...t}=n;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,t);try{const i=await jp(b0(e),t);console.log(" Settings addDoc succeeded, docRef:",i);const s={id:i.id,...t,userId:e};return console.log(" Final settings result object:",s),s}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(n,e)=>{const t=bi(kn,"users",n,"appSettings",e.id);return await nb(t,e,{merge:!0})},updateAppSettings:async(n,e,t)=>{const i=bi(kn,"users",n,"appSettings",e);return await Op(i,t)},deleteAppSettings:async(n,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${n}`);const t=bi(kn,"users",n,"appSettings",e);await Lp(t),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},Xj=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const n=await fetch("/HouseBudget_Backup_2025-11-25.json");if(n.ok){const e=await n.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(n){console.log(" Could not load fallback data:",n)}return null},qe="test-user-123",Wj=async()=>{if(typeof navigator>"u"||!navigator.onLine)return!1;try{const n=new AbortController,e=setTimeout(()=>n.abort(),3e3);return await fetch("https://www.google.com/favicon.ico",{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:n.signal}),clearTimeout(e),!0}catch{return!1}},Hr=n=>{const e=n?.code?.toLowerCase()||"",t=n?.message?.toLowerCase()||"",i=n?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||t.includes("network")||t.includes("offline")||t.includes("disconnected")||t.includes("connection")||t.includes("fetch")||t.includes("timeout")||t.includes("err_internet_disconnected")||t.includes("err_network_changed")||t.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&t==="undefined")},wt=vI((n,e)=>({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,fetchData:async()=>{if(e().resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",qe),n({isLoading:!0,error:null});try{console.log(" fetchData: Making Firebase calls...");let i,s,o,l;[i,s,o,l]=await Promise.all([lo.getAllEnvelopes(qe).catch(f=>(console.error(" Failed to fetch envelopes:",f),[])),Gr.getAllTransactions(qe).catch(f=>(console.error(" Failed to fetch transactions:",f),[])),Pi.getAllDistributionTemplates(qe).catch(f=>(console.error(" Failed to fetch templates:",f),[])),Qs.getAppSettings(qe).catch(f=>(console.error(" Failed to fetch settings:",f),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:i?.length||0,transactions:s?.length||0,templates:o?.length||0,settings:l?"found":"null"});const h=(i?.length||0)>0||(s?.length||0)>0||(o?.length||0)>0;let d=null;h||(console.log(" No data from Firebase, loading fallback data..."),d=await Xj(),d&&(console.log(" Using fallback data for initialization"),i=d.envelopes||[],s=d.transactions||[],o=d.distributionTemplates||[],l=d.appSettings||null)),n(f=>{const g=H=>H.map(I=>({...I,date:I.date&&typeof I.date=="object"&&I.date.toDate?I.date.toDate().toISOString():I.date,type:I.type==="income"?"Income":I.type==="expense"?"Expense":I.type==="transfer"?"Transfer":I.type,amount:typeof I.amount=="string"?parseFloat(I.amount):I.amount})),v=H=>({id:H.id,name:H.name,currentBalance:H.currentBalance||0,lastUpdated:H.lastUpdated,isActive:H.isActive??!0,orderIndex:H.orderIndex??0}),_=i.filter(H=>!("orderIndex"in H));_.length>0&&(console.log(` Migrating ${_.length} envelopes to add orderIndex...`),_.forEach((H,I)=>{const A=I;lo.saveEnvelope(qe,{...H,orderIndex:A}).then(()=>console.log(` Migrated envelope ${H.name} with orderIndex ${A}`)).catch(V=>console.warn(`Failed to migrate envelope ${H.id}:`,V))}));const S=i.map(v),C=new Set([...f.envelopes.map(H=>H.id),...i.map(H=>H.id)]),N=f.envelopes.filter(H=>H.id&&!i.some(I=>I.id===H.id)&&!H.id.startsWith("temp-")),k=f.transactions.filter(H=>H.id&&!s.some(I=>I.id===H.id)&&(!H.id.startsWith("temp-")||C.has(H.envelopeId)));let U,q=[];navigator.onLine?(U=o,console.log(` Online mode: Using Firebase templates only (${U.length} templates)`)):(q=f.distributionTemplates.filter(H=>H.id&&!o.some(I=>I.id===H.id)),U=o.concat(q),console.log(` Offline mode: Merged ${o.length} Firebase + ${q.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",f.envelopes.map(H=>({id:H.id,name:H.name}))),console.log("  Firebase envelopes:",i.map(H=>({id:H.id,name:H.name}))),console.log("  Store transactions:",f.transactions.map(H=>({id:H.id,envelopeId:H.envelopeId,description:H.description}))),console.log("  Firebase transactions:",s.map(H=>({id:H.id,envelopeId:H.envelopeId,description:H.description}))),console.log("  Store templates:",f.distributionTemplates.map(H=>({id:H.id,name:H.name}))),console.log("  Firebase templates:",o.map(H=>({id:H.id,name:H.name}))),console.log("  Local-only envelopes:",N.map(H=>({id:H.id,name:H.name}))),console.log("  Local-only transactions:",k.map(H=>({id:H.id,envelopeId:H.envelopeId,description:H.description}))),console.log("  Local-only templates:",q.map(H=>({id:H.id,name:H.name}))),console.log("  Total merged templates:",U.length,U.map(H=>({id:H.id,name:H.name})));const O=S.concat(N),Z=g(s).concat(k);console.log("  Local-only envelopes:",N.map(H=>({id:H.id,name:H.name}))),console.log("  Merged envelopes will be:",O.length,O.map(H=>({id:H.id,name:H.name})));let te=l;if(l&&"isDarkMode"in l&&!("theme"in l)){const H=l;te={...H,theme:H.isDarkMode?"dark":"light"},delete te.isDarkMode,te&&te.id&&Qs.updateAppSettings(qe,te.id,{theme:te.theme}).catch(I=>console.warn("Failed to migrate app settings:",I))}return{envelopes:O,transactions:Z,distributionTemplates:U,appSettings:te,isLoading:!1,pendingSync:!1}})}catch(i){console.error("Sync Failed:",i),Hr(i)?n({isLoading:!1,pendingSync:!0}):n({error:i.message,isLoading:!1})}},addTransaction:async t=>{const i=`temp-${Date.now()}-${Math.random()}`,s={...t,id:i,userId:qe};if(n(o=>({transactions:[...o.transactions,s],isLoading:!0})),t.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${t.envelopeId}`),n({isLoading:!1,pendingSync:!0});else try{const o={...s,amount:s.amount.toString(),type:s.type.toLowerCase(),date:Je.fromDate(new Date(s.date))},l=await Gr.addTransaction(o);console.log(` Replacing temp transaction ${i} with Firebase transaction:`,l);const h=QC(l);n(d=>({transactions:d.transactions.map(f=>f.id===i?h:f),isLoading:!1,pendingSync:!1}))}catch(o){console.error("Add Transaction Failed:",o),Hr(o)?n({isLoading:!1,pendingSync:!0,error:null}):n(l=>({transactions:l.transactions.filter(h=>h.id!==i),error:o.message,isLoading:!1}))}},createEnvelope:async t=>{const i=t.currentBalance&&t.currentBalance>0,s=i?{...t,currentBalance:0,orderIndex:t.orderIndex??0}:{...t,orderIndex:t.orderIndex??0},o=`temp-${Date.now()}-${Math.random()}`,l={...s,id:o};if(n(h=>({envelopes:[...h.envelopes,l],isLoading:!0})),i){console.log(` Creating initial deposit transaction locally first: ${l.name} (tempId: ${o})`);try{await e().addTransaction({description:"Initial Deposit",amount:t.currentBalance,envelopeId:o,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const h=e().getEnvelopeBalance(o);console.log(` Test balance for temp envelope ${o}: $${h.toNumber()}`)}catch(h){console.error(" Failed to create initial deposit transaction locally:",h)}}try{console.log(" Attempting Firebase envelope creation...");const h={...s,id:"",userId:qe},d=await lo.createEnvelope(h);console.log(" Firebase envelope creation successful:",d);const f={id:d.id,name:d.name,currentBalance:d.currentBalance,lastUpdated:d.lastUpdated,isActive:d.isActive??!0,orderIndex:d.orderIndex??0,userId:d.userId};if(n(g=>({envelopes:g.envelopes.map(v=>v.id===o?f:v),isLoading:!1,pendingSync:!1})),i){console.log(` Updating transactions from temp envelope ID ${o} to real ID ${d.id}`),console.log(" Transactions before update:",e().transactions.map(v=>({id:v.id,envelopeId:v.envelopeId,description:v.description}))),n(v=>({transactions:v.transactions.map(_=>_.envelopeId===o?{..._,envelopeId:d.id}:_)})),console.log(" Transactions after envelopeId update:",e().transactions.map(v=>({id:v.id,envelopeId:v.envelopeId,description:v.description})));const g=e().transactions.filter(v=>v.envelopeId===d.id&&v.id&&v.id.startsWith("temp-"));console.log(` Found ${g.length} transactions to sync for envelope ${d.id}:`,g.map(v=>({id:v.id,envelopeId:v.envelopeId})));for(const v of g)try{console.log(" Syncing transaction:",v);const _={...v,amount:v.amount.toString(),type:v.type.toLowerCase(),date:Je.fromDate(new Date(v.date))},S=await Gr.addTransaction(_);console.log(" Transaction synced:",S);const C={...S,amount:typeof S.amount=="string"?parseFloat(S.amount):S.amount,type:S.type==="income"?"Income":S.type==="expense"?"Expense":S.type==="transfer"?"Transfer":S.type,date:S.date&&typeof S.date=="object"&&S.date.toDate?S.date.toDate().toISOString():S.date};console.log(` Replacing temp transaction ${v.id} with Firebase transaction ${S.id}`),n(N=>({transactions:N.transactions.map(k=>k.id===v.id?C:k)}))}catch(_){console.error(` Failed to sync transaction ${v.id}:`,_)}console.log(" Final transactions after sync:",e().transactions.map(v=>({id:v.id,envelopeId:v.envelopeId,description:v.description}))),n({pendingSync:!1}),console.log(` All transactions synced for envelope ${d.id}`)}}catch(h){console.error("Create Envelope Failed:",h),console.log("Error details:",{code:h?.code,message:h?.message,name:h?.name,isNetworkError:Hr(h)}),Hr(h)?(console.log(" Treating as offline scenario - keeping temp envelope and transactions"),n({isLoading:!1,pendingSync:!0,error:null})):(console.log(" Real error - removing temp envelope"),n(d=>({envelopes:d.envelopes.filter(f=>f.id!==o),transactions:d.transactions.filter(f=>f.envelopeId!==o),error:h.message,isLoading:!1})))}},syncData:async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),n({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(i){console.error("Firebase reset during sync failed:",i)}return}n({pendingSync:!0});try{await e().fetchData()}catch(i){console.error("Manual sync failed:",i)}},updateOnlineStatus:async()=>{const t=await Wj();n({isOnline:t})},addToEnvelope:async(t,i,s,o)=>{const l=o?typeof o=="string"?o:o.toISOString():new Date().toISOString();await e().addTransaction({description:s,amount:i,envelopeId:t,date:l,type:"Income",reconciled:!1})},spendFromEnvelope:async(t,i,s,o)=>{const l=o?typeof o=="string"?o:o.toISOString():new Date().toISOString();await e().addTransaction({description:s,amount:i,envelopeId:t,date:l,type:"Expense",reconciled:!1})},transferFunds:async(t,i,s,o,l)=>{console.log(`Transferring ${s} from ${t} to ${i} with note: ${o}`);const h=l?typeof l=="string"?l:l.toISOString():new Date().toISOString(),d=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(f=>f.id===i)?.name||"envelope"}`,amount:s,envelopeId:t,date:h,type:"Expense",transferId:d,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(f=>f.id===t)?.name||"envelope"}`,amount:s,envelopeId:i,date:h,type:"Income",transferId:d,reconciled:!1})},deleteEnvelope:async t=>{const i=e().transactions.filter(s=>s.envelopeId===t);n(s=>({envelopes:s.envelopes.filter(o=>o.id!==t),transactions:s.transactions.filter(o=>o.envelopeId!==t),isLoading:!0}));try{await lo.deleteEnvelope(qe,t);for(const s of i)s.id&&!s.id.startsWith("temp-")&&await Gr.deleteTransaction(qe,s.id);await e().removeEnvelopeFromTemplates(t),n({isLoading:!1})}catch(s){if(console.error("Delete Envelope Failed:",s),Hr(s))n({isLoading:!1,pendingSync:!0,error:null});else{const o=e().envelopes.find(l=>l.id===t);n(o?l=>({envelopes:[...l.envelopes,o],transactions:[...l.transactions,...i],error:s.message,isLoading:!1}):{error:s.message,isLoading:!1})}}},deleteTransaction:async t=>{const i=e().transactions.find(o=>o.id===t);if(!i)return;const s=[t];if(i.transferId){const o=e().transactions.find(l=>l.transferId===i.transferId&&l.id!==t);o&&o.id&&s.push(o.id)}n(o=>({transactions:o.transactions.filter(l=>l.id&&!s.includes(l.id)),isLoading:!0}));try{const o=s.filter(l=>!l.startsWith("temp-"));for(const l of o)console.log(` About to delete transaction ID: ${l}`),await Gr.deleteTransaction(qe,l),console.log(` Deleted transaction ID: ${l}`);console.log(" All transaction deletions completed"),n({isLoading:!1})}catch(o){if(console.error("Delete Transaction Failed:",o),Hr(o))n({isLoading:!1,pendingSync:!0,error:null});else{const l=s.map(h=>e().transactions.find(d=>d.id===h)||i).filter(Boolean);n(h=>({transactions:[...h.transactions,...l],error:o.message,isLoading:!1}))}}},updateTransaction:async t=>{console.log(" updateTransaction called:",t),n(i=>({transactions:i.transactions.map(s=>s.id===t.id?t:s),isLoading:!0}));try{const i=Gr.updateTransaction(qe,t.id,{description:t.description,amount:t.amount.toString(),envelopeId:t.envelopeId,date:Je.fromDate(new Date(t.date)),type:t.type.toLowerCase()}),s=new Promise((o,l)=>setTimeout(()=>l(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([i,s]),console.log(" Transaction updated in Firebase"),n({isLoading:!1})}catch(i){console.error("Update Transaction Failed:",i),console.log(" Error details:",{name:i?.name||"Unknown",message:i?.message||"Unknown",code:i?.code||"Unknown",isNetworkError:Hr(i)}),Hr(i)?(console.log(" Treating as offline scenario - keeping local transaction update"),n({isLoading:!1,pendingSync:!0,error:null})):n({error:i.message,isLoading:!1})}},restoreTransaction:async t=>{n(i=>({transactions:[...i.transactions,t],isLoading:!0}));try{n({isLoading:!1})}catch(i){console.error("Restore Transaction Failed:",i),n({error:i.message,isLoading:!1})}},importData:t=>{try{if(!t.envelopes||!t.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const i=t.envelopes.map(f=>({id:f.id,name:f.name,budget:f.budget||f.currentBalance||0,spent:f.spent||0,category:f.category||"General"})),s=t.transactions||[],o=t.distributionTemplates||[],l=t.appSettings||null;n({envelopes:i,transactions:s,distributionTemplates:o,appSettings:l,error:null,pendingSync:!1});const h=o.length,d=l?"Settings imported.":"";return{success:!0,message:`Loaded ${i.length} envelopes, ${s.length} transactions${h>0?`, ${h} templates`:""}.${d?` ${d}`:""}`}}catch(i){return console.error("Import failed:",i),{success:!1,message:"Failed to import data. Check file format."}}},performFirebaseReset:async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),n({isLoading:!0});try{console.log(" Querying Firebase for all data to delete...");const[t,i,s,o]=await Promise.all([lo.getAllEnvelopes(qe).catch(f=>(console.error(" Failed to fetch envelopes for reset:",f),[])),Gr.getAllTransactions(qe).catch(f=>(console.error(" Failed to fetch transactions for reset:",f),[])),Pi.getAllDistributionTemplates(qe).catch(f=>(console.error(" Failed to fetch templates for reset:",f),[])),Qs.getAppSettings(qe).catch(f=>(console.error(" Failed to fetch settings for reset:",f),null))]);console.log(` Found in Firebase: ${t.length} envelopes, ${i.length} transactions, ${s.length} templates`);let l=0;for(const f of t)if(f.id)try{await lo.deleteEnvelope(qe,f.id),l++,console.log(` Deleted envelope: ${f.name||f.id}`)}catch(g){console.error(` Failed to delete envelope ${f.id}:`,g)}let h=0;for(const f of i)if(f.id)try{await Gr.deleteTransaction(qe,f.id),h++,console.log(` Deleted transaction: ${f.id}`)}catch(g){console.error(` Failed to delete transaction ${f.id}:`,g)}let d=0;for(const f of s)if(f.id)try{await Pi.deleteDistributionTemplate(qe,f.id),d++,console.log(` Deleted template: ${f.name||f.id}`)}catch(g){console.error(` Failed to delete template ${f.id}:`,g)}if(o?.id)try{await Qs.deleteAppSettings(qe,o.id),console.log(" Deleted app settings")}catch(f){console.error(" Failed to delete app settings:",f)}console.log(` Firebase reset complete: Deleted ${l} envelopes, ${h} transactions, ${d} templates`),n({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(t){throw console.error(" Error during Firebase reset:",t),n({isLoading:!1,pendingSync:!0}),t}},resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),n({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(i){console.error(" Firebase reset failed, will retry on next sync:",i),n({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),n({isLoading:!1,pendingSync:!0})},renameEnvelope:async(t,i)=>{n(s=>({envelopes:s.envelopes.map(o=>o.id===t?{...o,name:i}:o),isLoading:!0}));try{n({isLoading:!1})}catch(s){console.error("Rename Envelope Failed:",s),n({error:s.message,isLoading:!1})}},saveTemplate:async(t,i,s)=>{console.log(" saveTemplate called with:",{name:t,distributions:i,note:s});try{const o={id:`temp-${Date.now()}`,userId:qe,name:t,note:s,lastUsed:new Date().toISOString(),distributions:i};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const l=Pi.createDistributionTemplate(o),h=new Promise((f,g)=>setTimeout(()=>g(new Error("Firebase timeout - likely offline")),5e3)),d=await Promise.race([l,h]);console.log(" Firebase template save succeeded (online mode):",d),n(f=>{const g=[...f.distributionTemplates,d];return console.log(" Updating store - old templates:",f.distributionTemplates.length,"new templates:",g.length),{distributionTemplates:g}}),console.log(" Template saved to Firebase:",d),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(l){throw console.log(" Firebase template save failed or timed out:",l.message),l}}catch(o){console.error(" Failed to save template to Firebase, saving locally:",o),console.log(" Error details:",{name:o?.name||"Unknown",message:o?.message||"Unknown",code:o?.code||"Unknown",isNetworkError:Hr(o)});const l={id:`local-${Date.now()}`,userId:qe,name:t,note:s,lastUsed:new Date().toISOString(),distributions:i};console.log(" Saving template locally (offline):",l),n(h=>({distributionTemplates:[...h.distributionTemplates,l],pendingSync:!0})),console.log(" Template saved locally as fallback:",l),console.log(" Store now has templates:",e().distributionTemplates.length)}},deleteTemplate:async t=>{try{await Pi.deleteDistributionTemplate(qe,t),n(i=>({distributionTemplates:i.distributionTemplates.filter(s=>s.id!==t)})),console.log(" Template deleted from Firebase:",t)}catch(i){throw console.error(" Failed to delete template from Firebase:",i),i}},updateAppSettings:async t=>{const i=e();if(!i.appSettings){try{await i.initializeAppSettings();const s=e();if(s.appSettings){const o={...s.appSettings,...t};n({appSettings:o}),await Qs.updateAppSettings(qe,s.appSettings.id,t),console.log(" App settings updated successfully")}}catch(s){console.error(" Failed to initialize/update settings:",s)}return}try{n(s=>({appSettings:{...s.appSettings,...t}})),await Qs.updateAppSettings(qe,i.appSettings.id,t),console.log(" App settings updated successfully")}catch(s){throw console.error(" Failed to update app settings:",s),n(o=>({appSettings:o.appSettings})),s}},initializeAppSettings:async()=>{try{const t={userId:qe,theme:"system"},i=await Qs.createAppSettings(t);n({appSettings:i}),console.log(" App settings initialized successfully")}catch(t){console.error(" Failed to initialize app settings:",t),n({appSettings:{id:"local-settings",userId:qe,theme:"system"}})}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const t=e().distributionTemplates,i=e().envelopes,s=new Set(i.map(l=>l.id));let o=0;for(const l of t){const h={...l.distributions},d={};for(const[f,g]of Object.entries(l.distributions))s.has(f)&&(d[f]=g);Object.keys(d).length===0?(console.log(` Deleting orphaned template: ${l.name}`),await Pi.deleteDistributionTemplate(qe,l.id),o++):JSON.stringify(d)!==JSON.stringify(h)&&(console.log(` Updating template ${l.name} - removed orphaned envelope references`),await Pi.updateDistributionTemplate(qe,l.id,{distributions:d}),o++)}o>0?console.log(` Cleaned up ${o} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(t,i)=>{console.log(` Updating template references: ${t}  ${i}`);const s=e().distributionTemplates;let o=0;for(const l of s)if(l.distributions[t]!==void 0){const h={...l.distributions};h[i]=h[t],delete h[t],console.log(` Updating template: ${l.name}`),await Pi.updateDistributionTemplate(qe,l.id,{distributions:h}),o++}o>0&&console.log(` Updated ${o} templates with new envelope reference`)},removeEnvelopeFromTemplates:async t=>{console.log(` Removing envelope ${t} from all templates`);const i=e().distributionTemplates;let s=0,o=0;for(const l of i)if(l.distributions[t]!==void 0){const h={...l.distributions};delete h[t],Object.keys(h).length===0?(console.log(` Deleting template ${l.name} - no envelopes left`),await Pi.deleteDistributionTemplate(qe,l.id),o++):(console.log(` Removing envelope from template: ${l.name}`),await Pi.updateDistributionTemplate(qe,l.id,{distributions:h}),s++)}(s>0||o>0)&&console.log(` Updated ${s} templates, deleted ${o} empty templates`)},getEnvelopeBalance:t=>{const i=e();if(!i.envelopes.find(v=>v.id===t))return console.log(` getEnvelopeBalance: Envelope ${t} not found`),new $r(0);const o=i.transactions.filter(v=>v.envelopeId===t),l=o.filter(v=>v.type==="Expense"),h=o.filter(v=>v.type==="Income"),d=l.reduce((v,_)=>v.plus(new $r(_.amount||0)),new $r(0));return h.reduce((v,_)=>v.plus(new $r(_.amount||0)),new $r(0)).minus(d)}})),QC=n=>({id:n.id,date:n.date?.toDate?.()?n.date.toDate().toISOString():n.date,amount:parseFloat(n.amount)||0,description:n.description||"",envelopeId:n.envelopeId||"",reconciled:n.reconciled||!1,type:n.type==="income"?"Income":n.type==="expense"?"Expense":"Transfer",transferId:n.transferId||void 0,userId:n.userId||void 0}),Zj=n=>({id:n.id,name:n.name||"",currentBalance:n.currentBalance||0,lastUpdated:n.lastUpdated,isActive:n.isActive??!0,orderIndex:n.orderIndex??0,userId:n.userId||void 0}),Jj=n=>({id:n.id,name:n.name||"",distributions:n.distributions||{},lastUsed:n.lastUsed?.toDate?.()?n.lastUsed.toDate().toISOString():n.lastUsed||new Date().toISOString(),note:n.note||"",userId:n.userId||void 0}),ez=()=>{console.log(" Setting up real-time Firebase subscriptions...");const n=lo.subscribeToEnvelopes(qe,s=>{const o=wt.getState();if(o.isOnline&&!o.pendingSync&&!o.resetPending){console.log(" Real-time sync: Envelopes updated",s.length);const l=s.map(Zj);wt.setState({envelopes:l})}}),e=Gr.subscribeToTransactions(qe,s=>{const o=wt.getState();if(o.isOnline&&!o.pendingSync&&!o.resetPending){console.log(" Real-time sync: Transactions updated",s.length);const l=s.map(QC);wt.setState({transactions:l})}}),t=Pi.subscribeToDistributionTemplates(qe,s=>{const o=wt.getState();if(o.isOnline&&!o.pendingSync&&!o.resetPending){console.log(" Real-time sync: Templates updated",s.length);const l=s.map(Jj);wt.setState({distributionTemplates:l})}}),i=Qs.subscribeToAppSettings(qe,s=>{const o=wt.getState();o.isOnline&&!o.pendingSync&&!o.resetPending&&(console.log(" Real-time sync: Settings updated",s?"found":"null"),wt.setState({appSettings:s}))});window.__firebaseUnsubscribers={envelopes:n,transactions:e,templates:t,settings:i},console.log(" Real-time subscriptions active - cross-device sync enabled")};typeof window<"u"&&(ez(),window.addEventListener("online",async()=>{await wt.getState().updateOnlineStatus();const n=wt.getState();n.isOnline&&(n.pendingSync||n.resetPending)&&(console.log(" Auto-syncing pending operations..."),n.syncData())}),window.addEventListener("offline",()=>{wt.setState({isOnline:!1})}),setTimeout(()=>{wt.getState().updateOnlineStatus()},1e3));const tz=({isOpen:n,onClose:e})=>{const{envelopes:t,addToEnvelope:i,distributionTemplates:s,saveTemplate:o,deleteTemplate:l,getEnvelopeBalance:h}=wt(),[d,f]=z.useState(""),[g,v]=z.useState({}),[_,S]=z.useState(""),[C,N]=z.useState(!1),[k,U]=z.useState(!1),[q,O]=z.useState(""),Z=z.useMemo(()=>t.sort((de,G)=>de.name.localeCompare(G.name)),[t]),te=parseFloat(d)||0,H=z.useMemo(()=>Object.values(g).reduce((de,G)=>de+G,0),[g]),I=te-H,A=Math.abs(I)<.01,V=te>0&&A,M=H>0&&A,D=(de,G)=>{const re=parseFloat(G);v(ce=>({...ce,[de]:isNaN(re)?0:re}))},j=()=>{V&&(Object.entries(g).forEach(([de,G])=>{G>0&&i(de,G,_||"Deposit",new Date)}),f(""),v({}),S(""),e())},P=()=>{q.trim()&&(o(q,g,_),N(!1),O(""))},Ce=de=>{const G=Object.fromEntries(Object.entries(de.distributions).filter(([ce])=>Z.some(xe=>xe.id===ce)));v(G);const re=Object.values(G).reduce((ce,xe)=>ce+xe,0);f(re.toFixed(2)),S(de.note||""),U(!1)};return n?w.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-gray-50 dark:bg-black sm:bg-gray-100 dark:sm:bg-black",children:[w.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 flex items-center justify-between shadow-sm shrink-0",children:[w.jsx("button",{onClick:e,className:"text-blue-600 dark:text-blue-400 font-medium text-base",children:"Cancel"}),w.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:"Distribute Funds"}),w.jsx("button",{onClick:j,disabled:!V,className:`font-bold text-base ${V?"text-blue-600 dark:text-blue-400":"text-gray-300 dark:text-zinc-600"}`,children:"Apply"})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 relative",children:[w.jsxs("div",{className:"sticky top-0 z-10 bg-gray-50/95 dark:bg-black/95 backdrop-blur-sm border-b border-gray-200 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[w.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-zinc-400 mb-1",children:"Deposit Amount"}),w.jsxs("div",{className:"flex items-center",children:[w.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mr-2",children:"$"}),w.jsx("input",{type:"number",inputMode:"decimal",value:d,onChange:de=>f(de.target.value),placeholder:"0.00",className:"text-3xl font-bold text-black dark:text-white w-full focus:outline-none bg-white dark:bg-zinc-900 placeholder-gray-300 dark:placeholder-zinc-600 appearance-none",autoFocus:!0})]})]}),w.jsxs("div",{className:"flex justify-between items-center text-sm font-medium px-1",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Distributed"}),w.jsxs("span",{className:"text-gray-900 dark:text-white",children:["$",H.toFixed(2)]})]}),w.jsxs("div",{className:"flex flex-col items-end",children:[w.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Remaining"}),w.jsxs("span",{className:`text-lg ${I===0?"text-green-600 dark:text-green-400":I<0?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:["$",I.toFixed(2)]})]})]}),!A&&te>0&&w.jsx("div",{className:"text-center text-sm font-medium text-red-500 dark:text-red-400",children:I>0?`You still have $${I.toFixed(2)} to distribute`:`You have over-allocated by $${Math.abs(I).toFixed(2)}`}),w.jsx("div",{className:"pt-2",children:M?w.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[w.jsxs("button",{onClick:()=>U(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[w.jsx(wm,{size:16}),"Load Template"]}),w.jsxs("button",{onClick:()=>N(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 text-green-400 rounded-lg font-medium text-sm hover:bg-gray-700 transition-colors",children:[w.jsx(x4,{size:16}),"Save Template"]})]}):w.jsxs("div",{className:"flex flex-col gap-3",children:[w.jsxs("button",{onClick:()=>U(!0),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[w.jsx(wm,{size:16}),"Load Template"]}),w.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center px-2 leading-relaxed",children:"You can save this as a template once the Deposit Amount and Total Distributed are equal (Remaining = $0)."})]})}),w.jsx("input",{type:"text",placeholder:"Distribution Note (Optional)",value:_,onChange:de=>S(de.target.value),className:"w-full p-3 text-sm bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:outline-none text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600"})]}),w.jsx("div",{className:"p-4 space-y-3",children:Z.filter(de=>de.id).map(de=>{const G=de.id,re=g[G]||0,ce=H>0?Math.round(re/H*100):0;return w.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex items-center justify-between",children:[w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[w.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:de.name}),re>0&&w.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:[ce,"%"]})]}),w.jsxs("div",{className:"text-xs text-gray-400 dark:text-zinc-400",children:["Balance: $",h(de.id).toNumber().toFixed(2)]})]}),w.jsxs("div",{className:"w-32 relative",children:[w.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",children:"$"}),w.jsx("input",{type:"number",inputMode:"decimal",value:g[G]===0?"":g[G],onChange:xe=>D(G,xe.target.value),placeholder:"0",className:"w-full pl-6 pr-6 py-2 text-right bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 outline-none font-mono text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600 appearance-none"})]})]},G)})})]}),C&&w.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-gray-200 dark:border-zinc-700",children:[w.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Save Template"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Name your template to easily recall this distribution later."}),w.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g. Payday Split",value:q,onChange:de=>O(de.target.value),className:"w-full p-3 bg-gray-100 dark:bg-black rounded-xl mb-4 text-gray-900 dark:text-white border border-transparent focus:border-blue-500 outline-none"}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-semibold",children:"Cancel"}),w.jsx("button",{onClick:P,disabled:!q.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold disabled:opacity-50",children:"Save"})]})]})}),k&&w.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-end sm:items-center justify-center sm:p-4",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-t-2xl sm:rounded-2xl shadow-2xl border-t sm:border border-gray-200 dark:border-zinc-700 max-h-[80vh] flex flex-col",children:[w.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-zinc-800 flex justify-between items-center",children:[w.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Load Template"}),w.jsx("button",{onClick:()=>U(!1),className:"p-1 rounded-full bg-gray-100 dark:bg-zinc-800 text-gray-500",children:w.jsx(Jv,{size:20})})]}),w.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:s.length===0?w.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No templates saved yet."}):s.map(de=>w.jsxs("div",{className:"flex items-center gap-2 p-3 hover:bg-gray-50 dark:hover:bg-zinc-800/50 rounded-xl group transition-colors",children:[w.jsxs("button",{onClick:()=>Ce(de),className:"flex-1 text-left",children:[w.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:de.name}),w.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: $",Object.values(de.distributions).reduce((G,re)=>G+re,0).toFixed(2),de.note&&w.jsxs("span",{className:"ml-2 opacity-75",children:[" ",de.note]})]})]}),w.jsx("button",{onClick:G=>{G.stopPropagation(),confirm("Delete this template?")&&l(de.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:w.jsx(Sm,{size:18})})]},de.id))})]})})]}):null},nz=()=>{const{envelopes:n,transactions:e,fetchData:t,isOnline:i,pendingSync:s,syncData:o,isLoading:l,getEnvelopeBalance:h}=wt(),[d,f]=z.useState(!1),g=jo();z.useEffect(()=>{n.length===0&&t()},[]);const v=[...n].sort((S,C)=>S.name.localeCompare(C.name));console.log(" EnvelopeListView render - calculating balances"),console.log(" Current envelopes:",n.length),console.log(" Current transactions:",e.length);const _=n.reduce((S,C)=>{const N=h(C.id);return console.log(` Envelope ${C.name} (${C.id}): $${N.toNumber().toFixed(2)}`),S+N.toNumber()},0);return console.log(" Total balance:",_),w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[w.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-10",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("div",{className:"flex items-center gap-2",children:i?l?w.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[w.jsx(j0,{size:16,className:"animate-spin"}),w.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):s?w.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[w.jsx(j0,{size:16}),w.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):w.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[w.jsx(B4,{size:16}),w.jsx("span",{className:"text-sm font-medium",children:"Synced"})]}):w.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[w.jsx(z4,{size:16}),w.jsx("span",{className:"text-sm font-medium",children:l?"Offline (Saving...)":"Offline"})]})}),w.jsxs("div",{className:"flex gap-4 text-blue-500",children:[w.jsx("button",{onClick:()=>g("/transactions"),children:w.jsx(b4,{size:22})}),w.jsx("button",{onClick:()=>g("/settings"),children:w.jsx(C4,{size:22})})]})]}),w.jsx("div",{className:"mt-4",children:w.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"House Expenses"})})]}),w.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[w.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 space-y-4",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-gray-600 dark:text-zinc-400 font-medium",children:"Total Balance"}),w.jsxs("span",{className:`text-2xl font-bold ${_>=0?"text-green-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[_<0?"-":"","$",Math.abs(_).toFixed(2)]})]}),w.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-50 dark:bg-blue-900/40 text-blue-600 dark:text-blue-300 py-3 rounded-xl font-semibold active:bg-blue-100 dark:active:bg-blue-900/60 transition-colors",children:[w.jsx(v4,{size:20,className:"rotate-90"}),"Distribute Funds"]})]}),w.jsx("section",{children:v.length===0?w.jsxs("div",{className:"text-center py-10 space-y-3",children:[w.jsx(L4,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto"}),w.jsx("h3",{className:"text-gray-500 dark:text-zinc-400 font-medium",children:"No envelopes yet"}),w.jsx("button",{onClick:()=>g("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium",children:"Create First Envelope"})]}):w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex justify-between items-end px-1",children:[w.jsx("h2",{className:"text-sm font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-wider",children:"My Envelopes"}),w.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-300 font-medium",onClick:()=>g("/add-envelope"),children:"+ New Envelope"})]}),v.map(S=>w.jsxs("div",{onClick:()=>g(`/envelope/${S.id}`),className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex justify-between items-center active:scale-[0.99] transition-transform cursor-pointer",children:[w.jsx("div",{className:"flex flex-col",children:w.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:S.name})}),w.jsxs("span",{className:`font-bold ${h(S.id).toNumber()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-emerald-400"}`,children:[h(S.id).toNumber()<0?"-":"","$",Math.abs(h(S.id).toNumber()).toFixed(2)]})]},S.id))]})})]}),w.jsx("button",{onClick:()=>g("/add-transaction"),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",children:w.jsx(l4,{size:28})}),w.jsx(tz,{isOpen:d,onClose:()=>f(!1)})]})},db=vI((n,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(t,i="neutral",s)=>{n({message:t,type:i,isVisible:!0,undoAction:s}),setTimeout(()=>{e().hideToast()},4e3)},hideToast:()=>{n({isVisible:!1})}})),YC=({isVisible:n,onClose:e,mode:t,currentEnvelope:i,initialTransaction:s})=>{const{addToEnvelope:o,spendFromEnvelope:l,updateTransaction:h,deleteTransaction:d}=wt(),[f,g]=z.useState(""),[v,_]=z.useState(""),[S,C]=z.useState(new Date().toISOString().split("T")[0]);if(z.useEffect(()=>{if(!n)return;const O=window.setTimeout(()=>{if(t==="edit"&&s){g(s.amount.toString()),_(s.description);try{const Z=new Date(s.date);isNaN(Z.getTime())?(console.warn("Invalid date in transaction:",s.date),C(new Date().toISOString().split("T")[0])):C(Z.toISOString().split("T")[0])}catch(Z){console.error("Error parsing transaction date:",Z),C(new Date().toISOString().split("T")[0])}}else g(""),_(""),C(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(O)},[n,t,s]),!n)return null;const N=O=>{O.preventDefault();const Z=parseFloat(f);isNaN(Z)||Z<=0||(t==="add"?o(i.id,Z,v,new Date(S)):t==="spend"?l(i.id,Z,v,new Date(S)):t==="edit"&&s&&h({...s,amount:Z,description:v,date:new Date(S).toISOString()}),e())},k=()=>{!s||!s.id||window.confirm("Are you sure you want to delete this transaction?")&&(d(s.id),e())},U=t==="add"?"Add Money":t==="spend"?"Spend Money":"Edit Transaction",q=t==="add"?"text-green-500":"text-red-500";return w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[w.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[w.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),w.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:U}),w.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0,children:"Save"})]}),w.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),w.jsxs("div",{className:"relative inline-block",children:[w.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${q}`,children:"$"}),w.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:f,onChange:O=>{const Z=O.target.value;(Z===""||!isNaN(parseFloat(Z))&&parseFloat(Z)>=0)&&g(Z)},onKeyDown:O=>{(O.key==="e"||O.key==="E"||O.key==="+"||O.key==="-")&&O.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${q} placeholder-gray-700`})]})]}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),w.jsx("input",{type:"text",value:v,onChange:O=>_(O.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),w.jsx("input",{type:"date",value:S,onChange:O=>{console.log("Date changed to:",O.target.value),C(O.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),t==="edit"&&w.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:w.jsxs("button",{type:"button",onClick:k,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[w.jsx(yI,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},iz=({isVisible:n,onClose:e,sourceEnvelope:t})=>{const{envelopes:i,transferFunds:s}=wt(),[o,l]=z.useState(""),[h,d]=z.useState(""),[f,g]=z.useState(""),[v,_]=z.useState(new Date().toISOString().split("T")[0]),S=i.filter(k=>k.id!==t.id);if(z.useEffect(()=>{if(!n)return;const k=window.setTimeout(()=>{l(""),d(""),g(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(k)},[n]),!n)return null;const C=k=>{k.preventDefault();const U=parseFloat(h);isNaN(U)||U<=0||!o||(s(t.id,o,U,f,new Date(v)),e())},N=i.find(k=>k.id===o);return w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[w.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[w.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),w.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),w.jsx("button",{onClick:C,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!h||parseFloat(h)<=0||!o,children:"Transfer"})]}),w.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),w.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.name})]}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),w.jsxs("select",{value:o,onChange:k=>l(k.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[w.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),S.map(k=>w.jsx("option",{value:k.id,className:"bg-white dark:bg-zinc-900",children:k.name},k.id))]})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),w.jsxs("div",{className:"relative inline-block",children:[w.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),w.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:h,onChange:k=>d(k.target.value),onKeyDown:k=>{(k.key==="e"||k.key==="E"||k.key==="+"||k.key==="-")&&k.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),w.jsx("input",{type:"text",value:f,onChange:k=>g(k.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),w.jsx("input",{type:"date",value:v,onChange:k=>_(k.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),N&&h&&parseFloat(h)>0&&w.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",w.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(h).toFixed(2)]})," from"," ",w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t.name})," to"," ",w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:N.name})]})]})]})})},rz=n=>{if(!n)return"No Date";try{let e;return n&&typeof n=="object"&&n.toDate&&typeof n.toDate=="function"?e=n.toDate():typeof n=="number"?n<1e10?e=new Date((n+978307200)*1e3):e=new Date(n):e=new Date(n),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},sz=n=>{const e=typeof n=="string"?parseFloat(n):n;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},XC=({transaction:n,envelopeName:e,onReconcile:t,onEdit:i})=>{if(!n)return null;const s=n.type==="Income",o=n.type==="Expense";let l="text-gray-900 dark:text-white";return s&&(l="text-green-600 dark:text-green-400"),o&&(l="text-red-600 dark:text-red-400"),w.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[w.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:n.description||"No Description"}),n.reconciled&&w.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),w.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[w.jsx("span",{children:rz(n.date)}),e&&w.jsxs(w.Fragment,{children:[w.jsx("span",{children:""}),w.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${l}`,children:[o?"-":s?"+":"",sz(n.amount)]}),t?w.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),t()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":n.reconciled?"Mark as unreconciled":"Mark as reconciled",children:n.reconciled?w.jsx(Vw,{className:"text-green-500",size:20}):w.jsx(Mw,{className:"text-gray-400",size:20})}):w.jsx("span",{children:n.reconciled?w.jsx(Vw,{className:"text-green-500",size:20}):w.jsx(Mw,{className:"text-gray-400",size:20})})]})]})},fb=z.createContext({});function qp(n){const e=z.useRef(null);return e.current===null&&(e.current=n()),e.current}const mb=typeof window<"u",pb=mb?z.useLayoutEffect:z.useEffect,Hp=z.createContext(null);function gb(n,e){n.indexOf(e)===-1&&n.push(e)}function yb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ss=(n,e,t)=>t>e?e:t<n?n:t;let vb=()=>{};const as={},WC=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function ZC(n){return typeof n=="object"&&n!==null}const JC=n=>/^0[^.\s]+$/u.test(n);function _b(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ti=n=>n,az=(n,e)=>t=>e(n(t)),rd=(...n)=>n.reduce(az),Oh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class bb{constructor(){this.subscriptions=[]}add(e){return gb(this.subscriptions,e),()=>yb(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _r=n=>n*1e3,_i=n=>n/1e3;function eD(n,e){return e?n*(1e3/e):0}const tD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,oz=1e-7,lz=12;function uz(n,e,t,i,s){let o,l,h=0;do l=e+(t-e)/2,o=tD(l,i,s)-n,o>0?t=l:e=l;while(Math.abs(o)>oz&&++h<lz);return l}function sd(n,e,t,i){if(n===e&&t===i)return Ti;const s=o=>uz(o,0,1,n,t);return o=>o===0||o===1?o:tD(s(o),e,i)}const nD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,iD=n=>e=>1-n(1-e),rD=sd(.33,1.53,.69,.99),Tb=iD(rD),sD=nD(Tb),aD=n=>(n*=2)<1?.5*Tb(n):.5*(2-Math.pow(2,-10*(n-1))),Eb=n=>1-Math.sin(Math.acos(n)),oD=iD(Eb),lD=nD(Eb),cz=sd(.42,0,1,1),hz=sd(0,0,.58,1),uD=sd(.42,0,.58,1),dz=n=>Array.isArray(n)&&typeof n[0]!="number",cD=n=>Array.isArray(n)&&typeof n[0]=="number",fz={linear:Ti,easeIn:cz,easeInOut:uD,easeOut:hz,circIn:Eb,circInOut:lD,circOut:oD,backIn:Tb,backInOut:sD,backOut:rD,anticipate:aD},mz=n=>typeof n=="string",jx=n=>{if(cD(n)){vb(n.length===4);const[e,t,i,s]=n;return sd(e,t,i,s)}else if(mz(n))return fz[n];return n},Qf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function pz(n,e){let t=new Set,i=new Set,s=!1,o=!1;const l=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(f.schedule(g),n()),g(h)}const f={schedule:(g,v=!1,_=!1)=>{const C=_&&s?t:i;return v&&l.add(g),C.has(g)||C.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(h=g,s){o=!0;return}s=!0,[t,i]=[i,t],t.forEach(d),t.clear(),s=!1,o&&(o=!1,f.process(g))}};return f}const gz=40;function hD(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=Qf.reduce((O,Z)=>(O[Z]=pz(o),O),{}),{setup:h,read:d,resolveKeyframes:f,preUpdate:g,update:v,preRender:_,render:S,postRender:C}=l,N=()=>{const O=as.useManualTiming?s.timestamp:performance.now();t=!1,as.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(O-s.timestamp,gz),1)),s.timestamp=O,s.isProcessing=!0,h.process(s),d.process(s),f.process(s),g.process(s),v.process(s),_.process(s),S.process(s),C.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(N))},k=()=>{t=!0,i=!0,s.isProcessing||n(N)};return{schedule:Qf.reduce((O,Z)=>{const te=l[Z];return O[Z]=(H,I=!1,A=!1)=>(t||k(),te.schedule(H,I,A)),O},{}),cancel:O=>{for(let Z=0;Z<Qf.length;Z++)l[Qf[Z]].cancel(O)},state:s,steps:l}}const{schedule:Et,cancel:ga,state:mn,steps:T0}=hD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ti,!0);let vm;function yz(){vm=void 0}const Fn={now:()=>(vm===void 0&&Fn.set(mn.isProcessing||as.useManualTiming?mn.timestamp:performance.now()),vm),set:n=>{vm=n,queueMicrotask(yz)}},dD=n=>e=>typeof e=="string"&&e.startsWith(n),wb=dD("--"),vz=dD("var(--"),Sb=n=>vz(n)?_z.test(n.split("/*")[0].trim()):!1,_z=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ku={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Lh={...ku,transform:n=>ss(0,1,n)},Yf={...ku,default:1},hh=n=>Math.round(n*1e5)/1e5,xb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bz(n){return n==null}const Tz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ab=(n,e)=>t=>!!(typeof t=="string"&&Tz.test(t)&&t.startsWith(n)||e&&!bz(t)&&Object.prototype.hasOwnProperty.call(t,e)),fD=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,o,l,h]=i.match(xb);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:h!==void 0?parseFloat(h):1}},Ez=n=>ss(0,255,n),E0={...ku,transform:n=>Math.round(Ez(n))},go={test:Ab("rgb","red"),parse:fD("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+E0.transform(n)+", "+E0.transform(e)+", "+E0.transform(t)+", "+hh(Lh.transform(i))+")"};function wz(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const xv={test:Ab("#"),parse:wz,transform:go.transform},ad=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ys=ad("deg"),br=ad("%"),Re=ad("px"),Sz=ad("vh"),xz=ad("vw"),zx={...br,parse:n=>br.parse(n)/100,transform:n=>br.transform(n*100)},Hl={test:Ab("hsl","hue"),parse:fD("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+br.transform(hh(e))+", "+br.transform(hh(t))+", "+hh(Lh.transform(i))+")"},Yt={test:n=>go.test(n)||xv.test(n)||Hl.test(n),parse:n=>go.test(n)?go.parse(n):Hl.test(n)?Hl.parse(n):xv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?go.transform(n):Hl.transform(n),getAnimatableNone:n=>{const e=Yt.parse(n);return e.alpha=0,Yt.transform(e)}},Az=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Iz(n){return isNaN(n)&&typeof n=="string"&&(n.match(xb)?.length||0)+(n.match(Az)?.length||0)>0}const mD="number",pD="color",Rz="var",Cz="var(",Ux="${}",Dz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let o=0;const h=e.replace(Dz,d=>(Yt.test(d)?(i.color.push(o),s.push(pD),t.push(Yt.parse(d))):d.startsWith(Cz)?(i.var.push(o),s.push(Rz),t.push(d)):(i.number.push(o),s.push(mD),t.push(parseFloat(d))),++o,Ux)).split(Ux);return{values:t,split:h,indexes:i,types:s}}function gD(n){return jh(n).values}function yD(n){const{split:e,types:t}=jh(n),i=e.length;return s=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],s[l]!==void 0){const h=t[l];h===mD?o+=hh(s[l]):h===pD?o+=Yt.transform(s[l]):o+=s[l]}return o}}const Nz=n=>typeof n=="number"?0:Yt.test(n)?Yt.getAnimatableNone(n):n;function kz(n){const e=gD(n);return yD(n)(e.map(Nz))}const ya={test:Iz,parse:gD,createTransformer:yD,getAnimatableNone:kz};function w0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Vz({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const h=t<.5?t*(1+e):t+e-t*e,d=2*t-h;s=w0(d,h,n+1/3),o=w0(d,h,n),l=w0(d,h,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function ep(n,e){return t=>t>0?e:n}const xt=(n,e,t)=>n+(e-n)*t,S0=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},Mz=[xv,go,Hl],Pz=n=>Mz.find(e=>e.test(n));function Bx(n){const e=Pz(n);if(!e)return!1;let t=e.parse(n);return e===Hl&&(t=Vz(t)),t}const Fx=(n,e)=>{const t=Bx(n),i=Bx(e);if(!t||!i)return ep(n,e);const s={...t};return o=>(s.red=S0(t.red,i.red,o),s.green=S0(t.green,i.green,o),s.blue=S0(t.blue,i.blue,o),s.alpha=xt(t.alpha,i.alpha,o),go.transform(s))},Av=new Set(["none","hidden"]);function Oz(n,e){return Av.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Lz(n,e){return t=>xt(n,e,t)}function Ib(n){return typeof n=="number"?Lz:typeof n=="string"?Sb(n)?ep:Yt.test(n)?Fx:Uz:Array.isArray(n)?vD:typeof n=="object"?Yt.test(n)?Fx:jz:ep}function vD(n,e){const t=[...n],i=t.length,s=n.map((o,l)=>Ib(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)t[l]=s[l](o);return t}}function jz(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=Ib(n[s])(n[s],e[s]));return s=>{for(const o in i)t[o]=i[o](s);return t}}function zz(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][i[o]],h=n.values[l]??0;t[s]=h,i[o]++}return t}const Uz=(n,e)=>{const t=ya.createTransformer(e),i=jh(n),s=jh(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Av.has(n)&&!s.values.length||Av.has(e)&&!i.values.length?Oz(n,e):rd(vD(zz(i,s),s.values),t):ep(n,e)};function _D(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?xt(n,e,t):Ib(n)(n,e)}const Bz=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Et.update(e,t),stop:()=>ga(e),now:()=>mn.isProcessing?mn.timestamp:Fn.now()}},bD=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)i+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},tp=2e4;function Rb(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<tp;)e+=t,i=n.next(e);return e>=tp?1/0:e}function Fz(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(Rb(i),tp);return{type:"keyframes",ease:o=>i.next(s*o).value/e,duration:_i(s)}}const qz=5;function TD(n,e,t){const i=Math.max(e-qz,0);return eD(t-n(i),e-i)}const Ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},x0=.001;function Hz({duration:n=Ct.duration,bounce:e=Ct.bounce,velocity:t=Ct.velocity,mass:i=Ct.mass}){let s,o,l=1-e;l=ss(Ct.minDamping,Ct.maxDamping,l),n=ss(Ct.minDuration,Ct.maxDuration,_i(n)),l<1?(s=f=>{const g=f*l,v=g*n,_=g-t,S=Iv(f,l),C=Math.exp(-v);return x0-_/S*C},o=f=>{const v=f*l*n,_=v*t+t,S=Math.pow(l,2)*Math.pow(f,2)*n,C=Math.exp(-v),N=Iv(Math.pow(f,2),l);return(-s(f)+x0>0?-1:1)*((_-S)*C)/N}):(s=f=>{const g=Math.exp(-f*n),v=(f-t)*n+1;return-x0+g*v},o=f=>{const g=Math.exp(-f*n),v=(t-f)*(n*n);return g*v});const h=5/n,d=$z(s,o,h);if(n=_r(n),isNaN(d))return{stiffness:Ct.stiffness,damping:Ct.damping,duration:n};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:n}}}const Gz=12;function $z(n,e,t){let i=t;for(let s=1;s<Gz;s++)i=i-n(i)/e(i);return i}function Iv(n,e){return n*Math.sqrt(1-e*e)}const Kz=["duration","bounce"],Qz=["stiffness","damping","mass"];function qx(n,e){return e.some(t=>n[t]!==void 0)}function Yz(n){let e={velocity:Ct.velocity,stiffness:Ct.stiffness,damping:Ct.damping,mass:Ct.mass,isResolvedFromDuration:!1,...n};if(!qx(n,Qz)&&qx(n,Kz))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,o=2*ss(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Ct.mass,stiffness:s,damping:o}}else{const t=Hz(n);e={...e,...t,mass:Ct.mass},e.isResolvedFromDuration=!0}return e}function np(n=Ct.visualDuration,e=Ct.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],h={done:!1,value:o},{stiffness:d,damping:f,mass:g,duration:v,velocity:_,isResolvedFromDuration:S}=Yz({...t,velocity:-_i(t.velocity||0)}),C=_||0,N=f/(2*Math.sqrt(d*g)),k=l-o,U=_i(Math.sqrt(d/g)),q=Math.abs(k)<5;i||(i=q?Ct.restSpeed.granular:Ct.restSpeed.default),s||(s=q?Ct.restDelta.granular:Ct.restDelta.default);let O;if(N<1){const te=Iv(U,N);O=H=>{const I=Math.exp(-N*U*H);return l-I*((C+N*U*k)/te*Math.sin(te*H)+k*Math.cos(te*H))}}else if(N===1)O=te=>l-Math.exp(-U*te)*(k+(C+U*k)*te);else{const te=U*Math.sqrt(N*N-1);O=H=>{const I=Math.exp(-N*U*H),A=Math.min(te*H,300);return l-I*((C+N*U*k)*Math.sinh(A)+te*k*Math.cosh(A))/te}}const Z={calculatedDuration:S&&v||null,next:te=>{const H=O(te);if(S)h.done=te>=v;else{let I=te===0?C:0;N<1&&(I=te===0?_r(C):TD(O,te,H));const A=Math.abs(I)<=i,V=Math.abs(l-H)<=s;h.done=A&&V}return h.value=h.done?l:H,h},toString:()=>{const te=Math.min(Rb(Z),tp),H=bD(I=>Z.next(te*I).value,te,30);return te+"ms "+H},toTransition:()=>{}};return Z}np.applyToOptions=n=>{const e=Fz(n,100,np);return n.ease=e.ease,n.duration=_r(e.duration),n.type="keyframes",n};function Rv({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:h,max:d,restDelta:f=.5,restSpeed:g}){const v=n[0],_={done:!1,value:v},S=A=>h!==void 0&&A<h||d!==void 0&&A>d,C=A=>h===void 0?d:d===void 0||Math.abs(h-A)<Math.abs(d-A)?h:d;let N=t*e;const k=v+N,U=l===void 0?k:l(k);U!==k&&(N=U-v);const q=A=>-N*Math.exp(-A/i),O=A=>U+q(A),Z=A=>{const V=q(A),M=O(A);_.done=Math.abs(V)<=f,_.value=_.done?U:M};let te,H;const I=A=>{S(_.value)&&(te=A,H=np({keyframes:[_.value,C(_.value)],velocity:TD(O,A,_.value),damping:s,stiffness:o,restDelta:f,restSpeed:g}))};return I(0),{calculatedDuration:null,next:A=>{let V=!1;return!H&&te===void 0&&(V=!0,Z(A),I(A)),te!==void 0&&A>=te?H.next(A-te):(!V&&Z(A),_)}}}function Xz(n,e,t){const i=[],s=t||as.mix||_D,o=n.length-1;for(let l=0;l<o;l++){let h=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Ti:e;h=rd(d,h)}i.push(h)}return i}function Wz(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const o=n.length;if(vb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=Xz(e,i,s),d=h.length,f=g=>{if(l&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const _=Oh(n[v],n[v+1],g);return h[v](_)};return t?g=>f(ss(n[0],n[o-1],g)):f}function Zz(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=Oh(0,e,i);n.push(xt(t,1,s))}}function Jz(n){const e=[0];return Zz(e,n.length-1),e}function eU(n,e){return n.map(t=>t*e)}function tU(n,e){return n.map(()=>e||uD).splice(0,n.length-1)}function dh({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=dz(i)?i.map(jx):jx(i),o={done:!1,value:e[0]},l=eU(t&&t.length===e.length?t:Jz(e),n),h=Wz(l,e,{ease:Array.isArray(s)?s:tU(e,s)});return{calculatedDuration:n,next:d=>(o.value=h(d),o.done=d>=n,o)}}const nU=n=>n!==null;function Cb(n,{repeat:e,repeatType:t="loop"},i,s=1){const o=n.filter(nU),h=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!h||i===void 0?o[h]:i}const iU={decay:Rv,inertia:Rv,tween:dh,keyframes:dh,spring:np};function ED(n){typeof n.type=="string"&&(n.type=iU[n.type])}class Db{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const rU=n=>n/100;class Nb extends Db{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Fn.now()&&this.tick(Fn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ED(e);const{type:t=dh,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:h}=e;const d=t||dh;d!==dh&&typeof h[0]!="number"&&(this.mixKeyframes=rd(rU,_D(h[0],h[1])),h=[0,100]);const f=d({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=Rb(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:v,repeatType:_,repeatDelay:S,type:C,onUpdate:N,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const U=this.currentTime-f*(this.playbackSpeed>=0?1:-1),q=this.playbackSpeed>=0?U<0:U>s;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let O=this.currentTime,Z=i;if(v){const A=Math.min(this.currentTime,s)/h;let V=Math.floor(A),M=A%1;!M&&A>=1&&(M=1),M===1&&V--,V=Math.min(V,v+1),!!(V%2)&&(_==="reverse"?(M=1-M,S&&(M-=S/h)):_==="mirror"&&(Z=l)),O=ss(0,1,M)*h}const te=q?{done:!1,value:g[0]}:Z.next(O);o&&(te.value=o(te.value));let{done:H}=te;!q&&d!==null&&(H=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return I&&C!==Rv&&(te.value=Cb(g,this.options,k,this.speed)),N&&N(te.value),I&&this.finish(),te}then(e,t){return this.finished.then(e,t)}get duration(){return _i(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_i(e)}get time(){return _i(this.currentTime)}set time(e){e=_r(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Fn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=_i(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Bz,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function sU(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const yo=n=>n*180/Math.PI,Cv=n=>{const e=yo(Math.atan2(n[1],n[0]));return Dv(e)},aU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Cv,rotateZ:Cv,skewX:n=>yo(Math.atan(n[1])),skewY:n=>yo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Dv=n=>(n=n%360,n<0&&(n+=360),n),Hx=Cv,Gx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),$x=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),oU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Gx,scaleY:$x,scale:n=>(Gx(n)+$x(n))/2,rotateX:n=>Dv(yo(Math.atan2(n[6],n[5]))),rotateY:n=>Dv(yo(Math.atan2(-n[2],n[0]))),rotateZ:Hx,rotate:Hx,skewX:n=>yo(Math.atan(n[4])),skewY:n=>yo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Nv(n){return n.includes("scale")?1:0}function kv(n,e){if(!n||n==="none")return Nv(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=oU,s=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=aU,s=h}if(!s)return Nv(e);const o=i[e],l=s[1].split(",").map(uU);return typeof o=="function"?o(l):l[o]}const lU=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return kv(t,e)};function uU(n){return parseFloat(n.trim())}const Vu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mu=new Set(Vu),Kx=n=>n===ku||n===Re,cU=new Set(["x","y","z"]),hU=Vu.filter(n=>!cU.has(n));function dU(n){const e=[];return hU.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const So={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>kv(e,"x"),y:(n,{transform:e})=>kv(e,"y")};So.translateX=So.x;So.translateY=So.y;const xo=new Set;let Vv=!1,Mv=!1,Pv=!1;function wD(){if(Mv){const n=Array.from(xo).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=dU(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([o,l])=>{i.getValue(o)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Mv=!1,Vv=!1,xo.forEach(n=>n.complete(Pv)),xo.clear()}function SD(){xo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Mv=!0)})}function fU(){Pv=!0,SD(),wD(),Pv=!1}class kb{constructor(e,t,i,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(xo.add(this),Vv||(Vv=!0,Et.read(SD),Et.resolveKeyframes(wD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const h=i.readValue(t,l);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}sU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),xo.delete(this)}cancel(){this.state==="scheduled"&&(xo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const mU=n=>n.startsWith("--");function pU(n,e,t){mU(e)?n.style.setProperty(e,t):n.style[e]=t}const gU=_b(()=>window.ScrollTimeline!==void 0),yU={};function vU(n,e){const t=_b(n);return()=>yU[e]??t()}const xD=vU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Jc=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Qx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jc([0,.65,.55,1]),circOut:Jc([.55,0,1,.45]),backIn:Jc([.31,.01,.66,-.59]),backOut:Jc([.33,1.53,.69,.99])};function AD(n,e){if(n)return typeof n=="function"?xD()?bD(n,e):"ease-out":cD(n)?Jc(n):Array.isArray(n)?n.map(t=>AD(t,e)||Qx.easeOut):Qx[n]}function _U(n,e,t,{delay:i=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:h="easeOut",times:d}={},f=void 0){const g={[e]:t};d&&(g.offset=d);const v=AD(h,s);Array.isArray(v)&&(g.easing=v);const _={delay:i,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),n.animate(g,_)}function ID(n){return typeof n=="function"&&"applyToOptions"in n}function bU({type:n,...e}){return ID(n)&&xD()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class TU extends Db{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,vb(typeof e.type!="string");const f=bU(e);this.animation=_U(t,i,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Cb(s,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):pU(t,i,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return _i(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_i(e)}get time(){return _i(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=_r(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&gU()?(this.animation.timeline=e,Ti):t(this)}}const RD={anticipate:aD,backInOut:sD,circInOut:lD};function EU(n){return n in RD}function wU(n){typeof n.ease=="string"&&EU(n.ease)&&(n.ease=RD[n.ease])}const Yx=10;class SU extends TU{constructor(e){wU(e),ED(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new Nb({...l,autoplay:!1}),d=_r(this.finishedTime??this.time);t.setWithVelocity(h.sample(d-Yx).value,h.sample(d).value,Yx),h.stop()}}const Xx=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ya.test(n)||n==="0")&&!n.startsWith("url("));function xU(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function AU(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=Xx(s,e),h=Xx(o,e);return!l||!h?!1:xU(n)||(t==="spring"||ID(t))&&i}function Ov(n){n.duration=0,n.type="keyframes"}const IU=new Set(["opacity","clipPath","filter","transform"]),RU=_b(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function CU(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:o,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return RU()&&t&&IU.has(t)&&(t!=="transform"||!f)&&!d&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}const DU=40;class NU extends Db{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:h,name:d,motionValue:f,element:g,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Fn.now();const _={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:o,repeatType:l,name:d,motionValue:f,element:g,...v},S=g?.KeyframeResolver||kb;this.keyframeResolver=new S(h,(C,N,k)=>this.onKeyframesResolved(C,N,_,!k),d,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:h,delay:d,isHandoff:f,onUpdate:g}=i;this.resolvedAt=Fn.now(),AU(e,o,l,h)||((as.instantAnimations||!d)&&g?.(Cb(e,i,t)),e[0]=e[e.length-1],Ov(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>DU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},S=!f&&CU(_)?new SU({..._,element:_.motionValue.owner.current}):new Nb(_);S.finished.then(()=>this.notifyFinished()).catch(Ti),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),fU()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const kU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function VU(n){const e=kU.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function CD(n,e,t=1){const[i,s]=VU(n);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return WC(l)?parseFloat(l):l}return Sb(s)?CD(s,e,t+1):s}function Vb(n,e){return n?.[e]??n?.default??n}const DD=new Set(["width","height","top","left","right","bottom",...Vu]),MU={test:n=>n==="auto",parse:n=>n},ND=n=>e=>e.test(n),kD=[ku,Re,br,Ys,xz,Sz,MU],Wx=n=>kD.find(ND(n));function PU(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||JC(n):!0}const OU=new Set(["brightness","contrast","saturate","opacity"]);function LU(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(xb)||[];if(!i)return n;const s=t.replace(i,"");let o=OU.has(e)?1:0;return i!==t&&(o*=100),e+"("+o+s+")"}const jU=/\b([a-z-]*)\(.*?\)/gu,Lv={...ya,getAnimatableNone:n=>{const e=n.match(jU);return e?e.map(LU).join(" "):n}},Zx={...ku,transform:Math.round},zU={rotate:Ys,rotateX:Ys,rotateY:Ys,rotateZ:Ys,scale:Yf,scaleX:Yf,scaleY:Yf,scaleZ:Yf,skew:Ys,skewX:Ys,skewY:Ys,distance:Re,translateX:Re,translateY:Re,translateZ:Re,x:Re,y:Re,z:Re,perspective:Re,transformPerspective:Re,opacity:Lh,originX:zx,originY:zx,originZ:Re},Mb={borderWidth:Re,borderTopWidth:Re,borderRightWidth:Re,borderBottomWidth:Re,borderLeftWidth:Re,borderRadius:Re,radius:Re,borderTopLeftRadius:Re,borderTopRightRadius:Re,borderBottomRightRadius:Re,borderBottomLeftRadius:Re,width:Re,maxWidth:Re,height:Re,maxHeight:Re,top:Re,right:Re,bottom:Re,left:Re,padding:Re,paddingTop:Re,paddingRight:Re,paddingBottom:Re,paddingLeft:Re,margin:Re,marginTop:Re,marginRight:Re,marginBottom:Re,marginLeft:Re,backgroundPositionX:Re,backgroundPositionY:Re,...zU,zIndex:Zx,fillOpacity:Lh,strokeOpacity:Lh,numOctaves:Zx},UU={...Mb,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:Lv,WebkitFilter:Lv},VD=n=>UU[n];function MD(n,e){let t=VD(n);return t!==Lv&&(t=ya),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const BU=new Set(["auto","none","0"]);function FU(n,e,t){let i=0,s;for(;i<n.length&&!s;){const o=n[i];typeof o=="string"&&!BU.has(o)&&jh(o).values.length&&(s=n[i]),i++}if(s&&t)for(const o of e)n[o]=MD(t,s)}class qU extends kb{constructor(e,t,i,s,o){super(e,t,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),Sb(f))){const g=CD(f,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!DD.has(i)||e.length!==2)return;const[s,o]=e,l=Wx(s),h=Wx(o);if(l!==h)if(Kx(l)&&Kx(h))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else So[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||PU(e[s]))&&i.push(s);i.length&&FU(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=So[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=So[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,d])=>{e.getValue(h).set(d)}),this.resolveNoneKeyframes()}}function HU(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=t?.[n]??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const PD=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function OD(n){return ZC(n)&&"offsetHeight"in n}const Jx=30,GU=n=>!isNaN(parseFloat(n));class $U{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=Fn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Fn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=GU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new bb);const i=this.events[e].add(t);return e==="change"?()=>{i(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Jx)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Jx);return eD(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bu(n,e){return new $U(n,e)}const{schedule:Pb}=hD(queueMicrotask,!1),Oi={x:!1,y:!1};function LD(){return Oi.x||Oi.y}function KU(n){return n==="x"||n==="y"?Oi[n]?null:(Oi[n]=!0,()=>{Oi[n]=!1}):Oi.x||Oi.y?null:(Oi.x=Oi.y=!0,()=>{Oi.x=Oi.y=!1})}function jD(n,e){const t=HU(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function eA(n){return!(n.pointerType==="touch"||LD())}function QU(n,e,t={}){const[i,s,o]=jD(n,t),l=h=>{if(!eA(h))return;const{target:d}=h,f=e(d,h);if(typeof f!="function"||!d)return;const g=v=>{eA(v)&&(f(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return i.forEach(h=>{h.addEventListener("pointerenter",l,s)}),o}const zD=(n,e)=>e?n===e?!0:zD(n,e.parentElement):!1,Ob=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,YU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function XU(n){return YU.has(n.tagName)||n.tabIndex!==-1}const _m=new WeakSet;function tA(n){return e=>{e.key==="Enter"&&n(e)}}function A0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const WU=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=tA(()=>{if(_m.has(t))return;A0(t,"down");const s=tA(()=>{A0(t,"up")}),o=()=>A0(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function nA(n){return Ob(n)&&!LD()}function ZU(n,e,t={}){const[i,s,o]=jD(n,t),l=h=>{const d=h.currentTarget;if(!nA(h))return;_m.add(d);const f=e(d,h),g=(S,C)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),_m.has(d)&&_m.delete(d),nA(S)&&typeof f=="function"&&f(S,{success:C})},v=S=>{g(S,d===window||d===document||t.useGlobalTarget||zD(d,S.target))},_=S=>{g(S,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return i.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",l,s),OD(h)&&(h.addEventListener("focus",f=>WU(f,s)),!XU(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function UD(n){return ZC(n)&&"ownerSVGElement"in n}function JU(n){return UD(n)&&n.tagName==="svg"}const wn=n=>!!(n&&n.getVelocity),e8=[...kD,Yt,ya],t8=n=>e8.find(ND(n)),Lb=z.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function iA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function n8(...n){return e=>{let t=!1;const i=n.map(s=>{const o=iA(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():iA(n[s],null)}}}}function i8(...n){return z.useCallback(n8(...n),n)}class r8 extends z.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=OD(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function s8({children:n,isPresent:e,anchorX:t,root:i}){const s=z.useId(),o=z.useRef(null),l=z.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=z.useContext(Lb),d=i8(o,n?.ref);return z.useInsertionEffect(()=>{const{width:f,height:g,top:v,left:_,right:S}=l.current;if(e||!o.current||!f||!g)return;const C=t==="left"?`left: ${_}`:`right: ${S}`;o.current.dataset.motionPopId=s;const N=document.createElement("style");h&&(N.nonce=h);const k=i??document.head;return k.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${C}px !important;
            top: ${v}px !important;
          }
        `),()=>{k.contains(N)&&k.removeChild(N)}},[e]),w.jsx(r8,{isPresent:e,childRef:o,sizeRef:l,children:z.cloneElement(n,{ref:d})})}const a8=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:l,anchorX:h,root:d})=>{const f=qp(o8),g=z.useId();let v=!0,_=z.useMemo(()=>(v=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:S=>{f.set(S,!0);for(const C of f.values())if(!C)return;i&&i()},register:S=>(f.set(S,!1),()=>f.delete(S))}),[t,f,i]);return o&&v&&(_={..._}),z.useMemo(()=>{f.forEach((S,C)=>f.set(C,!1))},[t]),z.useEffect(()=>{!t&&!f.size&&i&&i()},[t]),l==="popLayout"&&(n=w.jsx(s8,{isPresent:t,anchorX:h,root:d,children:n})),w.jsx(Hp.Provider,{value:_,children:n})};function o8(){return new Map}function BD(n=!0){const e=z.useContext(Hp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,o=z.useId();z.useEffect(()=>{if(n)return s(o)},[n]);const l=z.useCallback(()=>n&&i&&i(o),[o,i,n]);return!t&&i?[!1,l]:[!0]}const Xf=n=>n.key||"";function rA(n){const e=[];return z.Children.forEach(n,t=>{z.isValidElement(t)&&e.push(t)}),e}const jb=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:h="left",root:d})=>{const[f,g]=BD(l),v=z.useMemo(()=>rA(n),[n]),_=l&&!f?[]:v.map(Xf),S=z.useRef(!0),C=z.useRef(v),N=qp(()=>new Map),[k,U]=z.useState(v),[q,O]=z.useState(v);pb(()=>{S.current=!1,C.current=v;for(let H=0;H<q.length;H++){const I=Xf(q[H]);_.includes(I)?N.delete(I):N.get(I)!==!0&&N.set(I,!1)}},[q,_.length,_.join("-")]);const Z=[];if(v!==k){let H=[...v];for(let I=0;I<q.length;I++){const A=q[I],V=Xf(A);_.includes(V)||(H.splice(I,0,A),Z.push(A))}return o==="wait"&&Z.length&&(H=Z),O(rA(H)),U(v),null}const{forceRender:te}=z.useContext(fb);return w.jsx(w.Fragment,{children:q.map(H=>{const I=Xf(H),A=l&&!f?!1:v===q||_.includes(I),V=()=>{if(N.has(I))N.set(I,!0);else return;let M=!0;N.forEach(D=>{D||(M=!1)}),M&&(te?.(),O(C.current),l&&g?.(),i&&i())};return w.jsx(a8,{isPresent:A,initial:!S.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:A?void 0:V,anchorX:h,children:H},I)})})},FD=z.createContext({strict:!1}),sA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Tu={};for(const n in sA)Tu[n]={isEnabled:e=>sA[n].some(t=>!!e[t])};function l8(n){for(const e in n)Tu[e]={...Tu[e],...n[e]}}const u8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ip(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||u8.has(n)}let qD=n=>!ip(n);function c8(n){typeof n=="function"&&(qD=e=>e.startsWith("on")?!ip(e):n(e))}try{c8(require("@emotion/is-prop-valid").default)}catch{}function h8(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(qD(s)||t===!0&&ip(s)||!e&&!ip(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const Gp=z.createContext({});function $p(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function zh(n){return typeof n=="string"||Array.isArray(n)}const zb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ub=["initial",...zb];function Kp(n){return $p(n.animate)||Ub.some(e=>zh(n[e]))}function HD(n){return!!(Kp(n)||n.variants)}function d8(n,e){if(Kp(n)){const{initial:t,animate:i}=n;return{initial:t===!1||zh(t)?t:void 0,animate:zh(i)?i:void 0}}return n.inherit!==!1?e:{}}function f8(n){const{initial:e,animate:t}=d8(n,z.useContext(Gp));return z.useMemo(()=>({initial:e,animate:t}),[aA(e),aA(t)])}function aA(n){return Array.isArray(n)?n.join(" "):n}const Uh={};function m8(n){for(const e in n)Uh[e]=n[e],wb(e)&&(Uh[e].isCSSVariable=!0)}function GD(n,{layout:e,layoutId:t}){return Mu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Uh[n]||n==="opacity")}const p8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},g8=Vu.length;function y8(n,e,t){let i="",s=!0;for(let o=0;o<g8;o++){const l=Vu[o],h=n[l];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(l.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||t){const f=PD(h,Mb[l]);if(!d){s=!1;const g=p8[l]||l;i+=`${g}(${f}) `}t&&(e[l]=f)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function Bb(n,e,t){const{style:i,vars:s,transformOrigin:o}=n;let l=!1,h=!1;for(const d in e){const f=e[d];if(Mu.has(d)){l=!0;continue}else if(wb(d)){s[d]=f;continue}else{const g=PD(f,Mb[d]);d.startsWith("origin")?(h=!0,o[d]=g):i[d]=g}}if(e.transform||(l||t?i.transform=y8(e,n.transform,t):i.transform&&(i.transform="none")),h){const{originX:d="50%",originY:f="50%",originZ:g=0}=o;i.transformOrigin=`${d} ${f} ${g}`}}const Fb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $D(n,e,t){for(const i in e)!wn(e[i])&&!GD(i,t)&&(n[i]=e[i])}function v8({transformTemplate:n},e){return z.useMemo(()=>{const t=Fb();return Bb(t,e,n),Object.assign({},t.vars,t.style)},[e])}function _8(n,e){const t=n.style||{},i={};return $D(i,t,n),Object.assign(i,v8(n,e)),i}function b8(n,e){const t={},i=_8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const T8={offset:"stroke-dashoffset",array:"stroke-dasharray"},E8={offset:"strokeDashoffset",array:"strokeDasharray"};function w8(n,e,t=1,i=0,s=!0){n.pathLength=1;const o=s?T8:E8;n[o.offset]=Re.transform(-i);const l=Re.transform(e),h=Re.transform(t);n[o.array]=`${l} ${h}`}function KD(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...h},d,f,g){if(Bb(n,h,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_}=n;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),s!==void 0&&w8(v,s,o,l,!1)}const QD=()=>({...Fb(),attrs:{}}),YD=n=>typeof n=="string"&&n.toLowerCase()==="svg";function S8(n,e,t,i){const s=z.useMemo(()=>{const o=QD();return KD(o,e,YD(i),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};$D(o,n.style,n),s.style={...o,...s.style}}return s}const x8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qb(n){return typeof n!="string"||n.includes("-")?!1:!!(x8.indexOf(n)>-1||/[A-Z]/u.test(n))}function A8(n,e,t,{latestValues:i},s,o=!1){const h=(qb(n)?S8:b8)(e,i,s,n),d=h8(e,typeof n=="string",o),f=n!==z.Fragment?{...d,...h,ref:t}:{},{children:g}=e,v=z.useMemo(()=>wn(g)?g.get():g,[g]);return z.createElement(n,{...f,children:v})}function oA(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Hb(n,e,t,i){if(typeof e=="function"){const[s,o]=oA(i);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=oA(i);e=e(t!==void 0?t:n.custom,s,o)}return e}function bm(n){return wn(n)?n.get():n}function I8({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:R8(t,i,s,n),renderState:e()}}function R8(n,e,t,i){const s={},o=i(n,{});for(const _ in o)s[_]=bm(o[_]);let{initial:l,animate:h}=n;const d=Kp(n),f=HD(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),h===void 0&&(h=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?h:l;if(v&&typeof v!="boolean"&&!$p(v)){const _=Array.isArray(v)?v:[v];for(let S=0;S<_.length;S++){const C=Hb(n,_[S]);if(C){const{transitionEnd:N,transition:k,...U}=C;for(const q in U){let O=U[q];if(Array.isArray(O)){const Z=g?O.length-1:0;O=O[Z]}O!==null&&(s[q]=O)}for(const q in N)s[q]=N[q]}}}return s}const XD=n=>(e,t)=>{const i=z.useContext(Gp),s=z.useContext(Hp),o=()=>I8(n,e,i,s);return t?o():qp(o)};function Gb(n,e,t){const{style:i}=n,s={};for(const o in i)(wn(i[o])||e.style&&wn(e.style[o])||GD(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const C8=XD({scrapeMotionValuesFromProps:Gb,createRenderState:Fb});function WD(n,e,t){const i=Gb(n,e,t);for(const s in n)if(wn(n[s])||wn(e[s])){const o=Vu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=n[s]}return i}const D8=XD({scrapeMotionValuesFromProps:WD,createRenderState:QD}),N8=Symbol.for("motionComponentSymbol");function Gl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function k8(n,e,t){return z.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Gl(t)&&(t.current=i))},[e])}const $b=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),V8="framerAppearId",ZD="data-"+$b(V8),JD=z.createContext({});function M8(n,e,t,i,s){const{visualElement:o}=z.useContext(Gp),l=z.useContext(FD),h=z.useContext(Hp),d=z.useContext(Lb).reducedMotion,f=z.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:o,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,v=z.useContext(JD);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&P8(f.current,t,s,v);const _=z.useRef(!1);z.useInsertionEffect(()=>{g&&_.current&&g.update(t,h)});const S=t[ZD],C=z.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return pb(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),C.current&&g.animationState&&g.animationState.animateChanges())}),z.useEffect(()=>{g&&(!C.current&&g.animationState&&g.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),C.current=!1),g.enteringChildren=void 0)}),g}function P8(n,e,t,i){const{layoutId:s,layout:o,drag:l,dragConstraints:h,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:eN(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||h&&Gl(h),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:d,layoutRoot:f})}function eN(n){if(n)return n.options.allowProjection!==!1?n.projection:eN(n.parent)}function I0(n,{forwardMotionProps:e=!1}={},t,i){t&&l8(t);const s=qb(n)?D8:C8;function o(h,d){let f;const g={...z.useContext(Lb),...h,layoutId:O8(h)},{isStatic:v}=g,_=f8(h),S=s(h,v);if(!v&&mb){L8();const C=j8(g);f=C.MeasureLayout,_.visualElement=M8(n,S,g,i,C.ProjectionNode)}return w.jsxs(Gp.Provider,{value:_,children:[f&&_.visualElement?w.jsx(f,{visualElement:_.visualElement,...g}):null,A8(n,h,k8(S,_.visualElement,d),S,v,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=z.forwardRef(o);return l[N8]=n,l}function O8({layoutId:n}){const e=z.useContext(fb).id;return e&&n!==void 0?e+"-"+n:n}function L8(n,e){z.useContext(FD).strict}function j8(n){const{drag:e,layout:t}=Tu;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function z8(n,e){if(typeof Proxy>"u")return I0;const t=new Map,i=(o,l)=>I0(o,l,n,e),s=(o,l)=>i(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?i:(t.has(l)||t.set(l,I0(l,void 0,n,e)),t.get(l))})}function tN({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function U8({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function B8(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function R0(n){return n===void 0||n===1}function jv({scale:n,scaleX:e,scaleY:t}){return!R0(n)||!R0(e)||!R0(t)}function uo(n){return jv(n)||nN(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function nN(n){return lA(n.x)||lA(n.y)}function lA(n){return n&&n!=="0%"}function rp(n,e,t){const i=n-t,s=e*i;return t+s}function uA(n,e,t,i,s){return s!==void 0&&(n=rp(n,s,i)),rp(n,t,i)+e}function zv(n,e=0,t=1,i,s){n.min=uA(n.min,e,t,i,s),n.max=uA(n.max,e,t,i,s)}function iN(n,{x:e,y:t}){zv(n.x,e.translate,e.scale,e.originPoint),zv(n.y,t.translate,t.scale,t.originPoint)}const cA=.999999999999,hA=1.0000000000001;function F8(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let h=0;h<s;h++){o=t[h],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Kl(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,iN(n,l)),i&&uo(o.latestValues)&&Kl(n,o.latestValues))}e.x<hA&&e.x>cA&&(e.x=1),e.y<hA&&e.y>cA&&(e.y=1)}function $l(n,e){n.min=n.min+e,n.max=n.max+e}function dA(n,e,t,i,s=.5){const o=xt(n.min,n.max,s);zv(n,e,t,o,i)}function Kl(n,e){dA(n.x,e.x,e.scaleX,e.scale,e.originX),dA(n.y,e.y,e.scaleY,e.scale,e.originY)}function rN(n,e){return tN(B8(n.getBoundingClientRect(),e))}function q8(n,e,t){const i=rN(n,t),{scroll:s}=e;return s&&($l(i.x,s.offset.x),$l(i.y,s.offset.y)),i}const fA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ql=()=>({x:fA(),y:fA()}),mA=()=>({min:0,max:0}),Pt=()=>({x:mA(),y:mA()}),Uv={current:null},sN={current:!1};function H8(){if(sN.current=!0,!!mb)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Uv.current=n.matches;n.addEventListener("change",e),e()}else Uv.current=!1}const G8=new WeakMap;function $8(n,e,t){for(const i in e){const s=e[i],o=t[i];if(wn(s))n.addValue(i,s);else if(wn(o))n.addValue(i,bu(s,{owner:n}));else if(o!==s)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,bu(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const pA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class K8{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Fn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Et.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=Kp(t),this.isVariantNode=HD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const S=v[_];d[_]!==void 0&&wn(S)&&S.set(d[_])}}mount(e){this.current=e,G8.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),sN.current||H8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Uv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ga(this.notifyUpdate),ga(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Mu.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Et.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Tu){const t=Tu[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<pA.length;i++){const s=pA[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=$8(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=bu(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(WC(i)||JC(i))?i=parseFloat(i):!t8(i)&&ya.test(t)&&(i=MD(e,t)),this.setBaseTarget(e,wn(i)?i.get():i)),wn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const o=Hb(this.props,t,this.presenceContext?.custom);o&&(i=o[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!wn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new bb),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Pb.render(this.render)}}class aN extends K8{constructor(){super(...arguments),this.KeyframeResolver=qU}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function oN(n,{style:e,vars:t},i,s){const o=n.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,i);for(l in t)o.setProperty(l,t[l])}function Q8(n){return window.getComputedStyle(n)}class Y8 extends aN{constructor(){super(...arguments),this.type="html",this.renderInstance=oN}readValueFromInstance(e,t){if(Mu.has(t))return this.projection?.isProjecting?Nv(t):lU(e,t);{const i=Q8(e),s=(wb(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return rN(e,t)}build(e,t,i){Bb(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Gb(e,t,i)}}const lN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function X8(n,e,t,i){oN(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(lN.has(s)?s:$b(s),e.attrs[s])}class W8 extends aN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Mu.has(t)){const i=VD(t);return i&&i.default||0}return t=lN.has(t)?t:$b(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return WD(e,t,i)}build(e,t,i){KD(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){X8(e,t,i,s)}mount(e){this.isSVGTag=YD(e.tagName),super.mount(e)}}const Z8=(n,e)=>qb(n)?new W8(e):new Y8(e,{allowProjection:n!==z.Fragment});function Jl(n,e,t){const i=n.getProps();return Hb(i,e,t!==void 0?t:i.custom,n)}const Bv=n=>Array.isArray(n);function J8(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,bu(t))}function eB(n){return Bv(n)?n[n.length-1]||0:n}function Kb(n,e){const t=Jl(n,e);let{transitionEnd:i={},transition:s={},...o}=t||{};o={...o,...i};for(const l in o){const h=eB(o[l]);J8(n,l,h)}}function tB(n){return!!(wn(n)&&n.add)}function Fv(n,e){const t=n.getValue("willChange");if(tB(t))return t.add(e);if(!t&&as.WillChange){const i=new as.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function uN(n){return n.props[ZD]}const nB=n=>n!==null;function iB(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(nB),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}const rB={type:"spring",stiffness:500,damping:25,restSpeed:10},sB=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),aB={type:"keyframes",duration:.8},oB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lB=(n,{keyframes:e})=>e.length>2?aB:Mu.has(n)?n.startsWith("scale")?sB(e[1]):rB:oB;function uB({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:h,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const Qb=(n,e,t,i={},s,o)=>l=>{const h=Vb(i,n)||{},d=h.delay||i.delay||0;let{elapsed:f=0}=i;f=f-_r(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-f,onUpdate:_=>{e.set(_),h.onUpdate&&h.onUpdate(_)},onComplete:()=>{l(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:o?void 0:s};uB(h)||Object.assign(g,lB(n,g)),g.duration&&(g.duration=_r(g.duration)),g.repeatDelay&&(g.repeatDelay=_r(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Ov(g),g.delay===0&&(v=!0)),(as.instantAnimations||as.skipAnimations)&&(v=!0,Ov(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,v&&!o&&e.get()!==void 0){const _=iB(g.keyframes,h);if(_!==void 0){Et.update(()=>{g.onUpdate(_),g.onComplete()});return}}return h.isSync?new Nb(g):new NU(g)};function cB({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function cN(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...h}=e;i&&(o=i);const d=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const g in h){const v=n.getValue(g,n.latestValues[g]??null),_=h[g];if(_===void 0||f&&cB(f,g))continue;const S={delay:t,...Vb(o||{},g)},C=v.get();if(C!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===C&&!S.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const U=uN(n);if(U){const q=window.MotionHandoffAnimation(U,g,Et);q!==null&&(S.startTime=q,N=!0)}}Fv(n,g),v.start(Qb(g,v,_,n.shouldReduceMotion&&DD.has(g)?{type:!1}:S,n,N));const k=v.animation;k&&d.push(k)}return l&&Promise.all(d).then(()=>{Et.update(()=>{l&&Kb(n,l)})}),d}function hN(n,e,t,i=0,s=1){const o=Array.from(n).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),l=n.size,h=(l-1)*i;return typeof t=="function"?t(o,l):s===1?o*i:h-o*i}function qv(n,e,t={}){const i=Jl(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(cN(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:v}=s;return hB(n,e,d,f,g,v,t)}:()=>Promise.resolve(),{when:h}=s;if(h){const[d,f]=h==="beforeChildren"?[o,l]:[l,o];return d().then(()=>f())}else return Promise.all([o(),l(t.delay)])}function hB(n,e,t=0,i=0,s=0,o=1,l){const h=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),h.push(qv(d,e,{...l,delay:t+(typeof i=="function"?0:i)+hN(n.variantChildren,d,i,s,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function dN(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(o=>qv(n,o,t));i=Promise.all(s)}else if(typeof e=="string")i=qv(n,e,t);else{const s=typeof e=="function"?Jl(n,e,t.custom):e;i=Promise.all(cN(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function fN(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const dB=Ub.length;function mN(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?mN(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<dB;t++){const i=Ub[t],s=n.props[i];(zh(s)||s===!1)&&(e[i]=s)}return e}const fB=[...zb].reverse(),mB=zb.length;function pB(n){return e=>Promise.all(e.map(({animation:t,options:i})=>dN(n,t,i)))}function gB(n){let e=pB(n),t=gA(),i=!0;const s=d=>(f,g)=>{const v=Jl(n,g,d==="exit"?n.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:S,...C}=v;f={...f,...C,...S}}return f};function o(d){e=d(n)}function l(d){const{props:f}=n,g=mN(n.parent)||{},v=[],_=new Set;let S={},C=1/0;for(let k=0;k<mB;k++){const U=fB[k],q=t[U],O=f[U]!==void 0?f[U]:g[U],Z=zh(O),te=U===d?q.isActive:null;te===!1&&(C=k);let H=O===g[U]&&O!==f[U]&&Z;if(H&&i&&n.manuallyAnimateOnMount&&(H=!1),q.protectedKeys={...S},!q.isActive&&te===null||!O&&!q.prevProp||$p(O)||typeof O=="boolean")continue;const I=yB(q.prevProp,O);let A=I||U===d&&q.isActive&&!H&&Z||k>C&&Z,V=!1;const M=Array.isArray(O)?O:[O];let D=M.reduce(s(U),{});te===!1&&(D={});const{prevResolvedValues:j={}}=q,P={...j,...D},Ce=re=>{A=!0,_.has(re)&&(V=!0,_.delete(re)),q.needsAnimating[re]=!0;const ce=n.getValue(re);ce&&(ce.liveStyle=!1)};for(const re in P){const ce=D[re],xe=j[re];if(S.hasOwnProperty(re))continue;let De=!1;Bv(ce)&&Bv(xe)?De=!fN(ce,xe):De=ce!==xe,De?ce!=null?Ce(re):_.add(re):ce!==void 0&&_.has(re)?Ce(re):q.protectedKeys[re]=!0}q.prevProp=O,q.prevResolvedValues=D,q.isActive&&(S={...S,...D}),i&&n.blockInitialAnimation&&(A=!1);const de=H&&I;A&&(!de||V)&&v.push(...M.map(re=>{const ce={type:U};if(typeof re=="string"&&i&&!de&&n.manuallyAnimateOnMount&&n.parent){const{parent:xe}=n,De=Jl(xe,re);if(xe.enteringChildren&&De){const{delayChildren:B}=De.transition||{};ce.delay=hN(xe.enteringChildren,n,B)}}return{animation:re,options:ce}}))}if(_.size){const k={};if(typeof f.initial!="boolean"){const U=Jl(n,Array.isArray(f.initial)?f.initial[0]:f.initial);U&&U.transition&&(k.transition=U.transition)}_.forEach(U=>{const q=n.getBaseTarget(U),O=n.getValue(U);O&&(O.liveStyle=!0),k[U]=q??null}),v.push({animation:k})}let N=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(v):Promise.resolve()}function h(d,f){if(t[d].isActive===f)return Promise.resolve();n.variantChildren?.forEach(v=>v.animationState?.setActive(d,f)),t[d].isActive=f;const g=l(d);for(const v in t)t[v].protectedKeys={};return g}return{animateChanges:l,setActive:h,setAnimateFunction:o,getState:()=>t,reset:()=>{t=gA()}}}function yB(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!fN(e,n):!1}function io(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gA(){return{animate:io(!0),whileInView:io(),whileHover:io(),whileTap:io(),whileDrag:io(),whileFocus:io(),exit:io()}}class Sa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class vB extends Sa{constructor(e){super(e),e.animationState||(e.animationState=gB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();$p(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let _B=0;class bB extends Sa{constructor(){super(...arguments),this.id=_B++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const TB={animation:{Feature:vB},exit:{Feature:bB}};function Bh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function od(n){return{point:{x:n.pageX,y:n.pageY}}}const EB=n=>e=>Ob(e)&&n(e,od(e));function fh(n,e,t,i){return Bh(n,e,EB(t),i)}const pN=1e-4,wB=1-pN,SB=1+pN,gN=.01,xB=0-gN,AB=0+gN;function Dn(n){return n.max-n.min}function IB(n,e,t){return Math.abs(n-e)<=t}function yA(n,e,t,i=.5){n.origin=i,n.originPoint=xt(e.min,e.max,n.origin),n.scale=Dn(t)/Dn(e),n.translate=xt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=wB&&n.scale<=SB||isNaN(n.scale))&&(n.scale=1),(n.translate>=xB&&n.translate<=AB||isNaN(n.translate))&&(n.translate=0)}function mh(n,e,t,i){yA(n.x,e.x,t.x,i?i.originX:void 0),yA(n.y,e.y,t.y,i?i.originY:void 0)}function vA(n,e,t){n.min=t.min+e.min,n.max=n.min+Dn(e)}function RB(n,e,t){vA(n.x,e.x,t.x),vA(n.y,e.y,t.y)}function _A(n,e,t){n.min=e.min-t.min,n.max=n.min+Dn(e)}function ph(n,e,t){_A(n.x,e.x,t.x),_A(n.y,e.y,t.y)}function yi(n){return[n("x"),n("y")]}const yN=({current:n})=>n?n.ownerDocument.defaultView:null,bA=(n,e)=>Math.abs(n-e);function CB(n,e){const t=bA(n.x,e.x),i=bA(n.y,e.y);return Math.sqrt(t**2+i**2)}class vN{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=D0(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,C=CB(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!C)return;const{point:N}=_,{timestamp:k}=mn;this.history.push({...N,timestamp:k});const{onStart:U,onMove:q}=this.handlers;S||(U&&U(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),q&&q(this.lastMoveEvent,_)},this.handlePointerMove=(_,S)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=C0(S,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(_,S)=>{this.end();const{onEnd:C,onSessionEnd:N,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=D0(_.type==="pointercancel"?this.lastMoveEventInfo:C0(S,this.transformPagePoint),this.history);this.startEvent&&C&&C(_,U),N&&N(_,U)},!Ob(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=s||window;const h=od(e),d=C0(h,this.transformPagePoint),{point:f}=d,{timestamp:g}=mn;this.history=[{...f,timestamp:g}];const{onSessionStart:v}=t;v&&v(e,D0(d,this.history)),this.removeListeners=rd(fh(this.contextWindow,"pointermove",this.handlePointerMove),fh(this.contextWindow,"pointerup",this.handlePointerUp),fh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ga(this.updatePoint)}}function C0(n,e){return e?{point:e(n.point)}:n}function TA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function D0({point:n},e){return{point:n,delta:TA(n,_N(e)),offset:TA(n,DB(e)),velocity:NB(e,.1)}}function DB(n){return n[0]}function _N(n){return n[n.length-1]}function NB(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=_N(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>_r(e)));)t--;if(!i)return{x:0,y:0};const o=_i(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function kB(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?xt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?xt(t,n,i.max):Math.min(n,t)),n}function EA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function VB(n,{top:e,left:t,bottom:i,right:s}){return{x:EA(n.x,t,s),y:EA(n.y,e,i)}}function wA(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function MB(n,e){return{x:wA(n.x,e.x),y:wA(n.y,e.y)}}function PB(n,e){let t=.5;const i=Dn(n),s=Dn(e);return s>i?t=Oh(e.min,e.max-i,n.min):i>s&&(t=Oh(n.min,n.max-s,e.min)),ss(0,1,t)}function OB(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Hv=.35;function LB(n=Hv){return n===!1?n=0:n===!0&&(n=Hv),{x:SA(n,"left","right"),y:SA(n,"top","bottom")}}function SA(n,e,t){return{min:xA(n,e),max:xA(n,t)}}function xA(n,e){return typeof n=="number"?n:n[e]||0}const jB=new WeakMap;class zB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(od(v).point)},l=(v,_)=>{const{drag:S,dragPropagation:C,onDragStart:N}=this.getProps();if(S&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=KU(S),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yi(U=>{let q=this.getAxisMotionValue(U).get()||0;if(br.test(q)){const{projection:O}=this.visualElement;if(O&&O.layout){const Z=O.layout.layoutBox[U];Z&&(q=Dn(Z)*(parseFloat(q)/100))}}this.originPoint[U]=q}),N&&Et.postRender(()=>N(v,_)),Fv(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},h=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:S,dragDirectionLock:C,onDirectionLock:N,onDrag:k}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:U}=_;if(C&&this.currentDirection===null){this.currentDirection=UB(U),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",_.point,U),this.updateAxis("y",_.point,U),this.visualElement.render(),k&&k(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>yi(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new vN(e,{onSessionStart:o,onStart:l,onMove:h,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:yN(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:h}=this.getProps();h&&Et.postRender(()=>h(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!Wf(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=kB(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Gl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=VB(i.layoutBox,e):this.constraints=!1,this.elastic=LB(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&yi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=OB(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Gl(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=q8(i,s.root,this.visualElement.getTransformPagePoint());let l=MB(s.layout.layoutBox,o);if(t){const h=t(U8(l));this.hasMutatedConstraints=!!h,h&&(l=tN(h))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},f=yi(g=>{if(!Wf(g,t,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const _=s?200:1e6,S=s?40:1e7,C={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,C)});return Promise.all(f).then(h)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Fv(this.visualElement,e),i.start(Qb(e,i,0,t,this.visualElement,!1))}stopAnimation(){yi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){yi(t=>{const{drag:i}=this.getProps();if(!Wf(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:h}=s.layout.layoutBox[t];o.set(e[t]-xt(l,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Gl(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};yi(l=>{const h=this.getAxisMotionValue(l);if(h&&this.constraints!==!1){const d=h.get();s[l]=PB({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),yi(l=>{if(!Wf(l,e,null))return;const h=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];h.set(xt(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;jB.set(this.visualElement,this);const e=this.visualElement.current,t=fh(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Gl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Et.read(i);const l=Bh(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(yi(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Hv,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:h}}}function Wf(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function UB(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class BB extends Sa{constructor(e){super(e),this.removeGroupControls=Ti,this.removeListeners=Ti,this.controls=new zB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ti}unmount(){this.removeGroupControls(),this.removeListeners()}}const AA=n=>(e,t)=>{n&&Et.postRender(()=>n(e,t))};class FB extends Sa{constructor(){super(...arguments),this.removePointerDownListener=Ti}onPointerDown(e){this.session=new vN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:AA(e),onStart:AA(t),onMove:i,onEnd:(o,l)=>{delete this.session,s&&Et.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=fh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Kc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Re.test(n))n=parseFloat(n);else return n;const t=IA(n,e.target.x),i=IA(n,e.target.y);return`${t}% ${i}%`}},qB={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=ya.parse(n);if(s.length>5)return i;const o=ya.createTransformer(n),l=typeof s[0]!="number"?1:0,h=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=h,s[1+l]/=d;const f=xt(h,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),o(s)}};let N0=!1;class HB extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=e;m8(GB),o&&(t.group&&t.group.add(o),i&&i.register&&s&&i.register(o),N0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Tm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:o}=this.props,{projection:l}=i;return l&&(l.isPresent=o,N0=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Et.postRender(()=>{const h=l.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Pb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;N0=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bN(n){const[e,t]=BD(),i=z.useContext(fb);return w.jsx(HB,{...n,layoutGroup:i,switchLayoutGroup:z.useContext(JD),isPresent:e,safeToRemove:t})}const GB={borderRadius:{...Kc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kc,borderTopRightRadius:Kc,borderBottomLeftRadius:Kc,borderBottomRightRadius:Kc,boxShadow:qB};function $B(n,e,t){const i=wn(n)?n:bu(n);return i.start(Qb("",i,e,t)),i.animation}const KB=(n,e)=>n.depth-e.depth;class QB{constructor(){this.children=[],this.isDirty=!1}add(e){gb(this.children,e),this.isDirty=!0}remove(e){yb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(KB),this.isDirty=!1,this.children.forEach(e)}}function YB(n,e){const t=Fn.now(),i=({timestamp:s})=>{const o=s-t;o>=e&&(ga(i),n(o-e))};return Et.setup(i,!0),()=>ga(i)}const TN=["TopLeft","TopRight","BottomLeft","BottomRight"],XB=TN.length,RA=n=>typeof n=="string"?parseFloat(n):n,CA=n=>typeof n=="number"||Re.test(n);function WB(n,e,t,i,s,o){s?(n.opacity=xt(0,t.opacity??1,ZB(i)),n.opacityExit=xt(e.opacity??1,0,JB(i))):o&&(n.opacity=xt(e.opacity??1,t.opacity??1,i));for(let l=0;l<XB;l++){const h=`border${TN[l]}Radius`;let d=DA(e,h),f=DA(t,h);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||CA(d)===CA(f)?(n[h]=Math.max(xt(RA(d),RA(f),i),0),(br.test(f)||br.test(d))&&(n[h]+="%")):n[h]=f}(e.rotate||t.rotate)&&(n.rotate=xt(e.rotate||0,t.rotate||0,i))}function DA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const ZB=EN(0,.5,oD),JB=EN(.5,.95,Ti);function EN(n,e,t){return i=>i<n?0:i>e?1:t(Oh(n,e,i))}function NA(n,e){n.min=e.min,n.max=e.max}function gi(n,e){NA(n.x,e.x),NA(n.y,e.y)}function kA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function VA(n,e,t,i,s){return n-=e,n=rp(n,1/t,i),s!==void 0&&(n=rp(n,1/s,i)),n}function e7(n,e=0,t=1,i=.5,s,o=n,l=n){if(br.test(e)&&(e=parseFloat(e),e=xt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let h=xt(o.min,o.max,i);n===o&&(h-=e),n.min=VA(n.min,e,t,h,s),n.max=VA(n.max,e,t,h,s)}function MA(n,e,[t,i,s],o,l){e7(n,e[t],e[i],e[s],e.scale,o,l)}const t7=["x","scaleX","originX"],n7=["y","scaleY","originY"];function PA(n,e,t,i){MA(n.x,e,t7,t?t.x:void 0,i?i.x:void 0),MA(n.y,e,n7,t?t.y:void 0,i?i.y:void 0)}function OA(n){return n.translate===0&&n.scale===1}function wN(n){return OA(n.x)&&OA(n.y)}function LA(n,e){return n.min===e.min&&n.max===e.max}function i7(n,e){return LA(n.x,e.x)&&LA(n.y,e.y)}function jA(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function SN(n,e){return jA(n.x,e.x)&&jA(n.y,e.y)}function zA(n){return Dn(n.x)/Dn(n.y)}function UA(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class r7{constructor(){this.members=[]}add(e){gb(this.members,e),e.scheduleRender()}remove(e){if(yb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function s7(n,e,t){let i="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=t?.z||0;if((s||o||l)&&(i=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:v,rotateY:_,skewX:S,skewY:C}=t;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),v&&(i+=`rotateX(${v}deg) `),_&&(i+=`rotateY(${_}deg) `),S&&(i+=`skewX(${S}deg) `),C&&(i+=`skewY(${C}deg) `)}const h=n.x.scale*e.x,d=n.y.scale*e.y;return(h!==1||d!==1)&&(i+=`scale(${h}, ${d})`),i||"none"}const k0=["","X","Y","Z"],a7=1e3;let o7=0;function V0(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function xN(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=uN(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Et,!(s||o))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&xN(i)}function AN({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},h=e?.()){this.id=o7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(c7),this.nodes.forEach(m7),this.nodes.forEach(p7),this.nodes.forEach(h7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new QB)}addEventListener(l,h){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new bb),this.eventHandlers.get(l).add(h)}notifyListeners(l,...h){const d=this.eventHandlers.get(l);d&&d.notify(...h)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=UD(l)&&!JU(l),this.instance=l;const{layoutId:h,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),n){let g,v=0;const _=()=>this.root.updateBlockedByResize=!1;Et.read(()=>{v=window.innerWidth}),n(l,()=>{const S=window.innerWidth;S!==v&&(v=S,this.root.updateBlockedByResize=!0,g&&g(),g=YB(_,250),Tm.hasAnimatedSinceResize&&(Tm.hasAnimatedSinceResize=!1,this.nodes.forEach(qA)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&f&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||f.getDefaultTransition()||b7,{onLayoutAnimationStart:N,onLayoutAnimationComplete:k}=f.getProps(),U=!this.targetLayout||!SN(this.targetLayout,S),q=!v&&_;if(this.options.layoutRoot||this.resumeFrom||q||v&&(U||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...Vb(C,"layout"),onPlay:N,onComplete:k};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(g,q)}else v||qA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ga(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(g7),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(FA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(f7),this.nodes.forEach(l7),this.nodes.forEach(u7)):this.nodes.forEach(FA),this.clearAllSnapshots();const h=Fn.now();mn.delta=ss(0,1e3/60,h-mn.timestamp),mn.timestamp=h,mn.isProcessing=!0,T0.update.process(mn),T0.preRender.process(mn),T0.render.process(mn),mn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Pb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(d7),this.sharedNodes.forEach(y7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(h=!1),h&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!wN(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;l&&this.instance&&(h||uo(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return l&&(d=this.removeTransform(d)),T7(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Pt();const h=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(E7))){const{scroll:f}=this.root;f&&($l(h.x,f.offset.x),$l(h.y,f.offset.y))}return h}removeElementScroll(l){const h=Pt();if(gi(h,l),this.scroll?.wasRoot)return h;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:g,options:v}=f;f!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&gi(h,l),$l(h.x,g.offset.x),$l(h.y,g.offset.y))}return h}applyTransform(l,h=!1){const d=Pt();gi(d,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Kl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),uo(g.latestValues)&&Kl(d,g.latestValues)}return uo(this.latestValues)&&Kl(d,this.latestValues),d}removeTransform(l){const h=Pt();gi(h,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!uo(f.latestValues))continue;jv(f.latestValues)&&f.updateSnapshot();const g=Pt(),v=f.measurePageBox();gi(g,v),PA(h,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return uo(this.latestValues)&&PA(h,this.latestValues),h}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=mn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),ph(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gi(this.target,this.layout.layoutBox),iN(this.target,this.targetDelta)):gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),ph(this.relativeTargetOrigin,this.target,_.target),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||jv(this.parent.latestValues)||nN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),h=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===mn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;gi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;F8(this.layoutCorrected,this.treeScale,this.path,h),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Pt());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kA(this.prevProjectionDelta.x,this.projectionDelta.x),kA(this.prevProjectionDelta.y,this.projectionDelta.y)),mh(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!UA(this.projectionDelta.x,this.prevProjectionDelta.x)||!UA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ql(),this.projectionDelta=Ql(),this.projectionDeltaWithTransform=Ql()}setAnimationOrigin(l,h=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},v=Ql();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const _=Pt(),S=d?d.source:void 0,C=this.layout?this.layout.source:void 0,N=S!==C,k=this.getStack(),U=!k||k.members.length<=1,q=!!(N&&!U&&this.options.crossfade===!0&&!this.path.some(_7));this.animationProgress=0;let O;this.mixTargetDelta=Z=>{const te=Z/1e3;HA(v.x,l.x,te),HA(v.y,l.y,te),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ph(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),v7(this.relativeTarget,this.relativeTargetOrigin,_,te),O&&i7(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Pt()),gi(O,this.relativeTarget)),N&&(this.animationValues=g,WB(g,f,this.latestValues,te,q,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ga(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{Tm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bu(0)),this.currentAnimation=$B(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),l.onUpdate&&l.onUpdate(h)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(a7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:h,target:d,layout:f,latestValues:g}=l;if(!(!h||!d||!f)){if(this!==l&&this.layout&&f&&IN(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Pt();const v=Dn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const _=Dn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}gi(h,d),Kl(h,g),mh(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(l,h){this.sharedNodes.has(l)||this.sharedNodes.set(l,new r7),this.sharedNodes.get(l).add(h);const f=h.options.initialPromotionConfig;h.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(h):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:h,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let h=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const f={};d.z&&V0("z",l,f,this.animationValues);for(let g=0;g<k0.length;g++)V0(`rotate${k0[g]}`,l,f,this.animationValues),V0(`skew${k0[g]}`,l,f,this.animationValues);l.render();for(const g in f)l.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);l.scheduleRender()}applyProjectionStyles(l,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=bm(h?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=bm(h?.pointerEvents)||""),this.hasProjected&&!uo(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=s7(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),l.transform=v;const{x:_,y:S}=this.projectionDelta;l.transformOrigin=`${_.origin*100}% ${S.origin*100}% 0`,f.animationValues?l.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const C in Uh){if(g[C]===void 0)continue;const{correct:N,applyTo:k,isCSSVariable:U}=Uh[C],q=v==="none"?g[C]:N(g[C],f);if(k){const O=k.length;for(let Z=0;Z<O;Z++)l[k[Z]]=q}else U?this.options.visualElement.renderState.vars[C]=q:l[C]=q}this.options.layoutId&&(l.pointerEvents=f===this?bm(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(BA),this.root.sharedNodes.clear()}}}function l7(n){n.updateLayout()}function u7(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?yi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Dn(v);v.min=t[g].min,v.max=v.min+_}):IN(s,e.layoutBox,t)&&yi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Dn(t[g]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+_)});const l=Ql();mh(l,t,e.layoutBox);const h=Ql();o?mh(h,n.applyTransform(i,!0),e.measuredBox):mh(h,t,e.layoutBox);const d=!wN(l);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:_}=g;if(v&&_){const S=Pt();ph(S,e.layoutBox,v.layoutBox);const C=Pt();ph(C,t,_.layoutBox),SN(S,C)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=S,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:h,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function c7(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function h7(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function d7(n){n.clearSnapshot()}function BA(n){n.clearMeasurements()}function FA(n){n.isLayoutDirty=!1}function f7(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function qA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function m7(n){n.resolveTargetDelta()}function p7(n){n.calcProjection()}function g7(n){n.resetSkewAndRotation()}function y7(n){n.removeLeadSnapshot()}function HA(n,e,t){n.translate=xt(e.translate,0,t),n.scale=xt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function GA(n,e,t,i){n.min=xt(e.min,t.min,i),n.max=xt(e.max,t.max,i)}function v7(n,e,t,i){GA(n.x,e.x,t.x,i),GA(n.y,e.y,t.y,i)}function _7(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const b7={duration:.45,ease:[.4,0,.1,1]},$A=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),KA=$A("applewebkit/")&&!$A("chrome/")?Math.round:Ti;function QA(n){n.min=KA(n.min),n.max=KA(n.max)}function T7(n){QA(n.x),QA(n.y)}function IN(n,e,t){return n==="position"||n==="preserve-aspect"&&!IB(zA(e),zA(t),.2)}function E7(n){return n!==n.root&&n.scroll?.wasRoot}const w7=AN({attachResizeListener:(n,e)=>Bh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),M0={current:void 0},RN=AN({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!M0.current){const n=new w7({});n.mount(window),n.setOptions({layoutScroll:!0}),M0.current=n}return M0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),S7={pan:{Feature:FB},drag:{Feature:BB,ProjectionNode:RN,MeasureLayout:bN}};function YA(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=i[s];o&&Et.postRender(()=>o(e,od(e)))}class x7 extends Sa{mount(){const{current:e}=this.node;e&&(this.unmount=QU(e,(t,i)=>(YA(this.node,i,"Start"),s=>YA(this.node,s,"End"))))}unmount(){}}class A7 extends Sa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rd(Bh(this.node.current,"focus",()=>this.onFocus()),Bh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function XA(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=i[s];o&&Et.postRender(()=>o(e,od(e)))}class I7 extends Sa{mount(){const{current:e}=this.node;e&&(this.unmount=ZU(e,(t,i)=>(XA(this.node,i,"Start"),(s,{success:o})=>XA(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Gv=new WeakMap,P0=new WeakMap,R7=n=>{const e=Gv.get(n.target);e&&e(n)},C7=n=>{n.forEach(R7)};function D7({root:n,...e}){const t=n||document;P0.has(t)||P0.set(t,{});const i=P0.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(C7,{root:n,...e})),i[s]}function N7(n,e,t){const i=D7(e);return Gv.set(n,t),i.observe(n),()=>{Gv.delete(n),i.unobserve(n)}}const k7={some:0,all:1};class V7 extends Sa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:k7[s]},h=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=f?g:v;_&&_(d)};return N7(this.node.current,l,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(M7(e,t))&&this.startObserver()}unmount(){}}function M7({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const P7={inView:{Feature:V7},tap:{Feature:I7},focus:{Feature:A7},hover:{Feature:x7}},O7={layout:{ProjectionNode:RN,MeasureLayout:bN}},L7={...TB,...P7,...S7,...O7},Qp=z8(L7,Z8);function j7(n){n.values.forEach(e=>e.stop())}function $v(n,e){[...e].reverse().forEach(i=>{const s=n.getVariant(i);s&&Kb(n,s),n.variantChildren&&n.variantChildren.forEach(o=>{$v(o,e)})})}function z7(n,e){if(Array.isArray(e))return $v(n,e);if(typeof e=="string")return $v(n,[e]);Kb(n,e)}function U7(){const n=new Set,e={subscribe(t){return n.add(t),()=>void n.delete(t)},start(t,i){const s=[];return n.forEach(o=>{s.push(dN(o,t,{transitionOverride:i}))}),Promise.all(s)},set(t){return n.forEach(i=>{z7(i,t)})},stop(){n.forEach(t=>{j7(t)})},mount(){return()=>{e.stop()}}};return e}function B7(){const n=qp(U7);return pb(n.mount,[]),n}const F7=B7,CN=({children:n,onDelete:e,threshold:t=-100})=>{const i=F7(),[s,o]=z.useState(!1),l=z.useRef(0),h=()=>{o(!0),l.current=Date.now()},d=async(f,g)=>{const v=g.offset.x,_=g.velocity.x;setTimeout(()=>o(!1),100),v<t||v<-50&&_<-500?e():i.start({x:0})};return w.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[w.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:w.jsx(Sm,{className:"text-white w-6 h-6"})}),w.jsx(Qp.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:h,onDragEnd:d,animate:i,className:"relative bg-white dark:bg-zinc-900 z-10 rounded-xl",style:{touchAction:"pan-y",pointerEvents:s?"none":"auto"},children:n})]})},WA=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),q7=()=>{const{id:n}=WV(),{envelopes:e,transactions:t,fetchData:i,isLoading:s,deleteEnvelope:o,renameEnvelope:l,updateTransaction:h,deleteTransaction:d,restoreTransaction:f,getEnvelopeBalance:g}=wt(),{showToast:v}=db(),_=jo(),S=va(),[C,N]=z.useState(!1),[k,U]=z.useState(!1),[q,O]=z.useState(!1),[Z,te]=z.useState(null);z.useEffect(()=>{e.length===0&&i()},[]);const H=e.find(D=>D.id===n);if(!H)return s?w.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:w.jsx("p",{children:"Loading envelope..."})}):w.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:w.jsx("p",{children:"Envelope not found."})});const I=t.filter(D=>D.envelopeId===H.id).sort((D,j)=>new Date(j.date).getTime()-new Date(D.date).getTime()),A=()=>{S.state?.fromGlobalFAB?_("/"):_(-1)},V=()=>{n&&(o(n),_(-1))},M=D=>{const j={...D,reconciled:!D.reconciled};h(j)};return w.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4",children:[w.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[w.jsx("button",{onClick:()=>{const D=prompt("Rename envelope:",H.name);D&&D.trim()&&n&&l(n,D)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),w.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:H.name}),w.jsx("button",{onClick:A,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),w.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const D=g(H.id).toNumber();return console.log(`Debug: Envelope ${H.name} Balance:`,D),w.jsx("span",{className:`text-xl font-bold ${D<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:WA(D)})})()]}),w.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-zinc-400",children:[w.jsx("span",{children:"Budget"}),w.jsx("span",{children:WA(H.currentBalance||0)})]})]}),w.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[w.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>N(!0),children:[w.jsx(i4,{className:"w-5 h-5 mr-3"}),"Add Money"]}),w.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>U(!0),children:[w.jsx(t4,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),w.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[w.jsx(ZM,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),w.jsxs("section",{className:"mt-6",children:[w.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),w.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:I.length===0?w.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):w.jsx(jb,{initial:!1,mode:"popLayout",children:I.map(D=>w.jsx(Qp.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:w.jsx(CN,{onDelete:()=>{if(!D.id)return;const j={...D};d(D.id),v("Transaction deleted","neutral",()=>f(j))},children:w.jsx(XC,{transaction:D,onReconcile:()=>M(D),onEdit:()=>te(D)})})},D.id))})})]}),w.jsx("div",{className:"mt-8",children:w.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${H.name}"? This will delete all transactions.`)&&V()},children:[w.jsx(yI,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(C||k||Z)&&w.jsx(YC,{isVisible:C||k||!!Z,onClose:()=>{N(!1),U(!1),te(null)},mode:C?"add":k?"spend":"edit",currentEnvelope:H,initialTransaction:Z}),q&&w.jsx(iz,{isVisible:q,onClose:()=>O(!1),sourceEnvelope:H})]})},H7=()=>{const n=jo(),e=z.useRef(null),{envelopes:t,transactions:i,distributionTemplates:s,resetData:o,importData:l,getEnvelopeBalance:h,appSettings:d,updateAppSettings:f,initializeAppSettings:g,cleanupOrphanedTemplates:v}=wt(),[_,S]=z.useState(null),[C,N]=z.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[k,U]=z.useState(!1),q=978307200,O=d?.theme??"system";z.useEffect(()=>{d||g().catch(j=>{console.error("Failed to initialize app settings:",j)})},[d,g]);const Z=(j,P)=>{S({type:j,text:P}),setTimeout(()=>S(null),3500)},te=z.useMemo(()=>{const j=t.length,P=i.length,Ce=s.length,de=t.reduce((xe,De)=>xe+h(De.id).toNumber(),0),G=0,re=i.reduce((xe,De)=>{let B=0;if(typeof De.date=="string"){const se=Date.parse(De.date);B=Number.isNaN(se)?0:se}else typeof De.date=="number"&&(B=De.date<2e9?(De.date+q)*1e3:De.date);return Math.max(xe,B)},0),ce=G||re?new Date(Math.max(G,re)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:j,transactionCount:P,templateCount:Ce,totalBalance:de,lastUpdated:ce}},[t,i,s]),H=()=>{try{const j={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:d||{theme:"system"},envelopes:t.map(re=>({...re,currentBalance:h(re.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:s},P=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),Ce=URL.createObjectURL(P),de=document.createElement("a");de.href=Ce,de.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(Ce);const G=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",G),N(G),Z("success","Backup downloaded successfully.")}catch(j){console.error(j),Z("error","Failed to create backup file.")}},I=()=>{try{const j=["Date","Description","Amount","Type","Envelope","Reconciled"],P=i.map(ce=>{const xe=t.find(se=>se.id===ce.envelopeId)?.name||"Unknown",De=(ce.description||"").replace(/"/g,'""');let B="Invalid Date";if(ce.date){if(typeof ce.date=="string")B=ce.date.split("T")[0];else if(typeof ce.date=="number"){const se=ce.date<2e9?(ce.date+q)*1e3:ce.date;B=new Date(se).toISOString().split("T")[0]}}return[B,`"${De}"`,ce.amount.toFixed(2),ce.type,`"${xe}"`,ce.reconciled?"Yes":"No"].join(",")}),Ce=[j.join(","),...P].join(`
`),de=new Blob([Ce],{type:"text/csv;charset=utf-8;"}),G=URL.createObjectURL(de),re=document.createElement("a");re.href=G,re.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(G),Z("success","CSV export ready to open in Excel/Numbers.")}catch(j){console.error(j),Z("error","Failed to export CSV.")}},A=()=>{e.current?.click()},V=j=>{const P=j.target.files?.[0];if(!P)return;const Ce=new FileReader;Ce.onload=async de=>{try{const G=JSON.parse(de.target?.result),re=l(G);if(!re.success){Z("error",re.message);return}if(G.appSettings?.theme)try{await f({theme:G.appSettings.theme})}catch(ce){console.error("Failed to update imported settings:",ce)}else if(G.appSettings?.isDarkMode!==void 0)try{const ce=G.appSettings.isDarkMode?"dark":"light";await f({theme:ce})}catch(ce){console.error("Failed to update imported settings:",ce)}Z("success",`Loaded ${G.envelopes?.length??0} envelopes, ${G.transactions?.length??0} transactions, and ${G.distributionTemplates?.length??0} templates.`)}catch(G){console.error(G),Z("error","Invalid backup file. Please verify the JSON.")}},Ce.readAsText(P),j.target.value=""},M=async()=>{U(!0);try{Z("success","Scanning templates for orphaned references..."),await v(),Z("success","Orphaned templates have been cleaned up successfully.")}catch(j){console.error("Template cleanup failed:",j),Z("error","Failed to clean up orphaned templates. Check console for details.")}finally{U(!1)}},D=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),Z("success","All data has been permanently deleted."),n("/")}catch(j){console.error("Reset failed:",j),Z("error","Failed to delete all data. Some data may remain.")}};return w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[w.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),w.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),w.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[_&&w.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${_.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[_.type==="success"?w.jsx(s4,{size:18}):w.jsx(Sm,{size:18}),_.text]}),w.jsx("section",{children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(wm,{className:"text-blue-500",size:22}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),w.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),w.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.envelopeCount})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),w.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.transactionCount})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),w.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.templateCount})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),w.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:te.lastUpdated})]})]})]})}),w.jsxs("section",{children:[w.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[O==="light"&&w.jsx("span",{className:"text-orange-500 text-lg",children:""}),O==="dark"&&w.jsx("span",{className:"text-purple-500 text-lg",children:""}),O==="system"&&w.jsx("span",{className:"text-gray-500 text-lg",children:""}),w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),w.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:O})]}),w.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),w.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(j=>w.jsx("button",{onClick:async()=>{try{await f({theme:j.value})}catch(P){console.error("Failed to update theme setting:",P)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${O===j.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:j.label},j.value))})]})]}),w.jsxs("section",{children:[w.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[w.jsxs("button",{onClick:H,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(wm,{className:"text-blue-500",size:20}),w.jsxs("div",{className:"flex flex-col items-start",children:[w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),w.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",C]})]})]}),w.jsx(Ol,{className:"text-gray-400",size:18})]}),w.jsxs("button",{onClick:A,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(P4,{className:"text-blue-500",size:20}),w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),w.jsx(Ol,{className:"text-gray-400",size:18})]}),w.jsxs("button",{onClick:I,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(d4,{className:"text-blue-500",size:20}),w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),w.jsx(Ol,{className:"text-gray-400",size:18})]}),w.jsxs("button",{onClick:M,disabled:k,className:`w-full p-4 flex items-center justify-between transition-colors ${k?"bg-gray-50 dark:bg-zinc-800/50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[w.jsxs("div",{className:"flex items-center gap-3",children:[k?w.jsx(E4,{className:"text-blue-500 animate-spin",size:20}):w.jsx(j0,{className:"text-blue-500",size:20}),w.jsx("span",{className:`font-medium ${k?"text-gray-500 dark:text-zinc-400":"text-gray-900 dark:text-white"}`,children:k?"Cleaning Templates...":"Clean Up Orphaned Templates"})]}),k?w.jsx("div",{className:"text-gray-400 text-sm",children:"Working..."}):w.jsx(Ol,{className:"text-gray-400",size:18})]}),w.jsx("input",{type:"file",ref:e,onChange:V,accept:".json",className:"hidden"})]})]}),w.jsxs("section",{children:[w.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[w.jsx("p",{children:"Create regular backups before major changes."}),w.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),w.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),w.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),w.jsxs("section",{children:[w.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),w.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:w.jsxs("button",{onClick:D,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(Sm,{className:"text-red-500 group-hover:text-red-600",size:20}),w.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),w.jsx(Ol,{className:"text-gray-400",size:18})]})}),w.jsx("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500",children:"This clears every envelope, transaction, and template. Use with caution."})]}),w.jsx("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:"House Budget PWA  App Version 2.0.1"})]})]})},G7=()=>{const n=jo(),{createEnvelope:e}=wt(),[t,i]=z.useState(""),[s,o]=z.useState(""),l=h=>{if(h.preventDefault(),!t.trim())return;const d=parseFloat(s),f=isNaN(d)?0:d,g=wt.getState().envelopes,_=(g.length>0?Math.max(...g.map(S=>S.orderIndex??0)):-1)+1;e({name:t,currentBalance:f,lastUpdated:new Date().toISOString(),isActive:!0,orderIndex:_}),n("/")};return w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[w.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[w.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:w.jsx(gI,{size:24})}),w.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Envelope"})]}),w.jsx("div",{className:"p-4 max-w-md mx-auto",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[w.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:w.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:w.jsx(m4,{size:40})})}),w.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Envelope Name"}),w.jsx("input",{type:"text",id:"name",value:t,onChange:h=>i(h.target.value),placeholder:"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),w.jsxs("div",{className:"relative",children:[w.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),w.jsx("input",{type:"number",id:"balance",value:s,onChange:h=>o(h.target.value),onKeyDown:h=>{(h.key==="e"||h.key==="E"||h.key==="+"||h.key==="-")&&h.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),w.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later via the "Distribute Funds" screen.'})]}),w.jsxs("div",{className:"pt-4 flex gap-3",children:[w.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),w.jsx("button",{type:"submit",disabled:!t.trim(),className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${t.trim()?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:"Create Envelope"})]})]})]})})]})},$7=()=>{const n=jo(),{envelopes:e}=wt(),t=[...e].sort((i,s)=>i.name.localeCompare(s.name));return w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[w.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[w.jsx("button",{onClick:()=>n(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),w.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),w.jsx("div",{className:"w-12"})," "]}),w.jsx("div",{className:"p-4 max-w-md mx-auto",children:w.jsx("section",{className:"mb-6",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[w.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:w.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:"SELECT ENVELOPE"})}),t.length===0?w.jsx("div",{className:"px-4 py-8 text-center text-gray-500 dark:text-zinc-400",children:w.jsx("p",{children:"No envelopes available"})}):w.jsx("div",{className:"divide-y divide-gray-200 dark:divide-zinc-700",children:t.map(i=>w.jsxs("button",{onClick:()=>n(`/envelope/${i.id}`,{state:{fromGlobalFAB:!0}}),className:"w-full px-4 py-4 text-left flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700 transition-colors",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.name}),w.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Balance calculation not available here"})]}),w.jsx(Ol,{size:20,className:"text-gray-400 dark:text-zinc-500"})]},i.id))})]})})})]})},K7=()=>{const n=jo(),{transactions:e,envelopes:t,updateTransaction:i,deleteTransaction:s,restoreTransaction:o}=wt(),{showToast:l}=db(),[h,d]=z.useState(!1),[f,g]=z.useState(""),[v,_]=z.useState("all"),[S,C]=z.useState("All"),[N,k]=z.useState(!1),[U,q]=z.useState(()=>{const M=new Date;return M.setMonth(M.getMonth()-1),M.toISOString().split("T")[0]}),[O,Z]=z.useState(()=>new Date().toISOString().split("T")[0]),[te,H]=z.useState(null),I=z.useMemo(()=>e.map(D=>{if(!D)return null;let j=D.date;if(typeof D.date=="number"){const Ce=(D.date+978307200)*1e3;j=new Date(Ce).toISOString()}else if(!D.date||typeof D.date!="string")return null;return{...D,date:j}}).filter(Boolean).filter(D=>{if(f){const P=f.toLowerCase(),Ce=t.find(re=>re.id===D.envelopeId)?.name.toLowerCase()||"",de=D.amount.toFixed(2);if(!(D.description.toLowerCase().includes(P)||Ce.includes(P)||de.includes(P)))return!1}if(v!=="all"&&D.envelopeId!==v||S!=="All"&&D.type!==S||!D.date||typeof D.date!="string")return!1;const j=D.date.split("T")[0];return!(j<U||j>O||N&&!D.reconciled)}).sort((D,j)=>new Date(j.date).getTime()-new Date(D.date).getTime()),[e,t,f,v,S,U,O,N]),A=te?t.find(M=>M.id===te.envelopeId):null,V=M=>{const D={...M,reconciled:!M.reconciled};i(D)};return w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[w.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:w.jsx(gI,{size:24})}),w.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),w.jsx("button",{onClick:()=>d(!h),className:`p-2 rounded-full transition-colors ${h?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:w.jsx(g4,{size:20,className:h?"fill-current":""})})]}),w.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${h?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:w.jsxs("div",{className:"p-4 space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx(I4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),w.jsx("input",{type:"text",placeholder:"Search transactions...",value:f,onChange:M=>g(M.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),f&&w.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:w.jsx(Jv,{size:16})})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),w.jsxs("select",{value:v,onChange:M=>_(M.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[w.jsx("option",{value:"all",children:"All Envelopes"}),t.sort((M,D)=>M.name.localeCompare(D.name)).map(M=>w.jsx("option",{value:M.id,children:M.name},M.id))]})]}),w.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(M=>w.jsx("button",{onClick:()=>C(M),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${S===M?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:M},M))}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),w.jsx("div",{className:"relative",children:w.jsx("input",{type:"date",value:U,onChange:M=>q(M.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),w.jsx("div",{className:"relative",children:w.jsx("input",{type:"date",value:O,onChange:M=>Z(M.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),w.jsxs("div",{className:"flex items-center justify-between pt-2",children:[w.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),w.jsx("button",{onClick:()=>k(!N),className:`w-11 h-6 rounded-full transition-colors relative ${N?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:w.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${N?"translate-x-5":"translate-x-0"}`})})]})]})}),w.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:w.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:I.length===0?w.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):w.jsx(jb,{initial:!1,mode:"popLayout",children:I.map(M=>{const D=t.find(j=>j.id===M.envelopeId);return w.jsx(Qp.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:w.jsx(CN,{onDelete:()=>{if(!M.id)return;const j={...M};s(M.id),l("Transaction deleted","neutral",()=>o(j))},children:w.jsx(XC,{transaction:M,envelopeName:D?.name||"Unknown Envelope",onReconcile:()=>V(M),onEdit:()=>{D?H(M):alert("Cannot edit: Envelope deleted.")}})})},M.id)})})})}),te&&A&&w.jsx(YC,{isVisible:!!te,onClose:()=>H(null),mode:"edit",currentEnvelope:A,initialTransaction:te})]})},Q7=()=>{const{message:n,type:e,isVisible:t,undoAction:i,hideToast:s}=db(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return w.jsx(jb,{children:t&&w.jsx(Qp.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:w.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[w.jsx("div",{className:"flex items-center flex-1 min-w-0",children:w.jsx("span",{className:"text-sm font-medium truncate pr-2",children:n})}),w.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&w.jsxs("button",{onClick:()=>{i(),s()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[w.jsx(V4,{size:14,className:"inline mr-1"}),"Undo"]}),w.jsx("button",{onClick:s,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:w.jsx(Jv,{size:16})})]})]})})})};function Y7(){const[n,e]=z.useState(!0),{appSettings:t}=wt();return z.useEffect(()=>{const i=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(i)},[]),z.useEffect(()=>{const i=document.documentElement,s=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{const l=t?.theme??"system",h=s.matches;l==="dark"||l==="system"&&h?i.classList.add("dark"):i.classList.remove("dark")};if(o(),t?.theme==="system")return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[t]),n?w.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-blue-600 text-white dark:bg-black",children:w.jsx("div",{className:"text-3xl font-bold animate-pulse",children:"House Budget"})}):w.jsxs(w.Fragment,{children:[w.jsx(PM,{children:w.jsxs(dM,{children:[w.jsx(ro,{path:"/",element:w.jsx(nz,{})}),w.jsx(ro,{path:"/envelope/:id",element:w.jsx(q7,{})}),w.jsx(ro,{path:"/add-envelope",element:w.jsx(G7,{})}),w.jsx(ro,{path:"/add-transaction",element:w.jsx($7,{})}),w.jsx(ro,{path:"/transactions",element:w.jsx(K7,{})}),w.jsx(ro,{path:"/settings",element:w.jsx(H7,{})})]})}),w.jsx(Q7,{})]})}bV({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});gV.createRoot(document.getElementById("root")).render(w.jsx(z.StrictMode,{children:w.jsx(Y7,{})}));
