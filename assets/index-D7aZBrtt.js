(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function LV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var o0={exports:{}},Hu={};var DE;function jV(){if(DE)return Hu;DE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:o}}return Hu.Fragment=e,Hu.jsx=t,Hu.jsxs=t,Hu}var kE;function UV(){return kE||(kE=1,o0.exports=jV()),o0.exports}var b=UV(),l0={exports:{}},Oe={};var VE;function zV(){if(VE)return Oe;VE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=_&&L[_]||L["@@iterator"],typeof L=="function"?L:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function P(L,ne,he){this.props=L,this.context=ne,this.refs=C,this.updater=he||N}P.prototype.isReactComponent={},P.prototype.setState=function(L,ne){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ne,"setState")},P.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function z(){}z.prototype=P.prototype;function O(L,ne,he){this.props=L,this.context=ne,this.refs=C,this.updater=he||N}var K=O.prototype=new z;K.constructor=O,A(K,P.prototype),K.isPureReactComponent=!0;var te=Array.isArray;function J(){}var S={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function V(L,ne,he){var pe=he.ref;return{$$typeof:n,type:L,key:ne,ref:pe!==void 0?pe:null,props:he}}function M(L,ne){return V(L.type,ne,L.props)}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function F(L){var ne={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(he){return ne[he]})}var j=/\/+/g;function Le(L,ne){return typeof L=="object"&&L!==null&&L.key!=null?F(""+L.key):ne.toString(36)}function me(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(J,J):(L.status="pending",L.then(function(ne){L.status==="pending"&&(L.status="fulfilled",L.value=ne)},function(ne){L.status==="pending"&&(L.status="rejected",L.reason=ne)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function H(L,ne,he,pe,ve){var Se=typeof L;(Se==="undefined"||Se==="boolean")&&(L=null);var Ie=!1;if(L===null)Ie=!0;else switch(Se){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(L.$$typeof){case n:case e:Ie=!0;break;case g:return Ie=L._init,H(Ie(L._payload),ne,he,pe,ve)}}if(Ie)return ve=ve(L),Ie=pe===""?"."+Le(L,0):pe,te(ve)?(he="",Ie!=null&&(he=Ie.replace(j,"$&/")+"/"),H(ve,ne,he,"",function(Sn){return Sn})):ve!=null&&(k(ve)&&(ve=M(ve,he+(ve.key==null||L&&L.key===ve.key?"":(""+ve.key).replace(j,"$&/")+"/")+Ie)),ne.push(ve)),1;Ie=0;var gt=pe===""?".":pe+":";if(te(L))for(var Qe=0;Qe<L.length;Qe++)pe=L[Qe],Se=gt+Le(pe,Qe),Ie+=H(pe,ne,he,Se,ve);else if(Qe=x(L),typeof Qe=="function")for(L=Qe.call(L),Qe=0;!(pe=L.next()).done;)pe=pe.value,Se=gt+Le(pe,Qe++),Ie+=H(pe,ne,he,Se,ve);else if(Se==="object"){if(typeof L.then=="function")return H(me(L),ne,he,pe,ve);throw ne=String(L),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function oe(L,ne,he){if(L==null)return L;var pe=[],ve=0;return H(L,pe,"","",function(Se){return ne.call(he,Se,ve++)}),pe}function ge(L){if(L._status===-1){var ne=L._result;ne=ne(),ne.then(function(he){(L._status===0||L._status===-1)&&(L._status=1,L._result=he)},function(he){(L._status===0||L._status===-1)&&(L._status=2,L._result=he)}),L._status===-1&&(L._status=0,L._result=ne)}if(L._status===1)return L._result.default;throw L._result}var xe=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},ce={map:oe,forEach:function(L,ne,he){oe(L,function(){ne.apply(this,arguments)},he)},count:function(L){var ne=0;return oe(L,function(){ne++}),ne},toArray:function(L){return oe(L,function(ne){return ne})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Oe.Activity=v,Oe.Children=ce,Oe.Component=P,Oe.Fragment=t,Oe.Profiler=s,Oe.PureComponent=O,Oe.StrictMode=i,Oe.Suspense=d,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return S.H.useMemoCache(L)}},Oe.cache=function(L){return function(){return L.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(L,ne,he){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var pe=A({},L.props),ve=L.key;if(ne!=null)for(Se in ne.key!==void 0&&(ve=""+ne.key),ne)!R.call(ne,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ne.ref===void 0||(pe[Se]=ne[Se]);var Se=arguments.length-2;if(Se===1)pe.children=he;else if(1<Se){for(var Ie=Array(Se),gt=0;gt<Se;gt++)Ie[gt]=arguments[gt+2];pe.children=Ie}return V(L.type,ve,pe)},Oe.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Oe.createElement=function(L,ne,he){var pe,ve={},Se=null;if(ne!=null)for(pe in ne.key!==void 0&&(Se=""+ne.key),ne)R.call(ne,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(ve[pe]=ne[pe]);var Ie=arguments.length-2;if(Ie===1)ve.children=he;else if(1<Ie){for(var gt=Array(Ie),Qe=0;Qe<Ie;Qe++)gt[Qe]=arguments[Qe+2];ve.children=gt}if(L&&L.defaultProps)for(pe in Ie=L.defaultProps,Ie)ve[pe]===void 0&&(ve[pe]=Ie[pe]);return V(L,Se,ve)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(L){return{$$typeof:u,render:L}},Oe.isValidElement=k,Oe.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:ge}},Oe.memo=function(L,ne){return{$$typeof:f,type:L,compare:ne===void 0?null:ne}},Oe.startTransition=function(L){var ne=S.T,he={};S.T=he;try{var pe=L(),ve=S.S;ve!==null&&ve(he,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(J,xe)}catch(Se){xe(Se)}finally{ne!==null&&he.types!==null&&(ne.types=he.types),S.T=ne}},Oe.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Oe.use=function(L){return S.H.use(L)},Oe.useActionState=function(L,ne,he){return S.H.useActionState(L,ne,he)},Oe.useCallback=function(L,ne){return S.H.useCallback(L,ne)},Oe.useContext=function(L){return S.H.useContext(L)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(L,ne){return S.H.useDeferredValue(L,ne)},Oe.useEffect=function(L,ne){return S.H.useEffect(L,ne)},Oe.useEffectEvent=function(L){return S.H.useEffectEvent(L)},Oe.useId=function(){return S.H.useId()},Oe.useImperativeHandle=function(L,ne,he){return S.H.useImperativeHandle(L,ne,he)},Oe.useInsertionEffect=function(L,ne){return S.H.useInsertionEffect(L,ne)},Oe.useLayoutEffect=function(L,ne){return S.H.useLayoutEffect(L,ne)},Oe.useMemo=function(L,ne){return S.H.useMemo(L,ne)},Oe.useOptimistic=function(L,ne){return S.H.useOptimistic(L,ne)},Oe.useReducer=function(L,ne,he){return S.H.useReducer(L,ne,he)},Oe.useRef=function(L){return S.H.useRef(L)},Oe.useState=function(L){return S.H.useState(L)},Oe.useSyncExternalStore=function(L,ne,he){return S.H.useSyncExternalStore(L,ne,he)},Oe.useTransition=function(){return S.H.useTransition()},Oe.version="19.2.0",Oe}var PE;function c_(){return PE||(PE=1,l0.exports=zV()),l0.exports}var U=c_();const Xf=LV(U);var c0={exports:{}},Gu={},u0={exports:{}},h0={};var ME;function BV(){return ME||(ME=1,(function(n){function e(H,oe){var ge=H.length;H.push(oe);e:for(;0<ge;){var xe=ge-1>>>1,ce=H[xe];if(0<s(ce,oe))H[xe]=oe,H[ge]=ce,ge=xe;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var oe=H[0],ge=H.pop();if(ge!==oe){H[0]=ge;e:for(var xe=0,ce=H.length,L=ce>>>1;xe<L;){var ne=2*(xe+1)-1,he=H[ne],pe=ne+1,ve=H[pe];if(0>s(he,ge))pe<ce&&0>s(ve,he)?(H[xe]=ve,H[pe]=ge,xe=pe):(H[xe]=he,H[ne]=ge,xe=ne);else if(pe<ce&&0>s(ve,ge))H[xe]=ve,H[pe]=ge,xe=pe;else break e}}return oe}function s(H,oe){var ge=H.sortIndex-oe.sortIndex;return ge!==0?ge:H.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,v=null,_=3,x=!1,N=!1,A=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function K(H){for(var oe=t(f);oe!==null;){if(oe.callback===null)i(f);else if(oe.startTime<=H)i(f),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=t(f)}}function te(H){if(A=!1,K(H),!N)if(t(d)!==null)N=!0,J||(J=!0,F());else{var oe=t(f);oe!==null&&me(te,oe.startTime-H)}}var J=!1,S=-1,R=5,V=-1;function M(){return C?!0:!(n.unstable_now()-V<R)}function k(){if(C=!1,J){var H=n.unstable_now();V=H;var oe=!0;try{e:{N=!1,A&&(A=!1,z(S),S=-1),x=!0;var ge=_;try{t:{for(K(H),v=t(d);v!==null&&!(v.expirationTime>H&&M());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,_=v.priorityLevel;var ce=xe(v.expirationTime<=H);if(H=n.unstable_now(),typeof ce=="function"){v.callback=ce,K(H),oe=!0;break t}v===t(d)&&i(d),K(H)}else i(d);v=t(d)}if(v!==null)oe=!0;else{var L=t(f);L!==null&&me(te,L.startTime-H),oe=!1}}break e}finally{v=null,_=ge,x=!1}oe=void 0}}finally{oe?F():J=!1}}}var F;if(typeof O=="function")F=function(){O(k)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Le=j.port2;j.port1.onmessage=k,F=function(){Le.postMessage(null)}}else F=function(){P(k,0)};function me(H,oe){S=P(function(){H(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(H){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var ge=_;_=oe;try{return H()}finally{_=ge}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(H,oe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ge=_;_=H;try{return oe()}finally{_=ge}},n.unstable_scheduleCallback=function(H,oe,ge){var xe=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?xe+ge:xe):ge=xe,H){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ge+ce,H={id:g++,callback:oe,priorityLevel:H,startTime:ge,expirationTime:ce,sortIndex:-1},ge>xe?(H.sortIndex=ge,e(f,H),t(d)===null&&H===t(f)&&(A?(z(S),S=-1):A=!0,me(te,ge-xe))):(H.sortIndex=ce,e(d,H),N||x||(N=!0,J||(J=!0,F()))),H},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(H){var oe=_;return function(){var ge=_;_=oe;try{return H.apply(this,arguments)}finally{_=ge}}}})(h0)),h0}var OE;function FV(){return OE||(OE=1,u0.exports=BV()),u0.exports}var d0={exports:{}},gn={};var LE;function qV(){if(LE)return gn;LE=1;var n=c_();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:f,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,gn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},gn.flushSync=function(d){var f=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=g,i.d.f()}},gn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},gn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},gn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,v=u(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:x}):g==="script"&&i.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},gn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},gn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=u(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},gn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},gn.requestFormReset=function(d){i.d.r(d)},gn.unstable_batchedUpdates=function(d,f){return d(f)},gn.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},gn.useFormStatus=function(){return l.H.useHostTransitionStatus()},gn.version="19.2.0",gn}var jE;function HV(){if(jE)return d0.exports;jE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),d0.exports=qV(),d0.exports}var UE;function GV(){if(UE)return Gu;UE=1;var n=FV(),e=c_(),t=HV();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function u(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var c=r,h=a;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){c=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return d(p),r;if(y===h)return d(p),a;y=y.sibling}throw Error(i(188))}if(c.return!==h.return)c=p,h=y;else{for(var w=!1,I=p.child;I;){if(I===c){w=!0,c=p,h=y;break}if(I===h){w=!0,h=p,c=y;break}I=I.sibling}if(!w){for(I=y.child;I;){if(I===c){w=!0,c=y,h=p;break}if(I===h){w=!0,h=y,c=p;break}I=I.sibling}if(!w)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:a}function g(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=g(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),O=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=k&&r[k]||r["@@iterator"],typeof r=="function"?r:null)}var j=Symbol.for("react.client.reference");function Le(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===j?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case P:return"Profiler";case C:return"StrictMode";case te:return"Suspense";case J:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case O:return r.displayName||"Context";case z:return(r._context.displayName||"Context")+".Consumer";case K:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return a=r.displayName||null,a!==null?a:Le(r.type)||"Memo";case R:a=r._payload,r=r._init;try{return Le(r(a))}catch{}}return null}var me=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},xe=[],ce=-1;function L(r){return{current:r}}function ne(r){0>ce||(r.current=xe[ce],xe[ce]=null,ce--)}function he(r,a){ce++,xe[ce]=r.current,r.current=a}var pe=L(null),ve=L(null),Se=L(null),Ie=L(null);function gt(r,a){switch(he(Se,a),he(ve,r),he(pe,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?eE(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=eE(a),r=tE(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ne(pe),he(pe,r)}function Qe(){ne(pe),ne(ve),ne(Se)}function Sn(r){r.memoizedState!==null&&he(Ie,r);var a=pe.current,c=tE(a,r.type);a!==c&&(he(ve,r),he(pe,c))}function Hn(r){ve.current===r&&(ne(pe),ne(ve)),Ie.current===r&&(ne(Ie),zu._currentValue=ge)}var Ko,Yo;function Hi(r){if(Ko===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Ko=a&&a[1]||"",Yo=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ko+r+Yo}var zc=!1;function Pa(r,a){if(!r||zc)return"";zc=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ee){var W=ee}Reflect.construct(r,[],ae)}else{try{ae.call()}catch(ee){W=ee}r.call(ae.prototype)}}else{try{throw Error()}catch(ee){W=ee}(ae=r())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ee){if(ee&&W&&typeof ee.stack=="string")return[ee.stack,W.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),w=y[0],I=y[1];if(w&&I){var B=w.split(`
`),X=I.split(`
`);for(p=h=0;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(h===B.length||p===X.length)for(h=B.length-1,p=X.length-1;1<=h&&0<=p&&B[h]!==X[p];)p--;for(;1<=h&&0<=p;h--,p--)if(B[h]!==X[p]){if(h!==1||p!==1)do if(h--,p--,0>p||B[h]!==X[p]){var ie=`
`+B[h].replace(" at new "," at ");return r.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",r.displayName)),ie}while(1<=h&&0<=p);break}}}finally{zc=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Hi(c):""}function Bc(r,a){switch(r.tag){case 26:case 27:case 5:return Hi(r.type);case 16:return Hi("Lazy");case 13:return r.child!==a&&a!==null?Hi("Suspense Fallback"):Hi("Suspense");case 19:return Hi("SuspenseList");case 0:case 15:return Pa(r.type,!1);case 11:return Pa(r.type.render,!1);case 1:return Pa(r.type,!0);case 31:return Hi("Activity");default:return""}}function Fc(r){try{var a="",c=null;do a+=Bc(r,c),c=r,r=r.return;while(r);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ut=Object.prototype.hasOwnProperty,Wt=n.unstable_scheduleCallback,gs=n.unstable_cancelCallback,cg=n.unstable_shouldYield,bd=n.unstable_requestPaint,An=n.unstable_now,Ma=n.unstable_getCurrentPriorityLevel,qc=n.unstable_ImmediatePriority,Hc=n.unstable_UserBlockingPriority,ys=n.unstable_NormalPriority,ug=n.unstable_LowPriority,Td=n.unstable_IdlePriority,wd=n.log,Ed=n.unstable_setDisableYieldValue,Ai=null,on=null;function ri(r){if(typeof wd=="function"&&Ed(r),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(Ai,r)}catch{}}var Dt=Math.clz32?Math.clz32:Sd,xd=Math.log,Qo=Math.LN2;function Sd(r){return r>>>=0,r===0?32:31-(xd(r)/Qo|0)|0}var Gi=256,Oa=262144,zt=4194304;function $i(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ki(r,a,c){var h=r.pendingLanes;if(h===0)return 0;var p=0,y=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var I=h&134217727;return I!==0?(h=I&~y,h!==0?p=$i(h):(w&=I,w!==0?p=$i(w):c||(c=I&~r,c!==0&&(p=$i(c))))):(I=h&~y,I!==0?p=$i(I):w!==0?p=$i(w):c||(c=h&~r,c!==0&&(p=$i(c)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:p}function Ii(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function hg(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ad(){var r=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),r}function Yi(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function La(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function dg(r,a,c,h,p,y){var w=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var I=r.entanglements,B=r.expirationTimes,X=r.hiddenUpdates;for(c=w&~c;0<c;){var ie=31-Dt(c),ae=1<<ie;I[ie]=0,B[ie]=-1;var W=X[ie];if(W!==null)for(X[ie]=null,ie=0;ie<W.length;ie++){var ee=W[ie];ee!==null&&(ee.lane&=-536870913)}c&=~ae}h!==0&&ja(r,h,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(w&~a))}function ja(r,a,c){r.pendingLanes|=a,r.suspendedLanes&=~a;var h=31-Dt(a);r.entangledLanes|=a,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function Gc(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var h=31-Dt(c),p=1<<h;p&a|r[h]&a&&(r[h]|=a),c&=~p}}function $c(r,a){var c=a&-a;return c=(c&42)!==0?1:Ua(c),(c&(r.suspendedLanes|a))!==0?0:c}function Ua(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Nr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Id(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:xE(r.type))}function Ri(r,a){var c=oe.p;try{return oe.p=r,a()}finally{oe.p=c}}var Ci=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Ci,nn="__reactProps$"+Ci,Qi="__reactContainer$"+Ci,Xo="__reactEvents$"+Ci,fg="__reactListeners$"+Ci,Rd="__reactHandles$"+Ci,Cd="__reactResources$"+Ci,Xi="__reactMarker$"+Ci;function Wo(r){delete r[Bt],delete r[nn],delete r[Xo],delete r[fg],delete r[Rd]}function Wi(r){var a=r[Bt];if(a)return a;for(var c=r.parentNode;c;){if(a=c[Qi]||c[Bt]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=lE(r);r!==null;){if(c=r[Bt])return c;r=lE(r)}return a}r=c,c=r.parentNode}return null}function si(r){if(r=r[Bt]||r[Qi]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Gn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Zi(r){var a=r[Cd];return a||(a=r[Cd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ft(r){r[Xi]=!0}var Kc=new Set,Yc={};function Ji(r,a){er(r,a),er(r+"Capture",a)}function er(r,a){for(Yc[r]=a,r=0;r<a.length;r++)Kc.add(a[r])}var Qc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xc={},Wc={};function Nd(r){return Ut.call(Wc,r)?!0:Ut.call(Xc,r)?!1:Qc.test(r)?Wc[r]=!0:(Xc[r]=!0,!1)}function Zo(r,a,c){if(Nd(a))if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+c)}}function $n(r,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+c)}}function qt(r,a,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(a,c,""+h)}}function rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function vs(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Zc(r,a,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,y=h.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return p.call(this)},set:function(w){c=""+w,y.call(this,w)}}),Object.defineProperty(r,a,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function rt(r){if(!r._valueTracker){var a=vs(r)?"checked":"value";r._valueTracker=Zc(r,a,""+r[a])}}function za(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),h="";return r&&(h=vs(r)?r.checked?"true":"false":r.value),r=h,r!==c?(a.setValue(r),!0):!1}function tr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ba=/[\n"\\]/g;function kn(r){return r.replace(Ba,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Jo(r,a,c,h,p,y,w,I){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),a!=null?w==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+rn(a)):r.value!==""+rn(a)&&(r.value=""+rn(a)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),a!=null?Jc(r,w,rn(a)):c!=null?Jc(r,w,rn(c)):h!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+rn(I):r.removeAttribute("name")}function Dd(r,a,c,h,p,y,w,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){rt(r);return}c=c!=null?""+rn(c):"",a=a!=null?""+rn(a):c,I||a===r.value||(r.value=a),r.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=I?r.checked:!!h,r.defaultChecked=!!h,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w),rt(r)}function Jc(r,a,c){a==="number"&&tr(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function _s(r,a,c,h){if(r=r.options,a){a={};for(var p=0;p<c.length;p++)a["$"+c[p]]=!0;for(c=0;c<r.length;c++)p=a.hasOwnProperty("$"+r[c].value),r[c].selected!==p&&(r[c].selected=p),p&&h&&(r[c].defaultSelected=!0)}else{for(c=""+rn(c),a=null,p=0;p<r.length;p++){if(r[p].value===c){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}a!==null||r[p].disabled||(a=r[p])}a!==null&&(a.selected=!0)}}function kd(r,a,c){if(a!=null&&(a=""+rn(a),a!==r.value&&(r.value=a),c==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=c!=null?""+rn(c):""}function bs(r,a,c,h){if(a==null){if(h!=null){if(c!=null)throw Error(i(92));if(me(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),a=c}c=rn(a),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),rt(r)}function Vn(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var Vd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eu(r,a,c){var h=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":h?r.setProperty(a,c):typeof c!="number"||c===0||Vd.has(a)?a==="float"?r.cssFloat=c:r[a]=(""+c).trim():r[a]=c+"px"}function tu(r,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&c[p]!==h&&eu(r,p,h)}else for(var y in a)a.hasOwnProperty(y)&&eu(r,y,a[y])}function el(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ts=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tl(r){return Ts.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ni(){}var nu=null;function ai(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ws=null,nr=null;function Fa(r){var a=si(r);if(a&&(r=a.stateNode)){var c=r[nn]||null;e:switch(r=a.stateNode,a.type){case"input":if(Jo(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+kn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var h=c[a];if(h!==r&&h.form===r.form){var p=h[nn]||null;if(!p)throw Error(i(90));Jo(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<c.length;a++)h=c[a],h.form===r.form&&za(h)}break e;case"textarea":kd(r,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&_s(r,!!c.multiple,a,!1)}}}var nl=!1;function Es(r,a,c){if(nl)return r(a,c);nl=!0;try{var h=r(a);return h}finally{if(nl=!1,(ws!==null||nr!==null)&&(Rf(),ws&&(a=ws,r=nr,nr=ws=null,Fa(a),r)))for(a=0;a<r.length;a++)Fa(r[a])}}function Di(r,a){var c=r.stateNode;if(c===null)return null;var h=c[nn]||null;if(h===null)return null;c=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qa=!1;if(oi)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){qa=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{qa=!1}var ir=null,iu=null,Ha=null;function ru(){if(Ha)return Ha;var r,a=iu,c=a.length,h,p="value"in ir?ir.value:ir.textContent,y=p.length;for(r=0;r<c&&a[r]===p[r];r++);var w=c-r;for(h=1;h<=w&&a[c-h]===p[y-h];h++);return Ha=p.slice(r,1<h?1-h:void 0)}function Ga(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Dr(){return!0}function ki(){return!1}function ln(r){function a(c,h,p,y,w){this._reactName=c,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(c=r[I],this[I]=c?c(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Dr:ki,this.isPropagationStopped=ki,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),a}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rr=ln(kr),xs=v({},kr,{view:0,detail:0}),su=ln(xs),Ss,il,sr,rl=v({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:As,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==sr&&(sr&&r.type==="mousemove"?(Ss=r.screenX-sr.screenX,il=r.screenY-sr.screenY):il=Ss=0,sr=r),Ss)},movementY:function(r){return"movementY"in r?r.movementY:il}}),au=ln(rl),$a=v({},rl,{dataTransfer:0}),Md=ln($a),Od=v({},xs,{relatedTarget:0}),Ka=ln(Od),ou=v({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ld=ln(ou),sl=v({},kr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),jd=ln(sl),Ud=v({},kr,{data:0}),ar=ln(Ud),zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qd(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Fd[r])?!!a[r]:!1}function As(){return qd}var In=v({},xs,{key:function(r){if(r.key){var a=zd[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ga(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Bd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:As,charCode:function(r){return r.type==="keypress"?Ga(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ga(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Hd=ln(In),Gd=v({},rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vr=ln(Gd),m=v({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:As}),T=ln(m),E=v({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=ln(E),Y=v({},rl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=ln(Y),fe=v({},kr,{newState:0,oldState:0}),je=ln(fe),kt=[9,13,27,32],tt=oi&&"CompositionEvent"in window,_t=null;oi&&"documentMode"in document&&(_t=document.documentMode);var li=oi&&"TextEvent"in window&&!_t,or=oi&&(!tt||_t&&8<_t&&11>=_t),Vi=" ",Pi=!1;function Ya(r,a){switch(r){case"keyup":return kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function al(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ol=!1;function ok(r,a){switch(r){case"compositionend":return al(a);case"keypress":return a.which!==32?null:(Pi=!0,Vi);case"textInput":return r=a.data,r===Vi&&Pi?null:r;default:return null}}function lk(r,a){if(ol)return r==="compositionend"||!tt&&Ya(r,a)?(r=ru(),Ha=iu=ir=null,ol=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return or&&a.locale!=="ko"?null:a.data;default:return null}}var ck={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hT(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!ck[r.type]:a==="textarea"}function dT(r,a,c,h){ws?nr?nr.push(h):nr=[h]:ws=h,a=Mf(a,"onChange"),0<a.length&&(c=new rr("onChange","change",null,c,h),r.push({event:c,listeners:a}))}var lu=null,cu=null;function uk(r){Yw(r,0)}function $d(r){var a=Gn(r);if(za(a))return r}function fT(r,a){if(r==="change")return a}var mT=!1;if(oi){var mg;if(oi){var pg="oninput"in document;if(!pg){var pT=document.createElement("div");pT.setAttribute("oninput","return;"),pg=typeof pT.oninput=="function"}mg=pg}else mg=!1;mT=mg&&(!document.documentMode||9<document.documentMode)}function gT(){lu&&(lu.detachEvent("onpropertychange",yT),cu=lu=null)}function yT(r){if(r.propertyName==="value"&&$d(cu)){var a=[];dT(a,cu,r,ai(r)),Es(uk,a)}}function hk(r,a,c){r==="focusin"?(gT(),lu=a,cu=c,lu.attachEvent("onpropertychange",yT)):r==="focusout"&&gT()}function dk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return $d(cu)}function fk(r,a){if(r==="click")return $d(a)}function mk(r,a){if(r==="input"||r==="change")return $d(a)}function pk(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Kn=typeof Object.is=="function"?Object.is:pk;function uu(r,a){if(Kn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),h=Object.keys(a);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var p=c[h];if(!Ut.call(a,p)||!Kn(r[p],a[p]))return!1}return!0}function vT(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function _T(r,a){var c=vT(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=a&&h>=a)return{node:c,offset:a-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=vT(c)}}function bT(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?bT(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function TT(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=tr(r.document);a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=tr(r.document)}return a}function gg(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var gk=oi&&"documentMode"in document&&11>=document.documentMode,ll=null,yg=null,hu=null,vg=!1;function wT(r,a,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;vg||ll==null||ll!==tr(h)||(h=ll,"selectionStart"in h&&gg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),hu&&uu(hu,h)||(hu=h,h=Mf(yg,"onSelect"),0<h.length&&(a=new rr("onSelect","select",null,a,c),r.push({event:a,listeners:h}),a.target=ll)))}function Qa(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var cl={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},_g={},ET={};oi&&(ET=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function Xa(r){if(_g[r])return _g[r];if(!cl[r])return r;var a=cl[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in ET)return _g[r]=a[c];return r}var xT=Xa("animationend"),ST=Xa("animationiteration"),AT=Xa("animationstart"),yk=Xa("transitionrun"),vk=Xa("transitionstart"),_k=Xa("transitioncancel"),IT=Xa("transitionend"),RT=new Map,bg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bg.push("scrollEnd");function Mi(r,a){RT.set(r,a),Ji(a,[r])}var Kd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ci=[],ul=0,Tg=0;function Yd(){for(var r=ul,a=Tg=ul=0;a<r;){var c=ci[a];ci[a++]=null;var h=ci[a];ci[a++]=null;var p=ci[a];ci[a++]=null;var y=ci[a];if(ci[a++]=null,h!==null&&p!==null){var w=h.pending;w===null?p.next=p:(p.next=w.next,w.next=p),h.pending=p}y!==0&&CT(c,p,y)}}function Qd(r,a,c,h){ci[ul++]=r,ci[ul++]=a,ci[ul++]=c,ci[ul++]=h,Tg|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function wg(r,a,c,h){return Qd(r,a,c,h),Xd(r)}function Wa(r,a){return Qd(r,null,null,a),Xd(r)}function CT(r,a,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var p=!1,y=r.return;y!==null;)y.childLanes|=c,h=y.alternate,h!==null&&(h.childLanes|=c),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&a!==null&&(p=31-Dt(c),r=y.hiddenUpdates,h=r[p],h===null?r[p]=[a]:h.push(a),a.lane=c|536870912),y):null}function Xd(r){if(50<Vu)throw Vu=0,Dy=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var hl={};function bk(r,a,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(r,a,c,h){return new bk(r,a,c,h)}function Eg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Pr(r,a){var c=r.alternate;return c===null?(c=Yn(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function NT(r,a){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,a=c.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Wd(r,a,c,h,p,y){var w=0;if(h=r,typeof r=="function")Eg(r)&&(w=1);else if(typeof r=="string")w=SV(r,c,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=Yn(31,c,a,p),r.elementType=V,r.lanes=y,r;case A:return Za(c.children,p,y,a);case C:w=8,p|=24;break;case P:return r=Yn(12,c,a,p|2),r.elementType=P,r.lanes=y,r;case te:return r=Yn(13,c,a,p),r.elementType=te,r.lanes=y,r;case J:return r=Yn(19,c,a,p),r.elementType=J,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:w=10;break e;case z:w=9;break e;case K:w=11;break e;case S:w=14;break e;case R:w=16,h=null;break e}w=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return a=Yn(w,c,a,p),a.elementType=r,a.type=h,a.lanes=y,a}function Za(r,a,c,h){return r=Yn(7,r,h,a),r.lanes=c,r}function xg(r,a,c){return r=Yn(6,r,null,a),r.lanes=c,r}function DT(r){var a=Yn(18,null,null,0);return a.stateNode=r,a}function Sg(r,a,c){return a=Yn(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var kT=new WeakMap;function ui(r,a){if(typeof r=="object"&&r!==null){var c=kT.get(r);return c!==void 0?c:(a={value:r,source:a,stack:Fc(a)},kT.set(r,a),a)}return{value:r,source:a,stack:Fc(a)}}var dl=[],fl=0,Zd=null,du=0,hi=[],di=0,Is=null,lr=1,cr="";function Mr(r,a){dl[fl++]=du,dl[fl++]=Zd,Zd=r,du=a}function VT(r,a,c){hi[di++]=lr,hi[di++]=cr,hi[di++]=Is,Is=r;var h=lr;r=cr;var p=32-Dt(h)-1;h&=~(1<<p),c+=1;var y=32-Dt(a)+p;if(30<y){var w=p-p%5;y=(h&(1<<w)-1).toString(32),h>>=w,p-=w,lr=1<<32-Dt(a)+p|c<<p|h,cr=y+r}else lr=1<<y|c<<p|h,cr=r}function Ag(r){r.return!==null&&(Mr(r,1),VT(r,1,0))}function Ig(r){for(;r===Zd;)Zd=dl[--fl],dl[fl]=null,du=dl[--fl],dl[fl]=null;for(;r===Is;)Is=hi[--di],hi[di]=null,cr=hi[--di],hi[di]=null,lr=hi[--di],hi[di]=null}function PT(r,a){hi[di++]=lr,hi[di++]=cr,hi[di++]=Is,lr=a.id,cr=a.overflow,Is=r}var cn=null,yt=null,Xe=!1,Rs=null,fi=!1,Rg=Error(i(519));function Cs(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fu(ui(a,r)),Rg}function MT(r){var a=r.stateNode,c=r.type,h=r.memoizedProps;switch(a[Bt]=r,a[nn]=h,c){case"dialog":qe("cancel",a),qe("close",a);break;case"iframe":case"object":case"embed":qe("load",a);break;case"video":case"audio":for(c=0;c<Mu.length;c++)qe(Mu[c],a);break;case"source":qe("error",a);break;case"img":case"image":case"link":qe("error",a),qe("load",a);break;case"details":qe("toggle",a);break;case"input":qe("invalid",a),Dd(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":qe("invalid",a);break;case"textarea":qe("invalid",a),bs(a,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||h.suppressHydrationWarning===!0||Zw(a.textContent,c)?(h.popover!=null&&(qe("beforetoggle",a),qe("toggle",a)),h.onScroll!=null&&qe("scroll",a),h.onScrollEnd!=null&&qe("scrollend",a),h.onClick!=null&&(a.onclick=Ni),a=!0):a=!1,a||Cs(r,!0)}function OT(r){for(cn=r.return;cn;)switch(cn.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:cn=cn.return}}function ml(r){if(r!==cn)return!1;if(!Xe)return OT(r),Xe=!0,!1;var a=r.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||$y(r.type,r.memoizedProps)),c=!c),c&&yt&&Cs(r),OT(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));yt=oE(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));yt=oE(r)}else a===27?(a=yt,qs(r.type)?(r=Wy,Wy=null,yt=r):yt=a):yt=cn?pi(r.stateNode.nextSibling):null;return!0}function Ja(){yt=cn=null,Xe=!1}function Cg(){var r=Rs;return r!==null&&(Ln===null?Ln=r:Ln.push.apply(Ln,r),Rs=null),r}function fu(r){Rs===null?Rs=[r]:Rs.push(r)}var Ng=L(null),eo=null,Or=null;function Ns(r,a,c){he(Ng,a._currentValue),a._currentValue=c}function Lr(r){r._currentValue=Ng.current,ne(Ng)}function Dg(r,a,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),r===c)break;r=r.return}}function kg(r,a,c,h){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var w=p.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=p;for(var B=0;B<a.length;B++)if(I.context===a[B]){y.lanes|=c,I=y.alternate,I!==null&&(I.lanes|=c),Dg(y.return,c,r),h||(w=null);break e}y=I.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(i(341));w.lanes|=c,y=w.alternate,y!==null&&(y.lanes|=c),Dg(w,c,r),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===r){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function pl(r,a,c,h){r=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var I=p.type;Kn(p.pendingProps.value,w.value)||(r!==null?r.push(I):r=[I])}}else if(p===Ie.current){if(w=p.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(zu):r=[zu])}p=p.return}r!==null&&kg(a,r,c,h),a.flags|=262144}function Jd(r){for(r=r.firstContext;r!==null;){if(!Kn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function to(r){eo=r,Or=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function un(r){return LT(eo,r)}function ef(r,a){return eo===null&&to(r),LT(r,a)}function LT(r,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Or===null){if(r===null)throw Error(i(308));Or=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Or=Or.next=a;return c}var Tk=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){a.aborted=!0,r.forEach(function(c){return c()})}},wk=n.unstable_scheduleCallback,Ek=n.unstable_NormalPriority,Ht={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vg(){return{controller:new Tk,data:new Map,refCount:0}}function mu(r){r.refCount--,r.refCount===0&&wk(Ek,function(){r.controller.abort()})}var pu=null,Pg=0,gl=0,yl=null;function xk(r,a){if(pu===null){var c=pu=[];Pg=0,gl=Ly(),yl={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Pg++,a.then(jT,jT),a}function jT(){if(--Pg===0&&pu!==null){yl!==null&&(yl.status="fulfilled");var r=pu;pu=null,gl=0,yl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function Sk(r,a){var c=[],h={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return r.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<c.length;p++)(0,c[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),h}var UT=H.S;H.S=function(r,a){ww=An(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&xk(r,a),UT!==null&&UT(r,a)};var no=L(null);function Mg(){var r=no.current;return r!==null?r:ft.pooledCache}function tf(r,a){a===null?he(no,no.current):he(no,a.pool)}function zT(){var r=Mg();return r===null?null:{parent:Ht._currentValue,pool:r}}var vl=Error(i(460)),Og=Error(i(474)),nf=Error(i(542)),rf={then:function(){}};function BT(r){return r=r.status,r==="fulfilled"||r==="rejected"}function FT(r,a,c){switch(c=r[c],c===void 0?r.push(a):c!==a&&(a.then(Ni,Ni),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,HT(r),r;default:if(typeof a.status=="string")a.then(Ni,Ni);else{if(r=ft,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,HT(r),r}throw ro=a,vl}}function io(r){try{var a=r._init;return a(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(ro=c,vl):c}}var ro=null;function qT(){if(ro===null)throw Error(i(459));var r=ro;return ro=null,r}function HT(r){if(r===vl||r===nf)throw Error(i(483))}var _l=null,gu=0;function sf(r){var a=gu;return gu+=1,_l===null&&(_l=[]),FT(_l,r,a)}function yu(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function af(r,a){throw a.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function GT(r){function a(G,q){if(r){var Q=G.deletions;Q===null?(G.deletions=[q],G.flags|=16):Q.push(q)}}function c(G,q){if(!r)return null;for(;q!==null;)a(G,q),q=q.sibling;return null}function h(G){for(var q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function p(G,q){return G=Pr(G,q),G.index=0,G.sibling=null,G}function y(G,q,Q){return G.index=Q,r?(Q=G.alternate,Q!==null?(Q=Q.index,Q<q?(G.flags|=67108866,q):Q):(G.flags|=67108866,q)):(G.flags|=1048576,q)}function w(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function I(G,q,Q,se){return q===null||q.tag!==6?(q=xg(Q,G.mode,se),q.return=G,q):(q=p(q,Q),q.return=G,q)}function B(G,q,Q,se){var Re=Q.type;return Re===A?ie(G,q,Q.props.children,se,Q.key):q!==null&&(q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&io(Re)===q.type)?(q=p(q,Q.props),yu(q,Q),q.return=G,q):(q=Wd(Q.type,Q.key,Q.props,null,G.mode,se),yu(q,Q),q.return=G,q)}function X(G,q,Q,se){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=Sg(Q,G.mode,se),q.return=G,q):(q=p(q,Q.children||[]),q.return=G,q)}function ie(G,q,Q,se,Re){return q===null||q.tag!==7?(q=Za(Q,G.mode,se,Re),q.return=G,q):(q=p(q,Q),q.return=G,q)}function ae(G,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=xg(""+q,G.mode,Q),q.return=G,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return Q=Wd(q.type,q.key,q.props,null,G.mode,Q),yu(Q,q),Q.return=G,Q;case N:return q=Sg(q,G.mode,Q),q.return=G,q;case R:return q=io(q),ae(G,q,Q)}if(me(q)||F(q))return q=Za(q,G.mode,Q,null),q.return=G,q;if(typeof q.then=="function")return ae(G,sf(q),Q);if(q.$$typeof===O)return ae(G,ef(G,q),Q);af(G,q)}return null}function W(G,q,Q,se){var Re=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Re!==null?null:I(G,q,""+Q,se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return Q.key===Re?B(G,q,Q,se):null;case N:return Q.key===Re?X(G,q,Q,se):null;case R:return Q=io(Q),W(G,q,Q,se)}if(me(Q)||F(Q))return Re!==null?null:ie(G,q,Q,se,null);if(typeof Q.then=="function")return W(G,q,sf(Q),se);if(Q.$$typeof===O)return W(G,q,ef(G,Q),se);af(G,Q)}return null}function ee(G,q,Q,se,Re){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return G=G.get(Q)||null,I(q,G,""+se,Re);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case x:return G=G.get(se.key===null?Q:se.key)||null,B(q,G,se,Re);case N:return G=G.get(se.key===null?Q:se.key)||null,X(q,G,se,Re);case R:return se=io(se),ee(G,q,Q,se,Re)}if(me(se)||F(se))return G=G.get(Q)||null,ie(q,G,se,Re,null);if(typeof se.then=="function")return ee(G,q,Q,sf(se),Re);if(se.$$typeof===O)return ee(G,q,Q,ef(q,se),Re);af(q,se)}return null}function be(G,q,Q,se){for(var Re=null,Je=null,we=q,ze=q=0,Ge=null;we!==null&&ze<Q.length;ze++){we.index>ze?(Ge=we,we=null):Ge=we.sibling;var et=W(G,we,Q[ze],se);if(et===null){we===null&&(we=Ge);break}r&&we&&et.alternate===null&&a(G,we),q=y(et,q,ze),Je===null?Re=et:Je.sibling=et,Je=et,we=Ge}if(ze===Q.length)return c(G,we),Xe&&Mr(G,ze),Re;if(we===null){for(;ze<Q.length;ze++)we=ae(G,Q[ze],se),we!==null&&(q=y(we,q,ze),Je===null?Re=we:Je.sibling=we,Je=we);return Xe&&Mr(G,ze),Re}for(we=h(we);ze<Q.length;ze++)Ge=ee(we,G,ze,Q[ze],se),Ge!==null&&(r&&Ge.alternate!==null&&we.delete(Ge.key===null?ze:Ge.key),q=y(Ge,q,ze),Je===null?Re=Ge:Je.sibling=Ge,Je=Ge);return r&&we.forEach(function(Ys){return a(G,Ys)}),Xe&&Mr(G,ze),Re}function Ne(G,q,Q,se){if(Q==null)throw Error(i(151));for(var Re=null,Je=null,we=q,ze=q=0,Ge=null,et=Q.next();we!==null&&!et.done;ze++,et=Q.next()){we.index>ze?(Ge=we,we=null):Ge=we.sibling;var Ys=W(G,we,et.value,se);if(Ys===null){we===null&&(we=Ge);break}r&&we&&Ys.alternate===null&&a(G,we),q=y(Ys,q,ze),Je===null?Re=Ys:Je.sibling=Ys,Je=Ys,we=Ge}if(et.done)return c(G,we),Xe&&Mr(G,ze),Re;if(we===null){for(;!et.done;ze++,et=Q.next())et=ae(G,et.value,se),et!==null&&(q=y(et,q,ze),Je===null?Re=et:Je.sibling=et,Je=et);return Xe&&Mr(G,ze),Re}for(we=h(we);!et.done;ze++,et=Q.next())et=ee(we,G,ze,et.value,se),et!==null&&(r&&et.alternate!==null&&we.delete(et.key===null?ze:et.key),q=y(et,q,ze),Je===null?Re=et:Je.sibling=et,Je=et);return r&&we.forEach(function(OV){return a(G,OV)}),Xe&&Mr(G,ze),Re}function dt(G,q,Q,se){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:e:{for(var Re=Q.key;q!==null;){if(q.key===Re){if(Re=Q.type,Re===A){if(q.tag===7){c(G,q.sibling),se=p(q,Q.props.children),se.return=G,G=se;break e}}else if(q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&io(Re)===q.type){c(G,q.sibling),se=p(q,Q.props),yu(se,Q),se.return=G,G=se;break e}c(G,q);break}else a(G,q);q=q.sibling}Q.type===A?(se=Za(Q.props.children,G.mode,se,Q.key),se.return=G,G=se):(se=Wd(Q.type,Q.key,Q.props,null,G.mode,se),yu(se,Q),se.return=G,G=se)}return w(G);case N:e:{for(Re=Q.key;q!==null;){if(q.key===Re)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){c(G,q.sibling),se=p(q,Q.children||[]),se.return=G,G=se;break e}else{c(G,q);break}else a(G,q);q=q.sibling}se=Sg(Q,G.mode,se),se.return=G,G=se}return w(G);case R:return Q=io(Q),dt(G,q,Q,se)}if(me(Q))return be(G,q,Q,se);if(F(Q)){if(Re=F(Q),typeof Re!="function")throw Error(i(150));return Q=Re.call(Q),Ne(G,q,Q,se)}if(typeof Q.then=="function")return dt(G,q,sf(Q),se);if(Q.$$typeof===O)return dt(G,q,ef(G,Q),se);af(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(c(G,q.sibling),se=p(q,Q),se.return=G,G=se):(c(G,q),se=xg(Q,G.mode,se),se.return=G,G=se),w(G)):c(G,q)}return function(G,q,Q,se){try{gu=0;var Re=dt(G,q,Q,se);return _l=null,Re}catch(we){if(we===vl||we===nf)throw we;var Je=Yn(29,we,null,G.mode);return Je.lanes=se,Je.return=G,Je}finally{}}}var so=GT(!0),$T=GT(!1),Ds=!1;function Lg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jg(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ks(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Vs(r,a,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(nt&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=Xd(r),CT(r,null,c),a}return Qd(r,h,a,c),Xd(r)}function vu(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var h=a.lanes;h&=r.pendingLanes,c|=h,a.lanes=c,Gc(r,c)}}function Ug(r,a){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?p=y=w:y=y.next=w,c=c.next}while(c!==null);y===null?p=y=a:y=y.next=a}else p=y=a;c={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}var zg=!1;function _u(){if(zg){var r=yl;if(r!==null)throw r}}function bu(r,a,c,h){zg=!1;var p=r.updateQueue;Ds=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,I=p.shared.pending;if(I!==null){p.shared.pending=null;var B=I,X=B.next;B.next=null,w===null?y=X:w.next=X,w=B;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,I=ie.lastBaseUpdate,I!==w&&(I===null?ie.firstBaseUpdate=X:I.next=X,ie.lastBaseUpdate=B))}if(y!==null){var ae=p.baseState;w=0,ie=X=B=null,I=y;do{var W=I.lane&-536870913,ee=W!==I.lane;if(ee?(He&W)===W:(h&W)===W){W!==0&&W===gl&&(zg=!0),ie!==null&&(ie=ie.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var be=r,Ne=I;W=a;var dt=c;switch(Ne.tag){case 1:if(be=Ne.payload,typeof be=="function"){ae=be.call(dt,ae,W);break e}ae=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ne.payload,W=typeof be=="function"?be.call(dt,ae,W):be,W==null)break e;ae=v({},ae,W);break e;case 2:Ds=!0}}W=I.callback,W!==null&&(r.flags|=64,ee&&(r.flags|=8192),ee=p.callbacks,ee===null?p.callbacks=[W]:ee.push(W))}else ee={lane:W,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ie===null?(X=ie=ee,B=ae):ie=ie.next=ee,w|=W;if(I=I.next,I===null){if(I=p.shared.pending,I===null)break;ee=I,I=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);ie===null&&(B=ae),p.baseState=B,p.firstBaseUpdate=X,p.lastBaseUpdate=ie,y===null&&(p.shared.lanes=0),js|=w,r.lanes=w,r.memoizedState=ae}}function KT(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function YT(r,a){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)KT(c[r],a)}var bl=L(null),of=L(0);function QT(r,a){r=$r,he(of,r),he(bl,a),$r=r|a.baseLanes}function Bg(){he(of,$r),he(bl,bl.current)}function Fg(){$r=of.current,ne(bl),ne(of)}var Qn=L(null),mi=null;function Ps(r){var a=r.alternate;he(Vt,Vt.current&1),he(Qn,r),mi===null&&(a===null||bl.current!==null||a.memoizedState!==null)&&(mi=r)}function qg(r){he(Vt,Vt.current),he(Qn,r),mi===null&&(mi=r)}function XT(r){r.tag===22?(he(Vt,Vt.current),he(Qn,r),mi===null&&(mi=r)):Ms()}function Ms(){he(Vt,Vt.current),he(Qn,Qn.current)}function Xn(r){ne(Qn),mi===r&&(mi=null),ne(Vt)}var Vt=L(0);function lf(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Qy(c)||Xy(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var jr=0,Ue=null,ut=null,Gt=null,cf=!1,Tl=!1,ao=!1,uf=0,Tu=0,wl=null,Ak=0;function It(){throw Error(i(321))}function Hg(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!Kn(r[c],a[c]))return!1;return!0}function Gg(r,a,c,h,p,y){return jr=y,Ue=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=r===null||r.memoizedState===null?V1:ay,ao=!1,y=c(h,p),ao=!1,Tl&&(y=ZT(a,c,h,p)),WT(r),y}function WT(r){H.H=xu;var a=ut!==null&&ut.next!==null;if(jr=0,Gt=ut=Ue=null,cf=!1,Tu=0,wl=null,a)throw Error(i(300));r===null||$t||(r=r.dependencies,r!==null&&Jd(r)&&($t=!0))}function ZT(r,a,c,h){Ue=r;var p=0;do{if(Tl&&(wl=null),Tu=0,Tl=!1,25<=p)throw Error(i(301));if(p+=1,Gt=ut=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=P1,y=a(c,h)}while(Tl);return y}function Ik(){var r=H.H,a=r.useState()[0];return a=typeof a.then=="function"?wu(a):a,r=r.useState()[0],(ut!==null?ut.memoizedState:null)!==r&&(Ue.flags|=1024),a}function $g(){var r=uf!==0;return uf=0,r}function Kg(r,a,c){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~c}function Yg(r){if(cf){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}cf=!1}jr=0,Gt=ut=Ue=null,Tl=!1,Tu=uf=0,wl=null}function Rn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ue.memoizedState=Gt=r:Gt=Gt.next=r,Gt}function Pt(){if(ut===null){var r=Ue.alternate;r=r!==null?r.memoizedState:null}else r=ut.next;var a=Gt===null?Ue.memoizedState:Gt.next;if(a!==null)Gt=a,ut=r;else{if(r===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));ut=r,r={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Gt===null?Ue.memoizedState=Gt=r:Gt=Gt.next=r}return Gt}function hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wu(r){var a=Tu;return Tu+=1,wl===null&&(wl=[]),r=FT(wl,r,a),a=Ue,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?V1:ay),r}function df(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return wu(r);if(r.$$typeof===O)return un(r)}throw Error(i(438,String(r)))}function Qg(r){var a=null,c=Ue.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var h=Ue.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=hf(),Ue.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(r),h=0;h<r;h++)c[h]=M;return a.index++,c}function Ur(r,a){return typeof a=="function"?a(r):a}function ff(r){var a=Pt();return Xg(a,ut,r)}function Xg(r,a,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var p=r.baseQueue,y=h.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}a.baseQueue=p=y,h.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{a=p.next;var I=w=null,B=null,X=a,ie=!1;do{var ae=X.lane&-536870913;if(ae!==X.lane?(He&ae)===ae:(jr&ae)===ae){var W=X.revertLane;if(W===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ae===gl&&(ie=!0);else if((jr&W)===W){X=X.next,W===gl&&(ie=!0);continue}else ae={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(I=B=ae,w=y):B=B.next=ae,Ue.lanes|=W,js|=W;ae=X.action,ao&&c(y,ae),y=X.hasEagerState?X.eagerState:c(y,ae)}else W={lane:ae,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(I=B=W,w=y):B=B.next=W,Ue.lanes|=ae,js|=ae;X=X.next}while(X!==null&&X!==a);if(B===null?w=y:B.next=I,!Kn(y,r.memoizedState)&&($t=!0,ie&&(c=yl,c!==null)))throw c;r.memoizedState=y,r.baseState=w,r.baseQueue=B,h.lastRenderedState=y}return p===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Wg(r){var a=Pt(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,p=c.pending,y=a.memoizedState;if(p!==null){c.pending=null;var w=p=p.next;do y=r(y,w.action),w=w.next;while(w!==p);Kn(y,a.memoizedState)||($t=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,h]}function JT(r,a,c){var h=Ue,p=Pt(),y=Xe;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=a();var w=!Kn((ut||p).memoizedState,c);if(w&&(p.memoizedState=c,$t=!0),p=p.queue,ey(n1.bind(null,h,p,r),[r]),p.getSnapshot!==a||w||Gt!==null&&Gt.memoizedState.tag&1){if(h.flags|=2048,El(9,{destroy:void 0},t1.bind(null,h,p,c,a),null),ft===null)throw Error(i(349));y||(jr&127)!==0||e1(h,a,c)}return c}function e1(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=Ue.updateQueue,a===null?(a=hf(),Ue.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function t1(r,a,c,h){a.value=c,a.getSnapshot=h,i1(a)&&r1(r)}function n1(r,a,c){return c(function(){i1(a)&&r1(r)})}function i1(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!Kn(r,c)}catch{return!0}}function r1(r){var a=Wa(r,2);a!==null&&jn(a,r,2)}function Zg(r){var a=Rn();if(typeof r=="function"){var c=r;if(r=c(),ao){ri(!0);try{c()}finally{ri(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:r},a}function s1(r,a,c,h){return r.baseState=c,Xg(r,ut,typeof h=="function"?h:Ur)}function Rk(r,a,c,h,p){if(gf(r))throw Error(i(485));if(r=a.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};H.T!==null?c(!0):y.isTransition=!1,h(y),c=a.pending,c===null?(y.next=a.pending=y,a1(a,y)):(y.next=c.next,a.pending=c.next=y)}}function a1(r,a){var c=a.action,h=a.payload,p=r.state;if(a.isTransition){var y=H.T,w={};H.T=w;try{var I=c(p,h),B=H.S;B!==null&&B(w,I),o1(r,a,I)}catch(X){Jg(r,a,X)}finally{y!==null&&w.types!==null&&(y.types=w.types),H.T=y}}else try{y=c(p,h),o1(r,a,y)}catch(X){Jg(r,a,X)}}function o1(r,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){l1(r,a,h)},function(h){return Jg(r,a,h)}):l1(r,a,c)}function l1(r,a,c){a.status="fulfilled",a.value=c,c1(a),r.state=c,a=r.pending,a!==null&&(c=a.next,c===a?r.pending=null:(c=c.next,a.next=c,a1(r,c)))}function Jg(r,a,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=c,c1(a),a=a.next;while(a!==h)}r.action=null}function c1(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function u1(r,a){return a}function h1(r,a){if(Xe){var c=ft.formState;if(c!==null){e:{var h=Ue;if(Xe){if(yt){t:{for(var p=yt,y=fi;p.nodeType!==8;){if(!y){p=null;break t}if(p=pi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){yt=pi(p.nextSibling),h=p.data==="F!";break e}}Cs(h)}h=!1}h&&(a=c[0])}}return c=Rn(),c.memoizedState=c.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u1,lastRenderedState:a},c.queue=h,c=N1.bind(null,Ue,h),h.dispatch=c,h=Zg(!1),y=sy.bind(null,Ue,!1,h.queue),h=Rn(),p={state:a,dispatch:null,action:r,pending:null},h.queue=p,c=Rk.bind(null,Ue,p,y,c),p.dispatch=c,h.memoizedState=r,[a,c,!1]}function d1(r){var a=Pt();return f1(a,ut,r)}function f1(r,a,c){if(a=Xg(r,a,u1)[0],r=ff(Ur)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=wu(a)}catch(w){throw w===vl?nf:w}else h=a;a=Pt();var p=a.queue,y=p.dispatch;return c!==a.memoizedState&&(Ue.flags|=2048,El(9,{destroy:void 0},Ck.bind(null,p,c),null)),[h,y,r]}function Ck(r,a){r.action=a}function m1(r){var a=Pt(),c=ut;if(c!==null)return f1(a,c,r);Pt(),a=a.memoizedState,c=Pt();var h=c.queue.dispatch;return c.memoizedState=r,[a,h,!1]}function El(r,a,c,h){return r={tag:r,create:c,deps:h,inst:a,next:null},a=Ue.updateQueue,a===null&&(a=hf(),Ue.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,a.lastEffect=r),r}function p1(){return Pt().memoizedState}function mf(r,a,c,h){var p=Rn();Ue.flags|=r,p.memoizedState=El(1|a,{destroy:void 0},c,h===void 0?null:h)}function pf(r,a,c,h){var p=Pt();h=h===void 0?null:h;var y=p.memoizedState.inst;ut!==null&&h!==null&&Hg(h,ut.memoizedState.deps)?p.memoizedState=El(a,y,c,h):(Ue.flags|=r,p.memoizedState=El(1|a,y,c,h))}function g1(r,a){mf(8390656,8,r,a)}function ey(r,a){pf(2048,8,r,a)}function Nk(r){Ue.flags|=4;var a=Ue.updateQueue;if(a===null)a=hf(),Ue.updateQueue=a,a.events=[r];else{var c=a.events;c===null?a.events=[r]:c.push(r)}}function y1(r){var a=Pt().memoizedState;return Nk({ref:a,nextImpl:r}),function(){if((nt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function v1(r,a){return pf(4,2,r,a)}function _1(r,a){return pf(4,4,r,a)}function b1(r,a){if(typeof a=="function"){r=r();var c=a(r);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function T1(r,a,c){c=c!=null?c.concat([r]):null,pf(4,4,b1.bind(null,a,r),c)}function ty(){}function w1(r,a){var c=Pt();a=a===void 0?null:a;var h=c.memoizedState;return a!==null&&Hg(a,h[1])?h[0]:(c.memoizedState=[r,a],r)}function E1(r,a){var c=Pt();a=a===void 0?null:a;var h=c.memoizedState;if(a!==null&&Hg(a,h[1]))return h[0];if(h=r(),ao){ri(!0);try{r()}finally{ri(!1)}}return c.memoizedState=[h,a],h}function ny(r,a,c){return c===void 0||(jr&1073741824)!==0&&(He&261930)===0?r.memoizedState=a:(r.memoizedState=c,r=xw(),Ue.lanes|=r,js|=r,c)}function x1(r,a,c,h){return Kn(c,a)?c:bl.current!==null?(r=ny(r,c,h),Kn(r,a)||($t=!0),r):(jr&42)===0||(jr&1073741824)!==0&&(He&261930)===0?($t=!0,r.memoizedState=c):(r=xw(),Ue.lanes|=r,js|=r,a)}function S1(r,a,c,h,p){var y=oe.p;oe.p=y!==0&&8>y?y:8;var w=H.T,I={};H.T=I,sy(r,!1,a,c);try{var B=p(),X=H.S;if(X!==null&&X(I,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ie=Sk(B,h);Eu(r,a,ie,Jn(r))}else Eu(r,a,h,Jn(r))}catch(ae){Eu(r,a,{then:function(){},status:"rejected",reason:ae},Jn())}finally{oe.p=y,w!==null&&I.types!==null&&(w.types=I.types),H.T=w}}function Dk(){}function iy(r,a,c,h){if(r.tag!==5)throw Error(i(476));var p=A1(r).queue;S1(r,p,a,ge,c===null?Dk:function(){return I1(r),c(h)})}function A1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:ge},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:c},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function I1(r){var a=A1(r);a.next===null&&(a=r.alternate.memoizedState),Eu(r,a.next.queue,{},Jn())}function ry(){return un(zu)}function R1(){return Pt().memoizedState}function C1(){return Pt().memoizedState}function kk(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var c=Jn();r=ks(c);var h=Vs(a,r,c);h!==null&&(jn(h,a,c),vu(h,a,c)),a={cache:Vg()},r.payload=a;return}a=a.return}}function Vk(r,a,c){var h=Jn();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},gf(r)?D1(a,c):(c=wg(r,a,c,h),c!==null&&(jn(c,r,h),k1(c,a,h)))}function N1(r,a,c){var h=Jn();Eu(r,a,c,h)}function Eu(r,a,c,h){var p={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(gf(r))D1(a,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var w=a.lastRenderedState,I=y(w,c);if(p.hasEagerState=!0,p.eagerState=I,Kn(I,w))return Qd(r,a,p,0),ft===null&&Yd(),!1}catch{}finally{}if(c=wg(r,a,p,h),c!==null)return jn(c,r,h),k1(c,a,h),!0}return!1}function sy(r,a,c,h){if(h={lane:2,revertLane:Ly(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},gf(r)){if(a)throw Error(i(479))}else a=wg(r,c,h,2),a!==null&&jn(a,r,2)}function gf(r){var a=r.alternate;return r===Ue||a!==null&&a===Ue}function D1(r,a){Tl=cf=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function k1(r,a,c){if((c&4194048)!==0){var h=a.lanes;h&=r.pendingLanes,c|=h,a.lanes=c,Gc(r,c)}}var xu={readContext:un,use:df,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};xu.useEffectEvent=It;var V1={readContext:un,use:df,useCallback:function(r,a){return Rn().memoizedState=[r,a===void 0?null:a],r},useContext:un,useEffect:g1,useImperativeHandle:function(r,a,c){c=c!=null?c.concat([r]):null,mf(4194308,4,b1.bind(null,a,r),c)},useLayoutEffect:function(r,a){return mf(4194308,4,r,a)},useInsertionEffect:function(r,a){mf(4,2,r,a)},useMemo:function(r,a){var c=Rn();a=a===void 0?null:a;var h=r();if(ao){ri(!0);try{r()}finally{ri(!1)}}return c.memoizedState=[h,a],h},useReducer:function(r,a,c){var h=Rn();if(c!==void 0){var p=c(a);if(ao){ri(!0);try{c(a)}finally{ri(!1)}}}else p=a;return h.memoizedState=h.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},h.queue=r,r=r.dispatch=Vk.bind(null,Ue,r),[h.memoizedState,r]},useRef:function(r){var a=Rn();return r={current:r},a.memoizedState=r},useState:function(r){r=Zg(r);var a=r.queue,c=N1.bind(null,Ue,a);return a.dispatch=c,[r.memoizedState,c]},useDebugValue:ty,useDeferredValue:function(r,a){var c=Rn();return ny(c,r,a)},useTransition:function(){var r=Zg(!1);return r=S1.bind(null,Ue,r.queue,!0,!1),Rn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,c){var h=Ue,p=Rn();if(Xe){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),ft===null)throw Error(i(349));(He&127)!==0||e1(h,a,c)}p.memoizedState=c;var y={value:c,getSnapshot:a};return p.queue=y,g1(n1.bind(null,h,y,r),[r]),h.flags|=2048,El(9,{destroy:void 0},t1.bind(null,h,y,c,a),null),c},useId:function(){var r=Rn(),a=ft.identifierPrefix;if(Xe){var c=cr,h=lr;c=(h&~(1<<32-Dt(h)-1)).toString(32)+c,a="_"+a+"R_"+c,c=uf++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=Ak++,a="_"+a+"r_"+c.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:ry,useFormState:h1,useActionState:h1,useOptimistic:function(r){var a=Rn();a.memoizedState=a.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=sy.bind(null,Ue,!0,c),c.dispatch=a,[r,a]},useMemoCache:Qg,useCacheRefresh:function(){return Rn().memoizedState=kk.bind(null,Ue)},useEffectEvent:function(r){var a=Rn(),c={impl:r};return a.memoizedState=c,function(){if((nt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},ay={readContext:un,use:df,useCallback:w1,useContext:un,useEffect:ey,useImperativeHandle:T1,useInsertionEffect:v1,useLayoutEffect:_1,useMemo:E1,useReducer:ff,useRef:p1,useState:function(){return ff(Ur)},useDebugValue:ty,useDeferredValue:function(r,a){var c=Pt();return x1(c,ut.memoizedState,r,a)},useTransition:function(){var r=ff(Ur)[0],a=Pt().memoizedState;return[typeof r=="boolean"?r:wu(r),a]},useSyncExternalStore:JT,useId:R1,useHostTransitionStatus:ry,useFormState:d1,useActionState:d1,useOptimistic:function(r,a){var c=Pt();return s1(c,ut,r,a)},useMemoCache:Qg,useCacheRefresh:C1};ay.useEffectEvent=y1;var P1={readContext:un,use:df,useCallback:w1,useContext:un,useEffect:ey,useImperativeHandle:T1,useInsertionEffect:v1,useLayoutEffect:_1,useMemo:E1,useReducer:Wg,useRef:p1,useState:function(){return Wg(Ur)},useDebugValue:ty,useDeferredValue:function(r,a){var c=Pt();return ut===null?ny(c,r,a):x1(c,ut.memoizedState,r,a)},useTransition:function(){var r=Wg(Ur)[0],a=Pt().memoizedState;return[typeof r=="boolean"?r:wu(r),a]},useSyncExternalStore:JT,useId:R1,useHostTransitionStatus:ry,useFormState:m1,useActionState:m1,useOptimistic:function(r,a){var c=Pt();return ut!==null?s1(c,ut,r,a):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Qg,useCacheRefresh:C1};P1.useEffectEvent=y1;function oy(r,a,c,h){a=r.memoizedState,c=c(h,a),c=c==null?a:v({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var ly={enqueueSetState:function(r,a,c){r=r._reactInternals;var h=Jn(),p=ks(h);p.payload=a,c!=null&&(p.callback=c),a=Vs(r,p,h),a!==null&&(jn(a,r,h),vu(a,r,h))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var h=Jn(),p=ks(h);p.tag=1,p.payload=a,c!=null&&(p.callback=c),a=Vs(r,p,h),a!==null&&(jn(a,r,h),vu(a,r,h))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=Jn(),h=ks(c);h.tag=2,a!=null&&(h.callback=a),a=Vs(r,h,c),a!==null&&(jn(a,r,c),vu(a,r,c))}};function M1(r,a,c,h,p,y,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,w):a.prototype&&a.prototype.isPureReactComponent?!uu(c,h)||!uu(p,y):!0}function O1(r,a,c,h){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,h),a.state!==r&&ly.enqueueReplaceState(a,a.state,null)}function oo(r,a){var c=a;if("ref"in a){c={};for(var h in a)h!=="ref"&&(c[h]=a[h])}if(r=r.defaultProps){c===a&&(c=v({},c));for(var p in r)c[p]===void 0&&(c[p]=r[p])}return c}function L1(r){Kd(r)}function j1(r){console.error(r)}function U1(r){Kd(r)}function yf(r,a){try{var c=r.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function z1(r,a,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function cy(r,a,c){return c=ks(c),c.tag=3,c.payload={element:null},c.callback=function(){yf(r,a)},c}function B1(r){return r=ks(r),r.tag=3,r}function F1(r,a,c,h){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var y=h.value;r.payload=function(){return p(y)},r.callback=function(){z1(a,c,h)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){z1(a,c,h),typeof p!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var I=h.stack;this.componentDidCatch(h.value,{componentStack:I!==null?I:""})})}function Pk(r,a,c,h,p){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=c.alternate,a!==null&&pl(a,c,p,!0),c=Qn.current,c!==null){switch(c.tag){case 31:case 13:return mi===null?Cf():c.alternate===null&&Rt===0&&(Rt=3),c.flags&=-257,c.flags|=65536,c.lanes=p,h===rf?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([h]):a.add(h),Py(r,h,p)),!1;case 22:return c.flags|=65536,h===rf?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([h]):c.add(h)),Py(r,h,p)),!1}throw Error(i(435,c.tag))}return Py(r,h,p),Cf(),!1}if(Xe)return a=Qn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==Rg&&(r=Error(i(422),{cause:h}),fu(ui(r,c)))):(h!==Rg&&(a=Error(i(423),{cause:h}),fu(ui(a,c))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,h=ui(h,c),p=cy(r.stateNode,h,p),Ug(r,p),Rt!==4&&(Rt=2)),!1;var y=Error(i(520),{cause:h});if(y=ui(y,c),ku===null?ku=[y]:ku.push(y),Rt!==4&&(Rt=2),a===null)return!0;h=ui(h,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,r=p&-p,c.lanes|=r,r=cy(c.stateNode,h,r),Ug(c,r),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Us===null||!Us.has(y))))return c.flags|=65536,p&=-p,c.lanes|=p,p=B1(p),F1(p,r,c,h),Ug(c,p),!1}c=c.return}while(c!==null);return!1}var uy=Error(i(461)),$t=!1;function hn(r,a,c,h){a.child=r===null?$T(a,null,c,h):so(a,r.child,c,h)}function q1(r,a,c,h,p){c=c.render;var y=a.ref;if("ref"in h){var w={};for(var I in h)I!=="ref"&&(w[I]=h[I])}else w=h;return to(a),h=Gg(r,a,c,w,y,p),I=$g(),r!==null&&!$t?(Kg(r,a,p),zr(r,a,p)):(Xe&&I&&Ag(a),a.flags|=1,hn(r,a,h,p),a.child)}function H1(r,a,c,h,p){if(r===null){var y=c.type;return typeof y=="function"&&!Eg(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,G1(r,a,y,h,p)):(r=Wd(c.type,null,h,a,a.mode,p),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!vy(r,p)){var w=y.memoizedProps;if(c=c.compare,c=c!==null?c:uu,c(w,h)&&r.ref===a.ref)return zr(r,a,p)}return a.flags|=1,r=Pr(y,h),r.ref=a.ref,r.return=a,a.child=r}function G1(r,a,c,h,p){if(r!==null){var y=r.memoizedProps;if(uu(y,h)&&r.ref===a.ref)if($t=!1,a.pendingProps=h=y,vy(r,p))(r.flags&131072)!==0&&($t=!0);else return a.lanes=r.lanes,zr(r,a,p)}return hy(r,a,c,h,p)}function $1(r,a,c,h){var p=h.children,y=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,r!==null){for(h=a.child=r.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~y}else h=0,a.child=null;return K1(r,a,y,c,h)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&tf(a,y!==null?y.cachePool:null),y!==null?QT(a,y):Bg(),XT(a);else return h=a.lanes=536870912,K1(r,a,y!==null?y.baseLanes|c:c,c,h)}else y!==null?(tf(a,y.cachePool),QT(a,y),Ms(),a.memoizedState=null):(r!==null&&tf(a,null),Bg(),Ms());return hn(r,a,p,c),a.child}function Su(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function K1(r,a,c,h,p){var y=Mg();return y=y===null?null:{parent:Ht._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},r!==null&&tf(a,null),Bg(),XT(a),r!==null&&pl(r,a,h,!0),a.childLanes=p,null}function vf(r,a){return a=bf({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function Y1(r,a,c){return so(a,r.child,null,c),r=vf(a,a.pendingProps),r.flags|=2,Xn(a),a.memoizedState=null,r}function Mk(r,a,c){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Xe){if(h.mode==="hidden")return r=vf(a,h),a.lanes=536870912,Su(null,r);if(qg(a),(r=yt)?(r=aE(r,fi),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Is!==null?{id:lr,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},c=DT(r),c.return=a,a.child=c,cn=a,yt=null)):r=null,r===null)throw Cs(a);return a.lanes=536870912,null}return vf(a,h)}var y=r.memoizedState;if(y!==null){var w=y.dehydrated;if(qg(a),p)if(a.flags&256)a.flags&=-257,a=Y1(r,a,c);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if($t||pl(r,a,c,!1),p=(c&r.childLanes)!==0,$t||p){if(h=ft,h!==null&&(w=$c(h,c),w!==0&&w!==y.retryLane))throw y.retryLane=w,Wa(r,w),jn(h,r,w),uy;Cf(),a=Y1(r,a,c)}else r=y.treeContext,yt=pi(w.nextSibling),cn=a,Xe=!0,Rs=null,fi=!1,r!==null&&PT(a,r),a=vf(a,h),a.flags|=4096;return a}return r=Pr(r.child,{mode:h.mode,children:h.children}),r.ref=a.ref,a.child=r,r.return=a,r}function _f(r,a){var c=a.ref;if(c===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(a.flags|=4194816)}}function hy(r,a,c,h,p){return to(a),c=Gg(r,a,c,h,void 0,p),h=$g(),r!==null&&!$t?(Kg(r,a,p),zr(r,a,p)):(Xe&&h&&Ag(a),a.flags|=1,hn(r,a,c,p),a.child)}function Q1(r,a,c,h,p,y){return to(a),a.updateQueue=null,c=ZT(a,h,c,p),WT(r),h=$g(),r!==null&&!$t?(Kg(r,a,y),zr(r,a,y)):(Xe&&h&&Ag(a),a.flags|=1,hn(r,a,c,y),a.child)}function X1(r,a,c,h,p){if(to(a),a.stateNode===null){var y=hl,w=c.contextType;typeof w=="object"&&w!==null&&(y=un(w)),y=new c(h,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ly,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=h,y.state=a.memoizedState,y.refs={},Lg(a),w=c.contextType,y.context=typeof w=="object"&&w!==null?un(w):hl,y.state=a.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(oy(a,c,w,h),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&ly.enqueueReplaceState(y,y.state,null),bu(a,h,y,p),_u(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(r===null){y=a.stateNode;var I=a.memoizedProps,B=oo(c,I);y.props=B;var X=y.context,ie=c.contextType;w=hl,typeof ie=="object"&&ie!==null&&(w=un(ie));var ae=c.getDerivedStateFromProps;ie=typeof ae=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||X!==w)&&O1(a,y,h,w),Ds=!1;var W=a.memoizedState;y.state=W,bu(a,h,y,p),_u(),X=a.memoizedState,I||W!==X||Ds?(typeof ae=="function"&&(oy(a,c,ae,h),X=a.memoizedState),(B=Ds||M1(a,c,B,h,W,X,w))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=X),y.props=h,y.state=X,y.context=w,h=B):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{y=a.stateNode,jg(r,a),w=a.memoizedProps,ie=oo(c,w),y.props=ie,ae=a.pendingProps,W=y.context,X=c.contextType,B=hl,typeof X=="object"&&X!==null&&(B=un(X)),I=c.getDerivedStateFromProps,(X=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==ae||W!==B)&&O1(a,y,h,B),Ds=!1,W=a.memoizedState,y.state=W,bu(a,h,y,p),_u();var ee=a.memoizedState;w!==ae||W!==ee||Ds||r!==null&&r.dependencies!==null&&Jd(r.dependencies)?(typeof I=="function"&&(oy(a,c,I,h),ee=a.memoizedState),(ie=Ds||M1(a,c,ie,h,W,ee,B)||r!==null&&r.dependencies!==null&&Jd(r.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,ee,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,ee,B)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ee),y.props=h,y.state=ee,y.context=B,h=ie):(typeof y.componentDidUpdate!="function"||w===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),h=!1)}return y=h,_f(r,a),h=(a.flags&128)!==0,y||h?(y=a.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&h?(a.child=so(a,r.child,null,p),a.child=so(a,null,c,p)):hn(r,a,c,p),a.memoizedState=y.state,r=a.child):r=zr(r,a,p),r}function W1(r,a,c,h){return Ja(),a.flags|=256,hn(r,a,c,h),a.child}var dy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fy(r){return{baseLanes:r,cachePool:zT()}}function my(r,a,c){return r=r!==null?r.childLanes&~c:0,a&&(r|=Zn),r}function Z1(r,a,c){var h=a.pendingProps,p=!1,y=(a.flags&128)!==0,w;if((w=y)||(w=r!==null&&r.memoizedState===null?!1:(Vt.current&2)!==0),w&&(p=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,r===null){if(Xe){if(p?Ps(a):Ms(),(r=yt)?(r=aE(r,fi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Is!==null?{id:lr,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},c=DT(r),c.return=a,a.child=c,cn=a,yt=null)):r=null,r===null)throw Cs(a);return Xy(r)?a.lanes=32:a.lanes=536870912,null}var I=h.children;return h=h.fallback,p?(Ms(),p=a.mode,I=bf({mode:"hidden",children:I},p),h=Za(h,p,c,null),I.return=a,h.return=a,I.sibling=h,a.child=I,h=a.child,h.memoizedState=fy(c),h.childLanes=my(r,w,c),a.memoizedState=dy,Su(null,h)):(Ps(a),py(a,I))}var B=r.memoizedState;if(B!==null&&(I=B.dehydrated,I!==null)){if(y)a.flags&256?(Ps(a),a.flags&=-257,a=gy(r,a,c)):a.memoizedState!==null?(Ms(),a.child=r.child,a.flags|=128,a=null):(Ms(),I=h.fallback,p=a.mode,h=bf({mode:"visible",children:h.children},p),I=Za(I,p,c,null),I.flags|=2,h.return=a,I.return=a,h.sibling=I,a.child=h,so(a,r.child,null,c),h=a.child,h.memoizedState=fy(c),h.childLanes=my(r,w,c),a.memoizedState=dy,a=Su(null,h));else if(Ps(a),Xy(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var X=w.dgst;w=X,h=Error(i(419)),h.stack="",h.digest=w,fu({value:h,source:null,stack:null}),a=gy(r,a,c)}else if($t||pl(r,a,c,!1),w=(c&r.childLanes)!==0,$t||w){if(w=ft,w!==null&&(h=$c(w,c),h!==0&&h!==B.retryLane))throw B.retryLane=h,Wa(r,h),jn(w,r,h),uy;Qy(I)||Cf(),a=gy(r,a,c)}else Qy(I)?(a.flags|=192,a.child=r.child,a=null):(r=B.treeContext,yt=pi(I.nextSibling),cn=a,Xe=!0,Rs=null,fi=!1,r!==null&&PT(a,r),a=py(a,h.children),a.flags|=4096);return a}return p?(Ms(),I=h.fallback,p=a.mode,B=r.child,X=B.sibling,h=Pr(B,{mode:"hidden",children:h.children}),h.subtreeFlags=B.subtreeFlags&65011712,X!==null?I=Pr(X,I):(I=Za(I,p,c,null),I.flags|=2),I.return=a,h.return=a,h.sibling=I,a.child=h,Su(null,h),h=a.child,I=r.child.memoizedState,I===null?I=fy(c):(p=I.cachePool,p!==null?(B=Ht._currentValue,p=p.parent!==B?{parent:B,pool:B}:p):p=zT(),I={baseLanes:I.baseLanes|c,cachePool:p}),h.memoizedState=I,h.childLanes=my(r,w,c),a.memoizedState=dy,Su(r.child,h)):(Ps(a),c=r.child,r=c.sibling,c=Pr(c,{mode:"visible",children:h.children}),c.return=a,c.sibling=null,r!==null&&(w=a.deletions,w===null?(a.deletions=[r],a.flags|=16):w.push(r)),a.child=c,a.memoizedState=null,c)}function py(r,a){return a=bf({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function bf(r,a){return r=Yn(22,r,null,a),r.lanes=0,r}function gy(r,a,c){return so(a,r.child,null,c),r=py(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function J1(r,a,c){r.lanes|=a;var h=r.alternate;h!==null&&(h.lanes|=a),Dg(r.return,a,c)}function yy(r,a,c,h,p,y){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:p,treeForkCount:y}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=h,w.tail=c,w.tailMode=p,w.treeForkCount=y)}function ew(r,a,c){var h=a.pendingProps,p=h.revealOrder,y=h.tail;h=h.children;var w=Vt.current,I=(w&2)!==0;if(I?(w=w&1|2,a.flags|=128):w&=1,he(Vt,w),hn(r,a,h,c),h=Xe?du:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&J1(r,c,a);else if(r.tag===19)J1(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(c=a.child,p=null;c!==null;)r=c.alternate,r!==null&&lf(r)===null&&(p=c),c=c.sibling;c=p,c===null?(p=a.child,a.child=null):(p=c.sibling,c.sibling=null),yy(a,!1,p,c,y,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,p=a.child,a.child=null;p!==null;){if(r=p.alternate,r!==null&&lf(r)===null){a.child=p;break}r=p.sibling,p.sibling=c,c=p,p=r}yy(a,!0,c,null,y,h);break;case"together":yy(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function zr(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),js|=a.lanes,(c&a.childLanes)===0)if(r!==null){if(pl(r,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,c=Pr(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=Pr(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function vy(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Jd(r)))}function Ok(r,a,c){switch(a.tag){case 3:gt(a,a.stateNode.containerInfo),Ns(a,Ht,r.memoizedState.cache),Ja();break;case 27:case 5:Sn(a);break;case 4:gt(a,a.stateNode.containerInfo);break;case 10:Ns(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,qg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Ps(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Z1(r,a,c):(Ps(a),r=zr(r,a,c),r!==null?r.sibling:null);Ps(a);break;case 19:var p=(r.flags&128)!==0;if(h=(c&a.childLanes)!==0,h||(pl(r,a,c,!1),h=(c&a.childLanes)!==0),p){if(h)return ew(r,a,c);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),he(Vt,Vt.current),h)break;return null;case 22:return a.lanes=0,$1(r,a,c,a.pendingProps);case 24:Ns(a,Ht,r.memoizedState.cache)}return zr(r,a,c)}function tw(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps)$t=!0;else{if(!vy(r,c)&&(a.flags&128)===0)return $t=!1,Ok(r,a,c);$t=(r.flags&131072)!==0}else $t=!1,Xe&&(a.flags&1048576)!==0&&VT(a,du,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(r=io(a.elementType),a.type=r,typeof r=="function")Eg(r)?(h=oo(r,h),a.tag=1,a=X1(null,a,r,h,c)):(a.tag=0,a=hy(null,a,r,h,c));else{if(r!=null){var p=r.$$typeof;if(p===K){a.tag=11,a=q1(null,a,r,h,c);break e}else if(p===S){a.tag=14,a=H1(null,a,r,h,c);break e}}throw a=Le(r)||r,Error(i(306,a,""))}}return a;case 0:return hy(r,a,a.type,a.pendingProps,c);case 1:return h=a.type,p=oo(h,a.pendingProps),X1(r,a,h,p,c);case 3:e:{if(gt(a,a.stateNode.containerInfo),r===null)throw Error(i(387));h=a.pendingProps;var y=a.memoizedState;p=y.element,jg(r,a),bu(a,h,null,c);var w=a.memoizedState;if(h=w.cache,Ns(a,Ht,h),h!==y.cache&&kg(a,[Ht],c,!0),_u(),h=w.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=W1(r,a,h,c);break e}else if(h!==p){p=ui(Error(i(424)),a),fu(p),a=W1(r,a,h,c);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(yt=pi(r.firstChild),cn=a,Xe=!0,Rs=null,fi=!0,c=$T(a,null,h,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ja(),h===p){a=zr(r,a,c);break e}hn(r,a,h,c)}a=a.child}return a;case 26:return _f(r,a),r===null?(c=dE(a.type,null,a.pendingProps,null))?a.memoizedState=c:Xe||(c=a.type,r=a.pendingProps,h=Of(Se.current).createElement(c),h[Bt]=a,h[nn]=r,dn(h,c,r),Ft(h),a.stateNode=h):a.memoizedState=dE(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Sn(a),r===null&&Xe&&(h=a.stateNode=cE(a.type,a.pendingProps,Se.current),cn=a,fi=!0,p=yt,qs(a.type)?(Wy=p,yt=pi(h.firstChild)):yt=p),hn(r,a,a.pendingProps.children,c),_f(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Xe&&((p=h=yt)&&(h=dV(h,a.type,a.pendingProps,fi),h!==null?(a.stateNode=h,cn=a,yt=pi(h.firstChild),fi=!1,p=!0):p=!1),p||Cs(a)),Sn(a),p=a.type,y=a.pendingProps,w=r!==null?r.memoizedProps:null,h=y.children,$y(p,y)?h=null:w!==null&&$y(p,w)&&(a.flags|=32),a.memoizedState!==null&&(p=Gg(r,a,Ik,null,null,c),zu._currentValue=p),_f(r,a),hn(r,a,h,c),a.child;case 6:return r===null&&Xe&&((r=c=yt)&&(c=fV(c,a.pendingProps,fi),c!==null?(a.stateNode=c,cn=a,yt=null,r=!0):r=!1),r||Cs(a)),null;case 13:return Z1(r,a,c);case 4:return gt(a,a.stateNode.containerInfo),h=a.pendingProps,r===null?a.child=so(a,null,h,c):hn(r,a,h,c),a.child;case 11:return q1(r,a,a.type,a.pendingProps,c);case 7:return hn(r,a,a.pendingProps,c),a.child;case 8:return hn(r,a,a.pendingProps.children,c),a.child;case 12:return hn(r,a,a.pendingProps.children,c),a.child;case 10:return h=a.pendingProps,Ns(a,a.type,h.value),hn(r,a,h.children,c),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,to(a),p=un(p),h=h(p),a.flags|=1,hn(r,a,h,c),a.child;case 14:return H1(r,a,a.type,a.pendingProps,c);case 15:return G1(r,a,a.type,a.pendingProps,c);case 19:return ew(r,a,c);case 31:return Mk(r,a,c);case 22:return $1(r,a,c,a.pendingProps);case 24:return to(a),h=un(Ht),r===null?(p=Mg(),p===null&&(p=ft,y=Vg(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=c),p=y),a.memoizedState={parent:h,cache:p},Lg(a),Ns(a,Ht,p)):((r.lanes&c)!==0&&(jg(r,a),bu(a,null,null,c),_u()),p=r.memoizedState,y=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Ns(a,Ht,h)):(h=y.cache,Ns(a,Ht,h),h!==p.cache&&kg(a,[Ht],c,!0))),hn(r,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Br(r){r.flags|=4}function _y(r,a,c,h,p){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(Rw())r.flags|=8192;else throw ro=rf,Og}else r.flags&=-16777217}function nw(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!yE(a))if(Rw())r.flags|=8192;else throw ro=rf,Og}function Tf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Ad():536870912,r.lanes|=a,Il|=a)}function Au(r,a){if(!Xe)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function vt(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(a)for(var p=r.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=c,a}function Lk(r,a,c){var h=a.pendingProps;switch(Ig(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(a),null;case 1:return vt(a),null;case 3:return c=a.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Lr(Ht),Qe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(ml(a)?Br(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Cg())),vt(a),null;case 26:var p=a.type,y=a.memoizedState;return r===null?(Br(a),y!==null?(vt(a),nw(a,y)):(vt(a),_y(a,p,null,h,c))):y?y!==r.memoizedState?(Br(a),vt(a),nw(a,y)):(vt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==h&&Br(a),vt(a),_y(a,p,r,h,c)),null;case 27:if(Hn(a),c=Se.current,p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==h&&Br(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return vt(a),null}r=pe.current,ml(a)?MT(a):(r=cE(p,h,c),a.stateNode=r,Br(a))}return vt(a),null;case 5:if(Hn(a),p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==h&&Br(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return vt(a),null}if(y=pe.current,ml(a))MT(a);else{var w=Of(Se.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?w.createElement("select",{is:h.is}):w.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?w.createElement(p,{is:h.is}):w.createElement(p)}}y[Bt]=a,y[nn]=h;e:for(w=a.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===a)break e;for(;w.sibling===null;){if(w.return===null||w.return===a)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}a.stateNode=y;e:switch(dn(y,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Br(a)}}return vt(a),_y(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,c),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==h&&Br(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(r=Se.current,ml(a)){if(r=a.stateNode,c=a.memoizedProps,h=null,p=cn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}r[Bt]=a,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||Zw(r.nodeValue,c)),r||Cs(a,!0)}else r=Of(r).createTextNode(h),r[Bt]=a,a.stateNode=r}return vt(a),null;case 31:if(c=a.memoizedState,r===null||r.memoizedState!==null){if(h=ml(a),c!==null){if(r===null){if(!h)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Bt]=a}else Ja(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;vt(a),r=!1}else c=Cg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return a.flags&256?(Xn(a),a):(Xn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return vt(a),null;case 13:if(h=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=ml(a),h!==null&&h.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Bt]=a}else Ja(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;vt(a),p=!1}else p=Cg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Xn(a),a):(Xn(a),null)}return Xn(a),(a.flags&128)!==0?(a.lanes=c,a):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==p&&(h.flags|=2048)),c!==r&&c&&(a.child.flags|=8192),Tf(a,a.updateQueue),vt(a),null);case 4:return Qe(),r===null&&By(a.stateNode.containerInfo),vt(a),null;case 10:return Lr(a.type),vt(a),null;case 19:if(ne(Vt),h=a.memoizedState,h===null)return vt(a),null;if(p=(a.flags&128)!==0,y=h.rendering,y===null)if(p)Au(h,!1);else{if(Rt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=lf(r),y!==null){for(a.flags|=128,Au(h,!1),r=y.updateQueue,a.updateQueue=r,Tf(a,r),a.subtreeFlags=0,r=c,c=a.child;c!==null;)NT(c,r),c=c.sibling;return he(Vt,Vt.current&1|2),Xe&&Mr(a,h.treeForkCount),a.child}r=r.sibling}h.tail!==null&&An()>Af&&(a.flags|=128,p=!0,Au(h,!1),a.lanes=4194304)}else{if(!p)if(r=lf(y),r!==null){if(a.flags|=128,p=!0,r=r.updateQueue,a.updateQueue=r,Tf(a,r),Au(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!Xe)return vt(a),null}else 2*An()-h.renderingStartTime>Af&&c!==536870912&&(a.flags|=128,p=!0,Au(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(r=h.last,r!==null?r.sibling=y:a.child=y,h.last=y)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=An(),r.sibling=null,c=Vt.current,he(Vt,p?c&1|2:c&1),Xe&&Mr(a,h.treeForkCount),r):(vt(a),null);case 22:case 23:return Xn(a),Fg(),h=a.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(c&536870912)!==0&&(a.flags&128)===0&&(vt(a),a.subtreeFlags&6&&(a.flags|=8192)):vt(a),c=a.updateQueue,c!==null&&Tf(a,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==c&&(a.flags|=2048),r!==null&&ne(no),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Lr(Ht),vt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function jk(r,a){switch(Ig(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Lr(Ht),Qe(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Hn(a),null;case 31:if(a.memoizedState!==null){if(Xn(a),a.alternate===null)throw Error(i(340));Ja()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Xn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ja()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return ne(Vt),null;case 4:return Qe(),null;case 10:return Lr(a.type),null;case 22:case 23:return Xn(a),Fg(),r!==null&&ne(no),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Lr(Ht),null;case 25:return null;default:return null}}function iw(r,a){switch(Ig(a),a.tag){case 3:Lr(Ht),Qe();break;case 26:case 27:case 5:Hn(a);break;case 4:Qe();break;case 31:a.memoizedState!==null&&Xn(a);break;case 13:Xn(a);break;case 19:ne(Vt);break;case 10:Lr(a.type);break;case 22:case 23:Xn(a),Fg(),r!==null&&ne(no);break;case 24:Lr(Ht)}}function Iu(r,a){try{var c=a.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var p=h.next;c=p;do{if((c.tag&r)===r){h=void 0;var y=c.create,w=c.inst;h=y(),w.destroy=h}c=c.next}while(c!==p)}}catch(I){at(a,a.return,I)}}function Os(r,a,c){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var y=p.next;h=y;do{if((h.tag&r)===r){var w=h.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,p=a;var B=c,X=I;try{X()}catch(ie){at(p,B,ie)}}}h=h.next}while(h!==y)}}catch(ie){at(a,a.return,ie)}}function rw(r){var a=r.updateQueue;if(a!==null){var c=r.stateNode;try{YT(a,c)}catch(h){at(r,r.return,h)}}}function sw(r,a,c){c.props=oo(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){at(r,a,h)}}function Ru(r,a){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(p){at(r,a,p)}}function ur(r,a){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(p){at(r,a,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){at(r,a,p)}else c.current=null}function aw(r){var a=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(p){at(r,r.return,p)}}function by(r,a,c){try{var h=r.stateNode;aV(h,r.type,c,a),h[nn]=a}catch(p){at(r,r.return,p)}}function ow(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&qs(r.type)||r.tag===4}function Ty(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ow(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&qs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function wy(r,a,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(r),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Ni));else if(h!==4&&(h===27&&qs(r.type)&&(c=r.stateNode,a=null),r=r.child,r!==null))for(wy(r,a,c),r=r.sibling;r!==null;)wy(r,a,c),r=r.sibling}function wf(r,a,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(h!==4&&(h===27&&qs(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(wf(r,a,c),r=r.sibling;r!==null;)wf(r,a,c),r=r.sibling}function lw(r){var a=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);dn(a,h,c),a[Bt]=r,a[nn]=c}catch(y){at(r,r.return,y)}}var Fr=!1,Kt=!1,Ey=!1,cw=typeof WeakSet=="function"?WeakSet:Set,sn=null;function Uk(r,a){if(r=r.containerInfo,Hy=qf,r=TT(r),gg(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var w=0,I=-1,B=-1,X=0,ie=0,ae=r,W=null;t:for(;;){for(var ee;ae!==c||p!==0&&ae.nodeType!==3||(I=w+p),ae!==y||h!==0&&ae.nodeType!==3||(B=w+h),ae.nodeType===3&&(w+=ae.nodeValue.length),(ee=ae.firstChild)!==null;)W=ae,ae=ee;for(;;){if(ae===r)break t;if(W===c&&++X===p&&(I=w),W===y&&++ie===h&&(B=w),(ee=ae.nextSibling)!==null)break;ae=W,W=ae.parentNode}ae=ee}c=I===-1||B===-1?null:{start:I,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(Gy={focusedElem:r,selectionRange:c},qf=!1,sn=a;sn!==null;)if(a=sn,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,sn=r;else for(;sn!==null;){switch(a=sn,y=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)p=r[c],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,c=a,p=y.memoizedProps,y=y.memoizedState,h=c.stateNode;try{var be=oo(c.type,p);r=h.getSnapshotBeforeUpdate(be,y),h.__reactInternalSnapshotBeforeUpdate=r}catch(Ne){at(c,c.return,Ne)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,c=r.nodeType,c===9)Yy(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Yy(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,sn=r;break}sn=a.return}}function uw(r,a,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Hr(r,c),h&4&&Iu(5,c);break;case 1:if(Hr(r,c),h&4)if(r=c.stateNode,a===null)try{r.componentDidMount()}catch(w){at(c,c.return,w)}else{var p=oo(c.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(p,a,r.__reactInternalSnapshotBeforeUpdate)}catch(w){at(c,c.return,w)}}h&64&&rw(c),h&512&&Ru(c,c.return);break;case 3:if(Hr(r,c),h&64&&(r=c.updateQueue,r!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{YT(r,a)}catch(w){at(c,c.return,w)}}break;case 27:a===null&&h&4&&lw(c);case 26:case 5:Hr(r,c),a===null&&h&4&&aw(c),h&512&&Ru(c,c.return);break;case 12:Hr(r,c);break;case 31:Hr(r,c),h&4&&fw(r,c);break;case 13:Hr(r,c),h&4&&mw(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=Yk.bind(null,c),mV(r,c))));break;case 22:if(h=c.memoizedState!==null||Fr,!h){a=a!==null&&a.memoizedState!==null||Kt,p=Fr;var y=Kt;Fr=h,(Kt=a)&&!y?Gr(r,c,(c.subtreeFlags&8772)!==0):Hr(r,c),Fr=p,Kt=y}break;case 30:break;default:Hr(r,c)}}function hw(r){var a=r.alternate;a!==null&&(r.alternate=null,hw(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Wo(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,Pn=!1;function qr(r,a,c){for(c=c.child;c!==null;)dw(r,a,c),c=c.sibling}function dw(r,a,c){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Ai,c)}catch{}switch(c.tag){case 26:Kt||ur(c,a),qr(r,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Kt||ur(c,a);var h=bt,p=Pn;qs(c.type)&&(bt=c.stateNode,Pn=!1),qr(r,a,c),Lu(c.stateNode),bt=h,Pn=p;break;case 5:Kt||ur(c,a);case 6:if(h=bt,p=Pn,bt=null,qr(r,a,c),bt=h,Pn=p,bt!==null)if(Pn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(c.stateNode)}catch(y){at(c,a,y)}else try{bt.removeChild(c.stateNode)}catch(y){at(c,a,y)}break;case 18:bt!==null&&(Pn?(r=bt,rE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Ml(r)):rE(bt,c.stateNode));break;case 4:h=bt,p=Pn,bt=c.stateNode.containerInfo,Pn=!0,qr(r,a,c),bt=h,Pn=p;break;case 0:case 11:case 14:case 15:Os(2,c,a),Kt||Os(4,c,a),qr(r,a,c);break;case 1:Kt||(ur(c,a),h=c.stateNode,typeof h.componentWillUnmount=="function"&&sw(c,a,h)),qr(r,a,c);break;case 21:qr(r,a,c);break;case 22:Kt=(h=Kt)||c.memoizedState!==null,qr(r,a,c),Kt=h;break;default:qr(r,a,c)}}function fw(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ml(r)}catch(c){at(a,a.return,c)}}}function mw(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ml(r)}catch(c){at(a,a.return,c)}}function zk(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new cw),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new cw),a;default:throw Error(i(435,r.tag))}}function Ef(r,a){var c=zk(r);a.forEach(function(h){if(!c.has(h)){c.add(h);var p=Qk.bind(null,r,h);h.then(p,p)}})}function Mn(r,a){var c=a.deletions;if(c!==null)for(var h=0;h<c.length;h++){var p=c[h],y=r,w=a,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(qs(I.type)){bt=I.stateNode,Pn=!1;break e}break;case 5:bt=I.stateNode,Pn=!1;break e;case 3:case 4:bt=I.stateNode.containerInfo,Pn=!0;break e}I=I.return}if(bt===null)throw Error(i(160));dw(y,w,p),bt=null,Pn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)pw(a,r),a=a.sibling}var Oi=null;function pw(r,a){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Mn(a,r),On(r),h&4&&(Os(3,r,r.return),Iu(3,r),Os(5,r,r.return));break;case 1:Mn(a,r),On(r),h&512&&(Kt||c===null||ur(c,c.return)),h&64&&Fr&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var p=Oi;if(Mn(a,r),On(r),h&512&&(Kt||c===null||ur(c,c.return)),h&4){var y=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Xi]||y[Bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(h),p.head.insertBefore(y,p.querySelector("head > title"))),dn(y,h,c),y[Bt]=r,Ft(y),h=y;break e;case"link":var w=pE("link","href",p).get(h+(c.href||""));if(w){for(var I=0;I<w.length;I++)if(y=w[I],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(I,1);break t}}y=p.createElement(h),dn(y,h,c),p.head.appendChild(y);break;case"meta":if(w=pE("meta","content",p).get(h+(c.content||""))){for(I=0;I<w.length;I++)if(y=w[I],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(I,1);break t}}y=p.createElement(h),dn(y,h,c),p.head.appendChild(y);break;default:throw Error(i(468,h))}y[Bt]=r,Ft(y),h=y}r.stateNode=h}else gE(p,r.type,r.stateNode);else r.stateNode=mE(p,h,r.memoizedProps);else y!==h?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,h===null?gE(p,r.type,r.stateNode):mE(p,h,r.memoizedProps)):h===null&&r.stateNode!==null&&by(r,r.memoizedProps,c.memoizedProps)}break;case 27:Mn(a,r),On(r),h&512&&(Kt||c===null||ur(c,c.return)),c!==null&&h&4&&by(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Mn(a,r),On(r),h&512&&(Kt||c===null||ur(c,c.return)),r.flags&32){p=r.stateNode;try{Vn(p,"")}catch(be){at(r,r.return,be)}}h&4&&r.stateNode!=null&&(p=r.memoizedProps,by(r,p,c!==null?c.memoizedProps:p)),h&1024&&(Ey=!0);break;case 6:if(Mn(a,r),On(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(be){at(r,r.return,be)}}break;case 3:if(Uf=null,p=Oi,Oi=Lf(a.containerInfo),Mn(a,r),Oi=p,On(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Ml(a.containerInfo)}catch(be){at(r,r.return,be)}Ey&&(Ey=!1,gw(r));break;case 4:h=Oi,Oi=Lf(r.stateNode.containerInfo),Mn(a,r),On(r),Oi=h;break;case 12:Mn(a,r),On(r);break;case 31:Mn(a,r),On(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Ef(r,h)));break;case 13:Mn(a,r),On(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Sf=An()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Ef(r,h)));break;case 22:p=r.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,X=Fr,ie=Kt;if(Fr=X||p,Kt=ie||B,Mn(a,r),Kt=ie,Fr=X,On(r),h&8192)e:for(a=r.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(c===null||B||Fr||Kt||lo(r)),c=null,a=r;;){if(a.tag===5||a.tag===26){if(c===null){B=c=a;try{if(y=B.stateNode,p)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=B.stateNode;var ae=B.memoizedProps.style,W=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;I.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(be){at(B,B.return,be)}}}else if(a.tag===6){if(c===null){B=a;try{B.stateNode.nodeValue=p?"":B.memoizedProps}catch(be){at(B,B.return,be)}}}else if(a.tag===18){if(c===null){B=a;try{var ee=B.stateNode;p?sE(ee,!0):sE(B.stateNode,!1)}catch(be){at(B,B.return,be)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Ef(r,c))));break;case 19:Mn(a,r),On(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Ef(r,h)));break;case 30:break;case 21:break;default:Mn(a,r),On(r)}}function On(r){var a=r.flags;if(a&2){try{for(var c,h=r.return;h!==null;){if(ow(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var p=c.stateNode,y=Ty(r);wf(r,y,p);break;case 5:var w=c.stateNode;c.flags&32&&(Vn(w,""),c.flags&=-33);var I=Ty(r);wf(r,I,w);break;case 3:case 4:var B=c.stateNode.containerInfo,X=Ty(r);wy(r,X,B);break;default:throw Error(i(161))}}catch(ie){at(r,r.return,ie)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function gw(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;gw(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Hr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)uw(r,a.alternate,a),a=a.sibling}function lo(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Os(4,a,a.return),lo(a);break;case 1:ur(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&sw(a,a.return,c),lo(a);break;case 27:Lu(a.stateNode);case 26:case 5:ur(a,a.return),lo(a);break;case 22:a.memoizedState===null&&lo(a);break;case 30:lo(a);break;default:lo(a)}r=r.sibling}}function Gr(r,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=r,y=a,w=y.flags;switch(y.tag){case 0:case 11:case 15:Gr(p,y,c),Iu(4,y);break;case 1:if(Gr(p,y,c),h=y,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){at(h,h.return,X)}if(h=y,p=h.updateQueue,p!==null){var I=h.stateNode;try{var B=p.shared.hiddenCallbacks;if(B!==null)for(p.shared.hiddenCallbacks=null,p=0;p<B.length;p++)KT(B[p],I)}catch(X){at(h,h.return,X)}}c&&w&64&&rw(y),Ru(y,y.return);break;case 27:lw(y);case 26:case 5:Gr(p,y,c),c&&h===null&&w&4&&aw(y),Ru(y,y.return);break;case 12:Gr(p,y,c);break;case 31:Gr(p,y,c),c&&w&4&&fw(p,y);break;case 13:Gr(p,y,c),c&&w&4&&mw(p,y);break;case 22:y.memoizedState===null&&Gr(p,y,c),Ru(y,y.return);break;case 30:break;default:Gr(p,y,c)}a=a.sibling}}function xy(r,a){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&mu(c))}function Sy(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&mu(r))}function Li(r,a,c,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)yw(r,a,c,h),a=a.sibling}function yw(r,a,c,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Li(r,a,c,h),p&2048&&Iu(9,a);break;case 1:Li(r,a,c,h);break;case 3:Li(r,a,c,h),p&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&mu(r)));break;case 12:if(p&2048){Li(r,a,c,h),r=a.stateNode;try{var y=a.memoizedProps,w=y.id,I=y.onPostCommit;typeof I=="function"&&I(w,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){at(a,a.return,B)}}else Li(r,a,c,h);break;case 31:Li(r,a,c,h);break;case 13:Li(r,a,c,h);break;case 23:break;case 22:y=a.stateNode,w=a.alternate,a.memoizedState!==null?y._visibility&2?Li(r,a,c,h):Cu(r,a):y._visibility&2?Li(r,a,c,h):(y._visibility|=2,xl(r,a,c,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&xy(w,a);break;case 24:Li(r,a,c,h),p&2048&&Sy(a.alternate,a);break;default:Li(r,a,c,h)}}function xl(r,a,c,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=r,w=a,I=c,B=h,X=w.flags;switch(w.tag){case 0:case 11:case 15:xl(y,w,I,B,p),Iu(8,w);break;case 23:break;case 22:var ie=w.stateNode;w.memoizedState!==null?ie._visibility&2?xl(y,w,I,B,p):Cu(y,w):(ie._visibility|=2,xl(y,w,I,B,p)),p&&X&2048&&xy(w.alternate,w);break;case 24:xl(y,w,I,B,p),p&&X&2048&&Sy(w.alternate,w);break;default:xl(y,w,I,B,p)}a=a.sibling}}function Cu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=r,h=a,p=h.flags;switch(h.tag){case 22:Cu(c,h),p&2048&&xy(h.alternate,h);break;case 24:Cu(c,h),p&2048&&Sy(h.alternate,h);break;default:Cu(c,h)}a=a.sibling}}var Nu=8192;function Sl(r,a,c){if(r.subtreeFlags&Nu)for(r=r.child;r!==null;)vw(r,a,c),r=r.sibling}function vw(r,a,c){switch(r.tag){case 26:Sl(r,a,c),r.flags&Nu&&r.memoizedState!==null&&AV(c,Oi,r.memoizedState,r.memoizedProps);break;case 5:Sl(r,a,c);break;case 3:case 4:var h=Oi;Oi=Lf(r.stateNode.containerInfo),Sl(r,a,c),Oi=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=Nu,Nu=16777216,Sl(r,a,c),Nu=h):Sl(r,a,c));break;default:Sl(r,a,c)}}function _w(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Du(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];sn=h,Tw(h,r)}_w(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)bw(r),r=r.sibling}function bw(r){switch(r.tag){case 0:case 11:case 15:Du(r),r.flags&2048&&Os(9,r,r.return);break;case 3:Du(r);break;case 12:Du(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,xf(r)):Du(r);break;default:Du(r)}}function xf(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];sn=h,Tw(h,r)}_w(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Os(8,a,a.return),xf(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,xf(a));break;default:xf(a)}r=r.sibling}}function Tw(r,a){for(;sn!==null;){var c=sn;switch(c.tag){case 0:case 11:case 15:Os(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:mu(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,sn=h;else e:for(c=r;sn!==null;){h=sn;var p=h.sibling,y=h.return;if(hw(h),h===c){sn=null;break e}if(p!==null){p.return=y,sn=p;break e}sn=y}}}var Bk={getCacheForType:function(r){var a=un(Ht),c=a.data.get(r);return c===void 0&&(c=r(),a.data.set(r,c)),c},cacheSignal:function(){return un(Ht).controller.signal}},Fk=typeof WeakMap=="function"?WeakMap:Map,nt=0,ft=null,Fe=null,He=0,st=0,Wn=null,Ls=!1,Al=!1,Ay=!1,$r=0,Rt=0,js=0,co=0,Iy=0,Zn=0,Il=0,ku=null,Ln=null,Ry=!1,Sf=0,ww=0,Af=1/0,If=null,Us=null,Zt=0,zs=null,Rl=null,Kr=0,Cy=0,Ny=null,Ew=null,Vu=0,Dy=null;function Jn(){return(nt&2)!==0&&He!==0?He&-He:H.T!==null?Ly():Id()}function xw(){if(Zn===0)if((He&536870912)===0||Xe){var r=Oa;Oa<<=1,(Oa&3932160)===0&&(Oa=262144),Zn=r}else Zn=536870912;return r=Qn.current,r!==null&&(r.flags|=32),Zn}function jn(r,a,c){(r===ft&&(st===2||st===9)||r.cancelPendingCommit!==null)&&(Cl(r,0),Bs(r,He,Zn,!1)),La(r,c),((nt&2)===0||r!==ft)&&(r===ft&&((nt&2)===0&&(co|=c),Rt===4&&Bs(r,He,Zn,!1)),hr(r))}function Sw(r,a,c){if((nt&6)!==0)throw Error(i(327));var h=!c&&(a&127)===0&&(a&r.expiredLanes)===0||Ii(r,a),p=h?Gk(r,a):Vy(r,a,!0),y=h;do{if(p===0){Al&&!h&&Bs(r,a,0,!1);break}else{if(c=r.current.alternate,y&&!qk(c)){p=Vy(r,a,!1),y=!1;continue}if(p===2){if(y=a,r.errorRecoveryDisabledLanes&y)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var I=r;p=ku;var B=I.current.memoizedState.isDehydrated;if(B&&(Cl(I,w).flags|=256),w=Vy(I,w,!1),w!==2){if(Ay&&!B){I.errorRecoveryDisabledLanes|=y,co|=y,p=4;break e}y=Ln,Ln=p,y!==null&&(Ln===null?Ln=y:Ln.push.apply(Ln,y))}p=w}if(y=!1,p!==2)continue}}if(p===1){Cl(r,0),Bs(r,a,0,!0);break}e:{switch(h=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Bs(h,a,Zn,!Ls);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=Sf+300-An(),10<p)){if(Bs(h,a,Zn,!Ls),Ki(h,0,!0)!==0)break e;Kr=a,h.timeoutHandle=nE(Aw.bind(null,h,c,Ln,If,Ry,a,Zn,co,Il,Ls,y,"Throttled",-0,0),p);break e}Aw(h,c,Ln,If,Ry,a,Zn,co,Il,Ls,y,null,-0,0)}}break}while(!0);hr(r)}function Aw(r,a,c,h,p,y,w,I,B,X,ie,ae,W,ee){if(r.timeoutHandle=-1,ae=a.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ni},vw(a,y,ae);var be=(y&62914560)===y?Sf-An():(y&4194048)===y?ww-An():0;if(be=IV(ae,be),be!==null){Kr=y,r.cancelPendingCommit=be(Pw.bind(null,r,a,y,c,h,p,w,I,B,ie,ae,null,W,ee)),Bs(r,y,w,!X);return}}Pw(r,a,y,c,h,p,w,I,B)}function qk(r){for(var a=r;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var p=c[h],y=p.getSnapshot;p=p.value;try{if(!Kn(y(),p))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Bs(r,a,c,h){a&=~Iy,a&=~co,r.suspendedLanes|=a,r.pingedLanes&=~a,h&&(r.warmLanes|=a),h=r.expirationTimes;for(var p=a;0<p;){var y=31-Dt(p),w=1<<y;h[y]=-1,p&=~w}c!==0&&ja(r,c,a)}function Rf(){return(nt&6)===0?(Pu(0),!1):!0}function ky(){if(Fe!==null){if(st===0)var r=Fe.return;else r=Fe,Or=eo=null,Yg(r),_l=null,gu=0,r=Fe;for(;r!==null;)iw(r.alternate,r),r=r.return;Fe=null}}function Cl(r,a){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,cV(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Kr=0,ky(),ft=r,Fe=c=Pr(r.current,null),He=a,st=0,Wn=null,Ls=!1,Al=Ii(r,a),Ay=!1,Il=Zn=Iy=co=js=Rt=0,Ln=ku=null,Ry=!1,(a&8)!==0&&(a|=a&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=a;0<h;){var p=31-Dt(h),y=1<<p;a|=r[p],h&=~y}return $r=a,Yd(),c}function Iw(r,a){Ue=null,H.H=xu,a===vl||a===nf?(a=qT(),st=3):a===Og?(a=qT(),st=4):st=a===uy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Wn=a,Fe===null&&(Rt=1,yf(r,ui(a,r.current)))}function Rw(){var r=Qn.current;return r===null?!0:(He&4194048)===He?mi===null:(He&62914560)===He||(He&536870912)!==0?r===mi:!1}function Cw(){var r=H.H;return H.H=xu,r===null?xu:r}function Nw(){var r=H.A;return H.A=Bk,r}function Cf(){Rt=4,Ls||(He&4194048)!==He&&Qn.current!==null||(Al=!0),(js&134217727)===0&&(co&134217727)===0||ft===null||Bs(ft,He,Zn,!1)}function Vy(r,a,c){var h=nt;nt|=2;var p=Cw(),y=Nw();(ft!==r||He!==a)&&(If=null,Cl(r,a)),a=!1;var w=Rt;e:do try{if(st!==0&&Fe!==null){var I=Fe,B=Wn;switch(st){case 8:ky(),w=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(a=!0);var X=st;if(st=0,Wn=null,Nl(r,I,B,X),c&&Al){w=0;break e}break;default:X=st,st=0,Wn=null,Nl(r,I,B,X)}}Hk(),w=Rt;break}catch(ie){Iw(r,ie)}while(!0);return a&&r.shellSuspendCounter++,Or=eo=null,nt=h,H.H=p,H.A=y,Fe===null&&(ft=null,He=0,Yd()),w}function Hk(){for(;Fe!==null;)Dw(Fe)}function Gk(r,a){var c=nt;nt|=2;var h=Cw(),p=Nw();ft!==r||He!==a?(If=null,Af=An()+500,Cl(r,a)):Al=Ii(r,a);e:do try{if(st!==0&&Fe!==null){a=Fe;var y=Wn;t:switch(st){case 1:st=0,Wn=null,Nl(r,a,y,1);break;case 2:case 9:if(BT(y)){st=0,Wn=null,kw(a);break}a=function(){st!==2&&st!==9||ft!==r||(st=7),hr(r)},y.then(a,a);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:BT(y)?(st=0,Wn=null,kw(a)):(st=0,Wn=null,Nl(r,a,y,7));break;case 5:var w=null;switch(Fe.tag){case 26:w=Fe.memoizedState;case 5:case 27:var I=Fe;if(w?yE(w):I.stateNode.complete){st=0,Wn=null;var B=I.sibling;if(B!==null)Fe=B;else{var X=I.return;X!==null?(Fe=X,Nf(X)):Fe=null}break t}}st=0,Wn=null,Nl(r,a,y,5);break;case 6:st=0,Wn=null,Nl(r,a,y,6);break;case 8:ky(),Rt=6;break e;default:throw Error(i(462))}}$k();break}catch(ie){Iw(r,ie)}while(!0);return Or=eo=null,H.H=h,H.A=p,nt=c,Fe!==null?0:(ft=null,He=0,Yd(),Rt)}function $k(){for(;Fe!==null&&!cg();)Dw(Fe)}function Dw(r){var a=tw(r.alternate,r,$r);r.memoizedProps=r.pendingProps,a===null?Nf(r):Fe=a}function kw(r){var a=r,c=a.alternate;switch(a.tag){case 15:case 0:a=Q1(c,a,a.pendingProps,a.type,void 0,He);break;case 11:a=Q1(c,a,a.pendingProps,a.type.render,a.ref,He);break;case 5:Yg(a);default:iw(c,a),a=Fe=NT(a,$r),a=tw(c,a,$r)}r.memoizedProps=r.pendingProps,a===null?Nf(r):Fe=a}function Nl(r,a,c,h){Or=eo=null,Yg(a),_l=null,gu=0;var p=a.return;try{if(Pk(r,p,a,c,He)){Rt=1,yf(r,ui(c,r.current)),Fe=null;return}}catch(y){if(p!==null)throw Fe=p,y;Rt=1,yf(r,ui(c,r.current)),Fe=null;return}a.flags&32768?(Xe||h===1?r=!0:Al||(He&536870912)!==0?r=!1:(Ls=r=!0,(h===2||h===9||h===3||h===6)&&(h=Qn.current,h!==null&&h.tag===13&&(h.flags|=16384))),Vw(a,r)):Nf(a)}function Nf(r){var a=r;do{if((a.flags&32768)!==0){Vw(a,Ls);return}r=a.return;var c=Lk(a.alternate,a,$r);if(c!==null){Fe=c;return}if(a=a.sibling,a!==null){Fe=a;return}Fe=a=r}while(a!==null);Rt===0&&(Rt=5)}function Vw(r,a){do{var c=jk(r.alternate,r);if(c!==null){c.flags&=32767,Fe=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(r=r.sibling,r!==null)){Fe=r;return}Fe=r=c}while(r!==null);Rt=6,Fe=null}function Pw(r,a,c,h,p,y,w,I,B){r.cancelPendingCommit=null;do Df();while(Zt!==0);if((nt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=Tg,dg(r,c,y,w,I,B),r===ft&&(Fe=ft=null,He=0),Rl=a,zs=r,Kr=c,Cy=y,Ny=p,Ew=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Xk(ys,function(){return Uw(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,p=oe.p,oe.p=2,w=nt,nt|=4;try{Uk(r,a,c)}finally{nt=w,oe.p=p,H.T=h}}Zt=1,Mw(),Ow(),Lw()}}function Mw(){if(Zt===1){Zt=0;var r=zs,a=Rl,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=H.T,H.T=null;var h=oe.p;oe.p=2;var p=nt;nt|=4;try{pw(a,r);var y=Gy,w=TT(r.containerInfo),I=y.focusedElem,B=y.selectionRange;if(w!==I&&I&&I.ownerDocument&&bT(I.ownerDocument.documentElement,I)){if(B!==null&&gg(I)){var X=B.start,ie=B.end;if(ie===void 0&&(ie=X),"selectionStart"in I)I.selectionStart=X,I.selectionEnd=Math.min(ie,I.value.length);else{var ae=I.ownerDocument||document,W=ae&&ae.defaultView||window;if(W.getSelection){var ee=W.getSelection(),be=I.textContent.length,Ne=Math.min(B.start,be),dt=B.end===void 0?Ne:Math.min(B.end,be);!ee.extend&&Ne>dt&&(w=dt,dt=Ne,Ne=w);var G=_T(I,Ne),q=_T(I,dt);if(G&&q&&(ee.rangeCount!==1||ee.anchorNode!==G.node||ee.anchorOffset!==G.offset||ee.focusNode!==q.node||ee.focusOffset!==q.offset)){var Q=ae.createRange();Q.setStart(G.node,G.offset),ee.removeAllRanges(),Ne>dt?(ee.addRange(Q),ee.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),ee.addRange(Q))}}}}for(ae=[],ee=I;ee=ee.parentNode;)ee.nodeType===1&&ae.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ae.length;I++){var se=ae[I];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}qf=!!Hy,Gy=Hy=null}finally{nt=p,oe.p=h,H.T=c}}r.current=a,Zt=2}}function Ow(){if(Zt===2){Zt=0;var r=zs,a=Rl,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=H.T,H.T=null;var h=oe.p;oe.p=2;var p=nt;nt|=4;try{uw(r,a.alternate,a)}finally{nt=p,oe.p=h,H.T=c}}Zt=3}}function Lw(){if(Zt===4||Zt===3){Zt=0,bd();var r=zs,a=Rl,c=Kr,h=Ew;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Zt=5:(Zt=0,Rl=zs=null,jw(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Us=null),Nr(c),a=a.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Ai,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=H.T,p=oe.p,oe.p=2,H.T=null;try{for(var y=r.onRecoverableError,w=0;w<h.length;w++){var I=h[w];y(I.value,{componentStack:I.stack})}}finally{H.T=a,oe.p=p}}(Kr&3)!==0&&Df(),hr(r),p=r.pendingLanes,(c&261930)!==0&&(p&42)!==0?r===Dy?Vu++:(Vu=0,Dy=r):Vu=0,Pu(0)}}function jw(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,mu(a)))}function Df(){return Mw(),Ow(),Lw(),Uw()}function Uw(){if(Zt!==5)return!1;var r=zs,a=Cy;Cy=0;var c=Nr(Kr),h=H.T,p=oe.p;try{oe.p=32>c?32:c,H.T=null,c=Ny,Ny=null;var y=zs,w=Kr;if(Zt=0,Rl=zs=null,Kr=0,(nt&6)!==0)throw Error(i(331));var I=nt;if(nt|=4,bw(y.current),yw(y,y.current,w,c),nt=I,Pu(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Ai,y)}catch{}return!0}finally{oe.p=p,H.T=h,jw(r,a)}}function zw(r,a,c){a=ui(c,a),a=cy(r.stateNode,a,2),r=Vs(r,a,2),r!==null&&(La(r,2),hr(r))}function at(r,a,c){if(r.tag===3)zw(r,r,c);else for(;a!==null;){if(a.tag===3){zw(a,r,c);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Us===null||!Us.has(h))){r=ui(c,r),c=B1(2),h=Vs(a,c,2),h!==null&&(F1(c,h,a,r),La(h,2),hr(h));break}}a=a.return}}function Py(r,a,c){var h=r.pingCache;if(h===null){h=r.pingCache=new Fk;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(c)||(Ay=!0,p.add(c),r=Kk.bind(null,r,a,c),a.then(r,r))}function Kk(r,a,c){var h=r.pingCache;h!==null&&h.delete(a),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,ft===r&&(He&c)===c&&(Rt===4||Rt===3&&(He&62914560)===He&&300>An()-Sf?(nt&2)===0&&Cl(r,0):Iy|=c,Il===He&&(Il=0)),hr(r)}function Bw(r,a){a===0&&(a=Ad()),r=Wa(r,a),r!==null&&(La(r,a),hr(r))}function Yk(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),Bw(r,c)}function Qk(r,a){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(c=p.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),Bw(r,c)}function Xk(r,a){return Wt(r,a)}var kf=null,Dl=null,My=!1,Vf=!1,Oy=!1,Fs=0;function hr(r){r!==Dl&&r.next===null&&(Dl===null?kf=Dl=r:Dl=Dl.next=r),Vf=!0,My||(My=!0,Zk())}function Pu(r,a){if(!Oy&&Vf){Oy=!0;do for(var c=!1,h=kf;h!==null;){if(r!==0){var p=h.pendingLanes;if(p===0)var y=0;else{var w=h.suspendedLanes,I=h.pingedLanes;y=(1<<31-Dt(42|r)+1)-1,y&=p&~(w&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Gw(h,y))}else y=He,y=Ki(h,h===ft?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||Ii(h,y)||(c=!0,Gw(h,y));h=h.next}while(c);Oy=!1}}function Wk(){Fw()}function Fw(){Vf=My=!1;var r=0;Fs!==0&&lV()&&(r=Fs);for(var a=An(),c=null,h=kf;h!==null;){var p=h.next,y=qw(h,a);y===0?(h.next=null,c===null?kf=p:c.next=p,p===null&&(Dl=c)):(c=h,(r!==0||(y&3)!==0)&&(Vf=!0)),h=p}Zt!==0&&Zt!==5||Pu(r),Fs!==0&&(Fs=0)}function qw(r,a){for(var c=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var w=31-Dt(y),I=1<<w,B=p[w];B===-1?((I&c)===0||(I&h)!==0)&&(p[w]=hg(I,a)):B<=a&&(r.expiredLanes|=I),y&=~I}if(a=ft,c=He,c=Ki(r,r===a?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===a&&(st===2||st===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&gs(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Ii(r,c)){if(a=c&-c,a===r.callbackPriority)return a;switch(h!==null&&gs(h),Nr(c)){case 2:case 8:c=Hc;break;case 32:c=ys;break;case 268435456:c=Td;break;default:c=ys}return h=Hw.bind(null,r),c=Wt(c,h),r.callbackPriority=a,r.callbackNode=c,a}return h!==null&&h!==null&&gs(h),r.callbackPriority=2,r.callbackNode=null,2}function Hw(r,a){if(Zt!==0&&Zt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Df()&&r.callbackNode!==c)return null;var h=He;return h=Ki(r,r===ft?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(Sw(r,h,a),qw(r,An()),r.callbackNode!=null&&r.callbackNode===c?Hw.bind(null,r):null)}function Gw(r,a){if(Df())return null;Sw(r,a,!0)}function Zk(){uV(function(){(nt&6)!==0?Wt(qc,Wk):Fw()})}function Ly(){if(Fs===0){var r=gl;r===0&&(r=Gi,Gi<<=1,(Gi&261888)===0&&(Gi=256)),Fs=r}return Fs}function $w(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:tl(""+r)}function Kw(r,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,r.id&&c.setAttribute("form",r.id),a.parentNode.insertBefore(c,a),r=new FormData(r),c.parentNode.removeChild(c),r}function Jk(r,a,c,h,p){if(a==="submit"&&c&&c.stateNode===p){var y=$w((p[nn]||null).action),w=h.submitter;w&&(a=(a=w[nn]||null)?$w(a.formAction):w.getAttribute("formAction"),a!==null&&(y=a,w=null));var I=new rr("action","action",null,h,p);r.push({event:I,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Fs!==0){var B=w?Kw(p,w):new FormData(p);iy(c,{pending:!0,data:B,method:p.method,action:y},null,B)}}else typeof y=="function"&&(I.preventDefault(),B=w?Kw(p,w):new FormData(p),iy(c,{pending:!0,data:B,method:p.method,action:y},y,B))},currentTarget:p}]})}}for(var jy=0;jy<bg.length;jy++){var Uy=bg[jy],eV=Uy.toLowerCase(),tV=Uy[0].toUpperCase()+Uy.slice(1);Mi(eV,"on"+tV)}Mi(xT,"onAnimationEnd"),Mi(ST,"onAnimationIteration"),Mi(AT,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(yk,"onTransitionRun"),Mi(vk,"onTransitionStart"),Mi(_k,"onTransitionCancel"),Mi(IT,"onTransitionEnd"),er("onMouseEnter",["mouseout","mouseover"]),er("onMouseLeave",["mouseout","mouseover"]),er("onPointerEnter",["pointerout","pointerover"]),er("onPointerLeave",["pointerout","pointerover"]),Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mu));function Yw(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],p=h.event;h=h.listeners;e:{var y=void 0;if(a)for(var w=h.length-1;0<=w;w--){var I=h[w],B=I.instance,X=I.currentTarget;if(I=I.listener,B!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=X;try{y(p)}catch(ie){Kd(ie)}p.currentTarget=null,y=B}else for(w=0;w<h.length;w++){if(I=h[w],B=I.instance,X=I.currentTarget,I=I.listener,B!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=X;try{y(p)}catch(ie){Kd(ie)}p.currentTarget=null,y=B}}}}function qe(r,a){var c=a[Xo];c===void 0&&(c=a[Xo]=new Set);var h=r+"__bubble";c.has(h)||(Qw(a,r,2,!1),c.add(h))}function zy(r,a,c){var h=0;a&&(h|=4),Qw(c,r,h,a)}var Pf="_reactListening"+Math.random().toString(36).slice(2);function By(r){if(!r[Pf]){r[Pf]=!0,Kc.forEach(function(c){c!=="selectionchange"&&(nV.has(c)||zy(c,!1,r),zy(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Pf]||(a[Pf]=!0,zy("selectionchange",!1,a))}}function Qw(r,a,c,h){switch(xE(a)){case 2:var p=NV;break;case 8:p=DV;break;default:p=n0}c=p.bind(null,a,c,r),p=void 0,!qa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(a,c,{capture:!0,passive:p}):r.addEventListener(a,c,!0):p!==void 0?r.addEventListener(a,c,{passive:p}):r.addEventListener(a,c,!1)}function Fy(r,a,c,h,p){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var I=h.stateNode.containerInfo;if(I===p)break;if(w===4)for(w=h.return;w!==null;){var B=w.tag;if((B===3||B===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;I!==null;){if(w=Wi(I),w===null)return;if(B=w.tag,B===5||B===6||B===26||B===27){h=y=w;continue e}I=I.parentNode}}h=h.return}Es(function(){var X=y,ie=ai(c),ae=[];e:{var W=RT.get(r);if(W!==void 0){var ee=rr,be=r;switch(r){case"keypress":if(Ga(c)===0)break e;case"keydown":case"keyup":ee=Hd;break;case"focusin":be="focus",ee=Ka;break;case"focusout":be="blur",ee=Ka;break;case"beforeblur":case"afterblur":ee=Ka;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=T;break;case xT:case ST:case AT:ee=Ld;break;case IT:ee=D;break;case"scroll":case"scrollend":ee=su;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Vr;break;case"toggle":case"beforetoggle":ee=je}var Ne=(a&4)!==0,dt=!Ne&&(r==="scroll"||r==="scrollend"),G=Ne?W!==null?W+"Capture":null:W;Ne=[];for(var q=X,Q;q!==null;){var se=q;if(Q=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Q===null||G===null||(se=Di(q,G),se!=null&&Ne.push(Ou(q,se,Q))),dt)break;q=q.return}0<Ne.length&&(W=new ee(W,be,null,c,ie),ae.push({event:W,listeners:Ne}))}}if((a&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",ee=r==="mouseout"||r==="pointerout",W&&c!==nu&&(be=c.relatedTarget||c.fromElement)&&(Wi(be)||be[Qi]))break e;if((ee||W)&&(W=ie.window===ie?ie:(W=ie.ownerDocument)?W.defaultView||W.parentWindow:window,ee?(be=c.relatedTarget||c.toElement,ee=X,be=be?Wi(be):null,be!==null&&(dt=o(be),Ne=be.tag,be!==dt||Ne!==5&&Ne!==27&&Ne!==6)&&(be=null)):(ee=null,be=X),ee!==be)){if(Ne=au,se="onMouseLeave",G="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ne=Vr,se="onPointerLeave",G="onPointerEnter",q="pointer"),dt=ee==null?W:Gn(ee),Q=be==null?W:Gn(be),W=new Ne(se,q+"leave",ee,c,ie),W.target=dt,W.relatedTarget=Q,se=null,Wi(ie)===X&&(Ne=new Ne(G,q+"enter",be,c,ie),Ne.target=Q,Ne.relatedTarget=dt,se=Ne),dt=se,ee&&be)t:{for(Ne=iV,G=ee,q=be,Q=0,se=G;se;se=Ne(se))Q++;se=0;for(var Re=q;Re;Re=Ne(Re))se++;for(;0<Q-se;)G=Ne(G),Q--;for(;0<se-Q;)q=Ne(q),se--;for(;Q--;){if(G===q||q!==null&&G===q.alternate){Ne=G;break t}G=Ne(G),q=Ne(q)}Ne=null}else Ne=null;ee!==null&&Xw(ae,W,ee,Ne,!1),be!==null&&dt!==null&&Xw(ae,dt,be,Ne,!0)}}e:{if(W=X?Gn(X):window,ee=W.nodeName&&W.nodeName.toLowerCase(),ee==="select"||ee==="input"&&W.type==="file")var Je=fT;else if(hT(W))if(mT)Je=mk;else{Je=dk;var we=hk}else ee=W.nodeName,!ee||ee.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&el(X.elementType)&&(Je=fT):Je=fk;if(Je&&(Je=Je(r,X))){dT(ae,Je,c,ie);break e}we&&we(r,W,X),r==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&Jc(W,"number",W.value)}switch(we=X?Gn(X):window,r){case"focusin":(hT(we)||we.contentEditable==="true")&&(ll=we,yg=X,hu=null);break;case"focusout":hu=yg=ll=null;break;case"mousedown":vg=!0;break;case"contextmenu":case"mouseup":case"dragend":vg=!1,wT(ae,c,ie);break;case"selectionchange":if(gk)break;case"keydown":case"keyup":wT(ae,c,ie)}var ze;if(tt)e:{switch(r){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else ol?Ya(r,c)&&(Ge="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Ge="onCompositionStart");Ge&&(or&&c.locale!=="ko"&&(ol||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&ol&&(ze=ru()):(ir=ie,iu="value"in ir?ir.value:ir.textContent,ol=!0)),we=Mf(X,Ge),0<we.length&&(Ge=new ar(Ge,r,null,c,ie),ae.push({event:Ge,listeners:we}),ze?Ge.data=ze:(ze=al(c),ze!==null&&(Ge.data=ze)))),(ze=li?ok(r,c):lk(r,c))&&(Ge=Mf(X,"onBeforeInput"),0<Ge.length&&(we=new ar("onBeforeInput","beforeinput",null,c,ie),ae.push({event:we,listeners:Ge}),we.data=ze)),Jk(ae,r,X,c,ie)}Yw(ae,a)})}function Ou(r,a,c){return{instance:r,listener:a,currentTarget:c}}function Mf(r,a){for(var c=a+"Capture",h=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Di(r,c),p!=null&&h.unshift(Ou(r,p,y)),p=Di(r,a),p!=null&&h.push(Ou(r,p,y))),r.tag===3)return h;r=r.return}return[]}function iV(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Xw(r,a,c,h,p){for(var y=a._reactName,w=[];c!==null&&c!==h;){var I=c,B=I.alternate,X=I.stateNode;if(I=I.tag,B!==null&&B===h)break;I!==5&&I!==26&&I!==27||X===null||(B=X,p?(X=Di(c,y),X!=null&&w.unshift(Ou(c,X,B))):p||(X=Di(c,y),X!=null&&w.push(Ou(c,X,B)))),c=c.return}w.length!==0&&r.push({event:a,listeners:w})}var rV=/\r\n?/g,sV=/\u0000|\uFFFD/g;function Ww(r){return(typeof r=="string"?r:""+r).replace(rV,`
`).replace(sV,"")}function Zw(r,a){return a=Ww(a),Ww(r)===a}function ht(r,a,c,h,p,y){switch(c){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Vn(r,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Vn(r,""+h);break;case"className":$n(r,"class",h);break;case"tabIndex":$n(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(r,c,h);break;case"style":tu(r,h,y);break;case"data":if(a!=="object"){$n(r,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=tl(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&ht(r,a,"name",p.name,p,null),ht(r,a,"formEncType",p.formEncType,p,null),ht(r,a,"formMethod",p.formMethod,p,null),ht(r,a,"formTarget",p.formTarget,p,null)):(ht(r,a,"encType",p.encType,p,null),ht(r,a,"method",p.method,p,null),ht(r,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=tl(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Ni);break;case"onScroll":h!=null&&qe("scroll",r);break;case"onScrollEnd":h!=null&&qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=tl(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":qe("beforetoggle",r),qe("toggle",r),Zo(r,"popover",h);break;case"xlinkActuate":qt(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":qt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":qt(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":qt(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":qt(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":qt(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":qt(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":qt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":qt(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Zo(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Pd.get(c)||c,Zo(r,c,h))}}function qy(r,a,c,h,p,y){switch(c){case"style":tu(r,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?Vn(r,h):(typeof h=="number"||typeof h=="bigint")&&Vn(r,""+h);break;case"onScroll":h!=null&&qe("scroll",r);break;case"onScrollEnd":h!=null&&qe("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),a=c.slice(2,p?c.length-7:void 0),y=r[nn]||null,y=y!=null?y[c]:null,typeof y=="function"&&r.removeEventListener(a,y,p),typeof h=="function")){typeof y!="function"&&y!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(a,h,p);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):Zo(r,c,h)}}}function dn(r,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",r),qe("load",r);var h=!1,p=!1,y;for(y in c)if(c.hasOwnProperty(y)){var w=c[y];if(w!=null)switch(y){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(r,a,y,w,c,null)}}p&&ht(r,a,"srcSet",c.srcSet,c,null),h&&ht(r,a,"src",c.src,c,null);return;case"input":qe("invalid",r);var I=y=w=p=null,B=null,X=null;for(h in c)if(c.hasOwnProperty(h)){var ie=c[h];if(ie!=null)switch(h){case"name":p=ie;break;case"type":w=ie;break;case"checked":B=ie;break;case"defaultChecked":X=ie;break;case"value":y=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ht(r,a,h,ie,c,null)}}Dd(r,y,I,B,X,w,p,!1);return;case"select":qe("invalid",r),h=w=y=null;for(p in c)if(c.hasOwnProperty(p)&&(I=c[p],I!=null))switch(p){case"value":y=I;break;case"defaultValue":w=I;break;case"multiple":h=I;default:ht(r,a,p,I,c,null)}a=y,c=w,r.multiple=!!h,a!=null?_s(r,!!h,a,!1):c!=null&&_s(r,!!h,c,!0);return;case"textarea":qe("invalid",r),y=p=h=null;for(w in c)if(c.hasOwnProperty(w)&&(I=c[w],I!=null))switch(w){case"value":h=I;break;case"defaultValue":p=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:ht(r,a,w,I,c,null)}bs(r,h,p,y);return;case"option":for(B in c)if(c.hasOwnProperty(B)&&(h=c[B],h!=null))switch(B){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ht(r,a,B,h,c,null)}return;case"dialog":qe("beforetoggle",r),qe("toggle",r),qe("cancel",r),qe("close",r);break;case"iframe":case"object":qe("load",r);break;case"video":case"audio":for(h=0;h<Mu.length;h++)qe(Mu[h],r);break;case"image":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"embed":case"source":case"link":qe("error",r),qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in c)if(c.hasOwnProperty(X)&&(h=c[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(r,a,X,h,c,null)}return;default:if(el(a)){for(ie in c)c.hasOwnProperty(ie)&&(h=c[ie],h!==void 0&&qy(r,a,ie,h,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(h=c[I],h!=null&&ht(r,a,I,h,c,null))}function aV(r,a,c,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,w=null,I=null,B=null,X=null,ie=null;for(ee in c){var ae=c[ee];if(c.hasOwnProperty(ee)&&ae!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":B=ae;default:h.hasOwnProperty(ee)||ht(r,a,ee,null,h,ae)}}for(var W in h){var ee=h[W];if(ae=c[W],h.hasOwnProperty(W)&&(ee!=null||ae!=null))switch(W){case"type":y=ee;break;case"name":p=ee;break;case"checked":X=ee;break;case"defaultChecked":ie=ee;break;case"value":w=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,a));break;default:ee!==ae&&ht(r,a,W,ee,h,ae)}}Jo(r,w,I,B,X,ie,y,p);return;case"select":ee=w=I=W=null;for(y in c)if(B=c[y],c.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":ee=B;default:h.hasOwnProperty(y)||ht(r,a,y,null,h,B)}for(p in h)if(y=h[p],B=c[p],h.hasOwnProperty(p)&&(y!=null||B!=null))switch(p){case"value":W=y;break;case"defaultValue":I=y;break;case"multiple":w=y;default:y!==B&&ht(r,a,p,y,h,B)}a=I,c=w,h=ee,W!=null?_s(r,!!c,W,!1):!!h!=!!c&&(a!=null?_s(r,!!c,a,!0):_s(r,!!c,c?[]:"",!1));return;case"textarea":ee=W=null;for(I in c)if(p=c[I],c.hasOwnProperty(I)&&p!=null&&!h.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ht(r,a,I,null,h,p)}for(w in h)if(p=h[w],y=c[w],h.hasOwnProperty(w)&&(p!=null||y!=null))switch(w){case"value":W=p;break;case"defaultValue":ee=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ht(r,a,w,p,h,y)}kd(r,W,ee);return;case"option":for(var be in c)if(W=c[be],c.hasOwnProperty(be)&&W!=null&&!h.hasOwnProperty(be))switch(be){case"selected":r.selected=!1;break;default:ht(r,a,be,null,h,W)}for(B in h)if(W=h[B],ee=c[B],h.hasOwnProperty(B)&&W!==ee&&(W!=null||ee!=null))switch(B){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ht(r,a,B,W,h,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in c)W=c[Ne],c.hasOwnProperty(Ne)&&W!=null&&!h.hasOwnProperty(Ne)&&ht(r,a,Ne,null,h,W);for(X in h)if(W=h[X],ee=c[X],h.hasOwnProperty(X)&&W!==ee&&(W!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,a));break;default:ht(r,a,X,W,h,ee)}return;default:if(el(a)){for(var dt in c)W=c[dt],c.hasOwnProperty(dt)&&W!==void 0&&!h.hasOwnProperty(dt)&&qy(r,a,dt,void 0,h,W);for(ie in h)W=h[ie],ee=c[ie],!h.hasOwnProperty(ie)||W===ee||W===void 0&&ee===void 0||qy(r,a,ie,W,h,ee);return}}for(var G in c)W=c[G],c.hasOwnProperty(G)&&W!=null&&!h.hasOwnProperty(G)&&ht(r,a,G,null,h,W);for(ae in h)W=h[ae],ee=c[ae],!h.hasOwnProperty(ae)||W===ee||W==null&&ee==null||ht(r,a,ae,W,h,ee)}function Jw(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oV(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var p=c[h],y=p.transferSize,w=p.initiatorType,I=p.duration;if(y&&I&&Jw(w)){for(w=0,I=p.responseEnd,h+=1;h<c.length;h++){var B=c[h],X=B.startTime;if(X>I)break;var ie=B.transferSize,ae=B.initiatorType;ie&&Jw(ae)&&(B=B.responseEnd,w+=ie*(B<I?1:(I-X)/(B-X)))}if(--h,a+=8*(y+w)/(p.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Hy=null,Gy=null;function Of(r){return r.nodeType===9?r:r.ownerDocument}function eE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tE(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function $y(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ky=null;function lV(){var r=window.event;return r&&r.type==="popstate"?r===Ky?!1:(Ky=r,!0):(Ky=null,!1)}var nE=typeof setTimeout=="function"?setTimeout:void 0,cV=typeof clearTimeout=="function"?clearTimeout:void 0,iE=typeof Promise=="function"?Promise:void 0,uV=typeof queueMicrotask=="function"?queueMicrotask:typeof iE<"u"?function(r){return iE.resolve(null).then(r).catch(hV)}:nE;function hV(r){setTimeout(function(){throw r})}function qs(r){return r==="head"}function rE(r,a){var c=a,h=0;do{var p=c.nextSibling;if(r.removeChild(c),p&&p.nodeType===8)if(c=p.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(p),Ml(a);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Lu(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,Lu(c);for(var y=c.firstChild;y;){var w=y.nextSibling,I=y.nodeName;y[Xi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=w}}else c==="body"&&Lu(r.ownerDocument.body);c=p}while(c);Ml(a)}function sE(r,a){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function Yy(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Yy(c),Wo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function dV(r,a,c,h){for(;r.nodeType===1;){var p=c;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[Xi])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=pi(r.nextSibling),r===null)break}return null}function fV(r,a,c){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=pi(r.nextSibling),r===null))return null;return r}function aE(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=pi(r.nextSibling),r===null))return null;return r}function Qy(r){return r.data==="$?"||r.data==="$~"}function Xy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function mV(r,a){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||c.readyState!=="loading")a();else{var h=function(){a(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function pi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Wy=null;function oE(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(a===0)return pi(r.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}r=r.nextSibling}return null}function lE(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return r;a--}else c!=="/$"&&c!=="/&"||a++}r=r.previousSibling}return null}function cE(r,a,c){switch(a=Of(c),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Lu(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Wo(r)}var gi=new Map,uE=new Set;function Lf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Yr=oe.d;oe.d={f:pV,r:gV,D:yV,C:vV,L:_V,m:bV,X:wV,S:TV,M:EV};function pV(){var r=Yr.f(),a=Rf();return r||a}function gV(r){var a=si(r);a!==null&&a.tag===5&&a.type==="form"?I1(a):Yr.r(r)}var kl=typeof document>"u"?null:document;function hE(r,a,c){var h=kl;if(h&&typeof a=="string"&&a){var p=kn(a);p='link[rel="'+r+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),uE.has(p)||(uE.add(p),r={rel:r,crossOrigin:c,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),dn(a,"link",r),Ft(a),h.head.appendChild(a)))}}function yV(r){Yr.D(r),hE("dns-prefetch",r,null)}function vV(r,a){Yr.C(r,a),hE("preconnect",r,a)}function _V(r,a,c){Yr.L(r,a,c);var h=kl;if(h&&r&&a){var p='link[rel="preload"][as="'+kn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+kn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+kn(c.imageSizes)+'"]')):p+='[href="'+kn(r)+'"]';var y=p;switch(a){case"style":y=Vl(r);break;case"script":y=Pl(r)}gi.has(y)||(r=v({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:r,as:a},c),gi.set(y,r),h.querySelector(p)!==null||a==="style"&&h.querySelector(ju(y))||a==="script"&&h.querySelector(Uu(y))||(a=h.createElement("link"),dn(a,"link",r),Ft(a),h.head.appendChild(a)))}}function bV(r,a){Yr.m(r,a);var c=kl;if(c&&r){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+kn(h)+'"][href="'+kn(r)+'"]',y=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Pl(r)}if(!gi.has(y)&&(r=v({rel:"modulepreload",href:r},a),gi.set(y,r),c.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Uu(y)))return}h=c.createElement("link"),dn(h,"link",r),Ft(h),c.head.appendChild(h)}}}function TV(r,a,c){Yr.S(r,a,c);var h=kl;if(h&&r){var p=Zi(h).hoistableStyles,y=Vl(r);a=a||"default";var w=p.get(y);if(!w){var I={loading:0,preload:null};if(w=h.querySelector(ju(y)))I.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},c),(c=gi.get(y))&&Zy(r,c);var B=w=h.createElement("link");Ft(B),dn(B,"link",r),B._p=new Promise(function(X,ie){B.onload=X,B.onerror=ie}),B.addEventListener("load",function(){I.loading|=1}),B.addEventListener("error",function(){I.loading|=2}),I.loading|=4,jf(w,a,h)}w={type:"stylesheet",instance:w,count:1,state:I},p.set(y,w)}}}function wV(r,a){Yr.X(r,a);var c=kl;if(c&&r){var h=Zi(c).hoistableScripts,p=Pl(r),y=h.get(p);y||(y=c.querySelector(Uu(p)),y||(r=v({src:r,async:!0},a),(a=gi.get(p))&&Jy(r,a),y=c.createElement("script"),Ft(y),dn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(p,y))}}function EV(r,a){Yr.M(r,a);var c=kl;if(c&&r){var h=Zi(c).hoistableScripts,p=Pl(r),y=h.get(p);y||(y=c.querySelector(Uu(p)),y||(r=v({src:r,async:!0,type:"module"},a),(a=gi.get(p))&&Jy(r,a),y=c.createElement("script"),Ft(y),dn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(p,y))}}function dE(r,a,c,h){var p=(p=Se.current)?Lf(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Vl(c.href),c=Zi(p).hoistableStyles,h=c.get(a),h||(h={type:"style",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Vl(c.href);var y=Zi(p).hoistableStyles,w=y.get(r);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,w),(y=p.querySelector(ju(r)))&&!y._p&&(w.instance=y,w.state.loading=5),gi.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},gi.set(r,c),y||xV(p,r,c,w.state))),a&&h===null)throw Error(i(528,""));return w}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Pl(c),c=Zi(p).hoistableScripts,h=c.get(a),h||(h={type:"script",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Vl(r){return'href="'+kn(r)+'"'}function ju(r){return'link[rel="stylesheet"]['+r+"]"}function fE(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function xV(r,a,c,h){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=r.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),dn(a,"link",c),Ft(a),r.head.appendChild(a))}function Pl(r){return'[src="'+kn(r)+'"]'}function Uu(r){return"script[async]"+r}function mE(r,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var h=r.querySelector('style[data-href~="'+kn(c.href)+'"]');if(h)return a.instance=h,Ft(h),h;var p=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),Ft(h),dn(h,"style",p),jf(h,c.precedence,r),a.instance=h;case"stylesheet":p=Vl(c.href);var y=r.querySelector(ju(p));if(y)return a.state.loading|=4,a.instance=y,Ft(y),y;h=fE(c),(p=gi.get(p))&&Zy(h,p),y=(r.ownerDocument||r).createElement("link"),Ft(y);var w=y;return w._p=new Promise(function(I,B){w.onload=I,w.onerror=B}),dn(y,"link",h),a.state.loading|=4,jf(y,c.precedence,r),a.instance=y;case"script":return y=Pl(c.src),(p=r.querySelector(Uu(y)))?(a.instance=p,Ft(p),p):(h=c,(p=gi.get(y))&&(h=v({},c),Jy(h,p)),r=r.ownerDocument||r,p=r.createElement("script"),Ft(p),dn(p,"link",h),r.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,jf(h,c.precedence,r));return a.instance}function jf(r,a,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,y=p,w=0;w<h.length;w++){var I=h[w];if(I.dataset.precedence===a)y=I;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(r,a.firstChild))}function Zy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Jy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Uf=null;function pE(r,a,c){if(Uf===null){var h=new Map,p=Uf=new Map;p.set(c,h)}else p=Uf,h=p.get(c),h||(h=new Map,p.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),p=0;p<c.length;p++){var y=c[p];if(!(y[Xi]||y[Bt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(a)||"";w=r+w;var I=h.get(w);I?I.push(y):h.set(w,[y])}}return h}function gE(r,a,c){r=r.ownerDocument||r,r.head.insertBefore(c,a==="title"?r.querySelector("head > title"):null)}function SV(r,a,c){if(c===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function yE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function AV(r,a,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var p=Vl(h.href),y=a.querySelector(ju(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=zf.bind(r),a.then(r,r)),c.state.loading|=4,c.instance=y,Ft(y);return}y=a.ownerDocument||a,h=fE(h),(p=gi.get(p))&&Zy(h,p),y=y.createElement("link"),Ft(y);var w=y;w._p=new Promise(function(I,B){w.onload=I,w.onerror=B}),dn(y,"link",h),c.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=zf.bind(r),a.addEventListener("load",c),a.addEventListener("error",c))}}var e0=0;function IV(r,a){return r.stylesheets&&r.count===0&&Ff(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&Ff(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+a);0<r.imgBytes&&e0===0&&(e0=62500*oV());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ff(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>e0?50:800)+a);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function zf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ff(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Bf=null;function Ff(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Bf=new Map,a.forEach(RV,r),Bf=null,zf.call(r))}function RV(r,a){if(!(a.state.loading&4)){var c=Bf.get(r);if(c)var h=c.get(null);else{c=new Map,Bf.set(r,c);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var w=p[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),h=w)}h&&c.set(null,h)}p=a.instance,w=p.getAttribute("data-precedence"),y=c.get(w)||h,y===h&&c.set(null,p),c.set(w,p),this.count++,h=zf.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),a.state.loading|=4}}var zu={$$typeof:O,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function CV(r,a,c,h,p,y,w,I,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function vE(r,a,c,h,p,y,w,I,B,X,ie,ae){return r=new CV(r,a,c,w,B,X,ie,ae,I),a=1,y===!0&&(a|=24),y=Yn(3,null,null,a),r.current=y,y.stateNode=r,a=Vg(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:h,isDehydrated:c,cache:a},Lg(y),r}function _E(r){return r?(r=hl,r):hl}function bE(r,a,c,h,p,y){p=_E(p),h.context===null?h.context=p:h.pendingContext=p,h=ks(a),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=Vs(r,h,a),c!==null&&(jn(c,r,a),vu(c,r,a))}function TE(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function t0(r,a){TE(r,a),(r=r.alternate)&&TE(r,a)}function wE(r){if(r.tag===13||r.tag===31){var a=Wa(r,67108864);a!==null&&jn(a,r,67108864),t0(r,67108864)}}function EE(r){if(r.tag===13||r.tag===31){var a=Jn();a=Ua(a);var c=Wa(r,a);c!==null&&jn(c,r,a),t0(r,a)}}var qf=!0;function NV(r,a,c,h){var p=H.T;H.T=null;var y=oe.p;try{oe.p=2,n0(r,a,c,h)}finally{oe.p=y,H.T=p}}function DV(r,a,c,h){var p=H.T;H.T=null;var y=oe.p;try{oe.p=8,n0(r,a,c,h)}finally{oe.p=y,H.T=p}}function n0(r,a,c,h){if(qf){var p=i0(h);if(p===null)Fy(r,a,h,Hf,c),SE(r,h);else if(VV(p,r,a,c,h))h.stopPropagation();else if(SE(r,h),a&4&&-1<kV.indexOf(r)){for(;p!==null;){var y=si(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=$i(y.pendingLanes);if(w!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var B=1<<31-Dt(w);I.entanglements[1]|=B,w&=~B}hr(y),(nt&6)===0&&(Af=An()+500,Pu(0))}}break;case 31:case 13:I=Wa(y,2),I!==null&&jn(I,y,2),Rf(),t0(y,2)}if(y=i0(h),y===null&&Fy(r,a,h,Hf,c),y===p)break;p=y}p!==null&&h.stopPropagation()}else Fy(r,a,h,null,c)}}function i0(r){return r=ai(r),r0(r)}var Hf=null;function r0(r){if(Hf=null,r=Wi(r),r!==null){var a=o(r);if(a===null)r=null;else{var c=a.tag;if(c===13){if(r=l(a),r!==null)return r;r=null}else if(c===31){if(r=u(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Hf=r,null}function xE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ma()){case qc:return 2;case Hc:return 8;case ys:case ug:return 32;case Td:return 268435456;default:return 32}default:return 32}}var s0=!1,Hs=null,Gs=null,$s=null,Bu=new Map,Fu=new Map,Ks=[],kV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SE(r,a){switch(r){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Bu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fu.delete(a.pointerId)}}function qu(r,a,c,h,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},a!==null&&(a=si(a),a!==null&&wE(a)),r):(r.eventSystemFlags|=h,a=r.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),r)}function VV(r,a,c,h,p){switch(a){case"focusin":return Hs=qu(Hs,r,a,c,h,p),!0;case"dragenter":return Gs=qu(Gs,r,a,c,h,p),!0;case"mouseover":return $s=qu($s,r,a,c,h,p),!0;case"pointerover":var y=p.pointerId;return Bu.set(y,qu(Bu.get(y)||null,r,a,c,h,p)),!0;case"gotpointercapture":return y=p.pointerId,Fu.set(y,qu(Fu.get(y)||null,r,a,c,h,p)),!0}return!1}function AE(r){var a=Wi(r.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){r.blockedOn=a,Ri(r.priority,function(){EE(c)});return}}else if(a===31){if(a=u(c),a!==null){r.blockedOn=a,Ri(r.priority,function(){EE(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Gf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=i0(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);nu=h,c.target.dispatchEvent(h),nu=null}else return a=si(c),a!==null&&wE(a),r.blockedOn=c,!1;a.shift()}return!0}function IE(r,a,c){Gf(r)&&c.delete(a)}function PV(){s0=!1,Hs!==null&&Gf(Hs)&&(Hs=null),Gs!==null&&Gf(Gs)&&(Gs=null),$s!==null&&Gf($s)&&($s=null),Bu.forEach(IE),Fu.forEach(IE)}function $f(r,a){r.blockedOn===a&&(r.blockedOn=null,s0||(s0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,PV)))}var Kf=null;function RE(r){Kf!==r&&(Kf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Kf===r&&(Kf=null);for(var a=0;a<r.length;a+=3){var c=r[a],h=r[a+1],p=r[a+2];if(typeof h!="function"){if(r0(h||c)===null)continue;break}var y=si(c);y!==null&&(r.splice(a,3),a-=3,iy(y,{pending:!0,data:p,method:c.method,action:h},h,p))}}))}function Ml(r){function a(B){return $f(B,r)}Hs!==null&&$f(Hs,r),Gs!==null&&$f(Gs,r),$s!==null&&$f($s,r),Bu.forEach(a),Fu.forEach(a);for(var c=0;c<Ks.length;c++){var h=Ks[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<Ks.length&&(c=Ks[0],c.blockedOn===null);)AE(c),c.blockedOn===null&&Ks.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var p=c[h],y=c[h+1],w=p[nn]||null;if(typeof y=="function")w||RE(c);else if(w){var I=null;if(y&&y.hasAttribute("formAction")){if(p=y,w=y[nn]||null)I=w.formAction;else if(r0(p)!==null)continue}else I=w.action;typeof I=="function"?c[h+1]=I:(c.splice(h,3),h-=3),RE(c)}}}function CE(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return p=w})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function a0(r){this._internalRoot=r}Yf.prototype.render=a0.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,h=Jn();bE(c,h,r,a,null,null)},Yf.prototype.unmount=a0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;bE(r.current,2,null,r,null,null),Rf(),a[Qi]=null}};function Yf(r){this._internalRoot=r}Yf.prototype.unstable_scheduleHydration=function(r){if(r){var a=Id();r={blockedOn:null,target:r,priority:a};for(var c=0;c<Ks.length&&a!==0&&a<Ks[c].priority;c++);Ks.splice(c,0,r),c===0&&AE(r)}};var NE=e.version;if(NE!=="19.2.0")throw Error(i(527,NE,"19.2.0"));oe.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var MV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qf.isDisabled&&Qf.supportsFiber)try{Ai=Qf.inject(MV),on=Qf}catch{}}return Gu.createRoot=function(r,a){if(!s(r))throw Error(i(299));var c=!1,h="",p=L1,y=j1,w=U1;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=vE(r,1,!1,null,null,c,h,null,p,y,w,CE),r[Qi]=a.current,By(r),new a0(a)},Gu.hydrateRoot=function(r,a,c){if(!s(r))throw Error(i(299));var h=!1,p="",y=L1,w=j1,I=U1,B=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.formState!==void 0&&(B=c.formState)),a=vE(r,1,!0,a,c??null,h,p,B,y,w,I,CE),a.context=_E(null),c=a.current,h=Jn(),h=Ua(h),p=ks(h),p.callback=null,Vs(c,p,h),c=h,a.current.lanes=c,La(a,c),hr(a),r[Qi]=a.current,By(r),new Yf(a)},Gu.version="19.2.0",Gu}var zE;function $V(){if(zE)return c0.exports;zE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),c0.exports=GV(),c0.exports}var KV=$V();const YV="modulepreload",QV=function(n){return"/house-budget-pwa/"+n},BE={},XV=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var l=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=f(t.map(g=>{if(g=QV(g),g in BE)return;BE[g]=!0;const v=g.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const x=document.createElement("link");if(x.rel=v?"stylesheet":YV,v||(x.as="script"),x.crossOrigin="",x.href=g,d&&x.setAttribute("nonce",d),document.head.appendChild(x),v)return new Promise((N,A)=>{x.addEventListener("load",N),x.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function WV(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:s,onRegisteredSW:o,onRegisterError:l}=n;let u,d;const f=async(v=!0)=>{await d};async function g(){if("serviceWorker"in navigator){if(u=await XV(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/house-budget-pwa/sw.js",{scope:"/house-budget-pwa/",type:"classic"})).catch(v=>{l?.(v)}),!u)return;u.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),u.addEventListener("installed",v=>{v.isUpdate||i?.()}),u.register({immediate:e}).then(v=>{o?o("/house-budget-pwa/sw.js",v):s?.(v)}).catch(v=>{l?.(v)})}}return d=g(),f}var FE="popstate";function ZV(n={}){function e(s,o){let{pathname:l="/",search:u="",hash:d=""}=Ho(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),W0("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:xh(o))}function i(s,o){Si(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return e4(e,t,i,n)}function St(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Si(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JV(){return Math.random().toString(36).substring(2,10)}function qE(n,e){return{usr:n.state,key:n.key,idx:e}}function W0(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ho(e):e,state:t,key:e&&e.key||i||JV()}}function xh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ho(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function e4(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,u="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function v(){u="POP";let C=g(),P=C==null?null:C-f;f=C,d&&d({action:u,location:A.location,delta:P})}function _(C,P){u="PUSH";let z=W0(A.location,C,P);t&&t(z,C),f=g()+1;let O=qE(z,f),K=A.createHref(z);try{l.pushState(O,"",K)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;s.location.assign(K)}o&&d&&d({action:u,location:A.location,delta:1})}function x(C,P){u="REPLACE";let z=W0(A.location,C,P);t&&t(z,C),f=g();let O=qE(z,f),K=A.createHref(z);l.replaceState(O,"",K),o&&d&&d({action:u,location:A.location,delta:0})}function N(C){return t4(C)}let A={get action(){return u},get location(){return n(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(FE,v),d=C,()=>{s.removeEventListener(FE,v),d=null}},createHref(C){return e(s,C)},createURL:N,encodeLocation(C){let P=N(C);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:_,replace:x,go(C){return l.go(C)}};return A}function t4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),St(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:xh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function TI(n,e,t="/"){return n4(n,e,t,!1)}function n4(n,e,t,i){let s=typeof e=="string"?Ho(e):e,o=rs(s.pathname||"/",t);if(o==null)return null;let l=wI(n);i4(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=m4(o);u=d4(l[d],f,i)}return u}function wI(n,e=[],t=[],i="",s=!1){let o=(l,u,d=s,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;St(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let v=ts([i,g.relativePath]),_=t.concat(g);l.children&&l.children.length>0&&(St(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),wI(l.children,e,_,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:u4(v,l.index),routesMeta:_})};return n.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of EI(l.path))o(l,u,!0,d)}),e}function EI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=EI(i.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function i4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:h4(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var r4=/^:[\w-]+$/,s4=3,a4=2,o4=1,l4=10,c4=-2,HE=n=>n==="*";function u4(n,e){let t=n.split("/"),i=t.length;return t.some(HE)&&(i+=c4),e&&(i+=a4),t.filter(s=>!HE(s)).reduce((s,o)=>s+(r4.test(o)?s4:o===""?o4:l4),i)}function h4(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function d4(n,e,t=!1){let{routesMeta:i}=n,s={},o="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Mm({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),_=d.route;if(!v&&f&&t&&!i[i.length-1].route.index&&(v=Mm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:ts([o,v.pathname]),pathnameBase:_4(ts([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=ts([o,v.pathnameBase]))}return l}function Mm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=f4(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:v},_)=>{if(g==="*"){let N=u[_]||"";l=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const x=u[_];return v&&!x?f[g]=void 0:f[g]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function f4(n,e=!1,t=!0){Si(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function m4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Si(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function rs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var p4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g4=n=>p4.test(n);function y4(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Ho(n):n,o;if(t)if(g4(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Si(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=GE(t.substring(1),"/"):o=GE(t,e)}else o=e;return{pathname:o,search:b4(i),hash:T4(s)}}function GE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function f0(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function v4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xI(n){let e=v4(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function SI(n,e,t,i=!1){let s;typeof n=="string"?s=Ho(n):(s={...n},St(!s.pathname||!s.pathname.includes("?"),f0("?","pathname","search",s)),St(!s.pathname||!s.pathname.includes("#"),f0("#","pathname","hash",s)),St(!s.search||!s.search.includes("#"),f0("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let v=e.length-1;if(!i&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}u=v>=0?e[v]:"/"}let d=y4(s,u),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ts=n=>n.join("/").replace(/\/\/+/g,"/"),_4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),b4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,T4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function w4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var AI=["POST","PUT","PATCH","DELETE"];new Set(AI);var E4=["GET",...AI];new Set(E4);var Rc=U.createContext(null);Rc.displayName="DataRouter";var vp=U.createContext(null);vp.displayName="DataRouterState";U.createContext(!1);var II=U.createContext({isTransitioning:!1});II.displayName="ViewTransition";var x4=U.createContext(new Map);x4.displayName="Fetchers";var S4=U.createContext(null);S4.displayName="Await";var Ir=U.createContext(null);Ir.displayName="Navigation";var Zh=U.createContext(null);Zh.displayName="Location";var Rr=U.createContext({outlet:null,matches:[],isDataRoute:!1});Rr.displayName="Route";var u_=U.createContext(null);u_.displayName="RouteError";function A4(n,{relative:e}={}){St(Jh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=U.useContext(Ir),{hash:s,pathname:o,search:l}=ed(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:ts([t,o])),i.createHref({pathname:u,search:l,hash:s})}function Jh(){return U.useContext(Zh)!=null}function Sa(){return St(Jh(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Zh).location}var RI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function CI(n){U.useContext(Ir).static||U.useLayoutEffect(n)}function Aa(){let{isDataRoute:n}=U.useContext(Rr);return n?z4():I4()}function I4(){St(Jh(),"useNavigate() may be used only in the context of a <Router> component.");let n=U.useContext(Rc),{basename:e,navigator:t}=U.useContext(Ir),{matches:i}=U.useContext(Rr),{pathname:s}=Sa(),o=JSON.stringify(xI(i)),l=U.useRef(!1);return CI(()=>{l.current=!0}),U.useCallback((d,f={})=>{if(Si(l.current,RI),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=SI(d,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ts([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,n])}U.createContext(null);function R4(){let{matches:n}=U.useContext(Rr),e=n[n.length-1];return e?e.params:{}}function ed(n,{relative:e}={}){let{matches:t}=U.useContext(Rr),{pathname:i}=Sa(),s=JSON.stringify(xI(t));return U.useMemo(()=>SI(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function C4(n,e){return NI(n,e)}function NI(n,e,t,i,s){St(Jh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=U.useContext(Ir),{matches:l}=U.useContext(Rr),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let z=v&&v.path||"";DI(f,!v||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let _=Sa(),x;if(e){let z=typeof e=="string"?Ho(e):e;St(g==="/"||z.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${z.pathname}" was given in the \`location\` prop.`),x=z}else x=_;let N=x.pathname||"/",A=N;if(g!=="/"){let z=g.replace(/^\//,"").split("/");A="/"+N.replace(/^\//,"").split("/").slice(z.length).join("/")}let C=TI(n,{pathname:A});Si(v||C!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Si(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=P4(C&&C.map(z=>Object.assign({},z,{params:Object.assign({},d,z.params),pathname:ts([g,o.encodeLocation?o.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:ts([g,o.encodeLocation?o.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),l,t,i,s);return e&&P?U.createElement(Zh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},P):P}function N4(){let n=U4(),e=w4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:o},"ErrorBoundary")," or"," ",U.createElement("code",{style:o},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:s},t):null,l)}var D4=U.createElement(N4,null),k4=class extends U.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?U.createElement(Rr.Provider,{value:this.props.routeContext},U.createElement(u_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function V4({routeContext:n,match:e,children:t}){let i=U.useContext(Rc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(Rr.Provider,{value:n},t)}function P4(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let g=o.findIndex(v=>v.route.id&&l?.[v.route.id]!==void 0);St(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let v=o[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:_,errors:x}=t,N=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!x||x[v.route.id]===void 0);if(v.route.lazy||N){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&i?(g,v)=>{i(g,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:v})}:void 0;return o.reduceRight((g,v,_)=>{let x,N=!1,A=null,C=null;t&&(x=l&&v.route.id?l[v.route.id]:void 0,A=v.route.errorElement||D4,u&&(d<0&&_===0?(DI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,C=null):d===_&&(N=!0,C=v.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,_+1)),z=()=>{let O;return x?O=A:N?O=C:v.route.Component?O=U.createElement(v.route.Component,null):v.route.element?O=v.route.element:O=g,U.createElement(V4,{match:v,routeContext:{outlet:g,matches:P,isDataRoute:t!=null},children:O})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?U.createElement(k4,{location:t.location,revalidation:t.revalidation,component:A,error:x,children:z(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:f}):z()},null)}function h_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M4(n){let e=U.useContext(Rc);return St(e,h_(n)),e}function O4(n){let e=U.useContext(vp);return St(e,h_(n)),e}function L4(n){let e=U.useContext(Rr);return St(e,h_(n)),e}function d_(n){let e=L4(n),t=e.matches[e.matches.length-1];return St(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function j4(){return d_("useRouteId")}function U4(){let n=U.useContext(u_),e=O4("useRouteError"),t=d_("useRouteError");return n!==void 0?n:e.errors?.[t]}function z4(){let{router:n}=M4("useNavigate"),e=d_("useNavigate"),t=U.useRef(!1);return CI(()=>{t.current=!0}),U.useCallback(async(s,o={})=>{Si(t.current,RI),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var $E={};function DI(n,e,t){!e&&!$E[n]&&($E[n]=!0,Si(!1,t))}U.memo(B4);function B4({routes:n,future:e,state:t,unstable_onError:i}){return NI(n,void 0,t,i,e)}function ea(n){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function F4({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:o=!1}){St(!Jh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=U.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=Ho(t));let{pathname:d="/",search:f="",hash:g="",state:v=null,key:_="default"}=t,x=U.useMemo(()=>{let N=rs(d,l);return N==null?null:{location:{pathname:N,search:f,hash:g,state:v,key:_},navigationType:i}},[l,d,f,g,v,_,i]);return Si(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:U.createElement(Ir.Provider,{value:u},U.createElement(Zh.Provider,{children:e,value:x}))}function q4({children:n,location:e}){return C4(Z0(n),e)}function Z0(n,e=[]){let t=[];return U.Children.forEach(n,(i,s)=>{if(!U.isValidElement(i))return;let o=[...e,s];if(i.type===U.Fragment){t.push.apply(t,Z0(i.props.children,o));return}St(i.type===ea,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Z0(i.props.children,o)),t.push(l)}),t}var hm="get",dm="application/x-www-form-urlencoded";function _p(n){return n!=null&&typeof n.tagName=="string"}function H4(n){return _p(n)&&n.tagName.toLowerCase()==="button"}function G4(n){return _p(n)&&n.tagName.toLowerCase()==="form"}function $4(n){return _p(n)&&n.tagName.toLowerCase()==="input"}function K4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Y4(n,e){return n.button===0&&(!e||e==="_self")&&!K4(n)}var Wf=null;function Q4(){if(Wf===null)try{new FormData(document.createElement("form"),0),Wf=!1}catch{Wf=!0}return Wf}var X4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function m0(n){return n!=null&&!X4.has(n)?(Si(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dm}"`),null):n}function W4(n,e){let t,i,s,o,l;if(G4(n)){let u=n.getAttribute("action");i=u?rs(u,e):null,t=n.getAttribute("method")||hm,s=m0(n.getAttribute("enctype"))||dm,o=new FormData(n)}else if(H4(n)||$4(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(i=d?rs(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||hm,s=m0(n.getAttribute("formenctype"))||m0(u.getAttribute("enctype"))||dm,o=new FormData(u,n),!Q4()){let{name:f,type:g,value:v}=n;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,v)}}else{if(_p(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hm,i=null,s=dm,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function f_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Z4(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&rs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function J4(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function tP(n,e,t){let i=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await J4(o,t);return l.links?l.links():[]}return[]}));return sP(i.flat(1).filter(eP).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function KE(n,e,t,i,s,o){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function nP(n,e,{includeHydrateFallback:t}={}){return iP(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function iP(n){return[...new Set(n)]}function rP(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function sP(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let o=JSON.stringify(rP(s));return t.has(o)||(t.add(o),i.push({key:o,link:s})),i},[])}function kI(){let n=U.useContext(Rc);return f_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function aP(){let n=U.useContext(vp);return f_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var m_=U.createContext(void 0);m_.displayName="FrameworkContext";function VI(){let n=U.useContext(m_);return f_(n,"You must render this element inside a <HydratedRouter> element"),n}function oP(n,e){let t=U.useContext(m_),[i,s]=U.useState(!1),[o,l]=U.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=e,_=U.useRef(null);U.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let A=P=>{P.forEach(z=>{l(z.isIntersecting)})},C=new IntersectionObserver(A,{threshold:.5});return _.current&&C.observe(_.current),()=>{C.disconnect()}}},[n]),U.useEffect(()=>{if(i){let A=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(A)}}},[i]);let x=()=>{s(!0)},N=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:$u(u,x),onBlur:$u(d,N),onMouseEnter:$u(f,x),onMouseLeave:$u(g,N),onTouchStart:$u(v,x)}]:[!1,_,{}]}function $u(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function lP({page:n,...e}){let{router:t}=kI(),i=U.useMemo(()=>TI(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?U.createElement(uP,{page:n,matches:i,...e}):null}function cP(n){let{manifest:e,routeModules:t}=VI(),[i,s]=U.useState([]);return U.useEffect(()=>{let o=!1;return tP(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),i}function uP({page:n,matches:e,...t}){let i=Sa(),{manifest:s,routeModules:o}=VI(),{basename:l}=kI(),{loaderData:u,matches:d}=aP(),f=U.useMemo(()=>KE(n,e,d,s,i,"data"),[n,e,d,s,i]),g=U.useMemo(()=>KE(n,e,d,s,i,"assets"),[n,e,d,s,i]),v=U.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let N=new Set,A=!1;if(e.forEach(P=>{let z=s.routes[P.route.id];!z||!z.hasLoader||(!f.some(O=>O.route.id===P.route.id)&&P.route.id in u&&o[P.route.id]?.shouldRevalidate||z.hasClientLoader?A=!0:N.add(P.route.id))}),N.size===0)return[];let C=Z4(n,l,"data");return A&&N.size>0&&C.searchParams.set("_routes",e.filter(P=>N.has(P.route.id)).map(P=>P.route.id).join(",")),[C.pathname+C.search]},[l,u,i,s,f,e,n,o]),_=U.useMemo(()=>nP(g,s),[g,s]),x=cP(g);return U.createElement(U.Fragment,null,v.map(N=>U.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),_.map(N=>U.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),x.map(({key:N,link:A})=>U.createElement("link",{key:N,nonce:t.nonce,...A})))}function hP(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var PI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{PI&&(window.__reactRouterVersion="7.9.6")}catch{}function dP({basename:n,children:e,window:t}){let i=U.useRef();i.current==null&&(i.current=ZV({window:t,v5Compat:!0}));let s=i.current,[o,l]=U.useState({action:s.action,location:s.location}),u=U.useCallback(d=>{U.startTransition(()=>l(d))},[l]);return U.useLayoutEffect(()=>s.listen(u),[s,u]),U.createElement(F4,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var MI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OI=U.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:g,viewTransition:v,..._},x){let{basename:N}=U.useContext(Ir),A=typeof f=="string"&&MI.test(f),C,P=!1;if(typeof f=="string"&&A&&(C=f,PI))try{let V=new URL(window.location.href),M=f.startsWith("//")?new URL(V.protocol+f):new URL(f),k=rs(M.pathname,N);M.origin===V.origin&&k!=null?f=k+M.search+M.hash:P=!0}catch{Si(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=A4(f,{relative:s}),[O,K,te]=oP(i,_),J=gP(f,{replace:l,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:v});function S(V){e&&e(V),V.defaultPrevented||J(V)}let R=U.createElement("a",{..._,...te,href:C||z,onClick:P||o?e:S,ref:hP(x,K),target:d,"data-discover":!A&&t==="render"?"true":void 0});return O&&!A?U.createElement(U.Fragment,null,R,U.createElement(lP,{page:z})):R});OI.displayName="Link";var fP=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...f},g){let v=ed(l,{relative:f.relative}),_=Sa(),x=U.useContext(vp),{navigator:N,basename:A}=U.useContext(Ir),C=x!=null&&TP(v)&&u===!0,P=N.encodeLocation?N.encodeLocation(v).pathname:v.pathname,z=_.pathname,O=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(z=z.toLowerCase(),O=O?O.toLowerCase():null,P=P.toLowerCase()),O&&A&&(O=rs(O,A)||O);const K=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let te=z===P||!s&&z.startsWith(P)&&z.charAt(K)==="/",J=O!=null&&(O===P||!s&&O.startsWith(P)&&O.charAt(P.length)==="/"),S={isActive:te,isPending:J,isTransitioning:C},R=te?e:void 0,V;typeof i=="function"?V=i(S):V=[i,te?"active":null,J?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(S):o;return U.createElement(OI,{...f,"aria-current":R,className:V,ref:g,style:M,to:l,viewTransition:u},typeof d=="function"?d(S):d)});fP.displayName="NavLink";var mP=U.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:o,method:l=hm,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:v,..._},x)=>{let N=_P(),A=bP(u,{relative:f}),C=l.toLowerCase()==="get"?"get":"post",P=typeof u=="string"&&MI.test(u),z=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let K=O.nativeEvent.submitter,te=K?.getAttribute("formmethod")||l;N(K||O.currentTarget,{fetcherKey:e,method:te,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:v})};return U.createElement("form",{ref:x,method:C,action:A,onSubmit:i?d:z,..._,"data-discover":!P&&n==="render"?"true":void 0})});mP.displayName="Form";function pP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LI(n){let e=U.useContext(Rc);return St(e,pP(n)),e}function gP(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=Aa(),d=Sa(),f=ed(n,{relative:o});return U.useCallback(g=>{if(Y4(g,e)){g.preventDefault();let v=t!==void 0?t:xh(d)===xh(f);u(n,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,f,t,i,e,n,s,o,l])}var yP=0,vP=()=>`__${String(++yP)}__`;function _P(){let{router:n}=LI("useSubmit"),{basename:e}=U.useContext(Ir),t=j4();return U.useCallback(async(i,s={})=>{let{action:o,method:l,encType:u,formData:d,body:f}=W4(i,e);if(s.navigate===!1){let g=s.fetcherKey||vP();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function bP(n,{relative:e}={}){let{basename:t}=U.useContext(Ir),i=U.useContext(Rr);St(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...ed(n||".",{relative:e})},l=Sa();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ts([t,o.pathname])),xh(o)}function TP(n,{relative:e}={}){let t=U.useContext(II);St(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=LI("useViewTransitionState"),s=ed(n,{relative:e});if(!t.isTransitioning)return!1;let o=rs(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=rs(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Mm(s.pathname,l)!=null||Mm(s.pathname,o)!=null}const wP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EP=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),YE=n=>{const e=EP(n);return e.charAt(0).toUpperCase()+e.slice(1)},jI=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),xP=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var SP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const AP=U.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:l,...u},d)=>U.createElement("svg",{ref:d,...SP,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:jI("lucide",s),...!o&&!xP(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,g])=>U.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Ye=(n,e)=>{const t=U.forwardRef(({className:i,...s},o)=>U.createElement(AP,{ref:o,iconNode:e,className:jI(`lucide-${wP(YE(n))}`,`lucide-${n}`,i),...s}));return t.displayName=YE(n),t};const IP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Sh=Ye("arrow-left",IP);const RP=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],CP=Ye("arrow-right-left",RP);const NP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],DP=Ye("check",NP);const kP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],VP=Ye("chevron-down",kP);const PP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fo=Ye("chevron-right",PP);const MP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],OP=Ye("circle-arrow-down",MP);const LP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],jP=Ye("circle-arrow-up",LP);const UP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],UI=Ye("circle-check-big",UP);const zP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],QE=Ye("circle-check",zP);const BP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],FP=Ye("circle-plus",BP);const qP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],XE=Ye("circle",qP);const HP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Om=Ye("download",HP);const GP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$P=Ye("eye-off",GP);const KP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YP=Ye("eye",KP);const QP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],XP=Ye("file-text",QP);const WP=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ZP=Ye("folder-plus",WP);const JP=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],eM=Ye("funnel",JP);const tM=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],nM=Ye("git-branch",tM);const iM=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],rM=Ye("list",iM);const sM=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],WE=Ye("loader",sM);const aM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],oM=Ye("log-out",aM);const lM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],J0=Ye("mail",lM);const cM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ah=Ye("refresh-cw",cM);const uM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hM=Ye("save",uM);const dM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fM=Ye("search",dM);const mM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pM=Ye("settings",mM);const gM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oh=Ye("trash-2",gM);const yM=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zI=Ye("trash",yM);const vM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_M=Ye("triangle-alert",vM);const bM=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],TM=Ye("undo-2",bM);const wM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],EM=Ye("upload",wM);const xM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],SM=Ye("user-plus",xM);const AM=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],IM=Ye("wallet",AM);const RM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],CM=Ye("wifi-off",RM);const NM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],DM=Ye("wifi",NM);const kM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],td=Ye("x",kM),ZE=n=>{let e;const t=new Set,i=(f,g)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(x=>x(e,_))}},s=()=>e,u={setState:i,getState:s,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=n(i,s,u);return u},VM=(n=>n?ZE(n):ZE),PM=n=>n;function MM(n,e=PM){const t=Xf.useSyncExternalStore(n.subscribe,Xf.useCallback(()=>e(n.getState()),[n,e]),Xf.useCallback(()=>e(n.getInitialState()),[n,e]));return Xf.useDebugValue(t),t}const JE=n=>{const e=VM(n),t=i=>MM(e,i);return Object.assign(t,e),t},p_=(n=>n?JE(n):JE);function OM(n,e){let t;try{t=n()}catch{return}return{getItem:s=>{var o;const l=d=>d===null?null:JSON.parse(d,void 0),u=(o=t.getItem(s))!=null?o:null;return u instanceof Promise?u.then(l):l(u)},setItem:(s,o)=>t.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>t.removeItem(s)}}const ev=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(i){return ev(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return ev(i)(t)}}}},LM=(n,e)=>(t,i,s)=>{let o={storage:OM(()=>localStorage),partialize:A=>A,version:0,merge:(A,C)=>({...C,...A}),...e},l=!1;const u=new Set,d=new Set;let f=o.storage;if(!f)return n((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...A)},i,s);const g=()=>{const A=o.partialize({...i()});return f.setItem(o.name,{state:A,version:o.version})},v=s.setState;s.setState=(A,C)=>(v(A,C),g());const _=n((...A)=>(t(...A),g()),i,s);s.getInitialState=()=>_;let x;const N=()=>{var A,C;if(!f)return;l=!1,u.forEach(z=>{var O;return z((O=i())!=null?O:_)});const P=((C=o.onRehydrateStorage)==null?void 0:C.call(o,(A=i())!=null?A:_))||void 0;return ev(f.getItem.bind(f))(o.name).then(z=>{if(z)if(typeof z.version=="number"&&z.version!==o.version){if(o.migrate){const O=o.migrate(z.state,z.version);return O instanceof Promise?O.then(K=>[!0,K]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,z.state];return[!1,void 0]}).then(z=>{var O;const[K,te]=z;if(x=o.merge(te,(O=i())!=null?O:_),t(x,!0),K)return g()}).then(()=>{P?.(x,void 0),x=i(),l=!0,d.forEach(z=>z(x))}).catch(z=>{P?.(void 0,z)})};return s.persist={setOptions:A=>{o={...o,...A},A.storage&&(f=A.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>N(),hasHydrated:()=>l,onHydrate:A=>(u.add(A),()=>{u.delete(A)}),onFinishHydration:A=>(d.add(A),()=>{d.delete(A)})},o.skipHydration||N(),x||_},BI=LM;var Yl=9e15,Ia=1e9,tv="0123456789abcdef",Lm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",jm="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",nv={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Yl,maxE:Yl,crypto:!1},FI,Wr,Me=!0,bp="[DecimalError] ",ya=bp+"Invalid argument: ",qI=bp+"Precision limit exceeded",HI=bp+"crypto unavailable",GI="[object Decimal]",xn=Math.floor,Jt=Math.pow,jM=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,UM=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,zM=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,$I=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bi=1e7,De=7,BM=9007199254740991,FM=Lm.length-1,iv=jm.length-1,le={toStringTag:GI};le.absoluteValue=le.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Ae(n)};le.ceil=function(){return Ae(new this.constructor(this),this.e+1,2)};le.clampedTo=le.clamp=function(n,e){var t,i=this,s=i.constructor;if(n=new s(n),e=new s(e),!n.s||!e.s)return new s(NaN);if(n.gt(e))throw Error(ya+e);return t=i.cmp(n),t<0?n:i.cmp(e)>0?e:new s(i)};le.comparedTo=le.cmp=function(n){var e,t,i,s,o=this,l=o.d,u=(n=new o.constructor(n)).d,d=o.s,f=n.s;if(!l||!u)return!d||!f?NaN:d!==f?d:l===u?0:!l^d<0?1:-1;if(!l[0]||!u[0])return l[0]?d:u[0]?-f:0;if(d!==f)return d;if(o.e!==n.e)return o.e>n.e^d<0?1:-1;for(i=l.length,s=u.length,e=0,t=i<s?i:s;e<t;++e)if(l[e]!==u[e])return l[e]>u[e]^d<0?1:-1;return i===s?0:i>s^d<0?1:-1};le.cosine=le.cos=function(){var n,e,t=this,i=t.constructor;return t.d?t.d[0]?(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+De,i.rounding=1,t=qM(i,WI(i,t)),i.precision=n,i.rounding=e,Ae(Wr==2||Wr==3?t.neg():t,n,e,!0)):new i(1):new i(NaN)};le.cubeRoot=le.cbrt=function(){var n,e,t,i,s,o,l,u,d,f,g=this,v=g.constructor;if(!g.isFinite()||g.isZero())return new v(g);for(Me=!1,o=g.s*Jt(g.s*g,1/3),!o||Math.abs(o)==1/0?(t=pn(g.d),n=g.e,(o=(n-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=Jt(t,1/3),n=xn((n+1)/3)-(n%3==(n<0?-1:2)),o==1/0?t="5e"+n:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),i=new v(t),i.s=g.s):i=new v(o.toString()),l=(n=v.precision)+3;;)if(u=i,d=u.times(u).times(u),f=d.plus(g),i=mt(f.plus(g).times(u),f.plus(d),l+2,1),pn(u.d).slice(0,l)===(t=pn(i.d)).slice(0,l))if(t=t.slice(l-3,l+1),t=="9999"||!s&&t=="4999"){if(!s&&(Ae(u,n+1,0),u.times(u).times(u).eq(g))){i=u;break}l+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ae(i,n+1,1),e=!i.times(i).times(i).eq(g));break}return Me=!0,Ae(i,n,v.rounding,e)};le.decimalPlaces=le.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-xn(this.e/De))*De,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};le.dividedBy=le.div=function(n){return mt(this,new this.constructor(n))};le.dividedToIntegerBy=le.divToInt=function(n){var e=this,t=e.constructor;return Ae(mt(e,new t(n),0,1,1),t.precision,t.rounding)};le.equals=le.eq=function(n){return this.cmp(n)===0};le.floor=function(){return Ae(new this.constructor(this),this.e+1,3)};le.greaterThan=le.gt=function(n){return this.cmp(n)>0};le.greaterThanOrEqualTo=le.gte=function(n){var e=this.cmp(n);return e==1||e===0};le.hyperbolicCosine=le.cosh=function(){var n,e,t,i,s,o=this,l=o.constructor,u=new l(1);if(!o.isFinite())return new l(o.s?1/0:NaN);if(o.isZero())return u;t=l.precision,i=l.rounding,l.precision=t+Math.max(o.e,o.sd())+4,l.rounding=1,s=o.d.length,s<32?(n=Math.ceil(s/3),e=(1/wp(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),o=ac(l,1,o.times(e),new l(1),!0);for(var d,f=n,g=new l(8);f--;)d=o.times(o),o=u.minus(d.times(g.minus(d.times(g))));return Ae(o,l.precision=t,l.rounding=i,!0)};le.hyperbolicSine=le.sinh=function(){var n,e,t,i,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<3)s=ac(o,2,s,s,!0);else{n=1.4*Math.sqrt(i),n=n>16?16:n|0,s=s.times(1/wp(5,n)),s=ac(o,2,s,s,!0);for(var l,u=new o(5),d=new o(16),f=new o(20);n--;)l=s.times(s),s=s.times(u.plus(l.times(d.times(l).plus(f))))}return o.precision=e,o.rounding=t,Ae(s,e,t,!0)};le.hyperbolicTangent=le.tanh=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+7,i.rounding=1,mt(t.sinh(),t.cosh(),i.precision=n,i.rounding=e)):new i(t.s)};le.inverseCosine=le.acos=function(){var n=this,e=n.constructor,t=n.abs().cmp(1),i=e.precision,s=e.rounding;return t!==-1?t===0?n.isNeg()?mr(e,i,s):new e(0):new e(NaN):n.isZero()?mr(e,i+4,s).times(.5):(e.precision=i+6,e.rounding=1,n=new e(1).minus(n).div(n.plus(1)).sqrt().atan(),e.precision=i,e.rounding=s,n.times(2))};le.inverseHyperbolicCosine=le.acosh=function(){var n,e,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(n=i.precision,e=i.rounding,i.precision=n+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,Me=!1,t=t.times(t).minus(1).sqrt().plus(t),Me=!0,i.precision=n,i.rounding=e,t.ln()):new i(t)};le.inverseHyperbolicSine=le.asinh=function(){var n,e,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,Me=!1,t=t.times(t).plus(1).sqrt().plus(t),Me=!0,i.precision=n,i.rounding=e,t.ln())};le.inverseHyperbolicTangent=le.atanh=function(){var n,e,t,i,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(n=o.precision,e=o.rounding,i=s.sd(),Math.max(i,n)<2*-s.e-1?Ae(new o(s),n,e,!0):(o.precision=t=i-s.e,s=mt(s.plus(1),new o(1).minus(s),t+n,1),o.precision=n+4,o.rounding=1,s=s.ln(),o.precision=n,o.rounding=e,s.times(.5))):new o(NaN)};le.inverseSine=le.asin=function(){var n,e,t,i,s=this,o=s.constructor;return s.isZero()?new o(s):(e=s.abs().cmp(1),t=o.precision,i=o.rounding,e!==-1?e===0?(n=mr(o,t+4,i).times(.5),n.s=s.s,n):new o(NaN):(o.precision=t+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=i,s.times(2)))};le.inverseTangent=le.atan=function(){var n,e,t,i,s,o,l,u,d,f=this,g=f.constructor,v=g.precision,_=g.rounding;if(f.isFinite()){if(f.isZero())return new g(f);if(f.abs().eq(1)&&v+4<=iv)return l=mr(g,v+4,_).times(.25),l.s=f.s,l}else{if(!f.s)return new g(NaN);if(v+4<=iv)return l=mr(g,v+4,_).times(.5),l.s=f.s,l}for(g.precision=u=v+10,g.rounding=1,t=Math.min(28,u/De+2|0),n=t;n;--n)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Me=!1,e=Math.ceil(u/De),i=1,d=f.times(f),l=new g(f),s=f;n!==-1;)if(s=s.times(d),o=l.minus(s.div(i+=2)),s=s.times(d),l=o.plus(s.div(i+=2)),l.d[e]!==void 0)for(n=e;l.d[n]===o.d[n]&&n--;);return t&&(l=l.times(2<<t-1)),Me=!0,Ae(l,g.precision=v,g.rounding=_,!0)};le.isFinite=function(){return!!this.d};le.isInteger=le.isInt=function(){return!!this.d&&xn(this.e/De)>this.d.length-2};le.isNaN=function(){return!this.s};le.isNegative=le.isNeg=function(){return this.s<0};le.isPositive=le.isPos=function(){return this.s>0};le.isZero=function(){return!!this.d&&this.d[0]===0};le.lessThan=le.lt=function(n){return this.cmp(n)<0};le.lessThanOrEqualTo=le.lte=function(n){return this.cmp(n)<1};le.logarithm=le.log=function(n){var e,t,i,s,o,l,u,d,f=this,g=f.constructor,v=g.precision,_=g.rounding,x=5;if(n==null)n=new g(10),e=!0;else{if(n=new g(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new g(NaN);e=n.eq(10)}if(t=f.d,f.s<0||!t||!t[0]||f.eq(1))return new g(t&&!t[0]?-1/0:f.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(s=t[0];s%10===0;)s/=10;o=s!==1}if(Me=!1,u=v+x,l=ca(f,u),i=e?Um(g,u+10):ca(n,u),d=mt(l,i,u,1),Ih(d.d,s=v,_))do if(u+=10,l=ca(f,u),i=e?Um(g,u+10):ca(n,u),d=mt(l,i,u,1),!o){+pn(d.d).slice(s+1,s+15)+1==1e14&&(d=Ae(d,v+1,0));break}while(Ih(d.d,s+=10,_));return Me=!0,Ae(d,v,_)};le.minus=le.sub=function(n){var e,t,i,s,o,l,u,d,f,g,v,_,x=this,N=x.constructor;if(n=new N(n),!x.d||!n.d)return!x.s||!n.s?n=new N(NaN):x.d?n.s=-n.s:n=new N(n.d||x.s!==n.s?x:NaN),n;if(x.s!=n.s)return n.s=-n.s,x.plus(n);if(f=x.d,_=n.d,u=N.precision,d=N.rounding,!f[0]||!_[0]){if(_[0])n.s=-n.s;else if(f[0])n=new N(x);else return new N(d===3?-0:0);return Me?Ae(n,u,d):n}if(t=xn(n.e/De),g=xn(x.e/De),f=f.slice(),o=g-t,o){for(v=o<0,v?(e=f,o=-o,l=_.length):(e=_,t=g,l=f.length),i=Math.max(Math.ceil(u/De),l)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,l=_.length,v=i<l,v&&(l=i),i=0;i<l;i++)if(f[i]!=_[i]){v=f[i]<_[i];break}o=0}for(v&&(e=f,f=_,_=e,n.s=-n.s),l=f.length,i=_.length-l;i>0;--i)f[l++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(s=i;s&&f[--s]===0;)f[s]=Bi-1;--f[s],f[i]+=Bi}f[i]-=_[i]}for(;f[--l]===0;)f.pop();for(;f[0]===0;f.shift())--t;return f[0]?(n.d=f,n.e=Tp(f,t),Me?Ae(n,u,d):n):new N(d===3?-0:0)};le.modulo=le.mod=function(n){var e,t=this,i=t.constructor;return n=new i(n),!t.d||!n.s||n.d&&!n.d[0]?new i(NaN):!n.d||t.d&&!t.d[0]?Ae(new i(t),i.precision,i.rounding):(Me=!1,i.modulo==9?(e=mt(t,n.abs(),0,3,1),e.s*=n.s):e=mt(t,n,0,i.modulo,1),e=e.times(n),Me=!0,t.minus(e))};le.naturalExponential=le.exp=function(){return rv(this)};le.naturalLogarithm=le.ln=function(){return ca(this)};le.negated=le.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Ae(n)};le.plus=le.add=function(n){var e,t,i,s,o,l,u,d,f,g,v=this,_=v.constructor;if(n=new _(n),!v.d||!n.d)return!v.s||!n.s?n=new _(NaN):v.d||(n=new _(n.d||v.s===n.s?v:NaN)),n;if(v.s!=n.s)return n.s=-n.s,v.minus(n);if(f=v.d,g=n.d,u=_.precision,d=_.rounding,!f[0]||!g[0])return g[0]||(n=new _(v)),Me?Ae(n,u,d):n;if(o=xn(v.e/De),i=xn(n.e/De),f=f.slice(),s=o-i,s){for(s<0?(t=f,s=-s,l=g.length):(t=g,i=o,l=f.length),o=Math.ceil(u/De),l=o>l?o+1:l+1,s>l&&(s=l,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(l=f.length,s=g.length,l-s<0&&(s=l,t=g,g=f,f=t),e=0;s;)e=(f[--s]=f[s]+g[s]+e)/Bi|0,f[s]%=Bi;for(e&&(f.unshift(e),++i),l=f.length;f[--l]==0;)f.pop();return n.d=f,n.e=Tp(f,i),Me?Ae(n,u,d):n};le.precision=le.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(ya+n);return t.d?(e=KI(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};le.round=function(){var n=this,e=n.constructor;return Ae(new e(n),n.e+1,e.rounding)};le.sine=le.sin=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+De,i.rounding=1,t=GM(i,WI(i,t)),i.precision=n,i.rounding=e,Ae(Wr>2?t.neg():t,n,e,!0)):new i(NaN)};le.squareRoot=le.sqrt=function(){var n,e,t,i,s,o,l=this,u=l.d,d=l.e,f=l.s,g=l.constructor;if(f!==1||!u||!u[0])return new g(!f||f<0&&(!u||u[0])?NaN:u?l:1/0);for(Me=!1,f=Math.sqrt(+l),f==0||f==1/0?(e=pn(u),(e.length+d)%2==0&&(e+="0"),f=Math.sqrt(e),d=xn((d+1)/2)-(d<0||d%2),f==1/0?e="5e"+d:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+d),i=new g(e)):i=new g(f.toString()),t=(d=g.precision)+3;;)if(o=i,i=o.plus(mt(l,o,t+2,1)).times(.5),pn(o.d).slice(0,t)===(e=pn(i.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!s&&e=="4999"){if(!s&&(Ae(o,d+1,0),o.times(o).eq(l))){i=o;break}t+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ae(i,d+1,1),n=!i.times(i).eq(l));break}return Me=!0,Ae(i,d,g.rounding,n)};le.tangent=le.tan=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+10,i.rounding=1,t=t.sin(),t.s=1,t=mt(t,new i(1).minus(t.times(t)).sqrt(),n+10,0),i.precision=n,i.rounding=e,Ae(Wr==2||Wr==4?t.neg():t,n,e,!0)):new i(NaN)};le.times=le.mul=function(n){var e,t,i,s,o,l,u,d,f,g=this,v=g.constructor,_=g.d,x=(n=new v(n)).d;if(n.s*=g.s,!_||!_[0]||!x||!x[0])return new v(!n.s||_&&!_[0]&&!x||x&&!x[0]&&!_?NaN:!_||!x?n.s/0:n.s*0);for(t=xn(g.e/De)+xn(n.e/De),d=_.length,f=x.length,d<f&&(o=_,_=x,x=o,l=d,d=f,f=l),o=[],l=d+f,i=l;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,s=d+i;s>i;)u=o[s]+x[i]*_[s-i-1]+e,o[s--]=u%Bi|0,e=u/Bi|0;o[s]=(o[s]+e)%Bi|0}for(;!o[--l];)o.pop();return e?++t:o.shift(),n.d=o,n.e=Tp(o,t),Me?Ae(n,v.precision,v.rounding):n};le.toBinary=function(n,e){return g_(this,2,n,e)};le.toDecimalPlaces=le.toDP=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(Fn(n,0,Ia),e===void 0?e=i.rounding:Fn(e,0,8),Ae(t,n+t.e+1,e))};le.toExponential=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Sr(i,!0):(Fn(n,0,Ia),e===void 0?e=s.rounding:Fn(e,0,8),i=Ae(new s(i),n+1,e),t=Sr(i,!0,n+1)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toFixed=function(n,e){var t,i,s=this,o=s.constructor;return n===void 0?t=Sr(s):(Fn(n,0,Ia),e===void 0?e=o.rounding:Fn(e,0,8),i=Ae(new o(s),n+s.e+1,e),t=Sr(i,!1,n+i.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t};le.toFraction=function(n){var e,t,i,s,o,l,u,d,f,g,v,_,x=this,N=x.d,A=x.constructor;if(!N)return new A(x);if(f=t=new A(1),i=d=new A(0),e=new A(i),o=e.e=KI(N)-x.e-1,l=o%De,e.d[0]=Jt(10,l<0?De+l:l),n==null)n=o>0?e:f;else{if(u=new A(n),!u.isInt()||u.lt(f))throw Error(ya+u);n=u.gt(e)?o>0?e:f:u}for(Me=!1,u=new A(pn(N)),g=A.precision,A.precision=o=N.length*De*2;v=mt(u,e,0,1,1),s=t.plus(v.times(i)),s.cmp(n)!=1;)t=i,i=s,s=f,f=d.plus(v.times(s)),d=s,s=e,e=u.minus(v.times(s)),u=s;return s=mt(n.minus(t),i,0,1,1),d=d.plus(s.times(f)),t=t.plus(s.times(i)),d.s=f.s=x.s,_=mt(f,i,o,1).minus(x).abs().cmp(mt(d,t,o,1).minus(x).abs())<1?[f,i]:[d,t],A.precision=g,Me=!0,_};le.toHexadecimal=le.toHex=function(n,e){return g_(this,16,n,e)};le.toNearest=function(n,e){var t=this,i=t.constructor;if(t=new i(t),n==null){if(!t.d)return t;n=new i(1),e=i.rounding}else{if(n=new i(n),e===void 0?e=i.rounding:Fn(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Me=!1,t=mt(t,n,0,e,1).times(n),Me=!0,Ae(t)):(n.s=t.s,t=n),t};le.toNumber=function(){return+this};le.toOctal=function(n,e){return g_(this,8,n,e)};le.toPower=le.pow=function(n){var e,t,i,s,o,l,u=this,d=u.constructor,f=+(n=new d(n));if(!u.d||!n.d||!u.d[0]||!n.d[0])return new d(Jt(+u,f));if(u=new d(u),u.eq(1))return u;if(i=d.precision,o=d.rounding,n.eq(1))return Ae(u,i,o);if(e=xn(n.e/De),e>=n.d.length-1&&(t=f<0?-f:f)<=BM)return s=YI(d,u,t,i),n.s<0?new d(1).div(s):Ae(s,i,o);if(l=u.s,l<0){if(e<n.d.length-1)return new d(NaN);if((n.d[e]&1)==0&&(l=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=l,u}return t=Jt(+u,f),e=t==0||!isFinite(t)?xn(f*(Math.log("0."+pn(u.d))/Math.LN10+u.e+1)):new d(t+"").e,e>d.maxE+1||e<d.minE-1?new d(e>0?l/0:0):(Me=!1,d.rounding=u.s=1,t=Math.min(12,(e+"").length),s=rv(n.times(ca(u,i+t)),i),s.d&&(s=Ae(s,i+5,1),Ih(s.d,i,o)&&(e=i+10,s=Ae(rv(n.times(ca(u,e+t)),e),e+5,1),+pn(s.d).slice(i+1,i+15)+1==1e14&&(s=Ae(s,i+1,0)))),s.s=l,Me=!0,d.rounding=o,Ae(s,i,o))};le.toPrecision=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Sr(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(Fn(n,1,Ia),e===void 0?e=s.rounding:Fn(e,0,8),i=Ae(new s(i),n,e),t=Sr(i,n<=i.e||i.e<=s.toExpNeg,n)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toSignificantDigits=le.toSD=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(Fn(n,1,Ia),e===void 0?e=i.rounding:Fn(e,0,8)),Ae(new i(t),n,e)};le.toString=function(){var n=this,e=n.constructor,t=Sr(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};le.truncated=le.trunc=function(){return Ae(new this.constructor(this),this.e+1,1)};le.valueOf=le.toJSON=function(){var n=this,e=n.constructor,t=Sr(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function pn(n){var e,t,i,s=n.length-1,o="",l=n[0];if(s>0){for(o+=l,e=1;e<s;e++)i=n[e]+"",t=De-i.length,t&&(o+=na(t)),o+=i;l=n[e],i=l+"",t=De-i.length,t&&(o+=na(t))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}function Fn(n,e,t){if(n!==~~n||n<e||n>t)throw Error(ya+n)}function Ih(n,e,t,i){var s,o,l,u;for(o=n[0];o>=10;o/=10)--e;return--e<0?(e+=De,s=0):(s=Math.ceil((e+1)/De),e%=De),o=Jt(10,De-e),u=n[s]%o|0,i==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),l=t<4&&u==99999||t>3&&u==49999||u==5e4||u==0):l=(t<4&&u+1==o||t>3&&u+1==o/2)&&(n[s+1]/o/100|0)==Jt(10,e-2)-1||(u==o/2||u==0)&&(n[s+1]/o/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),l=(i||t<4)&&u==9999||!i&&t>3&&u==4999):l=((i||t<4)&&u+1==o||!i&&t>3&&u+1==o/2)&&(n[s+1]/o/1e3|0)==Jt(10,e-3)-1,l}function fm(n,e,t){for(var i,s=[0],o,l=0,u=n.length;l<u;){for(o=s.length;o--;)s[o]*=e;for(s[0]+=tv.indexOf(n.charAt(l++)),i=0;i<s.length;i++)s[i]>t-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/t|0,s[i]%=t)}return s.reverse()}function qM(n,e){var t,i,s;if(e.isZero())return e;i=e.d.length,i<32?(t=Math.ceil(i/3),s=(1/wp(4,t)).toString()):(t=16,s="2.3283064365386962890625e-10"),n.precision+=t,e=ac(n,1,e.times(s),new n(1));for(var o=t;o--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return n.precision-=t,e}var mt=(function(){function n(i,s,o){var l,u=0,d=i.length;for(i=i.slice();d--;)l=i[d]*s+u,i[d]=l%o|0,u=l/o|0;return u&&i.unshift(u),i}function e(i,s,o,l){var u,d;if(o!=l)d=o>l?1:-1;else for(u=d=0;u<o;u++)if(i[u]!=s[u]){d=i[u]>s[u]?1:-1;break}return d}function t(i,s,o,l){for(var u=0;o--;)i[o]-=u,u=i[o]<s[o]?1:0,i[o]=u*l+i[o]-s[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,o,l,u,d){var f,g,v,_,x,N,A,C,P,z,O,K,te,J,S,R,V,M,k,F,j=i.constructor,Le=i.s==s.s?1:-1,me=i.d,H=s.d;if(!me||!me[0]||!H||!H[0])return new j(!i.s||!s.s||(me?H&&me[0]==H[0]:!H)?NaN:me&&me[0]==0||!H?Le*0:Le/0);for(d?(x=1,g=i.e-s.e):(d=Bi,x=De,g=xn(i.e/x)-xn(s.e/x)),k=H.length,V=me.length,P=new j(Le),z=P.d=[],v=0;H[v]==(me[v]||0);v++);if(H[v]>(me[v]||0)&&g--,o==null?(J=o=j.precision,l=j.rounding):u?J=o+(i.e-s.e)+1:J=o,J<0)z.push(1),N=!0;else{if(J=J/x+2|0,v=0,k==1){for(_=0,H=H[0],J++;(v<V||_)&&J--;v++)S=_*d+(me[v]||0),z[v]=S/H|0,_=S%H|0;N=_||v<V}else{for(_=d/(H[0]+1)|0,_>1&&(H=n(H,_,d),me=n(me,_,d),k=H.length,V=me.length),R=k,O=me.slice(0,k),K=O.length;K<k;)O[K++]=0;F=H.slice(),F.unshift(0),M=H[0],H[1]>=d/2&&++M;do _=0,f=e(H,O,k,K),f<0?(te=O[0],k!=K&&(te=te*d+(O[1]||0)),_=te/M|0,_>1?(_>=d&&(_=d-1),A=n(H,_,d),C=A.length,K=O.length,f=e(A,O,C,K),f==1&&(_--,t(A,k<C?F:H,C,d))):(_==0&&(f=_=1),A=H.slice()),C=A.length,C<K&&A.unshift(0),t(O,A,K,d),f==-1&&(K=O.length,f=e(H,O,k,K),f<1&&(_++,t(O,k<K?F:H,K,d))),K=O.length):f===0&&(_++,O=[0]),z[v++]=_,f&&O[0]?O[K++]=me[R]||0:(O=[me[R]],K=1);while((R++<V||O[0]!==void 0)&&J--);N=O[0]!==void 0}z[0]||z.shift()}if(x==1)P.e=g,FI=N;else{for(v=1,_=z[0];_>=10;_/=10)v++;P.e=v+g*x-1,Ae(P,u?o+P.e+1:o,l,N)}return P}})();function Ae(n,e,t,i){var s,o,l,u,d,f,g,v,_,x=n.constructor;e:if(e!=null){if(v=n.d,!v)return n;for(s=1,u=v[0];u>=10;u/=10)s++;if(o=e-s,o<0)o+=De,l=e,g=v[_=0],d=g/Jt(10,s-l-1)%10|0;else if(_=Math.ceil((o+1)/De),u=v.length,_>=u)if(i){for(;u++<=_;)v.push(0);g=d=0,s=1,o%=De,l=o-De+1}else break e;else{for(g=u=v[_],s=1;u>=10;u/=10)s++;o%=De,l=o-De+s,d=l<0?0:g/Jt(10,s-l-1)%10|0}if(i=i||e<0||v[_+1]!==void 0||(l<0?g:g%Jt(10,s-l-1)),f=t<4?(d||i)&&(t==0||t==(n.s<0?3:2)):d>5||d==5&&(t==4||i||t==6&&(o>0?l>0?g/Jt(10,s-l):0:v[_-1])%10&1||t==(n.s<0?8:7)),e<1||!v[0])return v.length=0,f?(e-=n.e+1,v[0]=Jt(10,(De-e%De)%De),n.e=-e||0):v[0]=n.e=0,n;if(o==0?(v.length=_,u=1,_--):(v.length=_+1,u=Jt(10,De-o),v[_]=l>0?(g/Jt(10,s-l)%Jt(10,l)|0)*u:0),f)for(;;)if(_==0){for(o=1,l=v[0];l>=10;l/=10)o++;for(l=v[0]+=u,u=1;l>=10;l/=10)u++;o!=u&&(n.e++,v[0]==Bi&&(v[0]=1));break}else{if(v[_]+=u,v[_]!=Bi)break;v[_--]=0,u=1}for(o=v.length;v[--o]===0;)v.pop()}return Me&&(n.e>x.maxE?(n.d=null,n.e=NaN):n.e<x.minE&&(n.e=0,n.d=[0])),n}function Sr(n,e,t){if(!n.isFinite())return XI(n);var i,s=n.e,o=pn(n.d),l=o.length;return e?(t&&(i=t-l)>0?o=o.charAt(0)+"."+o.slice(1)+na(i):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n.e<0?"e":"e+")+n.e):s<0?(o="0."+na(-s-1)+o,t&&(i=t-l)>0&&(o+=na(i))):s>=l?(o+=na(s+1-l),t&&(i=t-s-1)>0&&(o=o+"."+na(i))):((i=s+1)<l&&(o=o.slice(0,i)+"."+o.slice(i)),t&&(i=t-l)>0&&(s+1===l&&(o+="."),o+=na(i))),o}function Tp(n,e){var t=n[0];for(e*=De;t>=10;t/=10)e++;return e}function Um(n,e,t){if(e>FM)throw Me=!0,t&&(n.precision=t),Error(qI);return Ae(new n(Lm),e,1,!0)}function mr(n,e,t){if(e>iv)throw Error(qI);return Ae(new n(jm),e,t,!0)}function KI(n){var e=n.length-1,t=e*De+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function na(n){for(var e="";n--;)e+="0";return e}function YI(n,e,t,i){var s,o=new n(1),l=Math.ceil(i/De+4);for(Me=!1;;){if(t%2&&(o=o.times(e),tx(o.d,l)&&(s=!0)),t=xn(t/2),t===0){t=o.d.length-1,s&&o.d[t]===0&&++o.d[t];break}e=e.times(e),tx(e.d,l)}return Me=!0,o}function ex(n){return n.d[n.d.length-1]&1}function QI(n,e,t){for(var i,s,o=new n(e[0]),l=0;++l<e.length;){if(s=new n(e[l]),!s.s){o=s;break}i=o.cmp(s),(i===t||i===0&&o.s===t)&&(o=s)}return o}function rv(n,e){var t,i,s,o,l,u,d,f=0,g=0,v=0,_=n.constructor,x=_.rounding,N=_.precision;if(!n.d||!n.d[0]||n.e>17)return new _(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Me=!1,d=N):d=e,u=new _(.03125);n.e>-2;)n=n.times(u),v+=5;for(i=Math.log(Jt(2,v))/Math.LN10*2+5|0,d+=i,t=o=l=new _(1),_.precision=d;;){if(o=Ae(o.times(n),d,1),t=t.times(++g),u=l.plus(mt(o,t,d,1)),pn(u.d).slice(0,d)===pn(l.d).slice(0,d)){for(s=v;s--;)l=Ae(l.times(l),d,1);if(e==null)if(f<3&&Ih(l.d,d-i,x,f))_.precision=d+=10,t=o=u=new _(1),g=0,f++;else return Ae(l,_.precision=N,x,Me=!0);else return _.precision=N,l}l=u}}function ca(n,e){var t,i,s,o,l,u,d,f,g,v,_,x=1,N=10,A=n,C=A.d,P=A.constructor,z=P.rounding,O=P.precision;if(A.s<0||!C||!C[0]||!A.e&&C[0]==1&&C.length==1)return new P(C&&!C[0]?-1/0:A.s!=1?NaN:C?0:A);if(e==null?(Me=!1,g=O):g=e,P.precision=g+=N,t=pn(C),i=t.charAt(0),Math.abs(o=A.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)A=A.times(n),t=pn(A.d),i=t.charAt(0),x++;o=A.e,i>1?(A=new P("0."+t),o++):A=new P(i+"."+t.slice(1))}else return f=Um(P,g+2,O).times(o+""),A=ca(new P(i+"."+t.slice(1)),g-N).plus(f),P.precision=O,e==null?Ae(A,O,z,Me=!0):A;for(v=A,d=l=A=mt(A.minus(1),A.plus(1),g,1),_=Ae(A.times(A),g,1),s=3;;){if(l=Ae(l.times(_),g,1),f=d.plus(mt(l,new P(s),g,1)),pn(f.d).slice(0,g)===pn(d.d).slice(0,g))if(d=d.times(2),o!==0&&(d=d.plus(Um(P,g+2,O).times(o+""))),d=mt(d,new P(x),g,1),e==null)if(Ih(d.d,g-N,z,u))P.precision=g+=N,f=l=A=mt(v.minus(1),v.plus(1),g,1),_=Ae(A.times(A),g,1),s=u=1;else return Ae(d,P.precision=O,z,Me=!0);else return P.precision=O,d;d=f,s+=2}}function XI(n){return String(n.s*n.s/0)}function mm(n,e){var t,i,s;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,n.e=t=t-i-1,n.d=[],i=(t+1)%De,t<0&&(i+=De),i<s){for(i&&n.d.push(+e.slice(0,i)),s-=De;i<s;)n.d.push(+e.slice(i,i+=De));e=e.slice(i),i=De-e.length}else i-=s;for(;i--;)e+="0";n.d.push(+e),Me&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function HM(n,e){var t,i,s,o,l,u,d,f,g;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),$I.test(e))return mm(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(UM.test(e))t=16,e=e.toLowerCase();else if(jM.test(e))t=2;else if(zM.test(e))t=8;else throw Error(ya+e);for(o=e.search(/p/i),o>0?(d=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),l=o>=0,i=n.constructor,l&&(e=e.replace(".",""),u=e.length,o=u-o,s=YI(i,new i(t),o,o*2)),f=fm(e,t,Bi),g=f.length-1,o=g;f[o]===0;--o)f.pop();return o<0?new i(n.s*0):(n.e=Tp(f,g),n.d=f,Me=!1,l&&(n=mt(n,s,u*4)),d&&(n=n.times(Math.abs(d)<54?Jt(2,d):Qr.pow(2,d))),Me=!0,n)}function GM(n,e){var t,i=e.d.length;if(i<3)return e.isZero()?e:ac(n,2,e,e);t=1.4*Math.sqrt(i),t=t>16?16:t|0,e=e.times(1/wp(5,t)),e=ac(n,2,e,e);for(var s,o=new n(5),l=new n(16),u=new n(20);t--;)s=e.times(e),e=e.times(o.plus(s.times(l.times(s).minus(u))));return e}function ac(n,e,t,i,s){var o,l,u,d,f=n.precision,g=Math.ceil(f/De);for(Me=!1,d=t.times(t),u=new n(i);;){if(l=mt(u.times(d),new n(e++*e++),f,1),u=s?i.plus(l):i.minus(l),i=mt(l.times(d),new n(e++*e++),f,1),l=u.plus(i),l.d[g]!==void 0){for(o=g;l.d[o]===u.d[o]&&o--;);if(o==-1)break}o=u,u=i,i=l,l=o}return Me=!0,l.d.length=g+1,l}function wp(n,e){for(var t=n;--e;)t*=n;return t}function WI(n,e){var t,i=e.s<0,s=mr(n,n.precision,1),o=s.times(.5);if(e=e.abs(),e.lte(o))return Wr=i?4:1,e;if(t=e.divToInt(s),t.isZero())Wr=i?3:2;else{if(e=e.minus(t.times(s)),e.lte(o))return Wr=ex(t)?i?2:3:i?4:1,e;Wr=ex(t)?i?1:4:i?3:2}return e.minus(s).abs()}function g_(n,e,t,i){var s,o,l,u,d,f,g,v,_,x=n.constructor,N=t!==void 0;if(N?(Fn(t,1,Ia),i===void 0?i=x.rounding:Fn(i,0,8)):(t=x.precision,i=x.rounding),!n.isFinite())g=XI(n);else{for(g=Sr(n),l=g.indexOf("."),N?(s=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):s=e,l>=0&&(g=g.replace(".",""),_=new x(1),_.e=g.length-l,_.d=fm(Sr(_),10,s),_.e=_.d.length),v=fm(g,10,s),o=d=v.length;v[--d]==0;)v.pop();if(!v[0])g=N?"0p+0":"0";else{if(l<0?o--:(n=new x(n),n.d=v,n.e=o,n=mt(n,_,t,i,0,s),v=n.d,o=n.e,f=FI),l=v[t],u=s/2,f=f||v[t+1]!==void 0,f=i<4?(l!==void 0||f)&&(i===0||i===(n.s<0?3:2)):l>u||l===u&&(i===4||f||i===6&&v[t-1]&1||i===(n.s<0?8:7)),v.length=t,f)for(;++v[--t]>s-1;)v[t]=0,t||(++o,v.unshift(1));for(d=v.length;!v[d-1];--d);for(l=0,g="";l<d;l++)g+=tv.charAt(v[l]);if(N){if(d>1)if(e==16||e==8){for(l=e==16?4:3,--d;d%l;d++)g+="0";for(v=fm(g,s,e),d=v.length;!v[d-1];--d);for(l=1,g="1.";l<d;l++)g+=tv.charAt(v[l])}else g=g.charAt(0)+"."+g.slice(1);g=g+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)g="0"+g;g="0."+g}else if(++o>d)for(o-=d;o--;)g+="0";else o<d&&(g=g.slice(0,o)+"."+g.slice(o))}g=(e==16?"0x":e==2?"0b":e==8?"0o":"")+g}return n.s<0?"-"+g:g}function tx(n,e){if(n.length>e)return n.length=e,!0}function $M(n){return new this(n).abs()}function KM(n){return new this(n).acos()}function YM(n){return new this(n).acosh()}function QM(n,e){return new this(n).plus(e)}function XM(n){return new this(n).asin()}function WM(n){return new this(n).asinh()}function ZM(n){return new this(n).atan()}function JM(n){return new this(n).atanh()}function eO(n,e){n=new this(n),e=new this(e);var t,i=this.precision,s=this.rounding,o=i+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=mr(this,o,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?mr(this,i,s):new this(0),t.s=n.s):!n.d||e.isZero()?(t=mr(this,o,1).times(.5),t.s=n.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(mt(n,e,o,1)),e=mr(this,o,1),this.precision=i,this.rounding=s,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(mt(n,e,o,1)),t}function tO(n){return new this(n).cbrt()}function nO(n){return Ae(n=new this(n),n.e+1,2)}function iO(n,e,t){return new this(n).clamp(e,t)}function rO(n){if(!n||typeof n!="object")throw Error(bp+"Object expected");var e,t,i,s=n.defaults===!0,o=["precision",1,Ia,"rounding",0,8,"toExpNeg",-Yl,0,"toExpPos",0,Yl,"maxE",0,Yl,"minE",-Yl,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],s&&(this[t]=nv[t]),(i=n[t])!==void 0)if(xn(i)===i&&i>=o[e+1]&&i<=o[e+2])this[t]=i;else throw Error(ya+t+": "+i);if(t="crypto",s&&(this[t]=nv[t]),(i=n[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(HI);else this[t]=!1;else throw Error(ya+t+": "+i);return this}function sO(n){return new this(n).cos()}function aO(n){return new this(n).cosh()}function ZI(n){var e,t,i;function s(o){var l,u,d,f=this;if(!(f instanceof s))return new s(o);if(f.constructor=s,nx(o)){f.s=o.s,Me?!o.d||o.e>s.maxE?(f.e=NaN,f.d=null):o.e<s.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(d=typeof o,d==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(l=0,u=o;u>=10;u/=10)l++;Me?l>s.maxE?(f.e=NaN,f.d=null):l<s.minE?(f.e=0,f.d=[0]):(f.e=l,f.d=[o]):(f.e=l,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return mm(f,o.toString())}if(d==="string")return(u=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(u===43&&(o=o.slice(1)),f.s=1),$I.test(o)?mm(f,o):HM(f,o);if(d==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,mm(f,o.toString());throw Error(ya+o)}if(s.prototype=le,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=rO,s.clone=ZI,s.isDecimal=nx,s.abs=$M,s.acos=KM,s.acosh=YM,s.add=QM,s.asin=XM,s.asinh=WM,s.atan=ZM,s.atanh=JM,s.atan2=eO,s.cbrt=tO,s.ceil=nO,s.clamp=iO,s.cos=sO,s.cosh=aO,s.div=oO,s.exp=lO,s.floor=cO,s.hypot=uO,s.ln=hO,s.log=dO,s.log10=mO,s.log2=fO,s.max=pO,s.min=gO,s.mod=yO,s.mul=vO,s.pow=_O,s.random=bO,s.round=TO,s.sign=wO,s.sin=EO,s.sinh=xO,s.sqrt=SO,s.sub=AO,s.sum=IO,s.tan=RO,s.tanh=CO,s.trunc=NO,n===void 0&&(n={}),n&&n.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return s.config(n),s}function oO(n,e){return new this(n).div(e)}function lO(n){return new this(n).exp()}function cO(n){return Ae(n=new this(n),n.e+1,3)}function uO(){var n,e,t=new this(0);for(Me=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Me=!0,new this(1/0);t=e}return Me=!0,t.sqrt()}function nx(n){return n instanceof Qr||n&&n.toStringTag===GI||!1}function hO(n){return new this(n).ln()}function dO(n,e){return new this(n).log(e)}function fO(n){return new this(n).log(2)}function mO(n){return new this(n).log(10)}function pO(){return QI(this,arguments,-1)}function gO(){return QI(this,arguments,1)}function yO(n,e){return new this(n).mod(e)}function vO(n,e){return new this(n).mul(e)}function _O(n,e){return new this(n).pow(e)}function bO(n){var e,t,i,s,o=0,l=new this(1),u=[];if(n===void 0?n=this.precision:Fn(n,1,Ia),i=Math.ceil(n/De),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)s=e[o],s>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:u[o++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)s=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,o):(u.push(s%1e7),o+=4);o=i/4}else throw Error(HI);else for(;o<i;)u[o++]=Math.random()*1e7|0;for(i=u[--o],n%=De,i&&n&&(s=Jt(10,De-n),u[o]=(i/s|0)*s);u[o]===0;o--)u.pop();if(o<0)t=0,u=[0];else{for(t=-1;u[0]===0;t-=De)u.shift();for(i=1,s=u[0];s>=10;s/=10)i++;i<De&&(t-=De-i)}return l.e=t,l.d=u,l}function TO(n){return Ae(n=new this(n),n.e+1,this.rounding)}function wO(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function EO(n){return new this(n).sin()}function xO(n){return new this(n).sinh()}function SO(n){return new this(n).sqrt()}function AO(n,e){return new this(n).sub(e)}function IO(){var n=0,e=arguments,t=new this(e[n]);for(Me=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Me=!0,Ae(t,this.precision,this.rounding)}function RO(n){return new this(n).tan()}function CO(n){return new this(n).tanh()}function NO(n){return Ae(n=new this(n),n.e+1,1)}le[Symbol.for("nodejs.util.inspect.custom")]=le.toString;le[Symbol.toStringTag]="Decimal";var Qr=le.constructor=ZI(nv);Lm=new Qr(Lm);jm=new Qr(jm);const DO=()=>{};var ix={};const JI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},kO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},e2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,g=o>>2,v=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,x=f&63;d||(x=64,l||(_=64)),i.push(t[g],t[v],t[_],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(JI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||f==null||v==null)throw new VO;const _=o<<2|u>>4;if(i.push(_),f!==64){const x=u<<4&240|f>>2;if(i.push(x),v!==64){const N=f<<6&192|v;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class VO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PO=function(n){const e=JI(n);return e2.encodeByteArray(e,!0)},t2=function(n){return PO(n).replace(/\./g,"")},n2=function(n){try{return e2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function i2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const MO=()=>i2().__FIREBASE_DEFAULTS__,OO=()=>{if(typeof process>"u"||typeof ix>"u")return;const n=ix.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&n2(n[1]);return e&&JSON.parse(e)},Ep=()=>{try{return DO()||MO()||OO()||LO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jO=n=>Ep()?.emulatorHosts?.[n],r2=()=>Ep()?.config,s2=n=>Ep()?.[`_${n}`];class UO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Cc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function a2(n){return(await fetch(n,{credentials:"include"})).ok}const lh={};function zO(){const n={prod:[],emulator:[]};for(const e of Object.keys(lh))lh[e]?n.emulator.push(e):n.prod.push(e);return n}function BO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let rx=!1;function FO(n,e){if(typeof window>"u"||typeof document>"u"||!Cc(window.location.host)||lh[n]===e||lh[n]||rx)return;lh[n]=e;function t(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=zO().prod.length>0;function l(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,x){_.setAttribute("width","24"),_.setAttribute("id",x),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{rx=!0,l()},_}function g(_,x){_.setAttribute("id",x),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=BO(i),x=t("text"),N=document.getElementById(x)||document.createElement("span"),A=t("learnmore"),C=document.getElementById(A)||document.createElement("a"),P=t("preprendIcon"),z=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const O=_.element;u(O),g(C,A);const K=f();d(z,P),O.append(z,N,C,K),document.body.appendChild(O)}o?(N.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function o2(){const n=Ep()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $O(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KO(){const n=en();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function l2(){return!o2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function c2(){return!o2()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function u2(){try{return typeof indexedDB=="object"}catch{return!1}}function YO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const QO="FirebaseError";class hs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=QO,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nd.prototype.create)}}class nd{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?XO(o,i):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new hs(s,u,i)}}function XO(n,e){return n.replace(WO,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const WO=/\{\$([^}]+)}/g;function ZO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ko(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],l=e[s];if(sx(o)&&sx(l)){if(!ko(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function sx(n){return n!==null&&typeof n=="object"}function id(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ju(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function eh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function JO(n,e){const t=new e3(n,e);return t.subscribe.bind(t)}class e3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");t3(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=p0),s.error===void 0&&(s.error=p0),s.complete===void 0&&(s.complete=p0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t3(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function p0(){}function At(n){return n&&n._delegate?n._delegate:n}class Vo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mo="[DEFAULT]";class n3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new UO;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r3(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:i3(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i3(n){return n===mo?void 0:n}function r3(n){return n.instantiationMode==="EAGER"}class s3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new n3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const a3={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},o3=$e.INFO,l3={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},c3=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=l3[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y_{constructor(e){this.name=e,this._logLevel=o3,this._logHandler=c3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?a3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const u3=(n,e)=>e.some(t=>n instanceof t);let ax,ox;function h3(){return ax||(ax=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d3(){return ox||(ox=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h2=new WeakMap,sv=new WeakMap,d2=new WeakMap,g0=new WeakMap,v_=new WeakMap;function f3(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(ha(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&h2.set(t,n)}).catch(()=>{}),v_.set(e,n),e}function m3(n){if(sv.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});sv.set(n,e)}let av={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return sv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||d2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ha(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function p3(n){av=n(av)}function g3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(y0(this),e,...t);return d2.set(i,e.sort?e.sort():[e]),ha(i)}:d3().includes(n)?function(...e){return n.apply(y0(this),e),ha(h2.get(this))}:function(...e){return ha(n.apply(y0(this),e))}}function y3(n){return typeof n=="function"?g3(n):(n instanceof IDBTransaction&&m3(n),u3(n,h3())?new Proxy(n,av):n)}function ha(n){if(n instanceof IDBRequest)return f3(n);if(g0.has(n))return g0.get(n);const e=y3(n);return e!==n&&(g0.set(n,e),v_.set(e,n)),e}const y0=n=>v_.get(n);function v3(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=ha(l);return i&&l.addEventListener("upgradeneeded",d=>{i(ha(l.result),d.oldVersion,d.newVersion,ha(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const _3=["get","getKey","getAll","getAllKeys","count"],b3=["put","add","delete","clear"],v0=new Map;function lx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(v0.get(e))return v0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=b3.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||_3.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return v0.set(e,o),o}p3(n=>({...n,get:(e,t,i)=>lx(e,t)||n.get(e,t,i),has:(e,t)=>!!lx(e,t)||n.has(e,t)}));class T3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w3(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function w3(n){return n.getComponent()?.type==="VERSION"}const ov="@firebase/app",cx="0.14.6";const ss=new y_("@firebase/app"),E3="@firebase/app-compat",x3="@firebase/analytics-compat",S3="@firebase/analytics",A3="@firebase/app-check-compat",I3="@firebase/app-check",R3="@firebase/auth",C3="@firebase/auth-compat",N3="@firebase/database",D3="@firebase/data-connect",k3="@firebase/database-compat",V3="@firebase/functions",P3="@firebase/functions-compat",M3="@firebase/installations",O3="@firebase/installations-compat",L3="@firebase/messaging",j3="@firebase/messaging-compat",U3="@firebase/performance",z3="@firebase/performance-compat",B3="@firebase/remote-config",F3="@firebase/remote-config-compat",q3="@firebase/storage",H3="@firebase/storage-compat",G3="@firebase/firestore",$3="@firebase/ai",K3="@firebase/firestore-compat",Y3="firebase",Q3="12.6.0";const lv="[DEFAULT]",X3={[ov]:"fire-core",[E3]:"fire-core-compat",[S3]:"fire-analytics",[x3]:"fire-analytics-compat",[I3]:"fire-app-check",[A3]:"fire-app-check-compat",[R3]:"fire-auth",[C3]:"fire-auth-compat",[N3]:"fire-rtdb",[D3]:"fire-data-connect",[k3]:"fire-rtdb-compat",[V3]:"fire-fn",[P3]:"fire-fn-compat",[M3]:"fire-iid",[O3]:"fire-iid-compat",[L3]:"fire-fcm",[j3]:"fire-fcm-compat",[U3]:"fire-perf",[z3]:"fire-perf-compat",[B3]:"fire-rc",[F3]:"fire-rc-compat",[q3]:"fire-gcs",[H3]:"fire-gcs-compat",[G3]:"fire-fst",[K3]:"fire-fst-compat",[$3]:"fire-vertex","fire-js":"fire-js",[Y3]:"fire-js-all"};const zm=new Map,W3=new Map,cv=new Map;function ux(n,e){try{n.container.addComponent(e)}catch(t){ss.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function oc(n){const e=n.name;if(cv.has(e))return ss.debug(`There were multiple attempts to register component ${e}.`),!1;cv.set(e,n);for(const t of zm.values())ux(t,n);for(const t of W3.values())ux(t,n);return!0}function __(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bi(n){return n==null?!1:n.settings!==void 0}const Z3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},da=new nd("app","Firebase",Z3);class J3{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw da.create("app-deleted",{appName:this._name})}}const Nc=Q3;function f2(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:lv,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw da.create("bad-app-name",{appName:String(s)});if(t||(t=r2()),!t)throw da.create("no-options");const o=zm.get(s);if(o){if(ko(t,o.options)&&ko(i,o.config))return o;throw da.create("duplicate-app",{appName:s})}const l=new s3(s);for(const d of cv.values())l.addComponent(d);const u=new J3(t,i,l);return zm.set(s,u),u}function e5(n=lv){const e=zm.get(n);if(!e&&n===lv&&r2())return f2();if(!e)throw da.create("no-app",{appName:n});return e}function fa(n,e,t){let i=X3[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ss.warn(l.join(" "));return}oc(new Vo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const t5="firebase-heartbeat-database",n5=1,Rh="firebase-heartbeat-store";let _0=null;function m2(){return _0||(_0=v3(t5,n5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rh)}catch(t){console.warn(t)}}}}).catch(n=>{throw da.create("idb-open",{originalErrorMessage:n.message})})),_0}async function i5(n){try{const t=(await m2()).transaction(Rh),i=await t.objectStore(Rh).get(p2(n));return await t.done,i}catch(e){if(e instanceof hs)ss.warn(e.message);else{const t=da.create("idb-get",{originalErrorMessage:e?.message});ss.warn(t.message)}}}async function hx(n,e){try{const i=(await m2()).transaction(Rh,"readwrite");await i.objectStore(Rh).put(e,p2(n)),await i.done}catch(t){if(t instanceof hs)ss.warn(t.message);else{const i=da.create("idb-set",{originalErrorMessage:t?.message});ss.warn(i.message)}}}function p2(n){return`${n.name}!${n.options.appId}`}const r5=1024,s5=30;class a5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new l5(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=dx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>s5){const s=c5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ss.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=dx(),{heartbeatsToSend:t,unsentEntries:i}=o5(this._heartbeatsCache.heartbeats),s=t2(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ss.warn(e),""}}}function dx(){return new Date().toISOString().substring(0,10)}function o5(n,e=r5){const t=[];let i=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),fx(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),fx(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class l5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u2()?YO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await i5(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function fx(n){return t2(JSON.stringify({version:2,heartbeats:n})).length}function c5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function u5(n){oc(new Vo("platform-logger",e=>new T3(e),"PRIVATE")),oc(new Vo("heartbeat",e=>new a5(e),"PRIVATE")),fa(ov,cx,n),fa(ov,cx,"esm2020"),fa("fire-js","")}u5("");function g2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h5=g2,y2=new nd("auth","Firebase",g2());const Bm=new y_("@firebase/auth");function d5(n,...e){Bm.logLevel<=$e.WARN&&Bm.warn(`Auth (${Nc}): ${n}`,...e)}function pm(n,...e){Bm.logLevel<=$e.ERROR&&Bm.error(`Auth (${Nc}): ${n}`,...e)}function qi(n,...e){throw b_(n,...e)}function vr(n,...e){return b_(n,...e)}function v2(n,e,t){const i={...h5(),[e]:t};return new nd("auth","Firebase",i).create(e,{appName:n.name})}function ns(n){return v2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function b_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return y2.create(n,...e)}function ke(n,e,...t){if(!n)throw b_(e,...t)}function Zr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pm(e),new Error(e)}function as(n,e){n||Zr(e)}function uv(){return typeof self<"u"&&self.location?.href||""}function f5(){return mx()==="http:"||mx()==="https:"}function mx(){return typeof self<"u"&&self.location?.protocol||null}function m5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f5()||GO()||"connection"in navigator)?navigator.onLine:!0}function p5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class rd{constructor(e,t){this.shortDelay=e,this.longDelay=t,as(t>e,"Short delay should be less than long delay!"),this.isMobile=qO()||$O()}get(){return m5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function T_(n,e){as(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class _2{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const g5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const y5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v5=new rd(3e4,6e4);function ds(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Cr(n,e,t,i,s={}){return b2(n,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const u=id({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...o};return HO()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Cc(n.emulatorConfig.host)&&(f.credentials="include"),_2.fetch()(await T2(n,n.config.apiHost,t,u),f)})}async function b2(n,e,t){n._canInitEmulator=!1;const i={...g5,...e};try{const s=new b5(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Zf(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zf(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Zf(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Zf(n,"user-disabled",l);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw v2(n,g,f);qi(n,g)}}catch(s){if(s instanceof hs)throw s;qi(n,"network-request-failed",{message:String(s)})}}async function sd(n,e,t,i,s={}){const o=await Cr(n,e,t,i,s);return"mfaPendingCredential"in o&&qi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function T2(n,e,t,i){const s=`${e}${t}?${i}`,o=n,l=o.config.emulator?T_(n.config,s):`${n.config.apiScheme}://${s}`;return y5.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function _5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class b5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(vr(this.auth,"network-request-failed")),v5.get())})}}function Zf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=vr(n,e,i);return s.customData._tokenResponse=t,s}function px(n){return n!==void 0&&n.enterprise!==void 0}class T5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function w5(n,e){return Cr(n,"GET","/v2/recaptchaConfig",ds(n,e))}async function E5(n,e){return Cr(n,"POST","/v1/accounts:delete",e)}async function Fm(n,e){return Cr(n,"POST","/v1/accounts:lookup",e)}function ch(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function x5(n,e=!1){const t=At(n),i=await t.getIdToken(e),s=w_(i);ke(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:i,authTime:ch(b0(s.auth_time)),issuedAtTime:ch(b0(s.iat)),expirationTime:ch(b0(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function b0(n){return Number(n)*1e3}function w_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return pm("JWT malformed, contained fewer than 3 sections"),null;try{const s=n2(t);return s?JSON.parse(s):(pm("Failed to decode base64 JWT payload"),null)}catch(s){return pm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function gx(n){const e=w_(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof hs&&S5(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function S5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class A5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class hv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ch(this.lastLoginAt),this.creationTime=ch(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function qm(n){const e=n.auth,t=await n.getIdToken(),i=await lc(n,Fm(e,{idToken:t}));ke(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?w2(s.providerUserInfo):[],l=R5(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new hv(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function I5(n){const e=At(n);await qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R5(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function w2(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function C5(n,e){const t=await b2(n,{},async()=>{const i=id({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await T2(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:i};return n.emulatorConfig&&Cc(n.emulatorConfig.host)&&(d.credentials="include"),_2.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function N5(n,e){return Cr(n,"POST","/v2/accounts:revokeToken",ds(n,e))}class tc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=gx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:o}=await C5(e,t);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:o}=t,l=new tc;return i&&(ke(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ke(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ke(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tc,this.toJSON())}_performRefresh(){return Zr("not implemented")}}function Qs(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class zi{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new A5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await lc(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return x5(this,e)}reload(){return I5(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await qm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await lc(this,E5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:x,providerData:N,stsTokenManager:A}=t;ke(v&&A,e,"internal-error");const C=tc.fromJSON(this.name,A);ke(typeof v=="string",e,"internal-error"),Qs(i,e.name),Qs(s,e.name),ke(typeof _=="boolean",e,"internal-error"),ke(typeof x=="boolean",e,"internal-error"),Qs(o,e.name),Qs(l,e.name),Qs(u,e.name),Qs(d,e.name),Qs(f,e.name),Qs(g,e.name);const P=new zi({uid:v,auth:e,email:s,emailVerified:_,displayName:i,isAnonymous:x,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:C,createdAt:f,lastLoginAt:g});return N&&Array.isArray(N)&&(P.providerData=N.map(z=>({...z}))),d&&(P._redirectEventId=d),P}static async _fromIdTokenResponse(e,t,i=!1){const s=new tc;s.updateFromServerResponse(t);const o=new zi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await qm(o),o}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];ke(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?w2(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new tc;u.updateFromIdToken(i);const d=new zi({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new hv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const yx=new Map;function Jr(n){as(n instanceof Function,"Expected a class definition");let e=yx.get(n);return e?(as(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yx.set(n,e),e)}class E2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}E2.type="NONE";const vx=E2;function gm(n,e,t){return`firebase:${n}:${e}:${t}`}class nc{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=gm(this.userKey,s.apiKey,o),this.fullPersistenceKey=gm("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Fm(this.auth,{idToken:e}).catch(()=>{});return t?zi._fromGetAccountInfoResponse(this.auth,t,e):null}return zi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new nc(Jr(vx),e,i);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Jr(vx);const l=gm(i,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(l);if(g){let v;if(typeof g=="string"){const _=await Fm(e,{idToken:g}).catch(()=>{});if(!_)break;v=await zi._fromGetAccountInfoResponse(e,_,g)}else v=zi._fromJSON(e,g);f!==o&&(u=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new nc(o,e,i):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new nc(o,e,i))}}function _x(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C2(e))return"Blackberry";if(N2(e))return"Webos";if(S2(e))return"Safari";if((e.includes("chrome/")||A2(e))&&!e.includes("edge/"))return"Chrome";if(R2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function x2(n=en()){return/firefox\//i.test(n)}function S2(n=en()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A2(n=en()){return/crios\//i.test(n)}function I2(n=en()){return/iemobile/i.test(n)}function R2(n=en()){return/android/i.test(n)}function C2(n=en()){return/blackberry/i.test(n)}function N2(n=en()){return/webos/i.test(n)}function E_(n=en()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function D5(n=en()){return E_(n)&&!!window.navigator?.standalone}function k5(){return KO()&&document.documentMode===10}function D2(n=en()){return E_(n)||R2(n)||N2(n)||C2(n)||/windows phone/i.test(n)||I2(n)}function k2(n,e=[]){let t;switch(n){case"Browser":t=_x(en());break;case"Worker":t=`${_x(en())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nc}/${i}`}class V5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function P5(n,e={}){return Cr(n,"GET","/v2/passwordPolicy",ds(n,e))}const M5=6;class O5{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??M5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class L5{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bx(this),this.idTokenSubscription=new bx(this),this.beforeStateQueue=new V5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await nc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Fm(this,{idToken:e}),i=await zi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(bi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(ns(this));const t=e?At(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P5(this),t=new O5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nd("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await N5(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Jr(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await nc.create(this,[Jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&d5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ra(n){return At(n)}class bx{constructor(e){this.auth=e,this.observer=null,this.addObserver=JO(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j5(n){xp=n}function V2(n){return xp.loadJS(n)}function U5(){return xp.recaptchaEnterpriseScript}function z5(){return xp.gapiScript}function B5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class F5{constructor(){this.enterprise=new q5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class q5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const H5="recaptcha-enterprise",P2="NO_RECAPTCHA";class G5{constructor(e){this.type=H5,this.auth=Ra(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{w5(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new T5(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;px(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(P2)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new F5().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(u=>{if(!t&&px(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=U5();d.length!==0&&(d+=u),V2(d).then(()=>{s(u,o,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function Tx(n,e,t,i=!1,s=!1){const o=new G5(n);let l;if(s)l=P2;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Hm(n,e,t,i,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Tx(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Tx(n,e,t,t==="getOobCode");return i(n,l)}else return Promise.reject(o)})}function $5(n,e){const t=__(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ko(o,e??{}))return s;qi(s,"already-initialized")}return t.initialize({options:e})}function K5(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Jr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Y5(n,e,t){const i=Ra(n);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=M2(e),{host:l,port:u}=Q5(e),d=u===null?"":`:${u}`,f={url:`${o}//${l}${d}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(ko(f,i.config.emulator)&&ko(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Cc(l)?(a2(`${o}//${l}${d}`),FO("Auth",!0)):X5()}function M2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Q5(n){const e=M2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:wx(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:wx(l)}}}function wx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function X5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class x_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function W5(n,e){return Cr(n,"POST","/v1/accounts:signUp",e)}async function Z5(n,e){return sd(n,"POST","/v1/accounts:signInWithPassword",ds(n,e))}async function O2(n,e){return Cr(n,"POST","/v1/accounts:sendOobCode",ds(n,e))}async function J5(n,e){return O2(n,e)}async function e6(n,e){return O2(n,e)}async function t6(n,e){return sd(n,"POST","/v1/accounts:signInWithEmailLink",ds(n,e))}async function n6(n,e){return sd(n,"POST","/v1/accounts:signInWithEmailLink",ds(n,e))}class Ch extends x_{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Ch(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ch(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,t,"signInWithPassword",Z5);case"emailLink":return t6(e,{email:this._email,oobCode:this._password});default:qi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,i,"signUpPassword",W5);case"emailLink":return n6(e,{idToken:t,email:this._email,oobCode:this._password});default:qi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ic(n,e){return sd(n,"POST","/v1/accounts:signInWithIdp",ds(n,e))}const i6="http://localhost";class Po extends x_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=t;if(!i||!s)return null;const l=new Po(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ic(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ic(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ic(e,t)}buildRequest(){const e={requestUri:i6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=id(t)}return e}}function r6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function s6(n){const e=Ju(eh(n)).link,t=e?Ju(eh(e)).deep_link_id:null,i=Ju(eh(n)).deep_link_id;return(i?Ju(eh(i)).link:null)||i||t||e||n}class S_{constructor(e){const t=Ju(eh(e)),i=t.apiKey??null,s=t.oobCode??null,o=r6(t.mode??null);ke(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=s6(e);try{return new S_(t)}catch{return null}}}class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,t){return Ch._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=S_.parseLink(t);return ke(i,"argument-error"),Ch._fromEmailAndCode(e,i.code,i.tenantId)}}Go.PROVIDER_ID="password";Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class L2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ad extends L2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ia extends ad{constructor(){super("facebook.com")}static credential(e){return Po._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ia.credential(e.oauthAccessToken)}catch{return null}}}ia.FACEBOOK_SIGN_IN_METHOD="facebook.com";ia.PROVIDER_ID="facebook.com";class ra extends ad{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Po._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ra.credential(t,i)}catch{return null}}}ra.GOOGLE_SIGN_IN_METHOD="google.com";ra.PROVIDER_ID="google.com";class sa extends ad{constructor(){super("github.com")}static credential(e){return Po._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sa.credential(e.oauthAccessToken)}catch{return null}}}sa.GITHUB_SIGN_IN_METHOD="github.com";sa.PROVIDER_ID="github.com";class aa extends ad{constructor(){super("twitter.com")}static credential(e,t){return Po._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return aa.credential(t,i)}catch{return null}}}aa.TWITTER_SIGN_IN_METHOD="twitter.com";aa.PROVIDER_ID="twitter.com";async function a6(n,e){return sd(n,"POST","/v1/accounts:signUp",ds(n,e))}class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const o=await zi._fromIdTokenResponse(e,i,s),l=Ex(i);return new Mo({user:o,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=Ex(i);return new Mo({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function Ex(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Gm extends hs{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Gm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Gm(e,t,i,s)}}function j2(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Gm._fromErrorAndOperation(n,o,e,i):o})}async function o6(n,e,t=!1){const i=await lc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mo._forOperation(n,"link",i)}async function U2(n,e,t=!1){const{auth:i}=n;if(bi(i.app))return Promise.reject(ns(i));const s="reauthenticate";try{const o=await lc(n,j2(i,s,e,n),t);ke(o.idToken,i,"internal-error");const l=w_(o.idToken);ke(l,i,"internal-error");const{sub:u}=l;return ke(n.uid===u,i,"user-mismatch"),Mo._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&qi(i,"user-mismatch"),o}}async function z2(n,e,t=!1){if(bi(n.app))return Promise.reject(ns(n));const i="signIn",s=await j2(n,i,e),o=await Mo._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(o.user),o}async function l6(n,e){return z2(Ra(n),e)}async function c6(n,e){return U2(At(n),e)}async function B2(n){const e=Ra(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function u6(n,e,t){const i=Ra(n);await Hm(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",e6)}async function h6(n,e,t){if(bi(n.app))return Promise.reject(ns(n));const i=Ra(n),l=await Hm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a6).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&B2(n),d}),u=await Mo._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function d6(n,e,t){return bi(n.app)?Promise.reject(ns(n)):l6(At(n),Go.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&B2(n),i})}async function xx(n,e){const t=At(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await J5(t.auth,s);o!==n.email&&await n.reload()}async function f6(n,e){return Cr(n,"POST","/v1/accounts:update",e)}async function m6(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=At(n),o={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await lc(i,f6(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const u=i.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function p6(n,e,t,i){return At(n).onIdTokenChanged(e,t,i)}function g6(n,e,t){return At(n).beforeAuthStateChanged(e,t)}function y6(n,e,t,i){return At(n).onAuthStateChanged(e,t,i)}function Sx(n){return At(n).signOut()}async function v6(n){return At(n).delete()}const $m="__sak";class F2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($m,"1"),this.storage.removeItem($m),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const _6=1e3,b6=10;class q2 extends F2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);k5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,b6):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},_6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}q2.type="LOCAL";const T6=q2;class H2 extends F2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}H2.type="SESSION";const G2=H2;function w6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Sp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Sp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(l).map(async f=>f(t.origin,o)),d=await w6(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sp.receivers=[];function A_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class E6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const f=A_("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function _r(){return window}function x6(n){_r().location.href=n}function $2(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function S6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function A6(){return navigator?.serviceWorker?.controller||null}function I6(){return $2()?self:null}const K2="firebaseLocalStorageDb",R6=1,Km="firebaseLocalStorage",Y2="fbase_key";class od{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ap(n,e){return n.transaction([Km],e?"readwrite":"readonly").objectStore(Km)}function C6(){const n=indexedDB.deleteDatabase(K2);return new od(n).toPromise()}function dv(){const n=indexedDB.open(K2,R6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Km,{keyPath:Y2})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Km)?e(i):(i.close(),await C6(),e(await dv()))})})}async function Ax(n,e,t){const i=Ap(n,!0).put({[Y2]:e,value:t});return new od(i).toPromise()}async function N6(n,e){const t=Ap(n,!1).get(e),i=await new od(t).toPromise();return i===void 0?null:i.value}function Ix(n,e){const t=Ap(n,!0).delete(e);return new od(t).toPromise()}const D6=800,k6=3;class Q2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>k6)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sp._getInstance(I6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await S6(),!this.activeServiceWorker)return;this.sender=new E6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||A6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dv();return await Ax(e,$m,"1"),await Ix(e,$m),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ax(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>N6(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ix(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Ap(s,!1).getAll();return new od(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),D6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Q2.type="LOCAL";const V6=Q2;new rd(3e4,6e4);function P6(n,e){return e?Jr(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class I_ extends x_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ic(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ic(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ic(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function M6(n){return z2(n.auth,new I_(n),n.bypassAuthState)}function O6(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),U2(t,new I_(n),n.bypassAuthState)}async function L6(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),o6(t,new I_(n),n.bypassAuthState)}class X2{constructor(e,t,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M6;case"linkViaPopup":case"linkViaRedirect":return L6;case"reauthViaPopup":case"reauthViaRedirect":return O6;default:qi(this.auth,"internal-error")}}resolve(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const j6=new rd(2e3,1e4);class Ql extends X2{constructor(e,t,i,s,o){super(e,t,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Ql.currentPopupAction&&Ql.currentPopupAction.cancel(),Ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){as(this.filter.length===1,"Popup operations only handle one event");const e=A_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,j6.get())};e()}}Ql.currentPopupAction=null;const U6="pendingRedirect",ym=new Map;class z6 extends X2{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ym.get(this.auth._key());if(!e){try{const i=await B6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ym.set(this.auth._key(),e)}return this.bypassAuthState||ym.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B6(n,e){const t=H6(e),i=q6(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function F6(n,e){ym.set(n._key(),e)}function q6(n){return Jr(n._redirectPersistence)}function H6(n){return gm(U6,n.config.apiKey,n.name)}async function G6(n,e,t=!1){if(bi(n.app))return Promise.reject(ns(n));const i=Ra(n),s=P6(i,e),l=await new z6(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}const $6=600*1e3;class K6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Y6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!W2(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(vr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rx(e))}saveEventToCache(e){this.cachedEventUids.add(Rx(e)),this.lastProcessedEventTime=Date.now()}}function Rx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function W2({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Y6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W2(n);default:return!1}}async function Q6(n,e={}){return Cr(n,"GET","/v1/projects",e)}const X6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W6=/^https?/;async function Z6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Q6(n);for(const t of e)try{if(J6(t))return}catch{}qi(n,"unauthorized-domain")}function J6(n){const e=uv(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!W6.test(t))return!1;if(X6.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const eL=new rd(3e4,6e4);function Cx(){const n=_r().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tL(n){return new Promise((e,t)=>{function i(){Cx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cx(),t(vr(n,"network-request-failed"))},timeout:eL.get()})}if(_r().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_r().gapi?.load)i();else{const s=B5("iframefcb");return _r()[s]=()=>{gapi.load?i():t(vr(n,"network-request-failed"))},V2(`${z5()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw vm=null,e})}let vm=null;function nL(n){return vm=vm||tL(n),vm}const iL=new rd(5e3,15e3),rL="__/auth/iframe",sL="emulator/auth/iframe",aL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lL(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?T_(e,sL):`https://${n.config.authDomain}/${rL}`,i={apiKey:e.apiKey,appName:n.name,v:Nc},s=oL.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${id(i).slice(1)}`}async function cL(n){const e=await nL(n),t=_r().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:lL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aL,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=vr(n,"network-request-failed"),u=_r().setTimeout(()=>{o(l)},iL.get());function d(){_r().clearTimeout(u),s(i)}i.ping(d).then(d,()=>{o(l)})}))}const uL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hL=500,dL=600,fL="_blank",mL="http://localhost";class Nx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pL(n,e,t,i=hL,s=dL){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d={...uL,width:i.toString(),height:s.toString(),top:o,left:l},f=en().toLowerCase();t&&(u=A2(f)?fL:t),x2(f)&&(e=e||mL,d.scrollbars="yes");const g=Object.entries(d).reduce((_,[x,N])=>`${_}${x}=${N},`,"");if(D5(f)&&u!=="_self")return gL(e||"",u),new Nx(null);const v=window.open(e||"",u,g);ke(v,n,"popup-blocked");try{v.focus()}catch{}return new Nx(v)}function gL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const yL="__/auth/handler",vL="emulator/auth/handler",_L=encodeURIComponent("fac");async function Dx(n,e,t,i,s,o){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Nc,eventId:s};if(e instanceof L2){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",ZO(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof ad){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await n._getAppCheckToken(),f=d?`#${_L}=${encodeURIComponent(d)}`:"";return`${bL(n)}?${id(u).slice(1)}${f}`}function bL({config:n}){return n.emulator?T_(n,vL):`https://${n.authDomain}/${yL}`}const T0="webStorageSupport";class TL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G2,this._completeRedirectFn=G6,this._overrideRedirectResult=F6}async _openPopup(e,t,i,s){as(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Dx(e,t,i,uv(),s);return pL(e,o,A_())}async _openRedirect(e,t,i,s){await this._originValidation(e);const o=await Dx(e,t,i,uv(),s);return x6(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(as(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await cL(e),i=new K6(e);return t.register("authEvent",s=>(ke(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(T0,{type:T0},s=>{const o=s?.[0]?.[T0];o!==void 0&&t(!!o),qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Z6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return D2()||S2()||E_()}}const wL=TL;var kx="@firebase/auth",Vx="1.11.1";class EL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SL(n){oc(new Vo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;ke(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k2(n)},f=new L5(i,s,o,d);return K5(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),oc(new Vo("auth-internal",e=>{const t=Ra(e.getProvider("auth").getImmediate());return(i=>new EL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fa(kx,Vx,xL(n)),fa(kx,Vx,"esm2020")}const AL=300,IL=s2("authIdTokenMaxAge")||AL;let Px=null;const RL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>IL)return;const s=t?.token;Px!==s&&(Px=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function CL(n=e5()){const e=__(n,"auth");if(e.isInitialized())return e.getImmediate();const t=$5(n,{popupRedirectResolver:wL,persistence:[V6,T6,G2]}),i=s2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=RL(o.toString());g6(t,l,()=>l(t.currentUser)),p6(t,u=>l(u))}}const s=jO("auth");return s&&Y5(t,`http://${s}`),t}function NL(){return document.getElementsByTagName("head")?.[0]??document}j5({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=vr("internal-error");o.customData=s,t(o)},i.type="text/javascript",i.charset="UTF-8",NL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SL("Browser");var DL="firebase",kL="12.6.0";fa(DL,kL,"app");var Mx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ma,Z2;(function(){var n;function e(S,R){function V(){}V.prototype=R.prototype,S.F=R.prototype,S.prototype=new V,S.prototype.constructor=S,S.D=function(M,k,F){for(var j=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)j[Le-2]=arguments[Le];return R.prototype[k].apply(M,j)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,R,V){V||(V=0);const M=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)M[k]=R.charCodeAt(V++)|R.charCodeAt(V++)<<8|R.charCodeAt(V++)<<16|R.charCodeAt(V++)<<24;else for(k=0;k<16;++k)M[k]=R[V++]|R[V++]<<8|R[V++]<<16|R[V++]<<24;R=S.g[0],V=S.g[1],k=S.g[2];let F=S.g[3],j;j=R+(F^V&(k^F))+M[0]+3614090360&4294967295,R=V+(j<<7&4294967295|j>>>25),j=F+(k^R&(V^k))+M[1]+3905402710&4294967295,F=R+(j<<12&4294967295|j>>>20),j=k+(V^F&(R^V))+M[2]+606105819&4294967295,k=F+(j<<17&4294967295|j>>>15),j=V+(R^k&(F^R))+M[3]+3250441966&4294967295,V=k+(j<<22&4294967295|j>>>10),j=R+(F^V&(k^F))+M[4]+4118548399&4294967295,R=V+(j<<7&4294967295|j>>>25),j=F+(k^R&(V^k))+M[5]+1200080426&4294967295,F=R+(j<<12&4294967295|j>>>20),j=k+(V^F&(R^V))+M[6]+2821735955&4294967295,k=F+(j<<17&4294967295|j>>>15),j=V+(R^k&(F^R))+M[7]+4249261313&4294967295,V=k+(j<<22&4294967295|j>>>10),j=R+(F^V&(k^F))+M[8]+1770035416&4294967295,R=V+(j<<7&4294967295|j>>>25),j=F+(k^R&(V^k))+M[9]+2336552879&4294967295,F=R+(j<<12&4294967295|j>>>20),j=k+(V^F&(R^V))+M[10]+4294925233&4294967295,k=F+(j<<17&4294967295|j>>>15),j=V+(R^k&(F^R))+M[11]+2304563134&4294967295,V=k+(j<<22&4294967295|j>>>10),j=R+(F^V&(k^F))+M[12]+1804603682&4294967295,R=V+(j<<7&4294967295|j>>>25),j=F+(k^R&(V^k))+M[13]+4254626195&4294967295,F=R+(j<<12&4294967295|j>>>20),j=k+(V^F&(R^V))+M[14]+2792965006&4294967295,k=F+(j<<17&4294967295|j>>>15),j=V+(R^k&(F^R))+M[15]+1236535329&4294967295,V=k+(j<<22&4294967295|j>>>10),j=R+(k^F&(V^k))+M[1]+4129170786&4294967295,R=V+(j<<5&4294967295|j>>>27),j=F+(V^k&(R^V))+M[6]+3225465664&4294967295,F=R+(j<<9&4294967295|j>>>23),j=k+(R^V&(F^R))+M[11]+643717713&4294967295,k=F+(j<<14&4294967295|j>>>18),j=V+(F^R&(k^F))+M[0]+3921069994&4294967295,V=k+(j<<20&4294967295|j>>>12),j=R+(k^F&(V^k))+M[5]+3593408605&4294967295,R=V+(j<<5&4294967295|j>>>27),j=F+(V^k&(R^V))+M[10]+38016083&4294967295,F=R+(j<<9&4294967295|j>>>23),j=k+(R^V&(F^R))+M[15]+3634488961&4294967295,k=F+(j<<14&4294967295|j>>>18),j=V+(F^R&(k^F))+M[4]+3889429448&4294967295,V=k+(j<<20&4294967295|j>>>12),j=R+(k^F&(V^k))+M[9]+568446438&4294967295,R=V+(j<<5&4294967295|j>>>27),j=F+(V^k&(R^V))+M[14]+3275163606&4294967295,F=R+(j<<9&4294967295|j>>>23),j=k+(R^V&(F^R))+M[3]+4107603335&4294967295,k=F+(j<<14&4294967295|j>>>18),j=V+(F^R&(k^F))+M[8]+1163531501&4294967295,V=k+(j<<20&4294967295|j>>>12),j=R+(k^F&(V^k))+M[13]+2850285829&4294967295,R=V+(j<<5&4294967295|j>>>27),j=F+(V^k&(R^V))+M[2]+4243563512&4294967295,F=R+(j<<9&4294967295|j>>>23),j=k+(R^V&(F^R))+M[7]+1735328473&4294967295,k=F+(j<<14&4294967295|j>>>18),j=V+(F^R&(k^F))+M[12]+2368359562&4294967295,V=k+(j<<20&4294967295|j>>>12),j=R+(V^k^F)+M[5]+4294588738&4294967295,R=V+(j<<4&4294967295|j>>>28),j=F+(R^V^k)+M[8]+2272392833&4294967295,F=R+(j<<11&4294967295|j>>>21),j=k+(F^R^V)+M[11]+1839030562&4294967295,k=F+(j<<16&4294967295|j>>>16),j=V+(k^F^R)+M[14]+4259657740&4294967295,V=k+(j<<23&4294967295|j>>>9),j=R+(V^k^F)+M[1]+2763975236&4294967295,R=V+(j<<4&4294967295|j>>>28),j=F+(R^V^k)+M[4]+1272893353&4294967295,F=R+(j<<11&4294967295|j>>>21),j=k+(F^R^V)+M[7]+4139469664&4294967295,k=F+(j<<16&4294967295|j>>>16),j=V+(k^F^R)+M[10]+3200236656&4294967295,V=k+(j<<23&4294967295|j>>>9),j=R+(V^k^F)+M[13]+681279174&4294967295,R=V+(j<<4&4294967295|j>>>28),j=F+(R^V^k)+M[0]+3936430074&4294967295,F=R+(j<<11&4294967295|j>>>21),j=k+(F^R^V)+M[3]+3572445317&4294967295,k=F+(j<<16&4294967295|j>>>16),j=V+(k^F^R)+M[6]+76029189&4294967295,V=k+(j<<23&4294967295|j>>>9),j=R+(V^k^F)+M[9]+3654602809&4294967295,R=V+(j<<4&4294967295|j>>>28),j=F+(R^V^k)+M[12]+3873151461&4294967295,F=R+(j<<11&4294967295|j>>>21),j=k+(F^R^V)+M[15]+530742520&4294967295,k=F+(j<<16&4294967295|j>>>16),j=V+(k^F^R)+M[2]+3299628645&4294967295,V=k+(j<<23&4294967295|j>>>9),j=R+(k^(V|~F))+M[0]+4096336452&4294967295,R=V+(j<<6&4294967295|j>>>26),j=F+(V^(R|~k))+M[7]+1126891415&4294967295,F=R+(j<<10&4294967295|j>>>22),j=k+(R^(F|~V))+M[14]+2878612391&4294967295,k=F+(j<<15&4294967295|j>>>17),j=V+(F^(k|~R))+M[5]+4237533241&4294967295,V=k+(j<<21&4294967295|j>>>11),j=R+(k^(V|~F))+M[12]+1700485571&4294967295,R=V+(j<<6&4294967295|j>>>26),j=F+(V^(R|~k))+M[3]+2399980690&4294967295,F=R+(j<<10&4294967295|j>>>22),j=k+(R^(F|~V))+M[10]+4293915773&4294967295,k=F+(j<<15&4294967295|j>>>17),j=V+(F^(k|~R))+M[1]+2240044497&4294967295,V=k+(j<<21&4294967295|j>>>11),j=R+(k^(V|~F))+M[8]+1873313359&4294967295,R=V+(j<<6&4294967295|j>>>26),j=F+(V^(R|~k))+M[15]+4264355552&4294967295,F=R+(j<<10&4294967295|j>>>22),j=k+(R^(F|~V))+M[6]+2734768916&4294967295,k=F+(j<<15&4294967295|j>>>17),j=V+(F^(k|~R))+M[13]+1309151649&4294967295,V=k+(j<<21&4294967295|j>>>11),j=R+(k^(V|~F))+M[4]+4149444226&4294967295,R=V+(j<<6&4294967295|j>>>26),j=F+(V^(R|~k))+M[11]+3174756917&4294967295,F=R+(j<<10&4294967295|j>>>22),j=k+(R^(F|~V))+M[2]+718787259&4294967295,k=F+(j<<15&4294967295|j>>>17),j=V+(F^(k|~R))+M[9]+3951481745&4294967295,S.g[0]=S.g[0]+R&4294967295,S.g[1]=S.g[1]+(k+(j<<21&4294967295|j>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+F&4294967295}i.prototype.v=function(S,R){R===void 0&&(R=S.length);const V=R-this.blockSize,M=this.C;let k=this.h,F=0;for(;F<R;){if(k==0)for(;F<=V;)s(this,S,F),F+=this.blockSize;if(typeof S=="string"){for(;F<R;)if(M[k++]=S.charCodeAt(F++),k==this.blockSize){s(this,M),k=0;break}}else for(;F<R;)if(M[k++]=S[F++],k==this.blockSize){s(this,M),k=0;break}}this.h=k,this.o+=R},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var R=1;R<S.length-8;++R)S[R]=0;R=this.o*8;for(var V=S.length-8;V<S.length;++V)S[V]=R&255,R/=256;for(this.v(S),S=Array(16),R=0,V=0;V<4;++V)for(let M=0;M<32;M+=8)S[R++]=this.g[V]>>>M&255;return S};function o(S,R){var V=u;return Object.prototype.hasOwnProperty.call(V,S)?V[S]:V[S]=R(S)}function l(S,R){this.h=R;const V=[];let M=!0;for(let k=S.length-1;k>=0;k--){const F=S[k]|0;M&&F==R||(V[k]=F,M=!1)}this.g=V}var u={};function d(S){return-128<=S&&S<128?o(S,function(R){return new l([R|0],R<0?-1:0)}):new l([S|0],S<0?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return v;if(S<0)return C(f(-S));const R=[];let V=1;for(let M=0;S>=V;M++)R[M]=S/V|0,V*=4294967296;return new l(R,0)}function g(S,R){if(S.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(S.charAt(0)=="-")return C(g(S.substring(1),R));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=f(Math.pow(R,8));let M=v;for(let F=0;F<S.length;F+=8){var k=Math.min(8,S.length-F);const j=parseInt(S.substring(F,F+k),R);k<8?(k=f(Math.pow(R,k)),M=M.j(k).add(f(j))):(M=M.j(V),M=M.add(f(j)))}return M}var v=d(0),_=d(1),x=d(16777216);n=l.prototype,n.m=function(){if(A(this))return-C(this).m();let S=0,R=1;for(let V=0;V<this.g.length;V++){const M=this.i(V);S+=(M>=0?M:4294967296+M)*R,R*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if(A(this))return"-"+C(this).toString(S);const R=f(Math.pow(S,6));var V=this;let M="";for(;;){const k=K(V,R).g;V=P(V,k.j(R));let F=((V.g.length>0?V.g[0]:V.h)>>>0).toString(S);if(V=k,N(V))return F+M;for(;F.length<6;)F="0"+F;M=F+M}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(let R=0;R<S.g.length;R++)if(S.g[R]!=0)return!1;return!0}function A(S){return S.h==-1}n.l=function(S){return S=P(this,S),A(S)?-1:N(S)?0:1};function C(S){const R=S.g.length,V=[];for(let M=0;M<R;M++)V[M]=~S.g[M];return new l(V,~S.h).add(_)}n.abs=function(){return A(this)?C(this):this},n.add=function(S){const R=Math.max(this.g.length,S.g.length),V=[];let M=0;for(let k=0;k<=R;k++){let F=M+(this.i(k)&65535)+(S.i(k)&65535),j=(F>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);M=j>>>16,F&=65535,j&=65535,V[k]=j<<16|F}return new l(V,V[V.length-1]&-2147483648?-1:0)};function P(S,R){return S.add(C(R))}n.j=function(S){if(N(this)||N(S))return v;if(A(this))return A(S)?C(this).j(C(S)):C(C(this).j(S));if(A(S))return C(this.j(C(S)));if(this.l(x)<0&&S.l(x)<0)return f(this.m()*S.m());const R=this.g.length+S.g.length,V=[];for(var M=0;M<2*R;M++)V[M]=0;for(M=0;M<this.g.length;M++)for(let k=0;k<S.g.length;k++){const F=this.i(M)>>>16,j=this.i(M)&65535,Le=S.i(k)>>>16,me=S.i(k)&65535;V[2*M+2*k]+=j*me,z(V,2*M+2*k),V[2*M+2*k+1]+=F*me,z(V,2*M+2*k+1),V[2*M+2*k+1]+=j*Le,z(V,2*M+2*k+1),V[2*M+2*k+2]+=F*Le,z(V,2*M+2*k+2)}for(S=0;S<R;S++)V[S]=V[2*S+1]<<16|V[2*S];for(S=R;S<2*R;S++)V[S]=0;return new l(V,0)};function z(S,R){for(;(S[R]&65535)!=S[R];)S[R+1]+=S[R]>>>16,S[R]&=65535,R++}function O(S,R){this.g=S,this.h=R}function K(S,R){if(N(R))throw Error("division by zero");if(N(S))return new O(v,v);if(A(S))return R=K(C(S),R),new O(C(R.g),C(R.h));if(A(R))return R=K(S,C(R)),new O(C(R.g),R.h);if(S.g.length>30){if(A(S)||A(R))throw Error("slowDivide_ only works with positive integers.");for(var V=_,M=R;M.l(S)<=0;)V=te(V),M=te(M);var k=J(V,1),F=J(M,1);for(M=J(M,2),V=J(V,2);!N(M);){var j=F.add(M);j.l(S)<=0&&(k=k.add(V),F=j),M=J(M,1),V=J(V,1)}return R=P(S,k.j(R)),new O(k,R)}for(k=v;S.l(R)>=0;){for(V=Math.max(1,Math.floor(S.m()/R.m())),M=Math.ceil(Math.log(V)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),F=f(V),j=F.j(R);A(j)||j.l(S)>0;)V-=M,F=f(V),j=F.j(R);N(F)&&(F=_),k=k.add(F),S=P(S,j)}return new O(k,S)}n.B=function(S){return K(this,S).h},n.and=function(S){const R=Math.max(this.g.length,S.g.length),V=[];for(let M=0;M<R;M++)V[M]=this.i(M)&S.i(M);return new l(V,this.h&S.h)},n.or=function(S){const R=Math.max(this.g.length,S.g.length),V=[];for(let M=0;M<R;M++)V[M]=this.i(M)|S.i(M);return new l(V,this.h|S.h)},n.xor=function(S){const R=Math.max(this.g.length,S.g.length),V=[];for(let M=0;M<R;M++)V[M]=this.i(M)^S.i(M);return new l(V,this.h^S.h)};function te(S){const R=S.g.length+1,V=[];for(let M=0;M<R;M++)V[M]=S.i(M)<<1|S.i(M-1)>>>31;return new l(V,S.h)}function J(S,R){const V=R>>5;R%=32;const M=S.g.length-V,k=[];for(let F=0;F<M;F++)k[F]=R>0?S.i(F+V)>>>R|S.i(F+V+1)<<32-R:S.i(F+V);return new l(k,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Z2=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,ma=l}).apply(typeof Mx<"u"?Mx:typeof self<"u"?self:typeof window<"u"?window:{});var Jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var J2,th,eR,_m,fv,tR,nR,iR;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jf=="object"&&Jf];for(var T=0;T<m.length;++T){var E=m[T];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function s(m,T){if(T)e:{var E=i;m=m.split(".");for(var D=0;D<m.length-1;D++){var Y=m[D];if(!(Y in E))break e;E=E[Y]}m=m[m.length-1],D=E[m],T=T(D),T!=D&&T!=null&&e(E,m,{configurable:!0,writable:!0,value:T})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(T){var E=[],D;for(D in T)Object.prototype.hasOwnProperty.call(T,D)&&E.push([D,T[D]]);return E}});var o=o||{},l=this||self;function u(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function d(m,T,E){return m.call.apply(m.bind,arguments)}function f(m,T,E){return f=d,f.apply(null,arguments)}function g(m,T){var E=Array.prototype.slice.call(arguments,1);return function(){var D=E.slice();return D.push.apply(D,arguments),m.apply(this,D)}}function v(m,T){function E(){}E.prototype=T.prototype,m.Z=T.prototype,m.prototype=new E,m.prototype.constructor=m,m.Ob=function(D,Y,Z){for(var fe=Array(arguments.length-2),je=2;je<arguments.length;je++)fe[je-2]=arguments[je];return T.prototype[Y].apply(D,fe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function x(m){const T=m.length;if(T>0){const E=Array(T);for(let D=0;D<T;D++)E[D]=m[D];return E}return[]}function N(m,T){for(let D=1;D<arguments.length;D++){const Y=arguments[D];var E=typeof Y;if(E=E!="object"?E:Y?Array.isArray(Y)?"array":E:"null",E=="array"||E=="object"&&typeof Y.length=="number"){E=m.length||0;const Z=Y.length||0;m.length=E+Z;for(let fe=0;fe<Z;fe++)m[E+fe]=Y[fe]}else m.push(Y)}}class A{constructor(T,E){this.i=T,this.j=E,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function C(m){l.setTimeout(()=>{throw m},0)}function P(){var m=S;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class z{constructor(){this.h=this.g=null}add(T,E){const D=O.get();D.set(T,E),this.h?this.h.next=D:this.g=D,this.h=D}}var O=new A(()=>new K,m=>m.reset());class K{constructor(){this.next=this.g=this.h=null}set(T,E){this.h=T,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let te,J=!1,S=new z,R=()=>{const m=Promise.resolve(void 0);te=()=>{m.then(V)}};function V(){for(var m;m=P();){try{m.h.call(m.g)}catch(E){C(E)}var T=O;T.j(m),T.h<100&&(T.h++,m.next=T.g,T.g=m)}J=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const E=()=>{};l.addEventListener("test",E,T),l.removeEventListener("test",E,T)}catch{}return m})();function j(m){return/^[\s\xa0]*$/.test(m)}function Le(m,T){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,T)}v(Le,k),Le.prototype.init=function(m,T){const E=this.type=m.type,D=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget,T||(E=="mouseover"?T=m.fromElement:E=="mouseout"&&(T=m.toElement)),this.relatedTarget=T,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),H=0;function oe(m,T,E,D,Y){this.listener=m,this.proxy=null,this.src=T,this.type=E,this.capture=!!D,this.ha=Y,this.key=++H,this.da=this.fa=!1}function ge(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function xe(m,T,E){for(const D in m)T.call(E,m[D],D,m)}function ce(m,T){for(const E in m)T.call(void 0,m[E],E,m)}function L(m){const T={};for(const E in m)T[E]=m[E];return T}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(m,T){let E,D;for(let Y=1;Y<arguments.length;Y++){D=arguments[Y];for(E in D)m[E]=D[E];for(let Z=0;Z<ne.length;Z++)E=ne[Z],Object.prototype.hasOwnProperty.call(D,E)&&(m[E]=D[E])}}function pe(m){this.src=m,this.g={},this.h=0}pe.prototype.add=function(m,T,E,D,Y){const Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);const fe=Se(m,T,D,Y);return fe>-1?(T=m[fe],E||(T.fa=!1)):(T=new oe(T,this.src,Z,!!D,Y),T.fa=E,m.push(T)),T};function ve(m,T){const E=T.type;if(E in m.g){var D=m.g[E],Y=Array.prototype.indexOf.call(D,T,void 0),Z;(Z=Y>=0)&&Array.prototype.splice.call(D,Y,1),Z&&(ge(T),m.g[E].length==0&&(delete m.g[E],m.h--))}}function Se(m,T,E,D){for(let Y=0;Y<m.length;++Y){const Z=m[Y];if(!Z.da&&Z.listener==T&&Z.capture==!!E&&Z.ha==D)return Y}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),gt={};function Qe(m,T,E,D,Y){if(Array.isArray(T)){for(let Z=0;Z<T.length;Z++)Qe(m,T[Z],E,D,Y);return null}return E=Fc(E),m&&m[me]?m.J(T,E,u(D)?!!D.capture:!1,Y):Sn(m,T,E,!1,D,Y)}function Sn(m,T,E,D,Y,Z){if(!T)throw Error("Invalid event type");const fe=u(Y)?!!Y.capture:!!Y;let je=Pa(m);if(je||(m[Ie]=je=new pe(m)),E=je.add(T,E,D,fe,Z),E.proxy)return E;if(D=Hn(),E.proxy=D,D.src=m,D.listener=E,m.addEventListener)F||(Y=fe),Y===void 0&&(Y=!1),m.addEventListener(T.toString(),D,Y);else if(m.attachEvent)m.attachEvent(Hi(T.toString()),D);else if(m.addListener&&m.removeListener)m.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Hn(){function m(E){return T.call(m.src,m.listener,E)}const T=zc;return m}function Ko(m,T,E,D,Y){if(Array.isArray(T))for(var Z=0;Z<T.length;Z++)Ko(m,T[Z],E,D,Y);else D=u(D)?!!D.capture:!!D,E=Fc(E),m&&m[me]?(m=m.i,Z=String(T).toString(),Z in m.g&&(T=m.g[Z],E=Se(T,E,D,Y),E>-1&&(ge(T[E]),Array.prototype.splice.call(T,E,1),T.length==0&&(delete m.g[Z],m.h--)))):m&&(m=Pa(m))&&(T=m.g[T.toString()],m=-1,T&&(m=Se(T,E,D,Y)),(E=m>-1?T[m]:null)&&Yo(E))}function Yo(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[me])ve(T.i,m);else{var E=m.type,D=m.proxy;T.removeEventListener?T.removeEventListener(E,D,m.capture):T.detachEvent?T.detachEvent(Hi(E),D):T.addListener&&T.removeListener&&T.removeListener(D),(E=Pa(T))?(ve(E,m),E.h==0&&(E.src=null,T[Ie]=null)):ge(m)}}}function Hi(m){return m in gt?gt[m]:gt[m]="on"+m}function zc(m,T){if(m.da)m=!0;else{T=new Le(T,this);const E=m.listener,D=m.ha||m.src;m.fa&&Yo(m),m=E.call(D,T)}return m}function Pa(m){return m=m[Ie],m instanceof pe?m:null}var Bc="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fc(m){return typeof m=="function"?m:(m[Bc]||(m[Bc]=function(T){return m.handleEvent(T)}),m[Bc])}function Ut(){M.call(this),this.i=new pe(this),this.M=this,this.G=null}v(Ut,M),Ut.prototype[me]=!0,Ut.prototype.removeEventListener=function(m,T,E,D){Ko(this,m,T,E,D)};function Wt(m,T){var E,D=m.G;if(D)for(E=[];D;D=D.G)E.push(D);if(m=m.M,D=T.type||T,typeof T=="string")T=new k(T,m);else if(T instanceof k)T.target=T.target||m;else{var Y=T;T=new k(D,m),he(T,Y)}Y=!0;let Z,fe;if(E)for(fe=E.length-1;fe>=0;fe--)Z=T.g=E[fe],Y=gs(Z,D,!0,T)&&Y;if(Z=T.g=m,Y=gs(Z,D,!0,T)&&Y,Y=gs(Z,D,!1,T)&&Y,E)for(fe=0;fe<E.length;fe++)Z=T.g=E[fe],Y=gs(Z,D,!1,T)&&Y}Ut.prototype.N=function(){if(Ut.Z.N.call(this),this.i){var m=this.i;for(const T in m.g){const E=m.g[T];for(let D=0;D<E.length;D++)ge(E[D]);delete m.g[T],m.h--}}this.G=null},Ut.prototype.J=function(m,T,E,D){return this.i.add(String(m),T,!1,E,D)},Ut.prototype.K=function(m,T,E,D){return this.i.add(String(m),T,!0,E,D)};function gs(m,T,E,D){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();let Y=!0;for(let Z=0;Z<T.length;++Z){const fe=T[Z];if(fe&&!fe.da&&fe.capture==E){const je=fe.listener,kt=fe.ha||fe.src;fe.fa&&ve(m.i,fe),Y=je.call(kt,D)!==!1&&Y}}return Y&&!D.defaultPrevented}function cg(m,T){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:l.setTimeout(m,T||0)}function bd(m){m.g=cg(()=>{m.g=null,m.i&&(m.i=!1,bd(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class An extends M{constructor(T,E){super(),this.m=T,this.l=E,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:bd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(m){M.call(this),this.h=m,this.g={}}v(Ma,M);var qc=[];function Hc(m){xe(m.g,function(T,E){this.g.hasOwnProperty(E)&&Yo(T)},m),m.g={}}Ma.prototype.N=function(){Ma.Z.N.call(this),Hc(this)},Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ys=l.JSON.stringify,ug=l.JSON.parse,Td=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function wd(){}function Ed(){}var Ai={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function on(){k.call(this,"d")}v(on,k);function ri(){k.call(this,"c")}v(ri,k);var Dt={},xd=null;function Qo(){return xd=xd||new Ut}Dt.Ia="serverreachability";function Sd(m){k.call(this,Dt.Ia,m)}v(Sd,k);function Gi(m){const T=Qo();Wt(T,new Sd(T))}Dt.STAT_EVENT="statevent";function Oa(m,T){k.call(this,Dt.STAT_EVENT,m),this.stat=T}v(Oa,k);function zt(m){const T=Qo();Wt(T,new Oa(T,m))}Dt.Ja="timingevent";function $i(m,T){k.call(this,Dt.Ja,m),this.size=T}v($i,k);function Ki(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},T)}function Ii(){this.g=!0}Ii.prototype.ua=function(){this.g=!1};function hg(m,T,E,D,Y,Z){m.info(function(){if(m.g)if(Z){var fe="",je=Z.split("&");for(let tt=0;tt<je.length;tt++){var kt=je[tt].split("=");if(kt.length>1){const _t=kt[0];kt=kt[1];const li=_t.split("_");fe=li.length>=2&&li[1]=="type"?fe+(_t+"="+kt+"&"):fe+(_t+"=redacted&")}}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+D+") [attempt "+Y+"]: "+T+`
`+E+`
`+fe})}function Ad(m,T,E,D,Y,Z,fe){m.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Y+"]: "+T+`
`+E+`
`+Z+" "+fe})}function Yi(m,T,E,D){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+dg(m,E)+(D?" "+D:"")})}function La(m,T){m.info(function(){return"TIMEOUT: "+T})}Ii.prototype.info=function(){};function dg(m,T){if(!m.g)return T;if(!T)return null;try{const Z=JSON.parse(T);if(Z){for(m=0;m<Z.length;m++)if(Array.isArray(Z[m])){var E=Z[m];if(!(E.length<2)){var D=E[1];if(Array.isArray(D)&&!(D.length<1)){var Y=D[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let fe=1;fe<D.length;fe++)D[fe]=""}}}}return ys(Z)}catch{return T}}var ja={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$c;function Ua(){}v(Ua,wd),Ua.prototype.g=function(){return new XMLHttpRequest},$c=new Ua;function Nr(m){return encodeURIComponent(String(m))}function Id(m){var T=1;m=m.split(":");const E=[];for(;T>0&&m.length;)E.push(m.shift()),T--;return m.length&&E.push(m.join(":")),E}function Ri(m,T,E,D){this.j=m,this.i=T,this.l=E,this.S=D||1,this.V=new Ma(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ci}function Ci(){this.i=null,this.g="",this.h=!1}var Bt={},nn={};function Qi(m,T,E){m.M=1,m.A=za(qt(T)),m.u=E,m.R=!0,Xo(m,null)}function Xo(m,T){m.F=Date.now(),Xi(m),m.B=qt(m.A);var E=m.B,D=m.S;Array.isArray(D)||(D=[String(D)]),el(E.i,"t",D),m.C=0,E=m.j.L,m.h=new Ci,m.g=Fd(m.j,E?T:null,!m.u),m.P>0&&(m.O=new An(f(m.Y,m,m.g),m.P)),T=m.V,E=m.g,D=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(qc[0]=Y.toString()),Y=qc);for(let Z=0;Z<Y.length;Z++){const fe=Qe(E,Y[Z],D||T.handleEvent,!1,T.h||T);if(!fe)break;T.g[fe.key]=fe}T=m.J?L(m.J):{},m.u?(m.v||(m.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,T)):(m.v="GET",m.g.ea(m.B,m.v,null,T)),Gi(),hg(m.i,m.v,m.B,m.l,m.S,m.u)}Ri.prototype.ba=function(m){m=m.target;const T=this.O;T&&ki(m)==3?T.j():this.Y(m)},Ri.prototype.Y=function(m){try{if(m==this.g)e:{const je=ki(this.g),kt=this.g.ya(),tt=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||je!=4||kt==7||(kt==8||tt<=0?Gi(3):Gi(2)),Wi(this);var T=this.g.ca();this.X=T;var E=fg(this);if(this.o=T==200,Ad(this.i,this.v,this.B,this.l,this.S,je,T),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Y=this.g;if((D=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(D)){var Z=D;break t}}Z=null}if(m=Z)Yi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zi(this,m);else{this.o=!1,this.m=3,zt(12),Gn(this),si(this);break e}}if(this.R){m=!0;let _t;for(;!this.K&&this.C<E.length;)if(_t=Cd(this,E),_t==nn){je==4&&(this.m=4,zt(14),m=!1),Yi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Bt){this.m=4,zt(15),Yi(this.i,this.l,E,"[Invalid Chunk]"),m=!1;break}else Yi(this.i,this.l,_t,null),Zi(this,_t);if(Rd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||E.length!=0||this.h.h||(this.m=1,zt(16),m=!1),this.o=this.o&&m,!m)Yi(this.i,this.l,E,"[Invalid Chunked Response]"),Gn(this),si(this);else if(E.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),ou(fe),fe.P=!0,zt(11))}}else Yi(this.i,this.l,E,null),Zi(this,E);je==4&&Gn(this),this.o&&!this.K&&(je==4?jd(this.j,this):(this.o=!1,Xi(this)))}else kr(this.g),T==400&&E.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Gn(this),si(this)}}}catch{}finally{}};function fg(m){if(!Rd(m))return m.g.la();const T=ln(m.g);if(T==="")return"";let E="";const D=T.length,Y=ki(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Gn(m),si(m),"";m.h.i=new l.TextDecoder}for(let Z=0;Z<D;Z++)m.h.h=!0,E+=m.h.i.decode(T[Z],{stream:!(Y&&Z==D-1)});return T.length=0,m.h.g+=E,m.C=0,m.h.g}function Rd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Cd(m,T){var E=m.C,D=T.indexOf(`
`,E);return D==-1?nn:(E=Number(T.substring(E,D)),isNaN(E)?Bt:(D+=1,D+E>T.length?nn:(T=T.slice(D,D+E),m.C=D+E,T)))}Ri.prototype.cancel=function(){this.K=!0,Gn(this)};function Xi(m){m.T=Date.now()+m.H,Wo(m,m.H)}function Wo(m,T){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ki(f(m.aa,m),T)}function Wi(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Ri.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(La(this.i,this.B),this.M!=2&&(Gi(),zt(17)),Gn(this),this.m=2,si(this)):Wo(this,this.T-m)};function si(m){m.j.I==0||m.K||jd(m.j,m)}function Gn(m){Wi(m);var T=m.O;T&&typeof T.dispose=="function"&&T.dispose(),m.O=null,Hc(m.V),m.g&&(T=m.g,m.g=null,T.abort(),T.dispose())}function Zi(m,T){try{var E=m.j;if(E.I!=0&&(E.g==m||er(E.h,m))){if(!m.L&&er(E.h,m)&&E.I==3){try{var D=E.Ba.g.parse(T)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Y=D;if(Y[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<m.F)sl(E),Ss(E);else break e;Ka(E),zt(18)}}else E.xa=Y[1],0<E.xa-E.K&&Y[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ki(f(E.Va,E),6e3));Ji(E.h)<=1&&E.ta&&(E.ta=void 0)}else ar(E,11)}else if((m.L||E.g==m)&&sl(E),!j(T))for(Y=E.Ba.g.parse(T),T=0;T<Y.length;T++){let tt=Y[T];const _t=tt[0];if(!(_t<=E.K))if(E.K=_t,tt=tt[1],E.I==2)if(tt[0]=="c"){E.M=tt[1],E.ba=tt[2];const li=tt[3];li!=null&&(E.ka=li,E.j.info("VER="+E.ka));const or=tt[4];or!=null&&(E.za=or,E.j.info("SVER="+E.za));const Vi=tt[5];Vi!=null&&typeof Vi=="number"&&Vi>0&&(D=1.5*Vi,E.O=D,E.j.info("backChannelRequestTimeoutMs_="+D)),D=E;const Pi=m.g;if(Pi){const Ya=Pi.g?Pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ya){var Z=D.h;Z.g||Ya.indexOf("spdy")==-1&&Ya.indexOf("quic")==-1&&Ya.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Qc(Z,Z.h),Z.h=null))}if(D.G){const al=Pi.g?Pi.g.getResponseHeader("X-HTTP-Session-Id"):null;al&&(D.wa=al,rt(D.J,D.G,al))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-m.F,E.j.info("Handshake RTT: "+E.T+"ms")),D=E;var fe=m;if(D.na=Bd(D,D.L?D.ba:null,D.W),fe.L){Xc(D.h,fe);var je=fe,kt=D.O;kt&&(je.H=kt),je.D&&(Wi(je),Xi(je)),D.g=fe}else Od(D);E.i.length>0&&sr(E)}else tt[0]!="stop"&&tt[0]!="close"||ar(E,7);else E.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?ar(E,7):su(E):tt[0]!="noop"&&E.l&&E.l.qa(tt),E.A=0)}}Gi(4)}catch{}}var Ft=class{constructor(m,T){this.g=m,this.map=T}};function Kc(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ji(m){return m.h?1:m.g?m.g.size:0}function er(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function Qc(m,T){m.g?m.g.add(T):m.h=T}function Xc(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}Kc.prototype.cancel=function(){if(this.i=Wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Wc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const E of m.g.values())T=T.concat(E.G);return T}return x(m.i)}var Nd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zo(m,T){if(m){m=m.split("&");for(let E=0;E<m.length;E++){const D=m[E].indexOf("=");let Y,Z=null;D>=0?(Y=m[E].substring(0,D),Z=m[E].substring(D+1)):Y=m[E],T(Y,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function $n(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;m instanceof $n?(this.l=m.l,rn(this,m.j),this.o=m.o,this.g=m.g,vs(this,m.u),this.h=m.h,Zc(this,Pd(m.i)),this.m=m.m):m&&(T=String(m).match(Nd))?(this.l=!1,rn(this,T[1]||"",!0),this.o=tr(T[2]||""),this.g=tr(T[3]||"",!0),vs(this,T[4]),this.h=tr(T[5]||"",!0),Zc(this,T[6]||"",!0),this.m=tr(T[7]||"")):(this.l=!1,this.i=new bs(null,this.l))}$n.prototype.toString=function(){const m=[];var T=this.j;T&&m.push(Ba(T,Jo,!0),":");var E=this.g;return(E||T=="file")&&(m.push("//"),(T=this.o)&&m.push(Ba(T,Jo,!0),"@"),m.push(Nr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&m.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&m.push("/"),m.push(Ba(E,E.charAt(0)=="/"?Jc:Dd,!0))),(E=this.i.toString())&&m.push("?",E),(E=this.m)&&m.push("#",Ba(E,kd)),m.join("")},$n.prototype.resolve=function(m){const T=qt(this);let E=!!m.j;E?rn(T,m.j):E=!!m.o,E?T.o=m.o:E=!!m.g,E?T.g=m.g:E=m.u!=null;var D=m.h;if(E)vs(T,m.u);else if(E=!!m.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Y=T.h.lastIndexOf("/");Y!=-1&&(D=T.h.slice(0,Y+1)+D)}if(Y=D,Y==".."||Y==".")D="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){D=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const Z=[];for(let fe=0;fe<Y.length;){const je=Y[fe++];je=="."?D&&fe==Y.length&&Z.push(""):je==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),D&&fe==Y.length&&Z.push("")):(Z.push(je),D=!0)}D=Z.join("/")}else D=Y}return E?T.h=D:E=m.i.toString()!=="",E?Zc(T,Pd(m.i)):E=!!m.m,E&&(T.m=m.m),T};function qt(m){return new $n(m)}function rn(m,T,E){m.j=E?tr(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function vs(m,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);m.u=T}else m.u=null}function Zc(m,T,E){T instanceof bs?(m.i=T,tl(m.i,m.l)):(E||(T=Ba(T,_s)),m.i=new bs(T,m.l))}function rt(m,T,E){m.i.set(T,E)}function za(m){return rt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function tr(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ba(m,T,E){return typeof m=="string"?(m=encodeURI(m).replace(T,kn),E&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function kn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Jo=/[#\/\?@]/g,Dd=/[#\?:]/g,Jc=/[#\?]/g,_s=/[#\?@]/g,kd=/#/g;function bs(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Vn(m){m.g||(m.g=new Map,m.h=0,m.i&&Zo(m.i,function(T,E){m.add(decodeURIComponent(T.replace(/\+/g," ")),E)}))}n=bs.prototype,n.add=function(m,T){Vn(this),this.i=null,m=Ts(this,m);let E=this.g.get(m);return E||this.g.set(m,E=[]),E.push(T),this.h+=1,this};function Vd(m,T){Vn(m),T=Ts(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function eu(m,T){return Vn(m),T=Ts(m,T),m.g.has(T)}n.forEach=function(m,T){Vn(this),this.g.forEach(function(E,D){E.forEach(function(Y){m.call(T,Y,D,this)},this)},this)};function tu(m,T){Vn(m);let E=[];if(typeof T=="string")eu(m,T)&&(E=E.concat(m.g.get(Ts(m,T))));else for(m=Array.from(m.g.values()),T=0;T<m.length;T++)E=E.concat(m[T]);return E}n.set=function(m,T){return Vn(this),this.i=null,m=Ts(this,m),eu(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=tu(this,m),m.length>0?String(m[0]):T):T};function el(m,T,E){Vd(m,T),E.length>0&&(m.i=null,m.g.set(Ts(m,T),x(E)),m.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(let D=0;D<T.length;D++){var E=T[D];const Y=Nr(E);E=tu(this,E);for(let Z=0;Z<E.length;Z++){let fe=Y;E[Z]!==""&&(fe+="="+Nr(E[Z])),m.push(fe)}}return this.i=m.join("&")};function Pd(m){const T=new bs;return T.i=m.i,m.g&&(T.g=new Map(m.g),T.h=m.h),T}function Ts(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function tl(m,T){T&&!m.j&&(Vn(m),m.i=null,m.g.forEach(function(E,D){const Y=D.toLowerCase();D!=Y&&(Vd(this,D),el(this,Y,E))},m)),m.j=T}function Ni(m,T){const E=new Ii;if(l.Image){const D=new Image;D.onload=g(ai,E,"TestLoadImage: loaded",!0,T,D),D.onerror=g(ai,E,"TestLoadImage: error",!1,T,D),D.onabort=g(ai,E,"TestLoadImage: abort",!1,T,D),D.ontimeout=g(ai,E,"TestLoadImage: timeout",!1,T,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=m}else T(!1)}function nu(m,T){const E=new Ii,D=new AbortController,Y=setTimeout(()=>{D.abort(),ai(E,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:D.signal}).then(Z=>{clearTimeout(Y),Z.ok?ai(E,"TestPingServer: ok",!0,T):ai(E,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(Y),ai(E,"TestPingServer: error",!1,T)})}function ai(m,T,E,D,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),D(E)}catch{}}function ws(){this.g=new Td}function nr(m){this.i=m.Sb||null,this.h=m.ab||!1}v(nr,wd),nr.prototype.g=function(){return new Fa(this.i,this.h)};function Fa(m,T){Ut.call(this),this.H=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Fa,Ut),n=Fa.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=T,this.readyState=1,Di(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(T.body=m),(this.H||l).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function nl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?Es(this):Di(this),this.readyState==3&&nl(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Es(this))},n.Na=function(m){this.g&&(this.response=m,Es(this))},n.ga=function(){this.g&&Es(this)};function Es(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Di(m)}n.setRequestHeader=function(m,T){this.A.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var E=T.next();!E.done;)E=E.value,m.push(E[0]+": "+E[1]),E=T.next();return m.join(`\r
`)};function Di(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function oi(m){let T="";return xe(m,function(E,D){T+=D,T+=":",T+=E,T+=`\r
`}),T}function qa(m,T,E){e:{for(D in E){var D=!1;break e}D=!0}D||(E=oi(E),typeof m=="string"?E!=null&&Nr(E):rt(m,T,E))}function ct(m){Ut.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ct,Ut);var ir=/^https?$/i,iu=["POST","PUT"];n=ct.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,T,E,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$c.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(Z){Ha(this,Z);return}if(m=E||"",E=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Y in D)E.set(Y,D[Y]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const Z of D.keys())E.set(Z,D.get(Z));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(E.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(iu,T,void 0)>=0)||D||Y||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of E)this.g.setRequestHeader(Z,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Z){Ha(this,Z)}};function Ha(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.o=5,ru(m),Dr(m)}function ru(m){m.A||(m.A=!0,Wt(m,"complete"),Wt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Wt(this,"complete"),Wt(this,"abort"),Dr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ga(this):this.Xa())},n.Xa=function(){Ga(this)};function Ga(m){if(m.h&&typeof o<"u"){if(m.v&&ki(m)==4)setTimeout(m.Ca.bind(m),0);else if(Wt(m,"readystatechange"),ki(m)==4){m.h=!1;try{const Z=m.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var E;if(!(E=T)){var D;if(D=Z===0){let fe=String(m.D).match(Nd)[1]||null;!fe&&l.self&&l.self.location&&(fe=l.self.location.protocol.slice(0,-1)),D=!ir.test(fe?fe.toLowerCase():"")}E=D}if(E)Wt(m,"complete"),Wt(m,"success");else{m.o=6;try{var Y=ki(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",ru(m)}}finally{Dr(m)}}}}function Dr(m,T){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const E=m.g;m.g=null,T||Wt(m,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ki(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ki(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),ug(T)}};function ln(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function kr(m){const T={};m=(m.g&&ki(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<m.length;D++){if(j(m[D]))continue;var E=Id(m[D]);const Y=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Z=T[Y]||[];T[Y]=Z,Z.push(E)}ce(T,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(m,T,E){return E&&E.internalChannelParams&&E.internalChannelParams[m]||T}function xs(m){this.za=0,this.i=[],this.j=new Ii,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rr("baseRetryDelayMs",5e3,m),this.Za=rr("retryDelaySeedMs",1e4,m),this.Ta=rr("forwardChannelMaxRetries",2,m),this.va=rr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Kc(m&&m.concurrentRequestLimit),this.Ba=new ws,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=xs.prototype,n.ka=8,n.I=1,n.connect=function(m,T,E,D){zt(0),this.W=m,this.H=T||{},E&&D!==void 0&&(this.H.OSID=E,this.H.OAID=D),this.F=this.X,this.J=Bd(this,null,this.W),sr(this)};function su(m){if(il(m),m.I==3){var T=m.V++,E=qt(m.J);if(rt(E,"SID",m.M),rt(E,"RID",T),rt(E,"TYPE","terminate"),$a(m,E),T=new Ri(m,m.j,T),T.M=2,T.A=za(qt(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(T.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=T.A,E=!0),E||(T.g=Fd(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Xi(T)}zd(m)}function Ss(m){m.g&&(ou(m),m.g.cancel(),m.g=null)}function il(m){Ss(m),m.v&&(l.clearTimeout(m.v),m.v=null),sl(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function sr(m){if(!Yc(m.h)&&!m.m){m.m=!0;var T=m.Ea;te||R(),J||(te(),J=!0),S.add(T,m),m.D=0}}function rl(m,T){return Ji(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=T.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ki(f(m.Ea,m,T),Ud(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new Ri(this,this.j,m);let Z=this.o;if(this.U&&(Z?(Z=L(Z),he(Z,this.U)):Z=this.U),this.u!==null||this.R||(Y.J=Z,Z=null),this.S)e:{for(var T=0,E=0;E<this.i.length;E++){t:{var D=this.i[E];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(T+=D,T>4096){T=E;break e}if(T===4096||E===this.i.length-1){T=E+1;break e}}T=1e3}else T=1e3;T=Md(this,Y,T),E=qt(this.J),rt(E,"RID",m),rt(E,"CVER",22),this.G&&rt(E,"X-HTTP-Session-Id",this.G),$a(this,E),Z&&(this.R?T="headers="+Nr(oi(Z))+"&"+T:this.u&&qa(E,this.u,Z)),Qc(this.h,Y),this.Ra&&rt(E,"TYPE","init"),this.S?(rt(E,"$req",T),rt(E,"SID","null"),Y.U=!0,Qi(Y,E,null)):Qi(Y,E,T),this.I=2}}else this.I==3&&(m?au(this,m):this.i.length==0||Yc(this.h)||au(this))};function au(m,T){var E;T?E=T.l:E=m.V++;const D=qt(m.J);rt(D,"SID",m.M),rt(D,"RID",E),rt(D,"AID",m.K),$a(m,D),m.u&&m.o&&qa(D,m.u,m.o),E=new Ri(m,m.j,E,m.D+1),m.u===null&&(E.J=m.o),T&&(m.i=T.G.concat(m.i)),T=Md(m,E,1e3),E.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Qc(m.h,E),Qi(E,D,T)}function $a(m,T){m.H&&xe(m.H,function(E,D){rt(T,D,E)}),m.l&&xe({},function(E,D){rt(T,D,E)})}function Md(m,T,E){E=Math.min(m.i.length,E);const D=m.l?f(m.l.Ka,m.l,m):null;e:{var Y=m.i;let je=-1;for(;;){const kt=["count="+E];je==-1?E>0?(je=Y[0].g,kt.push("ofs="+je)):je=0:kt.push("ofs="+je);let tt=!0;for(let _t=0;_t<E;_t++){var Z=Y[_t].g;const li=Y[_t].map;if(Z-=je,Z<0)je=Math.max(0,Y[_t].g-100),tt=!1;else try{Z="req"+Z+"_"||"";try{var fe=li instanceof Map?li:Object.entries(li);for(const[or,Vi]of fe){let Pi=Vi;u(Vi)&&(Pi=ys(Vi)),kt.push(Z+or+"="+encodeURIComponent(Pi))}}catch(or){throw kt.push(Z+"type="+encodeURIComponent("_badmap")),or}}catch{D&&D(li)}}if(tt){fe=kt.join("&");break e}}fe=void 0}return m=m.i.splice(0,E),T.G=m,fe}function Od(m){if(!m.g&&!m.v){m.Y=1;var T=m.Da;te||R(),J||(te(),J=!0),S.add(T,m),m.A=0}}function Ka(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ki(f(m.Da,m),Ud(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Ld(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ki(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),Ss(this),Ld(this))};function ou(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Ld(m){m.g=new Ri(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var T=qt(m.na);rt(T,"RID","rpc"),rt(T,"SID",m.M),rt(T,"AID",m.K),rt(T,"CI",m.F?"0":"1"),!m.F&&m.ia&&rt(T,"TO",m.ia),rt(T,"TYPE","xmlhttp"),$a(m,T),m.u&&m.o&&qa(T,m.u,m.o),m.O&&(m.g.H=m.O);var E=m.g;m=m.ba,E.M=1,E.A=za(qt(T)),E.u=null,E.R=!0,Xo(E,m)}n.Va=function(){this.C!=null&&(this.C=null,Ss(this),Ka(this),zt(19))};function sl(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function jd(m,T){var E=null;if(m.g==T){sl(m),ou(m),m.g=null;var D=2}else if(er(m.h,T))E=T.G,Xc(m.h,T),D=1;else return;if(m.I!=0){if(T.o)if(D==1){E=T.u?T.u.length:0,T=Date.now()-T.F;var Y=m.D;D=Qo(),Wt(D,new $i(D,E)),sr(m)}else Od(m);else if(Y=T.m,Y==3||Y==0&&T.X>0||!(D==1&&rl(m,T)||D==2&&Ka(m)))switch(E&&E.length>0&&(T=m.h,T.i=T.i.concat(E)),Y){case 1:ar(m,5);break;case 4:ar(m,10);break;case 3:ar(m,6);break;default:ar(m,2)}}}function Ud(m,T){let E=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(E*=2),E*T}function ar(m,T){if(m.j.info("Error code "+T),T==2){var E=f(m.bb,m),D=m.Ua;const Y=!D;D=new $n(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||rn(D,"https"),za(D),Y?Ni(D.toString(),E):nu(D.toString(),E)}else zt(2);m.I=0,m.l&&m.l.pa(T),zd(m),il(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function zd(m){if(m.I=0,m.ja=[],m.l){const T=Wc(m.h);(T.length!=0||m.i.length!=0)&&(N(m.ja,T),N(m.ja,m.i),m.h.i.length=0,x(m.i),m.i.length=0),m.l.oa()}}function Bd(m,T,E){var D=E instanceof $n?qt(E):new $n(E);if(D.g!="")T&&(D.g=T+"."+D.g),vs(D,D.u);else{var Y=l.location;D=Y.protocol,T=T?T+"."+Y.hostname:Y.hostname,Y=+Y.port;const Z=new $n(null);D&&rn(Z,D),T&&(Z.g=T),Y&&vs(Z,Y),E&&(Z.h=E),D=Z}return E=m.G,T=m.wa,E&&T&&rt(D,E,T),rt(D,"VER",m.ka),$a(m,D),D}function Fd(m,T,E){if(T&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Aa&&!m.ma?new ct(new nr({ab:E})):new ct(m.ma),T.Fa(m.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qd(){}n=qd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function As(){}As.prototype.g=function(m,T){return new In(m,T)};function In(m,T){Ut.call(this),this.g=new xs(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(m?m["X-WebChannel-Client-Profile"]=T.sa:m={"X-WebChannel-Client-Profile":T.sa}),this.g.U=m,(m=T&&T.Qb)&&!j(m)&&(this.g.u=m),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!j(T)&&(this.g.G=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new Vr(this)}v(In,Ut),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){su(this.g)},In.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var E={};E.__data__=m,m=E}else this.v&&(E={},E.__data__=ys(m),m=E);T.i.push(new Ft(T.Ya++,m)),T.I==3&&sr(T)},In.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,In.Z.N.call(this)};function Hd(m){on.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const E in T){m=E;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}v(Hd,on);function Gd(){ri.call(this),this.status=1}v(Gd,ri);function Vr(m){this.g=m}v(Vr,qd),Vr.prototype.ra=function(){Wt(this.g,"a")},Vr.prototype.qa=function(m){Wt(this.g,new Hd(m))},Vr.prototype.pa=function(m){Wt(this.g,new Gd)},Vr.prototype.oa=function(){Wt(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,iR=function(){return new As},nR=function(){return Qo()},tR=Dt,fv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,_m=ja,Gc.COMPLETE="complete",eR=Gc,Ed.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",Ut.prototype.listen=Ut.prototype.J,th=Ed,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,J2=ct}).apply(typeof Jf<"u"?Jf:typeof self<"u"?self:typeof window<"u"?window:{});const Ox="@firebase/firestore",Lx="4.9.2";class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let Dc="12.3.0";const Oo=new y_("@firebase/firestore");function Fl(){return Oo.logLevel}function ue(n,...e){if(Oo.logLevel<=$e.DEBUG){const t=e.map(R_);Oo.debug(`Firestore (${Dc}): ${n}`,...t)}}function Ot(n,...e){if(Oo.logLevel<=$e.ERROR){const t=e.map(R_);Oo.error(`Firestore (${Dc}): ${n}`,...t)}}function Nh(n,...e){if(Oo.logLevel<=$e.WARN){const t=e.map(R_);Oo.warn(`Firestore (${Dc}): ${n}`,...t)}}function R_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function _e(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,rR(n,i,t)}function rR(n,e,t){let i=`FIRESTORE (${Dc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ot(i),new Error(i)}function Ee(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||rR(e,s,i)}function Te(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends hs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class is{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class VL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vn.UNAUTHENTICATED)))}shutdown(){}}class ML{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new is;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new is,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new is)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ee(typeof i.accessToken=="string",31837,{l:i}),new VL(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class OL{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LL{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new OL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);const i=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function UL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class C_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=UL(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%62))}return i}}function Pe(n,e){return n<e?-1:n>e?1:0}function mv(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return w0(s)===w0(o)?Pe(s,o):w0(s)?1:-1}return Pe(n.length,e.length)}const zL=55296,BL=57343;function w0(n){const e=n.charCodeAt(0);return e>=zL&&e<=BL}function cc(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function sR(n){return n+"\0"}const Ux="__name__";class dr{constructor(e,t,i){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&_e(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const o=dr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Pe(e.length,t.length)}static compareSegments(e,t){const i=dr.isNumericId(e),s=dr.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?dr.extractNumericId(e).compare(dr.extractNumericId(t)):mv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ma.fromString(e.substring(4,e.length-2))}}class it extends dr{construct(e,t,i){return new it(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new it(t)}static emptyPath(){return new it([])}}const FL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends dr{construct(e,t,i){return new Et(e,t,i)}static isValidIdentifier(e){return FL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ux}static keyField(){return new Et([Ux])}static fromServerFormat(e){const t=[];let i="",s=0;const o=()=>{if(i.length===0)throw new de(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new de(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new de(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(i+=u,s++):(o(),s++)}if(o(),l)throw new de(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(t)}static emptyPath(){return new Et([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(it.fromString(e))}static fromName(e){return new ye(it.fromString(e).popFirst(5))}static empty(){return new ye(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new it(e.slice()))}}function aR(n,e,t){if(!t)throw new de(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qL(n,e,t,i){if(e===!0&&i===!0)throw new de(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zx(n){if(!ye.isDocumentKey(n))throw new de(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Bx(n){if(ye.isDocumentKey(n))throw new de(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ip(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function Fi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ip(n);throw new de(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ld(n,e){if(!oR(n))throw new de(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new de(re.INVALID_ARGUMENT,t);return!0}const Fx=-62135596800,qx=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*qx);return new Ze(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Fx)throw new de(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qx}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ld(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Xt("string",Ze._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Ze(0,0))}static max(){return new Ce(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const uc=-1;class Ym{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function pv(n){return n.fields.find((e=>e.kind===2))}function po(n){return n.fields.filter((e=>e.kind!==2))}Ym.UNKNOWN_ID=-1;class bm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Dh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Dh(0,ii.min())}}function lR(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Ce.fromTimestamp(i===1e9?new Ze(t+1,0):new Ze(t,i));return new ii(s,ye.empty(),e)}function cR(n){return new ii(n.readTime,n.key,uc)}class ii{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ii(Ce.min(),ye.empty(),uc)}static max(){return new ii(Ce.max(),ye.empty(),uc)}}function N_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}const uR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ca(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==uR)throw n;ue("LocalStore","Unexpectedly lost primary lease")}class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,i)=>{t(e)}))}static reject(e){return new $(((t,i)=>{i(e)}))}static waitFor(e){return new $(((t,i)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&t()}),(d=>i(d)))})),l=!0,o===s&&t()}))}static or(e){let t=$.resolve(!1);for(const i of e)t=t.next((s=>s?$.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,o)=>{i.push(t.call(this,s,o))})),this.waitFor(i)}static mapArray(e,t){return new $(((i,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{l[f]=g,++u,u===o&&i(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new $(((i,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):i()};o()}))}}const ei="SimpleDb";class Rp{static open(e,t,i,s){try{return new Rp(t,e.transaction(s,i))}catch(o){throw new uh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new is,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new uh(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=D_(i.target.error);this.S.reject(new uh(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ue(ei,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new GL(t)}}class pa{static delete(e){return ue(ei,"Removing database:",e),vo(i2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!u2())return!1;if(pa.F())return!0;const e=en(),t=pa.M(e),i=0<t&&t<10,s=dR(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,pa.M(en())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ue(ei,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const l=o.target.result;t(l)},s.onblocked=()=>{i(new uh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const l=o.target.error;l.name==="VersionError"?i(new de(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new de(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new uh(e,l))},s.onupgradeneeded=o=>{ue(ei,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,s.transaction,o.oldVersion,this.version).next((()=>{ue(ei,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const u=Rp.open(this.db,e,o?"readonly":"readwrite",i),d=s(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),$.reject(f)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&l<3;if(ue(ei,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function dR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class HL{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return vo(this.U.delete())}}class uh extends de{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Na(n){return n.name==="IndexedDbTransactionError"}class GL{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ue(ei,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ue(ei,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),vo(i)}add(e){return ue(ei,"ADD",this.store.name,e,e),vo(this.store.add(e))}get(e){return vo(this.store.get(e)).next((t=>(t===void 0&&(t=null),ue(ei,"GET",this.store.name,e,t),t)))}delete(e){return ue(ei,"DELETE",this.store.name,e),vo(this.store.delete(e))}count(){return ue(ei,"COUNT",this.store.name),vo(this.store.count())}J(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new $(((l,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{l(d.target.result)}}))}{const o=this.cursor(i),l=[];return this.H(o,((u,d)=>{l.push(d)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new $(((s,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{s(l.target.result)}}))}Z(e,t){ue(ei,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,((o,l,u)=>u.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}te(e){const t=this.cursor({});return new $(((i,s)=>{t.onerror=o=>{const l=D_(o.target.error);s(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((u=>{u?l.continue():i()})):i()}}))}H(e,t){const i=[];return new $(((s,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void s();const d=new HL(u),f=t(u.primaryKey,u.value,d);if(f instanceof $){const g=f.catch((v=>(d.done(),$.reject(v))));i.push(g)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>$.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vo(n){return new $(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=D_(i.target.error);t(s)}}))}let Hx=!1;function D_(n){const e=pa.M(en());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hx||(Hx=!0,setTimeout((()=>{throw i}),0)),i}}return n}const hh="IndexBackfiller";class $L{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ue(hh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ue(hh,`Documents written: ${t}`)}catch(t){Na(t)?ue(hh,"Ignoring IndexedDB error during index backfill: ",t):await Ca(t)}await this.re(6e4)}))}}class KL{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,o=!0;return $.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return ue(hh,`Processing collection: ${l}`),this.oe(e,l,s).next((u=>{s-=u,i.add(l)}));o=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(s,o))).next((u=>(ue(hh,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,o)=>{const l=cR(o);N_(l,i)>0&&(i=l)})),new ii(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Un.ce=-1;const So=-1;function Cp(n){return n==null}function kh(n){return n===0&&1/n==-1/0}function fR(n){return typeof n=="number"&&Number.isInteger(n)&&!kh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Qm="";function En(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gx(e)),e=YL(n.get(t),e);return Gx(e)}function YL(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Qm:t+="";break;default:t+=o}}return t}function Gx(n){return n+Qm+""}function pr(n){const e=n.length;if(Ee(e>=2,64408,{path:n}),e===2)return Ee(n.charAt(0)===Qm&&n.charAt(1)==="",56145,{path:n}),it.emptyPath();const t=e-2,i=[];let s="";for(let o=0;o<e;){const l=n.indexOf(Qm,o);switch((l<0||l>t)&&_e(50515,{path:n}),n.charAt(l+1)){case"":const u=n.substring(o,l);let d;s.length===0?d=u:(s+=u,d=s,s=""),i.push(d);break;case"":s+=n.substring(o,l),s+="\0";break;case"":s+=n.substring(o,l+1);break;default:_e(61167,{path:n})}o=l+2}return new it(i)}const go="remoteDocuments",cd="owner",Ol="owner",Vh="mutationQueues",QL="userId",Ui="mutations",$x="batchId",wo="userMutationsIndex",Kx=["userId","batchId"];function Tm(n,e){return[n,En(e)]}function mR(n,e,t){return[n,En(e),t]}const XL={},hc="documentMutations",Xm="remoteDocumentsV14",WL=["prefixPath","collectionGroup","readTime","documentId"],wm="documentKeyIndex",ZL=["prefixPath","collectionGroup","documentId"],pR="collectionGroupIndex",JL=["collectionGroup","readTime","prefixPath","documentId"],Ph="remoteDocumentGlobal",gv="remoteDocumentGlobalKey",dc="targets",gR="queryTargetsIndex",e9=["canonicalId","targetId"],fc="targetDocuments",t9=["targetId","path"],k_="documentTargetsIndex",n9=["path","targetId"],Wm="targetGlobalKey",Ao="targetGlobal",Mh="collectionParents",i9=["collectionId","parent"],mc="clientMetadata",r9="clientId",Np="bundles",s9="bundleId",Dp="namedQueries",a9="name",V_="indexConfiguration",o9="indexId",yv="collectionGroupIndex",l9="collectionGroup",dh="indexState",c9=["indexId","uid"],yR="sequenceNumberIndex",u9=["uid","sequenceNumber"],fh="indexEntries",h9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vR="documentKeyIndex",d9=["indexId","uid","orderedDocumentKey"],kp="documentOverlays",f9=["userId","collectionPath","documentId"],vv="collectionPathOverlayIndex",m9=["userId","collectionPath","largestBatchId"],_R="collectionGroupOverlayIndex",p9=["userId","collectionGroup","largestBatchId"],P_="globals",g9="name",bR=[Vh,Ui,hc,go,dc,cd,Ao,fc,mc,Ph,Mh,Np,Dp],y9=[...bR,kp],TR=[Vh,Ui,hc,Xm,dc,cd,Ao,fc,mc,Ph,Mh,Np,Dp,kp],wR=TR,M_=[...wR,V_,dh,fh],v9=M_,ER=[...M_,P_],_9=ER;class _v extends hR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function tn(n,e){const t=Te(n);return pa.O(t.le,e)}function Yx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Da(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new em(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new em(this.root,e,this.comparator,!1)}getReverseIterator(){return new em(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new em(this.root,e,this.comparator,!0)}}class em{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??mn.RED,this.left=s??mn.EMPTY,this.right=o??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new mn(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return mn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,i,s,o){return this}insert(e,t,i){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class lt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qx(this.data.getIterator())}getIteratorFrom(e){return new Qx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new lt(this.comparator);return t.data=e,t}}class Qx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ll(n){return n.hasNext()?n.getNext():void 0}class zn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new zn([])}unionWith(e){let t=new lt(Et.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cc(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class SR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new SR("Invalid base64 string: "+o):o}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const b9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(n){if(Ee(!!n,39018),typeof n=="string"){let e=0;const t=b9.exec(n);if(Ee(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ls(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}const AR="server_timestamp",IR="__type__",RR="__previous_value__",CR="__local_write_time__";function O_(n){return(n?.mapValue?.fields||{})[IR]?.stringValue===AR}function Vp(n){const e=n.mapValue.fields[RR];return O_(e)?Vp(e):e}function Oh(n){const e=os(n.mapValue.fields[CR].timestampValue);return new Ze(e.seconds,e.nanos)}class T9{constructor(e,t,i,s,o,l,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const Zm="(default)";class Lo{constructor(e,t){this.projectId=e,this.database=t||Zm}static empty(){return new Lo("","")}get isDefaultDatabase(){return this.database===Zm}isEqual(e){return e instanceof Lo&&e.projectId===this.projectId&&e.database===this.database}}const L_="__type__",NR="__max__",ua={mapValue:{fields:{__type__:{stringValue:NR}}}},j_="__vector__",pc="value",Em={nullValue:"NULL_VALUE"};function va(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?O_(n)?4:DR(n)?9007199254740991:Pp(n)?10:11:_e(28295,{value:n})}function Ar(n,e){if(n===e)return!0;const t=va(n);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Oh(n).isEqual(Oh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=os(s.timestampValue),u=os(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return ls(s.bytesValue).isEqual(ls(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return Tt(s.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(s.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Tt(s.integerValue)===Tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Tt(s.doubleValue),u=Tt(o.doubleValue);return l===u?kh(l)===kh(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return cc(n.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Yx(l)!==Yx(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Ar(l[d],u[d])))return!1;return!0})(n,e);default:return _e(52216,{left:n})}}function Lh(n,e){return(n.values||[]).find((t=>Ar(t,e)))!==void 0}function _a(n,e){if(n===e)return 0;const t=va(n),i=va(e);if(t!==i)return Pe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Tt(o.integerValue||o.doubleValue),d=Tt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return Xx(n.timestampValue,e.timestampValue);case 4:return Xx(Oh(n),Oh(e));case 5:return mv(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=ls(o),d=ls(l);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Pe(u[f],d[f]);if(g!==0)return g}return Pe(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Pe(Tt(o.latitude),Tt(l.latitude));return u!==0?u:Pe(Tt(o.longitude),Tt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Wx(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const u=o.fields||{},d=l.fields||{},f=u[pc]?.arrayValue,g=d[pc]?.arrayValue,v=Pe(f?.values?.length||0,g?.values?.length||0);return v!==0?v:Wx(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===ua.mapValue&&l===ua.mapValue)return 0;if(o===ua.mapValue)return 1;if(l===ua.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=l.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const _=mv(d[v],g[v]);if(_!==0)return _;const x=_a(u[d[v]],f[g[v]]);if(x!==0)return x}return Pe(d.length,g.length)})(n.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function Xx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=os(n),i=os(e),s=Pe(t.seconds,i.seconds);return s!==0?s:Pe(t.nanos,i.nanos)}function Wx(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const o=_a(t[s],i[s]);if(o)return o}return Pe(t.length,i.length)}function gc(n){return bv(n)}function bv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=os(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ls(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const o of t.values||[])s?s=!1:i+=",",i+=bv(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${bv(t.fields[l])}`;return s+"}"})(n.mapValue):_e(61005,{value:n})}function xm(n){switch(va(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vp(n);return e?16+xm(e):16;case 5:return 2*n.stringValue.length;case 6:return ls(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+xm(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Da(i.fields,((o,l)=>{s+=o.length+xm(l)})),s})(n.mapValue);default:throw _e(13486,{value:n})}}function jh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Tv(n){return!!n&&"integerValue"in n}function Uh(n){return!!n&&"arrayValue"in n}function Zx(n){return!!n&&"nullValue"in n}function Jx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sm(n){return!!n&&"mapValue"in n}function Pp(n){return(n?.mapValue?.fields||{})[L_]?.stringValue===j_}function mh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Da(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=mh(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mh(n.arrayValue.values[t]);return e}return{...n}}function DR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===NR}const kR={mapValue:{fields:{[L_]:{stringValue:j_},[pc]:{arrayValue:{}}}}};function w9(n){return"nullValue"in n?Em:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?jh(Lo.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Pp(n)?kR:{mapValue:{}}:_e(35942,{value:n})}function E9(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?jh(Lo.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?kR:"mapValue"in n?Pp(n)?{mapValue:{}}:ua:_e(61959,{value:n})}function eS(n,e){const t=_a(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function tS(n,e){const t=_a(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mh(t)}setAll(e){let t=Et.emptyPath(),i={},s=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,i,s),i={},s=[],t=u.popLast()}l?i[u.lastSegment()]=mh(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){const t=this.field(e.popLast());Sm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Sm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Da(t,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new bn(mh(this.value))}}function VR(n){const e=[];return Da(n.fields,((t,i)=>{const s=new Et([t]);if(Sm(i)){const o=VR(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new zn(e)}class Nt{constructor(e,t,i,s,o,l,u){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Nt(e,0,Ce.min(),Ce.min(),Ce.min(),bn.empty(),0)}static newFoundDocument(e,t,i,s){return new Nt(e,1,t,Ce.min(),i,s,0)}static newNoDocument(e,t){return new Nt(e,2,t,Ce.min(),Ce.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,Ce.min(),Ce.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yc{constructor(e,t){this.position=e,this.inclusive=t}}function nS(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?i=ye.comparator(ye.fromName(l.referenceValue),t.key):i=_a(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function iS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ar(n.position[t],e.position[t]))return!1;return!0}class zh{constructor(e,t="asc"){this.field=e,this.dir=t}}function x9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class PR{}class Ke extends PR{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new S9(e,t,i):t==="array-contains"?new R9(e,i):t==="in"?new zR(e,i):t==="not-in"?new C9(e,i):t==="array-contains-any"?new N9(e,i):new Ke(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new A9(e,i):new I9(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_a(t,this.value)):t!==null&&va(this.value)===va(t)&&this.matchesComparison(_a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ot extends PR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ot(e,t)}matches(e){return vc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vc(n){return n.op==="and"}function wv(n){return n.op==="or"}function U_(n){return MR(n)&&vc(n)}function MR(n){for(const e of n.filters)if(e instanceof ot)return!1;return!0}function Ev(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+gc(n.value);if(U_(n))return n.filters.map((e=>Ev(e))).join(",");{const e=n.filters.map((t=>Ev(t))).join(",");return`${n.op}(${e})`}}function OR(n,e){return n instanceof Ke?(function(i,s){return s instanceof Ke&&i.op===s.op&&i.field.isEqual(s.field)&&Ar(i.value,s.value)})(n,e):n instanceof ot?(function(i,s){return s instanceof ot&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,l,u)=>o&&OR(l,s.filters[u])),!0):!1})(n,e):void _e(19439)}function LR(n,e){const t=n.filters.concat(e);return ot.create(t,n.op)}function jR(n){return n instanceof Ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${gc(t.value)}`})(n):n instanceof ot?(function(t){return t.op.toString()+" {"+t.getFilters().map(jR).join(" ,")+"}"})(n):"Filter"}class S9 extends Ke{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class A9 extends Ke{constructor(e,t){super(e,"in",t),this.keys=UR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class I9 extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=UR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function UR(n,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class R9 extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uh(t)&&Lh(t.arrayValue,this.value)}}class zR extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lh(this.value.arrayValue,t)}}class C9 extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lh(this.value.arrayValue,t)}}class N9 extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Lh(this.value.arrayValue,i)))}}class D9{constructor(e,t=null,i=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function xv(n,e=null,t=[],i=[],s=null,o=null,l=null){return new D9(n,e,t,i,s,o,l)}function jo(n){const e=Te(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Ev(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Cp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>gc(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>gc(i))).join(",")),e.Te=t}return e.Te}function ud(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!x9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!OR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iS(n.startAt,e.startAt)&&iS(n.endAt,e.endAt)}function Jm(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ep(n,e){return n.filters.filter((t=>t instanceof Ke&&t.field.isEqual(e)))}function rS(n,e,t){let i=Em,s=!0;for(const o of ep(n,e)){let l=Em,u=!0;switch(o.op){case"<":case"<=":l=w9(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,u=!1;break;case"!=":case"not-in":l=Em}eS({value:i,inclusive:s},{value:l,inclusive:u})<0&&(i=l,s=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];eS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}function sS(n,e,t){let i=ua,s=!0;for(const o of ep(n,e)){let l=ua,u=!0;switch(o.op){case">=":case">":l=E9(o.value),u=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,u=!1;break;case"!=":case"not-in":l=ua}tS({value:i,inclusive:s},{value:l,inclusive:u})>0&&(i=l,s=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];tS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}class kc{constructor(e,t=null,i=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function BR(n,e,t,i,s,o,l,u){return new kc(n,e,t,i,s,o,l,u)}function Mp(n){return new kc(n)}function aS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function FR(n){return n.collectionGroup!==null}function ph(n){const e=Te(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new lt(Et.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new zh(o,i))})),t.has(Et.keyField().canonicalString())||e.Ie.push(new zh(Et.keyField(),i))}return e.Ie}function ni(n){const e=Te(n);return e.Ee||(e.Ee=k9(e,ph(n))),e.Ee}function k9(n,e){if(n.limitType==="F")return xv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new zh(s.field,o)}));const t=n.endAt?new yc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new yc(n.startAt.position,n.startAt.inclusive):null;return xv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Sv(n,e){const t=n.filters.concat([e]);return new kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tp(n,e,t){return new kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Op(n,e){return ud(ni(n),ni(e))&&n.limitType===e.limitType}function qR(n){return`${jo(ni(n))}|lt:${n.limitType}`}function ql(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>jR(s))).join(", ")}]`),Cp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>gc(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>gc(s))).join(",")),`Target(${i})`})(ni(n))}; limitType=${n.limitType})`}function hd(n,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ye.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,s){for(const o of ph(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(l,u,d){const f=nS(l,u,d);return l.inclusive?f<=0:f<0})(i.startAt,ph(i),s)||i.endAt&&!(function(l,u,d){const f=nS(l,u,d);return l.inclusive?f>=0:f>0})(i.endAt,ph(i),s))})(n,e)}function HR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GR(n){return(e,t)=>{let i=!1;for(const s of ph(n)){const o=V9(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function V9(n,e,t){const i=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(o,l,u){const d=l.data.field(o),f=u.data.field(o);return d!==null&&f!==null?_a(d,f):_e(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:n.dir})}}class fs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,((t,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return xR(this.inner)}size(){return this.innerSize}}const P9=new pt(ye.comparator);function ti(){return P9}const $R=new pt(ye.comparator);function nh(...n){let e=$R;for(const t of n)e=e.insert(t.key,t);return e}function KR(n){let e=$R;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function gr(){return gh()}function YR(){return gh()}function gh(){return new fs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const M9=new pt(ye.comparator),O9=new lt(ye.comparator);function Be(...n){let e=O9;for(const t of n)e=e.add(t);return e}const L9=new lt(Pe);function z_(){return L9}function B_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kh(e)?"-0":e}}function QR(n){return{integerValue:""+n}}function j9(n,e){return fR(e)?QR(e):B_(n,e)}class Lp{constructor(){this._=void 0}}function U9(n,e,t){return n instanceof Bh?(function(s,o){const l={fields:{[IR]:{stringValue:AR},[CR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&O_(o)&&(o=Vp(o)),o&&(l.fields[RR]=o),{mapValue:l}})(t,e):n instanceof _c?WR(n,e):n instanceof bc?ZR(n,e):(function(s,o){const l=XR(s,o),u=oS(l)+oS(s.Ae);return Tv(l)&&Tv(s.Ae)?QR(u):B_(s.serializer,u)})(n,e)}function z9(n,e,t){return n instanceof _c?WR(n,e):n instanceof bc?ZR(n,e):t}function XR(n,e){return n instanceof Fh?(function(i){return Tv(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Bh extends Lp{}class _c extends Lp{constructor(e){super(),this.elements=e}}function WR(n,e){const t=JR(e);for(const i of n.elements)t.some((s=>Ar(s,i)))||t.push(i);return{arrayValue:{values:t}}}class bc extends Lp{constructor(e){super(),this.elements=e}}function ZR(n,e){let t=JR(e);for(const i of n.elements)t=t.filter((s=>!Ar(s,i)));return{arrayValue:{values:t}}}class Fh extends Lp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function oS(n){return Tt(n.integerValue||n.doubleValue)}function JR(n){return Uh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class B9{constructor(e,t){this.field=e,this.transform=t}}function F9(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof _c&&s instanceof _c||i instanceof bc&&s instanceof bc?cc(i.elements,s.elements,Ar):i instanceof Fh&&s instanceof Fh?Ar(i.Ae,s.Ae):i instanceof Bh&&s instanceof Bh})(n.transform,e.transform)}class q9{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Am(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class jp{}function eC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Up(n.key,Tn.none()):new Vc(n.key,n.data,Tn.none());{const t=n.data,i=bn.empty();let s=new lt(Et.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new ms(n.key,i,new zn(s.toArray()),Tn.none())}}function H9(n,e,t){n instanceof Vc?(function(s,o,l){const u=s.value.clone(),d=cS(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof ms?(function(s,o,l){if(!Am(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=cS(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(tC(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function yh(n,e,t,i){return n instanceof Vc?(function(o,l,u,d){if(!Am(o.precondition,l))return u;const f=o.value.clone(),g=uS(o.fieldTransforms,d,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof ms?(function(o,l,u,d){if(!Am(o.precondition,l))return u;const f=uS(o.fieldTransforms,d,l),g=l.data;return g.setAll(tC(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(o,l,u){return Am(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function G9(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=XR(i.transform,s||null);o!=null&&(t===null&&(t=bn.empty()),t.set(i.field,o))}return t||null}function lS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&cc(i,s,((o,l)=>F9(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Vc extends jp{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ms extends jp{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function tC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function cS(n,e,t){const i=new Map;Ee(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);i.set(o.field,z9(l,u,t[s]))}return i}function uS(n,e,t){const i=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);i.set(s.field,U9(o,l,e))}return i}class Up extends jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nC extends jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class F_{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&H9(o,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=yh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=yh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=YR();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=eC(l,u);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Ce.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&cc(this.mutations,e.mutations,((t,i)=>lS(t,i)))&&cc(this.baseMutations,e.baseMutations,((t,i)=>lS(t,i)))}}class q_{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Ee(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return M9})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new q_(e,t,i,s)}}class H_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class $9{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yt,We;function K9(n){switch(n){case re.OK:return _e(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function iC(n){if(n===void 0)return Ot("GRPC error has no .code"),re.UNKNOWN;switch(n){case Yt.OK:return re.OK;case Yt.CANCELLED:return re.CANCELLED;case Yt.UNKNOWN:return re.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return re.INTERNAL;case Yt.UNAVAILABLE:return re.UNAVAILABLE;case Yt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Yt.NOT_FOUND:return re.NOT_FOUND;case Yt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Yt.ABORTED:return re.ABORTED;case Yt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Yt.DATA_LOSS:return re.DATA_LOSS;default:return _e(39323,{code:n})}}(We=Yt||(Yt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";function Y9(){return new TextEncoder}const Q9=new ma([4294967295,4294967295],0);function hS(n){const e=Y9().encode(n),t=new Z2;return t.update(e),new Uint8Array(t.digest())}function dS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ma([t,i],0),new ma([s,o],0)]}class G_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ih(`Invalid padding: ${t}`);if(i<0)throw new ih(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ih(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ih(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ma.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(ma.fromNumber(i)));return s.compare(Q9)===1&&(s=new ma([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=hS(e),[i,s]=dS(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new G_(o,s,t);return i.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=hS(e),[i,s]=dS(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ih extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dd{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dd(Ce.min(),s,new pt(Pe),ti(),Be())}}class fd{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new fd(i,t,Be(),Be(),Be())}}class Im{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class rC{constructor(e,t){this.targetId=e,this.Ce=t}}class sC{constructor(e,t,i=jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class fS{constructor(){this.ve=0,this.Fe=mS(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:_e(38017,{changeType:o})}})),new fd(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=mS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class X9{constructor(e){this.Ge=e,this.ze=new Map,this.je=ti(),this.Je=tm(),this.He=tm(),this.Ye=new pt(Pe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Jm(o))if(i===0){const l=new ye(o.path);this.et(t,l,Nt.newNoDocument(l,Ce.min()))}else Ee(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=ls(i).toUint8Array()}catch(d){if(d instanceof SR)return Nh("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new G_(l,s,o)}catch(d){return Nh(d instanceof ih?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&Jm(u.target)){const d=new ye(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Nt.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let i=Be();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new dd(e,t,this.Ye,this.je,i);return this.je=ti(),this.Je=tm(),this.He=tm(),this.Ye=new pt(Pe),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new fS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new lt(Pe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new lt(Pe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function tm(){return new pt(ye.comparator)}function mS(){return new pt(ye.comparator)}const W9={asc:"ASCENDING",desc:"DESCENDING"},Z9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J9={and:"AND",or:"OR"};class ej{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Av(n,e){return n.useProto3Json||Cp(e)?e:{value:e}}function Tc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tj(n,e){return Tc(n,e.toTimestamp())}function Nn(n){return Ee(!!n,49232),Ce.fromTimestamp((function(t){const i=os(t);return new Ze(i.seconds,i.nanos)})(n))}function $_(n,e){return Iv(n,e).canonicalString()}function Iv(n,e){const t=(function(s){return new it(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function oC(n){const e=it.fromString(n);return Ee(gC(e),10190,{key:e.toString()}),e}function np(n,e){return $_(n.databaseId,e.path)}function Io(n,e){const t=oC(e);if(t.get(1)!==n.databaseId.projectId)throw new de(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(uC(t))}function lC(n,e){return $_(n.databaseId,e)}function cC(n){const e=oC(n);return e.length===4?it.emptyPath():uC(e)}function Rv(n){return new it(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uC(n){return Ee(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function pS(n,e,t){return{name:np(n,e),fields:t.value.mapValue.fields}}function nj(n,e,t){const i=Io(n,e.name),s=Nn(e.updateTime),o=e.createTime?Nn(e.createTime):Ce.min(),l=new bn({mapValue:{fields:e.fields}}),u=Nt.newFoundDocument(i,s,o,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function ij(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:_e(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Ee(g===void 0||typeof g=="string",58123),jt.fromBase64String(g||"")):(Ee(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),jt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(f){const g=f.code===void 0?re.UNKNOWN:iC(f.code);return new de(g,f.message||"")})(l);t=new sC(i,s,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Io(n,i.document.name),o=Nn(i.document.updateTime),l=i.document.createTime?Nn(i.document.createTime):Ce.min(),u=new bn({mapValue:{fields:i.document.fields}}),d=Nt.newFoundDocument(s,o,l,u),f=i.targetIds||[],g=i.removedTargetIds||[];t=new Im(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Io(n,i.document),o=i.readTime?Nn(i.readTime):Ce.min(),l=Nt.newNoDocument(s,o),u=i.removedTargetIds||[];t=new Im([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Io(n,i.document),o=i.removedTargetIds||[];t=new Im([],o,s,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new $9(s,o),u=i.targetId;t=new rC(u,l)}}return t}function ip(n,e){let t;if(e instanceof Vc)t={update:pS(n,e.key,e.value)};else if(e instanceof Up)t={delete:np(n,e.key)};else if(e instanceof ms)t={update:pS(n,e.key,e.data),updateMask:cj(e.fieldMask)};else{if(!(e instanceof nC))return _e(16599,{Vt:e.type});t={verify:np(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const u=l.transform;if(u instanceof Bh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof _c)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof bc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Fh)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw _e(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:tj(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:_e(27497)})(n,e.precondition)),t}function Cv(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Tn.updateTime(Nn(o.updateTime)):o.exists!==void 0?Tn.exists(o.exists):Tn.none()})(e.currentDocument):Tn.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(l,u){let d=null;if("setToServerValue"in u)Ee(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new Bh;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];d=new _c(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];d=new bc(g)}else"increment"in u?d=new Fh(l,u.increment):_e(16584,{proto:u});const f=Et.fromServerFormat(u.fieldPath);return new B9(f,d)})(n,s))):[];if(e.update){e.update.name;const s=Io(n,e.update.name),o=new bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(d){const f=d.fieldPaths||[];return new zn(f.map((g=>Et.fromServerFormat(g))))})(e.updateMask);return new ms(s,o,l,t,i)}return new Vc(s,o,t,i)}if(e.delete){const s=Io(n,e.delete);return new Up(s,t)}if(e.verify){const s=Io(n,e.verify);return new nC(s,t)}return _e(1463,{proto:e})}function rj(n,e){return n&&n.length>0?(Ee(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?Nn(s.updateTime):Nn(o);return l.isEqual(Ce.min())&&(l=Nn(o)),new q9(l,s.transformResults||[])})(t,e)))):[]}function hC(n,e){return{documents:[lC(n,e.path)]}}function dC(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=lC(n,s);const o=(function(f){if(f.length!==0)return pC(ot.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:Hl(_.field),direction:aj(_.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Av(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function fC(n){let e=cC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Ee(i===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(v){const _=mC(v);return _ instanceof ot&&U_(_)?_.getFilters():[_]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((_=>(function(N){return new zh(Gl(N.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(_)))})(t.orderBy));let u=null;t.limit&&(u=(function(v){let _;return _=typeof v=="object"?v.value:v,Cp(_)?null:_})(t.limit));let d=null;t.startAt&&(d=(function(v){const _=!!v.before,x=v.values||[];return new yc(x,_)})(t.startAt));let f=null;return t.endAt&&(f=(function(v){const _=!v.before,x=v.values||[];return new yc(x,_)})(t.endAt)),BR(e,s,l,o,u,"F",d,f)}function sj(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Gl(t.unaryFilter.field);return Ke.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Gl(t.unaryFilter.field);return Ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gl(t.unaryFilter.field);return Ke.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Gl(t.unaryFilter.field);return Ke.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ke.create(Gl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ot.create(t.compositeFilter.filters.map((i=>mC(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(n):_e(30097,{filter:n})}function aj(n){return W9[n]}function oj(n){return Z9[n]}function lj(n){return J9[n]}function Hl(n){return{fieldPath:n.canonicalString()}}function Gl(n){return Et.fromServerFormat(n.fieldPath)}function pC(n){return n instanceof Ke?(function(t){if(t.op==="=="){if(Jx(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NAN"}};if(Zx(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jx(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NAN"}};if(Zx(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(t.field),op:oj(t.op),value:t.value}}})(n):n instanceof ot?(function(t){const i=t.getFilters().map((s=>pC(s)));return i.length===1?i[0]:{compositeFilter:{op:lj(t.op),filters:i}}})(n):_e(54877,{filter:n})}function cj(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function gC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class es{constructor(e,t,i,s,o=Ce.min(),l=Ce.min(),u=jt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yC{constructor(e){this.yt=e}}function uj(n,e){let t;if(e.document)t=nj(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ye.fromSegments(e.noDocument.path),s=zo(e.noDocument.readTime);t=Nt.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e(56709);{const i=ye.fromSegments(e.unknownDocument.path),s=zo(e.unknownDocument.version);t=Nt.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const o=new Ze(s[0],s[1]);return Ce.fromTimestamp(o)})(e.readTime)),t}function gS(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,l){return{name:np(o,l.key),fields:l.data.value.mapValue.fields,updateTime:Tc(o,l.version.toTimestamp()),createTime:Tc(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Uo(e.version)};else{if(!e.isUnknownDocument())return _e(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Uo(e.version)}}return i}function rp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Uo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zo(n){const e=new Ze(n.seconds,n.nanoseconds);return Ce.fromTimestamp(e)}function _o(n,e){const t=(e.baseMutations||[]).map((o=>Cv(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>Cv(n.yt,o))),s=Ze.fromMillis(e.localWriteTimeMs);return new F_(e.batchId,s,t,i)}function rh(n){const e=zo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?zo(n.lastLimboFreeSnapshotVersion):Ce.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return Ee(l===1,1966,{count:l}),ni(Mp(cC(o.documents[0])))})(n.query):(function(o){return ni(fC(o))})(n.query),new es(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,jt.fromBase64String(n.resumeToken))}function vC(n,e){const t=Uo(e.snapshotVersion),i=Uo(e.lastLimboFreeSnapshotVersion);let s;s=Jm(e.target)?hC(n.yt,e.target):dC(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function _C(n){const e=fC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tp(e,e.limit,"L"):e}function E0(n,e){return new H_(e.largestBatchId,Cv(n.yt,e.overlayMutation))}function yS(n,e){const t=e.path.lastSegment();return[n,En(e.path.popLast()),t]}function vS(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Uo(i.readTime),documentKey:En(i.documentKey.path),largestBatchId:i.largestBatchId}}class hj{getBundleMetadata(e,t){return _S(e).get(t).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:zo(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,t){return _S(e).put((function(s){return{bundleId:s.id,createTime:Uo(Nn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return bS(e).get(t).next((i=>{if(i)return(function(o){return{name:o.name,query:_C(o.bundledQuery),readTime:zo(o.readTime)}})(i)}))}saveNamedQuery(e,t){return bS(e).put((function(s){return{name:s.name,readTime:Uo(Nn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function _S(n){return tn(n,Np)}function bS(n){return tn(n,Dp)}class zp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new zp(e,i)}getOverlay(e,t){return Ku(e).get(yS(this.userId,t)).next((i=>i?E0(this.serializer,i):null))}getOverlays(e,t){const i=gr();return $.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((o,l)=>{const u=new H_(t,l);s.push(this.St(e,u))})),$.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((l=>s.add(En(l.getCollectionPath()))));const o=[];return s.forEach((l=>{const u=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(Ku(e).Z(vv,u))})),$.waitFor(o)}getOverlaysForCollection(e,t,i){const s=gr(),o=En(t),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ku(e).J(vv,l).next((u=>{for(const d of u){const f=E0(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const o=gr();let l;const u=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ku(e).ee({index:_R,range:u},((d,f,g)=>{const v=E0(this.serializer,f);o.size()<s||v.largestBatchId===l?(o.set(v.getKey(),v),l=v.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Ku(e).put((function(s,o,l){const[u,d,f]=yS(o,l.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:ip(s.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Ku(n){return tn(n,kp)}class dj{bt(e){return tn(e,P_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?jt.fromUint8Array(i):jt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class bo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Tt(e.integerValue));else if("doubleValue"in e){const i=Tt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),kh(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=os(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ls(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?DR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Pp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):_e(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const s=pc,o=i[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Tt(o)),this.Ot(s,t),this.Ct(i[s],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}bo.Kt=new bo;const jl=255;function fj(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function TS(n){const e=64-(function(i){let s=0;for(let o=0;o<8;++o){const l=fj(255&i[o]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class mj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),i=TS(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=TS(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(jl),this.sn(255)}_n(){this.an(jl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===jl?(this.sn(jl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===jl?(this.an(jl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class pj{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class gj{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Yu{constructor(){this.cn=new mj,this.ln=new pj(this.cn),this.hn=new gj(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class To{constructor(e,t,i,s){this.Tn=e,this.In=t,this.En=i,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new To(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Rm(this.En),directionalValue:Rm(this.dn),orderedDocumentKey:Rm(t),documentKey:i.path.toArray()}}Vn(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Xs(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=wS(n.En,e.En),t!==0?t:(t=wS(n.dn,e.dn),t!==0?t:ye.comparator(n.In,e.In)))}function wS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Rm(n){return c2()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function ES(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class xS{constructor(e){this.mn=new lt(((t,i)=>Et.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Ee(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=pv(e);if(t!==void 0&&!this.wn(t))return!1;const i=po(e);let s=new Set,o=0,l=0;for(;o<i.length&&this.wn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=i[o];if(!this.Sn(u,d)||!this.bn(this.fn[l++],d))return!1}++o}for(;o<i.length;++o){const u=i[o];if(l>=this.fn.length||!this.bn(this.fn[l++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new lt(Et.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new bm(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new bm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new bm(i.field,i.dir==="asc"?0:1)));return new Ym(Ym.UNKNOWN_ID,this.collectionId,t,Dh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function bC(n){if(Ee(n instanceof Ke||n instanceof ot,20012),n instanceof Ke){if(n instanceof zR){const t=n.value.arrayValue?.values?.map((i=>Ke.create(n.field,"==",i)))||[];return ot.create(t,"or")}return n}const e=n.filters.map((t=>bC(t)));return ot.create(e,n.op)}function yj(n){if(n.getFilters().length===0)return[];const e=kv(bC(n));return Ee(TC(e),7391),Nv(e)||Dv(e)?[e]:e.getFilters()}function Nv(n){return n instanceof Ke}function Dv(n){return n instanceof ot&&U_(n)}function TC(n){return Nv(n)||Dv(n)||(function(t){if(t instanceof ot&&wv(t)){for(const i of t.getFilters())if(!Nv(i)&&!Dv(i))return!1;return!0}return!1})(n)}function kv(n){if(Ee(n instanceof Ke||n instanceof ot,34018),n instanceof Ke)return n;if(n.filters.length===1)return kv(n.filters[0]);const e=n.filters.map((i=>kv(i)));let t=ot.create(e,n.op);return t=sp(t),TC(t)?t:(Ee(t instanceof ot,64498),Ee(vc(t),40251),Ee(t.filters.length>1,57927),t.filters.reduce(((i,s)=>K_(i,s))))}function K_(n,e){let t;return Ee(n instanceof Ke||n instanceof ot,38388),Ee(e instanceof Ke||e instanceof ot,25473),t=n instanceof Ke?e instanceof Ke?(function(s,o){return ot.create([s,o],"and")})(n,e):SS(n,e):e instanceof Ke?SS(e,n):(function(s,o){if(Ee(s.filters.length>0&&o.filters.length>0,48005),vc(s)&&vc(o))return LR(s,o.getFilters());const l=wv(s)?s:o,u=wv(s)?o:s,d=l.filters.map((f=>K_(f,u)));return ot.create(d,"or")})(n,e),sp(t)}function SS(n,e){if(vc(e))return LR(e,n.getFilters());{const t=e.filters.map((i=>K_(n,i)));return ot.create(t,"or")}}function sp(n){if(Ee(n instanceof Ke||n instanceof ot,11850),n instanceof Ke)return n;const e=n.getFilters();if(e.length===1)return sp(e[0]);if(MR(n))return n;const t=e.map((s=>sp(s))),i=[];return t.forEach((s=>{s instanceof Ke?i.push(s):s instanceof ot&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:ot.create(i,n.op)}class vj{constructor(){this.Cn=new Y_}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(ii.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(ii.min())}updateCollectionGroup(e,t,i){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class Y_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new lt(it.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new lt(it.comparator)).toArray()}}const AS="IndexedDbIndexManager",nm=new Uint8Array(0);class _j{constructor(e,t){this.databaseId=t,this.vn=new Y_,this.Fn=new fs((i=>jo(i)),((i,s)=>ud(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:i,parent:En(s)};return IS(e).put(o)}return $.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[sR(t),""],!1,!0);return IS(e).J(s).next((o=>{for(const l of o){if(l.collectionId!==t)break;i.push(pr(l.parent))}return i}))}addFieldIndex(e,t){const i=Qu(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=i.add(s);if(t.indexState){const l=zl(e);return o.next((u=>{l.put(vS(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const i=Qu(e),s=zl(e),o=Ul(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Qu(e),i=Ul(e),s=zl(e);return t.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return $.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const o=new xS(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const i=Ul(e);let s=!0;const o=new Map;return $.forEach(this.Mn(t),(l=>this.xn(e,l).next((u=>{s&&(s=!!u),o.set(l,u)})))).next((()=>{if(s){let l=Be();const u=[];return $.forEach(o,((d,f)=>{ue(AS,`Using index ${(function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map((K=>`${K.fieldPath}:${K.kind}`)).join(",")}`})(d)} to execute ${jo(t)}`);const g=(function(O,K){const te=pv(K);if(te===void 0)return null;for(const J of ep(O,te.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null})(f,d),v=(function(O,K){const te=new Map;for(const J of po(K))for(const S of ep(O,J.fieldPath))switch(S.op){case"==":case"in":te.set(J.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return te.set(J.fieldPath.canonicalString(),S.value),Array.from(te.values())}return null})(f,d),_=(function(O,K){const te=[];let J=!0;for(const S of po(K)){const R=S.kind===0?rS(O,S.fieldPath,O.startAt):sS(O,S.fieldPath,O.startAt);te.push(R.value),J&&(J=R.inclusive)}return new yc(te,J)})(f,d),x=(function(O,K){const te=[];let J=!0;for(const S of po(K)){const R=S.kind===0?sS(O,S.fieldPath,O.endAt):rS(O,S.fieldPath,O.endAt);te.push(R.value),J&&(J=R.inclusive)}return new yc(te,J)})(f,d),N=this.On(d,f,_),A=this.On(d,f,x),C=this.Nn(d,f,v),P=this.Bn(d.indexId,g,N,_.inclusive,A,x.inclusive,C);return $.forEach(P,(z=>i.Y(z,t.limit).next((O=>{O.forEach((K=>{const te=ye.fromSegments(K.documentKey);l.has(te)||(l=l.add(te),u.push(te))}))}))))})).next((()=>u))}return $.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=yj(ot.create(e.filters,"and")).map((i=>xv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,s,o,l,u){const d=(t!=null?t.length:1)*Math.max(i.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let v=0;v<d;++v){const _=t?this.Ln(t[v/f]):nm,x=this.kn(e,_,i[v%f],s),N=this.qn(e,_,o[v%f],l),A=u.map((C=>this.kn(e,_,C,!0)));g.push(...this.createRange(x,N,A))}return g}kn(e,t,i,s){const o=new To(e,ye.empty(),t,i);return s?o:o.An()}qn(e,t,i,s){const o=new To(e,ye.empty(),t,i);return s?o.An():o}xn(e,t){const i=new xS(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let l=null;for(const u of o)i.yn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l}))}getIndexType(e,t){let i=2;const s=this.Mn(t);return $.forEach(s,(o=>this.xn(e,o).next((l=>{l?i!==0&&l.fields.length<(function(d){let f=new lt(Et.comparator),g=!1;for(const v of d.filters)for(const _ of v.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?g=!0:f=f.add(_.field));for(const v of d.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(g?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&i===2?1:i))}Qn(e,t){const i=new Yu;for(const s of po(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const l=i.Pn(s.kind);bo.Kt.Dt(o,l)}return i.un()}Ln(e){const t=new Yu;return bo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Yu;return bo.Kt.Dt(jh(this.databaseId,t),i.Pn((function(o){const l=po(o);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let s=[];s.push(new Yu);let o=0;for(const l of po(e)){const u=i[o++];for(const d of s)if(this.Un(t,l.fieldPath)&&Uh(u))s=this.Kn(s,l,u);else{const f=d.Pn(l.kind);bo.Kt.Dt(u,f)}}return this.Wn(s)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const s=[...e],o=[];for(const l of i.arrayValue.values||[])for(const u of s){const d=new Yu;d.seed(u.un()),bo.Kt.Dt(l,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((i=>i instanceof Ke&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Qu(e),s=zl(e);return(t?i.J(yv,IDBKeyRange.bound(t,t)):i.J()).next((o=>{const l=[];return $.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{l.push((function(g,v){const _=v?new Dh(v.sequenceNumber,new ii(zo(v.readTime),new ye(pr(v.documentKey)),v.largestBatchId)):Dh.empty(),x=g.fields.map((([N,A])=>new bm(Et.fromServerFormat(N),A)));return new Ym(g.indexId,g.collectionGroup,x,_)})(u,d))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Pe(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=Qu(e),o=zl(e);return this.Gn(e).next((l=>s.J(yv,IDBKeyRange.bound(t,t)).next((u=>$.forEach(u,(d=>o.put(vS(d.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return $.forEach(t,((s,o)=>{const l=i.get(s.collectionGroup);return(l?$.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(i.set(s.collectionGroup,u),$.forEach(u,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?$.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,i,s){return Ul(e).put(s.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,s){return Ul(e).delete(s.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const s=Ul(e);let o=new lt(Xs);return s.ee({index:vR,range:IDBKeyRange.only([i.indexId,this.uid,Rm(this.$n(i,t))])},((l,u)=>{o=o.add(new To(i.indexId,t,ES(u.arrayValue),ES(u.directionalValue)))})).next((()=>o))}jn(e,t){let i=new lt(Xs);const s=this.Qn(t,e);if(s==null)return i;const o=pv(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Uh(l))for(const u of l.arrayValue.values||[])i=i.add(new To(t.indexId,e.key,this.Ln(u),s))}else i=i.add(new To(t.indexId,e.key,nm,s));return i}Jn(e,t,i,s,o){ue(AS,"Updating index entries for document '%s'",t.key);const l=[];return(function(d,f,g,v,_){const x=d.getIterator(),N=f.getIterator();let A=Ll(x),C=Ll(N);for(;A||C;){let P=!1,z=!1;if(A&&C){const O=g(A,C);O<0?z=!0:O>0&&(P=!0)}else A!=null?z=!0:P=!0;P?(v(C),C=Ll(N)):z?(_(A),A=Ll(x)):(A=Ll(x),C=Ll(N))}})(s,o,Xs,(u=>{l.push(this.Hn(e,t,i,u))}),(u=>{l.push(this.Yn(e,t,i,u))})),$.waitFor(l)}Gn(e){let t=1;return zl(e).ee({index:yR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,u)=>Xs(l,u))).filter(((l,u,d)=>!u||Xs(l,d[u-1])!==0));const s=[];s.push(e);for(const l of i){const u=Xs(l,e),d=Xs(l,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(l),s.push(l.An());else if(d>0)break}s.push(t);const o=[];for(let l=0;l<s.length;l+=2){if(this.Zn(s[l],s[l+1]))return[];const u=s[l].Vn(this.uid,nm,ye.empty()),d=s[l+1].Vn(this.uid,nm,ye.empty());o.push(IDBKeyRange.bound(u,d))}return o}Zn(e,t){return Xs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RS)}getMinOffset(e,t){return $.mapArray(this.Mn(t),(i=>this.xn(e,i).next((s=>s||_e(44426))))).next(RS)}}function IS(n){return tn(n,Mh)}function Ul(n){return tn(n,fh)}function Qu(n){return tn(n,V_)}function zl(n){return tn(n,dh)}function RS(n){Ee(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;N_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ii(e.readTime,e.documentKey,t)}const CS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wC=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function EC(n,e,t){const i=n.store(Ui),s=n.store(hc),o=[],l=IDBKeyRange.only(t.batchId);let u=0;const d=i.ee({range:l},((g,v,_)=>(u++,_.delete())));o.push(d.next((()=>{Ee(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const v=mR(e,g.key.path,t.batchId);o.push(s.delete(v)),f.push(g.key)}return $.waitFor(o).next((()=>f))}function ap(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _e(14731);e=n.noDocument}return JSON.stringify(e).length}_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(wC,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);class Bp{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,t,i,s){Ee(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Bp(o,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ws(e).ee({index:wo,range:i},((s,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const o=$l(e),l=Ws(e);return l.add({}).next((u=>{Ee(typeof u=="number",49019);const d=new F_(u,t,i,s),f=(function(x,N,A){const C=A.baseMutations.map((z=>ip(x.yt,z))),P=A.mutations.map((z=>ip(x.yt,z)));return{userId:N,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:C,mutations:P}})(this.serializer,this.userId,d),g=[];let v=new lt(((_,x)=>Pe(_.canonicalString(),x.canonicalString())));for(const _ of s){const x=mR(this.userId,_.key.path,u);v=v.add(_.key.path.popLast()),g.push(l.put(f)),g.push(o.put(x,XL))}return v.forEach((_=>{g.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),$.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return Ws(e).get(t).next((i=>i?(Ee(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),_o(this.serializer,i)):null))}er(e,t){return this.Xn[t]?$.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Ws(e).ee({index:wo,range:s},((l,u,d)=>{u.userId===this.userId&&(Ee(u.batchId>=i,47524,{tr:i}),o=_o(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=So;return Ws(e).ee({index:wo,range:t,reverse:!0},((s,o,l)=>{i=o.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,So],[this.userId,Number.POSITIVE_INFINITY]);return Ws(e).J(wo,t).next((i=>i.map((s=>_o(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Tm(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=[];return $l(e).ee({range:s},((l,u,d)=>{const[f,g,v]=l,_=pr(g);if(f===this.userId&&t.path.isEqual(_))return Ws(e).get(v).next((x=>{if(!x)throw _e(61480,{nr:l,batchId:v});Ee(x.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:x.userId,batchId:v}),o.push(_o(this.serializer,x))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new lt(Pe);const s=[];return t.forEach((o=>{const l=Tm(this.userId,o.path),u=IDBKeyRange.lowerBound(l),d=$l(e).ee({range:u},((f,g,v)=>{const[_,x,N]=f,A=pr(x);_===this.userId&&o.path.isEqual(A)?i=i.add(N):v.done()}));s.push(d)})),$.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,o=Tm(this.userId,i),l=IDBKeyRange.lowerBound(o);let u=new lt(Pe);return $l(e).ee({range:l},((d,f,g)=>{const[v,_,x]=d,N=pr(_);v===this.userId&&i.isPrefixOf(N)?N.length===s&&(u=u.add(x)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const i=[],s=[];return t.forEach((o=>{s.push(Ws(e).get(o).next((l=>{if(l===null)throw _e(35274,{batchId:o});Ee(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),i.push(_o(this.serializer,l))})))})),$.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return EC(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),$.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return $l(e).ee({range:i},((o,l,u)=>{if(o[0]===this.userId){const d=pr(o[1]);s.push(d)}else u.done()})).next((()=>{Ee(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return xC(e,this.userId,t)}_r(e){return SC(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:So,lastStreamToken:""}))}}function xC(n,e,t){const i=Tm(e,t.path),s=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return $l(n).ee({range:o,X:!0},((u,d,f)=>{const[g,v,_]=u;g===e&&v===s&&(l=!0),f.done()})).next((()=>l))}function Ws(n){return tn(n,Ui)}function $l(n){return tn(n,hc)}function SC(n){return tn(n,Vh)}class Bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bo(0)}static cr(){return new Bo(-1)}}class bj{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Bo(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ce.fromTimestamp(new Ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Bl(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(Ee(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let s=0;const o=[];return Bl(e).ee(((l,u)=>{const d=rh(u);d.sequenceNumber<=t&&i.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>$.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Bl(e).ee(((i,s)=>{const o=rh(s);t(o)}))}lr(e){return NS(e).get(Wm).next((t=>(Ee(t!==null,2888),t)))}hr(e,t){return NS(e).put(Wm,t)}Pr(e,t){return Bl(e).put(vC(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=jo(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Bl(e).ee({range:s,index:gR},((l,u,d)=>{const f=rh(u);ud(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,i){const s=[],o=oa(e);return t.forEach((l=>{const u=En(l.path);s.push(o.put({targetId:i,path:u})),s.push(this.referenceDelegate.addReference(e,i,l))})),$.waitFor(s)}removeMatchingKeys(e,t,i){const s=oa(e);return $.forEach(t,(o=>{const l=En(o.path);return $.waitFor([s.delete([i,l]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,t){const i=oa(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=oa(e);let o=Be();return s.ee({range:i,X:!0},((l,u,d)=>{const f=pr(l[1]),g=new ye(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const i=En(t.path),s=IDBKeyRange.bound([i],[sR(i)],!1,!0);let o=0;return oa(e).ee({index:k_,X:!0,range:s},(([l,u],d,f)=>{l!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Bl(e).get(t).next((i=>i?rh(i):null))}}function Bl(n){return tn(n,dc)}function NS(n){return tn(n,Ao)}function oa(n){return tn(n,fc)}const DS="LruGarbageCollector",AC=1048576;function kS([n,e],[t,i]){const s=Pe(n,t);return s===0?Pe(e,i):s}class Tj{constructor(e){this.Ir=e,this.buffer=new lt(kS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();kS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(DS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Na(t)?ue(DS,"Ignoring IndexedDB error during garbage collection: ",t):await Ca(t)}await this.Vr(3e5)}))}}class wj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Un.ce);const i=new Tj(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(CS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,o,l,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(i=v,u=Date.now(),this.removeTargets(e,i,t)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Fl()<=$e.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function RC(n,e){return new wj(n,e)}class Ej{constructor(e,t){this.db=e,this.garbageCollector=RC(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,s)=>t(s)))}addReference(e,t,i){return im(e,i)}removeReference(e,t,i){return im(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return im(e,t)}br(e,t){return(function(s,o){let l=!1;return SC(s).te((u=>xC(s,u,o).next((d=>(d&&(l=!0),$.resolve(!d)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((l,u)=>{if(u<=t){const d=this.br(e,l).next((f=>{if(!f)return o++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Ce.min()),oa(e).delete((function(v){return[0,En(v.path)]})(l)))))}));s.push(d)}})).next((()=>$.waitFor(s))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return im(e,t)}Sr(e,t){const i=oa(e);let s,o=Un.ce;return i.ee({index:k_},(([l,u],{path:d,sequenceNumber:f})=>{l===0?(o!==Un.ce&&t(new ye(pr(s)),o),o=f,s=d):o=Un.ce})).next((()=>{o!==Un.ce&&t(new ye(pr(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function im(n,e){return oa(n).put((function(i,s){return{targetId:0,path:En(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class CC{constructor(){this.changes=new fs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?$.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return uo(e).put(i)}removeEntry(e,t,i){return uo(e).delete((function(o,l){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],rp(l),u[u.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Nt.newInvalidDocument(t);return uo(e).ee({index:wm,range:IDBKeyRange.only(Xu(t))},((s,o)=>{i=this.Cr(t,o)})).next((()=>i))}vr(e,t){let i={size:0,document:Nt.newInvalidDocument(t)};return uo(e).ee({index:wm,range:IDBKeyRange.only(Xu(t))},((s,o)=>{i={document:this.Cr(t,o),size:ap(o)}})).next((()=>i))}getEntries(e,t){let i=ti();return this.Fr(e,t,((s,o)=>{const l=this.Cr(s,o);i=i.insert(s,l)})).next((()=>i))}Mr(e,t){let i=ti(),s=new pt(ye.comparator);return this.Fr(e,t,((o,l)=>{const u=this.Cr(o,l);i=i.insert(o,u),s=s.insert(o,ap(l))})).next((()=>({documents:i,Or:s})))}Fr(e,t,i){if(t.isEmpty())return $.resolve();let s=new lt(MS);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Xu(s.first()),Xu(s.last())),l=s.getIterator();let u=l.getNext();return uo(e).ee({index:wm,range:o},((d,f,g)=>{const v=ye.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&MS(u,v)<0;)i(u,null),u=l.getNext();u&&u.isEqual(v)&&(i(u,f),u=l.hasNext()?l.getNext():null),u?g.j(Xu(u)):g.done()})).next((()=>{for(;u;)i(u,null),u=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,o){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),rp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uo(e).J(IDBKeyRange.bound(u,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=ti();for(const v of f){const _=this.Cr(ye.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);_.isFoundDocument()&&(hd(t,_)||s.has(_.key))&&(g=g.insert(_.key,_))}return g}))}getAllFromCollectionGroup(e,t,i,s){let o=ti();const l=PS(t,i),u=PS(t,ii.max());return uo(e).ee({index:pR,range:IDBKeyRange.bound(l,u,!0)},((d,f,g)=>{const v=this.Cr(ye.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new Sj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return VS(e).get(gv).next((t=>(Ee(!!t,20021),t)))}Dr(e,t){return VS(e).put(gv,t)}Cr(e,t){if(t){const i=uj(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ce.min())))return i}return Nt.newInvalidDocument(e)}}function NC(n){return new xj(n)}class Sj extends CC{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new fs((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new lt(((o,l)=>Pe(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),l.isValidDocument()){const d=gS(this.Nr.serializer,l);s=s.add(o.path.popLast());const f=ap(d);i+=f-u.size,t.push(this.Nr.addEntry(e,o,d))}else if(i-=u.size,this.trackRemovals){const d=gS(this.Nr.serializer,l.convertToNoDocument(Ce.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,i)),$.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:s})=>(s.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:i.get(o).readTime})})),i)))}}function VS(n){return tn(n,Ph)}function uo(n){return tn(n,Xm)}function Xu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function PS(n,e){const t=e.documentKey.path.toArray();return[n,rp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function MS(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(s=Pe(t[o],i[o]),s)return s;return s=Pe(t.length,i.length),s||(s=Pe(t[t.length-2],i[i.length-2]),s||Pe(t[t.length-1],i[i.length-1]))}class Aj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class DC{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&yh(i.mutation,s,zn.empty(),Ze.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const s=gr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((o=>{let l=nh();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=gr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const s=[];return i.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,i,s){let o=ti();const l=gh(),u=(function(){return gh()})();return t.forEach(((d,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof ms)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),yh(g.mutation,f,g.mutation.getFieldMask(),Ze.now())):l.set(f.key,zn.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>l.set(f,g))),t.forEach(((f,g)=>u.set(f,new Aj(g,l.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const i=gh();let s=new pt(((l,u)=>l-u)),o=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=i.get(d)||zn.empty();g=u.applyToLocalView(f,g),i.set(d,g);const v=(s.get(u.batchId)||Be()).add(d);s=s.insert(u.batchId,v)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,v=YR();g.forEach((_=>{if(!o.has(_)){const x=eC(t.get(_),i.get(_));x!==null&&v.set(_,x),o=o.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return $.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(l){return ye.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):FR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):$.resolve(gr());let u=uc,d=o;return l.next((f=>$.forEach(f,((g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(g)?$.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{d=d.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Be()))).next((g=>({batchId:u,changes:KR(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let s=nh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const o=t.collectionGroup;let l=nh();return this.indexManager.getCollectionParents(e,o).next((u=>$.forEach(u,(d=>{const f=(function(v,_){return new kc(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((g=>{g.forEach(((v,_)=>{l=l.insert(v,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s)))).next((l=>{o.forEach(((d,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,Nt.newInvalidDocument(g)))}));let u=nh();return l.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&yh(g.mutation,f,zn.empty(),Ze.now()),hd(t,f)&&(u=u.insert(d,f))})),u}))}}class Ij{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:_C(s.bundledQuery),readTime:Nn(s.readTime)}})(t)),$.resolve()}}class Rj{constructor(){this.overlays=new pt(ye.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const i=gr();return $.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,o)=>{this.St(e,t,o)})),$.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),$.resolve()}getOverlaysForCollection(e,t,i){const s=gr(),o=t.length+1,l=new ye(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new pt(((f,g)=>f-g));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=gr(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=gr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return $.resolve(u)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new H_(t,i));let o=this.qr.get(t);o===void 0&&(o=Be(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}class Cj{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}class Q_{constructor(){this.Qr=new lt(an.$r),this.Ur=new lt(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new an(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new an(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ye(new it([])),i=new an(t,e),s=new an(t,e+1),o=[];return this.Ur.forEachInRange([i,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new it([])),i=new an(t,e),s=new an(t,e+1);let o=Be();return this.Ur.forEachInRange([i,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new an(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class an{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Pe(e.Yr,t.Yr)}static Kr(e,t){return Pe(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}class Nj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new lt(an.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new F_(o,t,i,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new an(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return $.resolve(l)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),o=s<0?0:s;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?So:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new an(t,0),s=new an(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(l=>{const u=this.Xr(l.Yr);o.push(u)})),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new lt(Pe);return t.forEach((s=>{const o=new an(s,0),l=new an(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{i=i.add(u.Yr)}))})),$.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let o=i;ye.isDocumentKey(o)||(o=o.child(""));const l=new an(new ye(o),0);let u=new lt(Pe);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),l),$.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ee(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return $.forEach(t.mutations,(s=>{const o=new an(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new an(t,0),s=this.Zr.firstAfterOrEqual(i);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Dj{constructor(e){this.ri=e,this.docs=(function(){return new pt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return $.resolve(i?i.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let i=ti();return t.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Nt.newInvalidDocument(s))})),$.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=ti();const l=t.path,u=new ye(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||N_(cR(g),i)<=0||(s.has(g.key)||hd(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,i,s){_e(9500)}ii(e,t){return $.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new kj(this)}getSize(e){return $.resolve(this.size)}}class kj extends CC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Vj{constructor(e){this.persistence=e,this.si=new fs((t=>jo(t)),ud),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Q_,this.targetCount=0,this.ai=Bo.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,i){let s=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&i.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),$.waitFor(o).next((()=>s))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return $.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),$.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return $.resolve(i)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}}class X_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Un(0),this.li=!1,this.li=!0,this.hi=new Cj,this.referenceDelegate=e(this),this.Pi=new Vj(this),this.indexManager=new vj,this.remoteDocumentCache=(function(s){return new Dj(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new yC(t),this.Ii=new Ij(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new Nj(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const s=new Pj(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return $.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Pj extends hR{constructor(e){super(),this.currentSequenceNumber=e}}class Fp{constructor(e){this.persistence=e,this.Ri=new Q_,this.Vi=null}static mi(e){return new Fp(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),$.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(i=>{const s=ye.fromPath(i);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class op{constructor(e,t){this.persistence=e,this.pi=new fs((i=>En(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=RC(this,t)}static mi(e,t){return new op(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return $.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?$.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((u=>{u||(i++,o.removeEntry(l,Ce.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xm(e.data.value)),t}br(e,t,i){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return $.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Mj{constructor(e){this.serializer=e}k(e,t,i,s){const o=new Rp("createOrUpgrade",t);i<1&&s>=1&&((function(d){d.createObjectStore(cd)})(e),(function(d){d.createObjectStore(Vh,{keyPath:QL}),d.createObjectStore(Ui,{keyPath:$x,autoIncrement:!0}).createIndex(wo,Kx,{unique:!0}),d.createObjectStore(hc)})(e),OS(e),(function(d){d.createObjectStore(go)})(e));let l=$.resolve();return i<3&&s>=3&&(i!==0&&((function(d){d.deleteObjectStore(fc),d.deleteObjectStore(dc),d.deleteObjectStore(Ao)})(e),OS(e)),l=l.next((()=>(function(d){const f=d.store(Ao),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return f.put(Wm,g)})(o)))),i<4&&s>=4&&(i!==0&&(l=l.next((()=>(function(d,f){return f.store(Ui).J().next((v=>{d.deleteObjectStore(Ui),d.createObjectStore(Ui,{keyPath:$x,autoIncrement:!0}).createIndex(wo,Kx,{unique:!0});const _=f.store(Ui),x=v.map((N=>_.put(N)));return $.waitFor(x)}))})(e,o)))),l=l.next((()=>{(function(d){d.createObjectStore(mc,{keyPath:r9})})(e)}))),i<5&&s>=5&&(l=l.next((()=>this.yi(o)))),i<6&&s>=6&&(l=l.next((()=>((function(d){d.createObjectStore(Ph)})(e),this.wi(o))))),i<7&&s>=7&&(l=l.next((()=>this.Si(o)))),i<8&&s>=8&&(l=l.next((()=>this.bi(e,o)))),i<9&&s>=9&&(l=l.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(l=l.next((()=>this.Di(o)))),i<11&&s>=11&&(l=l.next((()=>{(function(d){d.createObjectStore(Np,{keyPath:s9})})(e),(function(d){d.createObjectStore(Dp,{keyPath:a9})})(e)}))),i<12&&s>=12&&(l=l.next((()=>{(function(d){const f=d.createObjectStore(kp,{keyPath:f9});f.createIndex(vv,m9,{unique:!1}),f.createIndex(_R,p9,{unique:!1})})(e)}))),i<13&&s>=13&&(l=l.next((()=>(function(d){const f=d.createObjectStore(Xm,{keyPath:WL});f.createIndex(wm,ZL),f.createIndex(pR,JL)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(go)))),i<14&&s>=14&&(l=l.next((()=>this.Fi(e,o)))),i<15&&s>=15&&(l=l.next((()=>(function(d){d.createObjectStore(V_,{keyPath:o9,autoIncrement:!0}).createIndex(yv,l9,{unique:!1}),d.createObjectStore(dh,{keyPath:c9}).createIndex(yR,u9,{unique:!1}),d.createObjectStore(fh,{keyPath:h9}).createIndex(vR,d9,{unique:!1})})(e)))),i<16&&s>=16&&(l=l.next((()=>{t.objectStore(dh).clear()})).next((()=>{t.objectStore(fh).clear()}))),i<17&&s>=17&&(l=l.next((()=>{(function(d){d.createObjectStore(P_,{keyPath:g9})})(e)}))),i<18&&s>=18&&c2()&&(l=l.next((()=>{t.objectStore(dh).clear()})).next((()=>{t.objectStore(fh).clear()}))),l}wi(e){let t=0;return e.store(go).ee(((i,s)=>{t+=ap(s)})).next((()=>{const i={byteSize:t};return e.store(Ph).put(gv,i)}))}yi(e){const t=e.store(Vh),i=e.store(Ui);return t.J().next((s=>$.forEach(s,(o=>{const l=IDBKeyRange.bound([o.userId,So],[o.userId,o.lastAcknowledgedBatchId]);return i.J(wo,l).next((u=>$.forEach(u,(d=>{Ee(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=_o(this.serializer,d);return EC(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(fc),i=e.store(go);return e.store(Ao).get(Wm).next((s=>{const o=[];return i.ee(((l,u)=>{const d=new it(l),f=(function(v){return[0,En(v)]})(d);o.push(t.get(f).next((g=>g?$.resolve():(v=>t.put({targetId:0,path:En(v),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>$.waitFor(o)))}))}bi(e,t){e.createObjectStore(Mh,{keyPath:i9});const i=t.store(Mh),s=new Y_,o=l=>{if(s.add(l)){const u=l.lastSegment(),d=l.popLast();return i.put({collectionId:u,parent:En(d)})}};return t.store(go).ee({X:!0},((l,u)=>{const d=new it(l);return o(d.popLast())})).next((()=>t.store(hc).ee({X:!0},(([l,u,d],f)=>{const g=pr(u);return o(g.popLast())}))))}Di(e){const t=e.store(dc);return t.ee(((i,s)=>{const o=rh(s),l=vC(this.serializer,o);return t.put(l)}))}Ci(e,t){const i=t.store(go),s=[];return i.ee(((o,l)=>{const u=t.store(Xm),d=(function(v){return v.document?new ye(it.fromString(v.document.name).popFirst(5)):v.noDocument?ye.fromSegments(v.noDocument.path):v.unknownDocument?ye.fromSegments(v.unknownDocument.path):_e(36783)})(l).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(u.put(f))})).next((()=>$.waitFor(s)))}Fi(e,t){const i=t.store(Ui),s=NC(this.serializer),o=new X_(Fp.mi,this.serializer.yt);return i.J().next((l=>{const u=new Map;return l.forEach((d=>{let f=u.get(d.userId)??Be();_o(this.serializer,d).keys().forEach((g=>f=f.add(g))),u.set(d.userId,f)})),$.forEach(u,((d,f)=>{const g=new vn(f),v=zp.wt(this.serializer,g),_=o.getIndexManager(g),x=Bp.wt(g,this.serializer,_,o.referenceDelegate);return new DC(s,x,v,_).recalculateAndSaveOverlaysForDocumentKeys(new _v(t,Un.ce),d).next()}))}))}}function OS(n){n.createObjectStore(fc,{keyPath:t9}).createIndex(k_,n9,{unique:!0}),n.createObjectStore(dc,{keyPath:"targetId"}).createIndex(gR,e9,{unique:!0}),n.createObjectStore(Ao)}const Zs="IndexedDbPersistence",x0=18e5,S0=5e3,A0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Oj="main";class W_{constructor(e,t,i,s,o,l,u,d,f,g,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=o,this.window=l,this.document=u,this.xi=f,this.Oi=g,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!W_.v())throw new de(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ej(this,s),this.$i=t+Oj,this.serializer=new yC(d),this.Ui=new pa(this.$i,this.Ni,new Mj(this.serializer)),this.hi=new dj,this.Pi=new bj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NC(this.serializer),this.Ii=new hj,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Ot(Zs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(re.FAILED_PRECONDITION,A0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Un(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>rm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Na(e))return ue(Zs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue(Zs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Wu(e).get(Ol).next((t=>$.resolve(this.es(t))))}ts(e){return rm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,x0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=tn(t,mc);return i.J().next((s=>{const o=this.ss(s,x0),l=s.filter((u=>o.indexOf(u)===-1));return $.forEach(l,(u=>i.delete(u.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?$.resolve(!0):Wu(e).get(Ol).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,S0)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new de(re.FAILED_PRECONDITION,A0);return!1}}return!(!this.networkEnabled||!this.inForeground)||rm(e).J().next((i=>this.ss(i,S0).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||l&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ue(Zs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[cd,mc],(e=>{const t=new _v(e,Un.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>rm(e).J().next((t=>this.ss(t,x0).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Bp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _j(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return zp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue(Zs,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?_9:d===17?ER:d===16?v9:d===15?M_:d===14?wR:d===13?TR:d===12?y9:d===11?bR:void _e(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,s,o,(u=>(l=new _v(u,this.ci?this.ci.next():Un.ce),t==="readwrite-primary"?this.Hi(l).next((d=>!!d||this.Yi(l))).next((d=>{if(!d)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new de(re.FAILED_PRECONDITION,uR);return i(l)})).next((d=>this.Xi(l).next((()=>d)))):this.Is(l).next((()=>i(l)))))).then((u=>(l.raiseOnCommittedEvent(),u)))}Is(e){return Wu(e).get(Ol).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,S0)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(re.FAILED_PRECONDITION,A0)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wu(e).put(Ol,t)}static v(){return pa.v()}Zi(e){const t=Wu(e);return t.get(Ol).next((i=>this.es(i)?(ue(Zs,"Releasing primary lease."),t.delete(Ol)):$.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Ot(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;l2()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ue(Zs,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ot(Zs,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wu(n){return tn(n,cd)}function rm(n){return tn(n,mc)}function kC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Z_{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=Be(),s=Be();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Z_(e,t.fromCache,i,s)}}class Lj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class VC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return l2()?8:dR(en())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new Lj;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Fl()<=$e.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",ql(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Fl()<=$e.DEBUG&&ue("QueryEngine","Query:",ql(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Fl()<=$e.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",ql(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(t))):$.resolve())}ys(e,t){if(aS(t))return $.resolve(null);let i=ni(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=tp(t,null,"F"),i=ni(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=Be(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,l,d.readTime)?this.ys(e,tp(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,i,s){return aS(t)||s.isEqual(Ce.min())?$.resolve(null):this.ps.getDocuments(e,i).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,i,s)?$.resolve(null):(Fl()<=$e.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ql(t)),this.vs(e,l,t,lR(s,uc)).next((u=>u)))}))}Ds(e,t){let i=new lt(GR(e));return t.forEach(((s,o)=>{hd(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,i){return Fl()<=$e.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",ql(t)),this.ps.getDocumentsMatchingQuery(e,t,ii.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}const J_="LocalStore",jj=3e8;class Uj{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new pt(Pe),this.xs=new fs((o=>jo(o)),ud),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function PC(n,e,t,i){return new Uj(n,e,t,i)}async function MC(n,e){const t=Te(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],u=[];let d=Be();for(const f of s){l.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(i,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:u})))}))}))}function zj(n,e){const t=Te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const v=f.batch,_=v.keys();let x=$.resolve();return _.forEach((N=>{x=x.next((()=>g.getEntry(d,N))).next((A=>{const C=f.docVersions.get(N);Ee(C!==null,48541),A.version.compareTo(C)<0&&(v.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),g.addEntry(A)))}))})),x.next((()=>u.mutationQueue.removeMutationBatch(d,v)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let d=Be();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function OC(n){const e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Bj(n,e){const t=Te(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,v)=>{const _=s.get(v);if(!_)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,v))));let x=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?x=x.withResumeToken(jt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):g.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(g.resumeToken,i)),s=s.insert(v,x),(function(A,C,P){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=jj?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(_,x,g)&&u.push(t.Pi.updateTargetData(o,x))}));let d=ti(),f=Be();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(Fj(o,l,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!i.isEqual(Ce.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));u.push(g)}return $.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function Fj(n,e,t){let i=Be(),s=Be();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=ti();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Ce.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):ue(J_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function qj(n,e){const t=Te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=So),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function lp(n,e){const t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((o=>o?(s=o,$.resolve(s)):t.Pi.allocateTargetId(i).next((l=>(s=new es(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function wc(n,e,t){const i=Te(n),s=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Na(l))throw l;ue(J_,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function Vv(n,e,t){const i=Te(n);let s=Ce.min(),o=Be();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,g){const v=Te(d),_=v.xs.get(g);return _!==void 0?$.resolve(v.Ms.get(_)):v.Pi.getTargetData(f,g)})(i,l,ni(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?s:Ce.min(),t?o:Be()))).next((u=>(UC(i,HR(e),u),{documents:u,Qs:o})))))}function LC(n,e){const t=Te(n),i=Te(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,e).next((l=>l?l.target:null))))}function jC(n,e){const t=Te(n),i=t.Os.get(e)||Ce.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,lR(i,uc),Number.MAX_SAFE_INTEGER))).then((s=>(UC(t,e,s),s)))}function UC(n,e,t){let i=n.Os.get(e)||Ce.min();t.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}const zC="firestore_clients";function LS(n,e){return`${zC}_${n}_${e}`}const BC="firestore_mutations";function jS(n,e,t){let i=`${BC}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const FC="firestore_targets";function I0(n,e){return`${FC}_${n}_${e}`}const fr="SharedClientState";class cp{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Ws(e,t,i){const s=JSON.parse(i);let o,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(o=new de(s.error.code,s.error.message))),l?new cp(e,t,s.state,o):(Ot(fr,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new de(i.error.code,i.error.message))),o?new vh(e,i.state,s):(Ot(fr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class up{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=z_();for(let l=0;s&&l<i.activeTargetIds.length;++l)s=fR(i.activeTargetIds[l]),o=o.add(i.activeTargetIds[l]);return s?new up(e,o):(Ot(fr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class eb{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new eb(t.clientId,t.onlineState):(Ot(fr,`Failed to parse online state: ${e}`),null)}}class Pv{constructor(){this.activeTargetIds=z_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R0{constructor(e,t,i,s,o){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new pt(Pe),this.started=!1,this.Xs=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=LS(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Pv),this.ro=new RegExp(`^${zC}_${l}_([^_]*)$`),this.io=new RegExp(`^${BC}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${FC}_${l}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(LS(this.persistenceKey,i));if(s){const o=up.Ws(i,s);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(I0(this.persistenceKey,e));if(s){const o=vh.Ws(e,s);o&&(i=o.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(I0(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue(fr,"READ",e,t),t}setItem(e,t){ue(fr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue(fr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ue(fr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(o){let l=Un.ce;if(o!=null)try{const u=JSON.parse(o);Ee(typeof u=="number",30636,{So:o}),l=u}catch(u){Ot(fr,"Failed to read sequence number from WebStorage",u)}return l})(t.newValue);i!==Un.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const s=new cp(this.currentUser,e,t,i),o=jS(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Gs())}Po(e){const t=jS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const s=I0(this.persistenceKey,e),o=new vh(e,t,i);this.setItem(s,o.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return up.Ws(i,t)}fo(e,t){const i=this.io.exec(e),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return cp.Ws(new vn(o),s,t)}yo(e,t){const i=this.so.exec(e),s=Number(i[1]);return vh.Ws(s,t)}uo(e){return eb.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ue(fr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),o=this.lo(i),l=[],u=[];return o.forEach((d=>{s.has(d)||l.push(d)})),s.forEach((d=>{o.has(d)||u.push(d)})),this.syncEngine.Fo(l,u).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=z_();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class qC{constructor(){this.Mo=new Pv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Hj{Oo(e){}shutdown(){}}const US="ConnectivityMonitor";class zS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(US,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(US,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let sm=null;function Mv(){return sm===null?sm=(function(){return 268435456+Math.round(2147483648*Math.random())})():sm++,"0x"+sm.toString(16)}const C0="RestConnection",Gj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $j{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Zm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,o){const l=Mv(),u=this.zo(e,t.toUriEncodedString());ue(C0,`Sending RPC '${e}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),g=Cc(f);return this.Jo(e,u,d,i,g).then((v=>(ue(C0,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw Nh(C0,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",i),v}))}Ho(e,t,i,s,o,l){return this.Go(e,t,i,s,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const i=Gj[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class Kj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const yn="WebChannelConnection";class Yj extends $j{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,o){const l=Mv();return new Promise(((u,d)=>{const f=new J2;f.setWithCredentials(!0),f.listenOnce(eR.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case _m.NO_ERROR:const v=f.getResponseJson();ue(yn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case _m.TIMEOUT:ue(yn,`RPC '${e}' ${l} timed out`),d(new de(re.DEADLINE_EXCEEDED,"Request time out"));break;case _m.HTTP_ERROR:const _=f.getStatus();if(ue(yn,`RPC '${e}' ${l} failed with status:`,_,"response text:",f.getResponseText()),_>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=x?.error;if(N&&N.status&&N.message){const A=(function(P){const z=P.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(z)>=0?z:re.UNKNOWN})(N.status);d(new de(A,N.message))}else d(new de(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new de(re.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ue(yn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);ue(yn,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",g,i,15)}))}T_(e,t,i){const s=Mv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=iR(),u=nR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=o.join("");ue(yn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=l.createWebChannel(g,d);this.I_(v);let _=!1,x=!1;const N=new Kj({Yo:C=>{x?ue(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(_||(ue(yn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),ue(yn,`RPC '${e}' stream ${s} sending:`,C),v.send(C))},Zo:()=>v.close()}),A=(C,P,z)=>{C.listen(P,(O=>{try{z(O)}catch(K){setTimeout((()=>{throw K}),0)}}))};return A(v,th.EventType.OPEN,(()=>{x||(ue(yn,`RPC '${e}' stream ${s} transport opened.`),N.o_())})),A(v,th.EventType.CLOSE,(()=>{x||(x=!0,ue(yn,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(v))})),A(v,th.EventType.ERROR,(C=>{x||(x=!0,Nh(yn,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),N.a_(new de(re.UNAVAILABLE,"The operation could not be completed")))})),A(v,th.EventType.MESSAGE,(C=>{if(!x){const P=C.data[0];Ee(!!P,16349);const z=P,O=z?.error||z[0]?.error;if(O){ue(yn,`RPC '${e}' stream ${s} received error:`,O);const K=O.status;let te=(function(R){const V=Yt[R];if(V!==void 0)return iC(V)})(K),J=O.message;te===void 0&&(te=re.INTERNAL,J="Unknown error status: "+K+" with message "+O.message),x=!0,N.a_(new de(te,J)),v.close()}else ue(yn,`RPC '${e}' stream ${s} received:`,P),N.u_(P)}})),A(u,tR.STAT_EVENT,(C=>{C.stat===fv.PROXY?ue(yn,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===fv.NOPROXY&&ue(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function HC(){return typeof window<"u"?window:null}function Cm(){return typeof document<"u"?document:null}function qp(n){return new ej(n,!0)}class GC{constructor(e,t,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const BS="PersistentStream";class $C{constructor(e,t,i,s,o,l,u,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Ot(t.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new de(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(BS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(BS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Qj extends $C{constructor(e,t,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ij(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Ce.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ce.min():l.readTime?Nn(l.readTime):Ce.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Rv(this.serializer),t.addTarget=(function(o,l){let u;const d=l.target;if(u=Jm(d)?{documents:hC(o,d)}:{query:dC(o,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=aC(o,l.resumeToken);const f=Av(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(Ce.min())>0){u.readTime=Tc(o,l.snapshotVersion.toTimestamp());const f=Av(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const i=sj(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Rv(this.serializer),t.removeTarget=e,this.q_(t)}}class Xj extends $C{constructor(e,t,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=rj(e.writeResults,e.commitTime),i=Nn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Rv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>ip(this.serializer,i)))};this.q_(t)}}class Wj{}class Zj extends Wj{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new de(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,Iv(t,i),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(re.UNKNOWN,o.toString())}))}Ho(e,t,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,Iv(t,i),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(re.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Jj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ot(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Fo="RemoteStore";class eU{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{$o(this)&&(ue(Fo,"Restarting streams for network reachability change."),await(async function(d){const f=Te(d);f.Ea.add(4),await md(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Hp(f)})(this))}))})),this.Ra=new Jj(i,s)}}async function Hp(n){if($o(n))for(const e of n.da)await e(!0)}async function md(n){for(const e of n.da)await e(!1)}function Gp(n,e){const t=Te(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ib(t)?nb(t):Mc(t).O_()&&tb(t,e))}function Ec(n,e){const t=Te(n),i=Mc(t);t.Ia.delete(e),i.O_()&&KC(t,e),t.Ia.size===0&&(i.O_()?i.L_():$o(t)&&t.Ra.set("Unknown"))}function tb(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mc(n).Y_(e)}function KC(n,e){n.Va.Ue(e),Mc(n).Z_(e)}function nb(n){n.Va=new X9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Mc(n).start(),n.Ra.ua()}function ib(n){return $o(n)&&!Mc(n).x_()&&n.Ia.size>0}function $o(n){return Te(n).Ea.size===0}function YC(n){n.Va=void 0}async function tU(n){n.Ra.set("Online")}async function nU(n){n.Ia.forEach(((e,t)=>{tb(n,e)}))}async function iU(n,e){YC(n),ib(n)?(n.Ra.ha(e),nb(n)):n.Ra.set("Unknown")}async function rU(n,e,t){if(n.Ra.set("Online"),e instanceof sC&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(n,e)}catch(i){ue(Fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await hp(n,i)}else if(e instanceof Im?n.Va.Ze(e):e instanceof rC?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const i=await OC(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(jt.EMPTY_BYTE_STRING,g.snapshotVersion)),KC(o,d);const v=new es(g.target,d,f,g.sequenceNumber);tb(o,v)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(i){ue(Fo,"Failed to raise snapshot:",i),await hp(n,i)}}async function hp(n,e,t){if(!Na(e))throw e;n.Ea.add(1),await md(n),n.Ra.set("Offline"),t||(t=()=>OC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(Fo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Hp(n)}))}function QC(n,e){return e().catch((t=>hp(n,t,e)))}async function Pc(n){const e=Te(n),t=ba(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:So;for(;sU(e);)try{const s=await qj(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,aU(e,s)}catch(s){await hp(e,s)}XC(e)&&WC(e)}function sU(n){return $o(n)&&n.Ta.length<10}function aU(n,e){n.Ta.push(e);const t=ba(n);t.O_()&&t.X_&&t.ea(e.mutations)}function XC(n){return $o(n)&&!ba(n).x_()&&n.Ta.length>0}function WC(n){ba(n).start()}async function oU(n){ba(n).ra()}async function lU(n){const e=ba(n);for(const t of n.Ta)e.ea(t.mutations)}async function cU(n,e,t){const i=n.Ta.shift(),s=q_.from(i,e,t);await QC(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Pc(n)}async function uU(n,e){e&&ba(n).X_&&await(async function(i,s){if((function(l){return K9(l)&&l!==re.ABORTED})(s.code)){const o=i.Ta.shift();ba(i).B_(),await QC(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Pc(i)}})(n,e),XC(n)&&WC(n)}async function FS(n,e){const t=Te(n);t.asyncQueue.verifyOperationInProgress(),ue(Fo,"RemoteStore received new credentials");const i=$o(t);t.Ea.add(3),await md(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Hp(t)}async function Ov(n,e){const t=Te(n);e?(t.Ea.delete(2),await Hp(t)):e||(t.Ea.add(2),await md(t),t.Ra.set("Unknown"))}function Mc(n){return n.ma||(n.ma=(function(t,i,s){const o=Te(t);return o.sa(),new Qj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:tU.bind(null,n),t_:nU.bind(null,n),r_:iU.bind(null,n),H_:rU.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ib(n)?nb(n):n.Ra.set("Unknown")):(await n.ma.stop(),YC(n))}))),n.ma}function ba(n){return n.fa||(n.fa=(function(t,i,s){const o=Te(t);return o.sa(),new Xj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:oU.bind(null,n),r_:uU.bind(null,n),ta:lU.bind(null,n),na:cU.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Pc(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(Fo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class rb{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){const l=Date.now()+i,u=new rb(e,t,l,s,o);return u.start(i),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sb(n,e){if(Ot("AsyncQueue",`${e}: ${n}`),Na(n))return new de(re.UNAVAILABLE,`${e}: ${n}`);throw n}class rc{static emptySet(e){return new rc(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=nh(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new rc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class qS{constructor(){this.ga=new pt(ye.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class xc{constructor(e,t,i,s,o,l,u,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,s,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new xc(e,t,rc.emptySet(t),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Op(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class hU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class dU{constructor(){this.queries=HS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=Te(t),o=s.queries;s.queries=HS(),o.forEach(((l,u)=>{for(const d of u.Sa)d.onError(i)}))})(this,new de(re.ABORTED,"Firestore shutting down"))}}function HS(){return new fs((n=>qR(n)),Op)}async function ZC(n,e){const t=Te(n);let i=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new hU,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=sb(l,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&ab(t)}async function JC(n,e){const t=Te(n),i=e.query;let s=3;const o=t.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function fU(n,e){const t=Te(n);let i=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(s)&&(i=!0);l.wa=s}}i&&ab(t)}function mU(n,e,t){const i=Te(n),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);i.queries.delete(e)}function ab(n){n.Ca.forEach((e=>{e.next()}))}var Lv,GS;(GS=Lv||(Lv={})).Ma="default",GS.Cache="cache";class eN{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new xc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lv.Cache}}class tN{constructor(e){this.key=e}}class nN{constructor(e){this.key=e}}class pU{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=GR(e),this.tu=new rc(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new qS,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const _=s.get(g),x=hd(this.query,v)?v:null,N=!!_&&this.mutatedKeys.has(_.key),A=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let C=!1;_&&x?_.data.isEqual(x.data)?N!==A&&(i.track({type:3,doc:x}),C=!0):this.su(_,x)||(i.track({type:2,doc:x}),C=!0,(d&&this.eu(x,d)>0||f&&this.eu(x,f)<0)&&(u=!0)):!_&&x?(i.track({type:0,doc:x}),C=!0):_&&!x&&(i.track({type:1,doc:_}),C=!0,(d||f)&&(u=!0)),C&&(x?(l=l.add(x),o=A?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:l,iu:i,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(x,N){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:C})}};return A(x)-A(N)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(i),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new xc(this.query,e.tu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new nN(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new tN(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return xc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Oc="SyncEngine";class gU{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class yU{constructor(e){this.key=e,this.hu=!1}}class vU{constructor(e,t,i,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new fs((u=>qR(u)),Op),this.Iu=new Map,this.Eu=new Set,this.du=new pt(ye.comparator),this.Au=new Map,this.Ru=new Q_,this.Vu={},this.mu=new Map,this.fu=Bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _U(n,e,t=!0){const i=$p(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await iN(i,e,t,!0),s}async function bU(n,e){const t=$p(n);await iN(t,e,!0,!1)}async function iN(n,e,t,i){const s=await lp(n.localStore,ni(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return i&&(u=await ob(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&Gp(n.remoteStore,s),u}async function ob(n,e,t,i,s){n.pu=(v,_,x)=>(async function(A,C,P,z){let O=C.view.ru(P);O.Cs&&(O=await Vv(A.localStore,C.query,!1).then((({documents:S})=>C.view.ru(S,O))));const K=z&&z.targetChanges.get(C.targetId),te=z&&z.targetMismatches.get(C.targetId)!=null,J=C.view.applyChanges(O,A.isPrimaryClient,K,te);return jv(A,C.targetId,J.au),J.snapshot})(n,v,_,x);const o=await Vv(n.localStore,e,!0),l=new pU(e,o.Qs),u=l.ru(o.documents),d=fd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),f=l.applyChanges(u,n.isPrimaryClient,d);jv(n,t,f.au);const g=new gU(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function TU(n,e,t){const i=Te(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((l=>!Op(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await wc(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Ec(i.remoteStore,s.targetId),Sc(i,s.targetId)})).catch(Ca)):(Sc(i,s.targetId),await wc(i.localStore,s.targetId,!0))}async function wU(n,e){const t=Te(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ec(t.remoteStore,i.targetId))}async function EU(n,e,t){const i=hb(n);try{const s=await(function(l,u){const d=Te(l),f=Ze.now(),g=u.reduce(((x,N)=>x.add(N.key)),Be());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let N=ti(),A=Be();return d.Ns.getEntries(x,g).next((C=>{N=C,N.forEach(((P,z)=>{z.isValidDocument()||(A=A.add(P))}))})).next((()=>d.localDocuments.getOverlayedDocuments(x,N))).next((C=>{v=C;const P=[];for(const z of u){const O=G9(z,v.get(z.key).overlayedDocument);O!=null&&P.push(new ms(z.key,O,VR(O.value.mapValue),Tn.exists(!0)))}return d.mutationQueue.addMutationBatch(x,f,P,u)})).next((C=>{_=C;const P=C.applyToLocalDocumentSet(v,A);return d.documentOverlayCache.saveOverlays(x,C.batchId,P)}))})).then((()=>({batchId:_.batchId,changes:KR(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new pt(Pe)),f=f.insert(u,d),l.Vu[l.currentUser.toKey()]=f})(i,s.batchId,t),await ka(i,s.changes),await Pc(i.remoteStore)}catch(s){const o=sb(s,"Failed to persist write");t.reject(o)}}async function rN(n,e){const t=Te(n);try{const i=await Bj(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Ee(l.hu,14607):s.removedDocuments.size>0&&(Ee(l.hu,42227),l.hu=!1))})),await ka(t,i,e)}catch(i){await Ca(i)}}function $S(n,e,t){const i=Te(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=Te(l);d.onlineState=u;let f=!1;d.queries.forEach(((g,v)=>{for(const _ of v.Sa)_.va(u)&&(f=!0)})),f&&ab(d)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function xU(n,e,t){const i=Te(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new pt(ye.comparator);l=l.insert(o,Nt.newNoDocument(o,Ce.min()));const u=Be().add(o),d=new dd(Ce.min(),new Map,new pt(Pe),l,u);await rN(i,d),i.du=i.du.remove(o),i.Au.delete(e),ub(i)}else await wc(i.localStore,e,!1).then((()=>Sc(i,e,t))).catch(Ca)}async function SU(n,e){const t=Te(n),i=e.batch.batchId;try{const s=await zj(t.localStore,e);cb(t,i,null),lb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ka(t,s)}catch(s){await Ca(s)}}async function AU(n,e,t){const i=Te(n);try{const s=await(function(l,u){const d=Te(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((v=>(Ee(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(i.localStore,e);cb(i,e,t),lb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ka(i,s)}catch(s){await Ca(s)}}function lb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function cb(n,e,t){const i=Te(n);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Sc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||sN(n,i)}))}function sN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ec(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ub(n))}function jv(n,e,t){for(const i of t)i instanceof tN?(n.Ru.addReference(i.key,e),IU(n,i)):i instanceof nN?(ue(Oc,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||sN(n,i.key)):_e(19791,{wu:i})}function IU(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ue(Oc,"New document in limbo: "+t),n.Eu.add(i),ub(n))}function ub(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ye(it.fromString(e)),i=n.fu.next();n.Au.set(i,new yU(t)),n.du=n.du.insert(t,i),Gp(n.remoteStore,new es(ni(Mp(t.path)),i,"TargetPurposeLimboResolution",Un.ce))}}async function ka(n,e,t){const i=Te(n),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,d)=>{l.push(i.pu(d,e,t).then((f=>{if((f||t)&&i.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=Z_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(l),i.Pu.H_(s),await(async function(d,f){const g=Te(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>$.forEach(f,(_=>$.forEach(_.Es,(x=>g.persistence.referenceDelegate.addReference(v,_.targetId,x))).next((()=>$.forEach(_.ds,(x=>g.persistence.referenceDelegate.removeReference(v,_.targetId,x)))))))))}catch(v){if(!Na(v))throw v;ue(J_,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const x=g.Ms.get(_),N=x.snapshotVersion,A=x.withLastLimboFreeSnapshotVersion(N);g.Ms=g.Ms.insert(_,A)}}})(i.localStore,o))}async function RU(n,e){const t=Te(n);if(!t.currentUser.isEqual(e)){ue(Oc,"User change. New user:",e.toKey());const i=await MC(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new de(re.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ka(t,i.Ls)}}function CU(n,e){const t=Te(n),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let s=Be();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const u=t.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}async function NU(n,e){const t=Te(n),i=await Vv(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&jv(t,e.targetId,s.au),s}async function DU(n,e){const t=Te(n);return jC(t.localStore,e).then((i=>ka(t,i)))}async function kU(n,e,t,i){const s=Te(n),o=await(function(u,d){const f=Te(u),g=Te(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(v=>g.er(v,d).next((_=>_?f.localDocuments.getDocuments(v,_):$.resolve(null)))))})(s.localStore,e);o!==null?(t==="pending"?await Pc(s.remoteStore):t==="acknowledged"||t==="rejected"?(cb(s,e,i||null),lb(s,e),(function(u,d){Te(Te(u).mutationQueue).ir(d)})(s.localStore,e)):_e(6720,"Unknown batchState",{Su:t}),await ka(s,o)):ue(Oc,"Cannot apply mutation batch with id: "+e)}async function VU(n,e){const t=Te(n);if($p(t),hb(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await KS(t,i.toArray());t.gu=!0,await Ov(t.remoteStore,!0);for(const o of s)Gp(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):s=s.then((()=>(Sc(t,l),wc(t.localStore,l,!0)))),Ec(t.remoteStore,l)})),await s,await KS(t,i),(function(l){const u=Te(l);u.Au.forEach(((d,f)=>{Ec(u.remoteStore,f)})),u.Ru.Jr(),u.Au=new Map,u.du=new pt(ye.comparator)})(t),t.gu=!1,await Ov(t.remoteStore,!1)}}async function KS(n,e,t){const i=Te(n),s=[],o=[];for(const l of e){let u;const d=i.Iu.get(l);if(d&&d.length!==0){u=await lp(i.localStore,ni(d[0]));for(const f of d){const g=i.Tu.get(f),v=await NU(i,g);v.snapshot&&o.push(v.snapshot)}}else{const f=await LC(i.localStore,l);u=await lp(i.localStore,f),await ob(i,aN(f),l,!1,u.resumeToken)}s.push(u)}return i.Pu.H_(o),s}function aN(n){return BR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function PU(n){return(function(t){return Te(Te(t).persistence).Ts()})(Te(n).localStore)}async function MU(n,e,t,i){const s=Te(n);if(s.gu)return void ue(Oc,"Ignoring unexpected query state notification.");const o=s.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await jC(s.localStore,HR(o[0])),u=dd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",jt.EMPTY_BYTE_STRING);await ka(s,l,u);break}case"rejected":await wc(s.localStore,e,!0),Sc(s,e,i);break;default:_e(64155,t)}}async function OU(n,e,t){const i=$p(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){ue(Oc,"Adding an already active target "+s);continue}const o=await LC(i.localStore,s),l=await lp(i.localStore,o);await ob(i,aN(o),l.targetId,!1,l.resumeToken),Gp(i.remoteStore,l)}for(const s of t)i.Iu.has(s)&&await wc(i.localStore,s,!1).then((()=>{Ec(i.remoteStore,s),Sc(i,s)})).catch(Ca)}}function $p(n){const e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xU.bind(null,e),e.Pu.H_=fU.bind(null,e.eventManager),e.Pu.yu=mU.bind(null,e.eventManager),e}function hb(n){const e=Te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AU.bind(null,e),e}class qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return PC(this.persistence,new VC,e.initialUser,this.serializer)}Cu(e){return new X_(Fp.mi,this.serializer)}Du(e){return new qC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qh.provider={build:()=>new qh};class LU extends qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ee(this.persistence.referenceDelegate instanceof op,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new IC(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new X_((i=>op.mi(i,t)),this.serializer)}}class oN extends qh{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await hb(this.xu.syncEngine),await Pc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return PC(this.persistence,new VC,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new IC(i,e.asyncQueue,t)}Mu(e,t){const i=new KL(t,this.persistence);return new $L(e.asyncQueue,i)}Cu(e){const t=kC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new W_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,HC(),Cm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new qC}}class jU extends oN{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof R0&&(this.sharedClientState.syncEngine={Co:kU.bind(null,t),vo:MU.bind(null,t),Fo:OU.bind(null,t),Ts:PU.bind(null,t),Do:DU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await VU(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=HC();if(!R0.v(t))throw new de(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=kC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new R0(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Hh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$S(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=RU.bind(null,this.syncEngine),await Ov(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dU})()}createDatastore(e){const t=qp(e.databaseInfo.databaseId),i=(function(o){return new Yj(o)})(e.databaseInfo);return(function(o,l,u,d){return new Zj(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,o,l,u){return new eU(i,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>$S(this.syncEngine,t,0)),(function(){return zS.v()?new zS:new Hj})())}createSyncEngine(e,t){return(function(s,o,l,u,d,f,g){const v=new vU(s,o,l,u,d,f);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Te(t);ue(Fo,"RemoteStore shutting down."),i.Ea.add(5),await md(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Hh.provider={build:()=>new Hh};class lN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ta="FirestoreClient";class UU{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=C_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{ue(Ta,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(ue(Ta,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sb(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function N0(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Ta,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await MC(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function YS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zU(n);ue(Ta,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>FS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>FS(e.remoteStore,s))),n._onlineComponents=e}async function zU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Ta,"Using user provided OfflineComponentProvider");try{await N0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Nh("Error using user provided cache. Falling back to memory cache: "+t),await N0(n,new qh)}}else ue(Ta,"Using default OfflineComponentProvider"),await N0(n,new LU(void 0));return n._offlineComponents}async function cN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Ta,"Using user provided OnlineComponentProvider"),await YS(n,n._uninitializedComponentsProvider._online)):(ue(Ta,"Using default OnlineComponentProvider"),await YS(n,new Hh))),n._onlineComponents}function BU(n){return cN(n).then((e=>e.syncEngine))}async function Uv(n){const e=await cN(n),t=e.eventManager;return t.onListen=_U.bind(null,e.syncEngine),t.onUnlisten=TU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wU.bind(null,e.syncEngine),t}function FU(n,e,t={}){const i=new is;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,f){const g=new lN({next:_=>{g.Nu(),l.enqueueAndForget((()=>JC(o,v))),_.fromCache&&d.source==="server"?f.reject(new de(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new eN(u,g,{includeMetadataChanges:!0,qa:!0});return ZC(o,v)})(await Uv(n),n.asyncQueue,e,t,i))),i.promise}function uN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const QS=new Map;const qU="firestore.googleapis.com",XS=!0;class WS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qU,this.ssl=XS}else this.host=e.host,this.ssl=e.ssl??XS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AC)throw new de(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uN(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class db{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new PL;switch(i.type){case"firstParty":return new LL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=QS.get(t);i&&(ue("ComponentProvider","Removing Datastore"),QS.delete(t),i.terminate())})(this),Promise.resolve()}}class ps{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ps(this.firestore,e,this._query)}}class Lt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ga(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ld(t,Lt._jsonSchema))return new Lt(e,i||null,new ye(it.fromString(t.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Xt("string",Lt._jsonSchemaVersion),referencePath:Xt("string")};class ga extends ps{constructor(e,t,i){super(e,t,Mp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new ye(e))}withConverter(e){return new ga(this.firestore,e,this._path)}}function Kp(n,e,...t){if(n=At(n),aR("collection","path",e),n instanceof db){const i=it.fromString(e,...t);return Bx(i),new ga(n,null,i)}{if(!(n instanceof Lt||n instanceof ga))throw new de(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(it.fromString(e,...t));return Bx(i),new ga(n.firestore,null,i)}}function Ei(n,e,...t){if(n=At(n),arguments.length===1&&(e=C_.newId()),aR("doc","path",e),n instanceof db){const i=it.fromString(e,...t);return zx(i),new Lt(n,null,new ye(i))}{if(!(n instanceof Lt||n instanceof ga))throw new de(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(it.fromString(e,...t));return zx(i),new Lt(n.firestore,n instanceof ga?n.converter:null,new ye(i))}}const ZS="AsyncQueue";class JS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GC(this,"async_queue_retry"),this._c=()=>{const i=Cm();i&&ue(ZS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Cm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Cm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new is;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Na(e))throw e;ue(ZS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ot("INTERNAL UNHANDLED ERROR: ",eA(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=rb.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&_e(47125,{Pc:eA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function eA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function tA(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class wa extends db{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new JS,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JS(e),this._firestoreClient=void 0,await e}}}function HU(n,e,t){t||(t=Zm);const i=__(n,"firestore");if(i.isInitialized(t)){const s=i.getImmediate({identifier:t}),o=i.getOptions(t);if(ko(o,e))return s;throw new de(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new de(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AC)throw new de(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Cc(e.host)&&a2(e.host),i.initialize({options:e,instanceIdentifier:t})}function fb(n){if(n._terminated)throw new de(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||GU(n),n._firestoreClient}function GU(n){const e=n._freezeSettings(),t=(function(s,o,l,u){return new T9(s,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,uN(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new UU(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}class Ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ti(jt.fromBase64String(e))}catch(t){throw new de(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ti(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ti._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ld(e,Ti._jsonSchema))return Ti.fromBase64String(e.bytes)}}Ti._jsonSchemaVersion="firestore/bytes/1.0",Ti._jsonSchema={type:Xt("string",Ti._jsonSchemaVersion),bytes:Xt("string")};class Yp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mb{constructor(e){this._methodName=e}}class br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(ld(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:Xt("string",br._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};class Tr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ld(e,Tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Tr(e.vectorValues);throw new de(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tr._jsonSchemaVersion="firestore/vectorValue/1.0",Tr._jsonSchema={type:Xt("string",Tr._jsonSchemaVersion),vectorValues:Xt("object")};const $U=/^__.*__$/;class KU{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vc(e,this.data,t,this.fieldTransforms)}}class hN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ms(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:n})}}class pb{constructor(e,t,i,s,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return dp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dN(this.Ac)&&$U.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class YU{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||qp(e)}Cc(e,t,i,s=!1){return new pb({Ac:e,methodName:t,Dc:i,path:Et.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qp(n){const e=n._freezeSettings(),t=qp(n._databaseId);return new YU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fN(n,e,t,i,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);gb("Data must be an object, but it was:",l,i);const u=mN(i,l);let d,f;if(o.merge)d=new zn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const _=zv(e,v,t);if(!l.contains(_))throw new de(re.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);gN(g,_)||g.push(_)}d=new zn(g),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new KU(new bn(u),d,f)}class Xp extends mb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xp}}function QU(n,e,t,i){const s=n.Cc(1,e,t);gb("Data must be an object, but it was:",s,i);const o=[],l=bn.empty();Da(i,((d,f)=>{const g=yb(e,d,t);f=At(f);const v=s.yc(g);if(f instanceof Xp)o.push(g);else{const _=pd(f,v);_!=null&&(o.push(g),l.set(g,_))}}));const u=new zn(o);return new hN(l,u,s.fieldTransforms)}function XU(n,e,t,i,s,o){const l=n.Cc(1,e,t),u=[zv(e,i,t)],d=[s];if(o.length%2!=0)throw new de(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(zv(e,o[_])),d.push(o[_+1]);const f=[],g=bn.empty();for(let _=u.length-1;_>=0;--_)if(!gN(f,u[_])){const x=u[_];let N=d[_];N=At(N);const A=l.yc(x);if(N instanceof Xp)f.push(x);else{const C=pd(N,A);C!=null&&(f.push(x),g.set(x,C))}}const v=new zn(f);return new hN(g,v,l.fieldTransforms)}function WU(n,e,t,i=!1){return pd(t,n.Cc(i?4:3,e))}function pd(n,e){if(pN(n=At(n)))return gb("Unsupported field value:",e,n),mN(n,e);if(n instanceof mb)return(function(i,s){if(!dN(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let l=0;for(const u of i){let d=pd(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,s){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return j9(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ze.fromDate(i);return{timestampValue:Tc(s.serializer,o)}}if(i instanceof Ze){const o=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Tc(s.serializer,o)}}if(i instanceof br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ti)return{bytesValue:aC(s.serializer,i._byteString)};if(i instanceof Lt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Tr)return(function(l,u){return{mapValue:{fields:{[L_]:{stringValue:j_},[pc]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return B_(u.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${Ip(i)}`)})(n,e)}function mN(n,e){const t={};return xR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(n,((i,s)=>{const o=pd(s,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function pN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof br||n instanceof Ti||n instanceof Lt||n instanceof mb||n instanceof Tr)}function gb(n,e,t){if(!pN(t)||!oR(t)){const i=Ip(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function zv(n,e,t){if((e=At(e))instanceof Yp)return e._internalPath;if(typeof e=="string")return yb(n,e);throw dp("Field path arguments must be of type string or ",n,!1,void 0,t)}const ZU=new RegExp("[~\\*/\\[\\]]");function yb(n,e,t){if(e.search(ZU)>=0)throw dp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yp(...e.split("."))._internalPath}catch{throw dp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dp(n,e,t,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new de(re.INVALID_ARGUMENT,u+n+d)}function gN(n,e){return n.some((t=>t.isEqual(e)))}class yN{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class JU extends yN{data(){return super.data()}}function vb(n,e){return typeof e=="string"?yb(n,e):e instanceof Yp?e._internalPath:e._delegate._internalPath}function vN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _b{}class bb extends _b{}function qo(n,e,...t){let i=[];e instanceof _b&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((d=>d instanceof wb)).length,u=o.filter((d=>d instanceof Tb)).length;if(l>1||l>0&&u>0)throw new de(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class Tb extends bb{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Tb(e,t,i)}_apply(e){const t=this._parse(e);return _N(e._query,t),new ps(e.firestore,e.converter,Sv(e._query,t))}_parse(e){const t=Qp(e.firestore);return(function(o,l,u,d,f,g,v){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new de(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){rA(v,g);const N=[];for(const A of v)N.push(iA(d,o,A));_={arrayValue:{values:N}}}else _=iA(d,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||rA(v,g),_=WU(u,l,v,g==="in"||g==="not-in");return Ke.create(f,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class wb extends _b{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wb(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ot.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)_N(l,d),l=Sv(l,d)})(e._query,t),new ps(e.firestore,e.converter,Sv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Eb extends bb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Eb(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new de(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new de(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zh(o,l)})(e._query,this._field,this._direction);return new ps(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new kc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Gh(n,e="asc"){const t=e,i=vb("orderBy",n);return Eb._create(i,t)}class xb extends bb{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new xb(e,t,i)}_apply(e){return new ps(e.firestore,e.converter,tp(e._query,this._limit,this._limitType))}}function nA(n){return xb._create("limit",n,"F")}function iA(n,e,t){if(typeof(t=At(t))=="string"){if(t==="")throw new de(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FR(e)&&t.indexOf("/")!==-1)throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(it.fromString(t));if(!ye.isDocumentKey(i))throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return jh(n,new ye(i))}if(t instanceof Lt)return jh(n,t._key);throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ip(t)}.`)}function rA(n,e){if(!Array.isArray(n)||n.length===0)throw new de(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _N(n,e){const t=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ez{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Da(e,((s,o)=>{i[s]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[pc].arrayValue?.values?.map((i=>Tt(i.doubleValue)));return new Tr(t)}convertGeoPoint(e){return new br(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Vp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Oh(e));default:return null}}convertTimestamp(e){const t=os(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=it.fromString(e);Ee(gC(i),9688,{name:e});const s=new Lo(i.get(1),i.get(3)),o=new ye(i.popFirst(5));return s.isEqual(t)||Ot(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function bN(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class sh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ro extends yN{constructor(e,t,i,s,o,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(vb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ro._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ro._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ro._jsonSchema={type:Xt("string",Ro._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Nm extends Ro{data(e={}){return super.data(e)}}class Co{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new sh(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Nm(this._firestore,this._userDataWriter,i.key,i,new sh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new Nm(s._firestore,s._userDataWriter,u.doc.key,u.doc,new sh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new Nm(s._firestore,s._userDataWriter,u.doc.key,u.doc,new sh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:tz(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=C_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}Co._jsonSchemaVersion="firestore/querySnapshot/1.0",Co._jsonSchema={type:Xt("string",Co._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Sb extends ez{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ti(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,t)}}function Wp(n){n=Fi(n,ps);const e=Fi(n.firestore,wa),t=fb(e),i=new Sb(e);return vN(n._query),FU(t,n._query).then((s=>new Co(e,i,n,s)))}function Ab(n,e,t){n=Fi(n,Lt);const i=Fi(n.firestore,wa),s=bN(n.converter,e,t);return ng(i,[fN(Qp(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Tn.none())])}function Zp(n,e,t,...i){n=Fi(n,Lt);const s=Fi(n.firestore,wa),o=Qp(s);let l;return l=typeof(e=At(e))=="string"||e instanceof Yp?XU(o,"updateDoc",n._key,e,t,i):QU(o,"updateDoc",n._key,e),ng(s,[l.toMutation(n._key,Tn.exists(!0))])}function Jp(n){return ng(Fi(n.firestore,wa),[new Up(n._key,Tn.none())])}function eg(n,e){const t=Fi(n.firestore,wa),i=Ei(n),s=bN(n.converter,e);return ng(t,[fN(Qp(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Tn.exists(!1))]).then((()=>i))}function tg(n,...e){n=At(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||tA(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(tA(e[i])){const d=e[i];e[i]=d.next?.bind(d),e[i+1]=d.error?.bind(d),e[i+2]=d.complete?.bind(d)}let o,l,u;if(n instanceof Lt)l=Fi(n.firestore,wa),u=Mp(n._key.path),o={next:d=>{e[i]&&e[i](nz(l,n,d))},error:e[i+1],complete:e[i+2]};else{const d=Fi(n,ps);l=Fi(d.firestore,wa),u=d._query;const f=new Sb(l);o={next:g=>{e[i]&&e[i](new Co(l,f,d,g))},error:e[i+1],complete:e[i+2]},vN(n._query)}return(function(f,g,v,_){const x=new lN(_),N=new eN(g,x,v);return f.asyncQueue.enqueueAndForget((async()=>ZC(await Uv(f),N))),()=>{x.Nu(),f.asyncQueue.enqueueAndForget((async()=>JC(await Uv(f),N)))}})(fb(l),u,s,o)}function ng(n,e){return(function(i,s){const o=new is;return i.asyncQueue.enqueueAndForget((async()=>EU(await BU(i),s,o))),o.promise})(fb(n),e)}function nz(n,e,t){const i=t.docs.get(e._key),s=new Sb(n);return new Ro(n,s,e._key,i,new sh(t.hasPendingWrites,t.fromCache),e.converter)}class iz{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=oz(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function rz(n){return new iz(n)}class sz{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Hh.provider,this._offlineComponentProvider={build:t=>new oN(t,e?.cacheSizeBytes,this.forceOwnership)}}}class az{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Hh.provider,this._offlineComponentProvider={build:t=>new jU(t,e?.cacheSizeBytes)}}}function oz(n){return new sz(n?.forceOwnership)}function lz(){return new az}(function(e,t=!0){(function(s){Dc=s})(Nc),oc(new Vo("firestore",((i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),u=new wa(new ML(i.getProvider("auth-internal")),new jL(l,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(f.options.projectId,g)})(l,s),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),fa(Ox,Lx,e),fa(Ox,Lx,"esm2020")})();const cz={apiKey:"AIzaSyAQ5FdR_OjZvMkTOYy9auXDctOQXGtZPgg",authDomain:"house-budget-pwa.firebaseapp.com",projectId:"house-budget-pwa",storageBucket:"house-budget-pwa.firebasestorage.app",messagingSenderId:"7591891522",appId:"1:7591891522:web:ebf15777f6c206129753db",measurementId:"G-6QDXEYXPTE"},TN=f2(cz),Dn=HU(TN,{localCache:rz({tabManager:lz()})}),Js=CL(TN),D0=n=>({id:n.uid,username:n.email||n.uid,displayName:n.displayName||n.email?.split("@")[0]||"User",email:n.email||void 0}),wr=p_()(BI(n=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,t)=>{n({isLoading:!0,loginError:null});try{const s=(await d6(Js,e,t)).user;if(!s.emailVerified)return await Sx(Js),n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${s.email} not verified`),!1;const o=D0(s);return n({currentUser:o,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${o.email}`),!0}catch(i){console.error("Login error:",i),console.error("Error code:",i.code),console.error("Error message:",i.message);let s="Login failed. Please try again.";if(i.code)switch(i.code){case"auth/invalid-email":s="Invalid email address.";break;case"auth/user-disabled":s="This account has been disabled.";break;case"auth/user-not-found":s="No account found with this email.";break;case"auth/wrong-password":s="Incorrect password.";break;case"auth/too-many-requests":s="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":s="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":s="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${i.code}`),s="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",i),s="An unexpected error occurred. Please try again.";return n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:s}),!1}},register:async(e,t,i)=>{n({isLoading:!0,loginError:null});try{const o=(await h6(Js,e,t)).user;await m6(o,{displayName:i}),await xx(o);const l=D0(o);return n({currentUser:l,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${l.email}, verification email sent`),!0}catch(s){console.error("Registration error:",s);let o="Registration failed. Please try again.";switch(s.code){case"auth/email-already-in-use":o="An account with this email already exists.";break;case"auth/invalid-email":o="Invalid email address.";break;case"auth/weak-password":o="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":o="Email/password accounts are not enabled.";break}return n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:o}),!1}},logout:async()=>{try{await Sx(Js),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{n({loginError:null})},sendPasswordReset:async e=>{n({isLoading:!0,loginError:null});try{return await u6(Js,e),n({isLoading:!1}),!0}catch(t){console.error("Password reset error:",t);let i="Failed to send password reset email. Please try again.";switch(t.code){case"auth/user-not-found":i="No account found with this email.";break;case"auth/invalid-email":i="Invalid email address.";break;case"auth/too-many-requests":i="Too many attempts. Please try again later.";break}return n({isLoading:!1,loginError:i}),!1}},sendEmailVerification:async()=>{const e=Js.currentUser;if(!e)return n({loginError:"No user is currently signed in."}),!1;n({isLoading:!0,loginError:null});try{return await xx(e),n({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(t){console.error("Email verification error:",t);let i="Failed to send verification email. Please try again.";switch(t.code){case"auth/too-many-requests":i="Too many verification emails sent. Please wait before trying again.";break}return n({isLoading:!1,loginError:i}),!1}},resendEmailVerification:async()=>{const e=wr.getState();if(e.lastVerificationEmailSent){const t=Date.now()-e.lastVerificationEmailSent,i=60*1e3;if(t<i){const s=Math.ceil((i-t)/1e3);return n({loginError:`Please wait ${s} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const t=Js.currentUser;if(!t||!t.email)return n({loginError:"No user is currently signed in."}),!1;n({isLoading:!0,loginError:null});try{const i=Go.credential(t.email,e);return await c6(t,i),await v6(t),n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${t.email}`),!0}catch(i){console.error("Account deletion error:",i);let s="Failed to delete account. Please try again.";switch(i.code){case"auth/requires-recent-login":s="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":s="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":s="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":s="Network error. Please check your connection and try again.";break}return n({isLoading:!1,loginError:s}),!1}},initializeAuth:()=>wr.getState().isInitialized?()=>{}:(n({isInitialized:!1}),y6(Js,i=>{const s=Date.now(),o=wr.getState(),l=i?D0(i):null,u=o.lastAuthTime&&s-o.lastAuthTime<o.offlineGracePeriod,f=typeof navigator<"u"&&!navigator.onLine&&o.isAuthenticated&&u&&!l,g=i?i.emailVerified:!0,v=i&&g||!!f,_=i?l:f?o.currentUser:null;n({currentUser:_,isAuthenticated:v,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:i&&g?s:o.lastAuthTime}),_?console.log(` Auth state: User is signed in (${_.email})`,f?"(offline grace period)":g?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:n=>({isAuthenticated:n.isAuthenticated,currentUser:n.currentUser,lastAuthTime:n.lastAuthTime,offlineGracePeriod:n.offlineGracePeriod,lastVerificationEmailSent:n.lastVerificationEmailSent})})),k0=n=>Kp(Dn,"users",n,"transactions"),yr={subscribeToTransactions:(n,e)=>{const t=qo(k0(n),Gh("date","desc"));return tg(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllTransactions:async n=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${n}`);const e=qo(k0(n),Gh("date","desc")),i=(await Wp(e)).docs.map(s=>({id:s.id,...s.data()}));return console.log(` Fetched ${i.length} transactions:`,i.map(s=>({id:s.id,description:s.description}))),i},addTransaction:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${t}`);try{console.log(" About to call addDoc with:",i);const s=await eg(k0(e),i);console.log(" addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`),console.log(` Document path: ${s.path}`);const o={id:s.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(s){throw console.error(" addDoc failed:",s),console.error("Error message:",s.message),s}},updateTransaction:async(n,e,t)=>{const i=Ei(Dn,"users",n,"transactions",e);return await Zp(i,t)},deleteTransaction:async(n,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${n}`);try{const t=Ei(Dn,"users",n,"transactions",e);console.log(` Deleting document at path: ${t.path}`),await Jp(t),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(t){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,t),console.error("Error message:",t.message),t}}},V0=n=>Kp(Dn,"users",n,"envelopes"),la={subscribeToEnvelopes:(n,e)=>{const t=qo(V0(n),Gh("orderIndex","asc"));return tg(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllEnvelopes:async n=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",n);const e=V0(n),s=(await Wp(e)).docs.map((o,l)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??l})).sort((o,l)=>{const u=o.orderIndex??0,d=l.orderIndex??0;return u-d});return console.log(" Fetched envelopes:",s.length),s}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create envelope");console.log(` EnvelopeService.createEnvelope: Adding envelope for user ${e}:`,i),console.log(` Original envelope had temp ID: ${t}`);try{const s=await eg(V0(e),i);console.log(" Envelope addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`);const o={id:s.id,...i,userId:e};return console.log(" Final envelope result object:",o),o}catch(s){throw console.error(" Envelope addDoc failed:",s),s}},saveEnvelope:async(n,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const t=Ei(Dn,"users",n,"envelopes",e.id);return await Ab(t,e,{merge:!0})},updateBalance:async(n,e,t)=>{const i=Ei(Dn,"users",n,"envelopes",e);return await Zp(i,{currentBalance:t,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(n,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${n}`);const t=Ei(Dn,"users",n,"envelopes",e);await Jp(t),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},uz=({set:n,get:e,getCurrentUserId:t,isNetworkError:i})=>{const s=o=>({id:o.id,date:o.date?.toDate?.()?o.date.toDate().toISOString():o.date,amount:parseFloat(o.amount)||0,description:o.description||"",envelopeId:o.envelopeId||"",reconciled:o.reconciled||!1,type:o.type==="income"?"Income":o.type==="expense"?"Expense":"Transfer",transferId:o.transferId||void 0,userId:o.userId||void 0});return{createEnvelope:async o=>{const l=o.currentBalance&&o.currentBalance>0,u=l?{...o,currentBalance:0,orderIndex:o.orderIndex??0}:{...o,orderIndex:o.orderIndex??0},d=`temp-${Date.now()}-${Math.random()}`,f={...u,id:d};if(n(g=>({envelopes:[...g.envelopes,f],isLoading:!0})),l){console.log(` Creating initial deposit transaction locally first: ${f.name} (tempId: ${d})`);try{await e().addTransaction({description:"Initial Deposit",amount:o.currentBalance,envelopeId:d,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const g=e().getEnvelopeBalance(d);console.log(` Test balance for temp envelope ${d}: $${g.toNumber()}`)}catch(g){console.error(" Failed to create initial deposit transaction locally:",g)}}try{console.log(" Attempting Firebase envelope creation...");const g=t(),v={...u,id:"",userId:g},_=await la.createEnvelope(v);console.log(" Firebase envelope creation successful:",_);const x={id:_.id,name:_.name,currentBalance:_.currentBalance,lastUpdated:_.lastUpdated,isActive:_.isActive??!0,orderIndex:_.orderIndex??0,userId:_.userId};if(n(N=>({envelopes:N.envelopes.map(A=>A.id===d?x:A),isLoading:!1,pendingSync:!1})),l){console.log(` Updating transactions from temp envelope ID ${d} to real ID ${_.id}`),console.log(" Transactions before update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),n(A=>({transactions:A.transactions.map(C=>C.envelopeId===d?{...C,envelopeId:_.id}:C)})),console.log(" Transactions after envelopeId update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description})));const N=e().transactions.filter(A=>A.envelopeId===_.id&&A.id&&A.id.startsWith("temp-"));console.log(` Found ${N.length} transactions to sync for envelope ${_.id}:`,N.map(A=>({id:A.id,envelopeId:A.envelopeId})));for(const A of N)try{console.log(" Syncing transaction:",A);const C={...A,amount:A.amount.toString(),type:A.type.toLowerCase(),date:Ze.fromDate(new Date(A.date))},P=await yr.addTransaction(C);console.log(" Transaction synced:",P);const z=s(P);console.log(` Replacing temp transaction ${A.id} with Firebase transaction ${P.id}`),n(O=>({transactions:O.transactions.map(K=>K.id===A.id?z:K)}))}catch(C){console.error(` Failed to sync transaction ${A.id}:`,C)}console.log(" Final transactions after sync:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),n({pendingSync:!1}),console.log(` All transactions synced for envelope ${_.id}`)}}catch(g){console.error("Create Envelope Failed:",g),console.log("Error details:",{code:g?.code,message:g?.message,name:g?.name,isNetworkError:i(g)}),i(g)?(console.log(" Treating as offline scenario - keeping temp envelope and transactions"),n({isLoading:!1,pendingSync:!0,error:null})):(console.log(" Real error - removing temp envelope"),n(v=>({envelopes:v.envelopes.filter(_=>_.id!==d),transactions:v.transactions.filter(_=>_.envelopeId!==d),error:g.message,isLoading:!1})))}},addToEnvelope:async(o,l,u,d)=>{const f=d?typeof d=="string"?d:d.toISOString():new Date().toISOString();await e().addTransaction({description:u,amount:l,envelopeId:o,date:f,type:"Income",reconciled:!1})},spendFromEnvelope:async(o,l,u,d)=>{const f=d?typeof d=="string"?d:d.toISOString():new Date().toISOString();await e().addTransaction({description:u,amount:l,envelopeId:o,date:f,type:"Expense",reconciled:!1})},transferFunds:async(o,l,u,d,f)=>{console.log(`Transferring ${u} from ${o} to ${l} with note: ${d}`);const g=f?typeof f=="string"?f:f.toISOString():new Date().toISOString(),v=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(_=>_.id===l)?.name||"envelope"}`,amount:u,envelopeId:o,date:g,type:"Expense",transferId:v,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(_=>_.id===o)?.name||"envelope"}`,amount:u,envelopeId:l,date:g,type:"Income",transferId:v,reconciled:!1})},deleteEnvelope:async o=>{const l=e().transactions.filter(u=>u.envelopeId===o);n(u=>({envelopes:u.envelopes.filter(d=>d.id!==o),transactions:u.transactions.filter(d=>d.envelopeId!==o),isLoading:!0}));try{const u=t();await la.deleteEnvelope(u,o);for(const d of l)d.id&&!d.id.startsWith("temp-")&&await yr.deleteTransaction(u,d.id);await e().removeEnvelopeFromTemplates(o),n({isLoading:!1})}catch(u){if(console.error("Delete Envelope Failed:",u),i(u))n({isLoading:!1,pendingSync:!0,error:null});else{const d=e().envelopes.find(f=>f.id===o);n(d?f=>({envelopes:[...f.envelopes,d],transactions:[...f.transactions,...l],error:u.message,isLoading:!1}):{error:u.message,isLoading:!1})}}},renameEnvelope:async(o,l)=>{n(u=>({envelopes:u.envelopes.map(d=>d.id===o?{...d,name:l}:d),isLoading:!0}));try{n({isLoading:!1})}catch(u){console.error("Rename Envelope Failed:",u),n({error:u.message,isLoading:!1})}}}},P0=n=>Kp(Dn,"users",n,"distributionTemplates"),_i={subscribeToDistributionTemplates:(n,e)=>{const t=qo(P0(n),Gh("lastUsed","desc"));return tg(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllDistributionTemplates:async n=>{const e=qo(P0(n),Gh("lastUsed","desc"));return(await Wp(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const s=await eg(P0(e),i);console.log(" Template addDoc succeeded, docRef:",s);const o={id:s.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(s){throw console.error(" Template addDoc failed:",s),s}},saveDistributionTemplate:async(n,e)=>{const t=Ei(Dn,"users",n,"distributionTemplates",e.id);return await Ab(t,e,{merge:!0})},updateDistributionTemplate:async(n,e,t)=>{const i=Ei(Dn,"users",n,"distributionTemplates",e);return await Zp(i,t)},deleteDistributionTemplate:async(n,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${n}`);const t=Ei(Dn,"users",n,"distributionTemplates",e);await Jp(t),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},hz=({set:n,get:e,getCurrentUserId:t,isNetworkError:i})=>({saveTemplate:async(s,o,l)=>{console.log(" saveTemplate called with:",{name:s,distributions:o,note:l});try{const u=t(),d={id:`temp-${Date.now()}`,userId:u,name:s,note:l,lastUsed:new Date().toISOString(),distributions:o};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const f=_i.createDistributionTemplate(d),g=new Promise((_,x)=>setTimeout(()=>x(new Error("Firebase timeout - likely offline")),5e3)),v=await Promise.race([f,g]);console.log(" Firebase template save succeeded (online mode):",v),console.log(" Template saved to Firebase - real-time subscription will update local state"),console.log(" Template saved to Firebase:",v),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(f){throw console.log(" Firebase template save failed or timed out:",f.message),f}}catch(u){console.error(" Failed to save template to Firebase, saving locally:",u),console.log(" Error details:",{name:u?.name||"Unknown",message:u?.message||"Unknown",code:u?.code||"Unknown",isNetworkError:i(u)});const d=t(),f={id:`local-${Date.now()}`,userId:d,name:s,note:l,lastUsed:new Date().toISOString(),distributions:o};console.log(" Saving template locally (offline):",f),n(g=>({distributionTemplates:[...g.distributionTemplates,f],pendingSync:!0})),console.log(" Template saved locally as fallback:",f),console.log(" Store now has templates:",e().distributionTemplates.length)}},deleteTemplate:async s=>{try{const o=t();await _i.deleteDistributionTemplate(o,s),n(l=>({distributionTemplates:l.distributionTemplates.filter(u=>u.id!==s)})),console.log(" Template deleted from Firebase:",s)}catch(o){throw console.error(" Failed to delete template from Firebase:",o),o}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const s=e().distributionTemplates,o=e().envelopes,l=new Set(o.map(d=>d.id));let u=0;for(const d of s){const f={...d.distributions},g={};for(const[v,_]of Object.entries(d.distributions))l.has(v)&&(g[v]=_);if(Object.keys(g).length===0){console.log(` Deleting orphaned template: ${d.name}`);const v=t();await _i.deleteDistributionTemplate(v,d.id),u++}else if(JSON.stringify(g)!==JSON.stringify(f)){console.log(` Updating template ${d.name} - removed orphaned envelope references`);const v=t();await _i.updateDistributionTemplate(v,d.id,{distributions:g}),u++}}u>0?console.log(` Cleaned up ${u} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(s,o)=>{console.log(` Updating template references: ${s}  ${o}`);const l=e().distributionTemplates;let u=0;for(const d of l)if(d.distributions[s]!==void 0){const f={...d.distributions};f[o]=f[s],delete f[s],console.log(` Updating template: ${d.name}`);const g=t();await _i.updateDistributionTemplate(g,d.id,{distributions:f}),u++}u>0&&console.log(` Updated ${u} templates with new envelope reference`)},removeEnvelopeFromTemplates:async s=>{console.log(` Removing envelope ${s} from all templates`);const o=e().distributionTemplates;let l=0,u=0;for(const d of o)if(d.distributions[s]!==void 0){const f={...d.distributions};if(delete f[s],Object.keys(f).length===0){console.log(` Deleting template ${d.name} - no envelopes left`);const g=t();await _i.deleteDistributionTemplate(g,d.id),u++}else{console.log(` Removing envelope from template: ${d.name}`);const g=t();await _i.updateDistributionTemplate(g,d.id,{distributions:f}),l++}}(l>0||u>0)&&console.log(` Updated ${l} templates, deleted ${u} empty templates`)}}),M0=n=>Kp(Dn,"users",n,"appSettings"),Xr={subscribeToAppSettings:(n,e)=>{const t=qo(M0(n),nA(1));return tg(t,s=>{if(s.empty){e(null);return}const o=s.docs.map(l=>({id:l.id,...l.data()}))[0];e(o)})},getAppSettings:async n=>{const e=qo(M0(n),nA(1)),t=await Wp(e);if(t.empty)return null;const i=t.docs[0];return{id:i.id,...i.data()}},createAppSettings:async n=>{const{userId:e,...t}=n;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,t);try{const i=await eg(M0(e),t);console.log(" Settings addDoc succeeded, docRef:",i);const s={id:i.id,...t,userId:e};return console.log(" Final settings result object:",s),s}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(n,e)=>{const t=Ei(Dn,"users",n,"appSettings",e.id);return await Ab(t,e,{merge:!0})},updateAppSettings:async(n,e,t)=>{const i=Ei(Dn,"users",n,"appSettings",e);return await Zp(i,t)},deleteAppSettings:async(n,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${n}`);const t=Ei(Dn,"users",n,"appSettings",e);await Jp(t),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},wN=({set:n,get:e,getCurrentUserId:t})=>({updateAppSettings:async i=>{const s=e();if(!s.appSettings){try{await wN({set:n,get:e,getCurrentUserId:t}).initializeAppSettings();const o=e();if(o.appSettings){const l={...o.appSettings,...i};n({appSettings:l});const u=t();await Xr.updateAppSettings(u,o.appSettings.id,i),console.log(" App settings updated successfully")}}catch(o){console.error(" Failed to initialize/update settings:",o)}return}try{n(l=>({appSettings:{...l.appSettings,...i}}));const o=t();await Xr.updateAppSettings(o,s.appSettings.id,i),console.log(" App settings updated successfully")}catch(o){throw console.error(" Failed to update app settings:",o),n(l=>({appSettings:l.appSettings})),o}},initializeAppSettings:async()=>{try{const s={userId:t(),theme:"system"},o=await Xr.createAppSettings(s);n({appSettings:o}),console.log(" App settings initialized successfully")}catch(i){console.error(" Failed to initialize app settings:",i);const s=t();n({appSettings:{id:"local-settings",userId:s,theme:"system"}})}}}),dz=n=>n==="income"?"Income":n==="expense"?"Expense":n==="transfer"?"Transfer":n,EN=n=>{const e=n.toLowerCase();return e==="income"||e==="expense"||e==="transfer"?e:"expense"},xN=n=>({id:n.id,date:n.date?.toDate?.()?n.date.toDate().toISOString():n.date,amount:typeof n.amount=="string"?parseFloat(n.amount)||0:n.amount,description:n.description||"",envelopeId:n.envelopeId||"",reconciled:n.reconciled??!1,type:dz(n.type),transferId:n.transferId??void 0,userId:n.userId}),fz=(n,e)=>({id:n.id,userId:e,envelopeId:n.envelopeId,amount:n.amount.toString(),date:Ze.fromDate(new Date(n.date)),description:n.description,reconciled:n.reconciled??!1,type:EN(n.type),transferId:n.transferId??null}),mz=n=>({envelopeId:n.envelopeId,amount:n.amount.toString(),date:Ze.fromDate(new Date(n.date)),description:n.description,reconciled:n.reconciled??!1,type:EN(n.type),transferId:n.transferId??null}),pz=({set:n,get:e,getCurrentUserId:t,isNetworkError:i})=>({addTransaction:async s=>{const o=`temp-${Date.now()}-${Math.random()}`,l=t(),u={...s,id:o,userId:l};if(n(d=>({transactions:[...d.transactions,u],isLoading:!0})),s.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${s.envelopeId}`),n({isLoading:!1,pendingSync:!0});else try{const d=fz(u,l),f=await yr.addTransaction(d);console.log(` Replacing temp transaction ${o} with Firebase transaction:`,f);const g=xN(f);n(v=>({transactions:v.transactions.map(_=>_.id===o?g:_),isLoading:!1,pendingSync:!1}))}catch(d){console.error("Add Transaction Failed:",d),i(d)?n({isLoading:!1,pendingSync:!0,error:null}):n(f=>({transactions:f.transactions.filter(g=>g.id!==o),error:d.message,isLoading:!1}))}},deleteTransaction:async s=>{const o=e().transactions.find(u=>u.id===s);if(!o)return;const l=[s];if(o.transferId){const u=e().transactions.find(d=>d.transferId===o.transferId&&d.id!==s);u&&u.id&&l.push(u.id)}n(u=>({transactions:u.transactions.filter(d=>d.id&&!l.includes(d.id)),isLoading:!0}));try{const u=t(),d=l.filter(f=>!f.startsWith("temp-"));for(const f of d)console.log(` About to delete transaction ID: ${f}`),await yr.deleteTransaction(u,f),console.log(` Deleted transaction ID: ${f}`);console.log(" All transaction deletions completed"),n({isLoading:!1})}catch(u){if(console.error("Delete Transaction Failed:",u),i(u))n({isLoading:!1,pendingSync:!0,error:null});else{const d=l.map(f=>e().transactions.find(g=>g.id===f)||o).filter(Boolean);n(f=>({transactions:[...f.transactions,...d],error:u.message,isLoading:!1}))}}},updateTransaction:async s=>{console.log(" updateTransaction called:",s),n(o=>({transactions:o.transactions.map(l=>l.id===s.id?s:l),isLoading:!0}));try{const o=t(),l=yr.updateTransaction(o,s.id,mz(s)),u=new Promise((d,f)=>setTimeout(()=>f(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([l,u]),console.log(" Transaction updated in Firebase"),n({isLoading:!1})}catch(o){console.error("Update Transaction Failed:",o),console.log(" Error details:",{name:o?.name||"Unknown",message:o?.message||"Unknown",code:o?.code||"Unknown",isNetworkError:i(o)}),i(o)?(console.log(" Treating as offline scenario - keeping local transaction update"),n({isLoading:!1,pendingSync:!0,error:null})):n({error:o.message,isLoading:!1})}},restoreTransaction:async s=>{n(o=>({transactions:[...o.transactions,s],isLoading:!0}));try{n({isLoading:!1})}catch(o){console.error("Restore Transaction Failed:",o),n({error:o.message,isLoading:!1})}}}),gz=({set:n,get:e,getCurrentUserId:t,isNetworkError:i,loadFallbackData:s,checkOnlineStatus:o,clearUserData:l})=>{const u=async()=>{const A=e(),C=t();if(A.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",C),n({isLoading:!0,error:null});try{let P,z,O,K;[P,z,O,K]=await Promise.all([la.getAllEnvelopes(C).catch(S=>(console.error(" Failed to fetch envelopes:",S),[])),yr.getAllTransactions(C).catch(S=>(console.error(" Failed to fetch transactions:",S),[])),_i.getAllDistributionTemplates(C).catch(S=>(console.error(" Failed to fetch templates:",S),[])),Xr.getAppSettings(C).catch(S=>(console.error(" Failed to fetch settings:",S),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:P?.length||0,transactions:z?.length||0,templates:O?.length||0,settings:K?"found":"null"}),e().markOnlineFromFirebaseSuccess();const te=(P?.length||0)>0||(z?.length||0)>0||(O?.length||0)>0;let J=null;te||(console.log(" No data from Firebase, loading fallback data..."),J=await s(),J&&(console.log(" Using fallback data for initialization"),P=J.envelopes||[],z=J.transactions||[],O=J.distributionTemplates||[],K=J.appSettings||null)),n(S=>{const R=ce=>ce.map(L=>({...L,date:L.date&&typeof L.date=="object"&&L.date.toDate?L.date.toDate().toISOString():L.date,type:L.type==="income"?"Income":L.type==="expense"?"Expense":L.type==="transfer"?"Transfer":L.type,amount:typeof L.amount=="string"?parseFloat(L.amount):L.amount})),V=ce=>({id:ce.id,name:ce.name,currentBalance:ce.currentBalance||0,lastUpdated:ce.lastUpdated,isActive:ce.isActive??!0,orderIndex:ce.orderIndex??0}),M=P.filter(ce=>!("orderIndex"in ce));M.length>0&&(console.log(` Migrating ${M.length} envelopes to add orderIndex...`),M.forEach((ce,L)=>{const ne=L,he=t();la.saveEnvelope(he,{...ce,orderIndex:ne}).then(()=>console.log(` Migrated envelope ${ce.name} with orderIndex ${ne}`)).catch(pe=>console.warn(`Failed to migrate envelope ${ce.id}:`,pe))}));const k=P.map(V),F=new Set([...S.envelopes.map(ce=>ce.id),...P.map(ce=>ce.id)]),j=S.envelopes.filter(ce=>ce.id&&!P.some(L=>L.id===ce.id)&&!ce.id.startsWith("temp-")),Le=S.transactions.filter(ce=>ce.id&&!z.some(L=>L.id===ce.id)&&(!ce.id.startsWith("temp-")||F.has(ce.envelopeId)));let me,H=[];navigator.onLine?(me=O,console.log(` Online mode: Using Firebase templates only (${me.length} templates)`)):(H=S.distributionTemplates.filter(ce=>ce.id&&!O.some(L=>L.id===ce.id)),me=O.concat(H),console.log(` Offline mode: Merged ${O.length} Firebase + ${H.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",S.envelopes.map(ce=>({id:ce.id,name:ce.name}))),console.log("  Firebase envelopes:",P.map(ce=>({id:ce.id,name:ce.name}))),console.log("  Store transactions:",S.transactions.map(ce=>({id:ce.id,envelopeId:ce.envelopeId,description:ce.description}))),console.log("  Firebase transactions:",z.map(ce=>({id:ce.id,envelopeId:ce.envelopeId,description:ce.description}))),console.log("  Store templates:",S.distributionTemplates.map(ce=>({id:ce.id,name:ce.name}))),console.log("  Firebase templates:",O.map(ce=>({id:ce.id,name:ce.name}))),console.log("  Local-only envelopes:",j.map(ce=>({id:ce.id,name:ce.name}))),console.log("  Local-only transactions:",Le.map(ce=>({id:ce.id,envelopeId:ce.envelopeId,description:ce.description}))),console.log("  Local-only templates:",H.map(ce=>({id:ce.id,name:ce.name}))),console.log("  Total merged templates:",me.length,me.map(ce=>({id:ce.id,name:ce.name})));const oe=k.concat(j),ge=R(z).concat(Le);let xe=K;if(K&&"isDarkMode"in K&&!("theme"in K)){const ce=K;if(xe={...ce,theme:ce.isDarkMode?"dark":"light"},delete xe.isDarkMode,xe&&xe.id){const L=t();Xr.updateAppSettings(L,xe.id,{theme:xe.theme}).catch(ne=>console.warn("Failed to migrate app settings:",ne))}}return{envelopes:oe,transactions:ge,distributionTemplates:me,appSettings:xe,isLoading:!1,pendingSync:!1}})}catch(P){console.error("Sync Failed:",P),i(P)?n({isLoading:!1,pendingSync:!0}):n({error:P.message,isLoading:!1})}},d=async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),n({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(C){console.error("Firebase reset during sync failed:",C)}return}n({pendingSync:!0});try{await e().fetchData()}catch(C){console.error("Manual sync failed:",C)}},f=async()=>{const A=await o();n({isOnline:A})},g=()=>{e().isOnline||(console.log(" Firebase operation succeeded - marking as online"),n({isOnline:!0}))},v=()=>{l()},_=async A=>{try{if(!A.envelopes||!A.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const C=t();console.log(` Importing data for user: ${C}`),console.log(" Clearing existing Firebase data before import..."),await x(),n({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,pendingSync:!0,isLoading:!0}),console.log(" Local state cleared before import");const P=A.envelopes.map(S=>({id:S.id||`imported-${Date.now()}-${Math.random()}`,name:S.name,currentBalance:S.currentBalance||S.budget||0,lastUpdated:new Date().toISOString(),isActive:S.isActive??!0,orderIndex:S.orderIndex??0,userId:C})),z=A.transactions.map(S=>({...S,id:S.id||`imported-${Date.now()}-${Math.random()}`,userId:C,date:S.date,amount:typeof S.amount=="number"?S.amount:parseFloat(S.amount)||0,type:S.type,reconciled:S.reconciled??!1})),O=(A.distributionTemplates||[]).map(S=>({...S,id:S.id||`imported-${Date.now()}-${Math.random()}`,userId:C})),K=A.appSettings?{...A.appSettings,id:A.appSettings.id||`settings-${C}`,userId:C}:null;console.log(` Importing: ${P.length} envelopes, ${z.length} transactions, ${O.length} templates`),n({envelopes:P,transactions:z,distributionTemplates:O,appSettings:K,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const S of P)try{await la.saveEnvelope(C,S),console.log(` Synced envelope: ${S.name}`)}catch(R){console.error(` Failed to sync envelope ${S.name}:`,R)}for(const S of z)try{const R={...S,amount:S.amount.toString(),type:S.type.toLowerCase(),date:Ze.fromDate(new Date(S.date))};await yr.addTransaction(R),console.log(` Synced transaction: ${S.description}`)}catch(R){console.error(` Failed to sync transaction ${S.description}:`,R)}for(const S of O)try{await _i.createDistributionTemplate(S),console.log(` Synced template: ${S.name}`)}catch(R){console.error(` Failed to sync template ${S.name}:`,R)}if(K)try{await Xr.createAppSettings(K),console.log(" Synced app settings")}catch(S){console.error(" Failed to sync app settings:",S)}console.log(" All imported data synced to Firebase"),n({pendingSync:!1,isLoading:!1})}catch(S){console.error(" Error syncing to Firebase:",S),n({pendingSync:!0})}const te=O.length,J=K?"Settings imported.":"";return{success:!0,message:`Imported and synced ${P.length} envelopes, ${z.length} transactions${te>0?`, ${te} templates`:""} to Firebase.${J?` ${J}`:""}`}}catch(C){return console.error("Import failed:",C),{success:!1,message:"Failed to import data. Check file format."}}},x=async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),n({isLoading:!0});try{const A=t();console.log(" Querying Firebase for all data to delete...");const[C,P,z,O]=await Promise.all([la.getAllEnvelopes(A).catch(S=>(console.error(" Failed to fetch envelopes for reset:",S),[])),yr.getAllTransactions(A).catch(S=>(console.error(" Failed to fetch transactions for reset:",S),[])),_i.getAllDistributionTemplates(A).catch(S=>(console.error(" Failed to fetch templates for reset:",S),[])),Xr.getAppSettings(A).catch(S=>(console.error(" Failed to fetch settings for reset:",S),null))]);console.log(` Found in Firebase: ${C.length} envelopes, ${P.length} transactions, ${z.length} templates`);let K=0;for(const S of C)if(S.id)try{await la.deleteEnvelope(A,S.id),K++,console.log(` Deleted envelope: ${S.name||S.id}`)}catch(R){console.error(` Failed to delete envelope ${S.id}:`,R)}let te=0;for(const S of P)if(S.id)try{await yr.deleteTransaction(A,S.id),te++,console.log(` Deleted transaction: ${S.id}`)}catch(R){console.error(` Failed to delete transaction ${S.id}:`,R)}let J=0;for(const S of z)if(S.id)try{await _i.deleteDistributionTemplate(A,S.id),J++,console.log(` Deleted template: ${S.name||S.id}`)}catch(R){console.error(` Failed to delete template ${S.id}:`,R)}if(O?.id)try{await Xr.deleteAppSettings(A,O.id),console.log(" Deleted app settings")}catch(S){console.error(" Failed to delete app settings:",S)}console.log(` Firebase reset complete: Deleted ${K} envelopes, ${te} transactions, ${J} templates`),n({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(A){throw console.error(" Error during Firebase reset:",A),n({isLoading:!1,pendingSync:!0}),A}};return{fetchData:u,syncData:d,updateOnlineStatus:f,markOnlineFromFirebaseSuccess:g,handleUserLogout:v,importData:_,performFirebaseReset:x,resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),n({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(C){console.error(" Firebase reset failed, will retry on next sync:",C),n({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),n({isLoading:!1,pendingSync:!0})}}},yz=n=>xN(n),vz=n=>({id:n.id,name:n.name||"",currentBalance:n.currentBalance||0,lastUpdated:n.lastUpdated,isActive:n.isActive??!0,orderIndex:n.orderIndex??0,userId:n.userId||void 0}),_z=n=>({id:n.id,name:n.name||"",distributions:n.distributions||{},lastUsed:n.lastUsed?.toDate?.()?n.lastUsed.toDate().toISOString():n.lastUsed||new Date().toISOString(),note:n.note||"",userId:n.userId||void 0}),sA=(n,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const t=la.subscribeToEnvelopes(e,l=>{const u=n.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Envelopes updated",l.length);const d=l.map(vz);n.setState({envelopes:d})}}),i=yr.subscribeToTransactions(e,l=>{const u=n.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Transactions updated",l.length);const d=l.map(yz);n.setState({transactions:d})}}),s=_i.subscribeToDistributionTemplates(e,l=>{const u=n.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Templates updated from Firebase",l.length),console.log(" Firebase templates:",l.map(f=>({id:f.id,name:f.name})));const d=l.map(_z);console.log(" Setting store templates to:",d.map(f=>({id:f.id,name:f.name}))),n.setState({distributionTemplates:d})}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),o=Xr.subscribeToAppSettings(e,l=>{const u=n.getState();u.isOnline&&!u.pendingSync&&!u.resetPending&&(console.log(" Real-time sync: Settings updated",l?"found":"null"),n.setState({appSettings:l}))});window.__firebaseUnsubscribers={envelopes:t,transactions:i,templates:s,settings:o},console.log(" Real-time subscriptions active - cross-device sync enabled")},bz=n=>{const{useEnvelopeStore:e,useAuthStore:t,getCurrentUserId:i}=n;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const u=e.getState();u.isOnline&&(u.pendingSync||u.resetPending)&&(console.log(" Auto-syncing pending operations..."),u.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let s=null;const o=()=>{s&&clearInterval(s),s=setInterval(async()=>{const u=e.getState();if(!u.isOnline&&!u.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(u.pendingSync||u.resetPending)&&e.getState().syncData(),s&&(clearInterval(s),s=null)):e.setState({testingConnectivity:!1})}catch(d){console.log(" Periodic retry failed:",d),e.setState({testingConnectivity:!1})}}else u.isOnline&&s&&(clearInterval(s),s=null)},3e4)};o(),e.subscribe(u=>{!u.isOnline&&!s&&(console.log(" Starting periodic connectivity retry"),o())});const l=t.getState();l.isAuthenticated&&l.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),sA(e,i())),t.subscribe(u=>{if(u.isAuthenticated&&u.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),sA(e,i());else if(!u.isAuthenticated&&!u.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const d=window.__firebaseUnsubscribers;d.envelopes&&d.envelopes(),d.transactions&&d.transactions(),d.templates&&d.templates(),d.settings&&d.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}})},Tz=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const n=await fetch("/HouseBudget_Backup_2025-11-25.json");if(n.ok){const e=await n.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(n){console.log(" Could not load fallback data:",n)}return null},Kl=()=>{const{currentUser:n}=wr.getState();if(!n)throw new Error("No authenticated user found");return n.id},wz=()=>{console.log(" Clearing user data on logout"),qn.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},Ez=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const n=async(t,i={})=>{try{const s=new AbortController,o=setTimeout(()=>s.abort(),4e3);return await fetch(t,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:s.signal,...i}),clearTimeout(o),!0}catch(s){return console.log(` Connectivity test failed for ${t}:`,s instanceof Error?s.message:"Unknown error"),!1}},e=[n("https://httpbin.org/status/200",{method:"GET"}),n("https://www.cloudflare.com/favicon.ico"),n("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),n("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const t=await Promise.allSettled(e),i=t.filter(o=>o.status==="fulfilled"&&o.value===!0).length,s=t.length;return i>0?(console.log(` Connectivity confirmed (${i}/${s} tests passed)`),!0):(console.log(` All connectivity tests failed (${s} tests)`),!1)}catch(t){return console.log(" Connectivity testing error:",t),!1}},am=n=>{const e=n?.code?.toLowerCase()||"",t=n?.message?.toLowerCase()||"",i=n?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||t.includes("network")||t.includes("offline")||t.includes("disconnected")||t.includes("connection")||t.includes("fetch")||t.includes("timeout")||t.includes("err_internet_disconnected")||t.includes("err_network_changed")||t.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&t==="undefined")},qn=p_()(BI((n,e)=>{const t=uz({set:n,get:e,getCurrentUserId:Kl,isNetworkError:am}),i=hz({set:n,get:e,getCurrentUserId:Kl,isNetworkError:am}),s=wN({set:n,get:e,getCurrentUserId:Kl}),o=pz({set:n,get:e,getCurrentUserId:Kl,isNetworkError:am}),l=gz({set:n,get:e,getCurrentUserId:Kl,isNetworkError:am,loadFallbackData:Tz,checkOnlineStatus:Ez,clearUserData:wz});return{envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,addTransaction:o.addTransaction,createEnvelope:t.createEnvelope,addToEnvelope:t.addToEnvelope,spendFromEnvelope:t.spendFromEnvelope,transferFunds:t.transferFunds,deleteEnvelope:t.deleteEnvelope,deleteTransaction:o.deleteTransaction,updateTransaction:o.updateTransaction,restoreTransaction:o.restoreTransaction,renameEnvelope:t.renameEnvelope,saveTemplate:i.saveTemplate,deleteTemplate:i.deleteTemplate,updateAppSettings:s.updateAppSettings,initializeAppSettings:s.initializeAppSettings,cleanupOrphanedTemplates:i.cleanupOrphanedTemplates,updateTemplateEnvelopeReferences:i.updateTemplateEnvelopeReferences,removeEnvelopeFromTemplates:i.removeEnvelopeFromTemplates,fetchData:l.fetchData,syncData:l.syncData,updateOnlineStatus:l.updateOnlineStatus,markOnlineFromFirebaseSuccess:l.markOnlineFromFirebaseSuccess,handleUserLogout:l.handleUserLogout,importData:l.importData,performFirebaseReset:l.performFirebaseReset,resetData:l.resetData,getEnvelopeBalance:u=>{const d=e();if(!d.envelopes.find(C=>C.id===u))return console.log(` getEnvelopeBalance: Envelope ${u} not found`),new Qr(0);const g=d.transactions.filter(C=>C.envelopeId===u),v=g.filter(C=>C.type==="Expense"),_=g.filter(C=>C.type==="Income"),x=v.reduce((C,P)=>C.plus(new Qr(P.amount||0)),new Qr(0));return _.reduce((C,P)=>C.plus(new Qr(P.amount||0)),new Qr(0)).minus(x)}}},{name:"envelope-storage",partialize:n=>({envelopes:n.envelopes,transactions:n.transactions,distributionTemplates:n.distributionTemplates,appSettings:n.appSettings})}));bz({useEnvelopeStore:qn,useAuthStore:wr,getCurrentUserId:Kl});const xz=({isOpen:n,onClose:e})=>{const{envelopes:t,addToEnvelope:i,distributionTemplates:s,saveTemplate:o,deleteTemplate:l,getEnvelopeBalance:u}=qn(),[d,f]=U.useState(""),[g,v]=U.useState({}),[_,x]=U.useState(""),[N,A]=U.useState(!1),[C,P]=U.useState(!1),[z,O]=U.useState(""),K=U.useMemo(()=>t.sort((me,H)=>me.name.localeCompare(H.name)),[t]),te=parseFloat(d)||0,J=U.useMemo(()=>Object.values(g).reduce((me,H)=>me+H,0),[g]),S=te-J,R=Math.abs(S)<.01,V=te>0&&R,M=J>0&&R,k=(me,H)=>{const oe=parseFloat(H);v(ge=>({...ge,[me]:isNaN(oe)?0:oe}))},F=()=>{V&&(Object.entries(g).forEach(([me,H])=>{H>0&&i(me,H,_||"Deposit",new Date)}),f(""),v({}),x(""),e())},j=()=>{z.trim()&&(o(z,g,_),A(!1),O(""))},Le=me=>{const H=Object.fromEntries(Object.entries(me.distributions).filter(([ge])=>K.some(xe=>xe.id===ge)));v(H);const oe=Object.values(H).reduce((ge,xe)=>ge+xe,0);f(oe.toFixed(2)),x(me.note||""),P(!1)};return n?b.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-gray-50 dark:bg-black sm:bg-gray-100 dark:sm:bg-black",children:[b.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 flex items-center justify-between shadow-sm shrink-0",children:[b.jsx("button",{onClick:e,className:"text-blue-600 dark:text-blue-400 font-medium text-base",children:"Cancel"}),b.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:"Distribute Funds"}),b.jsx("button",{onClick:F,disabled:!V,className:`font-bold text-base ${V?"text-blue-600 dark:text-blue-400":"text-gray-300 dark:text-zinc-600"}`,children:"Apply"})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 relative",children:[b.jsxs("div",{className:"sticky top-0 z-10 bg-gray-50/95 dark:bg-black/95 backdrop-blur-sm border-b border-gray-200 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[b.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-zinc-400 mb-1",children:"Deposit Amount"}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mr-2",children:"$"}),b.jsx("input",{type:"number",inputMode:"decimal",value:d,onChange:me=>f(me.target.value),placeholder:"0.00",className:"text-3xl font-bold text-black dark:text-white w-full focus:outline-none bg-white dark:bg-zinc-900 placeholder-gray-300 dark:placeholder-zinc-600 appearance-none",autoFocus:!0})]})]}),b.jsxs("div",{className:"flex justify-between items-center text-sm font-medium px-1",children:[b.jsxs("div",{className:"flex flex-col",children:[b.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Distributed"}),b.jsxs("span",{className:"text-gray-900 dark:text-white",children:["$",J.toFixed(2)]})]}),b.jsxs("div",{className:"flex flex-col items-end",children:[b.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Remaining"}),b.jsxs("span",{className:`text-lg ${S===0?"text-green-600 dark:text-green-400":S<0?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:["$",S.toFixed(2)]})]})]}),!R&&te>0&&b.jsx("div",{className:"text-center text-sm font-medium text-red-500 dark:text-red-400",children:S>0?`You still have $${S.toFixed(2)} to distribute`:`You have over-allocated by $${Math.abs(S).toFixed(2)}`}),b.jsx("div",{className:"pt-2",children:M?b.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[b.jsxs("button",{onClick:()=>P(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[b.jsx(Om,{size:16}),"Load Template"]}),b.jsxs("button",{onClick:()=>A(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 text-green-400 rounded-lg font-medium text-sm hover:bg-gray-700 transition-colors",children:[b.jsx(hM,{size:16}),"Save Template"]})]}):b.jsxs("div",{className:"flex flex-col gap-3",children:[b.jsxs("button",{onClick:()=>P(!0),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[b.jsx(Om,{size:16}),"Load Template"]}),b.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center px-2 leading-relaxed",children:"You can save this as a template once the Deposit Amount and Total Distributed are equal (Remaining = $0)."})]})}),b.jsx("input",{type:"text",placeholder:"Distribution Note (Optional)",value:_,onChange:me=>x(me.target.value),className:"w-full p-3 text-sm bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:outline-none text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600"})]}),b.jsx("div",{className:"p-4 space-y-3",children:K.filter(me=>me.id).map(me=>{const H=me.id,oe=g[H]||0,ge=J>0?Math.round(oe/J*100):0;return b.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex items-center justify-between",children:[b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[b.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:me.name}),oe>0&&b.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:[ge,"%"]})]}),b.jsxs("div",{className:"text-xs text-gray-400 dark:text-zinc-400",children:["Balance: $",u(me.id).toNumber().toFixed(2)]})]}),b.jsxs("div",{className:"w-32 relative",children:[b.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",children:"$"}),b.jsx("input",{type:"number",inputMode:"decimal",value:g[H]===0?"":g[H],onChange:xe=>k(H,xe.target.value),placeholder:"0",className:"w-full pl-6 pr-6 py-2 text-right bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 outline-none font-mono text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600 appearance-none"})]})]},H)})})]}),N&&b.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-gray-200 dark:border-zinc-700",children:[b.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Save Template"}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Name your template to easily recall this distribution later."}),b.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g. Payday Split",value:z,onChange:me=>O(me.target.value),className:"w-full p-3 bg-gray-100 dark:bg-black rounded-xl mb-4 text-gray-900 dark:text-white border border-transparent focus:border-blue-500 outline-none"}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("button",{onClick:()=>A(!1),className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-semibold",children:"Cancel"}),b.jsx("button",{onClick:j,disabled:!z.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold disabled:opacity-50",children:"Save"})]})]})}),C&&b.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-end sm:items-center justify-center sm:p-4",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-t-2xl sm:rounded-2xl shadow-2xl border-t sm:border border-gray-200 dark:border-zinc-700 max-h-[80vh] flex flex-col",children:[b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-zinc-800 flex justify-between items-center",children:[b.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Load Template"}),b.jsx("button",{onClick:()=>P(!1),className:"p-1 rounded-full bg-gray-100 dark:bg-zinc-800 text-gray-500",children:b.jsx(td,{size:20})})]}),b.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:s.length===0?b.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No templates saved yet."}):s.map(me=>b.jsxs("div",{className:"flex items-center gap-2 p-3 hover:bg-gray-50 dark:hover:bg-zinc-800/50 rounded-xl group transition-colors",children:[b.jsxs("button",{onClick:()=>Le(me),className:"flex-1 text-left",children:[b.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:me.name}),b.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: $",Object.values(me.distributions).reduce((H,oe)=>H+oe,0).toFixed(2),me.note&&b.jsxs("span",{className:"ml-2 opacity-75",children:[" ",me.note]})]})]}),b.jsx("button",{onClick:H=>{H.stopPropagation(),confirm("Delete this template?")&&l(me.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:b.jsx(oh,{size:18})})]},me.id))})]})})]}):null},Sz=()=>{const[n,e]=U.useState(!1),t=U.useRef(null),{currentUser:i,logout:s}=wr(),{handleUserLogout:o}=qn(),l=Aa();U.useEffect(()=>{const f=g=>{t.current&&!t.current.contains(g.target)&&e(!1)};if(n)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[n]);const u=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{o(),s(),l("/"),e(!1)}catch(f){console.error("Logout failed:",f)}};if(!i)return null;const d=i.displayName?.charAt(0)?.toUpperCase()||i.email?.charAt(0)?.toUpperCase()||"U";return b.jsxs("div",{className:"relative",ref:t,children:[b.jsxs("button",{onClick:()=>e(!n),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[b.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:d}),b.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:i.displayName||i.email?.split("@")[0]||"User"}),b.jsx(VP,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${n?"rotate-180":""}`})]}),n&&b.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[b.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:d}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:i.displayName||i.email?.split("@")[0]||"User"}),b.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:i.email})]})]})}),b.jsxs("div",{className:"py-1",children:[b.jsxs("button",{onClick:()=>{l("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[b.jsx(pM,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),b.jsxs("button",{onClick:u,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[b.jsx(oM,{size:18}),"Log Out"]})]})]})]})},Az=()=>{const{envelopes:n,transactions:e,fetchData:t,isOnline:i,pendingSync:s,syncData:o,isLoading:l,getEnvelopeBalance:u,testingConnectivity:d}=qn(),[f,g]=U.useState(!1),v=Aa();U.useEffect(()=>{n.length===0&&t()},[]);const _=[...n].sort((N,A)=>{const C=N.orderIndex??0,P=A.orderIndex??0;return C!==P?C-P:N.name.localeCompare(A.name)});console.log(" EnvelopeListView render - calculating balances"),console.log(" Current envelopes:",n.length),console.log(" Current transactions:",e.length);const x=n.reduce((N,A)=>{const C=u(A.id);return console.log(` Envelope ${A.name} (${A.id}): $${C.toNumber().toFixed(2)}`),N+C.toNumber()},0);return console.log(" Total balance:",x),b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[b.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-10",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("div",{className:"flex items-center gap-2",children:i?l?b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(Ah,{size:16,className:"animate-spin"}),b.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):s?b.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[b.jsx(Ah,{size:16}),b.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):b.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[b.jsx(DM,{size:16}),b.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):b.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[b.jsx(CM,{size:16}),b.jsx("span",{className:"text-sm font-medium",children:d?"Testing Connection...":l?"Offline (Saving...)":"Offline"})]})}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("button",{onClick:()=>v("/transactions"),className:"text-blue-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Transaction History",children:b.jsx(rM,{size:22})}),b.jsx(Sz,{})]})]}),b.jsx("div",{className:"mt-4",children:b.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"House Expenses"})})]}),b.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[b.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 space-y-4",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-gray-600 dark:text-zinc-400 font-medium",children:"Total Balance"}),b.jsxs("span",{className:`text-2xl font-bold ${x>=0?"text-green-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[x<0?"-":"","$",Math.abs(x).toFixed(2)]})]}),b.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-50 dark:bg-blue-900/40 text-blue-600 dark:text-blue-300 py-3 rounded-xl font-semibold active:bg-blue-100 dark:active:bg-blue-900/60 transition-colors",children:[b.jsx(nM,{size:20,className:"rotate-90"}),"Distribute Funds"]})]}),b.jsx("section",{children:_.length===0?b.jsxs("div",{className:"text-center py-10 space-y-3",children:[b.jsx(IM,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto"}),b.jsx("h3",{className:"text-gray-500 dark:text-zinc-400 font-medium",children:"No envelopes yet"}),b.jsx("button",{onClick:()=>v("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium",children:"Create First Envelope"})]}):b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex justify-between items-end px-1",children:[b.jsx("h2",{className:"text-sm font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-wider",children:"My Envelopes"}),b.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-300 font-medium",onClick:()=>v("/add-envelope"),children:"+ New Envelope"})]}),_.map(N=>b.jsxs("div",{onClick:()=>v(`/envelope/${N.id}`),className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex justify-between items-center active:scale-[0.99] transition-transform cursor-pointer",children:[b.jsx("div",{className:"flex flex-col",children:b.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:N.name})}),b.jsxs("span",{className:`font-bold ${u(N.id).toNumber()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-emerald-400"}`,children:[u(N.id).toNumber()<0?"-":"","$",Math.abs(u(N.id).toNumber()).toFixed(2)]})]},N.id))]})})]}),b.jsx("button",{onClick:()=>v("/add-transaction"),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",children:b.jsx(FP,{size:28})}),b.jsx(xz,{isOpen:f,onClose:()=>g(!1)})]})},Ib=p_((n,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(t,i="neutral",s)=>{n({message:t,type:i,isVisible:!0,undoAction:s}),setTimeout(()=>{e().hideToast()},4e3)},hideToast:()=>{n({isVisible:!1})}})),SN=({isVisible:n,onClose:e,mode:t,currentEnvelope:i,initialTransaction:s})=>{const{addToEnvelope:o,spendFromEnvelope:l,updateTransaction:u,deleteTransaction:d}=qn(),[f,g]=U.useState(""),[v,_]=U.useState(""),[x,N]=U.useState(new Date().toISOString().split("T")[0]);if(U.useEffect(()=>{if(!n)return;const O=window.setTimeout(()=>{if(t==="edit"&&s){g(s.amount.toString()),_(s.description);try{const K=new Date(s.date);isNaN(K.getTime())?(console.warn("Invalid date in transaction:",s.date),N(new Date().toISOString().split("T")[0])):N(K.toISOString().split("T")[0])}catch(K){console.error("Error parsing transaction date:",K),N(new Date().toISOString().split("T")[0])}}else g(""),_(""),N(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(O)},[n,t,s]),!n)return null;const A=O=>{O.preventDefault();const K=parseFloat(f);isNaN(K)||K<=0||(t==="add"?o(i.id,K,v,new Date(x)):t==="spend"?l(i.id,K,v,new Date(x)):t==="edit"&&s&&u({...s,amount:K,description:v,date:new Date(x).toISOString()}),e())},C=()=>{!s||!s.id||window.confirm("Are you sure you want to delete this transaction?")&&(d(s.id),e())},P=t==="add"?"Add Money":t==="spend"?"Spend Money":"Edit Transaction",z=t==="add"?"text-green-500":"text-red-500";return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[b.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[b.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),b.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:P}),b.jsx("button",{onClick:A,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0,children:"Save"})]}),b.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),b.jsxs("div",{className:"relative inline-block",children:[b.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${z}`,children:"$"}),b.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:f,onChange:O=>{const K=O.target.value;(K===""||!isNaN(parseFloat(K))&&parseFloat(K)>=0)&&g(K)},onKeyDown:O=>{(O.key==="e"||O.key==="E"||O.key==="+"||O.key==="-")&&O.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${z} placeholder-gray-700`})]})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),b.jsx("input",{type:"text",value:v,onChange:O=>_(O.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),b.jsx("input",{type:"date",value:x,onChange:O=>{console.log("Date changed to:",O.target.value),N(O.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),t==="edit"&&b.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:b.jsxs("button",{type:"button",onClick:C,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[b.jsx(zI,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},Iz=({isVisible:n,onClose:e,sourceEnvelope:t})=>{const{envelopes:i,transferFunds:s}=qn(),[o,l]=U.useState(""),[u,d]=U.useState(""),[f,g]=U.useState(""),[v,_]=U.useState(new Date().toISOString().split("T")[0]),x=i.filter(C=>C.id!==t.id);if(U.useEffect(()=>{if(!n)return;const C=window.setTimeout(()=>{l(""),d(""),g(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(C)},[n]),!n)return null;const N=C=>{C.preventDefault();const P=parseFloat(u);isNaN(P)||P<=0||!o||(s(t.id,o,P,f,new Date(v)),e())},A=i.find(C=>C.id===o);return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[b.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[b.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),b.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),b.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!u||parseFloat(u)<=0||!o,children:"Transfer"})]}),b.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),b.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.name})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),b.jsxs("select",{value:o,onChange:C=>l(C.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[b.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),x.map(C=>b.jsx("option",{value:C.id,className:"bg-white dark:bg-zinc-900",children:C.name},C.id))]})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),b.jsxs("div",{className:"relative inline-block",children:[b.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),b.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:u,onChange:C=>d(C.target.value),onKeyDown:C=>{(C.key==="e"||C.key==="E"||C.key==="+"||C.key==="-")&&C.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),b.jsx("input",{type:"text",value:f,onChange:C=>g(C.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),b.jsx("input",{type:"date",value:v,onChange:C=>_(C.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),A&&u&&parseFloat(u)>0&&b.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",b.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(u).toFixed(2)]})," from"," ",b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t.name})," to"," ",b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:A.name})]})]})]})})},Rz=n=>{if(!n)return"No Date";try{let e;return n&&typeof n=="object"&&n.toDate&&typeof n.toDate=="function"?e=n.toDate():typeof n=="number"?n<1e10?e=new Date((n+978307200)*1e3):e=new Date(n):e=new Date(n),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},Cz=n=>{const e=typeof n=="string"?parseFloat(n):n;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},AN=({transaction:n,envelopeName:e,onReconcile:t,onEdit:i})=>{if(!n)return null;const s=n.type==="Income",o=n.type==="Expense";let l="text-gray-900 dark:text-white";return s&&(l="text-green-600 dark:text-green-400"),o&&(l="text-red-600 dark:text-red-400"),b.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[b.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:n.description||"No Description"}),n.reconciled&&b.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),b.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[b.jsx("span",{children:Rz(n.date)}),e&&b.jsxs(b.Fragment,{children:[b.jsx("span",{children:""}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${l}`,children:[o?"-":s?"+":"",Cz(n.amount)]}),t?b.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),t()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":n.reconciled?"Mark as unreconciled":"Mark as reconciled",children:n.reconciled?b.jsx(QE,{className:"text-green-500",size:20}):b.jsx(XE,{className:"text-gray-400",size:20})}):b.jsx("span",{children:n.reconciled?b.jsx(QE,{className:"text-green-500",size:20}):b.jsx(XE,{className:"text-gray-400",size:20})})]})]})},Rb=U.createContext({});function ig(n){const e=U.useRef(null);return e.current===null&&(e.current=n()),e.current}const Cb=typeof window<"u",Nb=Cb?U.useLayoutEffect:U.useEffect,rg=U.createContext(null);function Db(n,e){n.indexOf(e)===-1&&n.push(e)}function kb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const cs=(n,e,t)=>t>e?e:t<n?n:t;let Vb=()=>{};const us={},IN=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function RN(n){return typeof n=="object"&&n!==null}const CN=n=>/^0[^.\s]+$/u.test(n);function Pb(n){let e;return()=>(e===void 0&&(e=n()),e)}const xi=n=>n,Nz=(n,e)=>t=>e(n(t)),gd=(...n)=>n.reduce(Nz),$h=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class Mb{constructor(){this.subscriptions=[]}add(e){return Db(this.subscriptions,e),()=>kb(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Er=n=>n*1e3,wi=n=>n/1e3;function NN(n,e){return e?n*(1e3/e):0}const DN=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Dz=1e-7,kz=12;function Vz(n,e,t,i,s){let o,l,u=0;do l=e+(t-e)/2,o=DN(l,i,s)-n,o>0?t=l:e=l;while(Math.abs(o)>Dz&&++u<kz);return l}function yd(n,e,t,i){if(n===e&&t===i)return xi;const s=o=>Vz(o,0,1,n,t);return o=>o===0||o===1?o:DN(s(o),e,i)}const kN=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,VN=n=>e=>1-n(1-e),PN=yd(.33,1.53,.69,.99),Ob=VN(PN),MN=kN(Ob),ON=n=>(n*=2)<1?.5*Ob(n):.5*(2-Math.pow(2,-10*(n-1))),Lb=n=>1-Math.sin(Math.acos(n)),LN=VN(Lb),jN=kN(Lb),Pz=yd(.42,0,1,1),Mz=yd(0,0,.58,1),UN=yd(.42,0,.58,1),Oz=n=>Array.isArray(n)&&typeof n[0]!="number",zN=n=>Array.isArray(n)&&typeof n[0]=="number",Lz={linear:xi,easeIn:Pz,easeInOut:UN,easeOut:Mz,circIn:Lb,circInOut:jN,circOut:LN,backIn:Ob,backInOut:MN,backOut:PN,anticipate:ON},jz=n=>typeof n=="string",aA=n=>{if(zN(n)){Vb(n.length===4);const[e,t,i,s]=n;return yd(e,t,i,s)}else if(jz(n))return Lz[n];return n},om=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Uz(n,e){let t=new Set,i=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(f.schedule(g),n()),g(u)}const f={schedule:(g,v=!1,_=!1)=>{const N=_&&s?t:i;return v&&l.add(g),N.has(g)||N.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(u=g,s){o=!0;return}s=!0,[t,i]=[i,t],t.forEach(d),t.clear(),s=!1,o&&(o=!1,f.process(g))}};return f}const zz=40;function BN(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=om.reduce((O,K)=>(O[K]=Uz(o),O),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:g,update:v,preRender:_,render:x,postRender:N}=l,A=()=>{const O=us.useManualTiming?s.timestamp:performance.now();t=!1,us.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(O-s.timestamp,zz),1)),s.timestamp=O,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),g.process(s),v.process(s),_.process(s),x.process(s),N.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(A))},C=()=>{t=!0,i=!0,s.isProcessing||n(A)};return{schedule:om.reduce((O,K)=>{const te=l[K];return O[K]=(J,S=!1,R=!1)=>(t||C(),te.schedule(J,S,R)),O},{}),cancel:O=>{for(let K=0;K<om.length;K++)l[om[K]].cancel(O)},state:s,steps:l}}const{schedule:wt,cancel:Ea,state:fn,steps:O0}=BN(typeof requestAnimationFrame<"u"?requestAnimationFrame:xi,!0);let Dm;function Bz(){Dm=void 0}const Bn={now:()=>(Dm===void 0&&Bn.set(fn.isProcessing||us.useManualTiming?fn.timestamp:performance.now()),Dm),set:n=>{Dm=n,queueMicrotask(Bz)}},FN=n=>e=>typeof e=="string"&&e.startsWith(n),jb=FN("--"),Fz=FN("var(--"),Ub=n=>Fz(n)?qz.test(n.split("/*")[0].trim()):!1,qz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Lc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Kh={...Lc,transform:n=>cs(0,1,n)},lm={...Lc,default:1},_h=n=>Math.round(n*1e5)/1e5,zb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Hz(n){return n==null}const Gz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Bb=(n,e)=>t=>!!(typeof t=="string"&&Gz.test(t)&&t.startsWith(n)||e&&!Hz(t)&&Object.prototype.hasOwnProperty.call(t,e)),qN=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,o,l,u]=i.match(zb);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},$z=n=>cs(0,255,n),L0={...Lc,transform:n=>Math.round($z(n))},Eo={test:Bb("rgb","red"),parse:qN("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+L0.transform(n)+", "+L0.transform(e)+", "+L0.transform(t)+", "+_h(Kh.transform(i))+")"};function Kz(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Bv={test:Bb("#"),parse:Kz,transform:Eo.transform},vd=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ta=vd("deg"),xr=vd("%"),Ve=vd("px"),Yz=vd("vh"),Qz=vd("vw"),oA={...xr,parse:n=>xr.parse(n)/100,transform:n=>xr.transform(n*100)},Xl={test:Bb("hsl","hue"),parse:qN("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+xr.transform(_h(e))+", "+xr.transform(_h(t))+", "+_h(Kh.transform(i))+")"},Qt={test:n=>Eo.test(n)||Bv.test(n)||Xl.test(n),parse:n=>Eo.test(n)?Eo.parse(n):Xl.test(n)?Xl.parse(n):Bv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Eo.transform(n):Xl.transform(n),getAnimatableNone:n=>{const e=Qt.parse(n);return e.alpha=0,Qt.transform(e)}},Xz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Wz(n){return isNaN(n)&&typeof n=="string"&&(n.match(zb)?.length||0)+(n.match(Xz)?.length||0)>0}const HN="number",GN="color",Zz="var",Jz="var(",lA="${}",e8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(e8,d=>(Qt.test(d)?(i.color.push(o),s.push(GN),t.push(Qt.parse(d))):d.startsWith(Jz)?(i.var.push(o),s.push(Zz),t.push(d)):(i.number.push(o),s.push(HN),t.push(parseFloat(d))),++o,lA)).split(lA);return{values:t,split:u,indexes:i,types:s}}function $N(n){return Yh(n).values}function KN(n){const{split:e,types:t}=Yh(n),i=e.length;return s=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],s[l]!==void 0){const u=t[l];u===HN?o+=_h(s[l]):u===GN?o+=Qt.transform(s[l]):o+=s[l]}return o}}const t8=n=>typeof n=="number"?0:Qt.test(n)?Qt.getAnimatableNone(n):n;function n8(n){const e=$N(n);return KN(n)(e.map(t8))}const xa={test:Wz,parse:$N,createTransformer:KN,getAnimatableNone:n8};function j0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function i8({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;s=j0(d,u,n+1/3),o=j0(d,u,n),l=j0(d,u,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function fp(n,e){return t=>t>0?e:n}const xt=(n,e,t)=>n+(e-n)*t,U0=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},r8=[Bv,Eo,Xl],s8=n=>r8.find(e=>e.test(n));function cA(n){const e=s8(n);if(!e)return!1;let t=e.parse(n);return e===Xl&&(t=i8(t)),t}const uA=(n,e)=>{const t=cA(n),i=cA(e);if(!t||!i)return fp(n,e);const s={...t};return o=>(s.red=U0(t.red,i.red,o),s.green=U0(t.green,i.green,o),s.blue=U0(t.blue,i.blue,o),s.alpha=xt(t.alpha,i.alpha,o),Eo.transform(s))},Fv=new Set(["none","hidden"]);function a8(n,e){return Fv.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function o8(n,e){return t=>xt(n,e,t)}function Fb(n){return typeof n=="number"?o8:typeof n=="string"?Ub(n)?fp:Qt.test(n)?uA:u8:Array.isArray(n)?YN:typeof n=="object"?Qt.test(n)?uA:l8:fp}function YN(n,e){const t=[...n],i=t.length,s=n.map((o,l)=>Fb(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)t[l]=s[l](o);return t}}function l8(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=Fb(n[s])(n[s],e[s]));return s=>{for(const o in i)t[o]=i[o](s);return t}}function c8(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][i[o]],u=n.values[l]??0;t[s]=u,i[o]++}return t}const u8=(n,e)=>{const t=xa.createTransformer(e),i=Yh(n),s=Yh(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Fv.has(n)&&!s.values.length||Fv.has(e)&&!i.values.length?a8(n,e):gd(YN(c8(i,s),s.values),t):fp(n,e)};function QN(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?xt(n,e,t):Fb(n)(n,e)}const h8=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>wt.update(e,t),stop:()=>Ea(e),now:()=>fn.isProcessing?fn.timestamp:Bn.now()}},XN=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)i+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},mp=2e4;function qb(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<mp;)e+=t,i=n.next(e);return e>=mp?1/0:e}function d8(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(qb(i),mp);return{type:"keyframes",ease:o=>i.next(s*o).value/e,duration:wi(s)}}const f8=5;function WN(n,e,t){const i=Math.max(e-f8,0);return NN(t-n(i),e-i)}const Ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},z0=.001;function m8({duration:n=Ct.duration,bounce:e=Ct.bounce,velocity:t=Ct.velocity,mass:i=Ct.mass}){let s,o,l=1-e;l=cs(Ct.minDamping,Ct.maxDamping,l),n=cs(Ct.minDuration,Ct.maxDuration,wi(n)),l<1?(s=f=>{const g=f*l,v=g*n,_=g-t,x=qv(f,l),N=Math.exp(-v);return z0-_/x*N},o=f=>{const v=f*l*n,_=v*t+t,x=Math.pow(l,2)*Math.pow(f,2)*n,N=Math.exp(-v),A=qv(Math.pow(f,2),l);return(-s(f)+z0>0?-1:1)*((_-x)*N)/A}):(s=f=>{const g=Math.exp(-f*n),v=(f-t)*n+1;return-z0+g*v},o=f=>{const g=Math.exp(-f*n),v=(t-f)*(n*n);return g*v});const u=5/n,d=g8(s,o,u);if(n=Er(n),isNaN(d))return{stiffness:Ct.stiffness,damping:Ct.damping,duration:n};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:n}}}const p8=12;function g8(n,e,t){let i=t;for(let s=1;s<p8;s++)i=i-n(i)/e(i);return i}function qv(n,e){return n*Math.sqrt(1-e*e)}const y8=["duration","bounce"],v8=["stiffness","damping","mass"];function hA(n,e){return e.some(t=>n[t]!==void 0)}function _8(n){let e={velocity:Ct.velocity,stiffness:Ct.stiffness,damping:Ct.damping,mass:Ct.mass,isResolvedFromDuration:!1,...n};if(!hA(n,v8)&&hA(n,y8))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,o=2*cs(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Ct.mass,stiffness:s,damping:o}}else{const t=m8(n);e={...e,...t,mass:Ct.mass},e.isResolvedFromDuration=!0}return e}function pp(n=Ct.visualDuration,e=Ct.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:f,mass:g,duration:v,velocity:_,isResolvedFromDuration:x}=_8({...t,velocity:-wi(t.velocity||0)}),N=_||0,A=f/(2*Math.sqrt(d*g)),C=l-o,P=wi(Math.sqrt(d/g)),z=Math.abs(C)<5;i||(i=z?Ct.restSpeed.granular:Ct.restSpeed.default),s||(s=z?Ct.restDelta.granular:Ct.restDelta.default);let O;if(A<1){const te=qv(P,A);O=J=>{const S=Math.exp(-A*P*J);return l-S*((N+A*P*C)/te*Math.sin(te*J)+C*Math.cos(te*J))}}else if(A===1)O=te=>l-Math.exp(-P*te)*(C+(N+P*C)*te);else{const te=P*Math.sqrt(A*A-1);O=J=>{const S=Math.exp(-A*P*J),R=Math.min(te*J,300);return l-S*((N+A*P*C)*Math.sinh(R)+te*C*Math.cosh(R))/te}}const K={calculatedDuration:x&&v||null,next:te=>{const J=O(te);if(x)u.done=te>=v;else{let S=te===0?N:0;A<1&&(S=te===0?Er(N):WN(O,te,J));const R=Math.abs(S)<=i,V=Math.abs(l-J)<=s;u.done=R&&V}return u.value=u.done?l:J,u},toString:()=>{const te=Math.min(qb(K),mp),J=XN(S=>K.next(te*S).value,te,30);return te+"ms "+J},toTransition:()=>{}};return K}pp.applyToOptions=n=>{const e=d8(n,100,pp);return n.ease=e.ease,n.duration=Er(e.duration),n.type="keyframes",n};function Hv({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:g}){const v=n[0],_={done:!1,value:v},x=R=>u!==void 0&&R<u||d!==void 0&&R>d,N=R=>u===void 0?d:d===void 0||Math.abs(u-R)<Math.abs(d-R)?u:d;let A=t*e;const C=v+A,P=l===void 0?C:l(C);P!==C&&(A=P-v);const z=R=>-A*Math.exp(-R/i),O=R=>P+z(R),K=R=>{const V=z(R),M=O(R);_.done=Math.abs(V)<=f,_.value=_.done?P:M};let te,J;const S=R=>{x(_.value)&&(te=R,J=pp({keyframes:[_.value,N(_.value)],velocity:WN(O,R,_.value),damping:s,stiffness:o,restDelta:f,restSpeed:g}))};return S(0),{calculatedDuration:null,next:R=>{let V=!1;return!J&&te===void 0&&(V=!0,K(R),S(R)),te!==void 0&&R>=te?J.next(R-te):(!V&&K(R),_)}}}function b8(n,e,t){const i=[],s=t||us.mix||QN,o=n.length-1;for(let l=0;l<o;l++){let u=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||xi:e;u=gd(d,u)}i.push(u)}return i}function T8(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const o=n.length;if(Vb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=b8(e,i,s),d=u.length,f=g=>{if(l&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const _=$h(n[v],n[v+1],g);return u[v](_)};return t?g=>f(cs(n[0],n[o-1],g)):f}function w8(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=$h(0,e,i);n.push(xt(t,1,s))}}function E8(n){const e=[0];return w8(e,n.length-1),e}function x8(n,e){return n.map(t=>t*e)}function S8(n,e){return n.map(()=>e||UN).splice(0,n.length-1)}function bh({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=Oz(i)?i.map(aA):aA(i),o={done:!1,value:e[0]},l=x8(t&&t.length===e.length?t:E8(e),n),u=T8(l,e,{ease:Array.isArray(s)?s:S8(e,s)});return{calculatedDuration:n,next:d=>(o.value=u(d),o.done=d>=n,o)}}const A8=n=>n!==null;function Hb(n,{repeat:e,repeatType:t="loop"},i,s=1){const o=n.filter(A8),u=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!u||i===void 0?o[u]:i}const I8={decay:Hv,inertia:Hv,tween:bh,keyframes:bh,spring:pp};function ZN(n){typeof n.type=="string"&&(n.type=I8[n.type])}class Gb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const R8=n=>n/100;class $b extends Gb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Bn.now()&&this.tick(Bn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ZN(e);const{type:t=bh,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:u}=e;const d=t||bh;d!==bh&&typeof u[0]!="number"&&(this.mixKeyframes=gd(R8,QN(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=qb(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:v,repeatType:_,repeatDelay:x,type:N,onUpdate:A,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const P=this.currentTime-f*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?P<0:P>s;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let O=this.currentTime,K=i;if(v){const R=Math.min(this.currentTime,s)/u;let V=Math.floor(R),M=R%1;!M&&R>=1&&(M=1),M===1&&V--,V=Math.min(V,v+1),!!(V%2)&&(_==="reverse"?(M=1-M,x&&(M-=x/u)):_==="mirror"&&(K=l)),O=cs(0,1,M)*u}const te=z?{done:!1,value:g[0]}:K.next(O);o&&(te.value=o(te.value));let{done:J}=te;!z&&d!==null&&(J=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&J);return S&&N!==Hv&&(te.value=Hb(g,this.options,C,this.speed)),A&&A(te.value),S&&this.finish(),te}then(e,t){return this.finished.then(e,t)}get duration(){return wi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+wi(e)}get time(){return wi(this.currentTime)}set time(e){e=Er(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Bn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=wi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=h8,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Bn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function C8(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const xo=n=>n*180/Math.PI,Gv=n=>{const e=xo(Math.atan2(n[1],n[0]));return $v(e)},N8={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Gv,rotateZ:Gv,skewX:n=>xo(Math.atan(n[1])),skewY:n=>xo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},$v=n=>(n=n%360,n<0&&(n+=360),n),dA=Gv,fA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),mA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),D8={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:fA,scaleY:mA,scale:n=>(fA(n)+mA(n))/2,rotateX:n=>$v(xo(Math.atan2(n[6],n[5]))),rotateY:n=>$v(xo(Math.atan2(-n[2],n[0]))),rotateZ:dA,rotate:dA,skewX:n=>xo(Math.atan(n[4])),skewY:n=>xo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Kv(n){return n.includes("scale")?1:0}function Yv(n,e){if(!n||n==="none")return Kv(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=D8,s=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=N8,s=u}if(!s)return Kv(e);const o=i[e],l=s[1].split(",").map(V8);return typeof o=="function"?o(l):l[o]}const k8=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Yv(t,e)};function V8(n){return parseFloat(n.trim())}const jc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uc=new Set(jc),pA=n=>n===Lc||n===Ve,P8=new Set(["x","y","z"]),M8=jc.filter(n=>!P8.has(n));function O8(n){const e=[];return M8.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const No={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Yv(e,"x"),y:(n,{transform:e})=>Yv(e,"y")};No.translateX=No.x;No.translateY=No.y;const Do=new Set;let Qv=!1,Xv=!1,Wv=!1;function JN(){if(Xv){const n=Array.from(Do).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=O8(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([o,l])=>{i.getValue(o)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Xv=!1,Qv=!1,Do.forEach(n=>n.complete(Wv)),Do.clear()}function eD(){Do.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Xv=!0)})}function L8(){Wv=!0,eD(),JN(),Wv=!1}class Kb{constructor(e,t,i,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Do.add(this),Qv||(Qv=!0,wt.read(eD),wt.resolveKeyframes(JN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const u=i.readValue(t,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}C8(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Do.delete(this)}cancel(){this.state==="scheduled"&&(Do.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const j8=n=>n.startsWith("--");function U8(n,e,t){j8(e)?n.style.setProperty(e,t):n.style[e]=t}const z8=Pb(()=>window.ScrollTimeline!==void 0),B8={};function F8(n,e){const t=Pb(n);return()=>B8[e]??t()}const tD=F8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ah=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,gA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ah([0,.65,.55,1]),circOut:ah([.55,0,1,.45]),backIn:ah([.31,.01,.66,-.59]),backOut:ah([.33,1.53,.69,.99])};function nD(n,e){if(n)return typeof n=="function"?tD()?XN(n,e):"ease-out":zN(n)?ah(n):Array.isArray(n)?n.map(t=>nD(t,e)||gA.easeOut):gA[n]}function q8(n,e,t,{delay:i=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const g={[e]:t};d&&(g.offset=d);const v=nD(u,s);Array.isArray(v)&&(g.easing=v);const _={delay:i,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),n.animate(g,_)}function iD(n){return typeof n=="function"&&"applyToOptions"in n}function H8({type:n,...e}){return iD(n)&&tD()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class G8 extends Gb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,Vb(typeof e.type!="string");const f=H8(e);this.animation=q8(t,i,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Hb(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):U8(t,i,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return wi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+wi(e)}get time(){return wi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Er(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&z8()?(this.animation.timeline=e,xi):t(this)}}const rD={anticipate:ON,backInOut:MN,circInOut:jN};function $8(n){return n in rD}function K8(n){typeof n.ease=="string"&&$8(n.ease)&&(n.ease=rD[n.ease])}const yA=10;class Y8 extends G8{constructor(e){K8(e),ZN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new $b({...l,autoplay:!1}),d=Er(this.finishedTime??this.time);t.setWithVelocity(u.sample(d-yA).value,u.sample(d).value,yA),u.stop()}}const vA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(xa.test(n)||n==="0")&&!n.startsWith("url("));function Q8(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function X8(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=vA(s,e),u=vA(o,e);return!l||!u?!1:Q8(n)||(t==="spring"||iD(t))&&i}function Zv(n){n.duration=0,n.type="keyframes"}const W8=new Set(["opacity","clipPath","filter","transform"]),Z8=Pb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function J8(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:o,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return Z8()&&t&&W8.has(t)&&(t!=="transform"||!f)&&!d&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}const e7=40;class t7 extends Gb{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:g,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Bn.now();const _={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:o,repeatType:l,name:d,motionValue:f,element:g,...v},x=g?.KeyframeResolver||Kb;this.keyframeResolver=new x(u,(N,A,C)=>this.onKeyframesResolved(N,A,_,!C),d,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:g}=i;this.resolvedAt=Bn.now(),X8(e,o,l,u)||((us.instantAnimations||!d)&&g?.(Hb(e,i,t)),e[0]=e[e.length-1],Zv(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>e7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},x=!f&&J8(_)?new Y8({..._,element:_.motionValue.owner.current}):new $b(_);x.finished.then(()=>this.notifyFinished()).catch(xi),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),L8()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const n7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function i7(n){const e=n7.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function sD(n,e,t=1){const[i,s]=i7(n);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return IN(l)?parseFloat(l):l}return Ub(s)?sD(s,e,t+1):s}function Yb(n,e){return n?.[e]??n?.default??n}const aD=new Set(["width","height","top","left","right","bottom",...jc]),r7={test:n=>n==="auto",parse:n=>n},oD=n=>e=>e.test(n),lD=[Lc,Ve,xr,ta,Qz,Yz,r7],_A=n=>lD.find(oD(n));function s7(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||CN(n):!0}const a7=new Set(["brightness","contrast","saturate","opacity"]);function o7(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(zb)||[];if(!i)return n;const s=t.replace(i,"");let o=a7.has(e)?1:0;return i!==t&&(o*=100),e+"("+o+s+")"}const l7=/\b([a-z-]*)\(.*?\)/gu,Jv={...xa,getAnimatableNone:n=>{const e=n.match(l7);return e?e.map(o7).join(" "):n}},bA={...Lc,transform:Math.round},c7={rotate:ta,rotateX:ta,rotateY:ta,rotateZ:ta,scale:lm,scaleX:lm,scaleY:lm,scaleZ:lm,skew:ta,skewX:ta,skewY:ta,distance:Ve,translateX:Ve,translateY:Ve,translateZ:Ve,x:Ve,y:Ve,z:Ve,perspective:Ve,transformPerspective:Ve,opacity:Kh,originX:oA,originY:oA,originZ:Ve},Qb={borderWidth:Ve,borderTopWidth:Ve,borderRightWidth:Ve,borderBottomWidth:Ve,borderLeftWidth:Ve,borderRadius:Ve,radius:Ve,borderTopLeftRadius:Ve,borderTopRightRadius:Ve,borderBottomRightRadius:Ve,borderBottomLeftRadius:Ve,width:Ve,maxWidth:Ve,height:Ve,maxHeight:Ve,top:Ve,right:Ve,bottom:Ve,left:Ve,padding:Ve,paddingTop:Ve,paddingRight:Ve,paddingBottom:Ve,paddingLeft:Ve,margin:Ve,marginTop:Ve,marginRight:Ve,marginBottom:Ve,marginLeft:Ve,backgroundPositionX:Ve,backgroundPositionY:Ve,...c7,zIndex:bA,fillOpacity:Kh,strokeOpacity:Kh,numOctaves:bA},u7={...Qb,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:Jv,WebkitFilter:Jv},cD=n=>u7[n];function uD(n,e){let t=cD(n);return t!==Jv&&(t=xa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const h7=new Set(["auto","none","0"]);function d7(n,e,t){let i=0,s;for(;i<n.length&&!s;){const o=n[i];typeof o=="string"&&!h7.has(o)&&Yh(o).values.length&&(s=n[i]),i++}if(s&&t)for(const o of e)n[o]=uD(t,s)}class f7 extends Kb{constructor(e,t,i,s,o){super(e,t,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),Ub(f))){const g=sD(f,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!aD.has(i)||e.length!==2)return;const[s,o]=e,l=_A(s),u=_A(o);if(l!==u)if(pA(l)&&pA(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else No[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||s7(e[s]))&&i.push(s);i.length&&d7(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=No[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=No[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function m7(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=t?.[n]??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const hD=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function dD(n){return RN(n)&&"offsetHeight"in n}const TA=30,p7=n=>!isNaN(parseFloat(n));class g7{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=Bn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Bn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=p7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Mb);const i=this.events[e].add(t);return e==="change"?()=>{i(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>TA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,TA);return NN(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ac(n,e){return new g7(n,e)}const{schedule:Xb}=BN(queueMicrotask,!1),ji={x:!1,y:!1};function fD(){return ji.x||ji.y}function y7(n){return n==="x"||n==="y"?ji[n]?null:(ji[n]=!0,()=>{ji[n]=!1}):ji.x||ji.y?null:(ji.x=ji.y=!0,()=>{ji.x=ji.y=!1})}function mD(n,e){const t=m7(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function wA(n){return!(n.pointerType==="touch"||fD())}function v7(n,e,t={}){const[i,s,o]=mD(n,t),l=u=>{if(!wA(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const g=v=>{wA(v)&&(f(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return i.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}const pD=(n,e)=>e?n===e?!0:pD(n,e.parentElement):!1,Wb=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,_7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function b7(n){return _7.has(n.tagName)||n.tabIndex!==-1}const km=new WeakSet;function EA(n){return e=>{e.key==="Enter"&&n(e)}}function B0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const T7=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=EA(()=>{if(km.has(t))return;B0(t,"down");const s=EA(()=>{B0(t,"up")}),o=()=>B0(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function xA(n){return Wb(n)&&!fD()}function w7(n,e,t={}){const[i,s,o]=mD(n,t),l=u=>{const d=u.currentTarget;if(!xA(u))return;km.add(d);const f=e(d,u),g=(x,N)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),km.has(d)&&km.delete(d),xA(x)&&typeof f=="function"&&f(x,{success:N})},v=x=>{g(x,d===window||d===document||t.useGlobalTarget||pD(d,x.target))},_=x=>{g(x,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return i.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),dD(u)&&(u.addEventListener("focus",f=>T7(f,s)),!b7(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function gD(n){return RN(n)&&"ownerSVGElement"in n}function E7(n){return gD(n)&&n.tagName==="svg"}const wn=n=>!!(n&&n.getVelocity),x7=[...lD,Qt,xa],S7=n=>x7.find(oD(n)),Zb=U.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function SA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function A7(...n){return e=>{let t=!1;const i=n.map(s=>{const o=SA(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():SA(n[s],null)}}}}function I7(...n){return U.useCallback(A7(...n),n)}class R7 extends U.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=dD(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function C7({children:n,isPresent:e,anchorX:t,root:i}){const s=U.useId(),o=U.useRef(null),l=U.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=U.useContext(Zb),d=I7(o,n?.ref);return U.useInsertionEffect(()=>{const{width:f,height:g,top:v,left:_,right:x}=l.current;if(e||!o.current||!f||!g)return;const N=t==="left"?`left: ${_}`:`right: ${x}`;o.current.dataset.motionPopId=s;const A=document.createElement("style");u&&(A.nonce=u);const C=i??document.head;return C.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${N}px !important;
            top: ${v}px !important;
          }
        `),()=>{C.contains(A)&&C.removeChild(A)}},[e]),b.jsx(R7,{isPresent:e,childRef:o,sizeRef:l,children:U.cloneElement(n,{ref:d})})}const N7=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u,root:d})=>{const f=ig(D7),g=U.useId();let v=!0,_=U.useMemo(()=>(v=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:x=>{f.set(x,!0);for(const N of f.values())if(!N)return;i&&i()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[t,f,i]);return o&&v&&(_={..._}),U.useMemo(()=>{f.forEach((x,N)=>f.set(N,!1))},[t]),U.useEffect(()=>{!t&&!f.size&&i&&i()},[t]),l==="popLayout"&&(n=b.jsx(C7,{isPresent:t,anchorX:u,root:d,children:n})),b.jsx(rg.Provider,{value:_,children:n})};function D7(){return new Map}function yD(n=!0){const e=U.useContext(rg);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,o=U.useId();U.useEffect(()=>{if(n)return s(o)},[n]);const l=U.useCallback(()=>n&&i&&i(o),[o,i,n]);return!t&&i?[!1,l]:[!0]}const cm=n=>n.key||"";function AA(n){const e=[];return U.Children.forEach(n,t=>{U.isValidElement(t)&&e.push(t)}),e}const Jb=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left",root:d})=>{const[f,g]=yD(l),v=U.useMemo(()=>AA(n),[n]),_=l&&!f?[]:v.map(cm),x=U.useRef(!0),N=U.useRef(v),A=ig(()=>new Map),[C,P]=U.useState(v),[z,O]=U.useState(v);Nb(()=>{x.current=!1,N.current=v;for(let J=0;J<z.length;J++){const S=cm(z[J]);_.includes(S)?A.delete(S):A.get(S)!==!0&&A.set(S,!1)}},[z,_.length,_.join("-")]);const K=[];if(v!==C){let J=[...v];for(let S=0;S<z.length;S++){const R=z[S],V=cm(R);_.includes(V)||(J.splice(S,0,R),K.push(R))}return o==="wait"&&K.length&&(J=K),O(AA(J)),P(v),null}const{forceRender:te}=U.useContext(Rb);return b.jsx(b.Fragment,{children:z.map(J=>{const S=cm(J),R=l&&!f?!1:v===z||_.includes(S),V=()=>{if(A.has(S))A.set(S,!0);else return;let M=!0;A.forEach(k=>{k||(M=!1)}),M&&(te?.(),O(N.current),l&&g?.(),i&&i())};return b.jsx(N7,{isPresent:R,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:R?void 0:V,anchorX:u,children:J},S)})})},vD=U.createContext({strict:!1}),IA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ic={};for(const n in IA)Ic[n]={isEnabled:e=>IA[n].some(t=>!!e[t])};function k7(n){for(const e in n)Ic[e]={...Ic[e],...n[e]}}const V7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||V7.has(n)}let _D=n=>!gp(n);function P7(n){typeof n=="function"&&(_D=e=>e.startsWith("on")?!gp(e):n(e))}try{P7(require("@emotion/is-prop-valid").default)}catch{}function M7(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(_D(s)||t===!0&&gp(s)||!e&&!gp(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const sg=U.createContext({});function ag(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Qh(n){return typeof n=="string"||Array.isArray(n)}const eT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tT=["initial",...eT];function og(n){return ag(n.animate)||tT.some(e=>Qh(n[e]))}function bD(n){return!!(og(n)||n.variants)}function O7(n,e){if(og(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Qh(t)?t:void 0,animate:Qh(i)?i:void 0}}return n.inherit!==!1?e:{}}function L7(n){const{initial:e,animate:t}=O7(n,U.useContext(sg));return U.useMemo(()=>({initial:e,animate:t}),[RA(e),RA(t)])}function RA(n){return Array.isArray(n)?n.join(" "):n}const Xh={};function j7(n){for(const e in n)Xh[e]=n[e],jb(e)&&(Xh[e].isCSSVariable=!0)}function TD(n,{layout:e,layoutId:t}){return Uc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Xh[n]||n==="opacity")}const U7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},z7=jc.length;function B7(n,e,t){let i="",s=!0;for(let o=0;o<z7;o++){const l=jc[o],u=n[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||t){const f=hD(u,Qb[l]);if(!d){s=!1;const g=U7[l]||l;i+=`${g}(${f}) `}t&&(e[l]=f)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function nT(n,e,t){const{style:i,vars:s,transformOrigin:o}=n;let l=!1,u=!1;for(const d in e){const f=e[d];if(Uc.has(d)){l=!0;continue}else if(jb(d)){s[d]=f;continue}else{const g=hD(f,Qb[d]);d.startsWith("origin")?(u=!0,o[d]=g):i[d]=g}}if(e.transform||(l||t?i.transform=B7(e,n.transform,t):i.transform&&(i.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:g=0}=o;i.transformOrigin=`${d} ${f} ${g}`}}const iT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wD(n,e,t){for(const i in e)!wn(e[i])&&!TD(i,t)&&(n[i]=e[i])}function F7({transformTemplate:n},e){return U.useMemo(()=>{const t=iT();return nT(t,e,n),Object.assign({},t.vars,t.style)},[e])}function q7(n,e){const t=n.style||{},i={};return wD(i,t,n),Object.assign(i,F7(n,e)),i}function H7(n,e){const t={},i=q7(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const G7={offset:"stroke-dashoffset",array:"stroke-dasharray"},$7={offset:"strokeDashoffset",array:"strokeDasharray"};function K7(n,e,t=1,i=0,s=!0){n.pathLength=1;const o=s?G7:$7;n[o.offset]=Ve.transform(-i);const l=Ve.transform(e),u=Ve.transform(t);n[o.array]=`${l} ${u}`}function ED(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},d,f,g){if(nT(n,u,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_}=n;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),s!==void 0&&K7(v,s,o,l,!1)}const xD=()=>({...iT(),attrs:{}}),SD=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Y7(n,e,t,i){const s=U.useMemo(()=>{const o=xD();return ED(o,e,SD(i),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};wD(o,n.style,n),s.style={...o,...s.style}}return s}const Q7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rT(n){return typeof n!="string"||n.includes("-")?!1:!!(Q7.indexOf(n)>-1||/[A-Z]/u.test(n))}function X7(n,e,t,{latestValues:i},s,o=!1){const u=(rT(n)?Y7:H7)(e,i,s,n),d=M7(e,typeof n=="string",o),f=n!==U.Fragment?{...d,...u,ref:t}:{},{children:g}=e,v=U.useMemo(()=>wn(g)?g.get():g,[g]);return U.createElement(n,{...f,children:v})}function CA(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function sT(n,e,t,i){if(typeof e=="function"){const[s,o]=CA(i);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=CA(i);e=e(t!==void 0?t:n.custom,s,o)}return e}function Vm(n){return wn(n)?n.get():n}function W7({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:Z7(t,i,s,n),renderState:e()}}function Z7(n,e,t,i){const s={},o=i(n,{});for(const _ in o)s[_]=Vm(o[_]);let{initial:l,animate:u}=n;const d=og(n),f=bD(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!ag(v)){const _=Array.isArray(v)?v:[v];for(let x=0;x<_.length;x++){const N=sT(n,_[x]);if(N){const{transitionEnd:A,transition:C,...P}=N;for(const z in P){let O=P[z];if(Array.isArray(O)){const K=g?O.length-1:0;O=O[K]}O!==null&&(s[z]=O)}for(const z in A)s[z]=A[z]}}}return s}const AD=n=>(e,t)=>{const i=U.useContext(sg),s=U.useContext(rg),o=()=>W7(n,e,i,s);return t?o():ig(o)};function aT(n,e,t){const{style:i}=n,s={};for(const o in i)(wn(i[o])||e.style&&wn(e.style[o])||TD(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const J7=AD({scrapeMotionValuesFromProps:aT,createRenderState:iT});function ID(n,e,t){const i=aT(n,e,t);for(const s in n)if(wn(n[s])||wn(e[s])){const o=jc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=n[s]}return i}const eB=AD({scrapeMotionValuesFromProps:ID,createRenderState:xD}),tB=Symbol.for("motionComponentSymbol");function Wl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function nB(n,e,t){return U.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Wl(t)&&(t.current=i))},[e])}const oT=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iB="framerAppearId",RD="data-"+oT(iB),CD=U.createContext({});function rB(n,e,t,i,s){const{visualElement:o}=U.useContext(sg),l=U.useContext(vD),u=U.useContext(rg),d=U.useContext(Zb).reducedMotion,f=U.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,v=U.useContext(CD);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&sB(f.current,t,s,v);const _=U.useRef(!1);U.useInsertionEffect(()=>{g&&_.current&&g.update(t,u)});const x=t[RD],N=U.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return Nb(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),N.current&&g.animationState&&g.animationState.animateChanges())}),U.useEffect(()=>{g&&(!N.current&&g.animationState&&g.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),N.current=!1),g.enteringChildren=void 0)}),g}function sB(n,e,t,i){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:ND(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&Wl(u),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:d,layoutRoot:f})}function ND(n){if(n)return n.options.allowProjection!==!1?n.projection:ND(n.parent)}function F0(n,{forwardMotionProps:e=!1}={},t,i){t&&k7(t);const s=rT(n)?eB:J7;function o(u,d){let f;const g={...U.useContext(Zb),...u,layoutId:aB(u)},{isStatic:v}=g,_=L7(u),x=s(u,v);if(!v&&Cb){oB();const N=lB(g);f=N.MeasureLayout,_.visualElement=rB(n,x,g,i,N.ProjectionNode)}return b.jsxs(sg.Provider,{value:_,children:[f&&_.visualElement?b.jsx(f,{visualElement:_.visualElement,...g}):null,X7(n,u,nB(x,_.visualElement,d),x,v,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=U.forwardRef(o);return l[tB]=n,l}function aB({layoutId:n}){const e=U.useContext(Rb).id;return e&&n!==void 0?e+"-"+n:n}function oB(n,e){U.useContext(vD).strict}function lB(n){const{drag:e,layout:t}=Ic;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function cB(n,e){if(typeof Proxy>"u")return F0;const t=new Map,i=(o,l)=>F0(o,l,n,e),s=(o,l)=>i(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?i:(t.has(l)||t.set(l,F0(l,void 0,n,e)),t.get(l))})}function DD({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function uB({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function hB(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function q0(n){return n===void 0||n===1}function e_({scale:n,scaleX:e,scaleY:t}){return!q0(n)||!q0(e)||!q0(t)}function yo(n){return e_(n)||kD(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function kD(n){return NA(n.x)||NA(n.y)}function NA(n){return n&&n!=="0%"}function yp(n,e,t){const i=n-t,s=e*i;return t+s}function DA(n,e,t,i,s){return s!==void 0&&(n=yp(n,s,i)),yp(n,t,i)+e}function t_(n,e=0,t=1,i,s){n.min=DA(n.min,e,t,i,s),n.max=DA(n.max,e,t,i,s)}function VD(n,{x:e,y:t}){t_(n.x,e.translate,e.scale,e.originPoint),t_(n.y,t.translate,t.scale,t.originPoint)}const kA=.999999999999,VA=1.0000000000001;function dB(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let u=0;u<s;u++){o=t[u],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Jl(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,VD(n,l)),i&&yo(o.latestValues)&&Jl(n,o.latestValues))}e.x<VA&&e.x>kA&&(e.x=1),e.y<VA&&e.y>kA&&(e.y=1)}function Zl(n,e){n.min=n.min+e,n.max=n.max+e}function PA(n,e,t,i,s=.5){const o=xt(n.min,n.max,s);t_(n,e,t,o,i)}function Jl(n,e){PA(n.x,e.x,e.scaleX,e.scale,e.originX),PA(n.y,e.y,e.scaleY,e.scale,e.originY)}function PD(n,e){return DD(hB(n.getBoundingClientRect(),e))}function fB(n,e,t){const i=PD(n,t),{scroll:s}=e;return s&&(Zl(i.x,s.offset.x),Zl(i.y,s.offset.y)),i}const MA=()=>({translate:0,scale:1,origin:0,originPoint:0}),ec=()=>({x:MA(),y:MA()}),OA=()=>({min:0,max:0}),Mt=()=>({x:OA(),y:OA()}),n_={current:null},MD={current:!1};function mB(){if(MD.current=!0,!!Cb)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>n_.current=n.matches;n.addEventListener("change",e),e()}else n_.current=!1}const pB=new WeakMap;function gB(n,e,t){for(const i in e){const s=e[i],o=t[i];if(wn(s))n.addValue(i,s);else if(wn(o))n.addValue(i,Ac(s,{owner:n}));else if(o!==s)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,Ac(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const LA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yB{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Kb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Bn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,wt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=og(t),this.isVariantNode=bD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const x=v[_];d[_]!==void 0&&wn(x)&&x.set(d[_])}}mount(e){this.current=e,pB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),MD.current||mB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:n_.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ea(this.notifyUpdate),Ea(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Uc.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&wt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ic){const t=Ic[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<LA.length;i++){const s=LA[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=gB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Ac(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(IN(i)||CN(i))?i=parseFloat(i):!S7(i)&&xa.test(t)&&(i=uD(e,t)),this.setBaseTarget(e,wn(i)?i.get():i)),wn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const o=sT(this.props,t,this.presenceContext?.custom);o&&(i=o[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!wn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Mb),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Xb.render(this.render)}}class OD extends yB{constructor(){super(...arguments),this.KeyframeResolver=f7}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function LD(n,{style:e,vars:t},i,s){const o=n.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,i);for(l in t)o.setProperty(l,t[l])}function vB(n){return window.getComputedStyle(n)}class _B extends OD{constructor(){super(...arguments),this.type="html",this.renderInstance=LD}readValueFromInstance(e,t){if(Uc.has(t))return this.projection?.isProjecting?Kv(t):k8(e,t);{const i=vB(e),s=(jb(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return PD(e,t)}build(e,t,i){nT(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return aT(e,t,i)}}const jD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bB(n,e,t,i){LD(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(jD.has(s)?s:oT(s),e.attrs[s])}class TB extends OD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Uc.has(t)){const i=cD(t);return i&&i.default||0}return t=jD.has(t)?t:oT(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return ID(e,t,i)}build(e,t,i){ED(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){bB(e,t,i,s)}mount(e){this.isSVGTag=SD(e.tagName),super.mount(e)}}const wB=(n,e)=>rT(n)?new TB(e):new _B(e,{allowProjection:n!==U.Fragment});function sc(n,e,t){const i=n.getProps();return sT(i,e,t!==void 0?t:i.custom,n)}const i_=n=>Array.isArray(n);function EB(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ac(t))}function xB(n){return i_(n)?n[n.length-1]||0:n}function lT(n,e){const t=sc(n,e);let{transitionEnd:i={},transition:s={},...o}=t||{};o={...o,...i};for(const l in o){const u=xB(o[l]);EB(n,l,u)}}function SB(n){return!!(wn(n)&&n.add)}function r_(n,e){const t=n.getValue("willChange");if(SB(t))return t.add(e);if(!t&&us.WillChange){const i=new us.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function UD(n){return n.props[RD]}const AB=n=>n!==null;function IB(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(AB),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}const RB={type:"spring",stiffness:500,damping:25,restSpeed:10},CB=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),NB={type:"keyframes",duration:.8},DB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kB=(n,{keyframes:e})=>e.length>2?NB:Uc.has(n)?n.startsWith("scale")?CB(e[1]):RB:DB;function VB({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const cT=(n,e,t,i={},s,o)=>l=>{const u=Yb(i,n)||{},d=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Er(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:s};VB(u)||Object.assign(g,kB(n,g)),g.duration&&(g.duration=Er(g.duration)),g.repeatDelay&&(g.repeatDelay=Er(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Zv(g),g.delay===0&&(v=!0)),(us.instantAnimations||us.skipAnimations)&&(v=!0,Zv(g),g.delay=0),g.allowFlatten=!u.type&&!u.ease,v&&!o&&e.get()!==void 0){const _=IB(g.keyframes,u);if(_!==void 0){wt.update(()=>{g.onUpdate(_),g.onComplete()});return}}return u.isSync?new $b(g):new t7(g)};function PB({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function zD(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...u}=e;i&&(o=i);const d=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const g in u){const v=n.getValue(g,n.latestValues[g]??null),_=u[g];if(_===void 0||f&&PB(f,g))continue;const x={delay:t,...Yb(o||{},g)},N=v.get();if(N!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===N&&!x.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const P=UD(n);if(P){const z=window.MotionHandoffAnimation(P,g,wt);z!==null&&(x.startTime=z,A=!0)}}r_(n,g),v.start(cT(g,v,_,n.shouldReduceMotion&&aD.has(g)?{type:!1}:x,n,A));const C=v.animation;C&&d.push(C)}return l&&Promise.all(d).then(()=>{wt.update(()=>{l&&lT(n,l)})}),d}function BD(n,e,t,i=0,s=1){const o=Array.from(n).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),l=n.size,u=(l-1)*i;return typeof t=="function"?t(o,l):s===1?o*i:u-o*i}function s_(n,e,t={}){const i=sc(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(zD(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:v}=s;return MB(n,e,d,f,g,v,t)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,f]=u==="beforeChildren"?[o,l]:[l,o];return d().then(()=>f())}else return Promise.all([o(),l(t.delay)])}function MB(n,e,t=0,i=0,s=0,o=1,l){const u=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),u.push(s_(d,e,{...l,delay:t+(typeof i=="function"?0:i)+BD(n.variantChildren,d,i,s,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(u)}function FD(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(o=>s_(n,o,t));i=Promise.all(s)}else if(typeof e=="string")i=s_(n,e,t);else{const s=typeof e=="function"?sc(n,e,t.custom):e;i=Promise.all(zD(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function qD(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const OB=tT.length;function HD(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?HD(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<OB;t++){const i=tT[t],s=n.props[i];(Qh(s)||s===!1)&&(e[i]=s)}return e}const LB=[...eT].reverse(),jB=eT.length;function UB(n){return e=>Promise.all(e.map(({animation:t,options:i})=>FD(n,t,i)))}function zB(n){let e=UB(n),t=jA(),i=!0;const s=d=>(f,g)=>{const v=sc(n,g,d==="exit"?n.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:x,...N}=v;f={...f,...N,...x}}return f};function o(d){e=d(n)}function l(d){const{props:f}=n,g=HD(n.parent)||{},v=[],_=new Set;let x={},N=1/0;for(let C=0;C<jB;C++){const P=LB[C],z=t[P],O=f[P]!==void 0?f[P]:g[P],K=Qh(O),te=P===d?z.isActive:null;te===!1&&(N=C);let J=O===g[P]&&O!==f[P]&&K;if(J&&i&&n.manuallyAnimateOnMount&&(J=!1),z.protectedKeys={...x},!z.isActive&&te===null||!O&&!z.prevProp||ag(O)||typeof O=="boolean")continue;const S=BB(z.prevProp,O);let R=S||P===d&&z.isActive&&!J&&K||C>N&&K,V=!1;const M=Array.isArray(O)?O:[O];let k=M.reduce(s(P),{});te===!1&&(k={});const{prevResolvedValues:F={}}=z,j={...F,...k},Le=oe=>{R=!0,_.has(oe)&&(V=!0,_.delete(oe)),z.needsAnimating[oe]=!0;const ge=n.getValue(oe);ge&&(ge.liveStyle=!1)};for(const oe in j){const ge=k[oe],xe=F[oe];if(x.hasOwnProperty(oe))continue;let ce=!1;i_(ge)&&i_(xe)?ce=!qD(ge,xe):ce=ge!==xe,ce?ge!=null?Le(oe):_.add(oe):ge!==void 0&&_.has(oe)?Le(oe):z.protectedKeys[oe]=!0}z.prevProp=O,z.prevResolvedValues=k,z.isActive&&(x={...x,...k}),i&&n.blockInitialAnimation&&(R=!1);const me=J&&S;R&&(!me||V)&&v.push(...M.map(oe=>{const ge={type:P};if(typeof oe=="string"&&i&&!me&&n.manuallyAnimateOnMount&&n.parent){const{parent:xe}=n,ce=sc(xe,oe);if(xe.enteringChildren&&ce){const{delayChildren:L}=ce.transition||{};ge.delay=BD(xe.enteringChildren,n,L)}}return{animation:oe,options:ge}}))}if(_.size){const C={};if(typeof f.initial!="boolean"){const P=sc(n,Array.isArray(f.initial)?f.initial[0]:f.initial);P&&P.transition&&(C.transition=P.transition)}_.forEach(P=>{const z=n.getBaseTarget(P),O=n.getValue(P);O&&(O.liveStyle=!0),C[P]=z??null}),v.push({animation:C})}let A=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(v):Promise.resolve()}function u(d,f){if(t[d].isActive===f)return Promise.resolve();n.variantChildren?.forEach(v=>v.animationState?.setActive(d,f)),t[d].isActive=f;const g=l(d);for(const v in t)t[v].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>t,reset:()=>{t=jA()}}}function BB(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!qD(e,n):!1}function ho(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jA(){return{animate:ho(!0),whileInView:ho(),whileHover:ho(),whileTap:ho(),whileDrag:ho(),whileFocus:ho(),exit:ho()}}class Va{constructor(e){this.isMounted=!1,this.node=e}update(){}}class FB extends Va{constructor(e){super(e),e.animationState||(e.animationState=zB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ag(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let qB=0;class HB extends Va{constructor(){super(...arguments),this.id=qB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const GB={animation:{Feature:FB},exit:{Feature:HB}};function Wh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function _d(n){return{point:{x:n.pageX,y:n.pageY}}}const $B=n=>e=>Wb(e)&&n(e,_d(e));function Th(n,e,t,i){return Wh(n,e,$B(t),i)}const GD=1e-4,KB=1-GD,YB=1+GD,$D=.01,QB=0-$D,XB=0+$D;function Cn(n){return n.max-n.min}function WB(n,e,t){return Math.abs(n-e)<=t}function UA(n,e,t,i=.5){n.origin=i,n.originPoint=xt(e.min,e.max,n.origin),n.scale=Cn(t)/Cn(e),n.translate=xt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=KB&&n.scale<=YB||isNaN(n.scale))&&(n.scale=1),(n.translate>=QB&&n.translate<=XB||isNaN(n.translate))&&(n.translate=0)}function wh(n,e,t,i){UA(n.x,e.x,t.x,i?i.originX:void 0),UA(n.y,e.y,t.y,i?i.originY:void 0)}function zA(n,e,t){n.min=t.min+e.min,n.max=n.min+Cn(e)}function ZB(n,e,t){zA(n.x,e.x,t.x),zA(n.y,e.y,t.y)}function BA(n,e,t){n.min=e.min-t.min,n.max=n.min+Cn(e)}function Eh(n,e,t){BA(n.x,e.x,t.x),BA(n.y,e.y,t.y)}function vi(n){return[n("x"),n("y")]}const KD=({current:n})=>n?n.ownerDocument.defaultView:null,FA=(n,e)=>Math.abs(n-e);function JB(n,e){const t=FA(n.x,e.x),i=FA(n.y,e.y);return Math.sqrt(t**2+i**2)}class YD{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=G0(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,N=JB(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!N)return;const{point:A}=_,{timestamp:C}=fn;this.history.push({...A,timestamp:C});const{onStart:P,onMove:z}=this.handlers;x||(P&&P(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,_)},this.handlePointerMove=(_,x)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=H0(x,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(_,x)=>{this.end();const{onEnd:N,onSessionEnd:A,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=G0(_.type==="pointercancel"?this.lastMoveEventInfo:H0(x,this.transformPagePoint),this.history);this.startEvent&&N&&N(_,P),A&&A(_,P)},!Wb(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=s||window;const u=_d(e),d=H0(u,this.transformPagePoint),{point:f}=d,{timestamp:g}=fn;this.history=[{...f,timestamp:g}];const{onSessionStart:v}=t;v&&v(e,G0(d,this.history)),this.removeListeners=gd(Th(this.contextWindow,"pointermove",this.handlePointerMove),Th(this.contextWindow,"pointerup",this.handlePointerUp),Th(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ea(this.updatePoint)}}function H0(n,e){return e?{point:e(n.point)}:n}function qA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function G0({point:n},e){return{point:n,delta:qA(n,QD(e)),offset:qA(n,eF(e)),velocity:tF(e,.1)}}function eF(n){return n[0]}function QD(n){return n[n.length-1]}function tF(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=QD(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>Er(e)));)t--;if(!i)return{x:0,y:0};const o=wi(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function nF(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?xt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?xt(t,n,i.max):Math.min(n,t)),n}function HA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function iF(n,{top:e,left:t,bottom:i,right:s}){return{x:HA(n.x,t,s),y:HA(n.y,e,i)}}function GA(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function rF(n,e){return{x:GA(n.x,e.x),y:GA(n.y,e.y)}}function sF(n,e){let t=.5;const i=Cn(n),s=Cn(e);return s>i?t=$h(e.min,e.max-i,n.min):i>s&&(t=$h(n.min,n.max-s,e.min)),cs(0,1,t)}function aF(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const a_=.35;function oF(n=a_){return n===!1?n=0:n===!0&&(n=a_),{x:$A(n,"left","right"),y:$A(n,"top","bottom")}}function $A(n,e,t){return{min:KA(n,e),max:KA(n,t)}}function KA(n,e){return typeof n=="number"?n:n[e]||0}const lF=new WeakMap;class cF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(_d(v).point)},l=(v,_)=>{const{drag:x,dragPropagation:N,onDragStart:A}=this.getProps();if(x&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=y7(x),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vi(P=>{let z=this.getAxisMotionValue(P).get()||0;if(xr.test(z)){const{projection:O}=this.visualElement;if(O&&O.layout){const K=O.layout.layoutBox[P];K&&(z=Cn(K)*(parseFloat(z)/100))}}this.originPoint[P]=z}),A&&wt.postRender(()=>A(v,_)),r_(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},u=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:x,dragDirectionLock:N,onDirectionLock:A,onDrag:C}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:P}=_;if(N&&this.currentDirection===null){this.currentDirection=uF(P),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",_.point,P),this.updateAxis("y",_.point,P),this.visualElement.render(),C&&C(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>vi(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new YD(e,{onSessionStart:o,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:KD(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&wt.postRender(()=>u(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!um(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=nF(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Wl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=iF(i.layoutBox,e):this.constraints=!1,this.elastic=oF(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&vi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=aF(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Wl(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=fB(i,s.root,this.visualElement.getTransformPagePoint());let l=rF(s.layout.layoutBox,o);if(t){const u=t(uB(l));this.hasMutatedConstraints=!!u,u&&(l=DD(u))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=vi(g=>{if(!um(g,t,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const _=s?200:1e6,x=s?40:1e7,N={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,N)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return r_(this.visualElement,e),i.start(cT(e,i,0,t,this.visualElement,!1))}stopAnimation(){vi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){vi(t=>{const{drag:i}=this.getProps();if(!um(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[t];o.set(e[t]-xt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Wl(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};vi(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=sF({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),vi(l=>{if(!um(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(xt(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;lF.set(this.visualElement,this);const e=this.visualElement.current,t=Th(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Wl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),wt.read(i);const l=Wh(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(vi(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=a_,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function um(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function uF(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class hF extends Va{constructor(e){super(e),this.removeGroupControls=xi,this.removeListeners=xi,this.controls=new cF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xi}unmount(){this.removeGroupControls(),this.removeListeners()}}const YA=n=>(e,t)=>{n&&wt.postRender(()=>n(e,t))};class dF extends Va{constructor(){super(...arguments),this.removePointerDownListener=xi}onPointerDown(e){this.session=new YD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:KD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:YA(e),onStart:YA(t),onMove:i,onEnd:(o,l)=>{delete this.session,s&&wt.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Th(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Pm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function QA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Zu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ve.test(n))n=parseFloat(n);else return n;const t=QA(n,e.target.x),i=QA(n,e.target.y);return`${t}% ${i}%`}},fF={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=xa.parse(n);if(s.length>5)return i;const o=xa.createTransformer(n),l=typeof s[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=u,s[1+l]/=d;const f=xt(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),o(s)}};let $0=!1;class mF extends U.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=e;j7(pF),o&&(t.group&&t.group.add(o),i&&i.register&&s&&i.register(o),$0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Pm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:o}=this.props,{projection:l}=i;return l&&(l.isPresent=o,$0=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||wt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;$0=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function XD(n){const[e,t]=yD(),i=U.useContext(Rb);return b.jsx(mF,{...n,layoutGroup:i,switchLayoutGroup:U.useContext(CD),isPresent:e,safeToRemove:t})}const pF={borderRadius:{...Zu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zu,borderTopRightRadius:Zu,borderBottomLeftRadius:Zu,borderBottomRightRadius:Zu,boxShadow:fF};function gF(n,e,t){const i=wn(n)?n:Ac(n);return i.start(cT("",i,e,t)),i.animation}const yF=(n,e)=>n.depth-e.depth;class vF{constructor(){this.children=[],this.isDirty=!1}add(e){Db(this.children,e),this.isDirty=!0}remove(e){kb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yF),this.isDirty=!1,this.children.forEach(e)}}function _F(n,e){const t=Bn.now(),i=({timestamp:s})=>{const o=s-t;o>=e&&(Ea(i),n(o-e))};return wt.setup(i,!0),()=>Ea(i)}const WD=["TopLeft","TopRight","BottomLeft","BottomRight"],bF=WD.length,XA=n=>typeof n=="string"?parseFloat(n):n,WA=n=>typeof n=="number"||Ve.test(n);function TF(n,e,t,i,s,o){s?(n.opacity=xt(0,t.opacity??1,wF(i)),n.opacityExit=xt(e.opacity??1,0,EF(i))):o&&(n.opacity=xt(e.opacity??1,t.opacity??1,i));for(let l=0;l<bF;l++){const u=`border${WD[l]}Radius`;let d=ZA(e,u),f=ZA(t,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||WA(d)===WA(f)?(n[u]=Math.max(xt(XA(d),XA(f),i),0),(xr.test(f)||xr.test(d))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=xt(e.rotate||0,t.rotate||0,i))}function ZA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const wF=ZD(0,.5,LN),EF=ZD(.5,.95,xi);function ZD(n,e,t){return i=>i<n?0:i>e?1:t($h(n,e,i))}function JA(n,e){n.min=e.min,n.max=e.max}function yi(n,e){JA(n.x,e.x),JA(n.y,e.y)}function eI(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function tI(n,e,t,i,s){return n-=e,n=yp(n,1/t,i),s!==void 0&&(n=yp(n,1/s,i)),n}function xF(n,e=0,t=1,i=.5,s,o=n,l=n){if(xr.test(e)&&(e=parseFloat(e),e=xt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=xt(o.min,o.max,i);n===o&&(u-=e),n.min=tI(n.min,e,t,u,s),n.max=tI(n.max,e,t,u,s)}function nI(n,e,[t,i,s],o,l){xF(n,e[t],e[i],e[s],e.scale,o,l)}const SF=["x","scaleX","originX"],AF=["y","scaleY","originY"];function iI(n,e,t,i){nI(n.x,e,SF,t?t.x:void 0,i?i.x:void 0),nI(n.y,e,AF,t?t.y:void 0,i?i.y:void 0)}function rI(n){return n.translate===0&&n.scale===1}function JD(n){return rI(n.x)&&rI(n.y)}function sI(n,e){return n.min===e.min&&n.max===e.max}function IF(n,e){return sI(n.x,e.x)&&sI(n.y,e.y)}function aI(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function ek(n,e){return aI(n.x,e.x)&&aI(n.y,e.y)}function oI(n){return Cn(n.x)/Cn(n.y)}function lI(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class RF{constructor(){this.members=[]}add(e){Db(this.members,e),e.scheduleRender()}remove(e){if(kb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CF(n,e,t){let i="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=t?.z||0;if((s||o||l)&&(i=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:v,rotateY:_,skewX:x,skewY:N}=t;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),v&&(i+=`rotateX(${v}deg) `),_&&(i+=`rotateY(${_}deg) `),x&&(i+=`skewX(${x}deg) `),N&&(i+=`skewY(${N}deg) `)}const u=n.x.scale*e.x,d=n.y.scale*e.y;return(u!==1||d!==1)&&(i+=`scale(${u}, ${d})`),i||"none"}const K0=["","X","Y","Z"],NF=1e3;let DF=0;function Y0(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function tk(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=UD(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",wt,!(s||o))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&tk(i)}function nk({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},u=e?.()){this.id=DF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(PF),this.nodes.forEach(jF),this.nodes.forEach(UF),this.nodes.forEach(MF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new vF)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Mb),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=gD(l)&&!E7(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),n){let g,v=0;const _=()=>this.root.updateBlockedByResize=!1;wt.read(()=>{v=window.innerWidth}),n(l,()=>{const x=window.innerWidth;x!==v&&(v=x,this.root.updateBlockedByResize=!0,g&&g(),g=_F(_,250),Pm.hasAnimatedSinceResize&&(Pm.hasAnimatedSinceResize=!1,this.nodes.forEach(hI)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||f.getDefaultTransition()||HF,{onLayoutAnimationStart:A,onLayoutAnimationComplete:C}=f.getProps(),P=!this.targetLayout||!ek(this.targetLayout,x),z=!v&&_;if(this.options.layoutRoot||this.resumeFrom||z||v&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...Yb(N,"layout"),onPlay:A,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(g,z)}else v||hI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ea(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zF),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&tk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cI);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(uI);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(LF),this.nodes.forEach(kF),this.nodes.forEach(VF)):this.nodes.forEach(uI),this.clearAllSnapshots();const u=Bn.now();fn.delta=cs(0,1e3/60,u-fn.timestamp),fn.timestamp=u,fn.isProcessing=!0,O0.update.process(fn),O0.preRender.process(fn),O0.render.process(fn),fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(OF),this.sharedNodes.forEach(BF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Cn(this.snapshot.measuredBox.x)&&!Cn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!JD(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||yo(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),GF(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Mt();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some($F))){const{scroll:f}=this.root;f&&(Zl(u.x,f.offset.x),Zl(u.y,f.offset.y))}return u}removeElementScroll(l){const u=Mt();if(yi(u,l),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:g,options:v}=f;f!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&yi(u,l),Zl(u.x,g.offset.x),Zl(u.y,g.offset.y))}return u}applyTransform(l,u=!1){const d=Mt();yi(d,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Jl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),yo(g.latestValues)&&Jl(d,g.latestValues)}return yo(this.latestValues)&&Jl(d,this.latestValues),d}removeTransform(l){const u=Mt();yi(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!yo(f.latestValues))continue;e_(f.latestValues)&&f.updateSnapshot();const g=Mt(),v=f.measurePageBox();yi(g,v),iI(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return yo(this.latestValues)&&iI(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=fn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),Eh(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),yi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mt(),this.targetWithTransforms=Mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yi(this.target,this.layout.layoutBox),VD(this.target,this.targetDelta)):yi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),Eh(this.relativeTargetOrigin,this.target,_.target),yi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||e_(this.parent.latestValues)||kD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===fn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;yi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;dB(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Mt());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(eI(this.prevProjectionDelta.x,this.projectionDelta.x),eI(this.prevProjectionDelta.y,this.projectionDelta.y)),wh(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!lI(this.projectionDelta.x,this.prevProjectionDelta.x)||!lI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ec(),this.projectionDelta=ec(),this.projectionDeltaWithTransform=ec()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},v=ec();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=Mt(),x=d?d.source:void 0,N=this.layout?this.layout.source:void 0,A=x!==N,C=this.getStack(),P=!C||C.members.length<=1,z=!!(A&&!P&&this.options.crossfade===!0&&!this.path.some(qF));this.animationProgress=0;let O;this.mixTargetDelta=K=>{const te=K/1e3;dI(v.x,l.x,te),dI(v.y,l.y,te),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Eh(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),FF(this.relativeTarget,this.relativeTargetOrigin,_,te),O&&IF(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Mt()),yi(O,this.relativeTarget)),A&&(this.animationValues=g,TF(g,f,this.latestValues,te,z,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ea(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{Pm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ac(0)),this.currentAnimation=gF(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(NF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:g}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&ik(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Mt();const v=Cn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const _=Cn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}yi(u,d),Jl(u,g),wh(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new RF),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&Y0("z",l,f,this.animationValues);for(let g=0;g<K0.length;g++)Y0(`rotate${K0[g]}`,l,f,this.animationValues),Y0(`skew${K0[g]}`,l,f,this.animationValues);l.render();for(const g in f)l.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Vm(u?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Vm(u?.pointerEvents)||""),this.hasProjected&&!yo(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=CF(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),l.transform=v;const{x:_,y:x}=this.projectionDelta;l.transformOrigin=`${_.origin*100}% ${x.origin*100}% 0`,f.animationValues?l.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const N in Xh){if(g[N]===void 0)continue;const{correct:A,applyTo:C,isCSSVariable:P}=Xh[N],z=v==="none"?g[N]:A(g[N],f);if(C){const O=C.length;for(let K=0;K<O;K++)l[C[K]]=z}else P?this.options.visualElement.renderState.vars[N]=z:l[N]=z}this.options.layoutId&&(l.pointerEvents=f===this?Vm(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(cI),this.root.sharedNodes.clear()}}}function kF(n){n.updateLayout()}function VF(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?vi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Cn(v);v.min=t[g].min,v.max=v.min+_}):ik(s,e.layoutBox,t)&&vi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Cn(t[g]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+_)});const l=ec();wh(l,t,e.layoutBox);const u=ec();o?wh(u,n.applyTransform(i,!0),e.measuredBox):wh(u,t,e.layoutBox);const d=!JD(l);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:_}=g;if(v&&_){const x=Mt();Eh(x,e.layoutBox,v.layoutBox);const N=Mt();Eh(N,t,_.layoutBox),ek(x,N)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=N,n.relativeTargetOrigin=x,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function PF(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function MF(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function OF(n){n.clearSnapshot()}function cI(n){n.clearMeasurements()}function uI(n){n.isLayoutDirty=!1}function LF(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function hI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function jF(n){n.resolveTargetDelta()}function UF(n){n.calcProjection()}function zF(n){n.resetSkewAndRotation()}function BF(n){n.removeLeadSnapshot()}function dI(n,e,t){n.translate=xt(e.translate,0,t),n.scale=xt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function fI(n,e,t,i){n.min=xt(e.min,t.min,i),n.max=xt(e.max,t.max,i)}function FF(n,e,t,i){fI(n.x,e.x,t.x,i),fI(n.y,e.y,t.y,i)}function qF(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const HF={duration:.45,ease:[.4,0,.1,1]},mI=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),pI=mI("applewebkit/")&&!mI("chrome/")?Math.round:xi;function gI(n){n.min=pI(n.min),n.max=pI(n.max)}function GF(n){gI(n.x),gI(n.y)}function ik(n,e,t){return n==="position"||n==="preserve-aspect"&&!WB(oI(e),oI(t),.2)}function $F(n){return n!==n.root&&n.scroll?.wasRoot}const KF=nk({attachResizeListener:(n,e)=>Wh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Q0={current:void 0},rk=nk({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Q0.current){const n=new KF({});n.mount(window),n.setOptions({layoutScroll:!0}),Q0.current=n}return Q0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),YF={pan:{Feature:dF},drag:{Feature:hF,ProjectionNode:rk,MeasureLayout:XD}};function yI(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=i[s];o&&wt.postRender(()=>o(e,_d(e)))}class QF extends Va{mount(){const{current:e}=this.node;e&&(this.unmount=v7(e,(t,i)=>(yI(this.node,i,"Start"),s=>yI(this.node,s,"End"))))}unmount(){}}class XF extends Va{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gd(Wh(this.node.current,"focus",()=>this.onFocus()),Wh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vI(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=i[s];o&&wt.postRender(()=>o(e,_d(e)))}class WF extends Va{mount(){const{current:e}=this.node;e&&(this.unmount=w7(e,(t,i)=>(vI(this.node,i,"Start"),(s,{success:o})=>vI(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const o_=new WeakMap,X0=new WeakMap,ZF=n=>{const e=o_.get(n.target);e&&e(n)},JF=n=>{n.forEach(ZF)};function eq({root:n,...e}){const t=n||document;X0.has(t)||X0.set(t,{});const i=X0.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(JF,{root:n,...e})),i[s]}function tq(n,e,t){const i=eq(e);return o_.set(n,t),i.observe(n),()=>{o_.delete(n),i.unobserve(n)}}const nq={some:0,all:1};class iq extends Va{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:nq[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=f?g:v;_&&_(d)};return tq(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(rq(e,t))&&this.startObserver()}unmount(){}}function rq({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const sq={inView:{Feature:iq},tap:{Feature:WF},focus:{Feature:XF},hover:{Feature:QF}},aq={layout:{ProjectionNode:rk,MeasureLayout:XD}},oq={...GB,...sq,...YF,...aq},lg=cB(oq,wB);function lq(n){n.values.forEach(e=>e.stop())}function l_(n,e){[...e].reverse().forEach(i=>{const s=n.getVariant(i);s&&lT(n,s),n.variantChildren&&n.variantChildren.forEach(o=>{l_(o,e)})})}function cq(n,e){if(Array.isArray(e))return l_(n,e);if(typeof e=="string")return l_(n,[e]);lT(n,e)}function uq(){const n=new Set,e={subscribe(t){return n.add(t),()=>void n.delete(t)},start(t,i){const s=[];return n.forEach(o=>{s.push(FD(o,t,{transitionOverride:i}))}),Promise.all(s)},set(t){return n.forEach(i=>{cq(i,t)})},stop(){n.forEach(t=>{lq(t)})},mount(){return()=>{e.stop()}}};return e}function hq(){const n=ig(uq);return Nb(n.mount,[]),n}const dq=hq,sk=({children:n,onDelete:e,threshold:t=-100})=>{const i=dq(),[s,o]=U.useState(!1),l=U.useRef(0),u=()=>{o(!0),l.current=Date.now()},d=async(f,g)=>{const v=g.offset.x,_=g.velocity.x;setTimeout(()=>o(!1),100),v<t||v<-50&&_<-500?e():i.start({x:0})};return b.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[b.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:b.jsx(oh,{className:"text-white w-6 h-6"})}),b.jsx(lg.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:u,onDragEnd:d,animate:i,className:"relative bg-white dark:bg-zinc-900 z-10 rounded-xl",style:{touchAction:"pan-y",pointerEvents:s?"none":"auto"},children:n})]})},_I=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),fq=()=>{const{id:n}=R4(),{envelopes:e,transactions:t,fetchData:i,isLoading:s,deleteEnvelope:o,renameEnvelope:l,updateTransaction:u,deleteTransaction:d,restoreTransaction:f,getEnvelopeBalance:g}=qn(),{showToast:v}=Ib(),_=Aa(),x=Sa(),[N,A]=U.useState(!1),[C,P]=U.useState(!1),[z,O]=U.useState(!1),[K,te]=U.useState(null);U.useEffect(()=>{e.length===0&&i()},[]);const J=e.find(k=>k.id===n);if(!J)return s?b.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:b.jsx("p",{children:"Loading envelope..."})}):b.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:b.jsx("p",{children:"Envelope not found."})});const S=t.filter(k=>k.envelopeId===J.id).sort((k,F)=>new Date(F.date).getTime()-new Date(k.date).getTime()),R=()=>{x.state?.fromGlobalFAB?_("/"):_(-1)},V=()=>{n&&(o(n),_(-1))},M=k=>{const F={...k,reconciled:!k.reconciled};u(F)};return b.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4",children:[b.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[b.jsx("button",{onClick:()=>{const k=prompt("Rename envelope:",J.name);k&&k.trim()&&n&&l(n,k)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),b.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:J.name}),b.jsx("button",{onClick:R,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),b.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[b.jsxs("div",{className:"flex justify-between items-center mb-2",children:[b.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const k=g(J.id).toNumber();return console.log(`Debug: Envelope ${J.name} Balance:`,k),b.jsx("span",{className:`text-xl font-bold ${k<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:_I(k)})})()]}),b.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-zinc-400",children:[b.jsx("span",{children:"Budget"}),b.jsx("span",{children:_I(J.currentBalance||0)})]})]}),b.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[b.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>A(!0),children:[b.jsx(jP,{className:"w-5 h-5 mr-3"}),"Add Money"]}),b.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>P(!0),children:[b.jsx(OP,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),b.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[b.jsx(CP,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),b.jsxs("section",{className:"mt-6",children:[b.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),b.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:S.length===0?b.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):b.jsx(Jb,{initial:!1,mode:"popLayout",children:S.map(k=>b.jsx(lg.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:b.jsx(sk,{onDelete:()=>{if(!k.id)return;const F={...k};d(k.id),v("Transaction deleted","neutral",()=>f(F))},children:b.jsx(AN,{transaction:k,onReconcile:()=>M(k),onEdit:()=>te(k)})})},k.id))})})]}),b.jsx("div",{className:"mt-8",children:b.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${J.name}"? This will delete all transactions.`)&&V()},children:[b.jsx(zI,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(N||C||K)&&b.jsx(SN,{isVisible:N||C||!!K,onClose:()=>{A(!1),P(!1),te(null)},mode:N?"add":C?"spend":"edit",currentEnvelope:J,initialTransaction:K}),z&&b.jsx(Iz,{isVisible:z,onClose:()=>O(!1),sourceEnvelope:J})]})},mq="1.1.0",pq={version:mq},gq=()=>{const n=Aa(),e=U.useRef(null),{envelopes:t,transactions:i,distributionTemplates:s,resetData:o,importData:l,getEnvelopeBalance:u,appSettings:d,updateAppSettings:f,initializeAppSettings:g,cleanupOrphanedTemplates:v}=qn(),{currentUser:_,deleteAccount:x}=wr(),[N,A]=U.useState(null),[C,P]=U.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[z,O]=U.useState(!1),[K,te]=U.useState(!1),[J,S]=U.useState(""),[R,V]=U.useState(!1),M=978307200,k=d?.theme??"system";U.useEffect(()=>{d||g().catch(L=>{console.error("Failed to initialize app settings:",L)})},[d,g]);const F=(L,ne)=>{A({type:L,text:ne}),setTimeout(()=>A(null),3500)},j=U.useMemo(()=>{const L=t.length,ne=i.length,he=s.length,pe=t.reduce((gt,Qe)=>gt+u(Qe.id).toNumber(),0),ve=0,Se=i.reduce((gt,Qe)=>{let Sn=0;if(typeof Qe.date=="string"){const Hn=Date.parse(Qe.date);Sn=Number.isNaN(Hn)?0:Hn}else typeof Qe.date=="number"&&(Sn=Qe.date<2e9?(Qe.date+M)*1e3:Qe.date);return Math.max(gt,Sn)},0),Ie=ve||Se?new Date(Math.max(ve,Se)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:L,transactionCount:ne,templateCount:he,totalBalance:pe,lastUpdated:Ie}},[t,i,s]),Le=()=>{try{const L={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:d||{theme:"system"},envelopes:t.map(Se=>({...Se,currentBalance:u(Se.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:s},ne=new Blob([JSON.stringify(L,null,2)],{type:"application/json"}),he=URL.createObjectURL(ne),pe=document.createElement("a");pe.href=he,pe.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(he);const ve=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",ve),P(ve),F("success","Backup downloaded successfully.")}catch(L){console.error(L),F("error","Failed to create backup file.")}},me=()=>{try{const L=["Date","Description","Amount","Type","Envelope","Reconciled"],ne=i.map(Ie=>{const gt=t.find(Hn=>Hn.id===Ie.envelopeId)?.name||"Unknown",Qe=(Ie.description||"").replace(/"/g,'""');let Sn="Invalid Date";if(Ie.date){if(typeof Ie.date=="string")Sn=Ie.date.split("T")[0];else if(typeof Ie.date=="number"){const Hn=Ie.date<2e9?(Ie.date+M)*1e3:Ie.date;Sn=new Date(Hn).toISOString().split("T")[0]}}return[Sn,`"${Qe}"`,Ie.amount.toFixed(2),Ie.type,`"${gt}"`,Ie.reconciled?"Yes":"No"].join(",")}),he=[L.join(","),...ne].join(`
`),pe=new Blob([he],{type:"text/csv;charset=utf-8;"}),ve=URL.createObjectURL(pe),Se=document.createElement("a");Se.href=ve,Se.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Se),Se.click(),document.body.removeChild(Se),URL.revokeObjectURL(ve),F("success","CSV export ready to open in Excel/Numbers.")}catch(L){console.error(L),F("error","Failed to export CSV.")}},H=()=>{e.current?.click()},oe=L=>{const ne=L.target.files?.[0];if(!ne)return;const he=new FileReader;he.onload=async pe=>{try{const ve=JSON.parse(pe.target?.result),Se=await l(ve);if(!Se.success){F("error",Se.message);return}if(ve.appSettings?.theme)try{await f({theme:ve.appSettings.theme})}catch(Ie){console.error("Failed to update imported settings:",Ie)}else if(ve.appSettings?.isDarkMode!==void 0)try{const Ie=ve.appSettings.isDarkMode?"dark":"light";await f({theme:Ie})}catch(Ie){console.error("Failed to update imported settings:",Ie)}F("success",`Loaded ${ve.envelopes?.length??0} envelopes, ${ve.transactions?.length??0} transactions, and ${ve.distributionTemplates?.length??0} templates.`)}catch(ve){console.error(ve),F("error","Invalid backup file. Please verify the JSON.")}},he.readAsText(ne),L.target.value=""},ge=async()=>{O(!0);try{F("success","Scanning templates for orphaned references..."),await v(),F("success","Orphaned templates have been cleaned up successfully.")}catch(L){console.error("Template cleanup failed:",L),F("error","Failed to clean up orphaned templates. Check console for details.")}finally{O(!1)}},xe=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),F("success","All data has been permanently deleted."),n("/")}catch(L){console.error("Reset failed:",L),F("error","Failed to delete all data. Some data may remain.")}},ce=async()=>{if(!J.trim()){F("error","Please enter your password to confirm account deletion.");return}te(!0);try{await o(),await x(J)?F("success","Your account has been permanently deleted."):F("error","Failed to delete account. Please try again.")}catch(L){console.error("Account deletion failed:",L),F("error","Failed to delete account. Please try again.")}finally{te(!1),V(!1),S("")}};return b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[b.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),b.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),b.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[N&&b.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${N.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[N.type==="success"?b.jsx(UI,{size:18}):b.jsx(oh,{size:18}),N.text]}),b.jsx("section",{children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Om,{className:"text-blue-500",size:22}),b.jsxs("div",{children:[b.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),b.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),b.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.envelopeCount})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),b.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.transactionCount})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),b.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.templateCount})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),b.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j.lastUpdated})]})]})]})}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[k==="light"&&b.jsx("span",{className:"text-orange-500 text-lg",children:""}),k==="dark"&&b.jsx("span",{className:"text-purple-500 text-lg",children:""}),k==="system"&&b.jsx("span",{className:"text-gray-500 text-lg",children:""}),b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),b.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:k})]}),b.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),b.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(L=>b.jsx("button",{onClick:async()=>{try{await f({theme:L.value})}catch(ne){console.error("Failed to update theme setting:",ne)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${k===L.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:L.label},L.value))})]})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[b.jsxs("button",{onClick:Le,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Om,{className:"text-blue-500",size:20}),b.jsxs("div",{className:"flex flex-col items-start",children:[b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),b.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",C]})]})]}),b.jsx(fo,{className:"text-gray-400",size:18})]}),b.jsxs("button",{onClick:H,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(EM,{className:"text-blue-500",size:20}),b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),b.jsx(fo,{className:"text-gray-400",size:18})]}),b.jsxs("button",{onClick:me,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(XP,{className:"text-blue-500",size:20}),b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),b.jsx(fo,{className:"text-gray-400",size:18})]}),b.jsxs("button",{onClick:ge,disabled:z,className:`w-full p-4 flex items-center justify-between transition-colors ${z?"bg-gray-50 dark:bg-zinc-800/50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[b.jsxs("div",{className:"flex items-center gap-3",children:[z?b.jsx(WE,{className:"text-blue-500 animate-spin",size:20}):b.jsx(Ah,{className:"text-blue-500",size:20}),b.jsx("span",{className:`font-medium ${z?"text-gray-500 dark:text-zinc-400":"text-gray-900 dark:text-white"}`,children:z?"Cleaning Templates...":"Clean Up Orphaned Templates"})]}),z?b.jsx("div",{className:"text-gray-400 text-sm",children:"Working..."}):b.jsx(fo,{className:"text-gray-400",size:18})]}),b.jsx("input",{type:"file",ref:e,onChange:oe,accept:".json",className:"hidden"})]})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[b.jsx("p",{children:"Create regular backups before major changes."}),b.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),b.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),b.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[b.jsxs("button",{onClick:xe,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group border-b border-gray-100 dark:border-zinc-800",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(oh,{className:"text-red-500 group-hover:text-red-600",size:20}),b.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),b.jsx(fo,{className:"text-gray-400",size:18})]}),b.jsxs("button",{onClick:()=>V(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(oh,{className:"text-red-600 group-hover:text-red-700",size:20}),b.jsx("span",{className:"text-red-600 group-hover:text-red-700 font-medium",children:"Delete Account"})]}),b.jsx(fo,{className:"text-gray-400",size:18})]})]}),b.jsxs("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500 space-y-1",children:[b.jsx("div",{children:"This clears every envelope, transaction, and template. Use with caution."}),b.jsx("div",{children:"Deleting your account permanently removes all data and cannot be undone."})]})]}),b.jsxs("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:["House Budget PWA  App Version ",pq.version]})]}),R&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full p-6 shadow-xl",children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:b.jsx(_M,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),b.jsx("button",{onClick:()=>V(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:b.jsx(td,{size:20})})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[b.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium mb-2",children:"This action cannot be undone"}),b.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Deleting your account will permanently remove all your data including envelopes, transactions, templates, and settings. This action is irreversible."})]}),b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Account Email: ",b.jsx("span",{className:"font-semibold",children:_?.email})]}),b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),b.jsx("input",{type:"password",value:J,onChange:L=>S(L.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",disabled:K})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("button",{onClick:()=>V(!1),disabled:K,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),b.jsx("button",{onClick:ce,disabled:K||!J.trim(),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center gap-2",children:K?b.jsxs(b.Fragment,{children:[b.jsx(WE,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Account"})]})]})]})})]})},yq=()=>{const n=Aa(),{createEnvelope:e}=qn(),[t,i]=U.useState(""),[s,o]=U.useState(""),l=u=>{if(u.preventDefault(),!t.trim())return;const d=parseFloat(s),f=isNaN(d)?0:d,g=qn.getState().envelopes,_=(g.length>0?Math.max(...g.map(x=>x.orderIndex??0)):-1)+1;e({name:t,currentBalance:f,lastUpdated:new Date().toISOString(),isActive:!0,orderIndex:_}),n("/")};return b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[b.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[b.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:b.jsx(Sh,{size:24})}),b.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Envelope"})]}),b.jsx("div",{className:"p-4 max-w-md mx-auto",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[b.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:b.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:b.jsx(ZP,{size:40})})}),b.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Envelope Name"}),b.jsx("input",{type:"text",id:"name",value:t,onChange:u=>i(u.target.value),placeholder:"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),b.jsxs("div",{className:"relative",children:[b.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),b.jsx("input",{type:"number",id:"balance",value:s,onChange:u=>o(u.target.value),onKeyDown:u=>{(u.key==="e"||u.key==="E"||u.key==="+"||u.key==="-")&&u.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),b.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later via the "Distribute Funds" screen.'})]}),b.jsxs("div",{className:"pt-4 flex gap-3",children:[b.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),b.jsx("button",{type:"submit",disabled:!t.trim(),className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${t.trim()?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:"Create Envelope"})]})]})]})})]})},vq=()=>{const n=Aa(),{envelopes:e,getEnvelopeBalance:t}=qn(),i=[...e].sort((s,o)=>{const l=s.orderIndex??0,u=o.orderIndex??0;return l!==u?l-u:s.name.localeCompare(o.name)});return b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[b.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[b.jsx("button",{onClick:()=>n(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),b.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),b.jsx("div",{className:"w-12"})," "]}),b.jsx("div",{className:"p-4 max-w-md mx-auto",children:b.jsx("section",{className:"mb-6",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[b.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:b.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:"SELECT ENVELOPE"})}),i.length===0?b.jsx("div",{className:"px-4 py-8 text-center text-gray-500 dark:text-zinc-400",children:b.jsx("p",{children:"No envelopes available"})}):b.jsx("div",{className:"divide-y divide-gray-200 dark:divide-zinc-700",children:i.map(s=>b.jsxs("button",{onClick:()=>n(`/envelope/${s.id}`,{state:{fromGlobalFAB:!0}}),className:"w-full px-4 py-4 text-left flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700 transition-colors",children:[b.jsxs("div",{className:"flex flex-col",children:[b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),b.jsxs("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["Balance: $",t(s.id).toNumber().toFixed(2)]})]}),b.jsx(fo,{size:20,className:"text-gray-400 dark:text-zinc-500"})]},s.id))})]})})})]})},_q=()=>{const n=Aa(),{transactions:e,envelopes:t,updateTransaction:i,deleteTransaction:s,restoreTransaction:o}=qn(),{showToast:l}=Ib(),[u,d]=U.useState(!1),[f,g]=U.useState(""),[v,_]=U.useState("all"),[x,N]=U.useState("All"),[A,C]=U.useState(!1),[P,z]=U.useState(()=>{const M=new Date;return M.setMonth(M.getMonth()-1),M.toISOString().split("T")[0]}),[O,K]=U.useState(()=>new Date().toISOString().split("T")[0]),[te,J]=U.useState(null),S=U.useMemo(()=>e.map(k=>{if(!k)return null;let F=k.date;if(typeof k.date=="number"){const Le=(k.date+978307200)*1e3;F=new Date(Le).toISOString()}else if(!k.date||typeof k.date!="string")return null;return{...k,date:F}}).filter(Boolean).filter(k=>{if(f){const j=f.toLowerCase(),Le=t.find(oe=>oe.id===k.envelopeId)?.name.toLowerCase()||"",me=k.amount.toFixed(2);if(!(k.description.toLowerCase().includes(j)||Le.includes(j)||me.includes(j)))return!1}if(v!=="all"&&k.envelopeId!==v||x!=="All"&&k.type!==x||!k.date||typeof k.date!="string")return!1;const F=k.date.split("T")[0];return!(F<P||F>O||A&&!k.reconciled)}).sort((k,F)=>new Date(F.date).getTime()-new Date(k.date).getTime()),[e,t,f,v,x,P,O,A]),R=te?t.find(M=>M.id===te.envelopeId):null,V=M=>{const k={...M,reconciled:!M.reconciled};i(k)};return b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[b.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:b.jsx(Sh,{size:24})}),b.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),b.jsx("button",{onClick:()=>d(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:b.jsx(eM,{size:20,className:u?"fill-current":""})})]}),b.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:b.jsxs("div",{className:"p-4 space-y-4",children:[b.jsxs("div",{className:"relative",children:[b.jsx(fM,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),b.jsx("input",{type:"text",placeholder:"Search transactions...",value:f,onChange:M=>g(M.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),f&&b.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:b.jsx(td,{size:16})})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),b.jsxs("select",{value:v,onChange:M=>_(M.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[b.jsx("option",{value:"all",children:"All Envelopes"}),t.sort((M,k)=>M.name.localeCompare(k.name)).map(M=>b.jsx("option",{value:M.id,children:M.name},M.id))]})]}),b.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(M=>b.jsx("button",{onClick:()=>N(M),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${x===M?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:M},M))}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-1",children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),b.jsx("div",{className:"relative",children:b.jsx("input",{type:"date",value:P,onChange:M=>z(M.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),b.jsx("div",{className:"relative",children:b.jsx("input",{type:"date",value:O,onChange:M=>K(M.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),b.jsxs("div",{className:"flex items-center justify-between pt-2",children:[b.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),b.jsx("button",{onClick:()=>C(!A),className:`w-11 h-6 rounded-full transition-colors relative ${A?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:b.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${A?"translate-x-5":"translate-x-0"}`})})]})]})}),b.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:b.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:S.length===0?b.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):b.jsx(Jb,{initial:!1,mode:"popLayout",children:S.map(M=>{const k=t.find(F=>F.id===M.envelopeId);return b.jsx(lg.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:b.jsx(sk,{onDelete:()=>{if(!M.id)return;const F={...M};s(M.id),l("Transaction deleted","neutral",()=>o(F))},children:b.jsx(AN,{transaction:M,envelopeName:k?.name||"Unknown Envelope",onReconcile:()=>V(M),onEdit:()=>{k?J(M):alert("Cannot edit: Envelope deleted.")}})})},M.id)})})})}),te&&R&&b.jsx(SN,{isVisible:!!te,onClose:()=>J(null),mode:"edit",currentEnvelope:R,initialTransaction:te})]})},ak=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],bq=n=>{if(!n)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const i=ak.map(u=>({...u,met:u.regex.test(n)})).filter(u=>u.met).length;let s,o,l;return i<=1?(s="weak",o="text-red-500",l="Weak"):i<=3?(s="medium",o="text-yellow-500",l="Medium"):i===4?(s="strong",o="text-blue-500",l="Strong"):(s="very-strong",o="text-green-500",l="Very Strong"),{score:i,level:s,color:o,label:l}},uT=n=>{const e=ak.map(s=>({...s,met:s.regex.test(n)})),t=bq(n),i=e.every(s=>s.met);return{requirements:e,strength:t,isValid:i,isEmpty:!n.trim()}},Tq=({password:n,className:e=""})=>{const{strength:t,isEmpty:i}=uT(n);return i?null:b.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[b.jsx("div",{className:"flex-1",children:b.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(s=>b.jsx("div",{className:`h-1 flex-1 rounded-full ${s<=t.score?t.score<=1?"bg-red-500":t.score<=3?"bg-yellow-500":t.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},s))})}),b.jsx("span",{className:`text-sm font-medium ${t.color}`,children:t.label})]})},wq=({password:n,className:e=""})=>{const{requirements:t,isEmpty:i}=uT(n);return i?null:b.jsx("div",{className:`space-y-1 ${e}`,children:t.map(s=>b.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.met?b.jsx(DP,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):b.jsx(td,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),b.jsx("span",{className:s.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:s.label})]},s.id))})},Eq=()=>{const[n,e]=U.useState(""),[t,i]=U.useState(""),[s,o]=U.useState(""),[l,u]=U.useState(!1),[d,f]=U.useState(!1),[g,v]=U.useState(!1),[_,x]=U.useState(!1),{login:N,register:A,sendPasswordReset:C,isLoading:P,loginError:z,clearError:O}=wr(),K=uT(t),te=async S=>{if(S.preventDefault(),O(),n.trim()&&t.trim())if(d){if(!s.trim()||!K.isValid)return;await A(n.trim(),t,s.trim())}else await N(n.trim(),t)},J=async S=>{S.preventDefault(),n.trim()&&await C(n.trim())&&x(!0)};return U.useEffect(()=>{e(""),i(""),o(""),x(!1)},[d,g]),b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:b.jsxs("div",{className:"max-w-md w-full space-y-8",children:[b.jsx("div",{className:"text-center",children:b.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:"/house-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),b.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for your household"})]})}),b.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:g?b.jsxs("form",{onSubmit:J,className:"space-y-6",children:[b.jsxs("div",{className:"text-center mb-2",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(J0,{className:"h-5 w-5 text-gray-400"})}),b.jsx("input",{id:"reset-email",type:"email",value:n,onChange:S=>e(S.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:P,autoComplete:"email"})]})]}),_?b.jsxs("div",{className:"text-center py-4",children:[b.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:b.jsx(J0,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),b.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),b.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",b.jsx("span",{className:"font-medium",children:n})]}),b.jsxs("button",{type:"button",onClick:()=>v(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(Sh,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):b.jsxs(b.Fragment,{children:[b.jsx("button",{type:"submit",disabled:P||!n.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:P?"Sending...":"Send Reset Link"}),b.jsx("div",{className:"mt-4 text-center",children:b.jsxs("button",{type:"button",onClick:()=>v(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:P,children:[b.jsx(Sh,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):b.jsxs("form",{onSubmit:te,className:"space-y-6",children:[b.jsxs("div",{className:"text-center mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d?"Create Account":"Sign In"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:d?"Create a new account to get started":"Sign in to your account"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),b.jsx("input",{id:"email",type:"email",value:n,onChange:S=>e(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:P,autoComplete:"username"})]}),d&&b.jsxs("div",{children:[b.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),b.jsx("input",{id:"displayName",type:"text",value:s,onChange:S=>o(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:P})]}),b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!d&&b.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:P,children:"Forgot password?"})]}),b.jsxs("div",{className:"relative",children:[b.jsx("input",{id:"password",type:l?"text":"password",value:t,onChange:S=>i(S.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${d&&t&&!K.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:P,autoComplete:d?"new-password":"current-password"}),b.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:P,children:l?b.jsx($P,{className:"h-5 w-5"}):b.jsx(YP,{className:"h-5 w-5"})})]}),d&&t&&b.jsx("div",{className:"mt-2",children:b.jsx(Tq,{password:t})}),d&&t&&b.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:b.jsx(wq,{password:t})})]}),z&&b.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[z,z.includes("verify your email")&&b.jsx("div",{className:"mt-3",children:b.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),b.jsx("button",{type:"submit",disabled:P||!n.trim()||!t.trim()||d&&!s.trim()||d&&!K.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:P?d?"Creating Account...":"Signing in...":d?"Create Account":"Sign In"}),b.jsx("div",{className:"mt-6 text-center",children:b.jsxs("button",{type:"button",onClick:()=>{f(!d),v(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:P,children:[b.jsx(SM,{className:"h-4 w-4"}),d?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},bI=()=>{const[n,e]=U.useState(!1),[t,i]=U.useState(!1),{currentUser:s,resendEmailVerification:o,logout:l,loginError:u}=wr();U.useEffect(()=>{s||console.warn("EmailVerificationView: No current user, this should not happen")},[s]);const d=async()=>{e(!0),i(!1);const g=await o();e(!1),g&&(i(!0),setTimeout(()=>i(!1),3e3))},f=async()=>{await l()};return s?b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:b.jsxs("div",{className:"max-w-md w-full space-y-8",children:[b.jsx("div",{className:"text-center",children:b.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:"/house-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),b.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),b.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:b.jsx(J0,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.email})]}),b.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:b.jsxs("div",{className:"flex items-start gap-3",children:[b.jsx(UI,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),b.jsxs("div",{className:"text-left",children:[b.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),b.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[b.jsx("li",{children:"1. Open your email inbox"}),b.jsx("li",{children:"2. Find the email from House Budget"}),b.jsx("li",{children:'3. Click the "Verify Email" link'}),b.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),u&&b.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:u}),t&&b.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),b.jsx("button",{onClick:d,disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:n?b.jsxs(b.Fragment,{children:[b.jsx(Ah,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):b.jsxs(b.Fragment,{children:[b.jsx(Ah,{className:"h-4 w-4"}),"Resend verification email"]})}),b.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[b.jsx(Sh,{className:"h-4 w-4"}),"Back to sign in"]})]})}),b.jsx("div",{className:"text-center",children:b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},xq=()=>{const{message:n,type:e,isVisible:t,undoAction:i,hideToast:s}=Ib(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return b.jsx(Jb,{children:t&&b.jsx(lg.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:b.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[b.jsx("div",{className:"flex items-center flex-1 min-w-0",children:b.jsx("span",{className:"text-sm font-medium truncate pr-2",children:n})}),b.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&b.jsxs("button",{onClick:()=>{i(),s()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[b.jsx(TM,{size:14,className:"inline mr-1"}),"Undo"]}),b.jsx("button",{onClick:s,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:b.jsx(td,{size:16})})]})]})})})};function Sq(){const[n,e]=U.useState(!0),{appSettings:t}=qn(),{isAuthenticated:i,isInitialized:s,initializeAuth:o,lastAuthTime:l,offlineGracePeriod:u,currentUser:d}=wr();if(U.useEffect(()=>{const v=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(v)},[]),U.useEffect(()=>o(),[o]),U.useEffect(()=>{const v=document.documentElement,_=window.matchMedia("(prefers-color-scheme: dark)"),x=()=>{const N=t?.theme??"system",A=_.matches;N==="dark"||N==="system"&&A?v.classList.add("dark"):v.classList.remove("dark")};if(x(),t?.theme==="system")return _.addEventListener("change",x),()=>_.removeEventListener("change",x)},[t]),n||!s)return b.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-blue-600 text-white dark:bg-black",children:b.jsx("div",{className:"text-3xl font-bold animate-pulse",children:"House Budget"})});if(!i)return d?b.jsx(bI,{}):b.jsx(Eq,{});const g=typeof navigator<"u"&&!navigator.onLine&&i&&l&&Date.now()-l<u;return b.jsxs(b.Fragment,{children:[g&&b.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:b.jsxs("div",{className:"flex",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),b.jsx("div",{className:"ml-3",children:b.jsxs("p",{className:"text-sm",children:[b.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((u-(Date.now()-l))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),b.jsx(dP,{children:b.jsxs(q4,{children:[b.jsx(ea,{path:"/",element:b.jsx(Az,{})}),b.jsx(ea,{path:"/envelope/:id",element:b.jsx(fq,{})}),b.jsx(ea,{path:"/add-envelope",element:b.jsx(yq,{})}),b.jsx(ea,{path:"/add-transaction",element:b.jsx(vq,{})}),b.jsx(ea,{path:"/transactions",element:b.jsx(_q,{})}),b.jsx(ea,{path:"/settings",element:b.jsx(gq,{})}),b.jsx(ea,{path:"/verify-email",element:b.jsx(bI,{})})]})}),b.jsx(xq,{})]})}WV({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});KV.createRoot(document.getElementById("root")).render(b.jsx(U.StrictMode,{children:b.jsx(Sq,{})}));
