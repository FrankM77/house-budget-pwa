(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function NV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var o0={exports:{}},Hu={};var kw;function DV(){if(kw)return Hu;kw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:o}}return Hu.Fragment=e,Hu.jsx=t,Hu.jsxs=t,Hu}var Vw;function kV(){return Vw||(Vw=1,o0.exports=DV()),o0.exports}var E=kV(),l0={exports:{}},Pe={};var Mw;function VV(){if(Mw)return Pe;Mw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function S(F){return F===null||typeof F!="object"?null:(F=_&&F[_]||F["@@iterator"],typeof F=="function"?F:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function L(F,se,pe){this.props=F,this.context=se,this.refs=D,this.updater=pe||N}L.prototype.isReactComponent={},L.prototype.setState=function(F,se){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,se,"setState")},L.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function B(){}B.prototype=L.prototype;function O(F,se,pe){this.props=F,this.context=se,this.refs=D,this.updater=pe||N}var Y=O.prototype=new B;Y.constructor=O,R(Y,L.prototype),Y.isPureReactComponent=!0;var te=Array.isArray;function Z(){}var x={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function V(F,se,pe){var ge=pe.ref;return{$$typeof:n,type:F,key:se,ref:ge!==void 0?ge:null,props:pe}}function M(F,se){return V(F.type,se,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function z(F){var se={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(pe){return se[pe]})}var P=/\/+/g;function Ne(F,se){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):se.toString(36)}function de(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Z,Z):(F.status="pending",F.then(function(se){F.status==="pending"&&(F.status="fulfilled",F.value=se)},function(se){F.status==="pending"&&(F.status="rejected",F.reason=se)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function H(F,se,pe,ge,ke){var je=typeof F;(je==="undefined"||je==="boolean")&&(F=null);var Ye=!1;if(F===null)Ye=!0;else switch(je){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(F.$$typeof){case n:case e:Ye=!0;break;case p:return Ye=F._init,H(Ye(F._payload),se,pe,ge,ke)}}if(Ye)return ke=ke(F),Ye=ge===""?"."+Ne(F,0):ge,te(ke)?(pe="",Ye!=null&&(pe=Ye.replace(P,"$&/")+"/"),H(ke,se,pe,"",function(Da){return Da})):ke!=null&&(k(ke)&&(ke=M(ke,pe+(ke.key==null||F&&F.key===ke.key?"":(""+ke.key).replace(P,"$&/")+"/")+Ye)),se.push(ke)),1;Ye=0;var Zt=ge===""?".":ge+":";if(te(F))for(var vt=0;vt<F.length;vt++)ge=F[vt],je=Zt+Ne(ge,vt),Ye+=H(ge,se,pe,je,ke);else if(vt=S(F),typeof vt=="function")for(F=vt.call(F),vt=0;!(ge=F.next()).done;)ge=ge.value,je=Zt+Ne(ge,vt++),Ye+=H(ge,se,pe,je,ke);else if(je==="object"){if(typeof F.then=="function")return H(de(F),se,pe,ge,ke);throw se=String(F),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function re(F,se,pe){if(F==null)return F;var ge=[],ke=0;return H(F,ge,"","",function(je){return se.call(pe,je,ke++)}),ge}function ue(F){if(F._status===-1){var se=F._result;se=se(),se.then(function(pe){(F._status===0||F._status===-1)&&(F._status=1,F._result=pe)},function(pe){(F._status===0||F._status===-1)&&(F._status=2,F._result=pe)}),F._status===-1&&(F._status=0,F._result=se)}if(F._status===1)return F._result.default;throw F._result}var xe=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},De={map:re,forEach:function(F,se,pe){re(F,function(){se.apply(this,arguments)},pe)},count:function(F){var se=0;return re(F,function(){se++}),se},toArray:function(F){return re(F,function(se){return se})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Pe.Activity=v,Pe.Children=De,Pe.Component=L,Pe.Fragment=t,Pe.Profiler=s,Pe.PureComponent=O,Pe.StrictMode=i,Pe.Suspense=d,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(F){return x.H.useMemoCache(F)}},Pe.cache=function(F){return function(){return F.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(F,se,pe){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ge=R({},F.props),ke=F.key;if(se!=null)for(je in se.key!==void 0&&(ke=""+se.key),se)!I.call(se,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&se.ref===void 0||(ge[je]=se[je]);var je=arguments.length-2;if(je===1)ge.children=pe;else if(1<je){for(var Ye=Array(je),Zt=0;Zt<je;Zt++)Ye[Zt]=arguments[Zt+2];ge.children=Ye}return V(F.type,ke,ge)},Pe.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},Pe.createElement=function(F,se,pe){var ge,ke={},je=null;if(se!=null)for(ge in se.key!==void 0&&(je=""+se.key),se)I.call(se,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(ke[ge]=se[ge]);var Ye=arguments.length-2;if(Ye===1)ke.children=pe;else if(1<Ye){for(var Zt=Array(Ye),vt=0;vt<Ye;vt++)Zt[vt]=arguments[vt+2];ke.children=Zt}if(F&&F.defaultProps)for(ge in Ye=F.defaultProps,Ye)ke[ge]===void 0&&(ke[ge]=Ye[ge]);return V(F,je,ke)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(F){return{$$typeof:u,render:F}},Pe.isValidElement=k,Pe.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:ue}},Pe.memo=function(F,se){return{$$typeof:f,type:F,compare:se===void 0?null:se}},Pe.startTransition=function(F){var se=x.T,pe={};x.T=pe;try{var ge=F(),ke=x.S;ke!==null&&ke(pe,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(Z,xe)}catch(je){xe(je)}finally{se!==null&&pe.types!==null&&(se.types=pe.types),x.T=se}},Pe.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Pe.use=function(F){return x.H.use(F)},Pe.useActionState=function(F,se,pe){return x.H.useActionState(F,se,pe)},Pe.useCallback=function(F,se){return x.H.useCallback(F,se)},Pe.useContext=function(F){return x.H.useContext(F)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(F,se){return x.H.useDeferredValue(F,se)},Pe.useEffect=function(F,se){return x.H.useEffect(F,se)},Pe.useEffectEvent=function(F){return x.H.useEffectEvent(F)},Pe.useId=function(){return x.H.useId()},Pe.useImperativeHandle=function(F,se,pe){return x.H.useImperativeHandle(F,se,pe)},Pe.useInsertionEffect=function(F,se){return x.H.useInsertionEffect(F,se)},Pe.useLayoutEffect=function(F,se){return x.H.useLayoutEffect(F,se)},Pe.useMemo=function(F,se){return x.H.useMemo(F,se)},Pe.useOptimistic=function(F,se){return x.H.useOptimistic(F,se)},Pe.useReducer=function(F,se,pe){return x.H.useReducer(F,se,pe)},Pe.useRef=function(F){return x.H.useRef(F)},Pe.useState=function(F){return x.H.useState(F)},Pe.useSyncExternalStore=function(F,se,pe){return x.H.useSyncExternalStore(F,se,pe)},Pe.useTransition=function(){return x.H.useTransition()},Pe.version="19.2.0",Pe}var Pw;function u_(){return Pw||(Pw=1,l0.exports=VV()),l0.exports}var j=u_();const Qf=NV(j);var c0={exports:{}},Gu={},u0={exports:{}},h0={};var Ow;function MV(){return Ow||(Ow=1,(function(n){function e(H,re){var ue=H.length;H.push(re);e:for(;0<ue;){var xe=ue-1>>>1,De=H[xe];if(0<s(De,re))H[xe]=re,H[ue]=De,ue=xe;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var re=H[0],ue=H.pop();if(ue!==re){H[0]=ue;e:for(var xe=0,De=H.length,F=De>>>1;xe<F;){var se=2*(xe+1)-1,pe=H[se],ge=se+1,ke=H[ge];if(0>s(pe,ue))ge<De&&0>s(ke,pe)?(H[xe]=ke,H[ge]=ue,xe=ge):(H[xe]=pe,H[se]=ue,xe=se);else if(ge<De&&0>s(ke,ue))H[xe]=ke,H[ge]=ue,xe=ge;else break e}}return re}function s(H,re){var ue=H.sortIndex-re.sortIndex;return ue!==0?ue:H.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,v=null,_=3,S=!1,N=!1,R=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function Y(H){for(var re=t(f);re!==null;){if(re.callback===null)i(f);else if(re.startTime<=H)i(f),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(f)}}function te(H){if(R=!1,Y(H),!N)if(t(d)!==null)N=!0,Z||(Z=!0,z());else{var re=t(f);re!==null&&de(te,re.startTime-H)}}var Z=!1,x=-1,I=5,V=-1;function M(){return D?!0:!(n.unstable_now()-V<I)}function k(){if(D=!1,Z){var H=n.unstable_now();V=H;var re=!0;try{e:{N=!1,R&&(R=!1,B(x),x=-1),S=!0;var ue=_;try{t:{for(Y(H),v=t(d);v!==null&&!(v.expirationTime>H&&M());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,_=v.priorityLevel;var De=xe(v.expirationTime<=H);if(H=n.unstable_now(),typeof De=="function"){v.callback=De,Y(H),re=!0;break t}v===t(d)&&i(d),Y(H)}else i(d);v=t(d)}if(v!==null)re=!0;else{var F=t(f);F!==null&&de(te,F.startTime-H),re=!1}}break e}finally{v=null,_=ue,S=!1}re=void 0}}finally{re?z():Z=!1}}}var z;if(typeof O=="function")z=function(){O(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ne=P.port2;P.port1.onmessage=k,z=function(){Ne.postMessage(null)}}else z=function(){L(k,0)};function de(H,re){x=L(function(){H(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(H){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var ue=_;_=re;try{return H()}finally{_=ue}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=_;_=H;try{return re()}finally{_=ue}},n.unstable_scheduleCallback=function(H,re,ue){var xe=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?xe+ue:xe):ue=xe,H){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ue+De,H={id:p++,callback:re,priorityLevel:H,startTime:ue,expirationTime:De,sortIndex:-1},ue>xe?(H.sortIndex=ue,e(f,H),t(d)===null&&H===t(f)&&(R?(B(x),x=-1):R=!0,de(te,ue-xe))):(H.sortIndex=De,e(d,H),N||S||(N=!0,Z||(Z=!0,z()))),H},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(H){var re=_;return function(){var ue=_;_=re;try{return H.apply(this,arguments)}finally{_=ue}}}})(h0)),h0}var Lw;function PV(){return Lw||(Lw=1,u0.exports=MV()),u0.exports}var d0={exports:{}},vn={};var jw;function OV(){if(jw)return vn;jw=1;var n=u_();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:f,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,vn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,p)},vn.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},vn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},vn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},vn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,v=u(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:S}):p==="script"&&i.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},vn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},vn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=u(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},vn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},vn.requestFormReset=function(d){i.d.r(d)},vn.unstable_batchedUpdates=function(d,f){return d(f)},vn.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},vn.useFormStatus=function(){return l.H.useHostTransitionStatus()},vn.version="19.2.0",vn}var Uw;function LV(){if(Uw)return d0.exports;Uw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),d0.exports=OV(),d0.exports}var zw;function jV(){if(zw)return Gu;zw=1;var n=PV(),e=u_(),t=LV();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function u(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var c=r,h=a;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){c=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return d(g),r;if(y===h)return d(g),a;y=y.sibling}throw Error(i(188))}if(c.return!==h.return)c=g,h=y;else{for(var T=!1,A=g.child;A;){if(A===c){T=!0,c=g,h=y;break}if(A===h){T=!0,h=g,c=y;break}A=A.sibling}if(!T){for(A=y.child;A;){if(A===c){T=!0,c=y,h=g;break}if(A===h){T=!0,h=y,c=g;break}A=A.sibling}if(!T)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:a}function p(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=p(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),O=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=k&&r[k]||r["@@iterator"],typeof r=="function"?r:null)}var P=Symbol.for("react.client.reference");function Ne(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===P?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case L:return"Profiler";case D:return"StrictMode";case te:return"Suspense";case Z:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case O:return r.displayName||"Context";case B:return(r._context.displayName||"Context")+".Consumer";case Y:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x:return a=r.displayName||null,a!==null?a:Ne(r.type)||"Memo";case I:a=r._payload,r=r._init;try{return Ne(r(a))}catch{}}return null}var de=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},xe=[],De=-1;function F(r){return{current:r}}function se(r){0>De||(r.current=xe[De],xe[De]=null,De--)}function pe(r,a){De++,xe[De]=r.current,r.current=a}var ge=F(null),ke=F(null),je=F(null),Ye=F(null);function Zt(r,a){switch(pe(je,a),pe(ke,r),pe(ge,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?tw(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=tw(a),r=nw(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}se(ge),pe(ge,r)}function vt(){se(ge),se(ke),se(je)}function Da(r){r.memoizedState!==null&&pe(Ye,r);var a=ge.current,c=nw(a,r.type);a!==c&&(pe(ke,r),pe(ge,c))}function Ho(r){ke.current===r&&(se(ge),se(ke)),Ye.current===r&&(se(Ye),zu._currentValue=ue)}var Go,$o;function Hi(r){if(Go===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Go=a&&a[1]||"",$o=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Go+r+$o}var zc=!1;function ka(r,a){if(!r||zc)return"";zc=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ee){var W=ee}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(ee){W=ee}r.call(oe.prototype)}}else{try{throw Error()}catch(ee){W=ee}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ee){if(ee&&W&&typeof ee.stack=="string")return[ee.stack,W.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),T=y[0],A=y[1];if(T&&A){var U=T.split(`
`),X=A.split(`
`);for(g=h=0;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;for(;g<X.length&&!X[g].includes("DetermineComponentFrameRoot");)g++;if(h===U.length||g===X.length)for(h=U.length-1,g=X.length-1;1<=h&&0<=g&&U[h]!==X[g];)g--;for(;1<=h&&0<=g;h--,g--)if(U[h]!==X[g]){if(h!==1||g!==1)do if(h--,g--,0>g||U[h]!==X[g]){var ne=`
`+U[h].replace(" at new "," at ");return r.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",r.displayName)),ne}while(1<=h&&0<=g);break}}}finally{zc=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Hi(c):""}function Bc(r,a){switch(r.tag){case 26:case 27:case 5:return Hi(r.type);case 16:return Hi("Lazy");case 13:return r.child!==a&&a!==null?Hi("Suspense Fallback"):Hi("Suspense");case 19:return Hi("SuspenseList");case 0:case 15:return ka(r.type,!1);case 11:return ka(r.type.render,!1);case 1:return ka(r.type,!0);case 31:return Hi("Activity");default:return""}}function Fc(r){try{var a="",c=null;do a+=Bc(r,c),c=r,r=r.return;while(r);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ut=Object.prototype.hasOwnProperty,Jt=n.unstable_scheduleCallback,ps=n.unstable_cancelCallback,cg=n.unstable_shouldYield,_d=n.unstable_requestPaint,In=n.unstable_now,Va=n.unstable_getCurrentPriorityLevel,qc=n.unstable_ImmediatePriority,Hc=n.unstable_UserBlockingPriority,gs=n.unstable_NormalPriority,ug=n.unstable_LowPriority,bd=n.unstable_IdlePriority,Td=n.log,Ed=n.unstable_setDisableYieldValue,Ai=null,cn=null;function ri(r){if(typeof Td=="function"&&Ed(r),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(Ai,r)}catch{}}var Nt=Math.clz32?Math.clz32:Sd,wd=Math.log,Ko=Math.LN2;function Sd(r){return r>>>=0,r===0?32:31-(wd(r)/Ko|0)|0}var Gi=256,Ma=262144,zt=4194304;function $i(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ki(r,a,c){var h=r.pendingLanes;if(h===0)return 0;var g=0,y=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var A=h&134217727;return A!==0?(h=A&~y,h!==0?g=$i(h):(T&=A,T!==0?g=$i(T):c||(c=A&~r,c!==0&&(g=$i(c))))):(A=h&~y,A!==0?g=$i(A):T!==0?g=$i(T):c||(c=h&~r,c!==0&&(g=$i(c)))),g===0?0:a!==0&&a!==g&&(a&y)===0&&(y=g&-g,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:g}function Ii(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function hg(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xd(){var r=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),r}function Yi(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function Pa(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function dg(r,a,c,h,g,y){var T=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var A=r.entanglements,U=r.expirationTimes,X=r.hiddenUpdates;for(c=T&~c;0<c;){var ne=31-Nt(c),oe=1<<ne;A[ne]=0,U[ne]=-1;var W=X[ne];if(W!==null)for(X[ne]=null,ne=0;ne<W.length;ne++){var ee=W[ne];ee!==null&&(ee.lane&=-536870913)}c&=~oe}h!==0&&Oa(r,h,0),y!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=y&~(T&~a))}function Oa(r,a,c){r.pendingLanes|=a,r.suspendedLanes&=~a;var h=31-Nt(a);r.entangledLanes|=a,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function Gc(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var h=31-Nt(c),g=1<<h;g&a|r[h]&a&&(r[h]|=a),c&=~g}}function $c(r,a){var c=a&-a;return c=(c&42)!==0?1:La(c),(c&(r.suspendedLanes|a))!==0?0:c}function La(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Cr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ad(){var r=re.p;return r!==0?r:(r=window.event,r===void 0?32:xw(r.type))}function Ri(r,a){var c=re.p;try{return re.p=r,a()}finally{re.p=c}}var Ci=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Ci,sn="__reactProps$"+Ci,Qi="__reactContainer$"+Ci,Yo="__reactEvents$"+Ci,fg="__reactListeners$"+Ci,Id="__reactHandles$"+Ci,Rd="__reactResources$"+Ci,Xi="__reactMarker$"+Ci;function Qo(r){delete r[Bt],delete r[sn],delete r[Yo],delete r[fg],delete r[Id]}function Wi(r){var a=r[Bt];if(a)return a;for(var c=r.parentNode;c;){if(a=c[Qi]||c[Bt]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=cw(r);r!==null;){if(c=r[Bt])return c;r=cw(r)}return a}r=c,c=r.parentNode}return null}function si(r){if(r=r[Bt]||r[Qi]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Gn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Zi(r){var a=r[Rd];return a||(a=r[Rd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ft(r){r[Xi]=!0}var Kc=new Set,Yc={};function Ji(r,a){er(r,a),er(r+"Capture",a)}function er(r,a){for(Yc[r]=a,r=0;r<a.length;r++)Kc.add(a[r])}var Qc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xc={},Wc={};function Cd(r){return Ut.call(Wc,r)?!0:Ut.call(Xc,r)?!1:Qc.test(r)?Wc[r]=!0:(Xc[r]=!0,!1)}function Xo(r,a,c){if(Cd(a))if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+c)}}function $n(r,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+c)}}function qt(r,a,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(a,c,""+h)}}function an(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ys(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Zc(r,a,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,y=h.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){c=""+T,y.call(this,T)}}),Object.defineProperty(r,a,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function rt(r){if(!r._valueTracker){var a=ys(r)?"checked":"value";r._valueTracker=Zc(r,a,""+r[a])}}function ja(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),h="";return r&&(h=ys(r)?r.checked?"true":"false":r.value),r=h,r!==c?(a.setValue(r),!0):!1}function tr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ua=/[\n"\\]/g;function Mn(r){return r.replace(Ua,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Wo(r,a,c,h,g,y,T,A){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),a!=null?T==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+an(a)):r.value!==""+an(a)&&(r.value=""+an(a)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),a!=null?Jc(r,T,an(a)):c!=null?Jc(r,T,an(c)):h!=null&&r.removeAttribute("value"),g==null&&y!=null&&(r.defaultChecked=!!y),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+an(A):r.removeAttribute("name")}function Nd(r,a,c,h,g,y,T,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){rt(r);return}c=c!=null?""+an(c):"",a=a!=null?""+an(a):c,A||a===r.value||(r.value=a),r.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=A?r.checked:!!h,r.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),rt(r)}function Jc(r,a,c){a==="number"&&tr(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function vs(r,a,c,h){if(r=r.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<r.length;c++)g=a.hasOwnProperty("$"+r[c].value),r[c].selected!==g&&(r[c].selected=g),g&&h&&(r[c].defaultSelected=!0)}else{for(c=""+an(c),a=null,g=0;g<r.length;g++){if(r[g].value===c){r[g].selected=!0,h&&(r[g].defaultSelected=!0);return}a!==null||r[g].disabled||(a=r[g])}a!==null&&(a.selected=!0)}}function Dd(r,a,c){if(a!=null&&(a=""+an(a),a!==r.value&&(r.value=a),c==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=c!=null?""+an(c):""}function _s(r,a,c,h){if(a==null){if(h!=null){if(c!=null)throw Error(i(92));if(de(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),a=c}c=an(a),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),rt(r)}function Pn(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var kd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eu(r,a,c){var h=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":h?r.setProperty(a,c):typeof c!="number"||c===0||kd.has(a)?a==="float"?r.cssFloat=c:r[a]=(""+c).trim():r[a]=c+"px"}function tu(r,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&c[g]!==h&&eu(r,g,h)}else for(var y in a)a.hasOwnProperty(y)&&eu(r,y,a[y])}function Zo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(r){return bs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ni(){}var nu=null;function ai(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ts=null,nr=null;function za(r){var a=si(r);if(a&&(r=a.stateNode)){var c=r[sn]||null;e:switch(r=a.stateNode,a.type){case"input":if(Wo(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Mn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var h=c[a];if(h!==r&&h.form===r.form){var g=h[sn]||null;if(!g)throw Error(i(90));Wo(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)h=c[a],h.form===r.form&&ja(h)}break e;case"textarea":Dd(r,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&vs(r,!!c.multiple,a,!1)}}}var el=!1;function Es(r,a,c){if(el)return r(a,c);el=!0;try{var h=r(a);return h}finally{if(el=!1,(Ts!==null||nr!==null)&&(If(),Ts&&(a=Ts,r=nr,nr=Ts=null,za(a),r)))for(a=0;a<r.length;a++)za(r[a])}}function Di(r,a){var c=r.stateNode;if(c===null)return null;var h=c[sn]||null;if(h===null)return null;c=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=!1;if(oi)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{Ba=!1}var ir=null,iu=null,Fa=null;function ru(){if(Fa)return Fa;var r,a=iu,c=a.length,h,g="value"in ir?ir.value:ir.textContent,y=g.length;for(r=0;r<c&&a[r]===g[r];r++);var T=c-r;for(h=1;h<=T&&a[c-h]===g[y-h];h++);return Fa=g.slice(r,1<h?1-h:void 0)}function qa(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Nr(){return!0}function ki(){return!1}function un(r){function a(c,h,g,y,T){this._reactName=c,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(c=r[A],this[A]=c?c(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Nr:ki,this.isPropagationStopped=ki,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),a}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rr=un(Dr),ws=v({},Dr,{view:0,detail:0}),su=un(ws),Ss,tl,sr,nl=v({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==sr&&(sr&&r.type==="mousemove"?(Ss=r.screenX-sr.screenX,tl=r.screenY-sr.screenY):tl=Ss=0,sr=r),Ss)},movementY:function(r){return"movementY"in r?r.movementY:tl}}),au=un(nl),Ha=v({},nl,{dataTransfer:0}),Md=un(Ha),Pd=v({},ws,{relatedTarget:0}),Ga=un(Pd),ou=v({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Od=un(ou),il=v({},Dr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ld=un(il),jd=v({},Dr,{data:0}),ar=un(jd),Ud={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fd(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Bd[r])?!!a[r]:!1}function xs(){return Fd}var Rn=v({},ws,{key:function(r){if(r.key){var a=Ud[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=qa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?zd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(r){return r.type==="keypress"?qa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),qd=un(Rn),Hd=v({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kr=un(Hd),m=v({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs}),b=un(m),w=v({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=un(w),K=v({},nl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),J=un(K),fe=v({},Dr,{newState:0,oldState:0}),Oe=un(fe),Dt=[9,13,27,32],tt=oi&&"CompositionEvent"in window,_t=null;oi&&"documentMode"in document&&(_t=document.documentMode);var li=oi&&"TextEvent"in window&&!_t,or=oi&&(!tt||_t&&8<_t&&11>=_t),Vi=" ",Mi=!1;function $a(r,a){switch(r){case"keyup":return Dt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var sl=!1;function ek(r,a){switch(r){case"compositionend":return rl(a);case"keypress":return a.which!==32?null:(Mi=!0,Vi);case"textInput":return r=a.data,r===Vi&&Mi?null:r;default:return null}}function tk(r,a){if(sl)return r==="compositionend"||!tt&&$a(r,a)?(r=ru(),Fa=iu=ir=null,sl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return or&&a.locale!=="ko"?null:a.data;default:return null}}var nk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dT(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!nk[r.type]:a==="textarea"}function fT(r,a,c,h){Ts?nr?nr.push(h):nr=[h]:Ts=h,a=Mf(a,"onChange"),0<a.length&&(c=new rr("onChange","change",null,c,h),r.push({event:c,listeners:a}))}var lu=null,cu=null;function ik(r){QE(r,0)}function Gd(r){var a=Gn(r);if(ja(a))return r}function mT(r,a){if(r==="change")return a}var pT=!1;if(oi){var mg;if(oi){var pg="oninput"in document;if(!pg){var gT=document.createElement("div");gT.setAttribute("oninput","return;"),pg=typeof gT.oninput=="function"}mg=pg}else mg=!1;pT=mg&&(!document.documentMode||9<document.documentMode)}function yT(){lu&&(lu.detachEvent("onpropertychange",vT),cu=lu=null)}function vT(r){if(r.propertyName==="value"&&Gd(cu)){var a=[];fT(a,cu,r,ai(r)),Es(ik,a)}}function rk(r,a,c){r==="focusin"?(yT(),lu=a,cu=c,lu.attachEvent("onpropertychange",vT)):r==="focusout"&&yT()}function sk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Gd(cu)}function ak(r,a){if(r==="click")return Gd(a)}function ok(r,a){if(r==="input"||r==="change")return Gd(a)}function lk(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Kn=typeof Object.is=="function"?Object.is:lk;function uu(r,a){if(Kn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),h=Object.keys(a);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var g=c[h];if(!Ut.call(a,g)||!Kn(r[g],a[g]))return!1}return!0}function _T(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function bT(r,a){var c=_T(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=a&&h>=a)return{node:c,offset:a-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=_T(c)}}function TT(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?TT(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function ET(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=tr(r.document);a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=tr(r.document)}return a}function gg(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var ck=oi&&"documentMode"in document&&11>=document.documentMode,al=null,yg=null,hu=null,vg=!1;function wT(r,a,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;vg||al==null||al!==tr(h)||(h=al,"selectionStart"in h&&gg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),hu&&uu(hu,h)||(hu=h,h=Mf(yg,"onSelect"),0<h.length&&(a=new rr("onSelect","select",null,a,c),r.push({event:a,listeners:h}),a.target=al)))}function Ka(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var ol={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionrun:Ka("Transition","TransitionRun"),transitionstart:Ka("Transition","TransitionStart"),transitioncancel:Ka("Transition","TransitionCancel"),transitionend:Ka("Transition","TransitionEnd")},_g={},ST={};oi&&(ST=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function Ya(r){if(_g[r])return _g[r];if(!ol[r])return r;var a=ol[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in ST)return _g[r]=a[c];return r}var xT=Ya("animationend"),AT=Ya("animationiteration"),IT=Ya("animationstart"),uk=Ya("transitionrun"),hk=Ya("transitionstart"),dk=Ya("transitioncancel"),RT=Ya("transitionend"),CT=new Map,bg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bg.push("scrollEnd");function Pi(r,a){CT.set(r,a),Ji(a,[r])}var $d=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ci=[],ll=0,Tg=0;function Kd(){for(var r=ll,a=Tg=ll=0;a<r;){var c=ci[a];ci[a++]=null;var h=ci[a];ci[a++]=null;var g=ci[a];ci[a++]=null;var y=ci[a];if(ci[a++]=null,h!==null&&g!==null){var T=h.pending;T===null?g.next=g:(g.next=T.next,T.next=g),h.pending=g}y!==0&&NT(c,g,y)}}function Yd(r,a,c,h){ci[ll++]=r,ci[ll++]=a,ci[ll++]=c,ci[ll++]=h,Tg|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function Eg(r,a,c,h){return Yd(r,a,c,h),Qd(r)}function Qa(r,a){return Yd(r,null,null,a),Qd(r)}function NT(r,a,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var g=!1,y=r.return;y!==null;)y.childLanes|=c,h=y.alternate,h!==null&&(h.childLanes|=c),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(g=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,g&&a!==null&&(g=31-Nt(c),r=y.hiddenUpdates,h=r[g],h===null?r[g]=[a]:h.push(a),a.lane=c|536870912),y):null}function Qd(r){if(50<Vu)throw Vu=0,Dy=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var cl={};function fk(r,a,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(r,a,c,h){return new fk(r,a,c,h)}function wg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Vr(r,a){var c=r.alternate;return c===null?(c=Yn(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function DT(r,a){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,a=c.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Xd(r,a,c,h,g,y){var T=0;if(h=r,typeof r=="function")wg(r)&&(T=1);else if(typeof r=="string")T=vV(r,c,ge.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=Yn(31,c,a,g),r.elementType=V,r.lanes=y,r;case R:return Xa(c.children,g,y,a);case D:T=8,g|=24;break;case L:return r=Yn(12,c,a,g|2),r.elementType=L,r.lanes=y,r;case te:return r=Yn(13,c,a,g),r.elementType=te,r.lanes=y,r;case Z:return r=Yn(19,c,a,g),r.elementType=Z,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:T=10;break e;case B:T=9;break e;case Y:T=11;break e;case x:T=14;break e;case I:T=16,h=null;break e}T=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return a=Yn(T,c,a,g),a.elementType=r,a.type=h,a.lanes=y,a}function Xa(r,a,c,h){return r=Yn(7,r,h,a),r.lanes=c,r}function Sg(r,a,c){return r=Yn(6,r,null,a),r.lanes=c,r}function kT(r){var a=Yn(18,null,null,0);return a.stateNode=r,a}function xg(r,a,c){return a=Yn(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var VT=new WeakMap;function ui(r,a){if(typeof r=="object"&&r!==null){var c=VT.get(r);return c!==void 0?c:(a={value:r,source:a,stack:Fc(a)},VT.set(r,a),a)}return{value:r,source:a,stack:Fc(a)}}var ul=[],hl=0,Wd=null,du=0,hi=[],di=0,As=null,lr=1,cr="";function Mr(r,a){ul[hl++]=du,ul[hl++]=Wd,Wd=r,du=a}function MT(r,a,c){hi[di++]=lr,hi[di++]=cr,hi[di++]=As,As=r;var h=lr;r=cr;var g=32-Nt(h)-1;h&=~(1<<g),c+=1;var y=32-Nt(a)+g;if(30<y){var T=g-g%5;y=(h&(1<<T)-1).toString(32),h>>=T,g-=T,lr=1<<32-Nt(a)+g|c<<g|h,cr=y+r}else lr=1<<y|c<<g|h,cr=r}function Ag(r){r.return!==null&&(Mr(r,1),MT(r,1,0))}function Ig(r){for(;r===Wd;)Wd=ul[--hl],ul[hl]=null,du=ul[--hl],ul[hl]=null;for(;r===As;)As=hi[--di],hi[di]=null,cr=hi[--di],hi[di]=null,lr=hi[--di],hi[di]=null}function PT(r,a){hi[di++]=lr,hi[di++]=cr,hi[di++]=As,lr=a.id,cr=a.overflow,As=r}var hn=null,gt=null,Ke=!1,Is=null,fi=!1,Rg=Error(i(519));function Rs(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fu(ui(a,r)),Rg}function OT(r){var a=r.stateNode,c=r.type,h=r.memoizedProps;switch(a[Bt]=r,a[sn]=h,c){case"dialog":Fe("cancel",a),Fe("close",a);break;case"iframe":case"object":case"embed":Fe("load",a);break;case"video":case"audio":for(c=0;c<Pu.length;c++)Fe(Pu[c],a);break;case"source":Fe("error",a);break;case"img":case"image":case"link":Fe("error",a),Fe("load",a);break;case"details":Fe("toggle",a);break;case"input":Fe("invalid",a),Nd(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Fe("invalid",a);break;case"textarea":Fe("invalid",a),_s(a,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||h.suppressHydrationWarning===!0||JE(a.textContent,c)?(h.popover!=null&&(Fe("beforetoggle",a),Fe("toggle",a)),h.onScroll!=null&&Fe("scroll",a),h.onScrollEnd!=null&&Fe("scrollend",a),h.onClick!=null&&(a.onclick=Ni),a=!0):a=!1,a||Rs(r,!0)}function LT(r){for(hn=r.return;hn;)switch(hn.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:hn=hn.return}}function dl(r){if(r!==hn)return!1;if(!Ke)return LT(r),Ke=!0,!1;var a=r.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||$y(r.type,r.memoizedProps)),c=!c),c&&gt&&Rs(r),LT(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));gt=lw(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));gt=lw(r)}else a===27?(a=gt,Fs(r.type)?(r=Wy,Wy=null,gt=r):gt=a):gt=hn?pi(r.stateNode.nextSibling):null;return!0}function Wa(){gt=hn=null,Ke=!1}function Cg(){var r=Is;return r!==null&&(Un===null?Un=r:Un.push.apply(Un,r),Is=null),r}function fu(r){Is===null?Is=[r]:Is.push(r)}var Ng=F(null),Za=null,Pr=null;function Cs(r,a,c){pe(Ng,a._currentValue),a._currentValue=c}function Or(r){r._currentValue=Ng.current,se(Ng)}function Dg(r,a,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),r===c)break;r=r.return}}function kg(r,a,c,h){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var y=g.dependencies;if(y!==null){var T=g.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=g;for(var U=0;U<a.length;U++)if(A.context===a[U]){y.lanes|=c,A=y.alternate,A!==null&&(A.lanes|=c),Dg(y.return,c,r),h||(T=null);break e}y=A.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(i(341));T.lanes|=c,y=T.alternate,y!==null&&(y.lanes|=c),Dg(T,c,r),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===r){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function fl(r,a,c,h){r=null;for(var g=a,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var A=g.type;Kn(g.pendingProps.value,T.value)||(r!==null?r.push(A):r=[A])}}else if(g===Ye.current){if(T=g.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(zu):r=[zu])}g=g.return}r!==null&&kg(a,r,c,h),a.flags|=262144}function Zd(r){for(r=r.firstContext;r!==null;){if(!Kn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ja(r){Za=r,Pr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function dn(r){return jT(Za,r)}function Jd(r,a){return Za===null&&Ja(r),jT(r,a)}function jT(r,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Pr===null){if(r===null)throw Error(i(308));Pr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Pr=Pr.next=a;return c}var mk=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){a.aborted=!0,r.forEach(function(c){return c()})}},pk=n.unstable_scheduleCallback,gk=n.unstable_NormalPriority,Ht={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vg(){return{controller:new mk,data:new Map,refCount:0}}function mu(r){r.refCount--,r.refCount===0&&pk(gk,function(){r.controller.abort()})}var pu=null,Mg=0,ml=0,pl=null;function yk(r,a){if(pu===null){var c=pu=[];Mg=0,ml=Ly(),pl={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Mg++,a.then(UT,UT),a}function UT(){if(--Mg===0&&pu!==null){pl!==null&&(pl.status="fulfilled");var r=pu;pu=null,ml=0,pl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function vk(r,a){var c=[],h={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return r.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),h}var zT=H.S;H.S=function(r,a){wE=In(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&yk(r,a),zT!==null&&zT(r,a)};var eo=F(null);function Pg(){var r=eo.current;return r!==null?r:ft.pooledCache}function ef(r,a){a===null?pe(eo,eo.current):pe(eo,a.pool)}function BT(){var r=Pg();return r===null?null:{parent:Ht._currentValue,pool:r}}var gl=Error(i(460)),Og=Error(i(474)),tf=Error(i(542)),nf={then:function(){}};function FT(r){return r=r.status,r==="fulfilled"||r==="rejected"}function qT(r,a,c){switch(c=r[c],c===void 0?r.push(a):c!==a&&(a.then(Ni,Ni),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,GT(r),r;default:if(typeof a.status=="string")a.then(Ni,Ni);else{if(r=ft,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,GT(r),r}throw no=a,gl}}function to(r){try{var a=r._init;return a(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(no=c,gl):c}}var no=null;function HT(){if(no===null)throw Error(i(459));var r=no;return no=null,r}function GT(r){if(r===gl||r===tf)throw Error(i(483))}var yl=null,gu=0;function rf(r){var a=gu;return gu+=1,yl===null&&(yl=[]),qT(yl,r,a)}function yu(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function sf(r,a){throw a.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function $T(r){function a(G,q){if(r){var Q=G.deletions;Q===null?(G.deletions=[q],G.flags|=16):Q.push(q)}}function c(G,q){if(!r)return null;for(;q!==null;)a(G,q),q=q.sibling;return null}function h(G){for(var q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function g(G,q){return G=Vr(G,q),G.index=0,G.sibling=null,G}function y(G,q,Q){return G.index=Q,r?(Q=G.alternate,Q!==null?(Q=Q.index,Q<q?(G.flags|=67108866,q):Q):(G.flags|=67108866,q)):(G.flags|=1048576,q)}function T(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function A(G,q,Q,ae){return q===null||q.tag!==6?(q=Sg(Q,G.mode,ae),q.return=G,q):(q=g(q,Q),q.return=G,q)}function U(G,q,Q,ae){var we=Q.type;return we===R?ne(G,q,Q.props.children,ae,Q.key):q!==null&&(q.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===I&&to(we)===q.type)?(q=g(q,Q.props),yu(q,Q),q.return=G,q):(q=Xd(Q.type,Q.key,Q.props,null,G.mode,ae),yu(q,Q),q.return=G,q)}function X(G,q,Q,ae){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=xg(Q,G.mode,ae),q.return=G,q):(q=g(q,Q.children||[]),q.return=G,q)}function ne(G,q,Q,ae,we){return q===null||q.tag!==7?(q=Xa(Q,G.mode,ae,we),q.return=G,q):(q=g(q,Q),q.return=G,q)}function oe(G,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Sg(""+q,G.mode,Q),q.return=G,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return Q=Xd(q.type,q.key,q.props,null,G.mode,Q),yu(Q,q),Q.return=G,Q;case N:return q=xg(q,G.mode,Q),q.return=G,q;case I:return q=to(q),oe(G,q,Q)}if(de(q)||z(q))return q=Xa(q,G.mode,Q,null),q.return=G,q;if(typeof q.then=="function")return oe(G,rf(q),Q);if(q.$$typeof===O)return oe(G,Jd(G,q),Q);sf(G,q)}return null}function W(G,q,Q,ae){var we=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return we!==null?null:A(G,q,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:return Q.key===we?U(G,q,Q,ae):null;case N:return Q.key===we?X(G,q,Q,ae):null;case I:return Q=to(Q),W(G,q,Q,ae)}if(de(Q)||z(Q))return we!==null?null:ne(G,q,Q,ae,null);if(typeof Q.then=="function")return W(G,q,rf(Q),ae);if(Q.$$typeof===O)return W(G,q,Jd(G,Q),ae);sf(G,Q)}return null}function ee(G,q,Q,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return G=G.get(Q)||null,A(q,G,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return G=G.get(ae.key===null?Q:ae.key)||null,U(q,G,ae,we);case N:return G=G.get(ae.key===null?Q:ae.key)||null,X(q,G,ae,we);case I:return ae=to(ae),ee(G,q,Q,ae,we)}if(de(ae)||z(ae))return G=G.get(Q)||null,ne(q,G,ae,we,null);if(typeof ae.then=="function")return ee(G,q,Q,rf(ae),we);if(ae.$$typeof===O)return ee(G,q,Q,Jd(q,ae),we);sf(q,ae)}return null}function ve(G,q,Q,ae){for(var we=null,Ze=null,be=q,Ue=q=0,He=null;be!==null&&Ue<Q.length;Ue++){be.index>Ue?(He=be,be=null):He=be.sibling;var Je=W(G,be,Q[Ue],ae);if(Je===null){be===null&&(be=He);break}r&&be&&Je.alternate===null&&a(G,be),q=y(Je,q,Ue),Ze===null?we=Je:Ze.sibling=Je,Ze=Je,be=He}if(Ue===Q.length)return c(G,be),Ke&&Mr(G,Ue),we;if(be===null){for(;Ue<Q.length;Ue++)be=oe(G,Q[Ue],ae),be!==null&&(q=y(be,q,Ue),Ze===null?we=be:Ze.sibling=be,Ze=be);return Ke&&Mr(G,Ue),we}for(be=h(be);Ue<Q.length;Ue++)He=ee(be,G,Ue,Q[Ue],ae),He!==null&&(r&&He.alternate!==null&&be.delete(He.key===null?Ue:He.key),q=y(He,q,Ue),Ze===null?we=He:Ze.sibling=He,Ze=He);return r&&be.forEach(function(Ks){return a(G,Ks)}),Ke&&Mr(G,Ue),we}function Ae(G,q,Q,ae){if(Q==null)throw Error(i(151));for(var we=null,Ze=null,be=q,Ue=q=0,He=null,Je=Q.next();be!==null&&!Je.done;Ue++,Je=Q.next()){be.index>Ue?(He=be,be=null):He=be.sibling;var Ks=W(G,be,Je.value,ae);if(Ks===null){be===null&&(be=He);break}r&&be&&Ks.alternate===null&&a(G,be),q=y(Ks,q,Ue),Ze===null?we=Ks:Ze.sibling=Ks,Ze=Ks,be=He}if(Je.done)return c(G,be),Ke&&Mr(G,Ue),we;if(be===null){for(;!Je.done;Ue++,Je=Q.next())Je=oe(G,Je.value,ae),Je!==null&&(q=y(Je,q,Ue),Ze===null?we=Je:Ze.sibling=Je,Ze=Je);return Ke&&Mr(G,Ue),we}for(be=h(be);!Je.done;Ue++,Je=Q.next())Je=ee(be,G,Ue,Je.value,ae),Je!==null&&(r&&Je.alternate!==null&&be.delete(Je.key===null?Ue:Je.key),q=y(Je,q,Ue),Ze===null?we=Je:Ze.sibling=Je,Ze=Je);return r&&be.forEach(function(CV){return a(G,CV)}),Ke&&Mr(G,Ue),we}function dt(G,q,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===R&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:e:{for(var we=Q.key;q!==null;){if(q.key===we){if(we=Q.type,we===R){if(q.tag===7){c(G,q.sibling),ae=g(q,Q.props.children),ae.return=G,G=ae;break e}}else if(q.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===I&&to(we)===q.type){c(G,q.sibling),ae=g(q,Q.props),yu(ae,Q),ae.return=G,G=ae;break e}c(G,q);break}else a(G,q);q=q.sibling}Q.type===R?(ae=Xa(Q.props.children,G.mode,ae,Q.key),ae.return=G,G=ae):(ae=Xd(Q.type,Q.key,Q.props,null,G.mode,ae),yu(ae,Q),ae.return=G,G=ae)}return T(G);case N:e:{for(we=Q.key;q!==null;){if(q.key===we)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){c(G,q.sibling),ae=g(q,Q.children||[]),ae.return=G,G=ae;break e}else{c(G,q);break}else a(G,q);q=q.sibling}ae=xg(Q,G.mode,ae),ae.return=G,G=ae}return T(G);case I:return Q=to(Q),dt(G,q,Q,ae)}if(de(Q))return ve(G,q,Q,ae);if(z(Q)){if(we=z(Q),typeof we!="function")throw Error(i(150));return Q=we.call(Q),Ae(G,q,Q,ae)}if(typeof Q.then=="function")return dt(G,q,rf(Q),ae);if(Q.$$typeof===O)return dt(G,q,Jd(G,Q),ae);sf(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(c(G,q.sibling),ae=g(q,Q),ae.return=G,G=ae):(c(G,q),ae=Sg(Q,G.mode,ae),ae.return=G,G=ae),T(G)):c(G,q)}return function(G,q,Q,ae){try{gu=0;var we=dt(G,q,Q,ae);return yl=null,we}catch(be){if(be===gl||be===tf)throw be;var Ze=Yn(29,be,null,G.mode);return Ze.lanes=ae,Ze.return=G,Ze}finally{}}}var io=$T(!0),KT=$T(!1),Ns=!1;function Lg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jg(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ds(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ks(r,a,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(nt&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=Qd(r),NT(r,null,c),a}return Yd(r,h,a,c),Qd(r)}function vu(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var h=a.lanes;h&=r.pendingLanes,c|=h,a.lanes=c,Gc(r,c)}}function Ug(r,a){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=T:y=y.next=T,c=c.next}while(c!==null);y===null?g=y=a:y=y.next=a}else g=y=a;c={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}var zg=!1;function _u(){if(zg){var r=pl;if(r!==null)throw r}}function bu(r,a,c,h){zg=!1;var g=r.updateQueue;Ns=!1;var y=g.firstBaseUpdate,T=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var U=A,X=U.next;U.next=null,T===null?y=X:T.next=X,T=U;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,A=ne.lastBaseUpdate,A!==T&&(A===null?ne.firstBaseUpdate=X:A.next=X,ne.lastBaseUpdate=U))}if(y!==null){var oe=g.baseState;T=0,ne=X=U=null,A=y;do{var W=A.lane&-536870913,ee=W!==A.lane;if(ee?(qe&W)===W:(h&W)===W){W!==0&&W===ml&&(zg=!0),ne!==null&&(ne=ne.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ve=r,Ae=A;W=a;var dt=c;switch(Ae.tag){case 1:if(ve=Ae.payload,typeof ve=="function"){oe=ve.call(dt,oe,W);break e}oe=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ae.payload,W=typeof ve=="function"?ve.call(dt,oe,W):ve,W==null)break e;oe=v({},oe,W);break e;case 2:Ns=!0}}W=A.callback,W!==null&&(r.flags|=64,ee&&(r.flags|=8192),ee=g.callbacks,ee===null?g.callbacks=[W]:ee.push(W))}else ee={lane:W,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ne===null?(X=ne=ee,U=oe):ne=ne.next=ee,T|=W;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,g.lastBaseUpdate=ee,g.shared.pending=null}}while(!0);ne===null&&(U=oe),g.baseState=U,g.firstBaseUpdate=X,g.lastBaseUpdate=ne,y===null&&(g.shared.lanes=0),Ls|=T,r.lanes=T,r.memoizedState=oe}}function YT(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function QT(r,a){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)YT(c[r],a)}var vl=F(null),af=F(0);function XT(r,a){r=Gr,pe(af,r),pe(vl,a),Gr=r|a.baseLanes}function Bg(){pe(af,Gr),pe(vl,vl.current)}function Fg(){Gr=af.current,se(vl),se(af)}var Qn=F(null),mi=null;function Vs(r){var a=r.alternate;pe(kt,kt.current&1),pe(Qn,r),mi===null&&(a===null||vl.current!==null||a.memoizedState!==null)&&(mi=r)}function qg(r){pe(kt,kt.current),pe(Qn,r),mi===null&&(mi=r)}function WT(r){r.tag===22?(pe(kt,kt.current),pe(Qn,r),mi===null&&(mi=r)):Ms()}function Ms(){pe(kt,kt.current),pe(Qn,Qn.current)}function Xn(r){se(Qn),mi===r&&(mi=null),se(kt)}var kt=F(0);function of(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Qy(c)||Xy(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Lr=0,Le=null,ut=null,Gt=null,lf=!1,_l=!1,ro=!1,cf=0,Tu=0,bl=null,_k=0;function At(){throw Error(i(321))}function Hg(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!Kn(r[c],a[c]))return!1;return!0}function Gg(r,a,c,h,g,y){return Lr=y,Le=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=r===null||r.memoizedState===null?M1:ay,ro=!1,y=c(h,g),ro=!1,_l&&(y=JT(a,c,h,g)),ZT(r),y}function ZT(r){H.H=Su;var a=ut!==null&&ut.next!==null;if(Lr=0,Gt=ut=Le=null,lf=!1,Tu=0,bl=null,a)throw Error(i(300));r===null||$t||(r=r.dependencies,r!==null&&Zd(r)&&($t=!0))}function JT(r,a,c,h){Le=r;var g=0;do{if(_l&&(bl=null),Tu=0,_l=!1,25<=g)throw Error(i(301));if(g+=1,Gt=ut=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=P1,y=a(c,h)}while(_l);return y}function bk(){var r=H.H,a=r.useState()[0];return a=typeof a.then=="function"?Eu(a):a,r=r.useState()[0],(ut!==null?ut.memoizedState:null)!==r&&(Le.flags|=1024),a}function $g(){var r=cf!==0;return cf=0,r}function Kg(r,a,c){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~c}function Yg(r){if(lf){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}lf=!1}Lr=0,Gt=ut=Le=null,_l=!1,Tu=cf=0,bl=null}function Cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Le.memoizedState=Gt=r:Gt=Gt.next=r,Gt}function Vt(){if(ut===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=ut.next;var a=Gt===null?Le.memoizedState:Gt.next;if(a!==null)Gt=a,ut=r;else{if(r===null)throw Le.alternate===null?Error(i(467)):Error(i(310));ut=r,r={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Gt===null?Le.memoizedState=Gt=r:Gt=Gt.next=r}return Gt}function uf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eu(r){var a=Tu;return Tu+=1,bl===null&&(bl=[]),r=qT(bl,r,a),a=Le,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?M1:ay),r}function hf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Eu(r);if(r.$$typeof===O)return dn(r)}throw Error(i(438,String(r)))}function Qg(r){var a=null,c=Le.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var h=Le.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=uf(),Le.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(r),h=0;h<r;h++)c[h]=M;return a.index++,c}function jr(r,a){return typeof a=="function"?a(r):a}function df(r){var a=Vt();return Xg(a,ut,r)}function Xg(r,a,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var g=r.baseQueue,y=h.pending;if(y!==null){if(g!==null){var T=g.next;g.next=y.next,y.next=T}a.baseQueue=g=y,h.pending=null}if(y=r.baseState,g===null)r.memoizedState=y;else{a=g.next;var A=T=null,U=null,X=a,ne=!1;do{var oe=X.lane&-536870913;if(oe!==X.lane?(qe&oe)===oe:(Lr&oe)===oe){var W=X.revertLane;if(W===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),oe===ml&&(ne=!0);else if((Lr&W)===W){X=X.next,W===ml&&(ne=!0);continue}else oe={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(A=U=oe,T=y):U=U.next=oe,Le.lanes|=W,Ls|=W;oe=X.action,ro&&c(y,oe),y=X.hasEagerState?X.eagerState:c(y,oe)}else W={lane:oe,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(A=U=W,T=y):U=U.next=W,Le.lanes|=oe,Ls|=oe;X=X.next}while(X!==null&&X!==a);if(U===null?T=y:U.next=A,!Kn(y,r.memoizedState)&&($t=!0,ne&&(c=pl,c!==null)))throw c;r.memoizedState=y,r.baseState=T,r.baseQueue=U,h.lastRenderedState=y}return g===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Wg(r){var a=Vt(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,g=c.pending,y=a.memoizedState;if(g!==null){c.pending=null;var T=g=g.next;do y=r(y,T.action),T=T.next;while(T!==g);Kn(y,a.memoizedState)||($t=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,h]}function e1(r,a,c){var h=Le,g=Vt(),y=Ke;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=a();var T=!Kn((ut||g).memoizedState,c);if(T&&(g.memoizedState=c,$t=!0),g=g.queue,ey(i1.bind(null,h,g,r),[r]),g.getSnapshot!==a||T||Gt!==null&&Gt.memoizedState.tag&1){if(h.flags|=2048,Tl(9,{destroy:void 0},n1.bind(null,h,g,c,a),null),ft===null)throw Error(i(349));y||(Lr&127)!==0||t1(h,a,c)}return c}function t1(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=Le.updateQueue,a===null?(a=uf(),Le.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function n1(r,a,c,h){a.value=c,a.getSnapshot=h,r1(a)&&s1(r)}function i1(r,a,c){return c(function(){r1(a)&&s1(r)})}function r1(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!Kn(r,c)}catch{return!0}}function s1(r){var a=Qa(r,2);a!==null&&zn(a,r,2)}function Zg(r){var a=Cn();if(typeof r=="function"){var c=r;if(r=c(),ro){ri(!0);try{c()}finally{ri(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:r},a}function a1(r,a,c,h){return r.baseState=c,Xg(r,ut,typeof h=="function"?h:jr)}function Tk(r,a,c,h,g){if(pf(r))throw Error(i(485));if(r=a.action,r!==null){var y={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};H.T!==null?c(!0):y.isTransition=!1,h(y),c=a.pending,c===null?(y.next=a.pending=y,o1(a,y)):(y.next=c.next,a.pending=c.next=y)}}function o1(r,a){var c=a.action,h=a.payload,g=r.state;if(a.isTransition){var y=H.T,T={};H.T=T;try{var A=c(g,h),U=H.S;U!==null&&U(T,A),l1(r,a,A)}catch(X){Jg(r,a,X)}finally{y!==null&&T.types!==null&&(y.types=T.types),H.T=y}}else try{y=c(g,h),l1(r,a,y)}catch(X){Jg(r,a,X)}}function l1(r,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){c1(r,a,h)},function(h){return Jg(r,a,h)}):c1(r,a,c)}function c1(r,a,c){a.status="fulfilled",a.value=c,u1(a),r.state=c,a=r.pending,a!==null&&(c=a.next,c===a?r.pending=null:(c=c.next,a.next=c,o1(r,c)))}function Jg(r,a,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=c,u1(a),a=a.next;while(a!==h)}r.action=null}function u1(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function h1(r,a){return a}function d1(r,a){if(Ke){var c=ft.formState;if(c!==null){e:{var h=Le;if(Ke){if(gt){t:{for(var g=gt,y=fi;g.nodeType!==8;){if(!y){g=null;break t}if(g=pi(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){gt=pi(g.nextSibling),h=g.data==="F!";break e}}Rs(h)}h=!1}h&&(a=c[0])}}return c=Cn(),c.memoizedState=c.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h1,lastRenderedState:a},c.queue=h,c=D1.bind(null,Le,h),h.dispatch=c,h=Zg(!1),y=sy.bind(null,Le,!1,h.queue),h=Cn(),g={state:a,dispatch:null,action:r,pending:null},h.queue=g,c=Tk.bind(null,Le,g,y,c),g.dispatch=c,h.memoizedState=r,[a,c,!1]}function f1(r){var a=Vt();return m1(a,ut,r)}function m1(r,a,c){if(a=Xg(r,a,h1)[0],r=df(jr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Eu(a)}catch(T){throw T===gl?tf:T}else h=a;a=Vt();var g=a.queue,y=g.dispatch;return c!==a.memoizedState&&(Le.flags|=2048,Tl(9,{destroy:void 0},Ek.bind(null,g,c),null)),[h,y,r]}function Ek(r,a){r.action=a}function p1(r){var a=Vt(),c=ut;if(c!==null)return m1(a,c,r);Vt(),a=a.memoizedState,c=Vt();var h=c.queue.dispatch;return c.memoizedState=r,[a,h,!1]}function Tl(r,a,c,h){return r={tag:r,create:c,deps:h,inst:a,next:null},a=Le.updateQueue,a===null&&(a=uf(),Le.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,a.lastEffect=r),r}function g1(){return Vt().memoizedState}function ff(r,a,c,h){var g=Cn();Le.flags|=r,g.memoizedState=Tl(1|a,{destroy:void 0},c,h===void 0?null:h)}function mf(r,a,c,h){var g=Vt();h=h===void 0?null:h;var y=g.memoizedState.inst;ut!==null&&h!==null&&Hg(h,ut.memoizedState.deps)?g.memoizedState=Tl(a,y,c,h):(Le.flags|=r,g.memoizedState=Tl(1|a,y,c,h))}function y1(r,a){ff(8390656,8,r,a)}function ey(r,a){mf(2048,8,r,a)}function wk(r){Le.flags|=4;var a=Le.updateQueue;if(a===null)a=uf(),Le.updateQueue=a,a.events=[r];else{var c=a.events;c===null?a.events=[r]:c.push(r)}}function v1(r){var a=Vt().memoizedState;return wk({ref:a,nextImpl:r}),function(){if((nt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function _1(r,a){return mf(4,2,r,a)}function b1(r,a){return mf(4,4,r,a)}function T1(r,a){if(typeof a=="function"){r=r();var c=a(r);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function E1(r,a,c){c=c!=null?c.concat([r]):null,mf(4,4,T1.bind(null,a,r),c)}function ty(){}function w1(r,a){var c=Vt();a=a===void 0?null:a;var h=c.memoizedState;return a!==null&&Hg(a,h[1])?h[0]:(c.memoizedState=[r,a],r)}function S1(r,a){var c=Vt();a=a===void 0?null:a;var h=c.memoizedState;if(a!==null&&Hg(a,h[1]))return h[0];if(h=r(),ro){ri(!0);try{r()}finally{ri(!1)}}return c.memoizedState=[h,a],h}function ny(r,a,c){return c===void 0||(Lr&1073741824)!==0&&(qe&261930)===0?r.memoizedState=a:(r.memoizedState=c,r=xE(),Le.lanes|=r,Ls|=r,c)}function x1(r,a,c,h){return Kn(c,a)?c:vl.current!==null?(r=ny(r,c,h),Kn(r,a)||($t=!0),r):(Lr&42)===0||(Lr&1073741824)!==0&&(qe&261930)===0?($t=!0,r.memoizedState=c):(r=xE(),Le.lanes|=r,Ls|=r,a)}function A1(r,a,c,h,g){var y=re.p;re.p=y!==0&&8>y?y:8;var T=H.T,A={};H.T=A,sy(r,!1,a,c);try{var U=g(),X=H.S;if(X!==null&&X(A,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ne=vk(U,h);wu(r,a,ne,Jn(r))}else wu(r,a,h,Jn(r))}catch(oe){wu(r,a,{then:function(){},status:"rejected",reason:oe},Jn())}finally{re.p=y,T!==null&&A.types!==null&&(T.types=A.types),H.T=T}}function Sk(){}function iy(r,a,c,h){if(r.tag!==5)throw Error(i(476));var g=I1(r).queue;A1(r,g,a,ue,c===null?Sk:function(){return R1(r),c(h)})}function I1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:ue},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:c},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function R1(r){var a=I1(r);a.next===null&&(a=r.alternate.memoizedState),wu(r,a.next.queue,{},Jn())}function ry(){return dn(zu)}function C1(){return Vt().memoizedState}function N1(){return Vt().memoizedState}function xk(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var c=Jn();r=Ds(c);var h=ks(a,r,c);h!==null&&(zn(h,a,c),vu(h,a,c)),a={cache:Vg()},r.payload=a;return}a=a.return}}function Ak(r,a,c){var h=Jn();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},pf(r)?k1(a,c):(c=Eg(r,a,c,h),c!==null&&(zn(c,r,h),V1(c,a,h)))}function D1(r,a,c){var h=Jn();wu(r,a,c,h)}function wu(r,a,c,h){var g={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(pf(r))k1(a,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,A=y(T,c);if(g.hasEagerState=!0,g.eagerState=A,Kn(A,T))return Yd(r,a,g,0),ft===null&&Kd(),!1}catch{}finally{}if(c=Eg(r,a,g,h),c!==null)return zn(c,r,h),V1(c,a,h),!0}return!1}function sy(r,a,c,h){if(h={lane:2,revertLane:Ly(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},pf(r)){if(a)throw Error(i(479))}else a=Eg(r,c,h,2),a!==null&&zn(a,r,2)}function pf(r){var a=r.alternate;return r===Le||a!==null&&a===Le}function k1(r,a){_l=lf=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function V1(r,a,c){if((c&4194048)!==0){var h=a.lanes;h&=r.pendingLanes,c|=h,a.lanes=c,Gc(r,c)}}var Su={readContext:dn,use:hf,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At};Su.useEffectEvent=At;var M1={readContext:dn,use:hf,useCallback:function(r,a){return Cn().memoizedState=[r,a===void 0?null:a],r},useContext:dn,useEffect:y1,useImperativeHandle:function(r,a,c){c=c!=null?c.concat([r]):null,ff(4194308,4,T1.bind(null,a,r),c)},useLayoutEffect:function(r,a){return ff(4194308,4,r,a)},useInsertionEffect:function(r,a){ff(4,2,r,a)},useMemo:function(r,a){var c=Cn();a=a===void 0?null:a;var h=r();if(ro){ri(!0);try{r()}finally{ri(!1)}}return c.memoizedState=[h,a],h},useReducer:function(r,a,c){var h=Cn();if(c!==void 0){var g=c(a);if(ro){ri(!0);try{c(a)}finally{ri(!1)}}}else g=a;return h.memoizedState=h.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},h.queue=r,r=r.dispatch=Ak.bind(null,Le,r),[h.memoizedState,r]},useRef:function(r){var a=Cn();return r={current:r},a.memoizedState=r},useState:function(r){r=Zg(r);var a=r.queue,c=D1.bind(null,Le,a);return a.dispatch=c,[r.memoizedState,c]},useDebugValue:ty,useDeferredValue:function(r,a){var c=Cn();return ny(c,r,a)},useTransition:function(){var r=Zg(!1);return r=A1.bind(null,Le,r.queue,!0,!1),Cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,c){var h=Le,g=Cn();if(Ke){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),ft===null)throw Error(i(349));(qe&127)!==0||t1(h,a,c)}g.memoizedState=c;var y={value:c,getSnapshot:a};return g.queue=y,y1(i1.bind(null,h,y,r),[r]),h.flags|=2048,Tl(9,{destroy:void 0},n1.bind(null,h,y,c,a),null),c},useId:function(){var r=Cn(),a=ft.identifierPrefix;if(Ke){var c=cr,h=lr;c=(h&~(1<<32-Nt(h)-1)).toString(32)+c,a="_"+a+"R_"+c,c=cf++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=_k++,a="_"+a+"r_"+c.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:ry,useFormState:d1,useActionState:d1,useOptimistic:function(r){var a=Cn();a.memoizedState=a.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=sy.bind(null,Le,!0,c),c.dispatch=a,[r,a]},useMemoCache:Qg,useCacheRefresh:function(){return Cn().memoizedState=xk.bind(null,Le)},useEffectEvent:function(r){var a=Cn(),c={impl:r};return a.memoizedState=c,function(){if((nt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},ay={readContext:dn,use:hf,useCallback:w1,useContext:dn,useEffect:ey,useImperativeHandle:E1,useInsertionEffect:_1,useLayoutEffect:b1,useMemo:S1,useReducer:df,useRef:g1,useState:function(){return df(jr)},useDebugValue:ty,useDeferredValue:function(r,a){var c=Vt();return x1(c,ut.memoizedState,r,a)},useTransition:function(){var r=df(jr)[0],a=Vt().memoizedState;return[typeof r=="boolean"?r:Eu(r),a]},useSyncExternalStore:e1,useId:C1,useHostTransitionStatus:ry,useFormState:f1,useActionState:f1,useOptimistic:function(r,a){var c=Vt();return a1(c,ut,r,a)},useMemoCache:Qg,useCacheRefresh:N1};ay.useEffectEvent=v1;var P1={readContext:dn,use:hf,useCallback:w1,useContext:dn,useEffect:ey,useImperativeHandle:E1,useInsertionEffect:_1,useLayoutEffect:b1,useMemo:S1,useReducer:Wg,useRef:g1,useState:function(){return Wg(jr)},useDebugValue:ty,useDeferredValue:function(r,a){var c=Vt();return ut===null?ny(c,r,a):x1(c,ut.memoizedState,r,a)},useTransition:function(){var r=Wg(jr)[0],a=Vt().memoizedState;return[typeof r=="boolean"?r:Eu(r),a]},useSyncExternalStore:e1,useId:C1,useHostTransitionStatus:ry,useFormState:p1,useActionState:p1,useOptimistic:function(r,a){var c=Vt();return ut!==null?a1(c,ut,r,a):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Qg,useCacheRefresh:N1};P1.useEffectEvent=v1;function oy(r,a,c,h){a=r.memoizedState,c=c(h,a),c=c==null?a:v({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var ly={enqueueSetState:function(r,a,c){r=r._reactInternals;var h=Jn(),g=Ds(h);g.payload=a,c!=null&&(g.callback=c),a=ks(r,g,h),a!==null&&(zn(a,r,h),vu(a,r,h))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var h=Jn(),g=Ds(h);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=ks(r,g,h),a!==null&&(zn(a,r,h),vu(a,r,h))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=Jn(),h=Ds(c);h.tag=2,a!=null&&(h.callback=a),a=ks(r,h,c),a!==null&&(zn(a,r,c),vu(a,r,c))}};function O1(r,a,c,h,g,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,T):a.prototype&&a.prototype.isPureReactComponent?!uu(c,h)||!uu(g,y):!0}function L1(r,a,c,h){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,h),a.state!==r&&ly.enqueueReplaceState(a,a.state,null)}function so(r,a){var c=a;if("ref"in a){c={};for(var h in a)h!=="ref"&&(c[h]=a[h])}if(r=r.defaultProps){c===a&&(c=v({},c));for(var g in r)c[g]===void 0&&(c[g]=r[g])}return c}function j1(r){$d(r)}function U1(r){console.error(r)}function z1(r){$d(r)}function gf(r,a){try{var c=r.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function B1(r,a,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function cy(r,a,c){return c=Ds(c),c.tag=3,c.payload={element:null},c.callback=function(){gf(r,a)},c}function F1(r){return r=Ds(r),r.tag=3,r}function q1(r,a,c,h){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=h.value;r.payload=function(){return g(y)},r.callback=function(){B1(a,c,h)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){B1(a,c,h),typeof g!="function"&&(js===null?js=new Set([this]):js.add(this));var A=h.stack;this.componentDidCatch(h.value,{componentStack:A!==null?A:""})})}function Ik(r,a,c,h,g){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=c.alternate,a!==null&&fl(a,c,g,!0),c=Qn.current,c!==null){switch(c.tag){case 31:case 13:return mi===null?Rf():c.alternate===null&&It===0&&(It=3),c.flags&=-257,c.flags|=65536,c.lanes=g,h===nf?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([h]):a.add(h),My(r,h,g)),!1;case 22:return c.flags|=65536,h===nf?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([h]):c.add(h)),My(r,h,g)),!1}throw Error(i(435,c.tag))}return My(r,h,g),Rf(),!1}if(Ke)return a=Qn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==Rg&&(r=Error(i(422),{cause:h}),fu(ui(r,c)))):(h!==Rg&&(a=Error(i(423),{cause:h}),fu(ui(a,c))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,h=ui(h,c),g=cy(r.stateNode,h,g),Ug(r,g),It!==4&&(It=2)),!1;var y=Error(i(520),{cause:h});if(y=ui(y,c),ku===null?ku=[y]:ku.push(y),It!==4&&(It=2),a===null)return!0;h=ui(h,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,r=g&-g,c.lanes|=r,r=cy(c.stateNode,h,r),Ug(c,r),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(js===null||!js.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=F1(g),q1(g,r,c,h),Ug(c,g),!1}c=c.return}while(c!==null);return!1}var uy=Error(i(461)),$t=!1;function fn(r,a,c,h){a.child=r===null?KT(a,null,c,h):io(a,r.child,c,h)}function H1(r,a,c,h,g){c=c.render;var y=a.ref;if("ref"in h){var T={};for(var A in h)A!=="ref"&&(T[A]=h[A])}else T=h;return Ja(a),h=Gg(r,a,c,T,y,g),A=$g(),r!==null&&!$t?(Kg(r,a,g),Ur(r,a,g)):(Ke&&A&&Ag(a),a.flags|=1,fn(r,a,h,g),a.child)}function G1(r,a,c,h,g){if(r===null){var y=c.type;return typeof y=="function"&&!wg(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,$1(r,a,y,h,g)):(r=Xd(c.type,null,h,a,a.mode,g),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!vy(r,g)){var T=y.memoizedProps;if(c=c.compare,c=c!==null?c:uu,c(T,h)&&r.ref===a.ref)return Ur(r,a,g)}return a.flags|=1,r=Vr(y,h),r.ref=a.ref,r.return=a,a.child=r}function $1(r,a,c,h,g){if(r!==null){var y=r.memoizedProps;if(uu(y,h)&&r.ref===a.ref)if($t=!1,a.pendingProps=h=y,vy(r,g))(r.flags&131072)!==0&&($t=!0);else return a.lanes=r.lanes,Ur(r,a,g)}return hy(r,a,c,h,g)}function K1(r,a,c,h){var g=h.children,y=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,r!==null){for(h=a.child=r.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~y}else h=0,a.child=null;return Y1(r,a,y,c,h)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&ef(a,y!==null?y.cachePool:null),y!==null?XT(a,y):Bg(),WT(a);else return h=a.lanes=536870912,Y1(r,a,y!==null?y.baseLanes|c:c,c,h)}else y!==null?(ef(a,y.cachePool),XT(a,y),Ms(),a.memoizedState=null):(r!==null&&ef(a,null),Bg(),Ms());return fn(r,a,g,c),a.child}function xu(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Y1(r,a,c,h,g){var y=Pg();return y=y===null?null:{parent:Ht._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},r!==null&&ef(a,null),Bg(),WT(a),r!==null&&fl(r,a,h,!0),a.childLanes=g,null}function yf(r,a){return a=_f({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function Q1(r,a,c){return io(a,r.child,null,c),r=yf(a,a.pendingProps),r.flags|=2,Xn(a),a.memoizedState=null,r}function Rk(r,a,c){var h=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Ke){if(h.mode==="hidden")return r=yf(a,h),a.lanes=536870912,xu(null,r);if(qg(a),(r=gt)?(r=ow(r,fi),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:As!==null?{id:lr,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},c=kT(r),c.return=a,a.child=c,hn=a,gt=null)):r=null,r===null)throw Rs(a);return a.lanes=536870912,null}return yf(a,h)}var y=r.memoizedState;if(y!==null){var T=y.dehydrated;if(qg(a),g)if(a.flags&256)a.flags&=-257,a=Q1(r,a,c);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if($t||fl(r,a,c,!1),g=(c&r.childLanes)!==0,$t||g){if(h=ft,h!==null&&(T=$c(h,c),T!==0&&T!==y.retryLane))throw y.retryLane=T,Qa(r,T),zn(h,r,T),uy;Rf(),a=Q1(r,a,c)}else r=y.treeContext,gt=pi(T.nextSibling),hn=a,Ke=!0,Is=null,fi=!1,r!==null&&PT(a,r),a=yf(a,h),a.flags|=4096;return a}return r=Vr(r.child,{mode:h.mode,children:h.children}),r.ref=a.ref,a.child=r,r.return=a,r}function vf(r,a){var c=a.ref;if(c===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(a.flags|=4194816)}}function hy(r,a,c,h,g){return Ja(a),c=Gg(r,a,c,h,void 0,g),h=$g(),r!==null&&!$t?(Kg(r,a,g),Ur(r,a,g)):(Ke&&h&&Ag(a),a.flags|=1,fn(r,a,c,g),a.child)}function X1(r,a,c,h,g,y){return Ja(a),a.updateQueue=null,c=JT(a,h,c,g),ZT(r),h=$g(),r!==null&&!$t?(Kg(r,a,y),Ur(r,a,y)):(Ke&&h&&Ag(a),a.flags|=1,fn(r,a,c,y),a.child)}function W1(r,a,c,h,g){if(Ja(a),a.stateNode===null){var y=cl,T=c.contextType;typeof T=="object"&&T!==null&&(y=dn(T)),y=new c(h,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ly,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=h,y.state=a.memoizedState,y.refs={},Lg(a),T=c.contextType,y.context=typeof T=="object"&&T!==null?dn(T):cl,y.state=a.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(oy(a,c,T,h),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&ly.enqueueReplaceState(y,y.state,null),bu(a,h,y,g),_u(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(r===null){y=a.stateNode;var A=a.memoizedProps,U=so(c,A);y.props=U;var X=y.context,ne=c.contextType;T=cl,typeof ne=="object"&&ne!==null&&(T=dn(ne));var oe=c.getDerivedStateFromProps;ne=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,ne||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||X!==T)&&L1(a,y,h,T),Ns=!1;var W=a.memoizedState;y.state=W,bu(a,h,y,g),_u(),X=a.memoizedState,A||W!==X||Ns?(typeof oe=="function"&&(oy(a,c,oe,h),X=a.memoizedState),(U=Ns||O1(a,c,U,h,W,X,T))?(ne||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=X),y.props=h,y.state=X,y.context=T,h=U):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{y=a.stateNode,jg(r,a),T=a.memoizedProps,ne=so(c,T),y.props=ne,oe=a.pendingProps,W=y.context,X=c.contextType,U=cl,typeof X=="object"&&X!==null&&(U=dn(X)),A=c.getDerivedStateFromProps,(X=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==oe||W!==U)&&L1(a,y,h,U),Ns=!1,W=a.memoizedState,y.state=W,bu(a,h,y,g),_u();var ee=a.memoizedState;T!==oe||W!==ee||Ns||r!==null&&r.dependencies!==null&&Zd(r.dependencies)?(typeof A=="function"&&(oy(a,c,A,h),ee=a.memoizedState),(ne=Ns||O1(a,c,ne,h,W,ee,U)||r!==null&&r.dependencies!==null&&Zd(r.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,ee,U),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,ee,U)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ee),y.props=h,y.state=ee,y.context=U,h=ne):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),h=!1)}return y=h,vf(r,a),h=(a.flags&128)!==0,y||h?(y=a.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&h?(a.child=io(a,r.child,null,g),a.child=io(a,null,c,g)):fn(r,a,c,g),a.memoizedState=y.state,r=a.child):r=Ur(r,a,g),r}function Z1(r,a,c,h){return Wa(),a.flags|=256,fn(r,a,c,h),a.child}var dy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fy(r){return{baseLanes:r,cachePool:BT()}}function my(r,a,c){return r=r!==null?r.childLanes&~c:0,a&&(r|=Zn),r}function J1(r,a,c){var h=a.pendingProps,g=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=r!==null&&r.memoizedState===null?!1:(kt.current&2)!==0),T&&(g=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,r===null){if(Ke){if(g?Vs(a):Ms(),(r=gt)?(r=ow(r,fi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:As!==null?{id:lr,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},c=kT(r),c.return=a,a.child=c,hn=a,gt=null)):r=null,r===null)throw Rs(a);return Xy(r)?a.lanes=32:a.lanes=536870912,null}var A=h.children;return h=h.fallback,g?(Ms(),g=a.mode,A=_f({mode:"hidden",children:A},g),h=Xa(h,g,c,null),A.return=a,h.return=a,A.sibling=h,a.child=A,h=a.child,h.memoizedState=fy(c),h.childLanes=my(r,T,c),a.memoizedState=dy,xu(null,h)):(Vs(a),py(a,A))}var U=r.memoizedState;if(U!==null&&(A=U.dehydrated,A!==null)){if(y)a.flags&256?(Vs(a),a.flags&=-257,a=gy(r,a,c)):a.memoizedState!==null?(Ms(),a.child=r.child,a.flags|=128,a=null):(Ms(),A=h.fallback,g=a.mode,h=_f({mode:"visible",children:h.children},g),A=Xa(A,g,c,null),A.flags|=2,h.return=a,A.return=a,h.sibling=A,a.child=h,io(a,r.child,null,c),h=a.child,h.memoizedState=fy(c),h.childLanes=my(r,T,c),a.memoizedState=dy,a=xu(null,h));else if(Vs(a),Xy(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var X=T.dgst;T=X,h=Error(i(419)),h.stack="",h.digest=T,fu({value:h,source:null,stack:null}),a=gy(r,a,c)}else if($t||fl(r,a,c,!1),T=(c&r.childLanes)!==0,$t||T){if(T=ft,T!==null&&(h=$c(T,c),h!==0&&h!==U.retryLane))throw U.retryLane=h,Qa(r,h),zn(T,r,h),uy;Qy(A)||Rf(),a=gy(r,a,c)}else Qy(A)?(a.flags|=192,a.child=r.child,a=null):(r=U.treeContext,gt=pi(A.nextSibling),hn=a,Ke=!0,Is=null,fi=!1,r!==null&&PT(a,r),a=py(a,h.children),a.flags|=4096);return a}return g?(Ms(),A=h.fallback,g=a.mode,U=r.child,X=U.sibling,h=Vr(U,{mode:"hidden",children:h.children}),h.subtreeFlags=U.subtreeFlags&65011712,X!==null?A=Vr(X,A):(A=Xa(A,g,c,null),A.flags|=2),A.return=a,h.return=a,h.sibling=A,a.child=h,xu(null,h),h=a.child,A=r.child.memoizedState,A===null?A=fy(c):(g=A.cachePool,g!==null?(U=Ht._currentValue,g=g.parent!==U?{parent:U,pool:U}:g):g=BT(),A={baseLanes:A.baseLanes|c,cachePool:g}),h.memoizedState=A,h.childLanes=my(r,T,c),a.memoizedState=dy,xu(r.child,h)):(Vs(a),c=r.child,r=c.sibling,c=Vr(c,{mode:"visible",children:h.children}),c.return=a,c.sibling=null,r!==null&&(T=a.deletions,T===null?(a.deletions=[r],a.flags|=16):T.push(r)),a.child=c,a.memoizedState=null,c)}function py(r,a){return a=_f({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function _f(r,a){return r=Yn(22,r,null,a),r.lanes=0,r}function gy(r,a,c){return io(a,r.child,null,c),r=py(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function eE(r,a,c){r.lanes|=a;var h=r.alternate;h!==null&&(h.lanes|=a),Dg(r.return,a,c)}function yy(r,a,c,h,g,y){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:g,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=c,T.tailMode=g,T.treeForkCount=y)}function tE(r,a,c){var h=a.pendingProps,g=h.revealOrder,y=h.tail;h=h.children;var T=kt.current,A=(T&2)!==0;if(A?(T=T&1|2,a.flags|=128):T&=1,pe(kt,T),fn(r,a,h,c),h=Ke?du:0,!A&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&eE(r,c,a);else if(r.tag===19)eE(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)r=c.alternate,r!==null&&of(r)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),yy(a,!1,g,c,y,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(r=g.alternate,r!==null&&of(r)===null){a.child=g;break}r=g.sibling,g.sibling=c,c=g,g=r}yy(a,!0,c,null,y,h);break;case"together":yy(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Ur(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),Ls|=a.lanes,(c&a.childLanes)===0)if(r!==null){if(fl(r,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,c=Vr(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=Vr(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function vy(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Zd(r)))}function Ck(r,a,c){switch(a.tag){case 3:Zt(a,a.stateNode.containerInfo),Cs(a,Ht,r.memoizedState.cache),Wa();break;case 27:case 5:Da(a);break;case 4:Zt(a,a.stateNode.containerInfo);break;case 10:Cs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,qg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Vs(a),a.flags|=128,null):(c&a.child.childLanes)!==0?J1(r,a,c):(Vs(a),r=Ur(r,a,c),r!==null?r.sibling:null);Vs(a);break;case 19:var g=(r.flags&128)!==0;if(h=(c&a.childLanes)!==0,h||(fl(r,a,c,!1),h=(c&a.childLanes)!==0),g){if(h)return tE(r,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),pe(kt,kt.current),h)break;return null;case 22:return a.lanes=0,K1(r,a,c,a.pendingProps);case 24:Cs(a,Ht,r.memoizedState.cache)}return Ur(r,a,c)}function nE(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps)$t=!0;else{if(!vy(r,c)&&(a.flags&128)===0)return $t=!1,Ck(r,a,c);$t=(r.flags&131072)!==0}else $t=!1,Ke&&(a.flags&1048576)!==0&&MT(a,du,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(r=to(a.elementType),a.type=r,typeof r=="function")wg(r)?(h=so(r,h),a.tag=1,a=W1(null,a,r,h,c)):(a.tag=0,a=hy(null,a,r,h,c));else{if(r!=null){var g=r.$$typeof;if(g===Y){a.tag=11,a=H1(null,a,r,h,c);break e}else if(g===x){a.tag=14,a=G1(null,a,r,h,c);break e}}throw a=Ne(r)||r,Error(i(306,a,""))}}return a;case 0:return hy(r,a,a.type,a.pendingProps,c);case 1:return h=a.type,g=so(h,a.pendingProps),W1(r,a,h,g,c);case 3:e:{if(Zt(a,a.stateNode.containerInfo),r===null)throw Error(i(387));h=a.pendingProps;var y=a.memoizedState;g=y.element,jg(r,a),bu(a,h,null,c);var T=a.memoizedState;if(h=T.cache,Cs(a,Ht,h),h!==y.cache&&kg(a,[Ht],c,!0),_u(),h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Z1(r,a,h,c);break e}else if(h!==g){g=ui(Error(i(424)),a),fu(g),a=Z1(r,a,h,c);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(gt=pi(r.firstChild),hn=a,Ke=!0,Is=null,fi=!0,c=KT(a,null,h,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Wa(),h===g){a=Ur(r,a,c);break e}fn(r,a,h,c)}a=a.child}return a;case 26:return vf(r,a),r===null?(c=fw(a.type,null,a.pendingProps,null))?a.memoizedState=c:Ke||(c=a.type,r=a.pendingProps,h=Pf(je.current).createElement(c),h[Bt]=a,h[sn]=r,mn(h,c,r),Ft(h),a.stateNode=h):a.memoizedState=fw(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Da(a),r===null&&Ke&&(h=a.stateNode=uw(a.type,a.pendingProps,je.current),hn=a,fi=!0,g=gt,Fs(a.type)?(Wy=g,gt=pi(h.firstChild)):gt=g),fn(r,a,a.pendingProps.children,c),vf(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Ke&&((g=h=gt)&&(h=sV(h,a.type,a.pendingProps,fi),h!==null?(a.stateNode=h,hn=a,gt=pi(h.firstChild),fi=!1,g=!0):g=!1),g||Rs(a)),Da(a),g=a.type,y=a.pendingProps,T=r!==null?r.memoizedProps:null,h=y.children,$y(g,y)?h=null:T!==null&&$y(g,T)&&(a.flags|=32),a.memoizedState!==null&&(g=Gg(r,a,bk,null,null,c),zu._currentValue=g),vf(r,a),fn(r,a,h,c),a.child;case 6:return r===null&&Ke&&((r=c=gt)&&(c=aV(c,a.pendingProps,fi),c!==null?(a.stateNode=c,hn=a,gt=null,r=!0):r=!1),r||Rs(a)),null;case 13:return J1(r,a,c);case 4:return Zt(a,a.stateNode.containerInfo),h=a.pendingProps,r===null?a.child=io(a,null,h,c):fn(r,a,h,c),a.child;case 11:return H1(r,a,a.type,a.pendingProps,c);case 7:return fn(r,a,a.pendingProps,c),a.child;case 8:return fn(r,a,a.pendingProps.children,c),a.child;case 12:return fn(r,a,a.pendingProps.children,c),a.child;case 10:return h=a.pendingProps,Cs(a,a.type,h.value),fn(r,a,h.children,c),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,Ja(a),g=dn(g),h=h(g),a.flags|=1,fn(r,a,h,c),a.child;case 14:return G1(r,a,a.type,a.pendingProps,c);case 15:return $1(r,a,a.type,a.pendingProps,c);case 19:return tE(r,a,c);case 31:return Rk(r,a,c);case 22:return K1(r,a,c,a.pendingProps);case 24:return Ja(a),h=dn(Ht),r===null?(g=Pg(),g===null&&(g=ft,y=Vg(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),a.memoizedState={parent:h,cache:g},Lg(a),Cs(a,Ht,g)):((r.lanes&c)!==0&&(jg(r,a),bu(a,null,null,c),_u()),g=r.memoizedState,y=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Cs(a,Ht,h)):(h=y.cache,Cs(a,Ht,h),h!==g.cache&&kg(a,[Ht],c,!0))),fn(r,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function zr(r){r.flags|=4}function _y(r,a,c,h,g){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(g&335544128)===g)if(r.stateNode.complete)r.flags|=8192;else if(CE())r.flags|=8192;else throw no=nf,Og}else r.flags&=-16777217}function iE(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!vw(a))if(CE())r.flags|=8192;else throw no=nf,Og}function bf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?xd():536870912,r.lanes|=a,xl|=a)}function Au(r,a){if(!Ke)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function yt(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(a)for(var g=r.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=h,r.childLanes=c,a}function Nk(r,a,c){var h=a.pendingProps;switch(Ig(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(a),null;case 1:return yt(a),null;case 3:return c=a.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Or(Ht),vt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(dl(a)?zr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Cg())),yt(a),null;case 26:var g=a.type,y=a.memoizedState;return r===null?(zr(a),y!==null?(yt(a),iE(a,y)):(yt(a),_y(a,g,null,h,c))):y?y!==r.memoizedState?(zr(a),yt(a),iE(a,y)):(yt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==h&&zr(a),yt(a),_y(a,g,r,h,c)),null;case 27:if(Ho(a),c=je.current,g=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==h&&zr(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return yt(a),null}r=ge.current,dl(a)?OT(a):(r=uw(g,h,c),a.stateNode=r,zr(a))}return yt(a),null;case 5:if(Ho(a),g=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==h&&zr(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return yt(a),null}if(y=ge.current,dl(a))OT(a);else{var T=Pf(je.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?T.createElement(g,{is:h.is}):T.createElement(g)}}y[Bt]=a,y[sn]=h;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;e:switch(mn(y,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&zr(a)}}return yt(a),_y(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,c),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==h&&zr(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(r=je.current,dl(a)){if(r=a.stateNode,c=a.memoizedProps,h=null,g=hn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}r[Bt]=a,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||JE(r.nodeValue,c)),r||Rs(a,!0)}else r=Pf(r).createTextNode(h),r[Bt]=a,a.stateNode=r}return yt(a),null;case 31:if(c=a.memoizedState,r===null||r.memoizedState!==null){if(h=dl(a),c!==null){if(r===null){if(!h)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Bt]=a}else Wa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yt(a),r=!1}else c=Cg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return a.flags&256?(Xn(a),a):(Xn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return yt(a),null;case 13:if(h=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=dl(a),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Bt]=a}else Wa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yt(a),g=!1}else g=Cg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Xn(a),a):(Xn(a),null)}return Xn(a),(a.flags&128)!==0?(a.lanes=c,a):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==g&&(h.flags|=2048)),c!==r&&c&&(a.child.flags|=8192),bf(a,a.updateQueue),yt(a),null);case 4:return vt(),r===null&&By(a.stateNode.containerInfo),yt(a),null;case 10:return Or(a.type),yt(a),null;case 19:if(se(kt),h=a.memoizedState,h===null)return yt(a),null;if(g=(a.flags&128)!==0,y=h.rendering,y===null)if(g)Au(h,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=of(r),y!==null){for(a.flags|=128,Au(h,!1),r=y.updateQueue,a.updateQueue=r,bf(a,r),a.subtreeFlags=0,r=c,c=a.child;c!==null;)DT(c,r),c=c.sibling;return pe(kt,kt.current&1|2),Ke&&Mr(a,h.treeForkCount),a.child}r=r.sibling}h.tail!==null&&In()>xf&&(a.flags|=128,g=!0,Au(h,!1),a.lanes=4194304)}else{if(!g)if(r=of(y),r!==null){if(a.flags|=128,g=!0,r=r.updateQueue,a.updateQueue=r,bf(a,r),Au(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!Ke)return yt(a),null}else 2*In()-h.renderingStartTime>xf&&c!==536870912&&(a.flags|=128,g=!0,Au(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(r=h.last,r!==null?r.sibling=y:a.child=y,h.last=y)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=In(),r.sibling=null,c=kt.current,pe(kt,g?c&1|2:c&1),Ke&&Mr(a,h.treeForkCount),r):(yt(a),null);case 22:case 23:return Xn(a),Fg(),h=a.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(c&536870912)!==0&&(a.flags&128)===0&&(yt(a),a.subtreeFlags&6&&(a.flags|=8192)):yt(a),c=a.updateQueue,c!==null&&bf(a,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==c&&(a.flags|=2048),r!==null&&se(eo),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Or(Ht),yt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Dk(r,a){switch(Ig(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Or(Ht),vt(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Ho(a),null;case 31:if(a.memoizedState!==null){if(Xn(a),a.alternate===null)throw Error(i(340));Wa()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Xn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Wa()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return se(kt),null;case 4:return vt(),null;case 10:return Or(a.type),null;case 22:case 23:return Xn(a),Fg(),r!==null&&se(eo),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Or(Ht),null;case 25:return null;default:return null}}function rE(r,a){switch(Ig(a),a.tag){case 3:Or(Ht),vt();break;case 26:case 27:case 5:Ho(a);break;case 4:vt();break;case 31:a.memoizedState!==null&&Xn(a);break;case 13:Xn(a);break;case 19:se(kt);break;case 10:Or(a.type);break;case 22:case 23:Xn(a),Fg(),r!==null&&se(eo);break;case 24:Or(Ht)}}function Iu(r,a){try{var c=a.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&r)===r){h=void 0;var y=c.create,T=c.inst;h=y(),T.destroy=h}c=c.next}while(c!==g)}}catch(A){at(a,a.return,A)}}function Ps(r,a,c){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var y=g.next;h=y;do{if((h.tag&r)===r){var T=h.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,g=a;var U=c,X=A;try{X()}catch(ne){at(g,U,ne)}}}h=h.next}while(h!==y)}}catch(ne){at(a,a.return,ne)}}function sE(r){var a=r.updateQueue;if(a!==null){var c=r.stateNode;try{QT(a,c)}catch(h){at(r,r.return,h)}}}function aE(r,a,c){c.props=so(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){at(r,a,h)}}function Ru(r,a){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(g){at(r,a,g)}}function ur(r,a){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(g){at(r,a,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){at(r,a,g)}else c.current=null}function oE(r){var a=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(g){at(r,r.return,g)}}function by(r,a,c){try{var h=r.stateNode;Jk(h,r.type,c,a),h[sn]=a}catch(g){at(r,r.return,g)}}function lE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Fs(r.type)||r.tag===4}function Ty(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||lE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Fs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ey(r,a,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(r),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Ni));else if(h!==4&&(h===27&&Fs(r.type)&&(c=r.stateNode,a=null),r=r.child,r!==null))for(Ey(r,a,c),r=r.sibling;r!==null;)Ey(r,a,c),r=r.sibling}function Tf(r,a,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(h!==4&&(h===27&&Fs(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Tf(r,a,c),r=r.sibling;r!==null;)Tf(r,a,c),r=r.sibling}function cE(r){var a=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);mn(a,h,c),a[Bt]=r,a[sn]=c}catch(y){at(r,r.return,y)}}var Br=!1,Kt=!1,wy=!1,uE=typeof WeakSet=="function"?WeakSet:Set,on=null;function kk(r,a){if(r=r.containerInfo,Hy=Ff,r=ET(r),gg(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var T=0,A=-1,U=-1,X=0,ne=0,oe=r,W=null;t:for(;;){for(var ee;oe!==c||g!==0&&oe.nodeType!==3||(A=T+g),oe!==y||h!==0&&oe.nodeType!==3||(U=T+h),oe.nodeType===3&&(T+=oe.nodeValue.length),(ee=oe.firstChild)!==null;)W=oe,oe=ee;for(;;){if(oe===r)break t;if(W===c&&++X===g&&(A=T),W===y&&++ne===h&&(U=T),(ee=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=ee}c=A===-1||U===-1?null:{start:A,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(Gy={focusedElem:r,selectionRange:c},Ff=!1,on=a;on!==null;)if(a=on,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,on=r;else for(;on!==null;){switch(a=on,y=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)g=r[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,c=a,g=y.memoizedProps,y=y.memoizedState,h=c.stateNode;try{var ve=so(c.type,g);r=h.getSnapshotBeforeUpdate(ve,y),h.__reactInternalSnapshotBeforeUpdate=r}catch(Ae){at(c,c.return,Ae)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,c=r.nodeType,c===9)Yy(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Yy(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,on=r;break}on=a.return}}function hE(r,a,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:qr(r,c),h&4&&Iu(5,c);break;case 1:if(qr(r,c),h&4)if(r=c.stateNode,a===null)try{r.componentDidMount()}catch(T){at(c,c.return,T)}else{var g=so(c.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(g,a,r.__reactInternalSnapshotBeforeUpdate)}catch(T){at(c,c.return,T)}}h&64&&sE(c),h&512&&Ru(c,c.return);break;case 3:if(qr(r,c),h&64&&(r=c.updateQueue,r!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{QT(r,a)}catch(T){at(c,c.return,T)}}break;case 27:a===null&&h&4&&cE(c);case 26:case 5:qr(r,c),a===null&&h&4&&oE(c),h&512&&Ru(c,c.return);break;case 12:qr(r,c);break;case 31:qr(r,c),h&4&&mE(r,c);break;case 13:qr(r,c),h&4&&pE(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=Bk.bind(null,c),oV(r,c))));break;case 22:if(h=c.memoizedState!==null||Br,!h){a=a!==null&&a.memoizedState!==null||Kt,g=Br;var y=Kt;Br=h,(Kt=a)&&!y?Hr(r,c,(c.subtreeFlags&8772)!==0):qr(r,c),Br=g,Kt=y}break;case 30:break;default:qr(r,c)}}function dE(r){var a=r.alternate;a!==null&&(r.alternate=null,dE(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Qo(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,On=!1;function Fr(r,a,c){for(c=c.child;c!==null;)fE(r,a,c),c=c.sibling}function fE(r,a,c){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Ai,c)}catch{}switch(c.tag){case 26:Kt||ur(c,a),Fr(r,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Kt||ur(c,a);var h=bt,g=On;Fs(c.type)&&(bt=c.stateNode,On=!1),Fr(r,a,c),Lu(c.stateNode),bt=h,On=g;break;case 5:Kt||ur(c,a);case 6:if(h=bt,g=On,bt=null,Fr(r,a,c),bt=h,On=g,bt!==null)if(On)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(c.stateNode)}catch(y){at(c,a,y)}else try{bt.removeChild(c.stateNode)}catch(y){at(c,a,y)}break;case 18:bt!==null&&(On?(r=bt,sw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Vl(r)):sw(bt,c.stateNode));break;case 4:h=bt,g=On,bt=c.stateNode.containerInfo,On=!0,Fr(r,a,c),bt=h,On=g;break;case 0:case 11:case 14:case 15:Ps(2,c,a),Kt||Ps(4,c,a),Fr(r,a,c);break;case 1:Kt||(ur(c,a),h=c.stateNode,typeof h.componentWillUnmount=="function"&&aE(c,a,h)),Fr(r,a,c);break;case 21:Fr(r,a,c);break;case 22:Kt=(h=Kt)||c.memoizedState!==null,Fr(r,a,c),Kt=h;break;default:Fr(r,a,c)}}function mE(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Vl(r)}catch(c){at(a,a.return,c)}}}function pE(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Vl(r)}catch(c){at(a,a.return,c)}}function Vk(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new uE),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new uE),a;default:throw Error(i(435,r.tag))}}function Ef(r,a){var c=Vk(r);a.forEach(function(h){if(!c.has(h)){c.add(h);var g=Fk.bind(null,r,h);h.then(g,g)}})}function Ln(r,a){var c=a.deletions;if(c!==null)for(var h=0;h<c.length;h++){var g=c[h],y=r,T=a,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(Fs(A.type)){bt=A.stateNode,On=!1;break e}break;case 5:bt=A.stateNode,On=!1;break e;case 3:case 4:bt=A.stateNode.containerInfo,On=!0;break e}A=A.return}if(bt===null)throw Error(i(160));fE(y,T,g),bt=null,On=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)gE(a,r),a=a.sibling}var Oi=null;function gE(r,a){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ln(a,r),jn(r),h&4&&(Ps(3,r,r.return),Iu(3,r),Ps(5,r,r.return));break;case 1:Ln(a,r),jn(r),h&512&&(Kt||c===null||ur(c,c.return)),h&64&&Br&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var g=Oi;if(Ln(a,r),jn(r),h&512&&(Kt||c===null||ur(c,c.return)),h&4){var y=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Xi]||y[Bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(h),g.head.insertBefore(y,g.querySelector("head > title"))),mn(y,h,c),y[Bt]=r,Ft(y),h=y;break e;case"link":var T=gw("link","href",g).get(h+(c.href||""));if(T){for(var A=0;A<T.length;A++)if(y=T[A],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(A,1);break t}}y=g.createElement(h),mn(y,h,c),g.head.appendChild(y);break;case"meta":if(T=gw("meta","content",g).get(h+(c.content||""))){for(A=0;A<T.length;A++)if(y=T[A],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(A,1);break t}}y=g.createElement(h),mn(y,h,c),g.head.appendChild(y);break;default:throw Error(i(468,h))}y[Bt]=r,Ft(y),h=y}r.stateNode=h}else yw(g,r.type,r.stateNode);else r.stateNode=pw(g,h,r.memoizedProps);else y!==h?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,h===null?yw(g,r.type,r.stateNode):pw(g,h,r.memoizedProps)):h===null&&r.stateNode!==null&&by(r,r.memoizedProps,c.memoizedProps)}break;case 27:Ln(a,r),jn(r),h&512&&(Kt||c===null||ur(c,c.return)),c!==null&&h&4&&by(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Ln(a,r),jn(r),h&512&&(Kt||c===null||ur(c,c.return)),r.flags&32){g=r.stateNode;try{Pn(g,"")}catch(ve){at(r,r.return,ve)}}h&4&&r.stateNode!=null&&(g=r.memoizedProps,by(r,g,c!==null?c.memoizedProps:g)),h&1024&&(wy=!0);break;case 6:if(Ln(a,r),jn(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(ve){at(r,r.return,ve)}}break;case 3:if(jf=null,g=Oi,Oi=Of(a.containerInfo),Ln(a,r),Oi=g,jn(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Vl(a.containerInfo)}catch(ve){at(r,r.return,ve)}wy&&(wy=!1,yE(r));break;case 4:h=Oi,Oi=Of(r.stateNode.containerInfo),Ln(a,r),jn(r),Oi=h;break;case 12:Ln(a,r),jn(r);break;case 31:Ln(a,r),jn(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Ef(r,h)));break;case 13:Ln(a,r),jn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Sf=In()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Ef(r,h)));break;case 22:g=r.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,X=Br,ne=Kt;if(Br=X||g,Kt=ne||U,Ln(a,r),Kt=ne,Br=X,jn(r),h&8192)e:for(a=r.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||U||Br||Kt||ao(r)),c=null,a=r;;){if(a.tag===5||a.tag===26){if(c===null){U=c=a;try{if(y=U.stateNode,g)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=U.stateNode;var oe=U.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;A.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(ve){at(U,U.return,ve)}}}else if(a.tag===6){if(c===null){U=a;try{U.stateNode.nodeValue=g?"":U.memoizedProps}catch(ve){at(U,U.return,ve)}}}else if(a.tag===18){if(c===null){U=a;try{var ee=U.stateNode;g?aw(ee,!0):aw(U.stateNode,!1)}catch(ve){at(U,U.return,ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Ef(r,c))));break;case 19:Ln(a,r),jn(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Ef(r,h)));break;case 30:break;case 21:break;default:Ln(a,r),jn(r)}}function jn(r){var a=r.flags;if(a&2){try{for(var c,h=r.return;h!==null;){if(lE(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var g=c.stateNode,y=Ty(r);Tf(r,y,g);break;case 5:var T=c.stateNode;c.flags&32&&(Pn(T,""),c.flags&=-33);var A=Ty(r);Tf(r,A,T);break;case 3:case 4:var U=c.stateNode.containerInfo,X=Ty(r);Ey(r,X,U);break;default:throw Error(i(161))}}catch(ne){at(r,r.return,ne)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function yE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;yE(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function qr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)hE(r,a.alternate,a),a=a.sibling}function ao(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Ps(4,a,a.return),ao(a);break;case 1:ur(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&aE(a,a.return,c),ao(a);break;case 27:Lu(a.stateNode);case 26:case 5:ur(a,a.return),ao(a);break;case 22:a.memoizedState===null&&ao(a);break;case 30:ao(a);break;default:ao(a)}r=r.sibling}}function Hr(r,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=r,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:Hr(g,y,c),Iu(4,y);break;case 1:if(Hr(g,y,c),h=y,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(X){at(h,h.return,X)}if(h=y,g=h.updateQueue,g!==null){var A=h.stateNode;try{var U=g.shared.hiddenCallbacks;if(U!==null)for(g.shared.hiddenCallbacks=null,g=0;g<U.length;g++)YT(U[g],A)}catch(X){at(h,h.return,X)}}c&&T&64&&sE(y),Ru(y,y.return);break;case 27:cE(y);case 26:case 5:Hr(g,y,c),c&&h===null&&T&4&&oE(y),Ru(y,y.return);break;case 12:Hr(g,y,c);break;case 31:Hr(g,y,c),c&&T&4&&mE(g,y);break;case 13:Hr(g,y,c),c&&T&4&&pE(g,y);break;case 22:y.memoizedState===null&&Hr(g,y,c),Ru(y,y.return);break;case 30:break;default:Hr(g,y,c)}a=a.sibling}}function Sy(r,a){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&mu(c))}function xy(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&mu(r))}function Li(r,a,c,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)vE(r,a,c,h),a=a.sibling}function vE(r,a,c,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Li(r,a,c,h),g&2048&&Iu(9,a);break;case 1:Li(r,a,c,h);break;case 3:Li(r,a,c,h),g&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&mu(r)));break;case 12:if(g&2048){Li(r,a,c,h),r=a.stateNode;try{var y=a.memoizedProps,T=y.id,A=y.onPostCommit;typeof A=="function"&&A(T,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(U){at(a,a.return,U)}}else Li(r,a,c,h);break;case 31:Li(r,a,c,h);break;case 13:Li(r,a,c,h);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?Li(r,a,c,h):Cu(r,a):y._visibility&2?Li(r,a,c,h):(y._visibility|=2,El(r,a,c,h,(a.subtreeFlags&10256)!==0||!1)),g&2048&&Sy(T,a);break;case 24:Li(r,a,c,h),g&2048&&xy(a.alternate,a);break;default:Li(r,a,c,h)}}function El(r,a,c,h,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=r,T=a,A=c,U=h,X=T.flags;switch(T.tag){case 0:case 11:case 15:El(y,T,A,U,g),Iu(8,T);break;case 23:break;case 22:var ne=T.stateNode;T.memoizedState!==null?ne._visibility&2?El(y,T,A,U,g):Cu(y,T):(ne._visibility|=2,El(y,T,A,U,g)),g&&X&2048&&Sy(T.alternate,T);break;case 24:El(y,T,A,U,g),g&&X&2048&&xy(T.alternate,T);break;default:El(y,T,A,U,g)}a=a.sibling}}function Cu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=r,h=a,g=h.flags;switch(h.tag){case 22:Cu(c,h),g&2048&&Sy(h.alternate,h);break;case 24:Cu(c,h),g&2048&&xy(h.alternate,h);break;default:Cu(c,h)}a=a.sibling}}var Nu=8192;function wl(r,a,c){if(r.subtreeFlags&Nu)for(r=r.child;r!==null;)_E(r,a,c),r=r.sibling}function _E(r,a,c){switch(r.tag){case 26:wl(r,a,c),r.flags&Nu&&r.memoizedState!==null&&_V(c,Oi,r.memoizedState,r.memoizedProps);break;case 5:wl(r,a,c);break;case 3:case 4:var h=Oi;Oi=Of(r.stateNode.containerInfo),wl(r,a,c),Oi=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=Nu,Nu=16777216,wl(r,a,c),Nu=h):wl(r,a,c));break;default:wl(r,a,c)}}function bE(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Du(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];on=h,EE(h,r)}bE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)TE(r),r=r.sibling}function TE(r){switch(r.tag){case 0:case 11:case 15:Du(r),r.flags&2048&&Ps(9,r,r.return);break;case 3:Du(r);break;case 12:Du(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,wf(r)):Du(r);break;default:Du(r)}}function wf(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];on=h,EE(h,r)}bE(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Ps(8,a,a.return),wf(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,wf(a));break;default:wf(a)}r=r.sibling}}function EE(r,a){for(;on!==null;){var c=on;switch(c.tag){case 0:case 11:case 15:Ps(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:mu(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,on=h;else e:for(c=r;on!==null;){h=on;var g=h.sibling,y=h.return;if(dE(h),h===c){on=null;break e}if(g!==null){g.return=y,on=g;break e}on=y}}}var Mk={getCacheForType:function(r){var a=dn(Ht),c=a.data.get(r);return c===void 0&&(c=r(),a.data.set(r,c)),c},cacheSignal:function(){return dn(Ht).controller.signal}},Pk=typeof WeakMap=="function"?WeakMap:Map,nt=0,ft=null,Be=null,qe=0,st=0,Wn=null,Os=!1,Sl=!1,Ay=!1,Gr=0,It=0,Ls=0,oo=0,Iy=0,Zn=0,xl=0,ku=null,Un=null,Ry=!1,Sf=0,wE=0,xf=1/0,Af=null,js=null,en=0,Us=null,Al=null,$r=0,Cy=0,Ny=null,SE=null,Vu=0,Dy=null;function Jn(){return(nt&2)!==0&&qe!==0?qe&-qe:H.T!==null?Ly():Ad()}function xE(){if(Zn===0)if((qe&536870912)===0||Ke){var r=Ma;Ma<<=1,(Ma&3932160)===0&&(Ma=262144),Zn=r}else Zn=536870912;return r=Qn.current,r!==null&&(r.flags|=32),Zn}function zn(r,a,c){(r===ft&&(st===2||st===9)||r.cancelPendingCommit!==null)&&(Il(r,0),zs(r,qe,Zn,!1)),Pa(r,c),((nt&2)===0||r!==ft)&&(r===ft&&((nt&2)===0&&(oo|=c),It===4&&zs(r,qe,Zn,!1)),hr(r))}function AE(r,a,c){if((nt&6)!==0)throw Error(i(327));var h=!c&&(a&127)===0&&(a&r.expiredLanes)===0||Ii(r,a),g=h?jk(r,a):Vy(r,a,!0),y=h;do{if(g===0){Sl&&!h&&zs(r,a,0,!1);break}else{if(c=r.current.alternate,y&&!Ok(c)){g=Vy(r,a,!1),y=!1;continue}if(g===2){if(y=a,r.errorRecoveryDisabledLanes&y)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var A=r;g=ku;var U=A.current.memoizedState.isDehydrated;if(U&&(Il(A,T).flags|=256),T=Vy(A,T,!1),T!==2){if(Ay&&!U){A.errorRecoveryDisabledLanes|=y,oo|=y,g=4;break e}y=Un,Un=g,y!==null&&(Un===null?Un=y:Un.push.apply(Un,y))}g=T}if(y=!1,g!==2)continue}}if(g===1){Il(r,0),zs(r,a,0,!0);break}e:{switch(h=r,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:zs(h,a,Zn,!Os);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(g=Sf+300-In(),10<g)){if(zs(h,a,Zn,!Os),Ki(h,0,!0)!==0)break e;$r=a,h.timeoutHandle=iw(IE.bind(null,h,c,Un,Af,Ry,a,Zn,oo,xl,Os,y,"Throttled",-0,0),g);break e}IE(h,c,Un,Af,Ry,a,Zn,oo,xl,Os,y,null,-0,0)}}break}while(!0);hr(r)}function IE(r,a,c,h,g,y,T,A,U,X,ne,oe,W,ee){if(r.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ni},_E(a,y,oe);var ve=(y&62914560)===y?Sf-In():(y&4194048)===y?wE-In():0;if(ve=bV(oe,ve),ve!==null){$r=y,r.cancelPendingCommit=ve(PE.bind(null,r,a,y,c,h,g,T,A,U,ne,oe,null,W,ee)),zs(r,y,T,!X);return}}PE(r,a,y,c,h,g,T,A,U)}function Ok(r){for(var a=r;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var g=c[h],y=g.getSnapshot;g=g.value;try{if(!Kn(y(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function zs(r,a,c,h){a&=~Iy,a&=~oo,r.suspendedLanes|=a,r.pingedLanes&=~a,h&&(r.warmLanes|=a),h=r.expirationTimes;for(var g=a;0<g;){var y=31-Nt(g),T=1<<y;h[y]=-1,g&=~T}c!==0&&Oa(r,c,a)}function If(){return(nt&6)===0?(Mu(0),!1):!0}function ky(){if(Be!==null){if(st===0)var r=Be.return;else r=Be,Pr=Za=null,Yg(r),yl=null,gu=0,r=Be;for(;r!==null;)rE(r.alternate,r),r=r.return;Be=null}}function Il(r,a){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,nV(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),$r=0,ky(),ft=r,Be=c=Vr(r.current,null),qe=a,st=0,Wn=null,Os=!1,Sl=Ii(r,a),Ay=!1,xl=Zn=Iy=oo=Ls=It=0,Un=ku=null,Ry=!1,(a&8)!==0&&(a|=a&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=a;0<h;){var g=31-Nt(h),y=1<<g;a|=r[g],h&=~y}return Gr=a,Kd(),c}function RE(r,a){Le=null,H.H=Su,a===gl||a===tf?(a=HT(),st=3):a===Og?(a=HT(),st=4):st=a===uy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Wn=a,Be===null&&(It=1,gf(r,ui(a,r.current)))}function CE(){var r=Qn.current;return r===null?!0:(qe&4194048)===qe?mi===null:(qe&62914560)===qe||(qe&536870912)!==0?r===mi:!1}function NE(){var r=H.H;return H.H=Su,r===null?Su:r}function DE(){var r=H.A;return H.A=Mk,r}function Rf(){It=4,Os||(qe&4194048)!==qe&&Qn.current!==null||(Sl=!0),(Ls&134217727)===0&&(oo&134217727)===0||ft===null||zs(ft,qe,Zn,!1)}function Vy(r,a,c){var h=nt;nt|=2;var g=NE(),y=DE();(ft!==r||qe!==a)&&(Af=null,Il(r,a)),a=!1;var T=It;e:do try{if(st!==0&&Be!==null){var A=Be,U=Wn;switch(st){case 8:ky(),T=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(a=!0);var X=st;if(st=0,Wn=null,Rl(r,A,U,X),c&&Sl){T=0;break e}break;default:X=st,st=0,Wn=null,Rl(r,A,U,X)}}Lk(),T=It;break}catch(ne){RE(r,ne)}while(!0);return a&&r.shellSuspendCounter++,Pr=Za=null,nt=h,H.H=g,H.A=y,Be===null&&(ft=null,qe=0,Kd()),T}function Lk(){for(;Be!==null;)kE(Be)}function jk(r,a){var c=nt;nt|=2;var h=NE(),g=DE();ft!==r||qe!==a?(Af=null,xf=In()+500,Il(r,a)):Sl=Ii(r,a);e:do try{if(st!==0&&Be!==null){a=Be;var y=Wn;t:switch(st){case 1:st=0,Wn=null,Rl(r,a,y,1);break;case 2:case 9:if(FT(y)){st=0,Wn=null,VE(a);break}a=function(){st!==2&&st!==9||ft!==r||(st=7),hr(r)},y.then(a,a);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:FT(y)?(st=0,Wn=null,VE(a)):(st=0,Wn=null,Rl(r,a,y,7));break;case 5:var T=null;switch(Be.tag){case 26:T=Be.memoizedState;case 5:case 27:var A=Be;if(T?vw(T):A.stateNode.complete){st=0,Wn=null;var U=A.sibling;if(U!==null)Be=U;else{var X=A.return;X!==null?(Be=X,Cf(X)):Be=null}break t}}st=0,Wn=null,Rl(r,a,y,5);break;case 6:st=0,Wn=null,Rl(r,a,y,6);break;case 8:ky(),It=6;break e;default:throw Error(i(462))}}Uk();break}catch(ne){RE(r,ne)}while(!0);return Pr=Za=null,H.H=h,H.A=g,nt=c,Be!==null?0:(ft=null,qe=0,Kd(),It)}function Uk(){for(;Be!==null&&!cg();)kE(Be)}function kE(r){var a=nE(r.alternate,r,Gr);r.memoizedProps=r.pendingProps,a===null?Cf(r):Be=a}function VE(r){var a=r,c=a.alternate;switch(a.tag){case 15:case 0:a=X1(c,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=X1(c,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:Yg(a);default:rE(c,a),a=Be=DT(a,Gr),a=nE(c,a,Gr)}r.memoizedProps=r.pendingProps,a===null?Cf(r):Be=a}function Rl(r,a,c,h){Pr=Za=null,Yg(a),yl=null,gu=0;var g=a.return;try{if(Ik(r,g,a,c,qe)){It=1,gf(r,ui(c,r.current)),Be=null;return}}catch(y){if(g!==null)throw Be=g,y;It=1,gf(r,ui(c,r.current)),Be=null;return}a.flags&32768?(Ke||h===1?r=!0:Sl||(qe&536870912)!==0?r=!1:(Os=r=!0,(h===2||h===9||h===3||h===6)&&(h=Qn.current,h!==null&&h.tag===13&&(h.flags|=16384))),ME(a,r)):Cf(a)}function Cf(r){var a=r;do{if((a.flags&32768)!==0){ME(a,Os);return}r=a.return;var c=Nk(a.alternate,a,Gr);if(c!==null){Be=c;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=r}while(a!==null);It===0&&(It=5)}function ME(r,a){do{var c=Dk(r.alternate,r);if(c!==null){c.flags&=32767,Be=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(r=r.sibling,r!==null)){Be=r;return}Be=r=c}while(r!==null);It=6,Be=null}function PE(r,a,c,h,g,y,T,A,U){r.cancelPendingCommit=null;do Nf();while(en!==0);if((nt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=Tg,dg(r,c,y,T,A,U),r===ft&&(Be=ft=null,qe=0),Al=a,Us=r,$r=c,Cy=y,Ny=g,SE=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,qk(gs,function(){return zE(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,g=re.p,re.p=2,T=nt,nt|=4;try{kk(r,a,c)}finally{nt=T,re.p=g,H.T=h}}en=1,OE(),LE(),jE()}}function OE(){if(en===1){en=0;var r=Us,a=Al,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=H.T,H.T=null;var h=re.p;re.p=2;var g=nt;nt|=4;try{gE(a,r);var y=Gy,T=ET(r.containerInfo),A=y.focusedElem,U=y.selectionRange;if(T!==A&&A&&A.ownerDocument&&TT(A.ownerDocument.documentElement,A)){if(U!==null&&gg(A)){var X=U.start,ne=U.end;if(ne===void 0&&(ne=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(ne,A.value.length);else{var oe=A.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var ee=W.getSelection(),ve=A.textContent.length,Ae=Math.min(U.start,ve),dt=U.end===void 0?Ae:Math.min(U.end,ve);!ee.extend&&Ae>dt&&(T=dt,dt=Ae,Ae=T);var G=bT(A,Ae),q=bT(A,dt);if(G&&q&&(ee.rangeCount!==1||ee.anchorNode!==G.node||ee.anchorOffset!==G.offset||ee.focusNode!==q.node||ee.focusOffset!==q.offset)){var Q=oe.createRange();Q.setStart(G.node,G.offset),ee.removeAllRanges(),Ae>dt?(ee.addRange(Q),ee.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),ee.addRange(Q))}}}}for(oe=[],ee=A;ee=ee.parentNode;)ee.nodeType===1&&oe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<oe.length;A++){var ae=oe[A];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Ff=!!Hy,Gy=Hy=null}finally{nt=g,re.p=h,H.T=c}}r.current=a,en=2}}function LE(){if(en===2){en=0;var r=Us,a=Al,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=H.T,H.T=null;var h=re.p;re.p=2;var g=nt;nt|=4;try{hE(r,a.alternate,a)}finally{nt=g,re.p=h,H.T=c}}en=3}}function jE(){if(en===4||en===3){en=0,_d();var r=Us,a=Al,c=$r,h=SE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?en=5:(en=0,Al=Us=null,UE(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(js=null),Cr(c),a=a.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Ai,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=H.T,g=re.p,re.p=2,H.T=null;try{for(var y=r.onRecoverableError,T=0;T<h.length;T++){var A=h[T];y(A.value,{componentStack:A.stack})}}finally{H.T=a,re.p=g}}($r&3)!==0&&Nf(),hr(r),g=r.pendingLanes,(c&261930)!==0&&(g&42)!==0?r===Dy?Vu++:(Vu=0,Dy=r):Vu=0,Mu(0)}}function UE(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,mu(a)))}function Nf(){return OE(),LE(),jE(),zE()}function zE(){if(en!==5)return!1;var r=Us,a=Cy;Cy=0;var c=Cr($r),h=H.T,g=re.p;try{re.p=32>c?32:c,H.T=null,c=Ny,Ny=null;var y=Us,T=$r;if(en=0,Al=Us=null,$r=0,(nt&6)!==0)throw Error(i(331));var A=nt;if(nt|=4,TE(y.current),vE(y,y.current,T,c),nt=A,Mu(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Ai,y)}catch{}return!0}finally{re.p=g,H.T=h,UE(r,a)}}function BE(r,a,c){a=ui(c,a),a=cy(r.stateNode,a,2),r=ks(r,a,2),r!==null&&(Pa(r,2),hr(r))}function at(r,a,c){if(r.tag===3)BE(r,r,c);else for(;a!==null;){if(a.tag===3){BE(a,r,c);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(js===null||!js.has(h))){r=ui(c,r),c=F1(2),h=ks(a,c,2),h!==null&&(q1(c,h,a,r),Pa(h,2),hr(h));break}}a=a.return}}function My(r,a,c){var h=r.pingCache;if(h===null){h=r.pingCache=new Pk;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(c)||(Ay=!0,g.add(c),r=zk.bind(null,r,a,c),a.then(r,r))}function zk(r,a,c){var h=r.pingCache;h!==null&&h.delete(a),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,ft===r&&(qe&c)===c&&(It===4||It===3&&(qe&62914560)===qe&&300>In()-Sf?(nt&2)===0&&Il(r,0):Iy|=c,xl===qe&&(xl=0)),hr(r)}function FE(r,a){a===0&&(a=xd()),r=Qa(r,a),r!==null&&(Pa(r,a),hr(r))}function Bk(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),FE(r,c)}function Fk(r,a){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,g=r.memoizedState;g!==null&&(c=g.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),FE(r,c)}function qk(r,a){return Jt(r,a)}var Df=null,Cl=null,Py=!1,kf=!1,Oy=!1,Bs=0;function hr(r){r!==Cl&&r.next===null&&(Cl===null?Df=Cl=r:Cl=Cl.next=r),kf=!0,Py||(Py=!0,Gk())}function Mu(r,a){if(!Oy&&kf){Oy=!0;do for(var c=!1,h=Df;h!==null;){if(r!==0){var g=h.pendingLanes;if(g===0)var y=0;else{var T=h.suspendedLanes,A=h.pingedLanes;y=(1<<31-Nt(42|r)+1)-1,y&=g&~(T&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,$E(h,y))}else y=qe,y=Ki(h,h===ft?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||Ii(h,y)||(c=!0,$E(h,y));h=h.next}while(c);Oy=!1}}function Hk(){qE()}function qE(){kf=Py=!1;var r=0;Bs!==0&&tV()&&(r=Bs);for(var a=In(),c=null,h=Df;h!==null;){var g=h.next,y=HE(h,a);y===0?(h.next=null,c===null?Df=g:c.next=g,g===null&&(Cl=c)):(c=h,(r!==0||(y&3)!==0)&&(kf=!0)),h=g}en!==0&&en!==5||Mu(r),Bs!==0&&(Bs=0)}function HE(r,a){for(var c=r.suspendedLanes,h=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var T=31-Nt(y),A=1<<T,U=g[T];U===-1?((A&c)===0||(A&h)!==0)&&(g[T]=hg(A,a)):U<=a&&(r.expiredLanes|=A),y&=~A}if(a=ft,c=qe,c=Ki(r,r===a?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===a&&(st===2||st===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&ps(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Ii(r,c)){if(a=c&-c,a===r.callbackPriority)return a;switch(h!==null&&ps(h),Cr(c)){case 2:case 8:c=Hc;break;case 32:c=gs;break;case 268435456:c=bd;break;default:c=gs}return h=GE.bind(null,r),c=Jt(c,h),r.callbackPriority=a,r.callbackNode=c,a}return h!==null&&h!==null&&ps(h),r.callbackPriority=2,r.callbackNode=null,2}function GE(r,a){if(en!==0&&en!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Nf()&&r.callbackNode!==c)return null;var h=qe;return h=Ki(r,r===ft?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(AE(r,h,a),HE(r,In()),r.callbackNode!=null&&r.callbackNode===c?GE.bind(null,r):null)}function $E(r,a){if(Nf())return null;AE(r,a,!0)}function Gk(){iV(function(){(nt&6)!==0?Jt(qc,Hk):qE()})}function Ly(){if(Bs===0){var r=ml;r===0&&(r=Gi,Gi<<=1,(Gi&261888)===0&&(Gi=256)),Bs=r}return Bs}function KE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Jo(""+r)}function YE(r,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,r.id&&c.setAttribute("form",r.id),a.parentNode.insertBefore(c,a),r=new FormData(r),c.parentNode.removeChild(c),r}function $k(r,a,c,h,g){if(a==="submit"&&c&&c.stateNode===g){var y=KE((g[sn]||null).action),T=h.submitter;T&&(a=(a=T[sn]||null)?KE(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var A=new rr("action","action",null,h,g);r.push({event:A,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Bs!==0){var U=T?YE(g,T):new FormData(g);iy(c,{pending:!0,data:U,method:g.method,action:y},null,U)}}else typeof y=="function"&&(A.preventDefault(),U=T?YE(g,T):new FormData(g),iy(c,{pending:!0,data:U,method:g.method,action:y},y,U))},currentTarget:g}]})}}for(var jy=0;jy<bg.length;jy++){var Uy=bg[jy],Kk=Uy.toLowerCase(),Yk=Uy[0].toUpperCase()+Uy.slice(1);Pi(Kk,"on"+Yk)}Pi(xT,"onAnimationEnd"),Pi(AT,"onAnimationIteration"),Pi(IT,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(uk,"onTransitionRun"),Pi(hk,"onTransitionStart"),Pi(dk,"onTransitionCancel"),Pi(RT,"onTransitionEnd"),er("onMouseEnter",["mouseout","mouseover"]),er("onMouseLeave",["mouseout","mouseover"]),er("onPointerEnter",["pointerout","pointerover"]),er("onPointerLeave",["pointerout","pointerover"]),Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function QE(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],g=h.event;h=h.listeners;e:{var y=void 0;if(a)for(var T=h.length-1;0<=T;T--){var A=h[T],U=A.instance,X=A.currentTarget;if(A=A.listener,U!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=X;try{y(g)}catch(ne){$d(ne)}g.currentTarget=null,y=U}else for(T=0;T<h.length;T++){if(A=h[T],U=A.instance,X=A.currentTarget,A=A.listener,U!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=X;try{y(g)}catch(ne){$d(ne)}g.currentTarget=null,y=U}}}}function Fe(r,a){var c=a[Yo];c===void 0&&(c=a[Yo]=new Set);var h=r+"__bubble";c.has(h)||(XE(a,r,2,!1),c.add(h))}function zy(r,a,c){var h=0;a&&(h|=4),XE(c,r,h,a)}var Vf="_reactListening"+Math.random().toString(36).slice(2);function By(r){if(!r[Vf]){r[Vf]=!0,Kc.forEach(function(c){c!=="selectionchange"&&(Qk.has(c)||zy(c,!1,r),zy(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Vf]||(a[Vf]=!0,zy("selectionchange",!1,a))}}function XE(r,a,c,h){switch(xw(a)){case 2:var g=wV;break;case 8:g=SV;break;default:g=n0}c=g.bind(null,a,c,r),g=void 0,!Ba||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?r.addEventListener(a,c,{capture:!0,passive:g}):r.addEventListener(a,c,!0):g!==void 0?r.addEventListener(a,c,{passive:g}):r.addEventListener(a,c,!1)}function Fy(r,a,c,h,g){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var A=h.stateNode.containerInfo;if(A===g)break;if(T===4)for(T=h.return;T!==null;){var U=T.tag;if((U===3||U===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;A!==null;){if(T=Wi(A),T===null)return;if(U=T.tag,U===5||U===6||U===26||U===27){h=y=T;continue e}A=A.parentNode}}h=h.return}Es(function(){var X=y,ne=ai(c),oe=[];e:{var W=CT.get(r);if(W!==void 0){var ee=rr,ve=r;switch(r){case"keypress":if(qa(c)===0)break e;case"keydown":case"keyup":ee=qd;break;case"focusin":ve="focus",ee=Ga;break;case"focusout":ve="blur",ee=Ga;break;case"beforeblur":case"afterblur":ee=Ga;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=b;break;case xT:case AT:case IT:ee=Od;break;case RT:ee=C;break;case"scroll":case"scrollend":ee=su;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=Ld;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=kr;break;case"toggle":case"beforetoggle":ee=Oe}var Ae=(a&4)!==0,dt=!Ae&&(r==="scroll"||r==="scrollend"),G=Ae?W!==null?W+"Capture":null:W;Ae=[];for(var q=X,Q;q!==null;){var ae=q;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||G===null||(ae=Di(q,G),ae!=null&&Ae.push(Ou(q,ae,Q))),dt)break;q=q.return}0<Ae.length&&(W=new ee(W,ve,null,c,ne),oe.push({event:W,listeners:Ae}))}}if((a&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",ee=r==="mouseout"||r==="pointerout",W&&c!==nu&&(ve=c.relatedTarget||c.fromElement)&&(Wi(ve)||ve[Qi]))break e;if((ee||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,ee?(ve=c.relatedTarget||c.toElement,ee=X,ve=ve?Wi(ve):null,ve!==null&&(dt=o(ve),Ae=ve.tag,ve!==dt||Ae!==5&&Ae!==27&&Ae!==6)&&(ve=null)):(ee=null,ve=X),ee!==ve)){if(Ae=au,ae="onMouseLeave",G="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ae=kr,ae="onPointerLeave",G="onPointerEnter",q="pointer"),dt=ee==null?W:Gn(ee),Q=ve==null?W:Gn(ve),W=new Ae(ae,q+"leave",ee,c,ne),W.target=dt,W.relatedTarget=Q,ae=null,Wi(ne)===X&&(Ae=new Ae(G,q+"enter",ve,c,ne),Ae.target=Q,Ae.relatedTarget=dt,ae=Ae),dt=ae,ee&&ve)t:{for(Ae=Xk,G=ee,q=ve,Q=0,ae=G;ae;ae=Ae(ae))Q++;ae=0;for(var we=q;we;we=Ae(we))ae++;for(;0<Q-ae;)G=Ae(G),Q--;for(;0<ae-Q;)q=Ae(q),ae--;for(;Q--;){if(G===q||q!==null&&G===q.alternate){Ae=G;break t}G=Ae(G),q=Ae(q)}Ae=null}else Ae=null;ee!==null&&WE(oe,W,ee,Ae,!1),ve!==null&&dt!==null&&WE(oe,dt,ve,Ae,!0)}}e:{if(W=X?Gn(X):window,ee=W.nodeName&&W.nodeName.toLowerCase(),ee==="select"||ee==="input"&&W.type==="file")var Ze=mT;else if(dT(W))if(pT)Ze=ok;else{Ze=sk;var be=rk}else ee=W.nodeName,!ee||ee.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&Zo(X.elementType)&&(Ze=mT):Ze=ak;if(Ze&&(Ze=Ze(r,X))){fT(oe,Ze,c,ne);break e}be&&be(r,W,X),r==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&Jc(W,"number",W.value)}switch(be=X?Gn(X):window,r){case"focusin":(dT(be)||be.contentEditable==="true")&&(al=be,yg=X,hu=null);break;case"focusout":hu=yg=al=null;break;case"mousedown":vg=!0;break;case"contextmenu":case"mouseup":case"dragend":vg=!1,wT(oe,c,ne);break;case"selectionchange":if(ck)break;case"keydown":case"keyup":wT(oe,c,ne)}var Ue;if(tt)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else sl?$a(r,c)&&(He="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(He="onCompositionStart");He&&(or&&c.locale!=="ko"&&(sl||He!=="onCompositionStart"?He==="onCompositionEnd"&&sl&&(Ue=ru()):(ir=ne,iu="value"in ir?ir.value:ir.textContent,sl=!0)),be=Mf(X,He),0<be.length&&(He=new ar(He,r,null,c,ne),oe.push({event:He,listeners:be}),Ue?He.data=Ue:(Ue=rl(c),Ue!==null&&(He.data=Ue)))),(Ue=li?ek(r,c):tk(r,c))&&(He=Mf(X,"onBeforeInput"),0<He.length&&(be=new ar("onBeforeInput","beforeinput",null,c,ne),oe.push({event:be,listeners:He}),be.data=Ue)),$k(oe,r,X,c,ne)}QE(oe,a)})}function Ou(r,a,c){return{instance:r,listener:a,currentTarget:c}}function Mf(r,a){for(var c=a+"Capture",h=[];r!==null;){var g=r,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Di(r,c),g!=null&&h.unshift(Ou(r,g,y)),g=Di(r,a),g!=null&&h.push(Ou(r,g,y))),r.tag===3)return h;r=r.return}return[]}function Xk(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function WE(r,a,c,h,g){for(var y=a._reactName,T=[];c!==null&&c!==h;){var A=c,U=A.alternate,X=A.stateNode;if(A=A.tag,U!==null&&U===h)break;A!==5&&A!==26&&A!==27||X===null||(U=X,g?(X=Di(c,y),X!=null&&T.unshift(Ou(c,X,U))):g||(X=Di(c,y),X!=null&&T.push(Ou(c,X,U)))),c=c.return}T.length!==0&&r.push({event:a,listeners:T})}var Wk=/\r\n?/g,Zk=/\u0000|\uFFFD/g;function ZE(r){return(typeof r=="string"?r:""+r).replace(Wk,`
`).replace(Zk,"")}function JE(r,a){return a=ZE(a),ZE(r)===a}function ht(r,a,c,h,g,y){switch(c){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Pn(r,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Pn(r,""+h);break;case"className":$n(r,"class",h);break;case"tabIndex":$n(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(r,c,h);break;case"style":tu(r,h,y);break;case"data":if(a!=="object"){$n(r,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=Jo(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&ht(r,a,"name",g.name,g,null),ht(r,a,"formEncType",g.formEncType,g,null),ht(r,a,"formMethod",g.formMethod,g,null),ht(r,a,"formTarget",g.formTarget,g,null)):(ht(r,a,"encType",g.encType,g,null),ht(r,a,"method",g.method,g,null),ht(r,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=Jo(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Ni);break;case"onScroll":h!=null&&Fe("scroll",r);break;case"onScrollEnd":h!=null&&Fe("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=Jo(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":Fe("beforetoggle",r),Fe("toggle",r),Xo(r,"popover",h);break;case"xlinkActuate":qt(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":qt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":qt(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":qt(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":qt(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":qt(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":qt(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":qt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":qt(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Xo(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Vd.get(c)||c,Xo(r,c,h))}}function qy(r,a,c,h,g,y){switch(c){case"style":tu(r,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?Pn(r,h):(typeof h=="number"||typeof h=="bigint")&&Pn(r,""+h);break;case"onScroll":h!=null&&Fe("scroll",r);break;case"onScrollEnd":h!=null&&Fe("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),y=r[sn]||null,y=y!=null?y[c]:null,typeof y=="function"&&r.removeEventListener(a,y,g),typeof h=="function")){typeof y!="function"&&y!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(a,h,g);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):Xo(r,c,h)}}}function mn(r,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",r),Fe("load",r);var h=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var T=c[y];if(T!=null)switch(y){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(r,a,y,T,c,null)}}g&&ht(r,a,"srcSet",c.srcSet,c,null),h&&ht(r,a,"src",c.src,c,null);return;case"input":Fe("invalid",r);var A=y=T=g=null,U=null,X=null;for(h in c)if(c.hasOwnProperty(h)){var ne=c[h];if(ne!=null)switch(h){case"name":g=ne;break;case"type":T=ne;break;case"checked":U=ne;break;case"defaultChecked":X=ne;break;case"value":y=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:ht(r,a,h,ne,c,null)}}Nd(r,y,A,U,X,T,g,!1);return;case"select":Fe("invalid",r),h=T=y=null;for(g in c)if(c.hasOwnProperty(g)&&(A=c[g],A!=null))switch(g){case"value":y=A;break;case"defaultValue":T=A;break;case"multiple":h=A;default:ht(r,a,g,A,c,null)}a=y,c=T,r.multiple=!!h,a!=null?vs(r,!!h,a,!1):c!=null&&vs(r,!!h,c,!0);return;case"textarea":Fe("invalid",r),y=g=h=null;for(T in c)if(c.hasOwnProperty(T)&&(A=c[T],A!=null))switch(T){case"value":h=A;break;case"defaultValue":g=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:ht(r,a,T,A,c,null)}_s(r,h,g,y);return;case"option":for(U in c)if(c.hasOwnProperty(U)&&(h=c[U],h!=null))switch(U){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ht(r,a,U,h,c,null)}return;case"dialog":Fe("beforetoggle",r),Fe("toggle",r),Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":Fe("load",r);break;case"video":case"audio":for(h=0;h<Pu.length;h++)Fe(Pu[h],r);break;case"image":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"embed":case"source":case"link":Fe("error",r),Fe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in c)if(c.hasOwnProperty(X)&&(h=c[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(r,a,X,h,c,null)}return;default:if(Zo(a)){for(ne in c)c.hasOwnProperty(ne)&&(h=c[ne],h!==void 0&&qy(r,a,ne,h,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(h=c[A],h!=null&&ht(r,a,A,h,c,null))}function Jk(r,a,c,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,T=null,A=null,U=null,X=null,ne=null;for(ee in c){var oe=c[ee];if(c.hasOwnProperty(ee)&&oe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":U=oe;default:h.hasOwnProperty(ee)||ht(r,a,ee,null,h,oe)}}for(var W in h){var ee=h[W];if(oe=c[W],h.hasOwnProperty(W)&&(ee!=null||oe!=null))switch(W){case"type":y=ee;break;case"name":g=ee;break;case"checked":X=ee;break;case"defaultChecked":ne=ee;break;case"value":T=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,a));break;default:ee!==oe&&ht(r,a,W,ee,h,oe)}}Wo(r,T,A,U,X,ne,y,g);return;case"select":ee=T=A=W=null;for(y in c)if(U=c[y],c.hasOwnProperty(y)&&U!=null)switch(y){case"value":break;case"multiple":ee=U;default:h.hasOwnProperty(y)||ht(r,a,y,null,h,U)}for(g in h)if(y=h[g],U=c[g],h.hasOwnProperty(g)&&(y!=null||U!=null))switch(g){case"value":W=y;break;case"defaultValue":A=y;break;case"multiple":T=y;default:y!==U&&ht(r,a,g,y,h,U)}a=A,c=T,h=ee,W!=null?vs(r,!!c,W,!1):!!h!=!!c&&(a!=null?vs(r,!!c,a,!0):vs(r,!!c,c?[]:"",!1));return;case"textarea":ee=W=null;for(A in c)if(g=c[A],c.hasOwnProperty(A)&&g!=null&&!h.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ht(r,a,A,null,h,g)}for(T in h)if(g=h[T],y=c[T],h.hasOwnProperty(T)&&(g!=null||y!=null))switch(T){case"value":W=g;break;case"defaultValue":ee=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&ht(r,a,T,g,h,y)}Dd(r,W,ee);return;case"option":for(var ve in c)if(W=c[ve],c.hasOwnProperty(ve)&&W!=null&&!h.hasOwnProperty(ve))switch(ve){case"selected":r.selected=!1;break;default:ht(r,a,ve,null,h,W)}for(U in h)if(W=h[U],ee=c[U],h.hasOwnProperty(U)&&W!==ee&&(W!=null||ee!=null))switch(U){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ht(r,a,U,W,h,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in c)W=c[Ae],c.hasOwnProperty(Ae)&&W!=null&&!h.hasOwnProperty(Ae)&&ht(r,a,Ae,null,h,W);for(X in h)if(W=h[X],ee=c[X],h.hasOwnProperty(X)&&W!==ee&&(W!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,a));break;default:ht(r,a,X,W,h,ee)}return;default:if(Zo(a)){for(var dt in c)W=c[dt],c.hasOwnProperty(dt)&&W!==void 0&&!h.hasOwnProperty(dt)&&qy(r,a,dt,void 0,h,W);for(ne in h)W=h[ne],ee=c[ne],!h.hasOwnProperty(ne)||W===ee||W===void 0&&ee===void 0||qy(r,a,ne,W,h,ee);return}}for(var G in c)W=c[G],c.hasOwnProperty(G)&&W!=null&&!h.hasOwnProperty(G)&&ht(r,a,G,null,h,W);for(oe in h)W=h[oe],ee=c[oe],!h.hasOwnProperty(oe)||W===ee||W==null&&ee==null||ht(r,a,oe,W,h,ee)}function ew(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function eV(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var g=c[h],y=g.transferSize,T=g.initiatorType,A=g.duration;if(y&&A&&ew(T)){for(T=0,A=g.responseEnd,h+=1;h<c.length;h++){var U=c[h],X=U.startTime;if(X>A)break;var ne=U.transferSize,oe=U.initiatorType;ne&&ew(oe)&&(U=U.responseEnd,T+=ne*(U<A?1:(A-X)/(U-X)))}if(--h,a+=8*(y+T)/(g.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Hy=null,Gy=null;function Pf(r){return r.nodeType===9?r:r.ownerDocument}function tw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nw(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function $y(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ky=null;function tV(){var r=window.event;return r&&r.type==="popstate"?r===Ky?!1:(Ky=r,!0):(Ky=null,!1)}var iw=typeof setTimeout=="function"?setTimeout:void 0,nV=typeof clearTimeout=="function"?clearTimeout:void 0,rw=typeof Promise=="function"?Promise:void 0,iV=typeof queueMicrotask=="function"?queueMicrotask:typeof rw<"u"?function(r){return rw.resolve(null).then(r).catch(rV)}:iw;function rV(r){setTimeout(function(){throw r})}function Fs(r){return r==="head"}function sw(r,a){var c=a,h=0;do{var g=c.nextSibling;if(r.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(g),Vl(a);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Lu(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,Lu(c);for(var y=c.firstChild;y;){var T=y.nextSibling,A=y.nodeName;y[Xi]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=T}}else c==="body"&&Lu(r.ownerDocument.body);c=g}while(c);Vl(a)}function aw(r,a){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function Yy(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Yy(c),Qo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function sV(r,a,c,h){for(;r.nodeType===1;){var g=c;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[Xi])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=pi(r.nextSibling),r===null)break}return null}function aV(r,a,c){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=pi(r.nextSibling),r===null))return null;return r}function ow(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=pi(r.nextSibling),r===null))return null;return r}function Qy(r){return r.data==="$?"||r.data==="$~"}function Xy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function oV(r,a){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||c.readyState!=="loading")a();else{var h=function(){a(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function pi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Wy=null;function lw(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(a===0)return pi(r.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}r=r.nextSibling}return null}function cw(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return r;a--}else c!=="/$"&&c!=="/&"||a++}r=r.previousSibling}return null}function uw(r,a,c){switch(a=Pf(c),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Lu(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Qo(r)}var gi=new Map,hw=new Set;function Of(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Kr=re.d;re.d={f:lV,r:cV,D:uV,C:hV,L:dV,m:fV,X:pV,S:mV,M:gV};function lV(){var r=Kr.f(),a=If();return r||a}function cV(r){var a=si(r);a!==null&&a.tag===5&&a.type==="form"?R1(a):Kr.r(r)}var Nl=typeof document>"u"?null:document;function dw(r,a,c){var h=Nl;if(h&&typeof a=="string"&&a){var g=Mn(a);g='link[rel="'+r+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),hw.has(g)||(hw.add(g),r={rel:r,crossOrigin:c,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),mn(a,"link",r),Ft(a),h.head.appendChild(a)))}}function uV(r){Kr.D(r),dw("dns-prefetch",r,null)}function hV(r,a){Kr.C(r,a),dw("preconnect",r,a)}function dV(r,a,c){Kr.L(r,a,c);var h=Nl;if(h&&r&&a){var g='link[rel="preload"][as="'+Mn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Mn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Mn(c.imageSizes)+'"]')):g+='[href="'+Mn(r)+'"]';var y=g;switch(a){case"style":y=Dl(r);break;case"script":y=kl(r)}gi.has(y)||(r=v({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:r,as:a},c),gi.set(y,r),h.querySelector(g)!==null||a==="style"&&h.querySelector(ju(y))||a==="script"&&h.querySelector(Uu(y))||(a=h.createElement("link"),mn(a,"link",r),Ft(a),h.head.appendChild(a)))}}function fV(r,a){Kr.m(r,a);var c=Nl;if(c&&r){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+Mn(h)+'"][href="'+Mn(r)+'"]',y=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=kl(r)}if(!gi.has(y)&&(r=v({rel:"modulepreload",href:r},a),gi.set(y,r),c.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Uu(y)))return}h=c.createElement("link"),mn(h,"link",r),Ft(h),c.head.appendChild(h)}}}function mV(r,a,c){Kr.S(r,a,c);var h=Nl;if(h&&r){var g=Zi(h).hoistableStyles,y=Dl(r);a=a||"default";var T=g.get(y);if(!T){var A={loading:0,preload:null};if(T=h.querySelector(ju(y)))A.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},c),(c=gi.get(y))&&Zy(r,c);var U=T=h.createElement("link");Ft(U),mn(U,"link",r),U._p=new Promise(function(X,ne){U.onload=X,U.onerror=ne}),U.addEventListener("load",function(){A.loading|=1}),U.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Lf(T,a,h)}T={type:"stylesheet",instance:T,count:1,state:A},g.set(y,T)}}}function pV(r,a){Kr.X(r,a);var c=Nl;if(c&&r){var h=Zi(c).hoistableScripts,g=kl(r),y=h.get(g);y||(y=c.querySelector(Uu(g)),y||(r=v({src:r,async:!0},a),(a=gi.get(g))&&Jy(r,a),y=c.createElement("script"),Ft(y),mn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function gV(r,a){Kr.M(r,a);var c=Nl;if(c&&r){var h=Zi(c).hoistableScripts,g=kl(r),y=h.get(g);y||(y=c.querySelector(Uu(g)),y||(r=v({src:r,async:!0,type:"module"},a),(a=gi.get(g))&&Jy(r,a),y=c.createElement("script"),Ft(y),mn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function fw(r,a,c,h){var g=(g=je.current)?Of(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Dl(c.href),c=Zi(g).hoistableStyles,h=c.get(a),h||(h={type:"style",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Dl(c.href);var y=Zi(g).hoistableStyles,T=y.get(r);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,T),(y=g.querySelector(ju(r)))&&!y._p&&(T.instance=y,T.state.loading=5),gi.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},gi.set(r,c),y||yV(g,r,c,T.state))),a&&h===null)throw Error(i(528,""));return T}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=kl(c),c=Zi(g).hoistableScripts,h=c.get(a),h||(h={type:"script",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Dl(r){return'href="'+Mn(r)+'"'}function ju(r){return'link[rel="stylesheet"]['+r+"]"}function mw(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function yV(r,a,c,h){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=r.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),mn(a,"link",c),Ft(a),r.head.appendChild(a))}function kl(r){return'[src="'+Mn(r)+'"]'}function Uu(r){return"script[async]"+r}function pw(r,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var h=r.querySelector('style[data-href~="'+Mn(c.href)+'"]');if(h)return a.instance=h,Ft(h),h;var g=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),Ft(h),mn(h,"style",g),Lf(h,c.precedence,r),a.instance=h;case"stylesheet":g=Dl(c.href);var y=r.querySelector(ju(g));if(y)return a.state.loading|=4,a.instance=y,Ft(y),y;h=mw(c),(g=gi.get(g))&&Zy(h,g),y=(r.ownerDocument||r).createElement("link"),Ft(y);var T=y;return T._p=new Promise(function(A,U){T.onload=A,T.onerror=U}),mn(y,"link",h),a.state.loading|=4,Lf(y,c.precedence,r),a.instance=y;case"script":return y=kl(c.src),(g=r.querySelector(Uu(y)))?(a.instance=g,Ft(g),g):(h=c,(g=gi.get(y))&&(h=v({},c),Jy(h,g)),r=r.ownerDocument||r,g=r.createElement("script"),Ft(g),mn(g,"link",h),r.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Lf(h,c.precedence,r));return a.instance}function Lf(r,a,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,y=g,T=0;T<h.length;T++){var A=h[T];if(A.dataset.precedence===a)y=A;else if(y!==g)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(r,a.firstChild))}function Zy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Jy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var jf=null;function gw(r,a,c){if(jf===null){var h=new Map,g=jf=new Map;g.set(c,h)}else g=jf,h=g.get(c),h||(h=new Map,g.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),g=0;g<c.length;g++){var y=c[g];if(!(y[Xi]||y[Bt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=r+T;var A=h.get(T);A?A.push(y):h.set(T,[y])}}return h}function yw(r,a,c){r=r.ownerDocument||r,r.head.insertBefore(c,a==="title"?r.querySelector("head > title"):null)}function vV(r,a,c){if(c===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function vw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function _V(r,a,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=Dl(h.href),y=a.querySelector(ju(g));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Uf.bind(r),a.then(r,r)),c.state.loading|=4,c.instance=y,Ft(y);return}y=a.ownerDocument||a,h=mw(h),(g=gi.get(g))&&Zy(h,g),y=y.createElement("link"),Ft(y);var T=y;T._p=new Promise(function(A,U){T.onload=A,T.onerror=U}),mn(y,"link",h),c.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Uf.bind(r),a.addEventListener("load",c),a.addEventListener("error",c))}}var e0=0;function bV(r,a){return r.stylesheets&&r.count===0&&Bf(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&Bf(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+a);0<r.imgBytes&&e0===0&&(e0=62500*eV());var g=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Bf(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>e0?50:800)+a);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function Uf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var zf=null;function Bf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,zf=new Map,a.forEach(TV,r),zf=null,Uf.call(r))}function TV(r,a){if(!(a.state.loading&4)){var c=zf.get(r);if(c)var h=c.get(null);else{c=new Map,zf.set(r,c);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var T=g[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),h=T)}h&&c.set(null,h)}g=a.instance,T=g.getAttribute("data-precedence"),y=c.get(T)||h,y===h&&c.set(null,g),c.set(T,g),this.count++,h=Uf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),y?y.parentNode.insertBefore(g,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),a.state.loading|=4}}var zu={$$typeof:O,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function EV(r,a,c,h,g,y,T,A,U){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function _w(r,a,c,h,g,y,T,A,U,X,ne,oe){return r=new EV(r,a,c,T,U,X,ne,oe,A),a=1,y===!0&&(a|=24),y=Yn(3,null,null,a),r.current=y,y.stateNode=r,a=Vg(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:h,isDehydrated:c,cache:a},Lg(y),r}function bw(r){return r?(r=cl,r):cl}function Tw(r,a,c,h,g,y){g=bw(g),h.context===null?h.context=g:h.pendingContext=g,h=Ds(a),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=ks(r,h,a),c!==null&&(zn(c,r,a),vu(c,r,a))}function Ew(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function t0(r,a){Ew(r,a),(r=r.alternate)&&Ew(r,a)}function ww(r){if(r.tag===13||r.tag===31){var a=Qa(r,67108864);a!==null&&zn(a,r,67108864),t0(r,67108864)}}function Sw(r){if(r.tag===13||r.tag===31){var a=Jn();a=La(a);var c=Qa(r,a);c!==null&&zn(c,r,a),t0(r,a)}}var Ff=!0;function wV(r,a,c,h){var g=H.T;H.T=null;var y=re.p;try{re.p=2,n0(r,a,c,h)}finally{re.p=y,H.T=g}}function SV(r,a,c,h){var g=H.T;H.T=null;var y=re.p;try{re.p=8,n0(r,a,c,h)}finally{re.p=y,H.T=g}}function n0(r,a,c,h){if(Ff){var g=i0(h);if(g===null)Fy(r,a,h,qf,c),Aw(r,h);else if(AV(g,r,a,c,h))h.stopPropagation();else if(Aw(r,h),a&4&&-1<xV.indexOf(r)){for(;g!==null;){var y=si(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=$i(y.pendingLanes);if(T!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var U=1<<31-Nt(T);A.entanglements[1]|=U,T&=~U}hr(y),(nt&6)===0&&(xf=In()+500,Mu(0))}}break;case 31:case 13:A=Qa(y,2),A!==null&&zn(A,y,2),If(),t0(y,2)}if(y=i0(h),y===null&&Fy(r,a,h,qf,c),y===g)break;g=y}g!==null&&h.stopPropagation()}else Fy(r,a,h,null,c)}}function i0(r){return r=ai(r),r0(r)}var qf=null;function r0(r){if(qf=null,r=Wi(r),r!==null){var a=o(r);if(a===null)r=null;else{var c=a.tag;if(c===13){if(r=l(a),r!==null)return r;r=null}else if(c===31){if(r=u(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return qf=r,null}function xw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Va()){case qc:return 2;case Hc:return 8;case gs:case ug:return 32;case bd:return 268435456;default:return 32}default:return 32}}var s0=!1,qs=null,Hs=null,Gs=null,Bu=new Map,Fu=new Map,$s=[],xV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Aw(r,a){switch(r){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":Bu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fu.delete(a.pointerId)}}function qu(r,a,c,h,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},a!==null&&(a=si(a),a!==null&&ww(a)),r):(r.eventSystemFlags|=h,a=r.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),r)}function AV(r,a,c,h,g){switch(a){case"focusin":return qs=qu(qs,r,a,c,h,g),!0;case"dragenter":return Hs=qu(Hs,r,a,c,h,g),!0;case"mouseover":return Gs=qu(Gs,r,a,c,h,g),!0;case"pointerover":var y=g.pointerId;return Bu.set(y,qu(Bu.get(y)||null,r,a,c,h,g)),!0;case"gotpointercapture":return y=g.pointerId,Fu.set(y,qu(Fu.get(y)||null,r,a,c,h,g)),!0}return!1}function Iw(r){var a=Wi(r.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){r.blockedOn=a,Ri(r.priority,function(){Sw(c)});return}}else if(a===31){if(a=u(c),a!==null){r.blockedOn=a,Ri(r.priority,function(){Sw(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Hf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=i0(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);nu=h,c.target.dispatchEvent(h),nu=null}else return a=si(c),a!==null&&ww(a),r.blockedOn=c,!1;a.shift()}return!0}function Rw(r,a,c){Hf(r)&&c.delete(a)}function IV(){s0=!1,qs!==null&&Hf(qs)&&(qs=null),Hs!==null&&Hf(Hs)&&(Hs=null),Gs!==null&&Hf(Gs)&&(Gs=null),Bu.forEach(Rw),Fu.forEach(Rw)}function Gf(r,a){r.blockedOn===a&&(r.blockedOn=null,s0||(s0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,IV)))}var $f=null;function Cw(r){$f!==r&&($f=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){$f===r&&($f=null);for(var a=0;a<r.length;a+=3){var c=r[a],h=r[a+1],g=r[a+2];if(typeof h!="function"){if(r0(h||c)===null)continue;break}var y=si(c);y!==null&&(r.splice(a,3),a-=3,iy(y,{pending:!0,data:g,method:c.method,action:h},h,g))}}))}function Vl(r){function a(U){return Gf(U,r)}qs!==null&&Gf(qs,r),Hs!==null&&Gf(Hs,r),Gs!==null&&Gf(Gs,r),Bu.forEach(a),Fu.forEach(a);for(var c=0;c<$s.length;c++){var h=$s[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<$s.length&&(c=$s[0],c.blockedOn===null);)Iw(c),c.blockedOn===null&&$s.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var g=c[h],y=c[h+1],T=g[sn]||null;if(typeof y=="function")T||Cw(c);else if(T){var A=null;if(y&&y.hasAttribute("formAction")){if(g=y,T=y[sn]||null)A=T.formAction;else if(r0(g)!==null)continue}else A=T.action;typeof A=="function"?c[h+1]=A:(c.splice(h,3),h-=3),Cw(c)}}}function Nw(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return g=T})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function a0(r){this._internalRoot=r}Kf.prototype.render=a0.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,h=Jn();Tw(c,h,r,a,null,null)},Kf.prototype.unmount=a0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Tw(r.current,2,null,r,null,null),If(),a[Qi]=null}};function Kf(r){this._internalRoot=r}Kf.prototype.unstable_scheduleHydration=function(r){if(r){var a=Ad();r={blockedOn:null,target:r,priority:a};for(var c=0;c<$s.length&&a!==0&&a<$s[c].priority;c++);$s.splice(c,0,r),c===0&&Iw(r)}};var Dw=e.version;if(Dw!=="19.2.0")throw Error(i(527,Dw,"19.2.0"));re.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var RV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{Ai=Yf.inject(RV),cn=Yf}catch{}}return Gu.createRoot=function(r,a){if(!s(r))throw Error(i(299));var c=!1,h="",g=j1,y=U1,T=z1;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=_w(r,1,!1,null,null,c,h,null,g,y,T,Nw),r[Qi]=a.current,By(r),new a0(a)},Gu.hydrateRoot=function(r,a,c){if(!s(r))throw Error(i(299));var h=!1,g="",y=j1,T=U1,A=z1,U=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(U=c.formState)),a=_w(r,1,!0,a,c??null,h,g,U,y,T,A,Nw),a.context=bw(null),c=a.current,h=Jn(),h=La(h),g=Ds(h),g.callback=null,ks(c,g,h),c=h,a.current.lanes=c,Pa(a,c),hr(a),r[Qi]=a.current,By(r),new Kf(a)},Gu.version="19.2.0",Gu}var Bw;function UV(){if(Bw)return c0.exports;Bw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),c0.exports=jV(),c0.exports}var zV=UV();const BV="modulepreload",FV=function(n){return"/house-budget-pwa/"+n},Fw={},qV=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let f=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var l=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=f(t.map(p=>{if(p=FV(p),p in Fw)return;Fw[p]=!0;const v=p.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${_}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":BV,v||(S.as="script"),S.crossOrigin="",S.href=p,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((N,R)=>{S.addEventListener("load",N),S.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function HV(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:s,onRegisteredSW:o,onRegisterError:l}=n;let u,d;const f=async(v=!0)=>{await d};async function p(){if("serviceWorker"in navigator){if(u=await qV(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/house-budget-pwa/sw.js",{scope:"/house-budget-pwa/",type:"classic"})).catch(v=>{l?.(v)}),!u)return;u.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),u.addEventListener("installed",v=>{v.isUpdate||i?.()}),u.register({immediate:e}).then(v=>{o?o("/house-budget-pwa/sw.js",v):s?.(v)}).catch(v=>{l?.(v)})}}return d=p(),f}var qw="popstate";function GV(n={}){function e(s,o){let{pathname:l="/",search:u="",hash:d=""}=Fo(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),W0("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:Ah(o))}function i(s,o){xi(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return KV(e,t,i,n)}function xt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $V(){return Math.random().toString(36).substring(2,10)}function Hw(n,e){return{usr:n.state,key:n.key,idx:e}}function W0(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Fo(e):e,state:t,key:e&&e.key||i||$V()}}function Ah({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Fo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function KV(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,u="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function v(){u="POP";let D=p(),L=D==null?null:D-f;f=D,d&&d({action:u,location:R.location,delta:L})}function _(D,L){u="PUSH";let B=W0(R.location,D,L);t&&t(B,D),f=p()+1;let O=Hw(B,f),Y=R.createHref(B);try{l.pushState(O,"",Y)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;s.location.assign(Y)}o&&d&&d({action:u,location:R.location,delta:1})}function S(D,L){u="REPLACE";let B=W0(R.location,D,L);t&&t(B,D),f=p();let O=Hw(B,f),Y=R.createHref(B);l.replaceState(O,"",Y),o&&d&&d({action:u,location:R.location,delta:0})}function N(D){return YV(D)}let R={get action(){return u},get location(){return n(s,l)},listen(D){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(qw,v),d=D,()=>{s.removeEventListener(qw,v),d=null}},createHref(D){return e(s,D)},createURL:N,encodeLocation(D){let L=N(D);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:_,replace:S,go(D){return l.go(D)}};return R}function YV(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),xt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Ah(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function _I(n,e,t="/"){return QV(n,e,t,!1)}function QV(n,e,t,i){let s=typeof e=="string"?Fo(e):e,o=is(s.pathname||"/",t);if(o==null)return null;let l=bI(n);XV(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=oM(o);u=sM(l[d],f,i)}return u}function bI(n,e=[],t=[],i="",s=!1){let o=(l,u,d=s,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&d)return;xt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let v=es([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(xt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),bI(l.children,e,_,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:iM(v,l.index),routesMeta:_})};return n.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of TI(l.path))o(l,u,!0,d)}),e}function TI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=TI(i.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function XV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:rM(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var WV=/^:[\w-]+$/,ZV=3,JV=2,eM=1,tM=10,nM=-2,Gw=n=>n==="*";function iM(n,e){let t=n.split("/"),i=t.length;return t.some(Gw)&&(i+=nM),e&&(i+=JV),t.filter(s=>!Gw(s)).reduce((s,o)=>s+(WV.test(o)?ZV:o===""?eM:tM),i)}function rM(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function sM(n,e,t=!1){let{routesMeta:i}=n,s={},o="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,p=o==="/"?e:e.slice(o.length)||"/",v=Vm({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),_=d.route;if(!v&&f&&t&&!i[i.length-1].route.index&&(v=Vm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:es([o,v.pathname]),pathnameBase:dM(es([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=es([o,v.pathnameBase]))}return l}function Vm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=aM(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:v},_)=>{if(p==="*"){let N=u[_]||"";l=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const S=u[_];return v&&!S?f[p]=void 0:f[p]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function aM(n,e=!1,t=!0){xi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function oM(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function is(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var lM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cM=n=>lM.test(n);function uM(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Fo(n):n,o;if(t)if(cM(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),xi(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=$w(t.substring(1),"/"):o=$w(t,e)}else o=e;return{pathname:o,search:fM(i),hash:mM(s)}}function $w(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function f0(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hM(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function EI(n){let e=hM(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function wI(n,e,t,i=!1){let s;typeof n=="string"?s=Fo(n):(s={...n},xt(!s.pathname||!s.pathname.includes("?"),f0("?","pathname","search",s)),xt(!s.pathname||!s.pathname.includes("#"),f0("#","pathname","hash",s)),xt(!s.search||!s.search.includes("#"),f0("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let v=e.length-1;if(!i&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}u=v>=0?e[v]:"/"}let d=uM(s,u),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var es=n=>n.join("/").replace(/\/\/+/g,"/"),dM=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),fM=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,mM=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function pM(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var SI=["POST","PUT","PATCH","DELETE"];new Set(SI);var gM=["GET",...SI];new Set(gM);var Ic=j.createContext(null);Ic.displayName="DataRouter";var vp=j.createContext(null);vp.displayName="DataRouterState";j.createContext(!1);var xI=j.createContext({isTransitioning:!1});xI.displayName="ViewTransition";var yM=j.createContext(new Map);yM.displayName="Fetchers";var vM=j.createContext(null);vM.displayName="Await";var Ar=j.createContext(null);Ar.displayName="Navigation";var Zh=j.createContext(null);Zh.displayName="Location";var Ir=j.createContext({outlet:null,matches:[],isDataRoute:!1});Ir.displayName="Route";var h_=j.createContext(null);h_.displayName="RouteError";function _M(n,{relative:e}={}){xt(Jh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=j.useContext(Ar),{hash:s,pathname:o,search:l}=ed(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:es([t,o])),i.createHref({pathname:u,search:l,hash:s})}function Jh(){return j.useContext(Zh)!=null}function Ea(){return xt(Jh(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Zh).location}var AI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function II(n){j.useContext(Ar).static||j.useLayoutEffect(n)}function wa(){let{isDataRoute:n}=j.useContext(Ir);return n?VM():bM()}function bM(){xt(Jh(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(Ic),{basename:e,navigator:t}=j.useContext(Ar),{matches:i}=j.useContext(Ir),{pathname:s}=Ea(),o=JSON.stringify(EI(i)),l=j.useRef(!1);return II(()=>{l.current=!0}),j.useCallback((d,f={})=>{if(xi(l.current,AI),!l.current)return;if(typeof d=="number"){t.go(d);return}let p=wI(d,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:es([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,o,s,n])}j.createContext(null);function TM(){let{matches:n}=j.useContext(Ir),e=n[n.length-1];return e?e.params:{}}function ed(n,{relative:e}={}){let{matches:t}=j.useContext(Ir),{pathname:i}=Ea(),s=JSON.stringify(EI(t));return j.useMemo(()=>wI(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function EM(n,e){return RI(n,e)}function RI(n,e,t,i,s){xt(Jh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(Ar),{matches:l}=j.useContext(Ir),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",v=u&&u.route;{let B=v&&v.path||"";CI(f,!v||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let _=Ea(),S;if(e){let B=typeof e=="string"?Fo(e):e;xt(p==="/"||B.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${B.pathname}" was given in the \`location\` prop.`),S=B}else S=_;let N=S.pathname||"/",R=N;if(p!=="/"){let B=p.replace(/^\//,"").split("/");R="/"+N.replace(/^\//,"").split("/").slice(B.length).join("/")}let D=_I(n,{pathname:R});xi(v||D!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),xi(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=IM(D&&D.map(B=>Object.assign({},B,{params:Object.assign({},d,B.params),pathname:es([p,o.encodeLocation?o.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?p:es([p,o.encodeLocation?o.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),l,t,i,s);return e&&L?j.createElement(Zh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},L):L}function wM(){let n=kM(),e=pM(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,l)}var SM=j.createElement(wM,null),xM=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?j.createElement(Ir.Provider,{value:this.props.routeContext},j.createElement(h_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AM({routeContext:n,match:e,children:t}){let i=j.useContext(Ic);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Ir.Provider,{value:n},t)}function IM(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let p=o.findIndex(v=>v.route.id&&l?.[v.route.id]!==void 0);xt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let v=o[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=p),v.route.id){let{loaderData:_,errors:S}=t,N=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||N){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&i?(p,v)=>{i(p,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:v})}:void 0;return o.reduceRight((p,v,_)=>{let S,N=!1,R=null,D=null;t&&(S=l&&v.route.id?l[v.route.id]:void 0,R=v.route.errorElement||SM,u&&(d<0&&_===0?(CI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,D=null):d===_&&(N=!0,D=v.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,_+1)),B=()=>{let O;return S?O=R:N?O=D:v.route.Component?O=j.createElement(v.route.Component,null):v.route.element?O=v.route.element:O=p,j.createElement(AM,{match:v,routeContext:{outlet:p,matches:L,isDataRoute:t!=null},children:O})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?j.createElement(xM,{location:t.location,revalidation:t.revalidation,component:R,error:S,children:B(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:f}):B()},null)}function d_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RM(n){let e=j.useContext(Ic);return xt(e,d_(n)),e}function CM(n){let e=j.useContext(vp);return xt(e,d_(n)),e}function NM(n){let e=j.useContext(Ir);return xt(e,d_(n)),e}function f_(n){let e=NM(n),t=e.matches[e.matches.length-1];return xt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function DM(){return f_("useRouteId")}function kM(){let n=j.useContext(h_),e=CM("useRouteError"),t=f_("useRouteError");return n!==void 0?n:e.errors?.[t]}function VM(){let{router:n}=RM("useNavigate"),e=f_("useNavigate"),t=j.useRef(!1);return II(()=>{t.current=!0}),j.useCallback(async(s,o={})=>{xi(t.current,AI),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Kw={};function CI(n,e,t){!e&&!Kw[n]&&(Kw[n]=!0,xi(!1,t))}j.memo(MM);function MM({routes:n,future:e,state:t,unstable_onError:i}){return RI(n,void 0,t,i,e)}function uo(n){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PM({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:o=!1}){xt(!Jh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=Fo(t));let{pathname:d="/",search:f="",hash:p="",state:v=null,key:_="default"}=t,S=j.useMemo(()=>{let N=is(d,l);return N==null?null:{location:{pathname:N,search:f,hash:p,state:v,key:_},navigationType:i}},[l,d,f,p,v,_,i]);return xi(S!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:j.createElement(Ar.Provider,{value:u},j.createElement(Zh.Provider,{children:e,value:S}))}function OM({children:n,location:e}){return EM(Z0(n),e)}function Z0(n,e=[]){let t=[];return j.Children.forEach(n,(i,s)=>{if(!j.isValidElement(i))return;let o=[...e,s];if(i.type===j.Fragment){t.push.apply(t,Z0(i.props.children,o));return}xt(i.type===uo,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Z0(i.props.children,o)),t.push(l)}),t}var cm="get",um="application/x-www-form-urlencoded";function _p(n){return n!=null&&typeof n.tagName=="string"}function LM(n){return _p(n)&&n.tagName.toLowerCase()==="button"}function jM(n){return _p(n)&&n.tagName.toLowerCase()==="form"}function UM(n){return _p(n)&&n.tagName.toLowerCase()==="input"}function zM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BM(n,e){return n.button===0&&(!e||e==="_self")&&!zM(n)}var Xf=null;function FM(){if(Xf===null)try{new FormData(document.createElement("form"),0),Xf=!1}catch{Xf=!0}return Xf}var qM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function m0(n){return n!=null&&!qM.has(n)?(xi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${um}"`),null):n}function HM(n,e){let t,i,s,o,l;if(jM(n)){let u=n.getAttribute("action");i=u?is(u,e):null,t=n.getAttribute("method")||cm,s=m0(n.getAttribute("enctype"))||um,o=new FormData(n)}else if(LM(n)||UM(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(i=d?is(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||cm,s=m0(n.getAttribute("formenctype"))||m0(u.getAttribute("enctype"))||um,o=new FormData(u,n),!FM()){let{name:f,type:p,value:v}=n;if(p==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,v)}}else{if(_p(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cm,i=null,s=um,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function m_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function GM(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&is(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function $M(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function YM(n,e,t){let i=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await $M(o,t);return l.links?l.links():[]}return[]}));return ZM(i.flat(1).filter(KM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Yw(n,e,t,i,s,o){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let p=i.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function QM(n,e,{includeHydrateFallback:t}={}){return XM(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function XM(n){return[...new Set(n)]}function WM(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function ZM(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let o=JSON.stringify(WM(s));return t.has(o)||(t.add(o),i.push({key:o,link:s})),i},[])}function NI(){let n=j.useContext(Ic);return m_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function JM(){let n=j.useContext(vp);return m_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var p_=j.createContext(void 0);p_.displayName="FrameworkContext";function DI(){let n=j.useContext(p_);return m_(n,"You must render this element inside a <HydratedRouter> element"),n}function eP(n,e){let t=j.useContext(p_),[i,s]=j.useState(!1),[o,l]=j.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:v}=e,_=j.useRef(null);j.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let R=L=>{L.forEach(B=>{l(B.isIntersecting)})},D=new IntersectionObserver(R,{threshold:.5});return _.current&&D.observe(_.current),()=>{D.disconnect()}}},[n]),j.useEffect(()=>{if(i){let R=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(R)}}},[i]);let S=()=>{s(!0)},N=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:$u(u,S),onBlur:$u(d,N),onMouseEnter:$u(f,S),onMouseLeave:$u(p,N),onTouchStart:$u(v,S)}]:[!1,_,{}]}function $u(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function tP({page:n,...e}){let{router:t}=NI(),i=j.useMemo(()=>_I(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?j.createElement(iP,{page:n,matches:i,...e}):null}function nP(n){let{manifest:e,routeModules:t}=DI(),[i,s]=j.useState([]);return j.useEffect(()=>{let o=!1;return YM(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),i}function iP({page:n,matches:e,...t}){let i=Ea(),{manifest:s,routeModules:o}=DI(),{basename:l}=NI(),{loaderData:u,matches:d}=JM(),f=j.useMemo(()=>Yw(n,e,d,s,i,"data"),[n,e,d,s,i]),p=j.useMemo(()=>Yw(n,e,d,s,i,"assets"),[n,e,d,s,i]),v=j.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let N=new Set,R=!1;if(e.forEach(L=>{let B=s.routes[L.route.id];!B||!B.hasLoader||(!f.some(O=>O.route.id===L.route.id)&&L.route.id in u&&o[L.route.id]?.shouldRevalidate||B.hasClientLoader?R=!0:N.add(L.route.id))}),N.size===0)return[];let D=GM(n,l,"data");return R&&N.size>0&&D.searchParams.set("_routes",e.filter(L=>N.has(L.route.id)).map(L=>L.route.id).join(",")),[D.pathname+D.search]},[l,u,i,s,f,e,n,o]),_=j.useMemo(()=>QM(p,s),[p,s]),S=nP(p);return j.createElement(j.Fragment,null,v.map(N=>j.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),_.map(N=>j.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),S.map(({key:N,link:R})=>j.createElement("link",{key:N,nonce:t.nonce,...R})))}function rP(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kI&&(window.__reactRouterVersion="7.9.6")}catch{}function sP({basename:n,children:e,window:t}){let i=j.useRef();i.current==null&&(i.current=GV({window:t,v5Compat:!0}));let s=i.current,[o,l]=j.useState({action:s.action,location:s.location}),u=j.useCallback(d=>{j.startTransition(()=>l(d))},[l]);return j.useLayoutEffect(()=>s.listen(u),[s,u]),j.createElement(PM,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var VI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MI=j.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:p,viewTransition:v,..._},S){let{basename:N}=j.useContext(Ar),R=typeof f=="string"&&VI.test(f),D,L=!1;if(typeof f=="string"&&R&&(D=f,kI))try{let V=new URL(window.location.href),M=f.startsWith("//")?new URL(V.protocol+f):new URL(f),k=is(M.pathname,N);M.origin===V.origin&&k!=null?f=k+M.search+M.hash:L=!0}catch{xi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=_M(f,{relative:s}),[O,Y,te]=eP(i,_),Z=cP(f,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:v});function x(V){e&&e(V),V.defaultPrevented||Z(V)}let I=j.createElement("a",{..._,...te,href:D||B,onClick:L||o?e:x,ref:rP(S,Y),target:d,"data-discover":!R&&t==="render"?"true":void 0});return O&&!R?j.createElement(j.Fragment,null,I,j.createElement(tP,{page:B})):I});MI.displayName="Link";var aP=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...f},p){let v=ed(l,{relative:f.relative}),_=Ea(),S=j.useContext(vp),{navigator:N,basename:R}=j.useContext(Ar),D=S!=null&&mP(v)&&u===!0,L=N.encodeLocation?N.encodeLocation(v).pathname:v.pathname,B=_.pathname,O=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(B=B.toLowerCase(),O=O?O.toLowerCase():null,L=L.toLowerCase()),O&&R&&(O=is(O,R)||O);const Y=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let te=B===L||!s&&B.startsWith(L)&&B.charAt(Y)==="/",Z=O!=null&&(O===L||!s&&O.startsWith(L)&&O.charAt(L.length)==="/"),x={isActive:te,isPending:Z,isTransitioning:D},I=te?e:void 0,V;typeof i=="function"?V=i(x):V=[i,te?"active":null,Z?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(x):o;return j.createElement(MI,{...f,"aria-current":I,className:V,ref:p,style:M,to:l,viewTransition:u},typeof d=="function"?d(x):d)});aP.displayName="NavLink";var oP=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:o,method:l=cm,action:u,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:v,..._},S)=>{let N=dP(),R=fP(u,{relative:f}),D=l.toLowerCase()==="get"?"get":"post",L=typeof u=="string"&&VI.test(u),B=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let Y=O.nativeEvent.submitter,te=Y?.getAttribute("formmethod")||l;N(Y||O.currentTarget,{fetcherKey:e,method:te,navigate:t,replace:s,state:o,relative:f,preventScrollReset:p,viewTransition:v})};return j.createElement("form",{ref:S,method:D,action:R,onSubmit:i?d:B,..._,"data-discover":!L&&n==="render"?"true":void 0})});oP.displayName="Form";function lP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PI(n){let e=j.useContext(Ic);return xt(e,lP(n)),e}function cP(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=wa(),d=Ea(),f=ed(n,{relative:o});return j.useCallback(p=>{if(BM(p,e)){p.preventDefault();let v=t!==void 0?t:Ah(d)===Ah(f);u(n,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,f,t,i,e,n,s,o,l])}var uP=0,hP=()=>`__${String(++uP)}__`;function dP(){let{router:n}=PI("useSubmit"),{basename:e}=j.useContext(Ar),t=DM();return j.useCallback(async(i,s={})=>{let{action:o,method:l,encType:u,formData:d,body:f}=HM(i,e);if(s.navigate===!1){let p=s.fetcherKey||hP();await n.fetch(p,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function fP(n,{relative:e}={}){let{basename:t}=j.useContext(Ar),i=j.useContext(Ir);xt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...ed(n||".",{relative:e})},l=Ea();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let p=u.toString();o.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:es([t,o.pathname])),Ah(o)}function mP(n,{relative:e}={}){let t=j.useContext(xI);xt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=PI("useViewTransitionState"),s=ed(n,{relative:e});if(!t.isTransitioning)return!1;let o=is(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=is(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Vm(s.pathname,l)!=null||Vm(s.pathname,o)!=null}const pP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gP=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),Qw=n=>{const e=gP(n);return e.charAt(0).toUpperCase()+e.slice(1)},OI=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),yP=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var vP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _P=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:l,...u},d)=>j.createElement("svg",{ref:d,...vP,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:OI("lucide",s),...!o&&!yP(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,p])=>j.createElement(f,p)),...Array.isArray(o)?o:[o]]));const Xe=(n,e)=>{const t=j.forwardRef(({className:i,...s},o)=>j.createElement(_P,{ref:o,iconNode:e,className:OI(`lucide-${pP(Qw(n))}`,`lucide-${n}`,i),...s}));return t.displayName=Qw(n),t};const bP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mm=Xe("arrow-left",bP);const TP=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],EP=Xe("arrow-right-left",TP);const wP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],SP=Xe("chevron-down",wP);const xP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],zl=Xe("chevron-right",xP);const AP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],IP=Xe("circle-arrow-down",AP);const RP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],CP=Xe("circle-arrow-up",RP);const NP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],DP=Xe("circle-check-big",NP);const kP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xw=Xe("circle-check",kP);const VP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],MP=Xe("circle-plus",VP);const PP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ww=Xe("circle",PP);const OP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Pm=Xe("download",OP);const LP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],jP=Xe("eye-off",LP);const UP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zP=Xe("eye",UP);const BP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FP=Xe("file-text",BP);const qP=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],HP=Xe("folder-plus",qP);const GP=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$P=Xe("funnel",GP);const KP=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],YP=Xe("git-branch",KP);const QP=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],XP=Xe("list",QP);const WP=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],ZP=Xe("loader",WP);const JP=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],e4=Xe("log-out",JP);const t4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Zw=Xe("mail",t4);const n4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],J0=Xe("refresh-cw",n4);const i4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],r4=Xe("save",i4);const s4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],a4=Xe("search",s4);const o4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],l4=Xe("settings",o4);const c4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Om=Xe("trash-2",c4);const u4=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],LI=Xe("trash",u4);const h4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],d4=Xe("undo-2",h4);const f4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],m4=Xe("upload",f4);const p4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],g4=Xe("user-plus",p4);const y4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],v4=Xe("wallet",y4);const _4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],b4=Xe("wifi-off",_4);const T4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],E4=Xe("wifi",T4);const w4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],g_=Xe("x",w4),Jw=n=>{let e;const t=new Set,i=(f,p)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=p??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(S=>S(e,_))}},s=()=>e,u={setState:i,getState:s,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=n(i,s,u);return u},S4=(n=>n?Jw(n):Jw),x4=n=>n;function A4(n,e=x4){const t=Qf.useSyncExternalStore(n.subscribe,Qf.useCallback(()=>e(n.getState()),[n,e]),Qf.useCallback(()=>e(n.getInitialState()),[n,e]));return Qf.useDebugValue(t),t}const eS=n=>{const e=S4(n),t=i=>A4(e,i);return Object.assign(t,e),t},y_=(n=>n?eS(n):eS);var $l=9e15,Sa=1e9,ev="0123456789abcdef",Lm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",jm="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",tv={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-$l,maxE:$l,crypto:!1},jI,Xr,Me=!0,bp="[DecimalError] ",ma=bp+"Invalid argument: ",UI=bp+"Precision limit exceeded",zI=bp+"crypto unavailable",BI="[object Decimal]",An=Math.floor,tn=Math.pow,I4=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,R4=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,C4=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,FI=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bi=1e7,Ie=7,N4=9007199254740991,D4=Lm.length-1,nv=jm.length-1,le={toStringTag:BI};le.absoluteValue=le.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Ee(n)};le.ceil=function(){return Ee(new this.constructor(this),this.e+1,2)};le.clampedTo=le.clamp=function(n,e){var t,i=this,s=i.constructor;if(n=new s(n),e=new s(e),!n.s||!e.s)return new s(NaN);if(n.gt(e))throw Error(ma+e);return t=i.cmp(n),t<0?n:i.cmp(e)>0?e:new s(i)};le.comparedTo=le.cmp=function(n){var e,t,i,s,o=this,l=o.d,u=(n=new o.constructor(n)).d,d=o.s,f=n.s;if(!l||!u)return!d||!f?NaN:d!==f?d:l===u?0:!l^d<0?1:-1;if(!l[0]||!u[0])return l[0]?d:u[0]?-f:0;if(d!==f)return d;if(o.e!==n.e)return o.e>n.e^d<0?1:-1;for(i=l.length,s=u.length,e=0,t=i<s?i:s;e<t;++e)if(l[e]!==u[e])return l[e]>u[e]^d<0?1:-1;return i===s?0:i>s^d<0?1:-1};le.cosine=le.cos=function(){var n,e,t=this,i=t.constructor;return t.d?t.d[0]?(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ie,i.rounding=1,t=k4(i,KI(i,t)),i.precision=n,i.rounding=e,Ee(Xr==2||Xr==3?t.neg():t,n,e,!0)):new i(1):new i(NaN)};le.cubeRoot=le.cbrt=function(){var n,e,t,i,s,o,l,u,d,f,p=this,v=p.constructor;if(!p.isFinite()||p.isZero())return new v(p);for(Me=!1,o=p.s*tn(p.s*p,1/3),!o||Math.abs(o)==1/0?(t=yn(p.d),n=p.e,(o=(n-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=tn(t,1/3),n=An((n+1)/3)-(n%3==(n<0?-1:2)),o==1/0?t="5e"+n:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),i=new v(t),i.s=p.s):i=new v(o.toString()),l=(n=v.precision)+3;;)if(u=i,d=u.times(u).times(u),f=d.plus(p),i=mt(f.plus(p).times(u),f.plus(d),l+2,1),yn(u.d).slice(0,l)===(t=yn(i.d)).slice(0,l))if(t=t.slice(l-3,l+1),t=="9999"||!s&&t=="4999"){if(!s&&(Ee(u,n+1,0),u.times(u).times(u).eq(p))){i=u;break}l+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ee(i,n+1,1),e=!i.times(i).times(i).eq(p));break}return Me=!0,Ee(i,n,v.rounding,e)};le.decimalPlaces=le.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-An(this.e/Ie))*Ie,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};le.dividedBy=le.div=function(n){return mt(this,new this.constructor(n))};le.dividedToIntegerBy=le.divToInt=function(n){var e=this,t=e.constructor;return Ee(mt(e,new t(n),0,1,1),t.precision,t.rounding)};le.equals=le.eq=function(n){return this.cmp(n)===0};le.floor=function(){return Ee(new this.constructor(this),this.e+1,3)};le.greaterThan=le.gt=function(n){return this.cmp(n)>0};le.greaterThanOrEqualTo=le.gte=function(n){var e=this.cmp(n);return e==1||e===0};le.hyperbolicCosine=le.cosh=function(){var n,e,t,i,s,o=this,l=o.constructor,u=new l(1);if(!o.isFinite())return new l(o.s?1/0:NaN);if(o.isZero())return u;t=l.precision,i=l.rounding,l.precision=t+Math.max(o.e,o.sd())+4,l.rounding=1,s=o.d.length,s<32?(n=Math.ceil(s/3),e=(1/Ep(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),o=rc(l,1,o.times(e),new l(1),!0);for(var d,f=n,p=new l(8);f--;)d=o.times(o),o=u.minus(d.times(p.minus(d.times(p))));return Ee(o,l.precision=t,l.rounding=i,!0)};le.hyperbolicSine=le.sinh=function(){var n,e,t,i,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<3)s=rc(o,2,s,s,!0);else{n=1.4*Math.sqrt(i),n=n>16?16:n|0,s=s.times(1/Ep(5,n)),s=rc(o,2,s,s,!0);for(var l,u=new o(5),d=new o(16),f=new o(20);n--;)l=s.times(s),s=s.times(u.plus(l.times(d.times(l).plus(f))))}return o.precision=e,o.rounding=t,Ee(s,e,t,!0)};le.hyperbolicTangent=le.tanh=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+7,i.rounding=1,mt(t.sinh(),t.cosh(),i.precision=n,i.rounding=e)):new i(t.s)};le.inverseCosine=le.acos=function(){var n=this,e=n.constructor,t=n.abs().cmp(1),i=e.precision,s=e.rounding;return t!==-1?t===0?n.isNeg()?pr(e,i,s):new e(0):new e(NaN):n.isZero()?pr(e,i+4,s).times(.5):(e.precision=i+6,e.rounding=1,n=new e(1).minus(n).div(n.plus(1)).sqrt().atan(),e.precision=i,e.rounding=s,n.times(2))};le.inverseHyperbolicCosine=le.acosh=function(){var n,e,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(n=i.precision,e=i.rounding,i.precision=n+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,Me=!1,t=t.times(t).minus(1).sqrt().plus(t),Me=!0,i.precision=n,i.rounding=e,t.ln()):new i(t)};le.inverseHyperbolicSine=le.asinh=function(){var n,e,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,Me=!1,t=t.times(t).plus(1).sqrt().plus(t),Me=!0,i.precision=n,i.rounding=e,t.ln())};le.inverseHyperbolicTangent=le.atanh=function(){var n,e,t,i,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(n=o.precision,e=o.rounding,i=s.sd(),Math.max(i,n)<2*-s.e-1?Ee(new o(s),n,e,!0):(o.precision=t=i-s.e,s=mt(s.plus(1),new o(1).minus(s),t+n,1),o.precision=n+4,o.rounding=1,s=s.ln(),o.precision=n,o.rounding=e,s.times(.5))):new o(NaN)};le.inverseSine=le.asin=function(){var n,e,t,i,s=this,o=s.constructor;return s.isZero()?new o(s):(e=s.abs().cmp(1),t=o.precision,i=o.rounding,e!==-1?e===0?(n=pr(o,t+4,i).times(.5),n.s=s.s,n):new o(NaN):(o.precision=t+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=i,s.times(2)))};le.inverseTangent=le.atan=function(){var n,e,t,i,s,o,l,u,d,f=this,p=f.constructor,v=p.precision,_=p.rounding;if(f.isFinite()){if(f.isZero())return new p(f);if(f.abs().eq(1)&&v+4<=nv)return l=pr(p,v+4,_).times(.25),l.s=f.s,l}else{if(!f.s)return new p(NaN);if(v+4<=nv)return l=pr(p,v+4,_).times(.5),l.s=f.s,l}for(p.precision=u=v+10,p.rounding=1,t=Math.min(28,u/Ie+2|0),n=t;n;--n)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Me=!1,e=Math.ceil(u/Ie),i=1,d=f.times(f),l=new p(f),s=f;n!==-1;)if(s=s.times(d),o=l.minus(s.div(i+=2)),s=s.times(d),l=o.plus(s.div(i+=2)),l.d[e]!==void 0)for(n=e;l.d[n]===o.d[n]&&n--;);return t&&(l=l.times(2<<t-1)),Me=!0,Ee(l,p.precision=v,p.rounding=_,!0)};le.isFinite=function(){return!!this.d};le.isInteger=le.isInt=function(){return!!this.d&&An(this.e/Ie)>this.d.length-2};le.isNaN=function(){return!this.s};le.isNegative=le.isNeg=function(){return this.s<0};le.isPositive=le.isPos=function(){return this.s>0};le.isZero=function(){return!!this.d&&this.d[0]===0};le.lessThan=le.lt=function(n){return this.cmp(n)<0};le.lessThanOrEqualTo=le.lte=function(n){return this.cmp(n)<1};le.logarithm=le.log=function(n){var e,t,i,s,o,l,u,d,f=this,p=f.constructor,v=p.precision,_=p.rounding,S=5;if(n==null)n=new p(10),e=!0;else{if(n=new p(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new p(NaN);e=n.eq(10)}if(t=f.d,f.s<0||!t||!t[0]||f.eq(1))return new p(t&&!t[0]?-1/0:f.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(s=t[0];s%10===0;)s/=10;o=s!==1}if(Me=!1,u=v+S,l=aa(f,u),i=e?Um(p,u+10):aa(n,u),d=mt(l,i,u,1),Ih(d.d,s=v,_))do if(u+=10,l=aa(f,u),i=e?Um(p,u+10):aa(n,u),d=mt(l,i,u,1),!o){+yn(d.d).slice(s+1,s+15)+1==1e14&&(d=Ee(d,v+1,0));break}while(Ih(d.d,s+=10,_));return Me=!0,Ee(d,v,_)};le.minus=le.sub=function(n){var e,t,i,s,o,l,u,d,f,p,v,_,S=this,N=S.constructor;if(n=new N(n),!S.d||!n.d)return!S.s||!n.s?n=new N(NaN):S.d?n.s=-n.s:n=new N(n.d||S.s!==n.s?S:NaN),n;if(S.s!=n.s)return n.s=-n.s,S.plus(n);if(f=S.d,_=n.d,u=N.precision,d=N.rounding,!f[0]||!_[0]){if(_[0])n.s=-n.s;else if(f[0])n=new N(S);else return new N(d===3?-0:0);return Me?Ee(n,u,d):n}if(t=An(n.e/Ie),p=An(S.e/Ie),f=f.slice(),o=p-t,o){for(v=o<0,v?(e=f,o=-o,l=_.length):(e=_,t=p,l=f.length),i=Math.max(Math.ceil(u/Ie),l)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,l=_.length,v=i<l,v&&(l=i),i=0;i<l;i++)if(f[i]!=_[i]){v=f[i]<_[i];break}o=0}for(v&&(e=f,f=_,_=e,n.s=-n.s),l=f.length,i=_.length-l;i>0;--i)f[l++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(s=i;s&&f[--s]===0;)f[s]=Bi-1;--f[s],f[i]+=Bi}f[i]-=_[i]}for(;f[--l]===0;)f.pop();for(;f[0]===0;f.shift())--t;return f[0]?(n.d=f,n.e=Tp(f,t),Me?Ee(n,u,d):n):new N(d===3?-0:0)};le.modulo=le.mod=function(n){var e,t=this,i=t.constructor;return n=new i(n),!t.d||!n.s||n.d&&!n.d[0]?new i(NaN):!n.d||t.d&&!t.d[0]?Ee(new i(t),i.precision,i.rounding):(Me=!1,i.modulo==9?(e=mt(t,n.abs(),0,3,1),e.s*=n.s):e=mt(t,n,0,i.modulo,1),e=e.times(n),Me=!0,t.minus(e))};le.naturalExponential=le.exp=function(){return iv(this)};le.naturalLogarithm=le.ln=function(){return aa(this)};le.negated=le.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Ee(n)};le.plus=le.add=function(n){var e,t,i,s,o,l,u,d,f,p,v=this,_=v.constructor;if(n=new _(n),!v.d||!n.d)return!v.s||!n.s?n=new _(NaN):v.d||(n=new _(n.d||v.s===n.s?v:NaN)),n;if(v.s!=n.s)return n.s=-n.s,v.minus(n);if(f=v.d,p=n.d,u=_.precision,d=_.rounding,!f[0]||!p[0])return p[0]||(n=new _(v)),Me?Ee(n,u,d):n;if(o=An(v.e/Ie),i=An(n.e/Ie),f=f.slice(),s=o-i,s){for(s<0?(t=f,s=-s,l=p.length):(t=p,i=o,l=f.length),o=Math.ceil(u/Ie),l=o>l?o+1:l+1,s>l&&(s=l,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(l=f.length,s=p.length,l-s<0&&(s=l,t=p,p=f,f=t),e=0;s;)e=(f[--s]=f[s]+p[s]+e)/Bi|0,f[s]%=Bi;for(e&&(f.unshift(e),++i),l=f.length;f[--l]==0;)f.pop();return n.d=f,n.e=Tp(f,i),Me?Ee(n,u,d):n};le.precision=le.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(ma+n);return t.d?(e=qI(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};le.round=function(){var n=this,e=n.constructor;return Ee(new e(n),n.e+1,e.rounding)};le.sine=le.sin=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ie,i.rounding=1,t=M4(i,KI(i,t)),i.precision=n,i.rounding=e,Ee(Xr>2?t.neg():t,n,e,!0)):new i(NaN)};le.squareRoot=le.sqrt=function(){var n,e,t,i,s,o,l=this,u=l.d,d=l.e,f=l.s,p=l.constructor;if(f!==1||!u||!u[0])return new p(!f||f<0&&(!u||u[0])?NaN:u?l:1/0);for(Me=!1,f=Math.sqrt(+l),f==0||f==1/0?(e=yn(u),(e.length+d)%2==0&&(e+="0"),f=Math.sqrt(e),d=An((d+1)/2)-(d<0||d%2),f==1/0?e="5e"+d:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+d),i=new p(e)):i=new p(f.toString()),t=(d=p.precision)+3;;)if(o=i,i=o.plus(mt(l,o,t+2,1)).times(.5),yn(o.d).slice(0,t)===(e=yn(i.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!s&&e=="4999"){if(!s&&(Ee(o,d+1,0),o.times(o).eq(l))){i=o;break}t+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ee(i,d+1,1),n=!i.times(i).eq(l));break}return Me=!0,Ee(i,d,p.rounding,n)};le.tangent=le.tan=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+10,i.rounding=1,t=t.sin(),t.s=1,t=mt(t,new i(1).minus(t.times(t)).sqrt(),n+10,0),i.precision=n,i.rounding=e,Ee(Xr==2||Xr==4?t.neg():t,n,e,!0)):new i(NaN)};le.times=le.mul=function(n){var e,t,i,s,o,l,u,d,f,p=this,v=p.constructor,_=p.d,S=(n=new v(n)).d;if(n.s*=p.s,!_||!_[0]||!S||!S[0])return new v(!n.s||_&&!_[0]&&!S||S&&!S[0]&&!_?NaN:!_||!S?n.s/0:n.s*0);for(t=An(p.e/Ie)+An(n.e/Ie),d=_.length,f=S.length,d<f&&(o=_,_=S,S=o,l=d,d=f,f=l),o=[],l=d+f,i=l;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,s=d+i;s>i;)u=o[s]+S[i]*_[s-i-1]+e,o[s--]=u%Bi|0,e=u/Bi|0;o[s]=(o[s]+e)%Bi|0}for(;!o[--l];)o.pop();return e?++t:o.shift(),n.d=o,n.e=Tp(o,t),Me?Ee(n,v.precision,v.rounding):n};le.toBinary=function(n,e){return v_(this,2,n,e)};le.toDecimalPlaces=le.toDP=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(Hn(n,0,Sa),e===void 0?e=i.rounding:Hn(e,0,8),Ee(t,n+t.e+1,e))};le.toExponential=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Sr(i,!0):(Hn(n,0,Sa),e===void 0?e=s.rounding:Hn(e,0,8),i=Ee(new s(i),n+1,e),t=Sr(i,!0,n+1)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toFixed=function(n,e){var t,i,s=this,o=s.constructor;return n===void 0?t=Sr(s):(Hn(n,0,Sa),e===void 0?e=o.rounding:Hn(e,0,8),i=Ee(new o(s),n+s.e+1,e),t=Sr(i,!1,n+i.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t};le.toFraction=function(n){var e,t,i,s,o,l,u,d,f,p,v,_,S=this,N=S.d,R=S.constructor;if(!N)return new R(S);if(f=t=new R(1),i=d=new R(0),e=new R(i),o=e.e=qI(N)-S.e-1,l=o%Ie,e.d[0]=tn(10,l<0?Ie+l:l),n==null)n=o>0?e:f;else{if(u=new R(n),!u.isInt()||u.lt(f))throw Error(ma+u);n=u.gt(e)?o>0?e:f:u}for(Me=!1,u=new R(yn(N)),p=R.precision,R.precision=o=N.length*Ie*2;v=mt(u,e,0,1,1),s=t.plus(v.times(i)),s.cmp(n)!=1;)t=i,i=s,s=f,f=d.plus(v.times(s)),d=s,s=e,e=u.minus(v.times(s)),u=s;return s=mt(n.minus(t),i,0,1,1),d=d.plus(s.times(f)),t=t.plus(s.times(i)),d.s=f.s=S.s,_=mt(f,i,o,1).minus(S).abs().cmp(mt(d,t,o,1).minus(S).abs())<1?[f,i]:[d,t],R.precision=p,Me=!0,_};le.toHexadecimal=le.toHex=function(n,e){return v_(this,16,n,e)};le.toNearest=function(n,e){var t=this,i=t.constructor;if(t=new i(t),n==null){if(!t.d)return t;n=new i(1),e=i.rounding}else{if(n=new i(n),e===void 0?e=i.rounding:Hn(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Me=!1,t=mt(t,n,0,e,1).times(n),Me=!0,Ee(t)):(n.s=t.s,t=n),t};le.toNumber=function(){return+this};le.toOctal=function(n,e){return v_(this,8,n,e)};le.toPower=le.pow=function(n){var e,t,i,s,o,l,u=this,d=u.constructor,f=+(n=new d(n));if(!u.d||!n.d||!u.d[0]||!n.d[0])return new d(tn(+u,f));if(u=new d(u),u.eq(1))return u;if(i=d.precision,o=d.rounding,n.eq(1))return Ee(u,i,o);if(e=An(n.e/Ie),e>=n.d.length-1&&(t=f<0?-f:f)<=N4)return s=HI(d,u,t,i),n.s<0?new d(1).div(s):Ee(s,i,o);if(l=u.s,l<0){if(e<n.d.length-1)return new d(NaN);if((n.d[e]&1)==0&&(l=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=l,u}return t=tn(+u,f),e=t==0||!isFinite(t)?An(f*(Math.log("0."+yn(u.d))/Math.LN10+u.e+1)):new d(t+"").e,e>d.maxE+1||e<d.minE-1?new d(e>0?l/0:0):(Me=!1,d.rounding=u.s=1,t=Math.min(12,(e+"").length),s=iv(n.times(aa(u,i+t)),i),s.d&&(s=Ee(s,i+5,1),Ih(s.d,i,o)&&(e=i+10,s=Ee(iv(n.times(aa(u,e+t)),e),e+5,1),+yn(s.d).slice(i+1,i+15)+1==1e14&&(s=Ee(s,i+1,0)))),s.s=l,Me=!0,d.rounding=o,Ee(s,i,o))};le.toPrecision=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Sr(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(Hn(n,1,Sa),e===void 0?e=s.rounding:Hn(e,0,8),i=Ee(new s(i),n,e),t=Sr(i,n<=i.e||i.e<=s.toExpNeg,n)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toSignificantDigits=le.toSD=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(Hn(n,1,Sa),e===void 0?e=i.rounding:Hn(e,0,8)),Ee(new i(t),n,e)};le.toString=function(){var n=this,e=n.constructor,t=Sr(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};le.truncated=le.trunc=function(){return Ee(new this.constructor(this),this.e+1,1)};le.valueOf=le.toJSON=function(){var n=this,e=n.constructor,t=Sr(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function yn(n){var e,t,i,s=n.length-1,o="",l=n[0];if(s>0){for(o+=l,e=1;e<s;e++)i=n[e]+"",t=Ie-i.length,t&&(o+=Js(t)),o+=i;l=n[e],i=l+"",t=Ie-i.length,t&&(o+=Js(t))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}function Hn(n,e,t){if(n!==~~n||n<e||n>t)throw Error(ma+n)}function Ih(n,e,t,i){var s,o,l,u;for(o=n[0];o>=10;o/=10)--e;return--e<0?(e+=Ie,s=0):(s=Math.ceil((e+1)/Ie),e%=Ie),o=tn(10,Ie-e),u=n[s]%o|0,i==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),l=t<4&&u==99999||t>3&&u==49999||u==5e4||u==0):l=(t<4&&u+1==o||t>3&&u+1==o/2)&&(n[s+1]/o/100|0)==tn(10,e-2)-1||(u==o/2||u==0)&&(n[s+1]/o/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),l=(i||t<4)&&u==9999||!i&&t>3&&u==4999):l=((i||t<4)&&u+1==o||!i&&t>3&&u+1==o/2)&&(n[s+1]/o/1e3|0)==tn(10,e-3)-1,l}function hm(n,e,t){for(var i,s=[0],o,l=0,u=n.length;l<u;){for(o=s.length;o--;)s[o]*=e;for(s[0]+=ev.indexOf(n.charAt(l++)),i=0;i<s.length;i++)s[i]>t-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/t|0,s[i]%=t)}return s.reverse()}function k4(n,e){var t,i,s;if(e.isZero())return e;i=e.d.length,i<32?(t=Math.ceil(i/3),s=(1/Ep(4,t)).toString()):(t=16,s="2.3283064365386962890625e-10"),n.precision+=t,e=rc(n,1,e.times(s),new n(1));for(var o=t;o--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return n.precision-=t,e}var mt=(function(){function n(i,s,o){var l,u=0,d=i.length;for(i=i.slice();d--;)l=i[d]*s+u,i[d]=l%o|0,u=l/o|0;return u&&i.unshift(u),i}function e(i,s,o,l){var u,d;if(o!=l)d=o>l?1:-1;else for(u=d=0;u<o;u++)if(i[u]!=s[u]){d=i[u]>s[u]?1:-1;break}return d}function t(i,s,o,l){for(var u=0;o--;)i[o]-=u,u=i[o]<s[o]?1:0,i[o]=u*l+i[o]-s[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,o,l,u,d){var f,p,v,_,S,N,R,D,L,B,O,Y,te,Z,x,I,V,M,k,z,P=i.constructor,Ne=i.s==s.s?1:-1,de=i.d,H=s.d;if(!de||!de[0]||!H||!H[0])return new P(!i.s||!s.s||(de?H&&de[0]==H[0]:!H)?NaN:de&&de[0]==0||!H?Ne*0:Ne/0);for(d?(S=1,p=i.e-s.e):(d=Bi,S=Ie,p=An(i.e/S)-An(s.e/S)),k=H.length,V=de.length,L=new P(Ne),B=L.d=[],v=0;H[v]==(de[v]||0);v++);if(H[v]>(de[v]||0)&&p--,o==null?(Z=o=P.precision,l=P.rounding):u?Z=o+(i.e-s.e)+1:Z=o,Z<0)B.push(1),N=!0;else{if(Z=Z/S+2|0,v=0,k==1){for(_=0,H=H[0],Z++;(v<V||_)&&Z--;v++)x=_*d+(de[v]||0),B[v]=x/H|0,_=x%H|0;N=_||v<V}else{for(_=d/(H[0]+1)|0,_>1&&(H=n(H,_,d),de=n(de,_,d),k=H.length,V=de.length),I=k,O=de.slice(0,k),Y=O.length;Y<k;)O[Y++]=0;z=H.slice(),z.unshift(0),M=H[0],H[1]>=d/2&&++M;do _=0,f=e(H,O,k,Y),f<0?(te=O[0],k!=Y&&(te=te*d+(O[1]||0)),_=te/M|0,_>1?(_>=d&&(_=d-1),R=n(H,_,d),D=R.length,Y=O.length,f=e(R,O,D,Y),f==1&&(_--,t(R,k<D?z:H,D,d))):(_==0&&(f=_=1),R=H.slice()),D=R.length,D<Y&&R.unshift(0),t(O,R,Y,d),f==-1&&(Y=O.length,f=e(H,O,k,Y),f<1&&(_++,t(O,k<Y?z:H,Y,d))),Y=O.length):f===0&&(_++,O=[0]),B[v++]=_,f&&O[0]?O[Y++]=de[I]||0:(O=[de[I]],Y=1);while((I++<V||O[0]!==void 0)&&Z--);N=O[0]!==void 0}B[0]||B.shift()}if(S==1)L.e=p,jI=N;else{for(v=1,_=B[0];_>=10;_/=10)v++;L.e=v+p*S-1,Ee(L,u?o+L.e+1:o,l,N)}return L}})();function Ee(n,e,t,i){var s,o,l,u,d,f,p,v,_,S=n.constructor;e:if(e!=null){if(v=n.d,!v)return n;for(s=1,u=v[0];u>=10;u/=10)s++;if(o=e-s,o<0)o+=Ie,l=e,p=v[_=0],d=p/tn(10,s-l-1)%10|0;else if(_=Math.ceil((o+1)/Ie),u=v.length,_>=u)if(i){for(;u++<=_;)v.push(0);p=d=0,s=1,o%=Ie,l=o-Ie+1}else break e;else{for(p=u=v[_],s=1;u>=10;u/=10)s++;o%=Ie,l=o-Ie+s,d=l<0?0:p/tn(10,s-l-1)%10|0}if(i=i||e<0||v[_+1]!==void 0||(l<0?p:p%tn(10,s-l-1)),f=t<4?(d||i)&&(t==0||t==(n.s<0?3:2)):d>5||d==5&&(t==4||i||t==6&&(o>0?l>0?p/tn(10,s-l):0:v[_-1])%10&1||t==(n.s<0?8:7)),e<1||!v[0])return v.length=0,f?(e-=n.e+1,v[0]=tn(10,(Ie-e%Ie)%Ie),n.e=-e||0):v[0]=n.e=0,n;if(o==0?(v.length=_,u=1,_--):(v.length=_+1,u=tn(10,Ie-o),v[_]=l>0?(p/tn(10,s-l)%tn(10,l)|0)*u:0),f)for(;;)if(_==0){for(o=1,l=v[0];l>=10;l/=10)o++;for(l=v[0]+=u,u=1;l>=10;l/=10)u++;o!=u&&(n.e++,v[0]==Bi&&(v[0]=1));break}else{if(v[_]+=u,v[_]!=Bi)break;v[_--]=0,u=1}for(o=v.length;v[--o]===0;)v.pop()}return Me&&(n.e>S.maxE?(n.d=null,n.e=NaN):n.e<S.minE&&(n.e=0,n.d=[0])),n}function Sr(n,e,t){if(!n.isFinite())return $I(n);var i,s=n.e,o=yn(n.d),l=o.length;return e?(t&&(i=t-l)>0?o=o.charAt(0)+"."+o.slice(1)+Js(i):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n.e<0?"e":"e+")+n.e):s<0?(o="0."+Js(-s-1)+o,t&&(i=t-l)>0&&(o+=Js(i))):s>=l?(o+=Js(s+1-l),t&&(i=t-s-1)>0&&(o=o+"."+Js(i))):((i=s+1)<l&&(o=o.slice(0,i)+"."+o.slice(i)),t&&(i=t-l)>0&&(s+1===l&&(o+="."),o+=Js(i))),o}function Tp(n,e){var t=n[0];for(e*=Ie;t>=10;t/=10)e++;return e}function Um(n,e,t){if(e>D4)throw Me=!0,t&&(n.precision=t),Error(UI);return Ee(new n(Lm),e,1,!0)}function pr(n,e,t){if(e>nv)throw Error(UI);return Ee(new n(jm),e,t,!0)}function qI(n){var e=n.length-1,t=e*Ie+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function Js(n){for(var e="";n--;)e+="0";return e}function HI(n,e,t,i){var s,o=new n(1),l=Math.ceil(i/Ie+4);for(Me=!1;;){if(t%2&&(o=o.times(e),nS(o.d,l)&&(s=!0)),t=An(t/2),t===0){t=o.d.length-1,s&&o.d[t]===0&&++o.d[t];break}e=e.times(e),nS(e.d,l)}return Me=!0,o}function tS(n){return n.d[n.d.length-1]&1}function GI(n,e,t){for(var i,s,o=new n(e[0]),l=0;++l<e.length;){if(s=new n(e[l]),!s.s){o=s;break}i=o.cmp(s),(i===t||i===0&&o.s===t)&&(o=s)}return o}function iv(n,e){var t,i,s,o,l,u,d,f=0,p=0,v=0,_=n.constructor,S=_.rounding,N=_.precision;if(!n.d||!n.d[0]||n.e>17)return new _(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Me=!1,d=N):d=e,u=new _(.03125);n.e>-2;)n=n.times(u),v+=5;for(i=Math.log(tn(2,v))/Math.LN10*2+5|0,d+=i,t=o=l=new _(1),_.precision=d;;){if(o=Ee(o.times(n),d,1),t=t.times(++p),u=l.plus(mt(o,t,d,1)),yn(u.d).slice(0,d)===yn(l.d).slice(0,d)){for(s=v;s--;)l=Ee(l.times(l),d,1);if(e==null)if(f<3&&Ih(l.d,d-i,S,f))_.precision=d+=10,t=o=u=new _(1),p=0,f++;else return Ee(l,_.precision=N,S,Me=!0);else return _.precision=N,l}l=u}}function aa(n,e){var t,i,s,o,l,u,d,f,p,v,_,S=1,N=10,R=n,D=R.d,L=R.constructor,B=L.rounding,O=L.precision;if(R.s<0||!D||!D[0]||!R.e&&D[0]==1&&D.length==1)return new L(D&&!D[0]?-1/0:R.s!=1?NaN:D?0:R);if(e==null?(Me=!1,p=O):p=e,L.precision=p+=N,t=yn(D),i=t.charAt(0),Math.abs(o=R.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)R=R.times(n),t=yn(R.d),i=t.charAt(0),S++;o=R.e,i>1?(R=new L("0."+t),o++):R=new L(i+"."+t.slice(1))}else return f=Um(L,p+2,O).times(o+""),R=aa(new L(i+"."+t.slice(1)),p-N).plus(f),L.precision=O,e==null?Ee(R,O,B,Me=!0):R;for(v=R,d=l=R=mt(R.minus(1),R.plus(1),p,1),_=Ee(R.times(R),p,1),s=3;;){if(l=Ee(l.times(_),p,1),f=d.plus(mt(l,new L(s),p,1)),yn(f.d).slice(0,p)===yn(d.d).slice(0,p))if(d=d.times(2),o!==0&&(d=d.plus(Um(L,p+2,O).times(o+""))),d=mt(d,new L(S),p,1),e==null)if(Ih(d.d,p-N,B,u))L.precision=p+=N,f=l=R=mt(v.minus(1),v.plus(1),p,1),_=Ee(R.times(R),p,1),s=u=1;else return Ee(d,L.precision=O,B,Me=!0);else return L.precision=O,d;d=f,s+=2}}function $I(n){return String(n.s*n.s/0)}function dm(n,e){var t,i,s;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,n.e=t=t-i-1,n.d=[],i=(t+1)%Ie,t<0&&(i+=Ie),i<s){for(i&&n.d.push(+e.slice(0,i)),s-=Ie;i<s;)n.d.push(+e.slice(i,i+=Ie));e=e.slice(i),i=Ie-e.length}else i-=s;for(;i--;)e+="0";n.d.push(+e),Me&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function V4(n,e){var t,i,s,o,l,u,d,f,p;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),FI.test(e))return dm(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(R4.test(e))t=16,e=e.toLowerCase();else if(I4.test(e))t=2;else if(C4.test(e))t=8;else throw Error(ma+e);for(o=e.search(/p/i),o>0?(d=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),l=o>=0,i=n.constructor,l&&(e=e.replace(".",""),u=e.length,o=u-o,s=HI(i,new i(t),o,o*2)),f=hm(e,t,Bi),p=f.length-1,o=p;f[o]===0;--o)f.pop();return o<0?new i(n.s*0):(n.e=Tp(f,p),n.d=f,Me=!1,l&&(n=mt(n,s,u*4)),d&&(n=n.times(Math.abs(d)<54?tn(2,d):Yr.pow(2,d))),Me=!0,n)}function M4(n,e){var t,i=e.d.length;if(i<3)return e.isZero()?e:rc(n,2,e,e);t=1.4*Math.sqrt(i),t=t>16?16:t|0,e=e.times(1/Ep(5,t)),e=rc(n,2,e,e);for(var s,o=new n(5),l=new n(16),u=new n(20);t--;)s=e.times(e),e=e.times(o.plus(s.times(l.times(s).minus(u))));return e}function rc(n,e,t,i,s){var o,l,u,d,f=n.precision,p=Math.ceil(f/Ie);for(Me=!1,d=t.times(t),u=new n(i);;){if(l=mt(u.times(d),new n(e++*e++),f,1),u=s?i.plus(l):i.minus(l),i=mt(l.times(d),new n(e++*e++),f,1),l=u.plus(i),l.d[p]!==void 0){for(o=p;l.d[o]===u.d[o]&&o--;);if(o==-1)break}o=u,u=i,i=l,l=o}return Me=!0,l.d.length=p+1,l}function Ep(n,e){for(var t=n;--e;)t*=n;return t}function KI(n,e){var t,i=e.s<0,s=pr(n,n.precision,1),o=s.times(.5);if(e=e.abs(),e.lte(o))return Xr=i?4:1,e;if(t=e.divToInt(s),t.isZero())Xr=i?3:2;else{if(e=e.minus(t.times(s)),e.lte(o))return Xr=tS(t)?i?2:3:i?4:1,e;Xr=tS(t)?i?1:4:i?3:2}return e.minus(s).abs()}function v_(n,e,t,i){var s,o,l,u,d,f,p,v,_,S=n.constructor,N=t!==void 0;if(N?(Hn(t,1,Sa),i===void 0?i=S.rounding:Hn(i,0,8)):(t=S.precision,i=S.rounding),!n.isFinite())p=$I(n);else{for(p=Sr(n),l=p.indexOf("."),N?(s=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):s=e,l>=0&&(p=p.replace(".",""),_=new S(1),_.e=p.length-l,_.d=hm(Sr(_),10,s),_.e=_.d.length),v=hm(p,10,s),o=d=v.length;v[--d]==0;)v.pop();if(!v[0])p=N?"0p+0":"0";else{if(l<0?o--:(n=new S(n),n.d=v,n.e=o,n=mt(n,_,t,i,0,s),v=n.d,o=n.e,f=jI),l=v[t],u=s/2,f=f||v[t+1]!==void 0,f=i<4?(l!==void 0||f)&&(i===0||i===(n.s<0?3:2)):l>u||l===u&&(i===4||f||i===6&&v[t-1]&1||i===(n.s<0?8:7)),v.length=t,f)for(;++v[--t]>s-1;)v[t]=0,t||(++o,v.unshift(1));for(d=v.length;!v[d-1];--d);for(l=0,p="";l<d;l++)p+=ev.charAt(v[l]);if(N){if(d>1)if(e==16||e==8){for(l=e==16?4:3,--d;d%l;d++)p+="0";for(v=hm(p,s,e),d=v.length;!v[d-1];--d);for(l=1,p="1.";l<d;l++)p+=ev.charAt(v[l])}else p=p.charAt(0)+"."+p.slice(1);p=p+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)p="0"+p;p="0."+p}else if(++o>d)for(o-=d;o--;)p+="0";else o<d&&(p=p.slice(0,o)+"."+p.slice(o))}p=(e==16?"0x":e==2?"0b":e==8?"0o":"")+p}return n.s<0?"-"+p:p}function nS(n,e){if(n.length>e)return n.length=e,!0}function P4(n){return new this(n).abs()}function O4(n){return new this(n).acos()}function L4(n){return new this(n).acosh()}function j4(n,e){return new this(n).plus(e)}function U4(n){return new this(n).asin()}function z4(n){return new this(n).asinh()}function B4(n){return new this(n).atan()}function F4(n){return new this(n).atanh()}function q4(n,e){n=new this(n),e=new this(e);var t,i=this.precision,s=this.rounding,o=i+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=pr(this,o,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?pr(this,i,s):new this(0),t.s=n.s):!n.d||e.isZero()?(t=pr(this,o,1).times(.5),t.s=n.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(mt(n,e,o,1)),e=pr(this,o,1),this.precision=i,this.rounding=s,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(mt(n,e,o,1)),t}function H4(n){return new this(n).cbrt()}function G4(n){return Ee(n=new this(n),n.e+1,2)}function $4(n,e,t){return new this(n).clamp(e,t)}function K4(n){if(!n||typeof n!="object")throw Error(bp+"Object expected");var e,t,i,s=n.defaults===!0,o=["precision",1,Sa,"rounding",0,8,"toExpNeg",-$l,0,"toExpPos",0,$l,"maxE",0,$l,"minE",-$l,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],s&&(this[t]=tv[t]),(i=n[t])!==void 0)if(An(i)===i&&i>=o[e+1]&&i<=o[e+2])this[t]=i;else throw Error(ma+t+": "+i);if(t="crypto",s&&(this[t]=tv[t]),(i=n[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(zI);else this[t]=!1;else throw Error(ma+t+": "+i);return this}function Y4(n){return new this(n).cos()}function Q4(n){return new this(n).cosh()}function YI(n){var e,t,i;function s(o){var l,u,d,f=this;if(!(f instanceof s))return new s(o);if(f.constructor=s,iS(o)){f.s=o.s,Me?!o.d||o.e>s.maxE?(f.e=NaN,f.d=null):o.e<s.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(d=typeof o,d==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(l=0,u=o;u>=10;u/=10)l++;Me?l>s.maxE?(f.e=NaN,f.d=null):l<s.minE?(f.e=0,f.d=[0]):(f.e=l,f.d=[o]):(f.e=l,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return dm(f,o.toString())}if(d==="string")return(u=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(u===43&&(o=o.slice(1)),f.s=1),FI.test(o)?dm(f,o):V4(f,o);if(d==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,dm(f,o.toString());throw Error(ma+o)}if(s.prototype=le,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=K4,s.clone=YI,s.isDecimal=iS,s.abs=P4,s.acos=O4,s.acosh=L4,s.add=j4,s.asin=U4,s.asinh=z4,s.atan=B4,s.atanh=F4,s.atan2=q4,s.cbrt=H4,s.ceil=G4,s.clamp=$4,s.cos=Y4,s.cosh=Q4,s.div=X4,s.exp=W4,s.floor=Z4,s.hypot=J4,s.ln=eO,s.log=tO,s.log10=iO,s.log2=nO,s.max=rO,s.min=sO,s.mod=aO,s.mul=oO,s.pow=lO,s.random=cO,s.round=uO,s.sign=hO,s.sin=dO,s.sinh=fO,s.sqrt=mO,s.sub=pO,s.sum=gO,s.tan=yO,s.tanh=vO,s.trunc=_O,n===void 0&&(n={}),n&&n.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return s.config(n),s}function X4(n,e){return new this(n).div(e)}function W4(n){return new this(n).exp()}function Z4(n){return Ee(n=new this(n),n.e+1,3)}function J4(){var n,e,t=new this(0);for(Me=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Me=!0,new this(1/0);t=e}return Me=!0,t.sqrt()}function iS(n){return n instanceof Yr||n&&n.toStringTag===BI||!1}function eO(n){return new this(n).ln()}function tO(n,e){return new this(n).log(e)}function nO(n){return new this(n).log(2)}function iO(n){return new this(n).log(10)}function rO(){return GI(this,arguments,-1)}function sO(){return GI(this,arguments,1)}function aO(n,e){return new this(n).mod(e)}function oO(n,e){return new this(n).mul(e)}function lO(n,e){return new this(n).pow(e)}function cO(n){var e,t,i,s,o=0,l=new this(1),u=[];if(n===void 0?n=this.precision:Hn(n,1,Sa),i=Math.ceil(n/Ie),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)s=e[o],s>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:u[o++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)s=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,o):(u.push(s%1e7),o+=4);o=i/4}else throw Error(zI);else for(;o<i;)u[o++]=Math.random()*1e7|0;for(i=u[--o],n%=Ie,i&&n&&(s=tn(10,Ie-n),u[o]=(i/s|0)*s);u[o]===0;o--)u.pop();if(o<0)t=0,u=[0];else{for(t=-1;u[0]===0;t-=Ie)u.shift();for(i=1,s=u[0];s>=10;s/=10)i++;i<Ie&&(t-=Ie-i)}return l.e=t,l.d=u,l}function uO(n){return Ee(n=new this(n),n.e+1,this.rounding)}function hO(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function dO(n){return new this(n).sin()}function fO(n){return new this(n).sinh()}function mO(n){return new this(n).sqrt()}function pO(n,e){return new this(n).sub(e)}function gO(){var n=0,e=arguments,t=new this(e[n]);for(Me=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Me=!0,Ee(t,this.precision,this.rounding)}function yO(n){return new this(n).tan()}function vO(n){return new this(n).tanh()}function _O(n){return Ee(n=new this(n),n.e+1,1)}le[Symbol.for("nodejs.util.inspect.custom")]=le.toString;le[Symbol.toStringTag]="Decimal";var Yr=le.constructor=YI(tv);Lm=new Yr(Lm);jm=new Yr(jm);const bO=()=>{};var rS={};const QI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},TO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},XI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,p=o>>2,v=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,S=f&63;d||(S=64,l||(_=64)),i.push(t[p],t[v],t[_],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(QI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||f==null||v==null)throw new EO;const _=o<<2|u>>4;if(i.push(_),f!==64){const S=u<<4&240|f>>2;if(i.push(S),v!==64){const N=f<<6&192|v;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class EO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wO=function(n){const e=QI(n);return XI.encodeByteArray(e,!0)},WI=function(n){return wO(n).replace(/\./g,"")},ZI=function(n){try{return XI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const SO=()=>JI().__FIREBASE_DEFAULTS__,xO=()=>{if(typeof process>"u"||typeof rS>"u")return;const n=rS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},AO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ZI(n[1]);return e&&JSON.parse(e)},wp=()=>{try{return bO()||SO()||xO()||AO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IO=n=>wp()?.emulatorHosts?.[n],eR=()=>wp()?.config,tR=n=>wp()?.[`_${n}`];class RO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Rc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nR(n){return(await fetch(n,{credentials:"include"})).ok}const uh={};function CO(){const n={prod:[],emulator:[]};for(const e of Object.keys(uh))uh[e]?n.emulator.push(e):n.prod.push(e);return n}function NO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let sS=!1;function DO(n,e){if(typeof window>"u"||typeof document>"u"||!Rc(window.location.host)||uh[n]===e||uh[n]||sS)return;uh[n]=e;function t(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=CO().prod.length>0;function l(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,S){_.setAttribute("width","24"),_.setAttribute("id",S),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{sS=!0,l()},_}function p(_,S){_.setAttribute("id",S),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=NO(i),S=t("text"),N=document.getElementById(S)||document.createElement("span"),R=t("learnmore"),D=document.getElementById(R)||document.createElement("a"),L=t("preprendIcon"),B=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const O=_.element;u(O),p(D,R);const Y=f();d(B,L),O.append(B,N,D,Y),document.body.appendChild(O)}o?(N.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function iR(){const n=wp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function PO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OO(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rR(){return!iR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sR(){return!iR()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function aR(){try{return typeof indexedDB=="object"}catch{return!1}}function LO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const jO="FirebaseError";class us extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=jO,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,td.prototype.create)}}class td{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?UO(o,i):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new us(s,u,i)}}function UO(n,e){return n.replace(zO,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const zO=/\{\$([^}]+)}/g;function BO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function No(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],l=e[s];if(aS(o)&&aS(l)){if(!No(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function aS(n){return n!==null&&typeof n=="object"}function nd(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ih(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function FO(n,e){const t=new qO(n,e);return t.subscribe.bind(t)}class qO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");HO(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=p0),s.error===void 0&&(s.error=p0),s.complete===void 0&&(s.complete=p0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function p0(){}function Wt(n){return n&&n._delegate?n._delegate:n}class Do{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ho="[DEFAULT]";class GO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new RO;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KO(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$O(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $O(n){return n===ho?void 0:n}function KO(n){return n.instantiationMode==="EAGER"}class YO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const QO={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},XO=Ge.INFO,WO={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},ZO=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=WO[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class __{constructor(e){this.name=e,this._logLevel=XO,this._logHandler=ZO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const JO=(n,e)=>e.some(t=>n instanceof t);let oS,lS;function e3(){return oS||(oS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t3(){return lS||(lS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oR=new WeakMap,rv=new WeakMap,lR=new WeakMap,g0=new WeakMap,b_=new WeakMap;function n3(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(la(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&oR.set(t,n)}).catch(()=>{}),b_.set(e,n),e}function i3(n){if(rv.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});rv.set(n,e)}let sv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||lR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return la(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function r3(n){sv=n(sv)}function s3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(y0(this),e,...t);return lR.set(i,e.sort?e.sort():[e]),la(i)}:t3().includes(n)?function(...e){return n.apply(y0(this),e),la(oR.get(this))}:function(...e){return la(n.apply(y0(this),e))}}function a3(n){return typeof n=="function"?s3(n):(n instanceof IDBTransaction&&i3(n),JO(n,e3())?new Proxy(n,sv):n)}function la(n){if(n instanceof IDBRequest)return n3(n);if(g0.has(n))return g0.get(n);const e=a3(n);return e!==n&&(g0.set(n,e),b_.set(e,n)),e}const y0=n=>b_.get(n);function o3(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=la(l);return i&&l.addEventListener("upgradeneeded",d=>{i(la(l.result),d.oldVersion,d.newVersion,la(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const l3=["get","getKey","getAll","getAllKeys","count"],c3=["put","add","delete","clear"],v0=new Map;function cS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(v0.get(e))return v0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=c3.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||l3.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return v0.set(e,o),o}r3(n=>({...n,get:(e,t,i)=>cS(e,t)||n.get(e,t,i),has:(e,t)=>!!cS(e,t)||n.has(e,t)}));class u3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(h3(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function h3(n){return n.getComponent()?.type==="VERSION"}const av="@firebase/app",uS="0.14.6";const rs=new __("@firebase/app"),d3="@firebase/app-compat",f3="@firebase/analytics-compat",m3="@firebase/analytics",p3="@firebase/app-check-compat",g3="@firebase/app-check",y3="@firebase/auth",v3="@firebase/auth-compat",_3="@firebase/database",b3="@firebase/data-connect",T3="@firebase/database-compat",E3="@firebase/functions",w3="@firebase/functions-compat",S3="@firebase/installations",x3="@firebase/installations-compat",A3="@firebase/messaging",I3="@firebase/messaging-compat",R3="@firebase/performance",C3="@firebase/performance-compat",N3="@firebase/remote-config",D3="@firebase/remote-config-compat",k3="@firebase/storage",V3="@firebase/storage-compat",M3="@firebase/firestore",P3="@firebase/ai",O3="@firebase/firestore-compat",L3="firebase",j3="12.6.0";const ov="[DEFAULT]",U3={[av]:"fire-core",[d3]:"fire-core-compat",[m3]:"fire-analytics",[f3]:"fire-analytics-compat",[g3]:"fire-app-check",[p3]:"fire-app-check-compat",[y3]:"fire-auth",[v3]:"fire-auth-compat",[_3]:"fire-rtdb",[b3]:"fire-data-connect",[T3]:"fire-rtdb-compat",[E3]:"fire-fn",[w3]:"fire-fn-compat",[S3]:"fire-iid",[x3]:"fire-iid-compat",[A3]:"fire-fcm",[I3]:"fire-fcm-compat",[R3]:"fire-perf",[C3]:"fire-perf-compat",[N3]:"fire-rc",[D3]:"fire-rc-compat",[k3]:"fire-gcs",[V3]:"fire-gcs-compat",[M3]:"fire-fst",[O3]:"fire-fst-compat",[P3]:"fire-vertex","fire-js":"fire-js",[L3]:"fire-js-all"};const zm=new Map,z3=new Map,lv=new Map;function hS(n,e){try{n.container.addComponent(e)}catch(t){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sc(n){const e=n.name;if(lv.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;lv.set(e,n);for(const t of zm.values())hS(t,n);for(const t of z3.values())hS(t,n);return!0}function T_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bi(n){return n==null?!1:n.settings!==void 0}const B3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ca=new td("app","Firebase",B3);class F3{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ca.create("app-deleted",{appName:this._name})}}const Cc=j3;function cR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:ov,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw ca.create("bad-app-name",{appName:String(s)});if(t||(t=eR()),!t)throw ca.create("no-options");const o=zm.get(s);if(o){if(No(t,o.options)&&No(i,o.config))return o;throw ca.create("duplicate-app",{appName:s})}const l=new YO(s);for(const d of lv.values())l.addComponent(d);const u=new F3(t,i,l);return zm.set(s,u),u}function q3(n=ov){const e=zm.get(n);if(!e&&n===ov&&eR())return cR();if(!e)throw ca.create("no-app",{appName:n});return e}function ua(n,e,t){let i=U3[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(l.join(" "));return}sc(new Do(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const H3="firebase-heartbeat-database",G3=1,Rh="firebase-heartbeat-store";let _0=null;function uR(){return _0||(_0=o3(H3,G3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rh)}catch(t){console.warn(t)}}}}).catch(n=>{throw ca.create("idb-open",{originalErrorMessage:n.message})})),_0}async function $3(n){try{const t=(await uR()).transaction(Rh),i=await t.objectStore(Rh).get(hR(n));return await t.done,i}catch(e){if(e instanceof us)rs.warn(e.message);else{const t=ca.create("idb-get",{originalErrorMessage:e?.message});rs.warn(t.message)}}}async function dS(n,e){try{const i=(await uR()).transaction(Rh,"readwrite");await i.objectStore(Rh).put(e,hR(n)),await i.done}catch(t){if(t instanceof us)rs.warn(t.message);else{const i=ca.create("idb-set",{originalErrorMessage:t?.message});rs.warn(i.message)}}}function hR(n){return`${n.name}!${n.options.appId}`}const K3=1024,Y3=30;class Q3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new W3(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=fS();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Y3){const s=Z3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){rs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=fS(),{heartbeatsToSend:t,unsentEntries:i}=X3(this._heartbeatsCache.heartbeats),s=WI(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return rs.warn(e),""}}}function fS(){return new Date().toISOString().substring(0,10)}function X3(n,e=K3){const t=[];let i=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),mS(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),mS(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class W3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aR()?LO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return dS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return dS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function mS(n){return WI(JSON.stringify({version:2,heartbeats:n})).length}function Z3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function J3(n){sc(new Do("platform-logger",e=>new u3(e),"PRIVATE")),sc(new Do("heartbeat",e=>new Q3(e),"PRIVATE")),ua(av,uS,n),ua(av,uS,"esm2020"),ua("fire-js","")}J3("");var pS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ha,dR;(function(){var n;function e(x,I){function V(){}V.prototype=I.prototype,x.F=I.prototype,x.prototype=new V,x.prototype.constructor=x,x.D=function(M,k,z){for(var P=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)P[Ne-2]=arguments[Ne];return I.prototype[k].apply(M,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,I,V){V||(V=0);const M=Array(16);if(typeof I=="string")for(var k=0;k<16;++k)M[k]=I.charCodeAt(V++)|I.charCodeAt(V++)<<8|I.charCodeAt(V++)<<16|I.charCodeAt(V++)<<24;else for(k=0;k<16;++k)M[k]=I[V++]|I[V++]<<8|I[V++]<<16|I[V++]<<24;I=x.g[0],V=x.g[1],k=x.g[2];let z=x.g[3],P;P=I+(z^V&(k^z))+M[0]+3614090360&4294967295,I=V+(P<<7&4294967295|P>>>25),P=z+(k^I&(V^k))+M[1]+3905402710&4294967295,z=I+(P<<12&4294967295|P>>>20),P=k+(V^z&(I^V))+M[2]+606105819&4294967295,k=z+(P<<17&4294967295|P>>>15),P=V+(I^k&(z^I))+M[3]+3250441966&4294967295,V=k+(P<<22&4294967295|P>>>10),P=I+(z^V&(k^z))+M[4]+4118548399&4294967295,I=V+(P<<7&4294967295|P>>>25),P=z+(k^I&(V^k))+M[5]+1200080426&4294967295,z=I+(P<<12&4294967295|P>>>20),P=k+(V^z&(I^V))+M[6]+2821735955&4294967295,k=z+(P<<17&4294967295|P>>>15),P=V+(I^k&(z^I))+M[7]+4249261313&4294967295,V=k+(P<<22&4294967295|P>>>10),P=I+(z^V&(k^z))+M[8]+1770035416&4294967295,I=V+(P<<7&4294967295|P>>>25),P=z+(k^I&(V^k))+M[9]+2336552879&4294967295,z=I+(P<<12&4294967295|P>>>20),P=k+(V^z&(I^V))+M[10]+4294925233&4294967295,k=z+(P<<17&4294967295|P>>>15),P=V+(I^k&(z^I))+M[11]+2304563134&4294967295,V=k+(P<<22&4294967295|P>>>10),P=I+(z^V&(k^z))+M[12]+1804603682&4294967295,I=V+(P<<7&4294967295|P>>>25),P=z+(k^I&(V^k))+M[13]+4254626195&4294967295,z=I+(P<<12&4294967295|P>>>20),P=k+(V^z&(I^V))+M[14]+2792965006&4294967295,k=z+(P<<17&4294967295|P>>>15),P=V+(I^k&(z^I))+M[15]+1236535329&4294967295,V=k+(P<<22&4294967295|P>>>10),P=I+(k^z&(V^k))+M[1]+4129170786&4294967295,I=V+(P<<5&4294967295|P>>>27),P=z+(V^k&(I^V))+M[6]+3225465664&4294967295,z=I+(P<<9&4294967295|P>>>23),P=k+(I^V&(z^I))+M[11]+643717713&4294967295,k=z+(P<<14&4294967295|P>>>18),P=V+(z^I&(k^z))+M[0]+3921069994&4294967295,V=k+(P<<20&4294967295|P>>>12),P=I+(k^z&(V^k))+M[5]+3593408605&4294967295,I=V+(P<<5&4294967295|P>>>27),P=z+(V^k&(I^V))+M[10]+38016083&4294967295,z=I+(P<<9&4294967295|P>>>23),P=k+(I^V&(z^I))+M[15]+3634488961&4294967295,k=z+(P<<14&4294967295|P>>>18),P=V+(z^I&(k^z))+M[4]+3889429448&4294967295,V=k+(P<<20&4294967295|P>>>12),P=I+(k^z&(V^k))+M[9]+568446438&4294967295,I=V+(P<<5&4294967295|P>>>27),P=z+(V^k&(I^V))+M[14]+3275163606&4294967295,z=I+(P<<9&4294967295|P>>>23),P=k+(I^V&(z^I))+M[3]+4107603335&4294967295,k=z+(P<<14&4294967295|P>>>18),P=V+(z^I&(k^z))+M[8]+1163531501&4294967295,V=k+(P<<20&4294967295|P>>>12),P=I+(k^z&(V^k))+M[13]+2850285829&4294967295,I=V+(P<<5&4294967295|P>>>27),P=z+(V^k&(I^V))+M[2]+4243563512&4294967295,z=I+(P<<9&4294967295|P>>>23),P=k+(I^V&(z^I))+M[7]+1735328473&4294967295,k=z+(P<<14&4294967295|P>>>18),P=V+(z^I&(k^z))+M[12]+2368359562&4294967295,V=k+(P<<20&4294967295|P>>>12),P=I+(V^k^z)+M[5]+4294588738&4294967295,I=V+(P<<4&4294967295|P>>>28),P=z+(I^V^k)+M[8]+2272392833&4294967295,z=I+(P<<11&4294967295|P>>>21),P=k+(z^I^V)+M[11]+1839030562&4294967295,k=z+(P<<16&4294967295|P>>>16),P=V+(k^z^I)+M[14]+4259657740&4294967295,V=k+(P<<23&4294967295|P>>>9),P=I+(V^k^z)+M[1]+2763975236&4294967295,I=V+(P<<4&4294967295|P>>>28),P=z+(I^V^k)+M[4]+1272893353&4294967295,z=I+(P<<11&4294967295|P>>>21),P=k+(z^I^V)+M[7]+4139469664&4294967295,k=z+(P<<16&4294967295|P>>>16),P=V+(k^z^I)+M[10]+3200236656&4294967295,V=k+(P<<23&4294967295|P>>>9),P=I+(V^k^z)+M[13]+681279174&4294967295,I=V+(P<<4&4294967295|P>>>28),P=z+(I^V^k)+M[0]+3936430074&4294967295,z=I+(P<<11&4294967295|P>>>21),P=k+(z^I^V)+M[3]+3572445317&4294967295,k=z+(P<<16&4294967295|P>>>16),P=V+(k^z^I)+M[6]+76029189&4294967295,V=k+(P<<23&4294967295|P>>>9),P=I+(V^k^z)+M[9]+3654602809&4294967295,I=V+(P<<4&4294967295|P>>>28),P=z+(I^V^k)+M[12]+3873151461&4294967295,z=I+(P<<11&4294967295|P>>>21),P=k+(z^I^V)+M[15]+530742520&4294967295,k=z+(P<<16&4294967295|P>>>16),P=V+(k^z^I)+M[2]+3299628645&4294967295,V=k+(P<<23&4294967295|P>>>9),P=I+(k^(V|~z))+M[0]+4096336452&4294967295,I=V+(P<<6&4294967295|P>>>26),P=z+(V^(I|~k))+M[7]+1126891415&4294967295,z=I+(P<<10&4294967295|P>>>22),P=k+(I^(z|~V))+M[14]+2878612391&4294967295,k=z+(P<<15&4294967295|P>>>17),P=V+(z^(k|~I))+M[5]+4237533241&4294967295,V=k+(P<<21&4294967295|P>>>11),P=I+(k^(V|~z))+M[12]+1700485571&4294967295,I=V+(P<<6&4294967295|P>>>26),P=z+(V^(I|~k))+M[3]+2399980690&4294967295,z=I+(P<<10&4294967295|P>>>22),P=k+(I^(z|~V))+M[10]+4293915773&4294967295,k=z+(P<<15&4294967295|P>>>17),P=V+(z^(k|~I))+M[1]+2240044497&4294967295,V=k+(P<<21&4294967295|P>>>11),P=I+(k^(V|~z))+M[8]+1873313359&4294967295,I=V+(P<<6&4294967295|P>>>26),P=z+(V^(I|~k))+M[15]+4264355552&4294967295,z=I+(P<<10&4294967295|P>>>22),P=k+(I^(z|~V))+M[6]+2734768916&4294967295,k=z+(P<<15&4294967295|P>>>17),P=V+(z^(k|~I))+M[13]+1309151649&4294967295,V=k+(P<<21&4294967295|P>>>11),P=I+(k^(V|~z))+M[4]+4149444226&4294967295,I=V+(P<<6&4294967295|P>>>26),P=z+(V^(I|~k))+M[11]+3174756917&4294967295,z=I+(P<<10&4294967295|P>>>22),P=k+(I^(z|~V))+M[2]+718787259&4294967295,k=z+(P<<15&4294967295|P>>>17),P=V+(z^(k|~I))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+z&4294967295}i.prototype.v=function(x,I){I===void 0&&(I=x.length);const V=I-this.blockSize,M=this.C;let k=this.h,z=0;for(;z<I;){if(k==0)for(;z<=V;)s(this,x,z),z+=this.blockSize;if(typeof x=="string"){for(;z<I;)if(M[k++]=x.charCodeAt(z++),k==this.blockSize){s(this,M),k=0;break}}else for(;z<I;)if(M[k++]=x[z++],k==this.blockSize){s(this,M),k=0;break}}this.h=k,this.o+=I},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var V=x.length-8;V<x.length;++V)x[V]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,V=0;V<4;++V)for(let M=0;M<32;M+=8)x[I++]=this.g[V]>>>M&255;return x};function o(x,I){var V=u;return Object.prototype.hasOwnProperty.call(V,x)?V[x]:V[x]=I(x)}function l(x,I){this.h=I;const V=[];let M=!0;for(let k=x.length-1;k>=0;k--){const z=x[k]|0;M&&z==I||(V[k]=z,M=!1)}this.g=V}var u={};function d(x){return-128<=x&&x<128?o(x,function(I){return new l([I|0],I<0?-1:0)}):new l([x|0],x<0?-1:0)}function f(x){if(isNaN(x)||!isFinite(x))return v;if(x<0)return D(f(-x));const I=[];let V=1;for(let M=0;x>=V;M++)I[M]=x/V|0,V*=4294967296;return new l(I,0)}function p(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return D(p(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=f(Math.pow(I,8));let M=v;for(let z=0;z<x.length;z+=8){var k=Math.min(8,x.length-z);const P=parseInt(x.substring(z,z+k),I);k<8?(k=f(Math.pow(I,k)),M=M.j(k).add(f(P))):(M=M.j(V),M=M.add(f(P)))}return M}var v=d(0),_=d(1),S=d(16777216);n=l.prototype,n.m=function(){if(R(this))return-D(this).m();let x=0,I=1;for(let V=0;V<this.g.length;V++){const M=this.i(V);x+=(M>=0?M:4294967296+M)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N(this))return"0";if(R(this))return"-"+D(this).toString(x);const I=f(Math.pow(x,6));var V=this;let M="";for(;;){const k=Y(V,I).g;V=L(V,k.j(I));let z=((V.g.length>0?V.g[0]:V.h)>>>0).toString(x);if(V=k,N(V))return z+M;for(;z.length<6;)z="0"+z;M=z+M}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function N(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function R(x){return x.h==-1}n.l=function(x){return x=L(this,x),R(x)?-1:N(x)?0:1};function D(x){const I=x.g.length,V=[];for(let M=0;M<I;M++)V[M]=~x.g[M];return new l(V,~x.h).add(_)}n.abs=function(){return R(this)?D(this):this},n.add=function(x){const I=Math.max(this.g.length,x.g.length),V=[];let M=0;for(let k=0;k<=I;k++){let z=M+(this.i(k)&65535)+(x.i(k)&65535),P=(z>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);M=P>>>16,z&=65535,P&=65535,V[k]=P<<16|z}return new l(V,V[V.length-1]&-2147483648?-1:0)};function L(x,I){return x.add(D(I))}n.j=function(x){if(N(this)||N(x))return v;if(R(this))return R(x)?D(this).j(D(x)):D(D(this).j(x));if(R(x))return D(this.j(D(x)));if(this.l(S)<0&&x.l(S)<0)return f(this.m()*x.m());const I=this.g.length+x.g.length,V=[];for(var M=0;M<2*I;M++)V[M]=0;for(M=0;M<this.g.length;M++)for(let k=0;k<x.g.length;k++){const z=this.i(M)>>>16,P=this.i(M)&65535,Ne=x.i(k)>>>16,de=x.i(k)&65535;V[2*M+2*k]+=P*de,B(V,2*M+2*k),V[2*M+2*k+1]+=z*de,B(V,2*M+2*k+1),V[2*M+2*k+1]+=P*Ne,B(V,2*M+2*k+1),V[2*M+2*k+2]+=z*Ne,B(V,2*M+2*k+2)}for(x=0;x<I;x++)V[x]=V[2*x+1]<<16|V[2*x];for(x=I;x<2*I;x++)V[x]=0;return new l(V,0)};function B(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function O(x,I){this.g=x,this.h=I}function Y(x,I){if(N(I))throw Error("division by zero");if(N(x))return new O(v,v);if(R(x))return I=Y(D(x),I),new O(D(I.g),D(I.h));if(R(I))return I=Y(x,D(I)),new O(D(I.g),I.h);if(x.g.length>30){if(R(x)||R(I))throw Error("slowDivide_ only works with positive integers.");for(var V=_,M=I;M.l(x)<=0;)V=te(V),M=te(M);var k=Z(V,1),z=Z(M,1);for(M=Z(M,2),V=Z(V,2);!N(M);){var P=z.add(M);P.l(x)<=0&&(k=k.add(V),z=P),M=Z(M,1),V=Z(V,1)}return I=L(x,k.j(I)),new O(k,I)}for(k=v;x.l(I)>=0;){for(V=Math.max(1,Math.floor(x.m()/I.m())),M=Math.ceil(Math.log(V)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),z=f(V),P=z.j(I);R(P)||P.l(x)>0;)V-=M,z=f(V),P=z.j(I);N(z)&&(z=_),k=k.add(z),x=L(x,P)}return new O(k,x)}n.B=function(x){return Y(this,x).h},n.and=function(x){const I=Math.max(this.g.length,x.g.length),V=[];for(let M=0;M<I;M++)V[M]=this.i(M)&x.i(M);return new l(V,this.h&x.h)},n.or=function(x){const I=Math.max(this.g.length,x.g.length),V=[];for(let M=0;M<I;M++)V[M]=this.i(M)|x.i(M);return new l(V,this.h|x.h)},n.xor=function(x){const I=Math.max(this.g.length,x.g.length),V=[];for(let M=0;M<I;M++)V[M]=this.i(M)^x.i(M);return new l(V,this.h^x.h)};function te(x){const I=x.g.length+1,V=[];for(let M=0;M<I;M++)V[M]=x.i(M)<<1|x.i(M-1)>>>31;return new l(V,x.h)}function Z(x,I){const V=I>>5;I%=32;const M=x.g.length-V,k=[];for(let z=0;z<M;z++)k[z]=I>0?x.i(z+V)>>>I|x.i(z+V+1)<<32-I:x.i(z+V);return new l(k,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,dR=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,ha=l}).apply(typeof pS<"u"?pS:typeof self<"u"?self:typeof window<"u"?window:{});var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fR,rh,mR,fm,cv,pR,gR,yR;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wf=="object"&&Wf];for(var b=0;b<m.length;++b){var w=m[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function s(m,b){if(b)e:{var w=i;m=m.split(".");for(var C=0;C<m.length-1;C++){var K=m[C];if(!(K in w))break e;w=w[K]}m=m[m.length-1],C=w[m],b=b(C),b!=C&&b!=null&&e(w,m,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(b){var w=[],C;for(C in b)Object.prototype.hasOwnProperty.call(b,C)&&w.push([C,b[C]]);return w}});var o=o||{},l=this||self;function u(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function d(m,b,w){return m.call.apply(m.bind,arguments)}function f(m,b,w){return f=d,f.apply(null,arguments)}function p(m,b){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),m.apply(this,C)}}function v(m,b){function w(){}w.prototype=b.prototype,m.Z=b.prototype,m.prototype=new w,m.prototype.constructor=m,m.Ob=function(C,K,J){for(var fe=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)fe[Oe-2]=arguments[Oe];return b.prototype[K].apply(C,fe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function S(m){const b=m.length;if(b>0){const w=Array(b);for(let C=0;C<b;C++)w[C]=m[C];return w}return[]}function N(m,b){for(let C=1;C<arguments.length;C++){const K=arguments[C];var w=typeof K;if(w=w!="object"?w:K?Array.isArray(K)?"array":w:"null",w=="array"||w=="object"&&typeof K.length=="number"){w=m.length||0;const J=K.length||0;m.length=w+J;for(let fe=0;fe<J;fe++)m[w+fe]=K[fe]}else m.push(K)}}class R{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function D(m){l.setTimeout(()=>{throw m},0)}function L(){var m=x;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class B{constructor(){this.h=this.g=null}add(b,w){const C=O.get();C.set(b,w),this.h?this.h.next=C:this.g=C,this.h=C}}var O=new R(()=>new Y,m=>m.reset());class Y{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let te,Z=!1,x=new B,I=()=>{const m=Promise.resolve(void 0);te=()=>{m.then(V)}};function V(){for(var m;m=L();){try{m.h.call(m.g)}catch(w){D(w)}var b=O;b.j(m),b.h<100&&(b.h++,m.next=b.g,b.g=m)}Z=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};l.addEventListener("test",w,b),l.removeEventListener("test",w,b)}catch{}return m})();function P(m){return/^[\s\xa0]*$/.test(m)}function Ne(m,b){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,b)}v(Ne,k),Ne.prototype.init=function(m,b){const w=this.type=m.type,C=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget,b||(w=="mouseover"?b=m.fromElement:w=="mouseout"&&(b=m.toElement)),this.relatedTarget=b,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),H=0;function re(m,b,w,C,K){this.listener=m,this.proxy=null,this.src=b,this.type=w,this.capture=!!C,this.ha=K,this.key=++H,this.da=this.fa=!1}function ue(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function xe(m,b,w){for(const C in m)b.call(w,m[C],C,m)}function De(m,b){for(const w in m)b.call(void 0,m[w],w,m)}function F(m){const b={};for(const w in m)b[w]=m[w];return b}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(m,b){let w,C;for(let K=1;K<arguments.length;K++){C=arguments[K];for(w in C)m[w]=C[w];for(let J=0;J<se.length;J++)w=se[J],Object.prototype.hasOwnProperty.call(C,w)&&(m[w]=C[w])}}function ge(m){this.src=m,this.g={},this.h=0}ge.prototype.add=function(m,b,w,C,K){const J=m.toString();m=this.g[J],m||(m=this.g[J]=[],this.h++);const fe=je(m,b,C,K);return fe>-1?(b=m[fe],w||(b.fa=!1)):(b=new re(b,this.src,J,!!C,K),b.fa=w,m.push(b)),b};function ke(m,b){const w=b.type;if(w in m.g){var C=m.g[w],K=Array.prototype.indexOf.call(C,b,void 0),J;(J=K>=0)&&Array.prototype.splice.call(C,K,1),J&&(ue(b),m.g[w].length==0&&(delete m.g[w],m.h--))}}function je(m,b,w,C){for(let K=0;K<m.length;++K){const J=m[K];if(!J.da&&J.listener==b&&J.capture==!!w&&J.ha==C)return K}return-1}var Ye="closure_lm_"+(Math.random()*1e6|0),Zt={};function vt(m,b,w,C,K){if(Array.isArray(b)){for(let J=0;J<b.length;J++)vt(m,b[J],w,C,K);return null}return w=Fc(w),m&&m[de]?m.J(b,w,u(C)?!!C.capture:!1,K):Da(m,b,w,!1,C,K)}function Da(m,b,w,C,K,J){if(!b)throw Error("Invalid event type");const fe=u(K)?!!K.capture:!!K;let Oe=ka(m);if(Oe||(m[Ye]=Oe=new ge(m)),w=Oe.add(b,w,C,fe,J),w.proxy)return w;if(C=Ho(),w.proxy=C,C.src=m,C.listener=w,m.addEventListener)z||(K=fe),K===void 0&&(K=!1),m.addEventListener(b.toString(),C,K);else if(m.attachEvent)m.attachEvent(Hi(b.toString()),C);else if(m.addListener&&m.removeListener)m.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ho(){function m(w){return b.call(m.src,m.listener,w)}const b=zc;return m}function Go(m,b,w,C,K){if(Array.isArray(b))for(var J=0;J<b.length;J++)Go(m,b[J],w,C,K);else C=u(C)?!!C.capture:!!C,w=Fc(w),m&&m[de]?(m=m.i,J=String(b).toString(),J in m.g&&(b=m.g[J],w=je(b,w,C,K),w>-1&&(ue(b[w]),Array.prototype.splice.call(b,w,1),b.length==0&&(delete m.g[J],m.h--)))):m&&(m=ka(m))&&(b=m.g[b.toString()],m=-1,b&&(m=je(b,w,C,K)),(w=m>-1?b[m]:null)&&$o(w))}function $o(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[de])ke(b.i,m);else{var w=m.type,C=m.proxy;b.removeEventListener?b.removeEventListener(w,C,m.capture):b.detachEvent?b.detachEvent(Hi(w),C):b.addListener&&b.removeListener&&b.removeListener(C),(w=ka(b))?(ke(w,m),w.h==0&&(w.src=null,b[Ye]=null)):ue(m)}}}function Hi(m){return m in Zt?Zt[m]:Zt[m]="on"+m}function zc(m,b){if(m.da)m=!0;else{b=new Ne(b,this);const w=m.listener,C=m.ha||m.src;m.fa&&$o(m),m=w.call(C,b)}return m}function ka(m){return m=m[Ye],m instanceof ge?m:null}var Bc="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fc(m){return typeof m=="function"?m:(m[Bc]||(m[Bc]=function(b){return m.handleEvent(b)}),m[Bc])}function Ut(){M.call(this),this.i=new ge(this),this.M=this,this.G=null}v(Ut,M),Ut.prototype[de]=!0,Ut.prototype.removeEventListener=function(m,b,w,C){Go(this,m,b,w,C)};function Jt(m,b){var w,C=m.G;if(C)for(w=[];C;C=C.G)w.push(C);if(m=m.M,C=b.type||b,typeof b=="string")b=new k(b,m);else if(b instanceof k)b.target=b.target||m;else{var K=b;b=new k(C,m),pe(b,K)}K=!0;let J,fe;if(w)for(fe=w.length-1;fe>=0;fe--)J=b.g=w[fe],K=ps(J,C,!0,b)&&K;if(J=b.g=m,K=ps(J,C,!0,b)&&K,K=ps(J,C,!1,b)&&K,w)for(fe=0;fe<w.length;fe++)J=b.g=w[fe],K=ps(J,C,!1,b)&&K}Ut.prototype.N=function(){if(Ut.Z.N.call(this),this.i){var m=this.i;for(const b in m.g){const w=m.g[b];for(let C=0;C<w.length;C++)ue(w[C]);delete m.g[b],m.h--}}this.G=null},Ut.prototype.J=function(m,b,w,C){return this.i.add(String(m),b,!1,w,C)},Ut.prototype.K=function(m,b,w,C){return this.i.add(String(m),b,!0,w,C)};function ps(m,b,w,C){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();let K=!0;for(let J=0;J<b.length;++J){const fe=b[J];if(fe&&!fe.da&&fe.capture==w){const Oe=fe.listener,Dt=fe.ha||fe.src;fe.fa&&ke(m.i,fe),K=Oe.call(Dt,C)!==!1&&K}}return K&&!C.defaultPrevented}function cg(m,b){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:l.setTimeout(m,b||0)}function _d(m){m.g=cg(()=>{m.g=null,m.i&&(m.i=!1,_d(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class In extends M{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:_d(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Va(m){M.call(this),this.h=m,this.g={}}v(Va,M);var qc=[];function Hc(m){xe(m.g,function(b,w){this.g.hasOwnProperty(w)&&$o(b)},m),m.g={}}Va.prototype.N=function(){Va.Z.N.call(this),Hc(this)},Va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gs=l.JSON.stringify,ug=l.JSON.parse,bd=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function Td(){}function Ed(){}var Ai={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cn(){k.call(this,"d")}v(cn,k);function ri(){k.call(this,"c")}v(ri,k);var Nt={},wd=null;function Ko(){return wd=wd||new Ut}Nt.Ia="serverreachability";function Sd(m){k.call(this,Nt.Ia,m)}v(Sd,k);function Gi(m){const b=Ko();Jt(b,new Sd(b))}Nt.STAT_EVENT="statevent";function Ma(m,b){k.call(this,Nt.STAT_EVENT,m),this.stat=b}v(Ma,k);function zt(m){const b=Ko();Jt(b,new Ma(b,m))}Nt.Ja="timingevent";function $i(m,b){k.call(this,Nt.Ja,m),this.size=b}v($i,k);function Ki(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},b)}function Ii(){this.g=!0}Ii.prototype.ua=function(){this.g=!1};function hg(m,b,w,C,K,J){m.info(function(){if(m.g)if(J){var fe="",Oe=J.split("&");for(let tt=0;tt<Oe.length;tt++){var Dt=Oe[tt].split("=");if(Dt.length>1){const _t=Dt[0];Dt=Dt[1];const li=_t.split("_");fe=li.length>=2&&li[1]=="type"?fe+(_t+"="+Dt+"&"):fe+(_t+"=redacted&")}}}else fe=null;else fe=J;return"XMLHTTP REQ ("+C+") [attempt "+K+"]: "+b+`
`+w+`
`+fe})}function xd(m,b,w,C,K,J,fe){m.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+K+"]: "+b+`
`+w+`
`+J+" "+fe})}function Yi(m,b,w,C){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+dg(m,w)+(C?" "+C:"")})}function Pa(m,b){m.info(function(){return"TIMEOUT: "+b})}Ii.prototype.info=function(){};function dg(m,b){if(!m.g)return b;if(!b)return null;try{const J=JSON.parse(b);if(J){for(m=0;m<J.length;m++)if(Array.isArray(J[m])){var w=J[m];if(!(w.length<2)){var C=w[1];if(Array.isArray(C)&&!(C.length<1)){var K=C[0];if(K!="noop"&&K!="stop"&&K!="close")for(let fe=1;fe<C.length;fe++)C[fe]=""}}}}return gs(J)}catch{return b}}var Oa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$c;function La(){}v(La,Td),La.prototype.g=function(){return new XMLHttpRequest},$c=new La;function Cr(m){return encodeURIComponent(String(m))}function Ad(m){var b=1;m=m.split(":");const w=[];for(;b>0&&m.length;)w.push(m.shift()),b--;return m.length&&w.push(m.join(":")),w}function Ri(m,b,w,C){this.j=m,this.i=b,this.l=w,this.S=C||1,this.V=new Va(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ci}function Ci(){this.i=null,this.g="",this.h=!1}var Bt={},sn={};function Qi(m,b,w){m.M=1,m.A=ja(qt(b)),m.u=w,m.R=!0,Yo(m,null)}function Yo(m,b){m.F=Date.now(),Xi(m),m.B=qt(m.A);var w=m.B,C=m.S;Array.isArray(C)||(C=[String(C)]),Zo(w.i,"t",C),m.C=0,w=m.j.L,m.h=new Ci,m.g=Bd(m.j,w?b:null,!m.u),m.P>0&&(m.O=new In(f(m.Y,m,m.g),m.P)),b=m.V,w=m.g,C=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(qc[0]=K.toString()),K=qc);for(let J=0;J<K.length;J++){const fe=vt(w,K[J],C||b.handleEvent,!1,b.h||b);if(!fe)break;b.g[fe.key]=fe}b=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,b)):(m.v="GET",m.g.ea(m.B,m.v,null,b)),Gi(),hg(m.i,m.v,m.B,m.l,m.S,m.u)}Ri.prototype.ba=function(m){m=m.target;const b=this.O;b&&ki(m)==3?b.j():this.Y(m)},Ri.prototype.Y=function(m){try{if(m==this.g)e:{const Oe=ki(this.g),Dt=this.g.ya(),tt=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||Oe!=4||Dt==7||(Dt==8||tt<=0?Gi(3):Gi(2)),Wi(this);var b=this.g.ca();this.X=b;var w=fg(this);if(this.o=b==200,xd(this.i,this.v,this.B,this.l,this.S,Oe,b),this.o){if(this.U&&!this.L){t:{if(this.g){var C,K=this.g;if((C=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(C)){var J=C;break t}}J=null}if(m=J)Yi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zi(this,m);else{this.o=!1,this.m=3,zt(12),Gn(this),si(this);break e}}if(this.R){m=!0;let _t;for(;!this.K&&this.C<w.length;)if(_t=Rd(this,w),_t==sn){Oe==4&&(this.m=4,zt(14),m=!1),Yi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Bt){this.m=4,zt(15),Yi(this.i,this.l,w,"[Invalid Chunk]"),m=!1;break}else Yi(this.i,this.l,_t,null),Zi(this,_t);if(Id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||w.length!=0||this.h.h||(this.m=1,zt(16),m=!1),this.o=this.o&&m,!m)Yi(this.i,this.l,w,"[Invalid Chunked Response]"),Gn(this),si(this);else if(w.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),ou(fe),fe.P=!0,zt(11))}}else Yi(this.i,this.l,w,null),Zi(this,w);Oe==4&&Gn(this),this.o&&!this.K&&(Oe==4?Ld(this.j,this):(this.o=!1,Xi(this)))}else Dr(this.g),b==400&&w.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Gn(this),si(this)}}}catch{}finally{}};function fg(m){if(!Id(m))return m.g.la();const b=un(m.g);if(b==="")return"";let w="";const C=b.length,K=ki(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Gn(m),si(m),"";m.h.i=new l.TextDecoder}for(let J=0;J<C;J++)m.h.h=!0,w+=m.h.i.decode(b[J],{stream:!(K&&J==C-1)});return b.length=0,m.h.g+=w,m.C=0,m.h.g}function Id(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Rd(m,b){var w=m.C,C=b.indexOf(`
`,w);return C==-1?sn:(w=Number(b.substring(w,C)),isNaN(w)?Bt:(C+=1,C+w>b.length?sn:(b=b.slice(C,C+w),m.C=C+w,b)))}Ri.prototype.cancel=function(){this.K=!0,Gn(this)};function Xi(m){m.T=Date.now()+m.H,Qo(m,m.H)}function Qo(m,b){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ki(f(m.aa,m),b)}function Wi(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Ri.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Pa(this.i,this.B),this.M!=2&&(Gi(),zt(17)),Gn(this),this.m=2,si(this)):Qo(this,this.T-m)};function si(m){m.j.I==0||m.K||Ld(m.j,m)}function Gn(m){Wi(m);var b=m.O;b&&typeof b.dispose=="function"&&b.dispose(),m.O=null,Hc(m.V),m.g&&(b=m.g,m.g=null,b.abort(),b.dispose())}function Zi(m,b){try{var w=m.j;if(w.I!=0&&(w.g==m||er(w.h,m))){if(!m.L&&er(w.h,m)&&w.I==3){try{var C=w.Ba.g.parse(b)}catch{C=null}if(Array.isArray(C)&&C.length==3){var K=C;if(K[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<m.F)il(w),Ss(w);else break e;Ga(w),zt(18)}}else w.xa=K[1],0<w.xa-w.K&&K[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ki(f(w.Va,w),6e3));Ji(w.h)<=1&&w.ta&&(w.ta=void 0)}else ar(w,11)}else if((m.L||w.g==m)&&il(w),!P(b))for(K=w.Ba.g.parse(b),b=0;b<K.length;b++){let tt=K[b];const _t=tt[0];if(!(_t<=w.K))if(w.K=_t,tt=tt[1],w.I==2)if(tt[0]=="c"){w.M=tt[1],w.ba=tt[2];const li=tt[3];li!=null&&(w.ka=li,w.j.info("VER="+w.ka));const or=tt[4];or!=null&&(w.za=or,w.j.info("SVER="+w.za));const Vi=tt[5];Vi!=null&&typeof Vi=="number"&&Vi>0&&(C=1.5*Vi,w.O=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Mi=m.g;if(Mi){const $a=Mi.g?Mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var J=C.h;J.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Qc(J,J.h),J.h=null))}if(C.G){const rl=Mi.g?Mi.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(C.wa=rl,rt(C.J,C.G,rl))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-m.F,w.j.info("Handshake RTT: "+w.T+"ms")),C=w;var fe=m;if(C.na=zd(C,C.L?C.ba:null,C.W),fe.L){Xc(C.h,fe);var Oe=fe,Dt=C.O;Dt&&(Oe.H=Dt),Oe.D&&(Wi(Oe),Xi(Oe)),C.g=fe}else Pd(C);w.i.length>0&&sr(w)}else tt[0]!="stop"&&tt[0]!="close"||ar(w,7);else w.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?ar(w,7):su(w):tt[0]!="noop"&&w.l&&w.l.qa(tt),w.A=0)}}Gi(4)}catch{}}var Ft=class{constructor(m,b){this.g=m,this.map=b}};function Kc(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ji(m){return m.h?1:m.g?m.g.size:0}function er(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function Qc(m,b){m.g?m.g.add(b):m.h=b}function Xc(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Kc.prototype.cancel=function(){if(this.i=Wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Wc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const w of m.g.values())b=b.concat(w.G);return b}return S(m.i)}var Cd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xo(m,b){if(m){m=m.split("&");for(let w=0;w<m.length;w++){const C=m[w].indexOf("=");let K,J=null;C>=0?(K=m[w].substring(0,C),J=m[w].substring(C+1)):K=m[w],b(K,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function $n(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;m instanceof $n?(this.l=m.l,an(this,m.j),this.o=m.o,this.g=m.g,ys(this,m.u),this.h=m.h,Zc(this,Vd(m.i)),this.m=m.m):m&&(b=String(m).match(Cd))?(this.l=!1,an(this,b[1]||"",!0),this.o=tr(b[2]||""),this.g=tr(b[3]||"",!0),ys(this,b[4]),this.h=tr(b[5]||"",!0),Zc(this,b[6]||"",!0),this.m=tr(b[7]||"")):(this.l=!1,this.i=new _s(null,this.l))}$n.prototype.toString=function(){const m=[];var b=this.j;b&&m.push(Ua(b,Wo,!0),":");var w=this.g;return(w||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Ua(b,Wo,!0),"@"),m.push(Cr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&m.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Ua(w,w.charAt(0)=="/"?Jc:Nd,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Ua(w,Dd)),m.join("")},$n.prototype.resolve=function(m){const b=qt(this);let w=!!m.j;w?an(b,m.j):w=!!m.o,w?b.o=m.o:w=!!m.g,w?b.g=m.g:w=m.u!=null;var C=m.h;if(w)ys(b,m.u);else if(w=!!m.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var K=b.h.lastIndexOf("/");K!=-1&&(C=b.h.slice(0,K+1)+C)}if(K=C,K==".."||K==".")C="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){C=K.lastIndexOf("/",0)==0,K=K.split("/");const J=[];for(let fe=0;fe<K.length;){const Oe=K[fe++];Oe=="."?C&&fe==K.length&&J.push(""):Oe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),C&&fe==K.length&&J.push("")):(J.push(Oe),C=!0)}C=J.join("/")}else C=K}return w?b.h=C:w=m.i.toString()!=="",w?Zc(b,Vd(m.i)):w=!!m.m,w&&(b.m=m.m),b};function qt(m){return new $n(m)}function an(m,b,w){m.j=w?tr(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function ys(m,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);m.u=b}else m.u=null}function Zc(m,b,w){b instanceof _s?(m.i=b,Jo(m.i,m.l)):(w||(b=Ua(b,vs)),m.i=new _s(b,m.l))}function rt(m,b,w){m.i.set(b,w)}function ja(m){return rt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function tr(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ua(m,b,w){return typeof m=="string"?(m=encodeURI(m).replace(b,Mn),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Mn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Wo=/[#\/\?@]/g,Nd=/[#\?:]/g,Jc=/[#\?]/g,vs=/[#\?@]/g,Dd=/#/g;function _s(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function Pn(m){m.g||(m.g=new Map,m.h=0,m.i&&Xo(m.i,function(b,w){m.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}n=_s.prototype,n.add=function(m,b){Pn(this),this.i=null,m=bs(this,m);let w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(b),this.h+=1,this};function kd(m,b){Pn(m),b=bs(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function eu(m,b){return Pn(m),b=bs(m,b),m.g.has(b)}n.forEach=function(m,b){Pn(this),this.g.forEach(function(w,C){w.forEach(function(K){m.call(b,K,C,this)},this)},this)};function tu(m,b){Pn(m);let w=[];if(typeof b=="string")eu(m,b)&&(w=w.concat(m.g.get(bs(m,b))));else for(m=Array.from(m.g.values()),b=0;b<m.length;b++)w=w.concat(m[b]);return w}n.set=function(m,b){return Pn(this),this.i=null,m=bs(this,m),eu(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=tu(this,m),m.length>0?String(m[0]):b):b};function Zo(m,b,w){kd(m,b),w.length>0&&(m.i=null,m.g.set(bs(m,b),S(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(let C=0;C<b.length;C++){var w=b[C];const K=Cr(w);w=tu(this,w);for(let J=0;J<w.length;J++){let fe=K;w[J]!==""&&(fe+="="+Cr(w[J])),m.push(fe)}}return this.i=m.join("&")};function Vd(m){const b=new _s;return b.i=m.i,m.g&&(b.g=new Map(m.g),b.h=m.h),b}function bs(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function Jo(m,b){b&&!m.j&&(Pn(m),m.i=null,m.g.forEach(function(w,C){const K=C.toLowerCase();C!=K&&(kd(this,C),Zo(this,K,w))},m)),m.j=b}function Ni(m,b){const w=new Ii;if(l.Image){const C=new Image;C.onload=p(ai,w,"TestLoadImage: loaded",!0,b,C),C.onerror=p(ai,w,"TestLoadImage: error",!1,b,C),C.onabort=p(ai,w,"TestLoadImage: abort",!1,b,C),C.ontimeout=p(ai,w,"TestLoadImage: timeout",!1,b,C),l.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=m}else b(!1)}function nu(m,b){const w=new Ii,C=new AbortController,K=setTimeout(()=>{C.abort(),ai(w,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:C.signal}).then(J=>{clearTimeout(K),J.ok?ai(w,"TestPingServer: ok",!0,b):ai(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(K),ai(w,"TestPingServer: error",!1,b)})}function ai(m,b,w,C,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),C(w)}catch{}}function Ts(){this.g=new bd}function nr(m){this.i=m.Sb||null,this.h=m.ab||!1}v(nr,Td),nr.prototype.g=function(){return new za(this.i,this.h)};function za(m,b){Ut.call(this),this.H=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(za,Ut),n=za.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=b,this.readyState=1,Di(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(b.body=m),(this.H||l).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;el(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function el(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?Es(this):Di(this),this.readyState==3&&el(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Es(this))},n.Na=function(m){this.g&&(this.response=m,Es(this))},n.ga=function(){this.g&&Es(this)};function Es(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Di(m)}n.setRequestHeader=function(m,b){this.A.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=b.next();return m.join(`\r
`)};function Di(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(za.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function oi(m){let b="";return xe(m,function(w,C){b+=C,b+=":",b+=w,b+=`\r
`}),b}function Ba(m,b,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=oi(w),typeof m=="string"?w!=null&&Cr(w):rt(m,b,w))}function ct(m){Ut.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ct,Ut);var ir=/^https?$/i,iu=["POST","PUT"];n=ct.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,b,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$c.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(J){Fa(this,J);return}if(m=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var K in C)w.set(K,C[K]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const J of C.keys())w.set(J,C.get(J));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(J=>J.toLowerCase()=="content-type"),K=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(iu,b,void 0)>=0)||C||K||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,fe]of w)this.g.setRequestHeader(J,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(J){Fa(this,J)}};function Fa(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.o=5,ru(m),Nr(m)}function ru(m){m.A||(m.A=!0,Jt(m,"complete"),Jt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Jt(this,"complete"),Jt(this,"abort"),Nr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nr(this,!0)),ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qa(this):this.Xa())},n.Xa=function(){qa(this)};function qa(m){if(m.h&&typeof o<"u"){if(m.v&&ki(m)==4)setTimeout(m.Ca.bind(m),0);else if(Jt(m,"readystatechange"),ki(m)==4){m.h=!1;try{const J=m.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var C;if(C=J===0){let fe=String(m.D).match(Cd)[1]||null;!fe&&l.self&&l.self.location&&(fe=l.self.location.protocol.slice(0,-1)),C=!ir.test(fe?fe.toLowerCase():"")}w=C}if(w)Jt(m,"complete"),Jt(m,"success");else{m.o=6;try{var K=ki(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",ru(m)}}finally{Nr(m)}}}}function Nr(m,b){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const w=m.g;m.g=null,b||Jt(m,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ki(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ki(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),ug(b)}};function un(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Dr(m){const b={};m=(m.g&&ki(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<m.length;C++){if(P(m[C]))continue;var w=Ad(m[C]);const K=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const J=b[K]||[];b[K]=J,J.push(w)}De(b,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(m,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||b}function ws(m){this.za=0,this.i=[],this.j=new Ii,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rr("baseRetryDelayMs",5e3,m),this.Za=rr("retryDelaySeedMs",1e4,m),this.Ta=rr("forwardChannelMaxRetries",2,m),this.va=rr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Kc(m&&m.concurrentRequestLimit),this.Ba=new Ts,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ws.prototype,n.ka=8,n.I=1,n.connect=function(m,b,w,C){zt(0),this.W=m,this.H=b||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.J=zd(this,null,this.W),sr(this)};function su(m){if(tl(m),m.I==3){var b=m.V++,w=qt(m.J);if(rt(w,"SID",m.M),rt(w,"RID",b),rt(w,"TYPE","terminate"),Ha(m,w),b=new Ri(m,m.j,b),b.M=2,b.A=ja(qt(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(b.A.toString(),"")}catch{}!w&&l.Image&&(new Image().src=b.A,w=!0),w||(b.g=Bd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Xi(b)}Ud(m)}function Ss(m){m.g&&(ou(m),m.g.cancel(),m.g=null)}function tl(m){Ss(m),m.v&&(l.clearTimeout(m.v),m.v=null),il(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function sr(m){if(!Yc(m.h)&&!m.m){m.m=!0;var b=m.Ea;te||I(),Z||(te(),Z=!0),x.add(b,m),m.D=0}}function nl(m,b){return Ji(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=b.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ki(f(m.Ea,m,b),jd(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new Ri(this,this.j,m);let J=this.o;if(this.U&&(J?(J=F(J),pe(J,this.U)):J=this.U),this.u!==null||this.R||(K.J=J,J=null),this.S)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(b+=C,b>4096){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=Md(this,K,b),w=qt(this.J),rt(w,"RID",m),rt(w,"CVER",22),this.G&&rt(w,"X-HTTP-Session-Id",this.G),Ha(this,w),J&&(this.R?b="headers="+Cr(oi(J))+"&"+b:this.u&&Ba(w,this.u,J)),Qc(this.h,K),this.Ra&&rt(w,"TYPE","init"),this.S?(rt(w,"$req",b),rt(w,"SID","null"),K.U=!0,Qi(K,w,null)):Qi(K,w,b),this.I=2}}else this.I==3&&(m?au(this,m):this.i.length==0||Yc(this.h)||au(this))};function au(m,b){var w;b?w=b.l:w=m.V++;const C=qt(m.J);rt(C,"SID",m.M),rt(C,"RID",w),rt(C,"AID",m.K),Ha(m,C),m.u&&m.o&&Ba(C,m.u,m.o),w=new Ri(m,m.j,w,m.D+1),m.u===null&&(w.J=m.o),b&&(m.i=b.G.concat(m.i)),b=Md(m,w,1e3),w.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Qc(m.h,w),Qi(w,C,b)}function Ha(m,b){m.H&&xe(m.H,function(w,C){rt(b,C,w)}),m.l&&xe({},function(w,C){rt(b,C,w)})}function Md(m,b,w){w=Math.min(m.i.length,w);const C=m.l?f(m.l.Ka,m.l,m):null;e:{var K=m.i;let Oe=-1;for(;;){const Dt=["count="+w];Oe==-1?w>0?(Oe=K[0].g,Dt.push("ofs="+Oe)):Oe=0:Dt.push("ofs="+Oe);let tt=!0;for(let _t=0;_t<w;_t++){var J=K[_t].g;const li=K[_t].map;if(J-=Oe,J<0)Oe=Math.max(0,K[_t].g-100),tt=!1;else try{J="req"+J+"_"||"";try{var fe=li instanceof Map?li:Object.entries(li);for(const[or,Vi]of fe){let Mi=Vi;u(Vi)&&(Mi=gs(Vi)),Dt.push(J+or+"="+encodeURIComponent(Mi))}}catch(or){throw Dt.push(J+"type="+encodeURIComponent("_badmap")),or}}catch{C&&C(li)}}if(tt){fe=Dt.join("&");break e}}fe=void 0}return m=m.i.splice(0,w),b.G=m,fe}function Pd(m){if(!m.g&&!m.v){m.Y=1;var b=m.Da;te||I(),Z||(te(),Z=!0),x.add(b,m),m.A=0}}function Ga(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ki(f(m.Da,m),jd(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Od(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ki(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),Ss(this),Od(this))};function ou(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Od(m){m.g=new Ri(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var b=qt(m.na);rt(b,"RID","rpc"),rt(b,"SID",m.M),rt(b,"AID",m.K),rt(b,"CI",m.F?"0":"1"),!m.F&&m.ia&&rt(b,"TO",m.ia),rt(b,"TYPE","xmlhttp"),Ha(m,b),m.u&&m.o&&Ba(b,m.u,m.o),m.O&&(m.g.H=m.O);var w=m.g;m=m.ba,w.M=1,w.A=ja(qt(b)),w.u=null,w.R=!0,Yo(w,m)}n.Va=function(){this.C!=null&&(this.C=null,Ss(this),Ga(this),zt(19))};function il(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function Ld(m,b){var w=null;if(m.g==b){il(m),ou(m),m.g=null;var C=2}else if(er(m.h,b))w=b.G,Xc(m.h,b),C=1;else return;if(m.I!=0){if(b.o)if(C==1){w=b.u?b.u.length:0,b=Date.now()-b.F;var K=m.D;C=Ko(),Jt(C,new $i(C,w)),sr(m)}else Pd(m);else if(K=b.m,K==3||K==0&&b.X>0||!(C==1&&nl(m,b)||C==2&&Ga(m)))switch(w&&w.length>0&&(b=m.h,b.i=b.i.concat(w)),K){case 1:ar(m,5);break;case 4:ar(m,10);break;case 3:ar(m,6);break;default:ar(m,2)}}}function jd(m,b){let w=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(w*=2),w*b}function ar(m,b){if(m.j.info("Error code "+b),b==2){var w=f(m.bb,m),C=m.Ua;const K=!C;C=new $n(C||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||an(C,"https"),ja(C),K?Ni(C.toString(),w):nu(C.toString(),w)}else zt(2);m.I=0,m.l&&m.l.pa(b),Ud(m),tl(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Ud(m){if(m.I=0,m.ja=[],m.l){const b=Wc(m.h);(b.length!=0||m.i.length!=0)&&(N(m.ja,b),N(m.ja,m.i),m.h.i.length=0,S(m.i),m.i.length=0),m.l.oa()}}function zd(m,b,w){var C=w instanceof $n?qt(w):new $n(w);if(C.g!="")b&&(C.g=b+"."+C.g),ys(C,C.u);else{var K=l.location;C=K.protocol,b=b?b+"."+K.hostname:K.hostname,K=+K.port;const J=new $n(null);C&&an(J,C),b&&(J.g=b),K&&ys(J,K),w&&(J.h=w),C=J}return w=m.G,b=m.wa,w&&b&&rt(C,w,b),rt(C,"VER",m.ka),Ha(m,C),C}function Bd(m,b,w){if(b&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Aa&&!m.ma?new ct(new nr({ab:w})):new ct(m.ma),b.Fa(m.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fd(){}n=Fd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function xs(){}xs.prototype.g=function(m,b){return new Rn(m,b)};function Rn(m,b){Ut.call(this),this.g=new ws(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(m?m["X-WebChannel-Client-Profile"]=b.sa:m={"X-WebChannel-Client-Profile":b.sa}),this.g.U=m,(m=b&&b.Qb)&&!P(m)&&(this.g.u=m),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!P(b)&&(this.g.G=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new kr(this)}v(Rn,Ut),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){su(this.g)},Rn.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.v&&(w={},w.__data__=gs(m),m=w);b.i.push(new Ft(b.Ya++,m)),b.I==3&&sr(b)},Rn.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,Rn.Z.N.call(this)};function qd(m){cn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const w in b){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}v(qd,cn);function Hd(){ri.call(this),this.status=1}v(Hd,ri);function kr(m){this.g=m}v(kr,Fd),kr.prototype.ra=function(){Jt(this.g,"a")},kr.prototype.qa=function(m){Jt(this.g,new qd(m))},kr.prototype.pa=function(m){Jt(this.g,new Hd)},kr.prototype.oa=function(){Jt(this.g,"b")},xs.prototype.createWebChannel=xs.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,yR=function(){return new xs},gR=function(){return Ko()},pR=Nt,cv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Oa.NO_ERROR=0,Oa.TIMEOUT=8,Oa.HTTP_ERROR=6,fm=Oa,Gc.COMPLETE="complete",mR=Gc,Ed.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",Ut.prototype.listen=Ut.prototype.J,rh=Ed,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,fR=ct}).apply(typeof Wf<"u"?Wf:typeof self<"u"?self:typeof window<"u"?window:{});const gS="@firebase/firestore",yS="4.9.2";class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");let Nc="12.3.0";const ko=new __("@firebase/firestore");function Bl(){return ko.logLevel}function ce(n,...e){if(ko.logLevel<=Ge.DEBUG){const t=e.map(E_);ko.debug(`Firestore (${Nc}): ${n}`,...t)}}function Ot(n,...e){if(ko.logLevel<=Ge.ERROR){const t=e.map(E_);ko.error(`Firestore (${Nc}): ${n}`,...t)}}function Ch(n,...e){if(ko.logLevel<=Ge.WARN){const t=e.map(E_);ko.warn(`Firestore (${Nc}): ${n}`,...t)}}function E_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ye(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,vR(n,i,t)}function vR(n,e,t){let i=`FIRESTORE (${Nc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ot(i),new Error(i)}function Te(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||vR(e,s,i)}function _e(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends us{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ts{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class e5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bn.UNAUTHENTICATED)))}shutdown(){}}class n5{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ts,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ts)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Te(typeof i.accessToken=="string",31837,{l:i}),new e5(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class i5{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class r5{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new i5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);const i=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function a5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class w_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=a5(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%62))}return i}}function Ve(n,e){return n<e?-1:n>e?1:0}function uv(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return b0(s)===b0(o)?Ve(s,o):b0(s)?1:-1}return Ve(n.length,e.length)}const o5=55296,l5=57343;function b0(n){const e=n.charCodeAt(0);return e>=o5&&e<=l5}function ac(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function _R(n){return n+"\0"}const _S="__name__";class dr{constructor(e,t,i){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ye(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const o=dr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Ve(e.length,t.length)}static compareSegments(e,t){const i=dr.isNumericId(e),s=dr.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?dr.extractNumericId(e).compare(dr.extractNumericId(t)):uv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ha.fromString(e.substring(4,e.length-2))}}class it extends dr{construct(e,t,i){return new it(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new it(t)}static emptyPath(){return new it([])}}const c5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends dr{construct(e,t,i){return new wt(e,t,i)}static isValidIdentifier(e){return c5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_S}static keyField(){return new wt([_S])}static fromServerFormat(e){const t=[];let i="",s=0;const o=()=>{if(i.length===0)throw new he(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new he(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new he(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(i+=u,s++):(o(),s++)}if(o(),l)throw new he(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(t)}static emptyPath(){return new wt([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(it.fromString(e))}static fromName(e){return new me(it.fromString(e).popFirst(5))}static empty(){return new me(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new it(e.slice()))}}function bR(n,e,t){if(!t)throw new he(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function u5(n,e,t,i){if(e===!0&&i===!0)throw new he(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bS(n){if(!me.isDocumentKey(n))throw new he(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TS(n){if(me.isDocumentKey(n))throw new he(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Sp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function Fi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sp(n);throw new he(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function id(n,e){if(!TR(n))throw new he(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new he(ie.INVALID_ARGUMENT,t);return!0}const ES=-62135596800,wS=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*wS);return new We(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ES)throw new he(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wS}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(id(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ES;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:Xt("string",We._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new We(0,0))}static max(){return new Se(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const oc=-1;class Bm{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function hv(n){return n.fields.find((e=>e.kind===2))}function fo(n){return n.fields.filter((e=>e.kind!==2))}Bm.UNKNOWN_ID=-1;class mm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Nh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Nh(0,ii.min())}}function ER(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Se.fromTimestamp(i===1e9?new We(t+1,0):new We(t,i));return new ii(s,me.empty(),e)}function wR(n){return new ii(n.readTime,n.key,oc)}class ii{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ii(Se.min(),me.empty(),oc)}static max(){return new ii(Se.max(),me.empty(),oc)}}function S_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}const SR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function xa(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==SR)throw n;ce("LocalStore","Unexpectedly lost primary lease")}class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,i)=>{t(e)}))}static reject(e){return new $(((t,i)=>{i(e)}))}static waitFor(e){return new $(((t,i)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&t()}),(d=>i(d)))})),l=!0,o===s&&t()}))}static or(e){let t=$.resolve(!1);for(const i of e)t=t.next((s=>s?$.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,o)=>{i.push(t.call(this,s,o))})),this.waitFor(i)}static mapArray(e,t){return new $(((i,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((p=>{l[f]=p,++u,u===o&&i(l)}),(p=>s(p)))}}))}static doWhile(e,t){return new $(((i,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):i()};o()}))}}const ei="SimpleDb";class xp{static open(e,t,i,s){try{return new xp(t,e.transaction(s,i))}catch(o){throw new hh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ts,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new hh(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=x_(i.target.error);this.S.reject(new hh(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(ei,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new d5(t)}}class da{static delete(e){return ce(ei,"Removing database:",e),go(JI().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!aR())return!1;if(da.F())return!0;const e=nn(),t=da.M(e),i=0<t&&t<10,s=AR(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,da.M(nn())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(ei,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const l=o.target.result;t(l)},s.onblocked=()=>{i(new hh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const l=o.target.error;l.name==="VersionError"?i(new he(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new he(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new hh(e,l))},s.onupgradeneeded=o=>{ce(ei,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,s.transaction,o.oldVersion,this.version).next((()=>{ce(ei,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const u=xp.open(this.db,e,o?"readonly":"readwrite",i),d=s(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),$.reject(f)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&l<3;if(ce(ei,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function AR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class h5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return go(this.U.delete())}}class hh extends he{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Aa(n){return n.name==="IndexedDbTransactionError"}class d5{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ce(ei,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ce(ei,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),go(i)}add(e){return ce(ei,"ADD",this.store.name,e,e),go(this.store.add(e))}get(e){return go(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(ei,"GET",this.store.name,e,t),t)))}delete(e){return ce(ei,"DELETE",this.store.name,e),go(this.store.delete(e))}count(){return ce(ei,"COUNT",this.store.name),go(this.store.count())}J(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new $(((l,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{l(d.target.result)}}))}{const o=this.cursor(i),l=[];return this.H(o,((u,d)=>{l.push(d)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new $(((s,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{s(l.target.result)}}))}Z(e,t){ce(ei,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,((o,l,u)=>u.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}te(e){const t=this.cursor({});return new $(((i,s)=>{t.onerror=o=>{const l=x_(o.target.error);s(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((u=>{u?l.continue():i()})):i()}}))}H(e,t){const i=[];return new $(((s,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void s();const d=new h5(u),f=t(u.primaryKey,u.value,d);if(f instanceof $){const p=f.catch((v=>(d.done(),$.reject(v))));i.push(p)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>$.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function go(n){return new $(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=x_(i.target.error);t(s)}}))}let SS=!1;function x_(n){const e=da.M(nn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return SS||(SS=!0,setTimeout((()=>{throw i}),0)),i}}return n}const dh="IndexBackfiller";class f5{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(dh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(dh,`Documents written: ${t}`)}catch(t){Aa(t)?ce(dh,"Ignoring IndexedDB error during index backfill: ",t):await xa(t)}await this.re(6e4)}))}}class m5{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,o=!0;return $.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return ce(dh,`Processing collection: ${l}`),this.oe(e,l,s).next((u=>{s-=u,i.add(l)}));o=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(s,o))).next((u=>(ce(dh,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,o)=>{const l=wR(o);S_(l,i)>0&&(i=l)})),new ii(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Bn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bn.ce=-1;const wo=-1;function Ap(n){return n==null}function Dh(n){return n===0&&1/n==-1/0}function IR(n){return typeof n=="number"&&Number.isInteger(n)&&!Dh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Fm="";function xn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xS(e)),e=p5(n.get(t),e);return xS(e)}function p5(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Fm:t+="";break;default:t+=o}}return t}function xS(n){return n+Fm+""}function gr(n){const e=n.length;if(Te(e>=2,64408,{path:n}),e===2)return Te(n.charAt(0)===Fm&&n.charAt(1)==="",56145,{path:n}),it.emptyPath();const t=e-2,i=[];let s="";for(let o=0;o<e;){const l=n.indexOf(Fm,o);switch((l<0||l>t)&&ye(50515,{path:n}),n.charAt(l+1)){case"":const u=n.substring(o,l);let d;s.length===0?d=u:(s+=u,d=s,s=""),i.push(d);break;case"":s+=n.substring(o,l),s+="\0";break;case"":s+=n.substring(o,l+1);break;default:ye(61167,{path:n})}o=l+2}return new it(i)}const mo="remoteDocuments",rd="owner",Ml="owner",kh="mutationQueues",g5="userId",Ui="mutations",AS="batchId",bo="userMutationsIndex",IS=["userId","batchId"];function pm(n,e){return[n,xn(e)]}function RR(n,e,t){return[n,xn(e),t]}const y5={},lc="documentMutations",qm="remoteDocumentsV14",v5=["prefixPath","collectionGroup","readTime","documentId"],gm="documentKeyIndex",_5=["prefixPath","collectionGroup","documentId"],CR="collectionGroupIndex",b5=["collectionGroup","readTime","prefixPath","documentId"],Vh="remoteDocumentGlobal",dv="remoteDocumentGlobalKey",cc="targets",NR="queryTargetsIndex",T5=["canonicalId","targetId"],uc="targetDocuments",E5=["targetId","path"],A_="documentTargetsIndex",w5=["path","targetId"],Hm="targetGlobalKey",So="targetGlobal",Mh="collectionParents",S5=["collectionId","parent"],hc="clientMetadata",x5="clientId",Ip="bundles",A5="bundleId",Rp="namedQueries",I5="name",I_="indexConfiguration",R5="indexId",fv="collectionGroupIndex",C5="collectionGroup",fh="indexState",N5=["indexId","uid"],DR="sequenceNumberIndex",D5=["uid","sequenceNumber"],mh="indexEntries",k5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kR="documentKeyIndex",V5=["indexId","uid","orderedDocumentKey"],Cp="documentOverlays",M5=["userId","collectionPath","documentId"],mv="collectionPathOverlayIndex",P5=["userId","collectionPath","largestBatchId"],VR="collectionGroupOverlayIndex",O5=["userId","collectionGroup","largestBatchId"],R_="globals",L5="name",MR=[kh,Ui,lc,mo,cc,rd,So,uc,hc,Vh,Mh,Ip,Rp],j5=[...MR,Cp],PR=[kh,Ui,lc,qm,cc,rd,So,uc,hc,Vh,Mh,Ip,Rp,Cp],OR=PR,C_=[...OR,I_,fh,mh],U5=C_,LR=[...C_,R_],z5=LR;class pv extends xR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function rn(n,e){const t=_e(n);return da.O(t.le,e)}function RS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ia(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pt{constructor(e,t){this.comparator=e,this.root=t||gn.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zf(this.root,e,this.comparator,!0)}}class Zf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??gn.RED,this.left=s??gn.EMPTY,this.right=o??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new gn(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return gn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,i,s,o){return this}insert(e,t,i){return new gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class lt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CS(this.data.getIterator())}getIteratorFrom(e){return new CS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new lt(this.comparator);return t.data=e,t}}class CS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pl(n){return n.hasNext()?n.getNext():void 0}class Fn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new Fn([])}unionWith(e){let t=new lt(wt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ac(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class UR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new UR("Invalid base64 string: "+o):o}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const B5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(n){if(Te(!!n,39018),typeof n=="string"){let e=0;const t=B5.exec(n);if(Te(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function as(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}const zR="server_timestamp",BR="__type__",FR="__previous_value__",qR="__local_write_time__";function N_(n){return(n?.mapValue?.fields||{})[BR]?.stringValue===zR}function Np(n){const e=n.mapValue.fields[FR];return N_(e)?Np(e):e}function Ph(n){const e=ss(n.mapValue.fields[qR].timestampValue);return new We(e.seconds,e.nanos)}class F5{constructor(e,t,i,s,o,l,u,d,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const Gm="(default)";class Vo{constructor(e,t){this.projectId=e,this.database=t||Gm}static empty(){return new Vo("","")}get isDefaultDatabase(){return this.database===Gm}isEqual(e){return e instanceof Vo&&e.projectId===this.projectId&&e.database===this.database}}const D_="__type__",HR="__max__",oa={mapValue:{fields:{__type__:{stringValue:HR}}}},k_="__vector__",dc="value",ym={nullValue:"NULL_VALUE"};function pa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?N_(n)?4:GR(n)?9007199254740991:Dp(n)?10:11:ye(28295,{value:n})}function xr(n,e){if(n===e)return!0;const t=pa(n);if(t!==pa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ph(n).isEqual(Ph(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=ss(s.timestampValue),u=ss(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return as(s.bytesValue).isEqual(as(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return Tt(s.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(s.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Tt(s.integerValue)===Tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Tt(s.doubleValue),u=Tt(o.doubleValue);return l===u?Dh(l)===Dh(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return ac(n.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(RS(l)!==RS(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!xr(l[d],u[d])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function Oh(n,e){return(n.values||[]).find((t=>xr(t,e)))!==void 0}function ga(n,e){if(n===e)return 0;const t=pa(n),i=pa(e);if(t!==i)return Ve(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Tt(o.integerValue||o.doubleValue),d=Tt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return NS(n.timestampValue,e.timestampValue);case 4:return NS(Ph(n),Ph(e));case 5:return uv(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=as(o),d=as(l);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const p=Ve(u[f],d[f]);if(p!==0)return p}return Ve(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Ve(Tt(o.latitude),Tt(l.latitude));return u!==0?u:Ve(Tt(o.longitude),Tt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return DS(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const u=o.fields||{},d=l.fields||{},f=u[dc]?.arrayValue,p=d[dc]?.arrayValue,v=Ve(f?.values?.length||0,p?.values?.length||0);return v!==0?v:DS(f,p)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===oa.mapValue&&l===oa.mapValue)return 0;if(o===oa.mapValue)return 1;if(l===oa.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let v=0;v<d.length&&v<p.length;++v){const _=uv(d[v],p[v]);if(_!==0)return _;const S=ga(u[d[v]],f[p[v]]);if(S!==0)return S}return Ve(d.length,p.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function NS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=ss(n),i=ss(e),s=Ve(t.seconds,i.seconds);return s!==0?s:Ve(t.nanos,i.nanos)}function DS(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const o=ga(t[s],i[s]);if(o)return o}return Ve(t.length,i.length)}function fc(n){return gv(n)}function gv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ss(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return as(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const o of t.values||[])s?s=!1:i+=",",i+=gv(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${gv(t.fields[l])}`;return s+"}"})(n.mapValue):ye(61005,{value:n})}function vm(n){switch(pa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Np(n);return e?16+vm(e):16;case 5:return 2*n.stringValue.length;case 6:return as(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+vm(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Ia(i.fields,((o,l)=>{s+=o.length+vm(l)})),s})(n.mapValue);default:throw ye(13486,{value:n})}}function Lh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yv(n){return!!n&&"integerValue"in n}function jh(n){return!!n&&"arrayValue"in n}function kS(n){return!!n&&"nullValue"in n}function VS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _m(n){return!!n&&"mapValue"in n}function Dp(n){return(n?.mapValue?.fields||{})[D_]?.stringValue===k_}function ph(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ia(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ph(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ph(n.arrayValue.values[t]);return e}return{...n}}function GR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===HR}const $R={mapValue:{fields:{[D_]:{stringValue:k_},[dc]:{arrayValue:{}}}}};function q5(n){return"nullValue"in n?ym:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lh(Vo.empty(),me.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Dp(n)?$R:{mapValue:{}}:ye(35942,{value:n})}function H5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lh(Vo.empty(),me.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?$R:"mapValue"in n?Dp(n)?{mapValue:{}}:oa:ye(61959,{value:n})}function MS(n,e){const t=ga(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function PS(n,e){const t=ga(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!_m(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ph(t)}setAll(e){let t=wt.emptyPath(),i={},s=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,i,s),i={},s=[],t=u.popLast()}l?i[u.lastSegment()]=ph(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){const t=this.field(e.popLast());_m(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];_m(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Ia(t,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new En(ph(this.value))}}function KR(n){const e=[];return Ia(n.fields,((t,i)=>{const s=new wt([t]);if(_m(i)){const o=KR(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Fn(e)}class Ct{constructor(e,t,i,s,o,l,u){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Ct(e,0,Se.min(),Se.min(),Se.min(),En.empty(),0)}static newFoundDocument(e,t,i,s){return new Ct(e,1,t,Se.min(),i,s,0)}static newNoDocument(e,t){return new Ct(e,2,t,Se.min(),Se.min(),En.empty(),0)}static newUnknownDocument(e,t){return new Ct(e,3,t,Se.min(),Se.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mc{constructor(e,t){this.position=e,this.inclusive=t}}function OS(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?i=me.comparator(me.fromName(l.referenceValue),t.key):i=ga(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function LS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xr(n.position[t],e.position[t]))return!1;return!0}class Uh{constructor(e,t="asc"){this.field=e,this.dir=t}}function G5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class YR{}class $e extends YR{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new $5(e,t,i):t==="array-contains"?new Q5(e,i):t==="in"?new e2(e,i):t==="not-in"?new X5(e,i):t==="array-contains-any"?new W5(e,i):new $e(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new K5(e,i):new Y5(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ga(t,this.value)):t!==null&&pa(this.value)===pa(t)&&this.matchesComparison(ga(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ot extends YR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ot(e,t)}matches(e){return pc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pc(n){return n.op==="and"}function vv(n){return n.op==="or"}function V_(n){return QR(n)&&pc(n)}function QR(n){for(const e of n.filters)if(e instanceof ot)return!1;return!0}function _v(n){if(n instanceof $e)return n.field.canonicalString()+n.op.toString()+fc(n.value);if(V_(n))return n.filters.map((e=>_v(e))).join(",");{const e=n.filters.map((t=>_v(t))).join(",");return`${n.op}(${e})`}}function XR(n,e){return n instanceof $e?(function(i,s){return s instanceof $e&&i.op===s.op&&i.field.isEqual(s.field)&&xr(i.value,s.value)})(n,e):n instanceof ot?(function(i,s){return s instanceof ot&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,l,u)=>o&&XR(l,s.filters[u])),!0):!1})(n,e):void ye(19439)}function WR(n,e){const t=n.filters.concat(e);return ot.create(t,n.op)}function ZR(n){return n instanceof $e?(function(t){return`${t.field.canonicalString()} ${t.op} ${fc(t.value)}`})(n):n instanceof ot?(function(t){return t.op.toString()+" {"+t.getFilters().map(ZR).join(" ,")+"}"})(n):"Filter"}class $5 extends $e{constructor(e,t,i){super(e,t,i),this.key=me.fromName(i.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class K5 extends $e{constructor(e,t){super(e,"in",t),this.keys=JR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Y5 extends $e{constructor(e,t){super(e,"not-in",t),this.keys=JR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function JR(n,e){return(e.arrayValue?.values||[]).map((t=>me.fromName(t.referenceValue)))}class Q5 extends $e{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jh(t)&&Oh(t.arrayValue,this.value)}}class e2 extends $e{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Oh(this.value.arrayValue,t)}}class X5 extends $e{constructor(e,t){super(e,"not-in",t)}matches(e){if(Oh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Oh(this.value.arrayValue,t)}}class W5 extends $e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Oh(this.value.arrayValue,i)))}}class Z5{constructor(e,t=null,i=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function bv(n,e=null,t=[],i=[],s=null,o=null,l=null){return new Z5(n,e,t,i,s,o,l)}function Mo(n){const e=_e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>_v(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Ap(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>fc(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>fc(i))).join(",")),e.Te=t}return e.Te}function sd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!G5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LS(n.startAt,e.startAt)&&LS(n.endAt,e.endAt)}function $m(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Km(n,e){return n.filters.filter((t=>t instanceof $e&&t.field.isEqual(e)))}function jS(n,e,t){let i=ym,s=!0;for(const o of Km(n,e)){let l=ym,u=!0;switch(o.op){case"<":case"<=":l=q5(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,u=!1;break;case"!=":case"not-in":l=ym}MS({value:i,inclusive:s},{value:l,inclusive:u})<0&&(i=l,s=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];MS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}function US(n,e,t){let i=oa,s=!0;for(const o of Km(n,e)){let l=oa,u=!0;switch(o.op){case">=":case">":l=H5(o.value),u=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,u=!1;break;case"!=":case"not-in":l=oa}PS({value:i,inclusive:s},{value:l,inclusive:u})>0&&(i=l,s=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];PS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}class Dc{constructor(e,t=null,i=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function t2(n,e,t,i,s,o,l,u){return new Dc(n,e,t,i,s,o,l,u)}function kp(n){return new Dc(n)}function zS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function n2(n){return n.collectionGroup!==null}function gh(n){const e=_e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new lt(wt.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Uh(o,i))})),t.has(wt.keyField().canonicalString())||e.Ie.push(new Uh(wt.keyField(),i))}return e.Ie}function ni(n){const e=_e(n);return e.Ee||(e.Ee=J5(e,gh(n))),e.Ee}function J5(n,e){if(n.limitType==="F")return bv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Uh(s.field,o)}));const t=n.endAt?new mc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mc(n.startAt.position,n.startAt.inclusive):null;return bv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Tv(n,e){const t=n.filters.concat([e]);return new Dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ym(n,e,t){return new Dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vp(n,e){return sd(ni(n),ni(e))&&n.limitType===e.limitType}function i2(n){return`${Mo(ni(n))}|lt:${n.limitType}`}function Fl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>ZR(s))).join(", ")}]`),Ap(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>fc(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>fc(s))).join(",")),`Target(${i})`})(ni(n))}; limitType=${n.limitType})`}function ad(n,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,s){for(const o of gh(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(l,u,d){const f=OS(l,u,d);return l.inclusive?f<=0:f<0})(i.startAt,gh(i),s)||i.endAt&&!(function(l,u,d){const f=OS(l,u,d);return l.inclusive?f>=0:f>0})(i.endAt,gh(i),s))})(n,e)}function r2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function s2(n){return(e,t)=>{let i=!1;for(const s of gh(n)){const o=e6(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function e6(n,e,t){const i=n.field.isKeyField()?me.comparator(e.key,t.key):(function(o,l,u){const d=l.data.field(o),f=u.data.field(o);return d!==null&&f!==null?ga(d,f):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ye(19790,{direction:n.dir})}}class hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,((t,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return jR(this.inner)}size(){return this.innerSize}}const t6=new pt(me.comparator);function ti(){return t6}const a2=new pt(me.comparator);function sh(...n){let e=a2;for(const t of n)e=e.insert(t.key,t);return e}function o2(n){let e=a2;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function yr(){return yh()}function l2(){return yh()}function yh(){return new hs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const n6=new pt(me.comparator),i6=new lt(me.comparator);function ze(...n){let e=i6;for(const t of n)e=e.add(t);return e}const r6=new lt(Ve);function M_(){return r6}function P_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dh(e)?"-0":e}}function c2(n){return{integerValue:""+n}}function s6(n,e){return IR(e)?c2(e):P_(n,e)}class Mp{constructor(){this._=void 0}}function a6(n,e,t){return n instanceof zh?(function(s,o){const l={fields:{[BR]:{stringValue:zR},[qR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&N_(o)&&(o=Np(o)),o&&(l.fields[FR]=o),{mapValue:l}})(t,e):n instanceof gc?h2(n,e):n instanceof yc?d2(n,e):(function(s,o){const l=u2(s,o),u=BS(l)+BS(s.Ae);return yv(l)&&yv(s.Ae)?c2(u):P_(s.serializer,u)})(n,e)}function o6(n,e,t){return n instanceof gc?h2(n,e):n instanceof yc?d2(n,e):t}function u2(n,e){return n instanceof Bh?(function(i){return yv(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class zh extends Mp{}class gc extends Mp{constructor(e){super(),this.elements=e}}function h2(n,e){const t=f2(e);for(const i of n.elements)t.some((s=>xr(s,i)))||t.push(i);return{arrayValue:{values:t}}}class yc extends Mp{constructor(e){super(),this.elements=e}}function d2(n,e){let t=f2(e);for(const i of n.elements)t=t.filter((s=>!xr(s,i)));return{arrayValue:{values:t}}}class Bh extends Mp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function BS(n){return Tt(n.integerValue||n.doubleValue)}function f2(n){return jh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class l6{constructor(e,t){this.field=e,this.transform=t}}function c6(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof gc&&s instanceof gc||i instanceof yc&&s instanceof yc?ac(i.elements,s.elements,xr):i instanceof Bh&&s instanceof Bh?xr(i.Ae,s.Ae):i instanceof zh&&s instanceof zh})(n.transform,e.transform)}class u6{constructor(e,t){this.version=e,this.transformResults=t}}class wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Pp{}function m2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Op(n.key,wn.none()):new kc(n.key,n.data,wn.none());{const t=n.data,i=En.empty();let s=new lt(wt.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new ds(n.key,i,new Fn(s.toArray()),wn.none())}}function h6(n,e,t){n instanceof kc?(function(s,o,l){const u=s.value.clone(),d=qS(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof ds?(function(s,o,l){if(!bm(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=qS(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(p2(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function vh(n,e,t,i){return n instanceof kc?(function(o,l,u,d){if(!bm(o.precondition,l))return u;const f=o.value.clone(),p=HS(o.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof ds?(function(o,l,u,d){if(!bm(o.precondition,l))return u;const f=HS(o.fieldTransforms,d,l),p=l.data;return p.setAll(p2(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(o,l,u){return bm(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function d6(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=u2(i.transform,s||null);o!=null&&(t===null&&(t=En.empty()),t.set(i.field,o))}return t||null}function FS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ac(i,s,((o,l)=>c6(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class kc extends Pp{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ds extends Pp{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function p2(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function qS(n,e,t){const i=new Map;Te(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);i.set(o.field,o6(l,u,t[s]))}return i}function HS(n,e,t){const i=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);i.set(s.field,a6(o,l,e))}return i}class Op extends Pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g2 extends Pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class O_{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&h6(o,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=vh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=vh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=l2();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=m2(l,u);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&ac(this.mutations,e.mutations,((t,i)=>FS(t,i)))&&ac(this.baseMutations,e.baseMutations,((t,i)=>FS(t,i)))}}class L_{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Te(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return n6})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new L_(e,t,i,s)}}class j_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class f6{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yt,Qe;function m6(n){switch(n){case ie.OK:return ye(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function y2(n){if(n===void 0)return Ot("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Yt.OK:return ie.OK;case Yt.CANCELLED:return ie.CANCELLED;case Yt.UNKNOWN:return ie.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ie.INTERNAL;case Yt.UNAVAILABLE:return ie.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ie.NOT_FOUND;case Yt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Yt.ABORTED:return ie.ABORTED;case Yt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Yt.DATA_LOSS:return ie.DATA_LOSS;default:return ye(39323,{code:n})}}(Qe=Yt||(Yt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function p6(){return new TextEncoder}const g6=new ha([4294967295,4294967295],0);function GS(n){const e=p6().encode(n),t=new dR;return t.update(e),new Uint8Array(t.digest())}function $S(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ha([t,i],0),new ha([s,o],0)]}class U_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ah(`Invalid padding: ${t}`);if(i<0)throw new ah(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ah(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ah(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ha.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(ha.fromNumber(i)));return s.compare(g6)===1&&(s=new ha([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=GS(e),[i,s]=$S(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new U_(o,s,t);return i.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=GS(e),[i,s]=$S(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ah extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class od{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,ld.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new od(Se.min(),s,new pt(Ve),ti(),ze())}}class ld{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ld(i,t,ze(),ze(),ze())}}class Tm{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class v2{constructor(e,t){this.targetId=e,this.Ce=t}}class _2{constructor(e,t,i=jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class KS{constructor(){this.ve=0,this.Fe=YS(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),i=ze();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ye(38017,{changeType:o})}})),new ld(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=YS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class y6{constructor(e){this.Ge=e,this.ze=new Map,this.je=ti(),this.Je=Jf(),this.He=Jf(),this.Ye=new pt(Ve)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if($m(o))if(i===0){const l=new me(o.path);this.et(t,l,Ct.newNoDocument(l,Se.min()))}else Te(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=as(i).toUint8Array()}catch(d){if(d instanceof UR)return Ch("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new U_(l,s,o)}catch(d){return Ch(d instanceof ah?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&$m(u.target)){const d=new me(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Ct.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let i=ze();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new od(e,t,this.Ye,this.je,i);return this.je=ti(),this.Je=Jf(),this.He=Jf(),this.Ye=new pt(Ve),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new KS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new lt(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new lt(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new KS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jf(){return new pt(me.comparator)}function YS(){return new pt(me.comparator)}const v6={asc:"ASCENDING",desc:"DESCENDING"},_6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b6={and:"AND",or:"OR"};class T6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ev(n,e){return n.useProto3Json||Ap(e)?e:{value:e}}function vc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function E6(n,e){return vc(n,e.toTimestamp())}function kn(n){return Te(!!n,49232),Se.fromTimestamp((function(t){const i=ss(t);return new We(i.seconds,i.nanos)})(n))}function z_(n,e){return wv(n,e).canonicalString()}function wv(n,e){const t=(function(s){return new it(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function T2(n){const e=it.fromString(n);return Te(N2(e),10190,{key:e.toString()}),e}function Qm(n,e){return z_(n.databaseId,e.path)}function xo(n,e){const t=T2(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(S2(t))}function E2(n,e){return z_(n.databaseId,e)}function w2(n){const e=T2(n);return e.length===4?it.emptyPath():S2(e)}function Sv(n){return new it(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function S2(n){return Te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function QS(n,e,t){return{name:Qm(n,e),fields:t.value.mapValue.fields}}function w6(n,e,t){const i=xo(n,e.name),s=kn(e.updateTime),o=e.createTime?kn(e.createTime):Se.min(),l=new En({mapValue:{fields:e.fields}}),u=Ct.newFoundDocument(i,s,o,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function S6(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ye(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(Te(p===void 0||typeof p=="string",58123),jt.fromBase64String(p||"")):(Te(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),jt.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(f){const p=f.code===void 0?ie.UNKNOWN:y2(f.code);return new he(p,f.message||"")})(l);t=new _2(i,s,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=xo(n,i.document.name),o=kn(i.document.updateTime),l=i.document.createTime?kn(i.document.createTime):Se.min(),u=new En({mapValue:{fields:i.document.fields}}),d=Ct.newFoundDocument(s,o,l,u),f=i.targetIds||[],p=i.removedTargetIds||[];t=new Tm(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=xo(n,i.document),o=i.readTime?kn(i.readTime):Se.min(),l=Ct.newNoDocument(s,o),u=i.removedTargetIds||[];t=new Tm([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=xo(n,i.document),o=i.removedTargetIds||[];t=new Tm([],o,s,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new f6(s,o),u=i.targetId;t=new v2(u,l)}}return t}function Xm(n,e){let t;if(e instanceof kc)t={update:QS(n,e.key,e.value)};else if(e instanceof Op)t={delete:Qm(n,e.key)};else if(e instanceof ds)t={update:QS(n,e.key,e.data),updateMask:N6(e.fieldMask)};else{if(!(e instanceof g2))return ye(16599,{Vt:e.type});t={verify:Qm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const u=l.transform;if(u instanceof zh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof gc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof yc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Bh)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw ye(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:E6(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye(27497)})(n,e.precondition)),t}function xv(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?wn.updateTime(kn(o.updateTime)):o.exists!==void 0?wn.exists(o.exists):wn.none()})(e.currentDocument):wn.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(l,u){let d=null;if("setToServerValue"in u)Te(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new zh;else if("appendMissingElements"in u){const p=u.appendMissingElements.values||[];d=new gc(p)}else if("removeAllFromArray"in u){const p=u.removeAllFromArray.values||[];d=new yc(p)}else"increment"in u?d=new Bh(l,u.increment):ye(16584,{proto:u});const f=wt.fromServerFormat(u.fieldPath);return new l6(f,d)})(n,s))):[];if(e.update){e.update.name;const s=xo(n,e.update.name),o=new En({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(d){const f=d.fieldPaths||[];return new Fn(f.map((p=>wt.fromServerFormat(p))))})(e.updateMask);return new ds(s,o,l,t,i)}return new kc(s,o,t,i)}if(e.delete){const s=xo(n,e.delete);return new Op(s,t)}if(e.verify){const s=xo(n,e.verify);return new g2(s,t)}return ye(1463,{proto:e})}function x6(n,e){return n&&n.length>0?(Te(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?kn(s.updateTime):kn(o);return l.isEqual(Se.min())&&(l=kn(o)),new u6(l,s.transformResults||[])})(t,e)))):[]}function x2(n,e){return{documents:[E2(n,e.path)]}}function A2(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=E2(n,s);const o=(function(f){if(f.length!==0)return C2(ot.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((p=>(function(_){return{field:ql(_.field),direction:I6(_.dir)}})(p)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Ev(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function I2(n){let e=w2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Te(i===1,65062);const p=t.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=(function(v){const _=R2(v);return _ instanceof ot&&V_(_)?_.getFilters():[_]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((_=>(function(N){return new Uh(Hl(N.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(_)))})(t.orderBy));let u=null;t.limit&&(u=(function(v){let _;return _=typeof v=="object"?v.value:v,Ap(_)?null:_})(t.limit));let d=null;t.startAt&&(d=(function(v){const _=!!v.before,S=v.values||[];return new mc(S,_)})(t.startAt));let f=null;return t.endAt&&(f=(function(v){const _=!v.before,S=v.values||[];return new mc(S,_)})(t.endAt)),t2(e,s,l,o,u,"F",d,f)}function A6(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function R2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Hl(t.unaryFilter.field);return $e.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Hl(t.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hl(t.unaryFilter.field);return $e.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Hl(t.unaryFilter.field);return $e.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return $e.create(Hl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ot.create(t.compositeFilter.filters.map((i=>R2(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function I6(n){return v6[n]}function R6(n){return _6[n]}function C6(n){return b6[n]}function ql(n){return{fieldPath:n.canonicalString()}}function Hl(n){return wt.fromServerFormat(n.fieldPath)}function C2(n){return n instanceof $e?(function(t){if(t.op==="=="){if(VS(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NAN"}};if(kS(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(VS(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NAN"}};if(kS(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(t.field),op:R6(t.op),value:t.value}}})(n):n instanceof ot?(function(t){const i=t.getFilters().map((s=>C2(s)));return i.length===1?i[0]:{compositeFilter:{op:C6(t.op),filters:i}}})(n):ye(54877,{filter:n})}function N6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function N2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Wr{constructor(e,t,i,s,o=Se.min(),l=Se.min(),u=jt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class D2{constructor(e){this.yt=e}}function D6(n,e){let t;if(e.document)t=w6(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=me.fromSegments(e.noDocument.path),s=Oo(e.noDocument.readTime);t=Ct.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const i=me.fromSegments(e.unknownDocument.path),s=Oo(e.unknownDocument.version);t=Ct.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const o=new We(s[0],s[1]);return Se.fromTimestamp(o)})(e.readTime)),t}function XS(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Wm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,l){return{name:Qm(o,l.key),fields:l.data.value.mapValue.fields,updateTime:vc(o,l.version.toTimestamp()),createTime:vc(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Po(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Po(e.version)}}return i}function Wm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Po(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oo(n){const e=new We(n.seconds,n.nanoseconds);return Se.fromTimestamp(e)}function yo(n,e){const t=(e.baseMutations||[]).map((o=>xv(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>xv(n.yt,o))),s=We.fromMillis(e.localWriteTimeMs);return new O_(e.batchId,s,t,i)}function oh(n){const e=Oo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Oo(n.lastLimboFreeSnapshotVersion):Se.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return Te(l===1,1966,{count:l}),ni(kp(w2(o.documents[0])))})(n.query):(function(o){return ni(I2(o))})(n.query),new Wr(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,jt.fromBase64String(n.resumeToken))}function k2(n,e){const t=Po(e.snapshotVersion),i=Po(e.lastLimboFreeSnapshotVersion);let s;s=$m(e.target)?x2(n.yt,e.target):A2(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function V2(n){const e=I2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ym(e,e.limit,"L"):e}function T0(n,e){return new j_(e.largestBatchId,xv(n.yt,e.overlayMutation))}function WS(n,e){const t=e.path.lastSegment();return[n,xn(e.path.popLast()),t]}function ZS(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Po(i.readTime),documentKey:xn(i.documentKey.path),largestBatchId:i.largestBatchId}}class k6{getBundleMetadata(e,t){return JS(e).get(t).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:Oo(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,t){return JS(e).put((function(s){return{bundleId:s.id,createTime:Po(kn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return ex(e).get(t).next((i=>{if(i)return(function(o){return{name:o.name,query:V2(o.bundledQuery),readTime:Oo(o.readTime)}})(i)}))}saveNamedQuery(e,t){return ex(e).put((function(s){return{name:s.name,readTime:Po(kn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function JS(n){return rn(n,Ip)}function ex(n){return rn(n,Rp)}class Lp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Lp(e,i)}getOverlay(e,t){return Ku(e).get(WS(this.userId,t)).next((i=>i?T0(this.serializer,i):null))}getOverlays(e,t){const i=yr();return $.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((o,l)=>{const u=new j_(t,l);s.push(this.St(e,u))})),$.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((l=>s.add(xn(l.getCollectionPath()))));const o=[];return s.forEach((l=>{const u=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(Ku(e).Z(mv,u))})),$.waitFor(o)}getOverlaysForCollection(e,t,i){const s=yr(),o=xn(t),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ku(e).J(mv,l).next((u=>{for(const d of u){const f=T0(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const o=yr();let l;const u=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ku(e).ee({index:VR,range:u},((d,f,p)=>{const v=T0(this.serializer,f);o.size()<s||v.largestBatchId===l?(o.set(v.getKey(),v),l=v.largestBatchId):p.done()})).next((()=>o))}St(e,t){return Ku(e).put((function(s,o,l){const[u,d,f]=WS(o,l.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Xm(s.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Ku(n){return rn(n,Cp)}class V6{bt(e){return rn(e,R_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?jt.fromUint8Array(i):jt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class vo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Tt(e.integerValue));else if("doubleValue"in e){const i=Tt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Dh(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=ss(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(as(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?GR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Dp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ye(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const s=dc,o=i[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Tt(o)),this.Ot(s,t),this.Ct(i[s],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),me.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}vo.Kt=new vo;const Ol=255;function M6(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function tx(n){const e=64-(function(i){let s=0;for(let o=0;o<8;++o){const l=M6(255&i[o]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class P6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),i=tx(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=tx(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Ol),this.sn(255)}_n(){this.an(Ol),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ol?(this.sn(Ol),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ol?(this.an(Ol),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class O6{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class L6{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Yu{constructor(){this.cn=new P6,this.ln=new O6(this.cn),this.hn=new L6(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class _o{constructor(e,t,i,s){this.Tn=e,this.In=t,this.En=i,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new _o(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Em(this.En),directionalValue:Em(this.dn),orderedDocumentKey:Em(t),documentKey:i.path.toArray()}}Vn(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Ys(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=nx(n.En,e.En),t!==0?t:(t=nx(n.dn,e.dn),t!==0?t:me.comparator(n.In,e.In)))}function nx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Em(n){return sR()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function ix(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class rx{constructor(e){this.mn=new lt(((t,i)=>wt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Te(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=hv(e);if(t!==void 0&&!this.wn(t))return!1;const i=fo(e);let s=new Set,o=0,l=0;for(;o<i.length&&this.wn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=i[o];if(!this.Sn(u,d)||!this.bn(this.fn[l++],d))return!1}++o}for(;o<i.length;++o){const u=i[o];if(l>=this.fn.length||!this.bn(this.fn[l++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new lt(wt.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new mm(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new mm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new mm(i.field,i.dir==="asc"?0:1)));return new Bm(Bm.UNKNOWN_ID,this.collectionId,t,Nh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function M2(n){if(Te(n instanceof $e||n instanceof ot,20012),n instanceof $e){if(n instanceof e2){const t=n.value.arrayValue?.values?.map((i=>$e.create(n.field,"==",i)))||[];return ot.create(t,"or")}return n}const e=n.filters.map((t=>M2(t)));return ot.create(e,n.op)}function j6(n){if(n.getFilters().length===0)return[];const e=Rv(M2(n));return Te(P2(e),7391),Av(e)||Iv(e)?[e]:e.getFilters()}function Av(n){return n instanceof $e}function Iv(n){return n instanceof ot&&V_(n)}function P2(n){return Av(n)||Iv(n)||(function(t){if(t instanceof ot&&vv(t)){for(const i of t.getFilters())if(!Av(i)&&!Iv(i))return!1;return!0}return!1})(n)}function Rv(n){if(Te(n instanceof $e||n instanceof ot,34018),n instanceof $e)return n;if(n.filters.length===1)return Rv(n.filters[0]);const e=n.filters.map((i=>Rv(i)));let t=ot.create(e,n.op);return t=Zm(t),P2(t)?t:(Te(t instanceof ot,64498),Te(pc(t),40251),Te(t.filters.length>1,57927),t.filters.reduce(((i,s)=>B_(i,s))))}function B_(n,e){let t;return Te(n instanceof $e||n instanceof ot,38388),Te(e instanceof $e||e instanceof ot,25473),t=n instanceof $e?e instanceof $e?(function(s,o){return ot.create([s,o],"and")})(n,e):sx(n,e):e instanceof $e?sx(e,n):(function(s,o){if(Te(s.filters.length>0&&o.filters.length>0,48005),pc(s)&&pc(o))return WR(s,o.getFilters());const l=vv(s)?s:o,u=vv(s)?o:s,d=l.filters.map((f=>B_(f,u)));return ot.create(d,"or")})(n,e),Zm(t)}function sx(n,e){if(pc(e))return WR(e,n.getFilters());{const t=e.filters.map((i=>B_(n,i)));return ot.create(t,"or")}}function Zm(n){if(Te(n instanceof $e||n instanceof ot,11850),n instanceof $e)return n;const e=n.getFilters();if(e.length===1)return Zm(e[0]);if(QR(n))return n;const t=e.map((s=>Zm(s))),i=[];return t.forEach((s=>{s instanceof $e?i.push(s):s instanceof ot&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:ot.create(i,n.op)}class U6{constructor(){this.Cn=new F_}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(ii.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(ii.min())}updateCollectionGroup(e,t,i){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class F_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new lt(it.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new lt(it.comparator)).toArray()}}const ax="IndexedDbIndexManager",em=new Uint8Array(0);class z6{constructor(e,t){this.databaseId=t,this.vn=new F_,this.Fn=new hs((i=>Mo(i)),((i,s)=>sd(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:i,parent:xn(s)};return ox(e).put(o)}return $.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[_R(t),""],!1,!0);return ox(e).J(s).next((o=>{for(const l of o){if(l.collectionId!==t)break;i.push(gr(l.parent))}return i}))}addFieldIndex(e,t){const i=Qu(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=i.add(s);if(t.indexState){const l=jl(e);return o.next((u=>{l.put(ZS(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const i=Qu(e),s=jl(e),o=Ll(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Qu(e),i=Ll(e),s=jl(e);return t.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return $.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const o=new rx(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const i=Ll(e);let s=!0;const o=new Map;return $.forEach(this.Mn(t),(l=>this.xn(e,l).next((u=>{s&&(s=!!u),o.set(l,u)})))).next((()=>{if(s){let l=ze();const u=[];return $.forEach(o,((d,f)=>{ce(ax,`Using index ${(function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map((Y=>`${Y.fieldPath}:${Y.kind}`)).join(",")}`})(d)} to execute ${Mo(t)}`);const p=(function(O,Y){const te=hv(Y);if(te===void 0)return null;for(const Z of Km(O,te.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null})(f,d),v=(function(O,Y){const te=new Map;for(const Z of fo(Y))for(const x of Km(O,Z.fieldPath))switch(x.op){case"==":case"in":te.set(Z.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return te.set(Z.fieldPath.canonicalString(),x.value),Array.from(te.values())}return null})(f,d),_=(function(O,Y){const te=[];let Z=!0;for(const x of fo(Y)){const I=x.kind===0?jS(O,x.fieldPath,O.startAt):US(O,x.fieldPath,O.startAt);te.push(I.value),Z&&(Z=I.inclusive)}return new mc(te,Z)})(f,d),S=(function(O,Y){const te=[];let Z=!0;for(const x of fo(Y)){const I=x.kind===0?US(O,x.fieldPath,O.endAt):jS(O,x.fieldPath,O.endAt);te.push(I.value),Z&&(Z=I.inclusive)}return new mc(te,Z)})(f,d),N=this.On(d,f,_),R=this.On(d,f,S),D=this.Nn(d,f,v),L=this.Bn(d.indexId,p,N,_.inclusive,R,S.inclusive,D);return $.forEach(L,(B=>i.Y(B,t.limit).next((O=>{O.forEach((Y=>{const te=me.fromSegments(Y.documentKey);l.has(te)||(l=l.add(te),u.push(te))}))}))))})).next((()=>u))}return $.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=j6(ot.create(e.filters,"and")).map((i=>bv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,s,o,l,u){const d=(t!=null?t.length:1)*Math.max(i.length,o.length),f=d/(t!=null?t.length:1),p=[];for(let v=0;v<d;++v){const _=t?this.Ln(t[v/f]):em,S=this.kn(e,_,i[v%f],s),N=this.qn(e,_,o[v%f],l),R=u.map((D=>this.kn(e,_,D,!0)));p.push(...this.createRange(S,N,R))}return p}kn(e,t,i,s){const o=new _o(e,me.empty(),t,i);return s?o:o.An()}qn(e,t,i,s){const o=new _o(e,me.empty(),t,i);return s?o.An():o}xn(e,t){const i=new rx(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let l=null;for(const u of o)i.yn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l}))}getIndexType(e,t){let i=2;const s=this.Mn(t);return $.forEach(s,(o=>this.xn(e,o).next((l=>{l?i!==0&&l.fields.length<(function(d){let f=new lt(wt.comparator),p=!1;for(const v of d.filters)for(const _ of v.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?p=!0:f=f.add(_.field));for(const v of d.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(p?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&i===2?1:i))}Qn(e,t){const i=new Yu;for(const s of fo(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const l=i.Pn(s.kind);vo.Kt.Dt(o,l)}return i.un()}Ln(e){const t=new Yu;return vo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Yu;return vo.Kt.Dt(Lh(this.databaseId,t),i.Pn((function(o){const l=fo(o);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let s=[];s.push(new Yu);let o=0;for(const l of fo(e)){const u=i[o++];for(const d of s)if(this.Un(t,l.fieldPath)&&jh(u))s=this.Kn(s,l,u);else{const f=d.Pn(l.kind);vo.Kt.Dt(u,f)}}return this.Wn(s)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const s=[...e],o=[];for(const l of i.arrayValue.values||[])for(const u of s){const d=new Yu;d.seed(u.un()),vo.Kt.Dt(l,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((i=>i instanceof $e&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Qu(e),s=jl(e);return(t?i.J(fv,IDBKeyRange.bound(t,t)):i.J()).next((o=>{const l=[];return $.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{l.push((function(p,v){const _=v?new Nh(v.sequenceNumber,new ii(Oo(v.readTime),new me(gr(v.documentKey)),v.largestBatchId)):Nh.empty(),S=p.fields.map((([N,R])=>new mm(wt.fromServerFormat(N),R)));return new Bm(p.indexId,p.collectionGroup,S,_)})(u,d))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Ve(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=Qu(e),o=jl(e);return this.Gn(e).next((l=>s.J(fv,IDBKeyRange.bound(t,t)).next((u=>$.forEach(u,(d=>o.put(ZS(d.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return $.forEach(t,((s,o)=>{const l=i.get(s.collectionGroup);return(l?$.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(i.set(s.collectionGroup,u),$.forEach(u,(d=>this.zn(e,s,d).next((f=>{const p=this.jn(o,d);return f.isEqual(p)?$.resolve():this.Jn(e,o,d,f,p)})))))))}))}Hn(e,t,i,s){return Ll(e).put(s.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,s){return Ll(e).delete(s.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const s=Ll(e);let o=new lt(Ys);return s.ee({index:kR,range:IDBKeyRange.only([i.indexId,this.uid,Em(this.$n(i,t))])},((l,u)=>{o=o.add(new _o(i.indexId,t,ix(u.arrayValue),ix(u.directionalValue)))})).next((()=>o))}jn(e,t){let i=new lt(Ys);const s=this.Qn(t,e);if(s==null)return i;const o=hv(t);if(o!=null){const l=e.data.field(o.fieldPath);if(jh(l))for(const u of l.arrayValue.values||[])i=i.add(new _o(t.indexId,e.key,this.Ln(u),s))}else i=i.add(new _o(t.indexId,e.key,em,s));return i}Jn(e,t,i,s,o){ce(ax,"Updating index entries for document '%s'",t.key);const l=[];return(function(d,f,p,v,_){const S=d.getIterator(),N=f.getIterator();let R=Pl(S),D=Pl(N);for(;R||D;){let L=!1,B=!1;if(R&&D){const O=p(R,D);O<0?B=!0:O>0&&(L=!0)}else R!=null?B=!0:L=!0;L?(v(D),D=Pl(N)):B?(_(R),R=Pl(S)):(R=Pl(S),D=Pl(N))}})(s,o,Ys,(u=>{l.push(this.Hn(e,t,i,u))}),(u=>{l.push(this.Yn(e,t,i,u))})),$.waitFor(l)}Gn(e){let t=1;return jl(e).ee({index:DR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,u)=>Ys(l,u))).filter(((l,u,d)=>!u||Ys(l,d[u-1])!==0));const s=[];s.push(e);for(const l of i){const u=Ys(l,e),d=Ys(l,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(l),s.push(l.An());else if(d>0)break}s.push(t);const o=[];for(let l=0;l<s.length;l+=2){if(this.Zn(s[l],s[l+1]))return[];const u=s[l].Vn(this.uid,em,me.empty()),d=s[l+1].Vn(this.uid,em,me.empty());o.push(IDBKeyRange.bound(u,d))}return o}Zn(e,t){return Ys(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lx)}getMinOffset(e,t){return $.mapArray(this.Mn(t),(i=>this.xn(e,i).next((s=>s||ye(44426))))).next(lx)}}function ox(n){return rn(n,Mh)}function Ll(n){return rn(n,mh)}function Qu(n){return rn(n,I_)}function jl(n){return rn(n,fh)}function lx(n){Te(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;S_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ii(e.readTime,e.documentKey,t)}const cx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O2=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function L2(n,e,t){const i=n.store(Ui),s=n.store(lc),o=[],l=IDBKeyRange.only(t.batchId);let u=0;const d=i.ee({range:l},((p,v,_)=>(u++,_.delete())));o.push(d.next((()=>{Te(u===1,47070,{batchId:t.batchId})})));const f=[];for(const p of t.mutations){const v=RR(e,p.key.path,t.batchId);o.push(s.delete(v)),f.push(p.key)}return $.waitFor(o).next((()=>f))}function Jm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ye(14731);e=n.noDocument}return JSON.stringify(e).length}Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(O2,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);class jp{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,t,i,s){Te(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new jp(o,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).ee({index:bo,range:i},((s,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const o=Gl(e),l=Qs(e);return l.add({}).next((u=>{Te(typeof u=="number",49019);const d=new O_(u,t,i,s),f=(function(S,N,R){const D=R.baseMutations.map((B=>Xm(S.yt,B))),L=R.mutations.map((B=>Xm(S.yt,B)));return{userId:N,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:D,mutations:L}})(this.serializer,this.userId,d),p=[];let v=new lt(((_,S)=>Ve(_.canonicalString(),S.canonicalString())));for(const _ of s){const S=RR(this.userId,_.key.path,u);v=v.add(_.key.path.popLast()),p.push(l.put(f)),p.push(o.put(S,y5))}return v.forEach((_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),$.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,t){return Qs(e).get(t).next((i=>i?(Te(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),yo(this.serializer,i)):null))}er(e,t){return this.Xn[t]?$.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Qs(e).ee({index:bo,range:s},((l,u,d)=>{u.userId===this.userId&&(Te(u.batchId>=i,47524,{tr:i}),o=yo(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=wo;return Qs(e).ee({index:bo,range:t,reverse:!0},((s,o,l)=>{i=o.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,wo],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).J(bo,t).next((i=>i.map((s=>yo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=pm(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=[];return Gl(e).ee({range:s},((l,u,d)=>{const[f,p,v]=l,_=gr(p);if(f===this.userId&&t.path.isEqual(_))return Qs(e).get(v).next((S=>{if(!S)throw ye(61480,{nr:l,batchId:v});Te(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:v}),o.push(yo(this.serializer,S))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new lt(Ve);const s=[];return t.forEach((o=>{const l=pm(this.userId,o.path),u=IDBKeyRange.lowerBound(l),d=Gl(e).ee({range:u},((f,p,v)=>{const[_,S,N]=f,R=gr(S);_===this.userId&&o.path.isEqual(R)?i=i.add(N):v.done()}));s.push(d)})),$.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,o=pm(this.userId,i),l=IDBKeyRange.lowerBound(o);let u=new lt(Ve);return Gl(e).ee({range:l},((d,f,p)=>{const[v,_,S]=d,N=gr(_);v===this.userId&&i.isPrefixOf(N)?N.length===s&&(u=u.add(S)):p.done()})).next((()=>this.rr(e,u)))}rr(e,t){const i=[],s=[];return t.forEach((o=>{s.push(Qs(e).get(o).next((l=>{if(l===null)throw ye(35274,{batchId:o});Te(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),i.push(yo(this.serializer,l))})))})),$.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return L2(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),$.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return Gl(e).ee({range:i},((o,l,u)=>{if(o[0]===this.userId){const d=gr(o[1]);s.push(d)}else u.done()})).next((()=>{Te(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return j2(e,this.userId,t)}_r(e){return U2(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:wo,lastStreamToken:""}))}}function j2(n,e,t){const i=pm(e,t.path),s=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return Gl(n).ee({range:o,X:!0},((u,d,f)=>{const[p,v,_]=u;p===e&&v===s&&(l=!0),f.done()})).next((()=>l))}function Qs(n){return rn(n,Ui)}function Gl(n){return rn(n,lc)}function U2(n){return rn(n,kh)}class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}class B6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Lo(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Se.fromTimestamp(new We(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ul(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(Te(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let s=0;const o=[];return Ul(e).ee(((l,u)=>{const d=oh(u);d.sequenceNumber<=t&&i.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>$.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Ul(e).ee(((i,s)=>{const o=oh(s);t(o)}))}lr(e){return ux(e).get(Hm).next((t=>(Te(t!==null,2888),t)))}hr(e,t){return ux(e).put(Hm,t)}Pr(e,t){return Ul(e).put(k2(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Mo(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Ul(e).ee({range:s,index:NR},((l,u,d)=>{const f=oh(u);sd(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,i){const s=[],o=ea(e);return t.forEach((l=>{const u=xn(l.path);s.push(o.put({targetId:i,path:u})),s.push(this.referenceDelegate.addReference(e,i,l))})),$.waitFor(s)}removeMatchingKeys(e,t,i){const s=ea(e);return $.forEach(t,(o=>{const l=xn(o.path);return $.waitFor([s.delete([i,l]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,t){const i=ea(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=ea(e);let o=ze();return s.ee({range:i,X:!0},((l,u,d)=>{const f=gr(l[1]),p=new me(f);o=o.add(p)})).next((()=>o))}containsKey(e,t){const i=xn(t.path),s=IDBKeyRange.bound([i],[_R(i)],!1,!0);let o=0;return ea(e).ee({index:A_,X:!0,range:s},(([l,u],d,f)=>{l!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Ul(e).get(t).next((i=>i?oh(i):null))}}function Ul(n){return rn(n,cc)}function ux(n){return rn(n,So)}function ea(n){return rn(n,uc)}const hx="LruGarbageCollector",z2=1048576;function dx([n,e],[t,i]){const s=Ve(n,t);return s===0?Ve(e,i):s}class F6{constructor(e){this.Ir=e,this.buffer=new lt(dx),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();dx(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class B2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(hx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Aa(t)?ce(hx,"Ignoring IndexedDB error during garbage collection: ",t):await xa(t)}await this.Vr(3e5)}))}}class q6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Bn.ce);const i=new F6(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(cx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cx):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,o,l,u,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(i=v,u=Date.now(),this.removeTargets(e,i,t)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Bl()<=Ge.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function F2(n,e){return new q6(n,e)}class H6{constructor(e,t){this.db=e,this.garbageCollector=F2(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,s)=>t(s)))}addReference(e,t,i){return tm(e,i)}removeReference(e,t,i){return tm(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return tm(e,t)}br(e,t){return(function(s,o){let l=!1;return U2(s).te((u=>j2(s,u,o).next((d=>(d&&(l=!0),$.resolve(!d)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((l,u)=>{if(u<=t){const d=this.br(e,l).next((f=>{if(!f)return o++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Se.min()),ea(e).delete((function(v){return[0,xn(v.path)]})(l)))))}));s.push(d)}})).next((()=>$.waitFor(s))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return tm(e,t)}Sr(e,t){const i=ea(e);let s,o=Bn.ce;return i.ee({index:A_},(([l,u],{path:d,sequenceNumber:f})=>{l===0?(o!==Bn.ce&&t(new me(gr(s)),o),o=f,s=d):o=Bn.ce})).next((()=>{o!==Bn.ce&&t(new me(gr(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tm(n,e){return ea(n).put((function(i,s){return{targetId:0,path:xn(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class q2{constructor(){this.changes=new hs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?$.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class G6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return lo(e).put(i)}removeEntry(e,t,i){return lo(e).delete((function(o,l){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Wm(l),u[u.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Ct.newInvalidDocument(t);return lo(e).ee({index:gm,range:IDBKeyRange.only(Xu(t))},((s,o)=>{i=this.Cr(t,o)})).next((()=>i))}vr(e,t){let i={size:0,document:Ct.newInvalidDocument(t)};return lo(e).ee({index:gm,range:IDBKeyRange.only(Xu(t))},((s,o)=>{i={document:this.Cr(t,o),size:Jm(o)}})).next((()=>i))}getEntries(e,t){let i=ti();return this.Fr(e,t,((s,o)=>{const l=this.Cr(s,o);i=i.insert(s,l)})).next((()=>i))}Mr(e,t){let i=ti(),s=new pt(me.comparator);return this.Fr(e,t,((o,l)=>{const u=this.Cr(o,l);i=i.insert(o,u),s=s.insert(o,Jm(l))})).next((()=>({documents:i,Or:s})))}Fr(e,t,i){if(t.isEmpty())return $.resolve();let s=new lt(px);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Xu(s.first()),Xu(s.last())),l=s.getIterator();let u=l.getNext();return lo(e).ee({index:gm,range:o},((d,f,p)=>{const v=me.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&px(u,v)<0;)i(u,null),u=l.getNext();u&&u.isEqual(v)&&(i(u,f),u=l.hasNext()?l.getNext():null),u?p.j(Xu(u)):p.done()})).next((()=>{for(;u;)i(u,null),u=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,o){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),Wm(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lo(e).J(IDBKeyRange.bound(u,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let p=ti();for(const v of f){const _=this.Cr(me.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);_.isFoundDocument()&&(ad(t,_)||s.has(_.key))&&(p=p.insert(_.key,_))}return p}))}getAllFromCollectionGroup(e,t,i,s){let o=ti();const l=mx(t,i),u=mx(t,ii.max());return lo(e).ee({index:CR,range:IDBKeyRange.bound(l,u,!0)},((d,f,p)=>{const v=this.Cr(me.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===s&&p.done()})).next((()=>o))}newChangeBuffer(e){return new $6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return fx(e).get(dv).next((t=>(Te(!!t,20021),t)))}Dr(e,t){return fx(e).put(dv,t)}Cr(e,t){if(t){const i=D6(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Se.min())))return i}return Ct.newInvalidDocument(e)}}function H2(n){return new G6(n)}class $6 extends q2{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new hs((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new lt(((o,l)=>Ve(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),l.isValidDocument()){const d=XS(this.Nr.serializer,l);s=s.add(o.path.popLast());const f=Jm(d);i+=f-u.size,t.push(this.Nr.addEntry(e,o,d))}else if(i-=u.size,this.trackRemovals){const d=XS(this.Nr.serializer,l.convertToNoDocument(Se.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,i)),$.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:s})=>(s.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:i.get(o).readTime})})),i)))}}function fx(n){return rn(n,Vh)}function lo(n){return rn(n,qm)}function Xu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mx(n,e){const t=e.documentKey.path.toArray();return[n,Wm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function px(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(s=Ve(t[o],i[o]),s)return s;return s=Ve(t.length,i.length),s||(s=Ve(t[t.length-2],i[i.length-2]),s||Ve(t[t.length-1],i[i.length-1]))}class K6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class G2{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&vh(i.mutation,s,Fn.empty(),We.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const s=yr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((o=>{let l=sh();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=yr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const s=[];return i.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,i,s){let o=ti();const l=yh(),u=(function(){return yh()})();return t.forEach(((d,f)=>{const p=i.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof ds)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),vh(p.mutation,f,p.mutation.getFieldMask(),We.now())):l.set(f.key,Fn.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,p)=>l.set(f,p))),t.forEach(((f,p)=>u.set(f,new K6(p,l.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const i=yh();let s=new pt(((l,u)=>l-u)),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let p=i.get(d)||Fn.empty();p=u.applyToLocalView(f,p),i.set(d,p);const v=(s.get(u.batchId)||ze()).add(d);s=s.insert(u.batchId,v)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,p=d.value,v=l2();p.forEach((_=>{if(!o.has(_)){const S=m2(t.get(_),i.get(_));S!==null&&v.set(_,S),o=o.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return $.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(l){return me.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):n2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):$.resolve(yr());let u=oc,d=o;return l.next((f=>$.forEach(f,((p,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(p)?$.resolve():this.remoteDocumentCache.getEntry(e,p).next((_=>{d=d.insert(p,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,ze()))).next((p=>({batchId:u,changes:o2(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((i=>{let s=sh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const o=t.collectionGroup;let l=sh();return this.indexManager.getCollectionParents(e,o).next((u=>$.forEach(u,(d=>{const f=(function(v,_){return new Dc(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((p=>{p.forEach(((v,_)=>{l=l.insert(v,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s)))).next((l=>{o.forEach(((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,Ct.newInvalidDocument(p)))}));let u=sh();return l.forEach(((d,f)=>{const p=o.get(d);p!==void 0&&vh(p.mutation,f,Fn.empty(),We.now()),ad(t,f)&&(u=u.insert(d,f))})),u}))}}class Y6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:kn(s.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:V2(s.bundledQuery),readTime:kn(s.readTime)}})(t)),$.resolve()}}class Q6{constructor(){this.overlays=new pt(me.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const i=yr();return $.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,o)=>{this.St(e,t,o)})),$.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),$.resolve()}getOverlaysForCollection(e,t,i){const s=yr(),o=t.length+1,l=new me(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new pt(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=yr(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=yr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,p)=>u.set(f,p))),!(u.size()>=s)););return $.resolve(u)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new j_(t,i));let o=this.qr.get(t);o===void 0&&(o=ze(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}class X6{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}class q_{constructor(){this.Qr=new lt(ln.$r),this.Ur=new lt(ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new ln(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new ln(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new me(new it([])),i=new ln(t,e),s=new ln(t,e+1),o=[];return this.Ur.forEachInRange([i,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new me(new it([])),i=new ln(t,e),s=new ln(t,e+1);let o=ze();return this.Ur.forEachInRange([i,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new ln(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class ln{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return me.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||me.comparator(e.key,t.key)}}class W6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new lt(ln.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new O_(o,t,i,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new ln(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return $.resolve(l)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),o=s<0?0:s;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?wo:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new ln(t,0),s=new ln(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(l=>{const u=this.Xr(l.Yr);o.push(u)})),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new lt(Ve);return t.forEach((s=>{const o=new ln(s,0),l=new ln(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{i=i.add(u.Yr)}))})),$.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let o=i;me.isDocumentKey(o)||(o=o.child(""));const l=new ln(new me(o),0);let u=new lt(Ve);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),l),$.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Te(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return $.forEach(t.mutations,(s=>{const o=new ln(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new ln(t,0),s=this.Zr.firstAfterOrEqual(i);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Z6{constructor(e){this.ri=e,this.docs=(function(){return new pt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return $.resolve(i?i.document.mutableCopy():Ct.newInvalidDocument(t))}getEntries(e,t){let i=ti();return t.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ct.newInvalidDocument(s))})),$.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=ti();const l=t.path,u=new me(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||S_(wR(p),i)<=0||(s.has(p.key)||ad(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,i,s){ye(9500)}ii(e,t){return $.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new J6(this)}getSize(e){return $.resolve(this.size)}}class J6 extends q2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class eL{constructor(e){this.persistence=e,this.si=new hs((t=>Mo(t)),sd),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new q_,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,i){let s=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&i.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),$.waitFor(o).next((()=>s))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return $.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),$.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return $.resolve(i)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}}class H_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Bn(0),this.li=!1,this.li=!0,this.hi=new X6,this.referenceDelegate=e(this),this.Pi=new eL(this),this.indexManager=new U6,this.remoteDocumentCache=(function(s){return new Z6(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new D2(t),this.Ii=new Y6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Q6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new W6(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const s=new tL(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return $.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class tL extends xR{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Ri=new q_,this.Vi=null}static mi(e){return new Up(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),$.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(i=>{const s=me.fromPath(i);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ep{constructor(e,t){this.persistence=e,this.pi=new hs((i=>xn(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=F2(this,t)}static mi(e,t){return new ep(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return $.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?$.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((u=>{u||(i++,o.removeEntry(l,Se.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vm(e.data.value)),t}br(e,t,i){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return $.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class nL{constructor(e){this.serializer=e}k(e,t,i,s){const o=new xp("createOrUpgrade",t);i<1&&s>=1&&((function(d){d.createObjectStore(rd)})(e),(function(d){d.createObjectStore(kh,{keyPath:g5}),d.createObjectStore(Ui,{keyPath:AS,autoIncrement:!0}).createIndex(bo,IS,{unique:!0}),d.createObjectStore(lc)})(e),gx(e),(function(d){d.createObjectStore(mo)})(e));let l=$.resolve();return i<3&&s>=3&&(i!==0&&((function(d){d.deleteObjectStore(uc),d.deleteObjectStore(cc),d.deleteObjectStore(So)})(e),gx(e)),l=l.next((()=>(function(d){const f=d.store(So),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return f.put(Hm,p)})(o)))),i<4&&s>=4&&(i!==0&&(l=l.next((()=>(function(d,f){return f.store(Ui).J().next((v=>{d.deleteObjectStore(Ui),d.createObjectStore(Ui,{keyPath:AS,autoIncrement:!0}).createIndex(bo,IS,{unique:!0});const _=f.store(Ui),S=v.map((N=>_.put(N)));return $.waitFor(S)}))})(e,o)))),l=l.next((()=>{(function(d){d.createObjectStore(hc,{keyPath:x5})})(e)}))),i<5&&s>=5&&(l=l.next((()=>this.yi(o)))),i<6&&s>=6&&(l=l.next((()=>((function(d){d.createObjectStore(Vh)})(e),this.wi(o))))),i<7&&s>=7&&(l=l.next((()=>this.Si(o)))),i<8&&s>=8&&(l=l.next((()=>this.bi(e,o)))),i<9&&s>=9&&(l=l.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(l=l.next((()=>this.Di(o)))),i<11&&s>=11&&(l=l.next((()=>{(function(d){d.createObjectStore(Ip,{keyPath:A5})})(e),(function(d){d.createObjectStore(Rp,{keyPath:I5})})(e)}))),i<12&&s>=12&&(l=l.next((()=>{(function(d){const f=d.createObjectStore(Cp,{keyPath:M5});f.createIndex(mv,P5,{unique:!1}),f.createIndex(VR,O5,{unique:!1})})(e)}))),i<13&&s>=13&&(l=l.next((()=>(function(d){const f=d.createObjectStore(qm,{keyPath:v5});f.createIndex(gm,_5),f.createIndex(CR,b5)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(mo)))),i<14&&s>=14&&(l=l.next((()=>this.Fi(e,o)))),i<15&&s>=15&&(l=l.next((()=>(function(d){d.createObjectStore(I_,{keyPath:R5,autoIncrement:!0}).createIndex(fv,C5,{unique:!1}),d.createObjectStore(fh,{keyPath:N5}).createIndex(DR,D5,{unique:!1}),d.createObjectStore(mh,{keyPath:k5}).createIndex(kR,V5,{unique:!1})})(e)))),i<16&&s>=16&&(l=l.next((()=>{t.objectStore(fh).clear()})).next((()=>{t.objectStore(mh).clear()}))),i<17&&s>=17&&(l=l.next((()=>{(function(d){d.createObjectStore(R_,{keyPath:L5})})(e)}))),i<18&&s>=18&&sR()&&(l=l.next((()=>{t.objectStore(fh).clear()})).next((()=>{t.objectStore(mh).clear()}))),l}wi(e){let t=0;return e.store(mo).ee(((i,s)=>{t+=Jm(s)})).next((()=>{const i={byteSize:t};return e.store(Vh).put(dv,i)}))}yi(e){const t=e.store(kh),i=e.store(Ui);return t.J().next((s=>$.forEach(s,(o=>{const l=IDBKeyRange.bound([o.userId,wo],[o.userId,o.lastAcknowledgedBatchId]);return i.J(bo,l).next((u=>$.forEach(u,(d=>{Te(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=yo(this.serializer,d);return L2(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(uc),i=e.store(mo);return e.store(So).get(Hm).next((s=>{const o=[];return i.ee(((l,u)=>{const d=new it(l),f=(function(v){return[0,xn(v)]})(d);o.push(t.get(f).next((p=>p?$.resolve():(v=>t.put({targetId:0,path:xn(v),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>$.waitFor(o)))}))}bi(e,t){e.createObjectStore(Mh,{keyPath:S5});const i=t.store(Mh),s=new F_,o=l=>{if(s.add(l)){const u=l.lastSegment(),d=l.popLast();return i.put({collectionId:u,parent:xn(d)})}};return t.store(mo).ee({X:!0},((l,u)=>{const d=new it(l);return o(d.popLast())})).next((()=>t.store(lc).ee({X:!0},(([l,u,d],f)=>{const p=gr(u);return o(p.popLast())}))))}Di(e){const t=e.store(cc);return t.ee(((i,s)=>{const o=oh(s),l=k2(this.serializer,o);return t.put(l)}))}Ci(e,t){const i=t.store(mo),s=[];return i.ee(((o,l)=>{const u=t.store(qm),d=(function(v){return v.document?new me(it.fromString(v.document.name).popFirst(5)):v.noDocument?me.fromSegments(v.noDocument.path):v.unknownDocument?me.fromSegments(v.unknownDocument.path):ye(36783)})(l).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(u.put(f))})).next((()=>$.waitFor(s)))}Fi(e,t){const i=t.store(Ui),s=H2(this.serializer),o=new H_(Up.mi,this.serializer.yt);return i.J().next((l=>{const u=new Map;return l.forEach((d=>{let f=u.get(d.userId)??ze();yo(this.serializer,d).keys().forEach((p=>f=f.add(p))),u.set(d.userId,f)})),$.forEach(u,((d,f)=>{const p=new bn(f),v=Lp.wt(this.serializer,p),_=o.getIndexManager(p),S=jp.wt(p,this.serializer,_,o.referenceDelegate);return new G2(s,S,v,_).recalculateAndSaveOverlaysForDocumentKeys(new pv(t,Bn.ce),d).next()}))}))}}function gx(n){n.createObjectStore(uc,{keyPath:E5}).createIndex(A_,w5,{unique:!0}),n.createObjectStore(cc,{keyPath:"targetId"}).createIndex(NR,T5,{unique:!0}),n.createObjectStore(So)}const Xs="IndexedDbPersistence",E0=18e5,w0=5e3,S0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",iL="main";class G_{constructor(e,t,i,s,o,l,u,d,f,p,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=o,this.window=l,this.document=u,this.xi=f,this.Oi=p,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!G_.v())throw new he(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new H6(this,s),this.$i=t+iL,this.serializer=new D2(d),this.Ui=new da(this.$i,this.Ni,new nL(this.serializer)),this.hi=new V6,this.Pi=new B6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=H2(this.serializer),this.Ii=new k6,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&Ot(Xs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(ie.FAILED_PRECONDITION,S0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Bn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>nm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Aa(e))return ce(Xs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(Xs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Wu(e).get(Ml).next((t=>$.resolve(this.es(t))))}ts(e){return nm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,E0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=rn(t,hc);return i.J().next((s=>{const o=this.ss(s,E0),l=s.filter((u=>o.indexOf(u)===-1));return $.forEach(l,(u=>i.delete(u.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?$.resolve(!0):Wu(e).get(Ml).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,w0)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new he(ie.FAILED_PRECONDITION,S0);return!1}}return!(!this.networkEnabled||!this.inForeground)||nm(e).J().next((i=>this.ss(i,w0).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||l&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(Xs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[rd,hc],(e=>{const t=new pv(e,Bn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>nm(e).J().next((t=>this.ss(t,E0).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return jp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Lp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce(Xs,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?z5:d===17?LR:d===16?U5:d===15?C_:d===14?OR:d===13?PR:d===12?j5:d===11?MR:void ye(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,s,o,(u=>(l=new pv(u,this.ci?this.ci.next():Bn.ce),t==="readwrite-primary"?this.Hi(l).next((d=>!!d||this.Yi(l))).next((d=>{if(!d)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new he(ie.FAILED_PRECONDITION,SR);return i(l)})).next((d=>this.Xi(l).next((()=>d)))):this.Is(l).next((()=>i(l)))))).then((u=>(l.raiseOnCommittedEvent(),u)))}Is(e){return Wu(e).get(Ml).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,w0)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(ie.FAILED_PRECONDITION,S0)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wu(e).put(Ml,t)}static v(){return da.v()}Zi(e){const t=Wu(e);return t.get(Ml).next((i=>this.es(i)?(ce(Xs,"Releasing primary lease."),t.delete(Ml)):$.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Ot(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;rR()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ce(Xs,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ot(Xs,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wu(n){return rn(n,rd)}function nm(n){return rn(n,hc)}function $2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $_{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=ze(),s=ze();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new $_(e,t.fromCache,i,s)}}class rL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class K2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rR()?8:AR(nn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new rL;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Bl()<=Ge.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Fl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Bl()<=Ge.DEBUG&&ce("QueryEngine","Query:",Fl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Bl()<=Ge.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Fl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(t))):$.resolve())}ys(e,t){if(zS(t))return $.resolve(null);let i=ni(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Ym(t,null,"F"),i=ni(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=ze(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,l,d.readTime)?this.ys(e,Ym(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,i,s){return zS(t)||s.isEqual(Se.min())?$.resolve(null):this.ps.getDocuments(e,i).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,i,s)?$.resolve(null):(Bl()<=Ge.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fl(t)),this.vs(e,l,t,ER(s,oc)).next((u=>u)))}))}Ds(e,t){let i=new lt(s2(e));return t.forEach(((s,o)=>{ad(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,i){return Bl()<=Ge.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Fl(t)),this.ps.getDocumentsMatchingQuery(e,t,ii.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}const K_="LocalStore",sL=3e8;class aL{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new pt(Ve),this.xs=new hs((o=>Mo(o)),sd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Y2(n,e,t,i){return new aL(n,e,t,i)}async function Q2(n,e){const t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],u=[];let d=ze();for(const f of s){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of o){u.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return t.localDocuments.getDocuments(i,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:u})))}))}))}function oL(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,p){const v=f.batch,_=v.keys();let S=$.resolve();return _.forEach((N=>{S=S.next((()=>p.getEntry(d,N))).next((R=>{const D=f.docVersions.get(N);Te(D!==null,48541),R.version.compareTo(D)<0&&(v.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),p.addEntry(R)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(d,v)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let d=ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function X2(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function lL(n,e){const t=_e(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((p,v)=>{const _=s.get(v);if(!_)return;u.push(t.Pi.removeMatchingKeys(o,p.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,p.addedDocuments,v))));let S=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,i)),s=s.insert(v,S),(function(R,D,L){return R.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=sL?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(_,S,p)&&u.push(t.Pi.updateTargetData(o,S))}));let d=ti(),f=ze();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))})),u.push(cL(o,l,e.documentUpdates).next((p=>{d=p.ks,f=p.qs}))),!i.isEqual(Se.min())){const p=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));u.push(p)}return $.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function cL(n,e,t){let i=ze(),s=ze();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=ti();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Se.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):ce(K_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function uL(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=wo),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function tp(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((o=>o?(s=o,$.resolve(s)):t.Pi.allocateTargetId(i).next((l=>(s=new Wr(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function _c(n,e,t){const i=_e(n),s=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Aa(l))throw l;ce(K_,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function Cv(n,e,t){const i=_e(n);let s=Se.min(),o=ze();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,p){const v=_e(d),_=v.xs.get(p);return _!==void 0?$.resolve(v.Ms.get(_)):v.Pi.getTargetData(f,p)})(i,l,ni(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?s:Se.min(),t?o:ze()))).next((u=>(J2(i,r2(e),u),{documents:u,Qs:o})))))}function W2(n,e){const t=_e(n),i=_e(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,e).next((l=>l?l.target:null))))}function Z2(n,e){const t=_e(n),i=t.Os.get(e)||Se.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,ER(i,oc),Number.MAX_SAFE_INTEGER))).then((s=>(J2(t,e,s),s)))}function J2(n,e,t){let i=n.Os.get(e)||Se.min();t.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}const eC="firestore_clients";function yx(n,e){return`${eC}_${n}_${e}`}const tC="firestore_mutations";function vx(n,e,t){let i=`${tC}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const nC="firestore_targets";function x0(n,e){return`${nC}_${n}_${e}`}const mr="SharedClientState";class np{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Ws(e,t,i){const s=JSON.parse(i);let o,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(o=new he(s.error.code,s.error.message))),l?new np(e,t,s.state,o):(Ot(mr,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _h{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new he(i.error.code,i.error.message))),o?new _h(e,i.state,s):(Ot(mr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ip{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=M_();for(let l=0;s&&l<i.activeTargetIds.length;++l)s=IR(i.activeTargetIds[l]),o=o.add(i.activeTargetIds[l]);return s?new ip(e,o):(Ot(mr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Y_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Y_(t.clientId,t.onlineState):(Ot(mr,`Failed to parse online state: ${e}`),null)}}class Nv{constructor(){this.activeTargetIds=M_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A0{constructor(e,t,i,s,o){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new pt(Ve),this.started=!1,this.Xs=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=yx(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Nv),this.ro=new RegExp(`^${eC}_${l}_([^_]*)$`),this.io=new RegExp(`^${tC}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${nC}_${l}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(yx(this.persistenceKey,i));if(s){const o=ip.Ws(i,s);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(x0(this.persistenceKey,e));if(s){const o=_h.Ws(e,s);o&&(i=o.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(x0(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(mr,"READ",e,t),t}setItem(e,t){ce(mr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(mr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ce(mr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(o){let l=Bn.ce;if(o!=null)try{const u=JSON.parse(o);Te(typeof u=="number",30636,{So:o}),l=u}catch(u){Ot(mr,"Failed to read sequence number from WebStorage",u)}return l})(t.newValue);i!==Bn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const s=new np(this.currentUser,e,t,i),o=vx(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Gs())}Po(e){const t=vx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const s=x0(this.persistenceKey,e),o=new _h(e,t,i);this.setItem(s,o.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return ip.Ws(i,t)}fo(e,t){const i=this.io.exec(e),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return np.Ws(new bn(o),s,t)}yo(e,t){const i=this.so.exec(e),s=Number(i[1]);return _h.Ws(s,t)}uo(e){return Y_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ce(mr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),o=this.lo(i),l=[],u=[];return o.forEach((d=>{s.has(d)||l.push(d)})),s.forEach((d=>{o.has(d)||u.push(d)})),this.syncEngine.Fo(l,u).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=M_();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class iC{constructor(){this.Mo=new Nv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Nv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hL{Oo(e){}shutdown(){}}const _x="ConnectivityMonitor";class bx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(_x,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(_x,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let im=null;function Dv(){return im===null?im=(function(){return 268435456+Math.round(2147483648*Math.random())})():im++,"0x"+im.toString(16)}const I0="RestConnection",dL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Gm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,o){const l=Dv(),u=this.zo(e,t.toUriEncodedString());ce(I0,`Sending RPC '${e}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),p=Rc(f);return this.Jo(e,u,d,i,p).then((v=>(ce(I0,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw Ch(I0,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",i),v}))}Ho(e,t,i,s,o,l){return this.Go(e,t,i,s,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const i=dL[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class mL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const _n="WebChannelConnection";class pL extends fL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,o){const l=Dv();return new Promise(((u,d)=>{const f=new fR;f.setWithCredentials(!0),f.listenOnce(mR.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case fm.NO_ERROR:const v=f.getResponseJson();ce(_n,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case fm.TIMEOUT:ce(_n,`RPC '${e}' ${l} timed out`),d(new he(ie.DEADLINE_EXCEEDED,"Request time out"));break;case fm.HTTP_ERROR:const _=f.getStatus();if(ce(_n,`RPC '${e}' ${l} failed with status:`,_,"response text:",f.getResponseText()),_>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S?.error;if(N&&N.status&&N.message){const R=(function(L){const B=L.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(B)>=0?B:ie.UNKNOWN})(N.status);d(new he(R,N.message))}else d(new he(ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new he(ie.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ce(_n,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(s);ce(_n,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",p,i,15)}))}T_(e,t,i){const s=Dv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=yR(),u=gR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const p=o.join("");ce(_n,`Creating RPC '${e}' stream ${s}: ${p}`,d);const v=l.createWebChannel(p,d);this.I_(v);let _=!1,S=!1;const N=new mL({Yo:D=>{S?ce(_n,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(_||(ce(_n,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),ce(_n,`RPC '${e}' stream ${s} sending:`,D),v.send(D))},Zo:()=>v.close()}),R=(D,L,B)=>{D.listen(L,(O=>{try{B(O)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return R(v,rh.EventType.OPEN,(()=>{S||(ce(_n,`RPC '${e}' stream ${s} transport opened.`),N.o_())})),R(v,rh.EventType.CLOSE,(()=>{S||(S=!0,ce(_n,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(v))})),R(v,rh.EventType.ERROR,(D=>{S||(S=!0,Ch(_n,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),N.a_(new he(ie.UNAVAILABLE,"The operation could not be completed")))})),R(v,rh.EventType.MESSAGE,(D=>{if(!S){const L=D.data[0];Te(!!L,16349);const B=L,O=B?.error||B[0]?.error;if(O){ce(_n,`RPC '${e}' stream ${s} received error:`,O);const Y=O.status;let te=(function(I){const V=Yt[I];if(V!==void 0)return y2(V)})(Y),Z=O.message;te===void 0&&(te=ie.INTERNAL,Z="Unknown error status: "+Y+" with message "+O.message),S=!0,N.a_(new he(te,Z)),v.close()}else ce(_n,`RPC '${e}' stream ${s} received:`,L),N.u_(L)}})),R(u,pR.STAT_EVENT,(D=>{D.stat===cv.PROXY?ce(_n,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===cv.NOPROXY&&ce(_n,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function rC(){return typeof window<"u"?window:null}function wm(){return typeof document<"u"?document:null}function zp(n){return new T6(n,!0)}class sC{constructor(e,t,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Tx="PersistentStream";class aC{constructor(e,t,i,s,o,l,u,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ot(t.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new he(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Tx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Tx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gL extends aC{constructor(e,t,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=S6(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Se.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Se.min():l.readTime?kn(l.readTime):Se.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Sv(this.serializer),t.addTarget=(function(o,l){let u;const d=l.target;if(u=$m(d)?{documents:x2(o,d)}:{query:A2(o,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=b2(o,l.resumeToken);const f=Ev(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(Se.min())>0){u.readTime=vc(o,l.snapshotVersion.toTimestamp());const f=Ev(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const i=A6(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Sv(this.serializer),t.removeTarget=e,this.q_(t)}}class yL extends aC{constructor(e,t,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=x6(e.writeResults,e.commitTime),i=kn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Sv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Xm(this.serializer,i)))};this.q_(t)}}class vL{}class _L extends vL{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new he(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,wv(t,i),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(ie.UNKNOWN,o.toString())}))}Ho(e,t,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,wv(t,i),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ie.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ot(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const jo="RemoteStore";class TL{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{qo(this)&&(ce(jo,"Restarting streams for network reachability change."),await(async function(d){const f=_e(d);f.Ea.add(4),await cd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Bp(f)})(this))}))})),this.Ra=new bL(i,s)}}async function Bp(n){if(qo(n))for(const e of n.da)await e(!0)}async function cd(n){for(const e of n.da)await e(!1)}function Fp(n,e){const t=_e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),W_(t)?X_(t):Mc(t).O_()&&Q_(t,e))}function bc(n,e){const t=_e(n),i=Mc(t);t.Ia.delete(e),i.O_()&&oC(t,e),t.Ia.size===0&&(i.O_()?i.L_():qo(t)&&t.Ra.set("Unknown"))}function Q_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mc(n).Y_(e)}function oC(n,e){n.Va.Ue(e),Mc(n).Z_(e)}function X_(n){n.Va=new y6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Mc(n).start(),n.Ra.ua()}function W_(n){return qo(n)&&!Mc(n).x_()&&n.Ia.size>0}function qo(n){return _e(n).Ea.size===0}function lC(n){n.Va=void 0}async function EL(n){n.Ra.set("Online")}async function wL(n){n.Ia.forEach(((e,t)=>{Q_(n,e)}))}async function SL(n,e){lC(n),W_(n)?(n.Ra.ha(e),X_(n)):n.Ra.set("Unknown")}async function xL(n,e,t){if(n.Ra.set("Online"),e instanceof _2&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(n,e)}catch(i){ce(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await rp(n,i)}else if(e instanceof Tm?n.Va.Ze(e):e instanceof v2?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const i=await X2(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.Ia.get(f);p&&o.Ia.set(f,p.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,f)=>{const p=o.Ia.get(d);if(!p)return;o.Ia.set(d,p.withResumeToken(jt.EMPTY_BYTE_STRING,p.snapshotVersion)),oC(o,d);const v=new Wr(p.target,d,f,p.sequenceNumber);Q_(o,v)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(i){ce(jo,"Failed to raise snapshot:",i),await rp(n,i)}}async function rp(n,e,t){if(!Aa(e))throw e;n.Ea.add(1),await cd(n),n.Ra.set("Offline"),t||(t=()=>X2(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(jo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Bp(n)}))}function cC(n,e){return e().catch((t=>rp(n,t,e)))}async function Vc(n){const e=_e(n),t=ya(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wo;for(;AL(e);)try{const s=await uL(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,IL(e,s)}catch(s){await rp(e,s)}uC(e)&&hC(e)}function AL(n){return qo(n)&&n.Ta.length<10}function IL(n,e){n.Ta.push(e);const t=ya(n);t.O_()&&t.X_&&t.ea(e.mutations)}function uC(n){return qo(n)&&!ya(n).x_()&&n.Ta.length>0}function hC(n){ya(n).start()}async function RL(n){ya(n).ra()}async function CL(n){const e=ya(n);for(const t of n.Ta)e.ea(t.mutations)}async function NL(n,e,t){const i=n.Ta.shift(),s=L_.from(i,e,t);await cC(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Vc(n)}async function DL(n,e){e&&ya(n).X_&&await(async function(i,s){if((function(l){return m6(l)&&l!==ie.ABORTED})(s.code)){const o=i.Ta.shift();ya(i).B_(),await cC(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Vc(i)}})(n,e),uC(n)&&hC(n)}async function Ex(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),ce(jo,"RemoteStore received new credentials");const i=qo(t);t.Ea.add(3),await cd(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Bp(t)}async function kv(n,e){const t=_e(n);e?(t.Ea.delete(2),await Bp(t)):e||(t.Ea.add(2),await cd(t),t.Ra.set("Unknown"))}function Mc(n){return n.ma||(n.ma=(function(t,i,s){const o=_e(t);return o.sa(),new gL(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:EL.bind(null,n),t_:wL.bind(null,n),r_:SL.bind(null,n),H_:xL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),W_(n)?X_(n):n.Ra.set("Unknown")):(await n.ma.stop(),lC(n))}))),n.ma}function ya(n){return n.fa||(n.fa=(function(t,i,s){const o=_e(t);return o.sa(),new yL(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:RL.bind(null,n),r_:DL.bind(null,n),ta:CL.bind(null,n),na:NL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Vc(n)):(await n.fa.stop(),n.Ta.length>0&&(ce(jo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Z_{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){const l=Date.now()+i,u=new Z_(e,t,l,s,o);return u.start(i),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function J_(n,e){if(Ot("AsyncQueue",`${e}: ${n}`),Aa(n))return new he(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Jl{static emptySet(e){return new Jl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||me.comparator(t.key,i.key):(t,i)=>me.comparator(t.key,i.key),this.keyedMap=sh(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Jl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class wx{constructor(){this.ga=new pt(me.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Tc{constructor(e,t,i,s,o,l,u,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,s,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Tc(e,t,Jl.emptySet(t),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class kL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class VL{constructor(){this.queries=Sx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=_e(t),o=s.queries;s.queries=Sx(),o.forEach(((l,u)=>{for(const d of u.Sa)d.onError(i)}))})(this,new he(ie.ABORTED,"Firestore shutting down"))}}function Sx(){return new hs((n=>i2(n)),Vp)}async function dC(n,e){const t=_e(n);let i=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new kL,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=J_(l,`Initialization of query '${Fl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&eb(t)}async function fC(n,e){const t=_e(n),i=e.query;let s=3;const o=t.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ML(n,e){const t=_e(n);let i=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(s)&&(i=!0);l.wa=s}}i&&eb(t)}function PL(n,e,t){const i=_e(n),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);i.queries.delete(e)}function eb(n){n.Ca.forEach((e=>{e.next()}))}var Vv,xx;(xx=Vv||(Vv={})).Ma="default",xx.Cache="cache";class mC{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Tc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vv.Cache}}class pC{constructor(e){this.key=e}}class gC{constructor(e){this.key=e}}class OL{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=s2(e),this.tu=new Jl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new wx,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((p,v)=>{const _=s.get(p),S=ad(this.query,v)?v:null,N=!!_&&this.mutatedKeys.has(_.key),R=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let D=!1;_&&S?_.data.isEqual(S.data)?N!==R&&(i.track({type:3,doc:S}),D=!0):this.su(_,S)||(i.track({type:2,doc:S}),D=!0,(d&&this.eu(S,d)>0||f&&this.eu(S,f)<0)&&(u=!0)):!_&&S?(i.track({type:0,doc:S}),D=!0):_&&!S&&(i.track({type:1,doc:_}),D=!0,(d||f)&&(u=!0)),D&&(S?(l=l.add(S),o=R?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{tu:l,iu:i,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((p,v)=>(function(S,N){const R=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:D})}};return R(S)-R(N)})(p.type,v.type)||this.eu(p.doc,v.doc))),this.ou(i),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new Tc(this.query,e.tu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new gC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new pC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Tc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pc="SyncEngine";class LL{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class jL{constructor(e){this.key=e,this.hu=!1}}class UL{constructor(e,t,i,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new hs((u=>i2(u)),Vp),this.Iu=new Map,this.Eu=new Set,this.du=new pt(me.comparator),this.Au=new Map,this.Ru=new q_,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zL(n,e,t=!0){const i=qp(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await yC(i,e,t,!0),s}async function BL(n,e){const t=qp(n);await yC(t,e,!0,!1)}async function yC(n,e,t,i){const s=await tp(n.localStore,ni(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return i&&(u=await tb(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&Fp(n.remoteStore,s),u}async function tb(n,e,t,i,s){n.pu=(v,_,S)=>(async function(R,D,L,B){let O=D.view.ru(L);O.Cs&&(O=await Cv(R.localStore,D.query,!1).then((({documents:x})=>D.view.ru(x,O))));const Y=B&&B.targetChanges.get(D.targetId),te=B&&B.targetMismatches.get(D.targetId)!=null,Z=D.view.applyChanges(O,R.isPrimaryClient,Y,te);return Mv(R,D.targetId,Z.au),Z.snapshot})(n,v,_,S);const o=await Cv(n.localStore,e,!0),l=new OL(e,o.Qs),u=l.ru(o.documents),d=ld.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),f=l.applyChanges(u,n.isPrimaryClient,d);Mv(n,t,f.au);const p=new LL(e,t,l);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function FL(n,e,t){const i=_e(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((l=>!Vp(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await _c(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&bc(i.remoteStore,s.targetId),Ec(i,s.targetId)})).catch(xa)):(Ec(i,s.targetId),await _c(i.localStore,s.targetId,!0))}async function qL(n,e){const t=_e(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),bc(t.remoteStore,i.targetId))}async function HL(n,e,t){const i=sb(n);try{const s=await(function(l,u){const d=_e(l),f=We.now(),p=u.reduce(((S,N)=>S.add(N.key)),ze());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let N=ti(),R=ze();return d.Ns.getEntries(S,p).next((D=>{N=D,N.forEach(((L,B)=>{B.isValidDocument()||(R=R.add(L))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,N))).next((D=>{v=D;const L=[];for(const B of u){const O=d6(B,v.get(B.key).overlayedDocument);O!=null&&L.push(new ds(B.key,O,KR(O.value.mapValue),wn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,L,u)})).next((D=>{_=D;const L=D.applyToLocalDocumentSet(v,R);return d.documentOverlayCache.saveOverlays(S,D.batchId,L)}))})).then((()=>({batchId:_.batchId,changes:o2(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new pt(Ve)),f=f.insert(u,d),l.Vu[l.currentUser.toKey()]=f})(i,s.batchId,t),await Ra(i,s.changes),await Vc(i.remoteStore)}catch(s){const o=J_(s,"Failed to persist write");t.reject(o)}}async function vC(n,e){const t=_e(n);try{const i=await lL(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Te(l.hu,14607):s.removedDocuments.size>0&&(Te(l.hu,42227),l.hu=!1))})),await Ra(t,i,e)}catch(i){await xa(i)}}function Ax(n,e,t){const i=_e(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=_e(l);d.onlineState=u;let f=!1;d.queries.forEach(((p,v)=>{for(const _ of v.Sa)_.va(u)&&(f=!0)})),f&&eb(d)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GL(n,e,t){const i=_e(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new pt(me.comparator);l=l.insert(o,Ct.newNoDocument(o,Se.min()));const u=ze().add(o),d=new od(Se.min(),new Map,new pt(Ve),l,u);await vC(i,d),i.du=i.du.remove(o),i.Au.delete(e),rb(i)}else await _c(i.localStore,e,!1).then((()=>Ec(i,e,t))).catch(xa)}async function $L(n,e){const t=_e(n),i=e.batch.batchId;try{const s=await oL(t.localStore,e);ib(t,i,null),nb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ra(t,s)}catch(s){await xa(s)}}async function KL(n,e,t){const i=_e(n);try{const s=await(function(l,u){const d=_e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return d.mutationQueue.lookupMutationBatch(f,u).next((v=>(Te(v!==null,37113),p=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>d.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);ib(i,e,t),nb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ra(i,s)}catch(s){await xa(s)}}function nb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ib(n,e,t){const i=_e(n);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Ec(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||_C(n,i)}))}function _C(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(bc(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),rb(n))}function Mv(n,e,t){for(const i of t)i instanceof pC?(n.Ru.addReference(i.key,e),YL(n,i)):i instanceof gC?(ce(Pc,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||_C(n,i.key)):ye(19791,{wu:i})}function YL(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ce(Pc,"New document in limbo: "+t),n.Eu.add(i),rb(n))}function rb(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new me(it.fromString(e)),i=n.fu.next();n.Au.set(i,new jL(t)),n.du=n.du.insert(t,i),Fp(n.remoteStore,new Wr(ni(kp(t.path)),i,"TargetPurposeLimboResolution",Bn.ce))}}async function Ra(n,e,t){const i=_e(n),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,d)=>{l.push(i.pu(d,e,t).then((f=>{if((f||t)&&i.isPrimaryClient){const p=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(f){s.push(f);const p=$_.As(d.targetId,f);o.push(p)}})))})),await Promise.all(l),i.Pu.H_(s),await(async function(d,f){const p=_e(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>$.forEach(f,(_=>$.forEach(_.Es,(S=>p.persistence.referenceDelegate.addReference(v,_.targetId,S))).next((()=>$.forEach(_.ds,(S=>p.persistence.referenceDelegate.removeReference(v,_.targetId,S)))))))))}catch(v){if(!Aa(v))throw v;ce(K_,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const S=p.Ms.get(_),N=S.snapshotVersion,R=S.withLastLimboFreeSnapshotVersion(N);p.Ms=p.Ms.insert(_,R)}}})(i.localStore,o))}async function QL(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){ce(Pc,"User change. New user:",e.toKey());const i=await Q2(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new he(ie.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ra(t,i.Ls)}}function XL(n,e){const t=_e(n),i=t.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let s=ze();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const u=t.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}async function WL(n,e){const t=_e(n),i=await Cv(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&Mv(t,e.targetId,s.au),s}async function ZL(n,e){const t=_e(n);return Z2(t.localStore,e).then((i=>Ra(t,i)))}async function JL(n,e,t,i){const s=_e(n),o=await(function(u,d){const f=_e(u),p=_e(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(v=>p.er(v,d).next((_=>_?f.localDocuments.getDocuments(v,_):$.resolve(null)))))})(s.localStore,e);o!==null?(t==="pending"?await Vc(s.remoteStore):t==="acknowledged"||t==="rejected"?(ib(s,e,i||null),nb(s,e),(function(u,d){_e(_e(u).mutationQueue).ir(d)})(s.localStore,e)):ye(6720,"Unknown batchState",{Su:t}),await Ra(s,o)):ce(Pc,"Cannot apply mutation batch with id: "+e)}async function e9(n,e){const t=_e(n);if(qp(t),sb(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await Ix(t,i.toArray());t.gu=!0,await kv(t.remoteStore,!0);for(const o of s)Fp(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):s=s.then((()=>(Ec(t,l),_c(t.localStore,l,!0)))),bc(t.remoteStore,l)})),await s,await Ix(t,i),(function(l){const u=_e(l);u.Au.forEach(((d,f)=>{bc(u.remoteStore,f)})),u.Ru.Jr(),u.Au=new Map,u.du=new pt(me.comparator)})(t),t.gu=!1,await kv(t.remoteStore,!1)}}async function Ix(n,e,t){const i=_e(n),s=[],o=[];for(const l of e){let u;const d=i.Iu.get(l);if(d&&d.length!==0){u=await tp(i.localStore,ni(d[0]));for(const f of d){const p=i.Tu.get(f),v=await WL(i,p);v.snapshot&&o.push(v.snapshot)}}else{const f=await W2(i.localStore,l);u=await tp(i.localStore,f),await tb(i,bC(f),l,!1,u.resumeToken)}s.push(u)}return i.Pu.H_(o),s}function bC(n){return t2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function t9(n){return(function(t){return _e(_e(t).persistence).Ts()})(_e(n).localStore)}async function n9(n,e,t,i){const s=_e(n);if(s.gu)return void ce(Pc,"Ignoring unexpected query state notification.");const o=s.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await Z2(s.localStore,r2(o[0])),u=od.createSynthesizedRemoteEventForCurrentChange(e,t==="current",jt.EMPTY_BYTE_STRING);await Ra(s,l,u);break}case"rejected":await _c(s.localStore,e,!0),Ec(s,e,i);break;default:ye(64155,t)}}async function i9(n,e,t){const i=qp(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){ce(Pc,"Adding an already active target "+s);continue}const o=await W2(i.localStore,s),l=await tp(i.localStore,o);await tb(i,bC(o),l.targetId,!1,l.resumeToken),Fp(i.remoteStore,l)}for(const s of t)i.Iu.has(s)&&await _c(i.localStore,s,!1).then((()=>{bc(i.remoteStore,s),Ec(i,s)})).catch(xa)}}function qp(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GL.bind(null,e),e.Pu.H_=ML.bind(null,e.eventManager),e.Pu.yu=PL.bind(null,e.eventManager),e}function sb(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$L.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KL.bind(null,e),e}class Fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Y2(this.persistence,new K2,e.initialUser,this.serializer)}Cu(e){return new H_(Up.mi,this.serializer)}Du(e){return new iC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fh.provider={build:()=>new Fh};class r9 extends Fh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Te(this.persistence.referenceDelegate instanceof ep,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new B2(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new H_((i=>ep.mi(i,t)),this.serializer)}}class TC extends Fh{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await sb(this.xu.syncEngine),await Vc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Y2(this.persistence,new K2,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new B2(i,e.asyncQueue,t)}Mu(e,t){const i=new m5(t,this.persistence);return new f5(e.asyncQueue,i)}Cu(e){const t=$2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new G_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,rC(),wm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new iC}}class s9 extends TC{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof A0&&(this.sharedClientState.syncEngine={Co:JL.bind(null,t),vo:n9.bind(null,t),Fo:i9.bind(null,t),Ts:t9.bind(null,t),Do:ZL.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await e9(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=rC();if(!A0.v(t))throw new he(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=$2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new A0(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class qh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ax(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QL.bind(null,this.syncEngine),await kv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new VL})()}createDatastore(e){const t=zp(e.databaseInfo.databaseId),i=(function(o){return new pL(o)})(e.databaseInfo);return(function(o,l,u,d){return new _L(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,o,l,u){return new TL(i,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ax(this.syncEngine,t,0)),(function(){return bx.v()?new bx:new hL})())}createSyncEngine(e,t){return(function(s,o,l,u,d,f,p){const v=new UL(s,o,l,u,d,f);return p&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=_e(t);ce(jo,"RemoteStore shutting down."),i.Ea.add(5),await cd(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}qh.provider={build:()=>new qh};class EC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const va="FirestoreClient";class a9{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=bn.UNAUTHENTICATED,this.clientId=w_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{ce(va,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(ce(va,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=J_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function R0(n,e){n.asyncQueue.verifyOperationInProgress(),ce(va,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await Q2(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Rx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await o9(n);ce(va,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Ex(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>Ex(e.remoteStore,s))),n._onlineComponents=e}async function o9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(va,"Using user provided OfflineComponentProvider");try{await R0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ie.FAILED_PRECONDITION||s.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ch("Error using user provided cache. Falling back to memory cache: "+t),await R0(n,new Fh)}}else ce(va,"Using default OfflineComponentProvider"),await R0(n,new r9(void 0));return n._offlineComponents}async function wC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(va,"Using user provided OnlineComponentProvider"),await Rx(n,n._uninitializedComponentsProvider._online)):(ce(va,"Using default OnlineComponentProvider"),await Rx(n,new qh))),n._onlineComponents}function l9(n){return wC(n).then((e=>e.syncEngine))}async function Pv(n){const e=await wC(n),t=e.eventManager;return t.onListen=zL.bind(null,e.syncEngine),t.onUnlisten=FL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qL.bind(null,e.syncEngine),t}function c9(n,e,t={}){const i=new ts;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,f){const p=new EC({next:_=>{p.Nu(),l.enqueueAndForget((()=>fC(o,v))),_.fromCache&&d.source==="server"?f.reject(new he(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new mC(u,p,{includeMetadataChanges:!0,qa:!0});return dC(o,v)})(await Pv(n),n.asyncQueue,e,t,i))),i.promise}function SC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Cx=new Map;const u9="firestore.googleapis.com",Nx=!0;class Dx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=u9,this.ssl=Nx}else this.host=e.host,this.ssl=e.ssl??Nx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<z2)throw new he(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ab{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new t5;switch(i.type){case"firstParty":return new r5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Cx.get(t);i&&(ce("ComponentProvider","Removing Datastore"),Cx.delete(t),i.terminate())})(this),Promise.resolve()}}class fs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class Lt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(id(t,Lt._jsonSchema))return new Lt(e,i||null,new me(it.fromString(t.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Xt("string",Lt._jsonSchemaVersion),referencePath:Xt("string")};class fa extends fs{constructor(e,t,i){super(e,t,kp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new me(e))}withConverter(e){return new fa(this.firestore,e,this._path)}}function Hp(n,e,...t){if(n=Wt(n),bR("collection","path",e),n instanceof ab){const i=it.fromString(e,...t);return TS(i),new fa(n,null,i)}{if(!(n instanceof Lt||n instanceof fa))throw new he(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(it.fromString(e,...t));return TS(i),new fa(n.firestore,null,i)}}function wi(n,e,...t){if(n=Wt(n),arguments.length===1&&(e=w_.newId()),bR("doc","path",e),n instanceof ab){const i=it.fromString(e,...t);return bS(i),new Lt(n,null,new me(i))}{if(!(n instanceof Lt||n instanceof fa))throw new he(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(it.fromString(e,...t));return bS(i),new Lt(n.firestore,n instanceof fa?n.converter:null,new me(i))}}const kx="AsyncQueue";class Vx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sC(this,"async_queue_retry"),this._c=()=>{const i=wm();i&&ce(kx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=wm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=wm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ts;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Aa(e))throw e;ce(kx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ot("INTERNAL UNHANDLED ERROR: ",Mx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Z_.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&ye(47125,{Pc:Mx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Mx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Px(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class _a extends ab{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new Vx,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vx(e),this._firestoreClient=void 0,await e}}}function h9(n,e,t){t||(t=Gm);const i=T_(n,"firestore");if(i.isInitialized(t)){const s=i.getImmediate({identifier:t}),o=i.getOptions(t);if(No(o,e))return s;throw new he(ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<z2)throw new he(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Rc(e.host)&&nR(e.host),i.initialize({options:e,instanceIdentifier:t})}function ob(n){if(n._terminated)throw new he(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||d9(n),n._firestoreClient}function d9(n){const e=n._freezeSettings(),t=(function(s,o,l,u){return new F5(s,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,SC(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new a9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}class Ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ti(jt.fromBase64String(e))}catch(t){throw new he(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ti(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ti._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(id(e,Ti._jsonSchema))return Ti.fromBase64String(e.bytes)}}Ti._jsonSchemaVersion="firestore/bytes/1.0",Ti._jsonSchema={type:Xt("string",Ti._jsonSchemaVersion),bytes:Xt("string")};class Gp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lb{constructor(e){this._methodName=e}}class vr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vr._jsonSchemaVersion}}static fromJSON(e){if(id(e,vr._jsonSchema))return new vr(e.latitude,e.longitude)}}vr._jsonSchemaVersion="firestore/geoPoint/1.0",vr._jsonSchema={type:Xt("string",vr._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};class _r{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(id(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _r(e.vectorValues);throw new he(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:Xt("string",_r._jsonSchemaVersion),vectorValues:Xt("object")};const f9=/^__.*__$/;class m9{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}class xC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ds(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:n})}}class cb{constructor(e,t,i,s,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(AC(this.Ac)&&f9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class p9{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zp(e)}Cc(e,t,i,s=!1){return new cb({Ac:e,methodName:t,Dc:i,path:wt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $p(n){const e=n._freezeSettings(),t=zp(n._databaseId);return new p9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IC(n,e,t,i,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);ub("Data must be an object, but it was:",l,i);const u=RC(i,l);let d,f;if(o.merge)d=new Fn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const _=Ov(e,v,t);if(!l.contains(_))throw new he(ie.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);NC(p,_)||p.push(_)}d=new Fn(p),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new m9(new En(u),d,f)}class Kp extends lb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kp}}function g9(n,e,t,i){const s=n.Cc(1,e,t);ub("Data must be an object, but it was:",s,i);const o=[],l=En.empty();Ia(i,((d,f)=>{const p=hb(e,d,t);f=Wt(f);const v=s.yc(p);if(f instanceof Kp)o.push(p);else{const _=ud(f,v);_!=null&&(o.push(p),l.set(p,_))}}));const u=new Fn(o);return new xC(l,u,s.fieldTransforms)}function y9(n,e,t,i,s,o){const l=n.Cc(1,e,t),u=[Ov(e,i,t)],d=[s];if(o.length%2!=0)throw new he(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(Ov(e,o[_])),d.push(o[_+1]);const f=[],p=En.empty();for(let _=u.length-1;_>=0;--_)if(!NC(f,u[_])){const S=u[_];let N=d[_];N=Wt(N);const R=l.yc(S);if(N instanceof Kp)f.push(S);else{const D=ud(N,R);D!=null&&(f.push(S),p.set(S,D))}}const v=new Fn(f);return new xC(p,v,l.fieldTransforms)}function v9(n,e,t,i=!1){return ud(t,n.Cc(i?4:3,e))}function ud(n,e){if(CC(n=Wt(n)))return ub("Unsupported field value:",e,n),RC(n,e);if(n instanceof lb)return(function(i,s){if(!AC(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let l=0;for(const u of i){let d=ud(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,s){if((i=Wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return s6(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=We.fromDate(i);return{timestampValue:vc(s.serializer,o)}}if(i instanceof We){const o=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vc(s.serializer,o)}}if(i instanceof vr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ti)return{bytesValue:b2(s.serializer,i._byteString)};if(i instanceof Lt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:z_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof _r)return(function(l,u){return{mapValue:{fields:{[D_]:{stringValue:k_},[dc]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return P_(u.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${Sp(i)}`)})(n,e)}function RC(n,e){const t={};return jR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(n,((i,s)=>{const o=ud(s,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function CC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof We||n instanceof vr||n instanceof Ti||n instanceof Lt||n instanceof lb||n instanceof _r)}function ub(n,e,t){if(!CC(t)||!TR(t)){const i=Sp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Ov(n,e,t){if((e=Wt(e))instanceof Gp)return e._internalPath;if(typeof e=="string")return hb(n,e);throw sp("Field path arguments must be of type string or ",n,!1,void 0,t)}const _9=new RegExp("[~\\*/\\[\\]]");function hb(n,e,t){if(e.search(_9)>=0)throw sp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gp(...e.split("."))._internalPath}catch{throw sp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sp(n,e,t,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new he(ie.INVALID_ARGUMENT,u+n+d)}function NC(n,e){return n.some((t=>t.isEqual(e)))}class DC{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(db("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class b9 extends DC{data(){return super.data()}}function db(n,e){return typeof e=="string"?hb(n,e):e instanceof Gp?e._internalPath:e._delegate._internalPath}function kC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fb{}class mb extends fb{}function Uo(n,e,...t){let i=[];e instanceof fb&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((d=>d instanceof gb)).length,u=o.filter((d=>d instanceof pb)).length;if(l>1||l>0&&u>0)throw new he(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class pb extends mb{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new pb(e,t,i)}_apply(e){const t=this._parse(e);return VC(e._query,t),new fs(e.firestore,e.converter,Tv(e._query,t))}_parse(e){const t=$p(e.firestore);return(function(o,l,u,d,f,p,v){let _;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new he(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){jx(v,p);const N=[];for(const R of v)N.push(Lx(d,o,R));_={arrayValue:{values:N}}}else _=Lx(d,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||jx(v,p),_=v9(u,l,v,p==="in"||p==="not-in");return $e.create(f,p,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class gb extends fb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gb(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ot.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)VC(l,d),l=Tv(l,d)})(e._query,t),new fs(e.firestore,e.converter,Tv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yb extends mb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yb(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new he(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uh(o,l)})(e._query,this._field,this._direction);return new fs(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new Dc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Hh(n,e="asc"){const t=e,i=db("orderBy",n);return yb._create(i,t)}class vb extends mb{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new vb(e,t,i)}_apply(e){return new fs(e.firestore,e.converter,Ym(e._query,this._limit,this._limitType))}}function Ox(n){return vb._create("limit",n,"F")}function Lx(n,e,t){if(typeof(t=Wt(t))=="string"){if(t==="")throw new he(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!n2(e)&&t.indexOf("/")!==-1)throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(it.fromString(t));if(!me.isDocumentKey(i))throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Lh(n,new me(i))}if(t instanceof Lt)return Lh(n,t._key);throw new he(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sp(t)}.`)}function jx(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VC(n,e){const t=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class T9{convertValue(e,t="none"){switch(pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ia(e,((s,o)=>{i[s]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[dc].arrayValue?.values?.map((i=>Tt(i.doubleValue)));return new _r(t)}convertGeoPoint(e){return new vr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Np(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ph(e));default:return null}}convertTimestamp(e){const t=ss(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=it.fromString(e);Te(N2(i),9688,{name:e});const s=new Vo(i.get(1),i.get(3)),o=new me(i.popFirst(5));return s.isEqual(t)||Ot(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function MC(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class lh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ao extends DC{constructor(e,t,i,s,o,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(db("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ao._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ao._jsonSchema={type:Xt("string",Ao._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Sm extends Ao{data(e={}){return super.data(e)}}class Io{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new lh(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Sm(this._firestore,this._userDataWriter,i.key,i,new lh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new Sm(s._firestore,s._userDataWriter,u.doc.key,u.doc,new lh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new Sm(s._firestore,s._userDataWriter,u.doc.key,u.doc,new lh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:E9(u.type),doc:d,oldIndex:f,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=w_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function E9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}Io._jsonSchemaVersion="firestore/querySnapshot/1.0",Io._jsonSchema={type:Xt("string",Io._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class _b extends T9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ti(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,t)}}function Yp(n){n=Fi(n,fs);const e=Fi(n.firestore,_a),t=ob(e),i=new _b(e);return kC(n._query),c9(t,n._query).then((s=>new Io(e,i,n,s)))}function bb(n,e,t){n=Fi(n,Lt);const i=Fi(n.firestore,_a),s=MC(n.converter,e,t);return Jp(i,[IC($p(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,wn.none())])}function Qp(n,e,t,...i){n=Fi(n,Lt);const s=Fi(n.firestore,_a),o=$p(s);let l;return l=typeof(e=Wt(e))=="string"||e instanceof Gp?y9(o,"updateDoc",n._key,e,t,i):g9(o,"updateDoc",n._key,e),Jp(s,[l.toMutation(n._key,wn.exists(!0))])}function Xp(n){return Jp(Fi(n.firestore,_a),[new Op(n._key,wn.none())])}function Wp(n,e){const t=Fi(n.firestore,_a),i=wi(n),s=MC(n.converter,e);return Jp(t,[IC($p(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,wn.exists(!1))]).then((()=>i))}function Zp(n,...e){n=Wt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Px(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Px(e[i])){const d=e[i];e[i]=d.next?.bind(d),e[i+1]=d.error?.bind(d),e[i+2]=d.complete?.bind(d)}let o,l,u;if(n instanceof Lt)l=Fi(n.firestore,_a),u=kp(n._key.path),o={next:d=>{e[i]&&e[i](w9(l,n,d))},error:e[i+1],complete:e[i+2]};else{const d=Fi(n,fs);l=Fi(d.firestore,_a),u=d._query;const f=new _b(l);o={next:p=>{e[i]&&e[i](new Io(l,f,d,p))},error:e[i+1],complete:e[i+2]},kC(n._query)}return(function(f,p,v,_){const S=new EC(_),N=new mC(p,S,v);return f.asyncQueue.enqueueAndForget((async()=>dC(await Pv(f),N))),()=>{S.Nu(),f.asyncQueue.enqueueAndForget((async()=>fC(await Pv(f),N)))}})(ob(l),u,s,o)}function Jp(n,e){return(function(i,s){const o=new ts;return i.asyncQueue.enqueueAndForget((async()=>HL(await l9(i),s,o))),o.promise})(ob(n),e)}function w9(n,e,t){const i=t.docs.get(e._key),s=new _b(n);return new Ao(n,s,e._key,i,new lh(t.hasPendingWrites,t.fromCache),e.converter)}class S9{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=R9(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function x9(n){return new S9(n)}class A9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=qh.provider,this._offlineComponentProvider={build:t=>new TC(t,e?.cacheSizeBytes,this.forceOwnership)}}}class I9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=qh.provider,this._offlineComponentProvider={build:t=>new s9(t,e?.cacheSizeBytes)}}}function R9(n){return new A9(n?.forceOwnership)}function C9(){return new I9}(function(e,t=!0){(function(s){Nc=s})(Cc),sc(new Do("firestore",((i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),u=new _a(new n5(i.getProvider("auth-internal")),new s5(l,i.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new he(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(f.options.projectId,p)})(l,s),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),ua(gS,yS,e),ua(gS,yS,"esm2020")})();var N9="firebase",D9="12.6.0";ua(N9,D9,"app");function PC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const k9=PC,OC=new td("auth","Firebase",PC());const ap=new __("@firebase/auth");function V9(n,...e){ap.logLevel<=Ge.WARN&&ap.warn(`Auth (${Cc}): ${n}`,...e)}function xm(n,...e){ap.logLevel<=Ge.ERROR&&ap.error(`Auth (${Cc}): ${n}`,...e)}function qi(n,...e){throw Tb(n,...e)}function br(n,...e){return Tb(n,...e)}function LC(n,e,t){const i={...k9(),[e]:t};return new td("auth","Firebase",i).create(e,{appName:n.name})}function ns(n){return LC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tb(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return OC.create(n,...e)}function Re(n,e,...t){if(!n)throw Tb(e,...t)}function Zr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xm(e),new Error(e)}function os(n,e){n||Zr(e)}function Lv(){return typeof self<"u"&&self.location?.href||""}function M9(){return Ux()==="http:"||Ux()==="https:"}function Ux(){return typeof self<"u"&&self.location?.protocol||null}function P9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M9()||MO()||"connection"in navigator)?navigator.onLine:!0}function O9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class hd{constructor(e,t){this.shortDelay=e,this.longDelay=t,os(t>e,"Short delay should be less than long delay!"),this.isMobile=kO()||PO()}get(){return P9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Eb(n,e){os(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class jC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const L9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const j9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U9=new hd(3e4,6e4);function ms(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Rr(n,e,t,i,s={}){return UC(n,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const u=nd({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...o};return VO()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Rc(n.emulatorConfig.host)&&(f.credentials="include"),jC.fetch()(await zC(n,n.config.apiHost,t,u),f)})}async function UC(n,e,t){n._canInitEmulator=!1;const i={...L9,...e};try{const s=new B9(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw rm(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw rm(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw rm(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw rm(n,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw LC(n,p,f);qi(n,p)}}catch(s){if(s instanceof us)throw s;qi(n,"network-request-failed",{message:String(s)})}}async function dd(n,e,t,i,s={}){const o=await Rr(n,e,t,i,s);return"mfaPendingCredential"in o&&qi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function zC(n,e,t,i){const s=`${e}${t}?${i}`,o=n,l=o.config.emulator?Eb(n.config,s):`${n.config.apiScheme}://${s}`;return j9.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function z9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class B9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(br(this.auth,"network-request-failed")),U9.get())})}}function rm(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=br(n,e,i);return s.customData._tokenResponse=t,s}function zx(n){return n!==void 0&&n.enterprise!==void 0}class F9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return z9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function q9(n,e){return Rr(n,"GET","/v2/recaptchaConfig",ms(n,e))}async function H9(n,e){return Rr(n,"POST","/v1/accounts:delete",e)}async function op(n,e){return Rr(n,"POST","/v1/accounts:lookup",e)}function bh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G9(n,e=!1){const t=Wt(n),i=await t.getIdToken(e),s=wb(i);Re(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:i,authTime:bh(C0(s.auth_time)),issuedAtTime:bh(C0(s.iat)),expirationTime:bh(C0(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function C0(n){return Number(n)*1e3}function wb(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return xm("JWT malformed, contained fewer than 3 sections"),null;try{const s=ZI(t);return s?JSON.parse(s):(xm("Failed to decode base64 JWT payload"),null)}catch(s){return xm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Bx(n){const e=wb(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function wc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof us&&$9(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function $9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class K9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class jv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bh(this.lastLoginAt),this.creationTime=bh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function lp(n){const e=n.auth,t=await n.getIdToken(),i=await wc(n,op(e,{idToken:t}));Re(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?BC(s.providerUserInfo):[],l=Q9(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,f=u?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new jv(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function Y9(n){const e=Wt(n);await lp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Q9(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function BC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function X9(n,e){const t=await UC(n,{},async()=>{const i=nd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await zC(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:i};return n.emulatorConfig&&Rc(n.emulatorConfig.host)&&(d.credentials="include"),jC.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function W9(n,e){return Rr(n,"POST","/v2/accounts:revokeToken",ms(n,e))}class ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=Bx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:o}=await X9(e,t);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:o}=t,l=new ec;return i&&(Re(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(Re(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Re(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ec,this.toJSON())}_performRefresh(){return Zr("not implemented")}}function Ws(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class zi{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new K9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await wc(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return G9(this,e)}reload(){return Y9(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await lp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await wc(this,H9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:S,providerData:N,stsTokenManager:R}=t;Re(v&&R,e,"internal-error");const D=ec.fromJSON(this.name,R);Re(typeof v=="string",e,"internal-error"),Ws(i,e.name),Ws(s,e.name),Re(typeof _=="boolean",e,"internal-error"),Re(typeof S=="boolean",e,"internal-error"),Ws(o,e.name),Ws(l,e.name),Ws(u,e.name),Ws(d,e.name),Ws(f,e.name),Ws(p,e.name);const L=new zi({uid:v,auth:e,email:s,emailVerified:_,displayName:i,isAnonymous:S,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:D,createdAt:f,lastLoginAt:p});return N&&Array.isArray(N)&&(L.providerData=N.map(B=>({...B}))),d&&(L._redirectEventId=d),L}static async _fromIdTokenResponse(e,t,i=!1){const s=new ec;s.updateFromServerResponse(t);const o=new zi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await lp(o),o}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Re(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?BC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new ec;u.updateFromIdToken(i);const d=new zi({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new jv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const Fx=new Map;function Jr(n){os(n instanceof Function,"Expected a class definition");let e=Fx.get(n);return e?(os(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Fx.set(n,e),e)}class FC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}FC.type="NONE";const qx=FC;function Am(n,e,t){return`firebase:${n}:${e}:${t}`}class tc{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Am(this.userKey,s.apiKey,o),this.fullPersistenceKey=Am("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await op(this.auth,{idToken:e}).catch(()=>{});return t?zi._fromGetAccountInfoResponse(this.auth,t,e):null}return zi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new tc(Jr(qx),e,i);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Jr(qx);const l=Am(i,e.config.apiKey,e.name);let u=null;for(const f of t)try{const p=await f._get(l);if(p){let v;if(typeof p=="string"){const _=await op(e,{idToken:p}).catch(()=>{});if(!_)break;v=await zi._fromGetAccountInfoResponse(e,_,p)}else v=zi._fromJSON(e,p);f!==o&&(u=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new tc(o,e,i):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new tc(o,e,i))}}function Hx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($C(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YC(e))return"Blackberry";if(QC(e))return"Webos";if(HC(e))return"Safari";if((e.includes("chrome/")||GC(e))&&!e.includes("edge/"))return"Chrome";if(KC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function qC(n=nn()){return/firefox\//i.test(n)}function HC(n=nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GC(n=nn()){return/crios\//i.test(n)}function $C(n=nn()){return/iemobile/i.test(n)}function KC(n=nn()){return/android/i.test(n)}function YC(n=nn()){return/blackberry/i.test(n)}function QC(n=nn()){return/webos/i.test(n)}function Sb(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Z9(n=nn()){return Sb(n)&&!!window.navigator?.standalone}function J9(){return OO()&&document.documentMode===10}function XC(n=nn()){return Sb(n)||KC(n)||QC(n)||YC(n)||/windows phone/i.test(n)||$C(n)}function WC(n,e=[]){let t;switch(n){case"Browser":t=Hx(nn());break;case"Worker":t=`${Hx(nn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cc}/${i}`}class ej{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function tj(n,e={}){return Rr(n,"GET","/v2/passwordPolicy",ms(n,e))}const nj=6;class ij{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??nj,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class rj{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gx(this),this.idTokenSubscription=new Gx(this),this.beforeStateQueue=new ej(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await tc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await op(this,{idToken:e}),i=await zi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(bi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=O9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(ns(this));const t=e?Wt(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tj(this),t=new ij(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new td("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await W9(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Jr(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await tc.create(this,[Jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&V9(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ca(n){return Wt(n)}class Gx{constructor(e){this.auth=e,this.observer=null,this.addObserver=FO(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sj(n){eg=n}function ZC(n){return eg.loadJS(n)}function aj(){return eg.recaptchaEnterpriseScript}function oj(){return eg.gapiScript}function lj(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class cj{constructor(){this.enterprise=new uj}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uj{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const hj="recaptcha-enterprise",JC="NO_RECAPTCHA";class dj{constructor(e){this.type=hj,this.auth=Ca(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{q9(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new F9(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;zx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(JC)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cj().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(u=>{if(!t&&zx(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=aj();d.length!==0&&(d+=u),ZC(d).then(()=>{s(u,o,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function $x(n,e,t,i=!1,s=!1){const o=new dj(n);let l;if(s)l=JC;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function cp(n,e,t,i,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await $x(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await $x(n,e,t,t==="getOobCode");return i(n,l)}else return Promise.reject(o)})}function fj(n,e){const t=T_(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(No(o,e??{}))return s;qi(s,"already-initialized")}return t.initialize({options:e})}function mj(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Jr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function pj(n,e,t){const i=Ca(n);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=eN(e),{host:l,port:u}=gj(e),d=u===null?"":`:${u}`,f={url:`${o}//${l}${d}/`},p=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(No(f,i.config.emulator)&&No(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Rc(l)?(nR(`${o}//${l}${d}`),DO("Auth",!0)):yj()}function eN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gj(n){const e=eN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Kx(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Kx(l)}}}function Kx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function yj(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class xb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function vj(n,e){return Rr(n,"POST","/v1/accounts:signUp",e)}async function _j(n,e){return dd(n,"POST","/v1/accounts:signInWithPassword",ms(n,e))}async function bj(n,e){return Rr(n,"POST","/v1/accounts:sendOobCode",ms(n,e))}async function Tj(n,e){return bj(n,e)}async function Ej(n,e){return dd(n,"POST","/v1/accounts:signInWithEmailLink",ms(n,e))}async function wj(n,e){return dd(n,"POST","/v1/accounts:signInWithEmailLink",ms(n,e))}class Gh extends xb{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Gh(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Gh(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cp(e,t,"signInWithPassword",_j);case"emailLink":return Ej(e,{email:this._email,oobCode:this._password});default:qi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cp(e,i,"signUpPassword",vj);case"emailLink":return wj(e,{idToken:t,email:this._email,oobCode:this._password});default:qi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function nc(n,e){return dd(n,"POST","/v1/accounts:signInWithIdp",ms(n,e))}const Sj="http://localhost";class zo extends xb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=t;if(!i||!s)return null;const l=new zo(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return nc(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,nc(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nc(e,t)}buildRequest(){const e={requestUri:Sj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nd(t)}return e}}function xj(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Aj(n){const e=nh(ih(n)).link,t=e?nh(ih(e)).deep_link_id:null,i=nh(ih(n)).deep_link_id;return(i?nh(ih(i)).link:null)||i||t||e||n}class Ab{constructor(e){const t=nh(ih(e)),i=t.apiKey??null,s=t.oobCode??null,o=xj(t.mode??null);Re(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Aj(e);try{return new Ab(t)}catch{return null}}}class Oc{constructor(){this.providerId=Oc.PROVIDER_ID}static credential(e,t){return Gh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ab.parseLink(t);return Re(i,"argument-error"),Gh._fromEmailAndCode(e,i.code,i.tenantId)}}Oc.PROVIDER_ID="password";Oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fd extends tN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ta extends fd{constructor(){super("facebook.com")}static credential(e){return zo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";ta.PROVIDER_ID="facebook.com";class na extends fd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zo._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return na.credential(t,i)}catch{return null}}}na.GOOGLE_SIGN_IN_METHOD="google.com";na.PROVIDER_ID="google.com";class ia extends fd{constructor(){super("github.com")}static credential(e){return zo._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ia.credential(e.oauthAccessToken)}catch{return null}}}ia.GITHUB_SIGN_IN_METHOD="github.com";ia.PROVIDER_ID="github.com";class ra extends fd{constructor(){super("twitter.com")}static credential(e,t){return zo._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ra.credential(t,i)}catch{return null}}}ra.TWITTER_SIGN_IN_METHOD="twitter.com";ra.PROVIDER_ID="twitter.com";async function Ij(n,e){return dd(n,"POST","/v1/accounts:signUp",ms(n,e))}class Bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const o=await zi._fromIdTokenResponse(e,i,s),l=Yx(i);return new Bo({user:o,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=Yx(i);return new Bo({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function Yx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class up extends us{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,up.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new up(e,t,i,s)}}function nN(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?up._fromErrorAndOperation(n,o,e,i):o})}async function Rj(n,e,t=!1){const i=await wc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Bo._forOperation(n,"link",i)}async function Cj(n,e,t=!1){const{auth:i}=n;if(bi(i.app))return Promise.reject(ns(i));const s="reauthenticate";try{const o=await wc(n,nN(i,s,e,n),t);Re(o.idToken,i,"internal-error");const l=wb(o.idToken);Re(l,i,"internal-error");const{sub:u}=l;return Re(n.uid===u,i,"user-mismatch"),Bo._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&qi(i,"user-mismatch"),o}}async function iN(n,e,t=!1){if(bi(n.app))return Promise.reject(ns(n));const i="signIn",s=await nN(n,i,e),o=await Bo._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(o.user),o}async function Nj(n,e){return iN(Ca(n),e)}async function rN(n){const e=Ca(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Dj(n,e,t){const i=Ca(n);await cp(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Tj)}async function kj(n,e,t){if(bi(n.app))return Promise.reject(ns(n));const i=Ca(n),l=await cp(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ij).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&rN(n),d}),u=await Bo._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function Vj(n,e,t){return bi(n.app)?Promise.reject(ns(n)):Nj(Wt(n),Oc.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&rN(n),i})}async function Mj(n,e){return Rr(n,"POST","/v1/accounts:update",e)}async function Pj(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Wt(n),o={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await wc(i,Mj(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const u=i.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function Oj(n,e,t,i){return Wt(n).onIdTokenChanged(e,t,i)}function Lj(n,e,t){return Wt(n).beforeAuthStateChanged(e,t)}function jj(n,e,t,i){return Wt(n).onAuthStateChanged(e,t,i)}function Uj(n){return Wt(n).signOut()}const hp="__sak";class sN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hp,"1"),this.storage.removeItem(hp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const zj=1e3,Bj=10;class aN extends sN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);J9()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Bj):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},zj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aN.type="LOCAL";const Fj=aN;class oN extends sN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}oN.type="SESSION";const lN=oN;function qj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class tg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new tg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(l).map(async f=>f(t.origin,o)),d=await qj(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tg.receivers=[];function Ib(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class Hj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const f=Ib("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Tr(){return window}function Gj(n){Tr().location.href=n}function cN(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function $j(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kj(){return navigator?.serviceWorker?.controller||null}function Yj(){return cN()?self:null}const uN="firebaseLocalStorageDb",Qj=1,dp="firebaseLocalStorage",hN="fbase_key";class md{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ng(n,e){return n.transaction([dp],e?"readwrite":"readonly").objectStore(dp)}function Xj(){const n=indexedDB.deleteDatabase(uN);return new md(n).toPromise()}function Uv(){const n=indexedDB.open(uN,Qj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(dp,{keyPath:hN})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(dp)?e(i):(i.close(),await Xj(),e(await Uv()))})})}async function Qx(n,e,t){const i=ng(n,!0).put({[hN]:e,value:t});return new md(i).toPromise()}async function Wj(n,e){const t=ng(n,!1).get(e),i=await new md(t).toPromise();return i===void 0?null:i.value}function Xx(n,e){const t=ng(n,!0).delete(e);return new md(t).toPromise()}const Zj=800,Jj=3;class dN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Jj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tg._getInstance(Yj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $j(),!this.activeServiceWorker)return;this.sender=new Hj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Kj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Uv();return await Qx(e,hp,"1"),await Xx(e,hp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Qx(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Wj(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=ng(s,!1).getAll();return new md(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Zj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dN.type="LOCAL";const eU=dN;new hd(3e4,6e4);function tU(n,e){return e?Jr(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Rb extends xb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nU(n){return iN(n.auth,new Rb(n),n.bypassAuthState)}function iU(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),Cj(t,new Rb(n),n.bypassAuthState)}async function rU(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),Rj(t,new Rb(n),n.bypassAuthState)}class fN{constructor(e,t,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nU;case"linkViaPopup":case"linkViaRedirect":return rU;case"reauthViaPopup":case"reauthViaRedirect":return iU;default:qi(this.auth,"internal-error")}}resolve(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sU=new hd(2e3,1e4);class Kl extends fN{constructor(e,t,i,s,o){super(e,t,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Kl.currentPopupAction&&Kl.currentPopupAction.cancel(),Kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const e=Ib();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sU.get())};e()}}Kl.currentPopupAction=null;const aU="pendingRedirect",Im=new Map;class oU extends fN{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Im.get(this.auth._key());if(!e){try{const i=await lU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Im.set(this.auth._key(),e)}return this.bypassAuthState||Im.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lU(n,e){const t=hU(e),i=uU(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function cU(n,e){Im.set(n._key(),e)}function uU(n){return Jr(n._redirectPersistence)}function hU(n){return Am(aU,n.config.apiKey,n.name)}async function dU(n,e,t=!1){if(bi(n.app))return Promise.reject(ns(n));const i=Ca(n),s=tU(i,e),l=await new oU(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}const fU=600*1e3;class mU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mN(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(br(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fU&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wx(e))}saveEventToCache(e){this.cachedEventUids.add(Wx(e)),this.lastProcessedEventTime=Date.now()}}function Wx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function pU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mN(n);default:return!1}}async function gU(n,e={}){return Rr(n,"GET","/v1/projects",e)}const yU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vU=/^https?/;async function _U(n){if(n.config.emulator)return;const{authorizedDomains:e}=await gU(n);for(const t of e)try{if(bU(t))return}catch{}qi(n,"unauthorized-domain")}function bU(n){const e=Lv(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!vU.test(t))return!1;if(yU.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const TU=new hd(3e4,6e4);function Zx(){const n=Tr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function EU(n){return new Promise((e,t)=>{function i(){Zx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zx(),t(br(n,"network-request-failed"))},timeout:TU.get()})}if(Tr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Tr().gapi?.load)i();else{const s=lj("iframefcb");return Tr()[s]=()=>{gapi.load?i():t(br(n,"network-request-failed"))},ZC(`${oj()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Rm=null,e})}let Rm=null;function wU(n){return Rm=Rm||EU(n),Rm}const SU=new hd(5e3,15e3),xU="__/auth/iframe",AU="emulator/auth/iframe",IU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CU(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Eb(e,AU):`https://${n.config.authDomain}/${xU}`,i={apiKey:e.apiKey,appName:n.name,v:Cc},s=RU.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${nd(i).slice(1)}`}async function NU(n){const e=await wU(n),t=Tr().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:CU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IU,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=br(n,"network-request-failed"),u=Tr().setTimeout(()=>{o(l)},SU.get());function d(){Tr().clearTimeout(u),s(i)}i.ping(d).then(d,()=>{o(l)})}))}const DU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kU=500,VU=600,MU="_blank",PU="http://localhost";class Jx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OU(n,e,t,i=kU,s=VU){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d={...DU,width:i.toString(),height:s.toString(),top:o,left:l},f=nn().toLowerCase();t&&(u=GC(f)?MU:t),qC(f)&&(e=e||PU,d.scrollbars="yes");const p=Object.entries(d).reduce((_,[S,N])=>`${_}${S}=${N},`,"");if(Z9(f)&&u!=="_self")return LU(e||"",u),new Jx(null);const v=window.open(e||"",u,p);Re(v,n,"popup-blocked");try{v.focus()}catch{}return new Jx(v)}function LU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const jU="__/auth/handler",UU="emulator/auth/handler",zU=encodeURIComponent("fac");async function eA(n,e,t,i,s,o){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Cc,eventId:s};if(e instanceof tN){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",BO(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))l[p]=v}if(e instanceof fd){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const d=await n._getAppCheckToken(),f=d?`#${zU}=${encodeURIComponent(d)}`:"";return`${BU(n)}?${nd(u).slice(1)}${f}`}function BU({config:n}){return n.emulator?Eb(n,UU):`https://${n.authDomain}/${jU}`}const N0="webStorageSupport";class FU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lN,this._completeRedirectFn=dU,this._overrideRedirectResult=cU}async _openPopup(e,t,i,s){os(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await eA(e,t,i,Lv(),s);return OU(e,o,Ib())}async _openRedirect(e,t,i,s){await this._originValidation(e);const o=await eA(e,t,i,Lv(),s);return Gj(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(os(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await NU(e),i=new mU(e);return t.register("authEvent",s=>(Re(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(N0,{type:N0},s=>{const o=s?.[0]?.[N0];o!==void 0&&t(!!o),qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_U(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XC()||HC()||Sb()}}const qU=FU;var tA="@firebase/auth",nA="1.11.1";class HU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function GU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $U(n){sc(new Do("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;Re(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WC(n)},f=new rj(i,s,o,d);return mj(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),sc(new Do("auth-internal",e=>{const t=Ca(e.getProvider("auth").getImmediate());return(i=>new HU(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ua(tA,nA,GU(n)),ua(tA,nA,"esm2020")}const KU=300,YU=tR("authIdTokenMaxAge")||KU;let iA=null;const QU=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>YU)return;const s=t?.token;iA!==s&&(iA=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function XU(n=q3()){const e=T_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=fj(n,{popupRedirectResolver:qU,persistence:[eU,Fj,lN]}),i=tR("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=QU(o.toString());Lj(t,l,()=>l(t.currentUser)),Oj(t,u=>l(u))}}const s=IO("auth");return s&&pj(t,`http://${s}`),t}function WU(){return document.getElementsByTagName("head")?.[0]??document}sj({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=br("internal-error");o.customData=s,t(o)},i.type="text/javascript",i.charset="UTF-8",WU().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$U("Browser");const ZU={apiKey:"AIzaSyAQ5FdR_OjZvMkTOYy9auXDctOQXGtZPgg",authDomain:"house-budget-pwa.firebaseapp.com",projectId:"house-budget-pwa",storageBucket:"house-budget-pwa.firebasestorage.app",messagingSenderId:"7591891522",appId:"1:7591891522:web:ebf15777f6c206129753db",measurementId:"G-6QDXEYXPTE"},pN=cR(ZU),Vn=h9(pN,{localCache:x9({tabManager:C9()})}),Zu=XU(pN),D0=n=>Hp(Vn,"users",n,"transactions"),fr={subscribeToTransactions:(n,e)=>{const t=Uo(D0(n),Hh("date","desc"));return Zp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllTransactions:async n=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${n}`);const e=Uo(D0(n),Hh("date","desc")),i=(await Yp(e)).docs.map(s=>({id:s.id,...s.data()}));return console.log(` Fetched ${i.length} transactions:`,i.map(s=>({id:s.id,description:s.description}))),i},addTransaction:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${t}`);try{console.log(" About to call addDoc with:",i);const s=await Wp(D0(e),i);console.log(" addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`),console.log(` Document path: ${s.path}`);const o={id:s.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(s){throw console.error(" addDoc failed:",s),console.error("Error message:",s.message),s}},updateTransaction:async(n,e,t)=>{const i=wi(Vn,"users",n,"transactions",e);return await Qp(i,t)},deleteTransaction:async(n,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${n}`);try{const t=wi(Vn,"users",n,"transactions",e);console.log(` Deleting document at path: ${t.path}`),await Xp(t),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(t){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,t),console.error("Error message:",t.message),t}}},k0=n=>Hp(Vn,"users",n,"envelopes"),sa={subscribeToEnvelopes:(n,e)=>{const t=Uo(k0(n),Hh("orderIndex","asc"));return Zp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllEnvelopes:async n=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",n);const e=k0(n),s=(await Yp(e)).docs.map((o,l)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??l})).sort((o,l)=>{const u=o.orderIndex??0,d=l.orderIndex??0;return u-d});return console.log(" Fetched envelopes:",s.length),s}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create envelope");console.log(` EnvelopeService.createEnvelope: Adding envelope for user ${e}:`,i),console.log(` Original envelope had temp ID: ${t}`);try{const s=await Wp(k0(e),i);console.log(" Envelope addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`);const o={id:s.id,...i,userId:e};return console.log(" Final envelope result object:",o),o}catch(s){throw console.error(" Envelope addDoc failed:",s),s}},saveEnvelope:async(n,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const t=wi(Vn,"users",n,"envelopes",e.id);return await bb(t,e,{merge:!0})},updateBalance:async(n,e,t)=>{const i=wi(Vn,"users",n,"envelopes",e);return await Qp(i,{currentBalance:t,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(n,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${n}`);const t=wi(Vn,"users",n,"envelopes",e);await Xp(t),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},V0=n=>Hp(Vn,"users",n,"distributionTemplates"),_i={subscribeToDistributionTemplates:(n,e)=>{const t=Uo(V0(n),Hh("lastUsed","desc"));return Zp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllDistributionTemplates:async n=>{const e=Uo(V0(n),Hh("lastUsed","desc"));return(await Yp(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const s=await Wp(V0(e),i);console.log(" Template addDoc succeeded, docRef:",s);const o={id:s.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(s){throw console.error(" Template addDoc failed:",s),s}},saveDistributionTemplate:async(n,e)=>{const t=wi(Vn,"users",n,"distributionTemplates",e.id);return await bb(t,e,{merge:!0})},updateDistributionTemplate:async(n,e,t)=>{const i=wi(Vn,"users",n,"distributionTemplates",e);return await Qp(i,t)},deleteDistributionTemplate:async(n,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${n}`);const t=wi(Vn,"users",n,"distributionTemplates",e);await Xp(t),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},M0=n=>Hp(Vn,"users",n,"appSettings"),Qr={subscribeToAppSettings:(n,e)=>{const t=Uo(M0(n),Ox(1));return Zp(t,s=>{if(s.empty){e(null);return}const o=s.docs.map(l=>({id:l.id,...l.data()}))[0];e(o)})},getAppSettings:async n=>{const e=Uo(M0(n),Ox(1)),t=await Yp(e);if(t.empty)return null;const i=t.docs[0];return{id:i.id,...i.data()}},createAppSettings:async n=>{const{userId:e,...t}=n;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,t);try{const i=await Wp(M0(e),t);console.log(" Settings addDoc succeeded, docRef:",i);const s={id:i.id,...t,userId:e};return console.log(" Final settings result object:",s),s}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(n,e)=>{const t=wi(Vn,"users",n,"appSettings",e.id);return await bb(t,e,{merge:!0})},updateAppSettings:async(n,e,t)=>{const i=wi(Vn,"users",n,"appSettings",e);return await Qp(i,t)},deleteAppSettings:async(n,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${n}`);const t=wi(Vn,"users",n,"appSettings",e);await Xp(t),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}};function JU(n,e){let t;try{t=n()}catch{return}return{getItem:s=>{var o;const l=d=>d===null?null:JSON.parse(d,void 0),u=(o=t.getItem(s))!=null?o:null;return u instanceof Promise?u.then(l):l(u)},setItem:(s,o)=>t.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>t.removeItem(s)}}const zv=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(i){return zv(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return zv(i)(t)}}}},ez=(n,e)=>(t,i,s)=>{let o={storage:JU(()=>localStorage),partialize:R=>R,version:0,merge:(R,D)=>({...D,...R}),...e},l=!1;const u=new Set,d=new Set;let f=o.storage;if(!f)return n((...R)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...R)},i,s);const p=()=>{const R=o.partialize({...i()});return f.setItem(o.name,{state:R,version:o.version})},v=s.setState;s.setState=(R,D)=>(v(R,D),p());const _=n((...R)=>(t(...R),p()),i,s);s.getInitialState=()=>_;let S;const N=()=>{var R,D;if(!f)return;l=!1,u.forEach(B=>{var O;return B((O=i())!=null?O:_)});const L=((D=o.onRehydrateStorage)==null?void 0:D.call(o,(R=i())!=null?R:_))||void 0;return zv(f.getItem.bind(f))(o.name).then(B=>{if(B)if(typeof B.version=="number"&&B.version!==o.version){if(o.migrate){const O=o.migrate(B.state,B.version);return O instanceof Promise?O.then(Y=>[!0,Y]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,B.state];return[!1,void 0]}).then(B=>{var O;const[Y,te]=B;if(S=o.merge(te,(O=i())!=null?O:_),t(S,!0),Y)return p()}).then(()=>{L?.(S,void 0),S=i(),l=!0,d.forEach(B=>B(S))}).catch(B=>{L?.(void 0,B)})};return s.persist={setOptions:R=>{o={...o,...R},R.storage&&(f=R.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>N(),hasHydrated:()=>l,onHydrate:R=>(u.add(R),()=>{u.delete(R)}),onFinishHydration:R=>(d.add(R),()=>{d.delete(R)})},o.skipHydration||N(),S||_},tz=ez,P0=n=>({id:n.uid,username:n.email||n.uid,displayName:n.displayName||n.email?.split("@")[0]||"User",email:n.email||void 0}),Sc=y_()(tz(n=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,login:async(e,t)=>{n({isLoading:!0,loginError:null});try{const s=(await Vj(Zu,e,t)).user,o=P0(s);return n({currentUser:o,isAuthenticated:!0,isLoading:!1,loginError:null}),console.log(` User logged in: ${o.email}`),!0}catch(i){console.error("Login error:",i);let s="Login failed. Please try again.";switch(i.code){case"auth/invalid-email":s="Invalid email address.";break;case"auth/user-disabled":s="This account has been disabled.";break;case"auth/user-not-found":s="No account found with this email.";break;case"auth/wrong-password":s="Incorrect password.";break;case"auth/too-many-requests":s="Too many failed attempts. Please try again later.";break}return n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:s}),!1}},register:async(e,t,i)=>{n({isLoading:!0,loginError:null});try{const o=(await kj(Zu,e,t)).user;await Pj(o,{displayName:i});const l=P0(o);return n({currentUser:l,isAuthenticated:!0,isLoading:!1,loginError:null}),console.log(` User registered and logged in: ${l.email}`),!0}catch(s){console.error("Registration error:",s);let o="Registration failed. Please try again.";switch(s.code){case"auth/email-already-in-use":o="An account with this email already exists.";break;case"auth/invalid-email":o="Invalid email address.";break;case"auth/weak-password":o="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":o="Email/password accounts are not enabled.";break}return n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:o}),!1}},logout:async()=>{try{await Uj(Zu),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{n({loginError:null})},sendPasswordReset:async e=>{n({isLoading:!0,loginError:null});try{return await Dj(Zu,e),n({isLoading:!1}),!0}catch(t){console.error("Password reset error:",t);let i="Failed to send password reset email. Please try again.";switch(t.code){case"auth/user-not-found":i="No account found with this email.";break;case"auth/invalid-email":i="Invalid email address.";break;case"auth/too-many-requests":i="Too many attempts. Please try again later.";break}return n({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>(n({isInitialized:!1}),jj(Zu,t=>{const i=t?P0(t):null;n({currentUser:i,isAuthenticated:!!i,isInitialized:!0,isLoading:!1,loginError:null}),console.log(i?` Auth state: User is signed in (${i.email})`:" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:n=>({isAuthenticated:n.isAuthenticated})})),Ju=({set:n,get:e,getCurrentUserId:t,isNetworkError:i})=>{const s=o=>({id:o.id,date:o.date?.toDate?.()?o.date.toDate().toISOString():o.date,amount:parseFloat(o.amount)||0,description:o.description||"",envelopeId:o.envelopeId||"",reconciled:o.reconciled||!1,type:o.type==="income"?"Income":o.type==="expense"?"Expense":"Transfer",transferId:o.transferId||void 0,userId:o.userId||void 0});return{createEnvelope:async o=>{const l=o.currentBalance&&o.currentBalance>0,u=l?{...o,currentBalance:0,orderIndex:o.orderIndex??0}:{...o,orderIndex:o.orderIndex??0},d=`temp-${Date.now()}-${Math.random()}`,f={...u,id:d};if(n(p=>({envelopes:[...p.envelopes,f],isLoading:!0})),l){console.log(` Creating initial deposit transaction locally first: ${f.name} (tempId: ${d})`);try{await e().addTransaction({description:"Initial Deposit",amount:o.currentBalance,envelopeId:d,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const p=e().getEnvelopeBalance(d);console.log(` Test balance for temp envelope ${d}: $${p.toNumber()}`)}catch(p){console.error(" Failed to create initial deposit transaction locally:",p)}}try{console.log(" Attempting Firebase envelope creation...");const p=t(),v={...u,id:"",userId:p},_=await sa.createEnvelope(v);console.log(" Firebase envelope creation successful:",_);const S={id:_.id,name:_.name,currentBalance:_.currentBalance,lastUpdated:_.lastUpdated,isActive:_.isActive??!0,orderIndex:_.orderIndex??0,userId:_.userId};if(n(N=>({envelopes:N.envelopes.map(R=>R.id===d?S:R),isLoading:!1,pendingSync:!1})),l){console.log(` Updating transactions from temp envelope ID ${d} to real ID ${_.id}`),console.log(" Transactions before update:",e().transactions.map(R=>({id:R.id,envelopeId:R.envelopeId,description:R.description}))),n(R=>({transactions:R.transactions.map(D=>D.envelopeId===d?{...D,envelopeId:_.id}:D)})),console.log(" Transactions after envelopeId update:",e().transactions.map(R=>({id:R.id,envelopeId:R.envelopeId,description:R.description})));const N=e().transactions.filter(R=>R.envelopeId===_.id&&R.id&&R.id.startsWith("temp-"));console.log(` Found ${N.length} transactions to sync for envelope ${_.id}:`,N.map(R=>({id:R.id,envelopeId:R.envelopeId})));for(const R of N)try{console.log(" Syncing transaction:",R);const D={...R,amount:R.amount.toString(),type:R.type.toLowerCase(),date:We.fromDate(new Date(R.date))},L=await fr.addTransaction(D);console.log(" Transaction synced:",L);const B=s(L);console.log(` Replacing temp transaction ${R.id} with Firebase transaction ${L.id}`),n(O=>({transactions:O.transactions.map(Y=>Y.id===R.id?B:Y)}))}catch(D){console.error(` Failed to sync transaction ${R.id}:`,D)}console.log(" Final transactions after sync:",e().transactions.map(R=>({id:R.id,envelopeId:R.envelopeId,description:R.description}))),n({pendingSync:!1}),console.log(` All transactions synced for envelope ${_.id}`)}}catch(p){console.error("Create Envelope Failed:",p),console.log("Error details:",{code:p?.code,message:p?.message,name:p?.name,isNetworkError:i(p)}),i(p)?(console.log(" Treating as offline scenario - keeping temp envelope and transactions"),n({isLoading:!1,pendingSync:!0,error:null})):(console.log(" Real error - removing temp envelope"),n(v=>({envelopes:v.envelopes.filter(_=>_.id!==d),transactions:v.transactions.filter(_=>_.envelopeId!==d),error:p.message,isLoading:!1})))}},addToEnvelope:async(o,l,u,d)=>{const f=d?typeof d=="string"?d:d.toISOString():new Date().toISOString();await e().addTransaction({description:u,amount:l,envelopeId:o,date:f,type:"Income",reconciled:!1})},spendFromEnvelope:async(o,l,u,d)=>{const f=d?typeof d=="string"?d:d.toISOString():new Date().toISOString();await e().addTransaction({description:u,amount:l,envelopeId:o,date:f,type:"Expense",reconciled:!1})},transferFunds:async(o,l,u,d,f)=>{console.log(`Transferring ${u} from ${o} to ${l} with note: ${d}`);const p=f?typeof f=="string"?f:f.toISOString():new Date().toISOString(),v=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(_=>_.id===l)?.name||"envelope"}`,amount:u,envelopeId:o,date:p,type:"Expense",transferId:v,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(_=>_.id===o)?.name||"envelope"}`,amount:u,envelopeId:l,date:p,type:"Income",transferId:v,reconciled:!1})},deleteEnvelope:async o=>{const l=e().transactions.filter(u=>u.envelopeId===o);n(u=>({envelopes:u.envelopes.filter(d=>d.id!==o),transactions:u.transactions.filter(d=>d.envelopeId!==o),isLoading:!0}));try{const u=t();await sa.deleteEnvelope(u,o);for(const d of l)d.id&&!d.id.startsWith("temp-")&&await fr.deleteTransaction(u,d.id);await e().removeEnvelopeFromTemplates(o),n({isLoading:!1})}catch(u){if(console.error("Delete Envelope Failed:",u),i(u))n({isLoading:!1,pendingSync:!0,error:null});else{const d=e().envelopes.find(f=>f.id===o);n(d?f=>({envelopes:[...f.envelopes,d],transactions:[...f.transactions,...l],error:u.message,isLoading:!1}):{error:u.message,isLoading:!1})}}},renameEnvelope:async(o,l)=>{n(u=>({envelopes:u.envelopes.map(d=>d.id===o?{...d,name:l}:d),isLoading:!0}));try{n({isLoading:!1})}catch(u){console.error("Rename Envelope Failed:",u),n({error:u.message,isLoading:!1})}}}},eh=({set:n,get:e,getCurrentUserId:t,isNetworkError:i})=>({saveTemplate:async(s,o,l)=>{console.log(" saveTemplate called with:",{name:s,distributions:o,note:l});try{const u=t(),d={id:`temp-${Date.now()}`,userId:u,name:s,note:l,lastUsed:new Date().toISOString(),distributions:o};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const f=_i.createDistributionTemplate(d),p=new Promise((_,S)=>setTimeout(()=>S(new Error("Firebase timeout - likely offline")),5e3)),v=await Promise.race([f,p]);console.log(" Firebase template save succeeded (online mode):",v),n(_=>{const S=[..._.distributionTemplates,v];return console.log(" Updating store - old templates:",_.distributionTemplates.length,"new templates:",S.length),{distributionTemplates:S}}),console.log(" Template saved to Firebase:",v),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(f){throw console.log(" Firebase template save failed or timed out:",f.message),f}}catch(u){console.error(" Failed to save template to Firebase, saving locally:",u),console.log(" Error details:",{name:u?.name||"Unknown",message:u?.message||"Unknown",code:u?.code||"Unknown",isNetworkError:i(u)});const d=t(),f={id:`local-${Date.now()}`,userId:d,name:s,note:l,lastUsed:new Date().toISOString(),distributions:o};console.log(" Saving template locally (offline):",f),n(p=>({distributionTemplates:[...p.distributionTemplates,f],pendingSync:!0})),console.log(" Template saved locally as fallback:",f),console.log(" Store now has templates:",e().distributionTemplates.length)}},deleteTemplate:async s=>{try{const o=t();await _i.deleteDistributionTemplate(o,s),n(l=>({distributionTemplates:l.distributionTemplates.filter(u=>u.id!==s)})),console.log(" Template deleted from Firebase:",s)}catch(o){throw console.error(" Failed to delete template from Firebase:",o),o}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const s=e().distributionTemplates,o=e().envelopes,l=new Set(o.map(d=>d.id));let u=0;for(const d of s){const f={...d.distributions},p={};for(const[v,_]of Object.entries(d.distributions))l.has(v)&&(p[v]=_);if(Object.keys(p).length===0){console.log(` Deleting orphaned template: ${d.name}`);const v=t();await _i.deleteDistributionTemplate(v,d.id),u++}else if(JSON.stringify(p)!==JSON.stringify(f)){console.log(` Updating template ${d.name} - removed orphaned envelope references`);const v=t();await _i.updateDistributionTemplate(v,d.id,{distributions:p}),u++}}u>0?console.log(` Cleaned up ${u} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(s,o)=>{console.log(` Updating template references: ${s}  ${o}`);const l=e().distributionTemplates;let u=0;for(const d of l)if(d.distributions[s]!==void 0){const f={...d.distributions};f[o]=f[s],delete f[s],console.log(` Updating template: ${d.name}`);const p=t();await _i.updateDistributionTemplate(p,d.id,{distributions:f}),u++}u>0&&console.log(` Updated ${u} templates with new envelope reference`)},removeEnvelopeFromTemplates:async s=>{console.log(` Removing envelope ${s} from all templates`);const o=e().distributionTemplates;let l=0,u=0;for(const d of o)if(d.distributions[s]!==void 0){const f={...d.distributions};if(delete f[s],Object.keys(f).length===0){console.log(` Deleting template ${d.name} - no envelopes left`);const p=t();await _i.deleteDistributionTemplate(p,d.id),u++}else{console.log(` Removing envelope from template: ${d.name}`);const p=t();await _i.updateDistributionTemplate(p,d.id,{distributions:f}),l++}}(l>0||u>0)&&console.log(` Updated ${l} templates, deleted ${u} empty templates`)}}),Bv=({set:n,get:e,getCurrentUserId:t})=>({updateAppSettings:async i=>{const s=e();if(!s.appSettings){try{await Bv({set:n,get:e,getCurrentUserId:t}).initializeAppSettings();const o=e();if(o.appSettings){const l={...o.appSettings,...i};n({appSettings:l});const u=t();await Qr.updateAppSettings(u,o.appSettings.id,i),console.log(" App settings updated successfully")}}catch(o){console.error(" Failed to initialize/update settings:",o)}return}try{n(l=>({appSettings:{...l.appSettings,...i}}));const o=t();await Qr.updateAppSettings(o,s.appSettings.id,i),console.log(" App settings updated successfully")}catch(o){throw console.error(" Failed to update app settings:",o),n(l=>({appSettings:l.appSettings})),o}},initializeAppSettings:async()=>{try{const s={userId:t(),theme:"system"},o=await Qr.createAppSettings(s);n({appSettings:o}),console.log(" App settings initialized successfully")}catch(i){console.error(" Failed to initialize app settings:",i);const s=t();n({appSettings:{id:"local-settings",userId:s,theme:"system"}})}}}),nz=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const n=await fetch("/HouseBudget_Backup_2025-11-25.json");if(n.ok){const e=await n.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(n){console.log(" Could not load fallback data:",n)}return null},Mt=()=>{const{currentUser:n}=Sc.getState();if(!n)throw new Error("No authenticated user found");return n.id},gN=()=>{console.log(" Clearing user data on logout"),et.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},yN=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const n=async(t,i={})=>{try{const s=new AbortController,o=setTimeout(()=>s.abort(),4e3);return await fetch(t,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:s.signal,...i}),clearTimeout(o),!0}catch(s){return console.log(` Connectivity test failed for ${t}:`,s instanceof Error?s.message:"Unknown error"),!1}},e=[n("https://httpstat.us/200",{method:"GET"}),n("https://httpbin.org/status/200",{method:"GET"}),n("https://www.cloudflare.com/favicon.ico"),n("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),n("https://firestore.googleapis.com/v1/projects/house-budget-pwa/databases/(default)/documents"),n("https://firebase.googleapis.com/v1/projects/house-budget-pwa"),n("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const t=await Promise.allSettled(e),i=t.filter(o=>o.status==="fulfilled"&&o.value===!0).length,s=t.length;return i>0?(console.log(` Connectivity confirmed (${i}/${s} tests passed)`),!0):(console.log(` All connectivity tests failed (${s} tests)`),!1)}catch(t){return console.log(" Connectivity testing error:",t),!1}},Nn=n=>{const e=n?.code?.toLowerCase()||"",t=n?.message?.toLowerCase()||"",i=n?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||t.includes("network")||t.includes("offline")||t.includes("disconnected")||t.includes("connection")||t.includes("fetch")||t.includes("timeout")||t.includes("err_internet_disconnected")||t.includes("err_network_changed")||t.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&t==="undefined")},et=y_((n,e)=>({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,fetchData:async()=>{const t=e(),i=Mt();if(t.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",i),n({isLoading:!0,error:null});try{console.log(" fetchData: Making Firebase calls...");let s,o,l,u;[s,o,l,u]=await Promise.all([sa.getAllEnvelopes(i).catch(p=>(console.error(" Failed to fetch envelopes:",p),[])),fr.getAllTransactions(i).catch(p=>(console.error(" Failed to fetch transactions:",p),[])),_i.getAllDistributionTemplates(i).catch(p=>(console.error(" Failed to fetch templates:",p),[])),Qr.getAppSettings(i).catch(p=>(console.error(" Failed to fetch settings:",p),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:s?.length||0,transactions:o?.length||0,templates:l?.length||0,settings:u?"found":"null"}),e().markOnlineFromFirebaseSuccess();const d=(s?.length||0)>0||(o?.length||0)>0||(l?.length||0)>0;let f=null;d||(console.log(" No data from Firebase, loading fallback data..."),f=await nz(),f&&(console.log(" Using fallback data for initialization"),s=f.envelopes||[],o=f.transactions||[],l=f.distributionTemplates||[],u=f.appSettings||null)),n(p=>{const v=x=>x.map(I=>({...I,date:I.date&&typeof I.date=="object"&&I.date.toDate?I.date.toDate().toISOString():I.date,type:I.type==="income"?"Income":I.type==="expense"?"Expense":I.type==="transfer"?"Transfer":I.type,amount:typeof I.amount=="string"?parseFloat(I.amount):I.amount})),_=x=>({id:x.id,name:x.name,currentBalance:x.currentBalance||0,lastUpdated:x.lastUpdated,isActive:x.isActive??!0,orderIndex:x.orderIndex??0}),S=s.filter(x=>!("orderIndex"in x));S.length>0&&(console.log(` Migrating ${S.length} envelopes to add orderIndex...`),S.forEach((x,I)=>{const V=I,M=Mt();sa.saveEnvelope(M,{...x,orderIndex:V}).then(()=>console.log(` Migrated envelope ${x.name} with orderIndex ${V}`)).catch(k=>console.warn(`Failed to migrate envelope ${x.id}:`,k))}));const N=s.map(_),R=new Set([...p.envelopes.map(x=>x.id),...s.map(x=>x.id)]),D=p.envelopes.filter(x=>x.id&&!s.some(I=>I.id===x.id)&&!x.id.startsWith("temp-")),L=p.transactions.filter(x=>x.id&&!o.some(I=>I.id===x.id)&&(!x.id.startsWith("temp-")||R.has(x.envelopeId)));let B,O=[];navigator.onLine?(B=l,console.log(` Online mode: Using Firebase templates only (${B.length} templates)`)):(O=p.distributionTemplates.filter(x=>x.id&&!l.some(I=>I.id===x.id)),B=l.concat(O),console.log(` Offline mode: Merged ${l.length} Firebase + ${O.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",p.envelopes.map(x=>({id:x.id,name:x.name}))),console.log("  Firebase envelopes:",s.map(x=>({id:x.id,name:x.name}))),console.log("  Store transactions:",p.transactions.map(x=>({id:x.id,envelopeId:x.envelopeId,description:x.description}))),console.log("  Firebase transactions:",o.map(x=>({id:x.id,envelopeId:x.envelopeId,description:x.description}))),console.log("  Store templates:",p.distributionTemplates.map(x=>({id:x.id,name:x.name}))),console.log("  Firebase templates:",l.map(x=>({id:x.id,name:x.name}))),console.log("  Local-only envelopes:",D.map(x=>({id:x.id,name:x.name}))),console.log("  Local-only transactions:",L.map(x=>({id:x.id,envelopeId:x.envelopeId,description:x.description}))),console.log("  Local-only templates:",O.map(x=>({id:x.id,name:x.name}))),console.log("  Total merged templates:",B.length,B.map(x=>({id:x.id,name:x.name})));const Y=N.concat(D),te=v(o).concat(L);console.log("  Local-only envelopes:",D.map(x=>({id:x.id,name:x.name}))),console.log("  Merged envelopes will be:",Y.length,Y.map(x=>({id:x.id,name:x.name})));let Z=u;if(u&&"isDarkMode"in u&&!("theme"in u)){const x=u;if(Z={...x,theme:x.isDarkMode?"dark":"light"},delete Z.isDarkMode,Z&&Z.id){const I=Mt();Qr.updateAppSettings(I,Z.id,{theme:Z.theme}).catch(V=>console.warn("Failed to migrate app settings:",V))}}return{envelopes:Y,transactions:te,distributionTemplates:B,appSettings:Z,isLoading:!1,pendingSync:!1}})}catch(s){console.error("Sync Failed:",s),Nn(s)?n({isLoading:!1,pendingSync:!0}):n({error:s.message,isLoading:!1})}},addTransaction:async t=>{const i=`temp-${Date.now()}-${Math.random()}`,s=Mt(),o={...t,id:i,userId:s};if(n(l=>({transactions:[...l.transactions,o],isLoading:!0})),t.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${t.envelopeId}`),n({isLoading:!1,pendingSync:!0});else try{const l={...o,amount:o.amount.toString(),type:o.type.toLowerCase(),date:We.fromDate(new Date(o.date))},u=await fr.addTransaction(l);console.log(` Replacing temp transaction ${i} with Firebase transaction:`,u);const d=vN(u);n(f=>({transactions:f.transactions.map(p=>p.id===i?d:p),isLoading:!1,pendingSync:!1}))}catch(l){console.error("Add Transaction Failed:",l),Nn(l)?n({isLoading:!1,pendingSync:!0,error:null}):n(u=>({transactions:u.transactions.filter(d=>d.id!==i),error:l.message,isLoading:!1}))}},createEnvelope:Ju({set:n,get:e,getCurrentUserId:Mt,isNetworkError:Nn}).createEnvelope,syncData:async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),n({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(i){console.error("Firebase reset during sync failed:",i)}return}n({pendingSync:!0});try{await e().fetchData()}catch(i){console.error("Manual sync failed:",i)}},updateOnlineStatus:async()=>{const t=await yN();n({isOnline:t})},markOnlineFromFirebaseSuccess:()=>{e().isOnline||(console.log(" Firebase operation succeeded - marking as online"),n({isOnline:!0}))},handleUserLogout:()=>{gN()},addToEnvelope:Ju({set:n,get:e,getCurrentUserId:Mt,isNetworkError:Nn}).addToEnvelope,spendFromEnvelope:Ju({set:n,get:e,getCurrentUserId:Mt,isNetworkError:Nn}).spendFromEnvelope,transferFunds:Ju({set:n,get:e,getCurrentUserId:Mt,isNetworkError:Nn}).transferFunds,deleteEnvelope:Ju({set:n,get:e,getCurrentUserId:Mt,isNetworkError:Nn}).deleteEnvelope,deleteTransaction:async t=>{const i=e().transactions.find(o=>o.id===t);if(!i)return;const s=[t];if(i.transferId){const o=e().transactions.find(l=>l.transferId===i.transferId&&l.id!==t);o&&o.id&&s.push(o.id)}n(o=>({transactions:o.transactions.filter(l=>l.id&&!s.includes(l.id)),isLoading:!0}));try{const o=Mt(),l=s.filter(u=>!u.startsWith("temp-"));for(const u of l)console.log(` About to delete transaction ID: ${u}`),await fr.deleteTransaction(o,u),console.log(` Deleted transaction ID: ${u}`);console.log(" All transaction deletions completed"),n({isLoading:!1})}catch(o){if(console.error("Delete Transaction Failed:",o),Nn(o))n({isLoading:!1,pendingSync:!0,error:null});else{const l=s.map(u=>e().transactions.find(d=>d.id===u)||i).filter(Boolean);n(u=>({transactions:[...u.transactions,...l],error:o.message,isLoading:!1}))}}},updateTransaction:async t=>{console.log(" updateTransaction called:",t),n(i=>({transactions:i.transactions.map(s=>s.id===t.id?t:s),isLoading:!0}));try{const i=Mt(),s=fr.updateTransaction(i,t.id,{description:t.description,amount:t.amount.toString(),envelopeId:t.envelopeId,date:We.fromDate(new Date(t.date)),type:t.type.toLowerCase()}),o=new Promise((l,u)=>setTimeout(()=>u(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([s,o]),console.log(" Transaction updated in Firebase"),n({isLoading:!1})}catch(i){console.error("Update Transaction Failed:",i),console.log(" Error details:",{name:i?.name||"Unknown",message:i?.message||"Unknown",code:i?.code||"Unknown",isNetworkError:Nn(i)}),Nn(i)?(console.log(" Treating as offline scenario - keeping local transaction update"),n({isLoading:!1,pendingSync:!0,error:null})):n({error:i.message,isLoading:!1})}},restoreTransaction:async t=>{n(i=>({transactions:[...i.transactions,t],isLoading:!0}));try{n({isLoading:!1})}catch(i){console.error("Restore Transaction Failed:",i),n({error:i.message,isLoading:!1})}},importData:async t=>{try{if(!t.envelopes||!t.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const i=Mt();console.log(` Importing data for user: ${i}`);const s=t.envelopes.map(p=>({id:p.id||`imported-${Date.now()}-${Math.random()}`,name:p.name,currentBalance:p.currentBalance||p.budget||0,lastUpdated:new Date().toISOString(),isActive:p.isActive??!0,orderIndex:p.orderIndex??0,userId:i})),o=t.transactions.map(p=>({...p,id:p.id||`imported-${Date.now()}-${Math.random()}`,userId:i,date:p.date,amount:typeof p.amount=="number"?p.amount:parseFloat(p.amount)||0,type:p.type,reconciled:p.reconciled??!1})),l=(t.distributionTemplates||[]).map(p=>({...p,id:p.id||`imported-${Date.now()}-${Math.random()}`,userId:i})),u=t.appSettings?{...t.appSettings,id:t.appSettings.id||`settings-${i}`,userId:i}:null;console.log(` Importing: ${s.length} envelopes, ${o.length} transactions, ${l.length} templates`),n({envelopes:s,transactions:o,distributionTemplates:l,appSettings:u,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const p of s)try{await sa.saveEnvelope(i,p),console.log(` Synced envelope: ${p.name}`)}catch(v){console.error(` Failed to sync envelope ${p.name}:`,v)}for(const p of o)try{const v={...p,amount:p.amount.toString(),type:p.type.toLowerCase(),date:We.fromDate(new Date(p.date))};await fr.addTransaction(v),console.log(` Synced transaction: ${p.description}`)}catch(v){console.error(` Failed to sync transaction ${p.description}:`,v)}for(const p of l)try{await _i.createDistributionTemplate(p),console.log(` Synced template: ${p.name}`)}catch(v){console.error(` Failed to sync template ${p.name}:`,v)}if(u)try{await Qr.createAppSettings(u),console.log(" Synced app settings")}catch(p){console.error(" Failed to sync app settings:",p)}console.log(" All imported data synced to Firebase"),n({pendingSync:!1})}catch(p){console.error(" Error syncing to Firebase:",p),n({pendingSync:!0})}const d=l.length,f=u?"Settings imported.":"";return{success:!0,message:`Imported and synced ${s.length} envelopes, ${o.length} transactions${d>0?`, ${d} templates`:""} to Firebase.${f?` ${f}`:""}`}}catch(i){return console.error("Import failed:",i),{success:!1,message:"Failed to import data. Check file format."}}},performFirebaseReset:async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),n({isLoading:!0});try{const t=Mt();console.log(" Querying Firebase for all data to delete...");const[i,s,o,l]=await Promise.all([sa.getAllEnvelopes(t).catch(p=>(console.error(" Failed to fetch envelopes for reset:",p),[])),fr.getAllTransactions(t).catch(p=>(console.error(" Failed to fetch transactions for reset:",p),[])),_i.getAllDistributionTemplates(t).catch(p=>(console.error(" Failed to fetch templates for reset:",p),[])),Qr.getAppSettings(t).catch(p=>(console.error(" Failed to fetch settings for reset:",p),null))]);console.log(` Found in Firebase: ${i.length} envelopes, ${s.length} transactions, ${o.length} templates`);let u=0;for(const p of i)if(p.id)try{await sa.deleteEnvelope(t,p.id),u++,console.log(` Deleted envelope: ${p.name||p.id}`)}catch(v){console.error(` Failed to delete envelope ${p.id}:`,v)}let d=0;for(const p of s)if(p.id)try{await fr.deleteTransaction(t,p.id),d++,console.log(` Deleted transaction: ${p.id}`)}catch(v){console.error(` Failed to delete transaction ${p.id}:`,v)}let f=0;for(const p of o)if(p.id)try{await _i.deleteDistributionTemplate(t,p.id),f++,console.log(` Deleted template: ${p.name||p.id}`)}catch(v){console.error(` Failed to delete template ${p.id}:`,v)}if(l?.id)try{await Qr.deleteAppSettings(t,l.id),console.log(" Deleted app settings")}catch(p){console.error(" Failed to delete app settings:",p)}console.log(` Firebase reset complete: Deleted ${u} envelopes, ${d} transactions, ${f} templates`),n({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(t){throw console.error(" Error during Firebase reset:",t),n({isLoading:!1,pendingSync:!0}),t}},resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),n({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(i){console.error(" Firebase reset failed, will retry on next sync:",i),n({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),n({isLoading:!1,pendingSync:!0})},renameEnvelope:async(t,i)=>{n(s=>({envelopes:s.envelopes.map(o=>o.id===t?{...o,name:i}:o),isLoading:!0}));try{n({isLoading:!1})}catch(s){console.error("Rename Envelope Failed:",s),n({error:s.message,isLoading:!1})}},saveTemplate:eh({set:n,get:e,getCurrentUserId:Mt,isNetworkError:Nn}).saveTemplate,deleteTemplate:eh({set:n,get:e,getCurrentUserId:Mt,isNetworkError:Nn}).deleteTemplate,updateAppSettings:Bv({set:n,get:e,getCurrentUserId:Mt}).updateAppSettings,initializeAppSettings:Bv({set:n,get:e,getCurrentUserId:Mt}).initializeAppSettings,cleanupOrphanedTemplates:eh({set:n,get:e,getCurrentUserId:Mt,isNetworkError:Nn}).cleanupOrphanedTemplates,updateTemplateEnvelopeReferences:eh({set:n,get:e,getCurrentUserId:Mt,isNetworkError:Nn}).updateTemplateEnvelopeReferences,removeEnvelopeFromTemplates:eh({set:n,get:e,getCurrentUserId:Mt,isNetworkError:Nn}).removeEnvelopeFromTemplates,getEnvelopeBalance:t=>{const i=e();if(!i.envelopes.find(v=>v.id===t))return console.log(` getEnvelopeBalance: Envelope ${t} not found`),new Yr(0);const o=i.transactions.filter(v=>v.envelopeId===t),l=o.filter(v=>v.type==="Expense"),u=o.filter(v=>v.type==="Income"),d=l.reduce((v,_)=>v.plus(new Yr(_.amount||0)),new Yr(0));return u.reduce((v,_)=>v.plus(new Yr(_.amount||0)),new Yr(0)).minus(d)}})),vN=n=>({id:n.id,date:n.date?.toDate?.()?n.date.toDate().toISOString():n.date,amount:parseFloat(n.amount)||0,description:n.description||"",envelopeId:n.envelopeId||"",reconciled:n.reconciled||!1,type:n.type==="income"?"Income":n.type==="expense"?"Expense":"Transfer",transferId:n.transferId||void 0,userId:n.userId||void 0}),iz=n=>({id:n.id,name:n.name||"",currentBalance:n.currentBalance||0,lastUpdated:n.lastUpdated,isActive:n.isActive??!0,orderIndex:n.orderIndex??0,userId:n.userId||void 0}),rz=n=>({id:n.id,name:n.name||"",distributions:n.distributions||{},lastUsed:n.lastUsed?.toDate?.()?n.lastUsed.toDate().toISOString():n.lastUsed||new Date().toISOString(),note:n.note||"",userId:n.userId||void 0}),rA=()=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=Mt();if(!n){console.log(" No authenticated user found, skipping real-time subscriptions");return}const e=sa.subscribeToEnvelopes(n,o=>{const l=et.getState();if(l.isOnline&&!l.pendingSync&&!l.resetPending){console.log(" Real-time sync: Envelopes updated",o.length);const u=o.map(iz);et.setState({envelopes:u})}}),t=fr.subscribeToTransactions(n,o=>{const l=et.getState();if(l.isOnline&&!l.pendingSync&&!l.resetPending){console.log(" Real-time sync: Transactions updated",o.length);const u=o.map(vN);et.setState({transactions:u})}}),i=_i.subscribeToDistributionTemplates(n,o=>{const l=et.getState();if(l.isOnline&&!l.pendingSync&&!l.resetPending){console.log(" Real-time sync: Templates updated",o.length);const u=o.map(rz);et.setState({distributionTemplates:u})}}),s=Qr.subscribeToAppSettings(n,o=>{const l=et.getState();l.isOnline&&!l.pendingSync&&!l.resetPending&&(console.log(" Real-time sync: Settings updated",o?"found":"null"),et.setState({appSettings:o}))});window.__firebaseUnsubscribers={envelopes:e,transactions:t,templates:i,settings:s},console.log(" Real-time subscriptions active - cross-device sync enabled")};if(typeof window<"u"){window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await et.getState().updateOnlineStatus();const i=et.getState();i.isOnline&&(i.pendingSync||i.resetPending)&&(console.log(" Auto-syncing pending operations..."),i.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),et.setState({isOnline:!1})}),setTimeout(()=>{et.getState().updateOnlineStatus()},1e3);let n=null;const e=()=>{n&&clearInterval(n),n=setInterval(async()=>{const i=et.getState();if(!i.isOnline&&!i.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),et.setState({testingConnectivity:!0});try{await yN()?(console.log(" Periodic retry succeeded - back online!"),et.setState({isOnline:!0,testingConnectivity:!1}),(i.pendingSync||i.resetPending)&&et.getState().syncData(),n&&(clearInterval(n),n=null)):et.setState({testingConnectivity:!1})}catch(s){console.log(" Periodic retry failed:",s),et.setState({testingConnectivity:!1})}}else i.isOnline&&n&&(clearInterval(n),n=null)},3e4)};e(),et.subscribe(i=>{!i.isOnline&&!n&&(console.log(" Starting periodic connectivity retry"),e())});const t=Sc.getState();t.isAuthenticated&&t.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),rA()),Sc.subscribe(i=>{if(i.isAuthenticated&&i.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),rA();else if(!i.isAuthenticated&&!i.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const s=window.__firebaseUnsubscribers;s.envelopes&&s.envelopes(),s.transactions&&s.transactions(),s.templates&&s.templates(),s.settings&&s.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}gN()}})}const sz=({isOpen:n,onClose:e})=>{const{envelopes:t,addToEnvelope:i,distributionTemplates:s,saveTemplate:o,deleteTemplate:l,getEnvelopeBalance:u}=et(),[d,f]=j.useState(""),[p,v]=j.useState({}),[_,S]=j.useState(""),[N,R]=j.useState(!1),[D,L]=j.useState(!1),[B,O]=j.useState(""),Y=j.useMemo(()=>t.sort((de,H)=>de.name.localeCompare(H.name)),[t]),te=parseFloat(d)||0,Z=j.useMemo(()=>Object.values(p).reduce((de,H)=>de+H,0),[p]),x=te-Z,I=Math.abs(x)<.01,V=te>0&&I,M=Z>0&&I,k=(de,H)=>{const re=parseFloat(H);v(ue=>({...ue,[de]:isNaN(re)?0:re}))},z=()=>{V&&(Object.entries(p).forEach(([de,H])=>{H>0&&i(de,H,_||"Deposit",new Date)}),f(""),v({}),S(""),e())},P=()=>{B.trim()&&(o(B,p,_),R(!1),O(""))},Ne=de=>{const H=Object.fromEntries(Object.entries(de.distributions).filter(([ue])=>Y.some(xe=>xe.id===ue)));v(H);const re=Object.values(H).reduce((ue,xe)=>ue+xe,0);f(re.toFixed(2)),S(de.note||""),L(!1)};return n?E.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-gray-50 dark:bg-black sm:bg-gray-100 dark:sm:bg-black",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 flex items-center justify-between shadow-sm shrink-0",children:[E.jsx("button",{onClick:e,className:"text-blue-600 dark:text-blue-400 font-medium text-base",children:"Cancel"}),E.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:"Distribute Funds"}),E.jsx("button",{onClick:z,disabled:!V,className:`font-bold text-base ${V?"text-blue-600 dark:text-blue-400":"text-gray-300 dark:text-zinc-600"}`,children:"Apply"})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 relative",children:[E.jsxs("div",{className:"sticky top-0 z-10 bg-gray-50/95 dark:bg-black/95 backdrop-blur-sm border-b border-gray-200 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[E.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[E.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-zinc-400 mb-1",children:"Deposit Amount"}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mr-2",children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",value:d,onChange:de=>f(de.target.value),placeholder:"0.00",className:"text-3xl font-bold text-black dark:text-white w-full focus:outline-none bg-white dark:bg-zinc-900 placeholder-gray-300 dark:placeholder-zinc-600 appearance-none",autoFocus:!0})]})]}),E.jsxs("div",{className:"flex justify-between items-center text-sm font-medium px-1",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Distributed"}),E.jsxs("span",{className:"text-gray-900 dark:text-white",children:["$",Z.toFixed(2)]})]}),E.jsxs("div",{className:"flex flex-col items-end",children:[E.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Remaining"}),E.jsxs("span",{className:`text-lg ${x===0?"text-green-600 dark:text-green-400":x<0?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:["$",x.toFixed(2)]})]})]}),!I&&te>0&&E.jsx("div",{className:"text-center text-sm font-medium text-red-500 dark:text-red-400",children:x>0?`You still have $${x.toFixed(2)} to distribute`:`You have over-allocated by $${Math.abs(x).toFixed(2)}`}),E.jsx("div",{className:"pt-2",children:M?E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("button",{onClick:()=>L(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[E.jsx(Pm,{size:16}),"Load Template"]}),E.jsxs("button",{onClick:()=>R(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 text-green-400 rounded-lg font-medium text-sm hover:bg-gray-700 transition-colors",children:[E.jsx(r4,{size:16}),"Save Template"]})]}):E.jsxs("div",{className:"flex flex-col gap-3",children:[E.jsxs("button",{onClick:()=>L(!0),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[E.jsx(Pm,{size:16}),"Load Template"]}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center px-2 leading-relaxed",children:"You can save this as a template once the Deposit Amount and Total Distributed are equal (Remaining = $0)."})]})}),E.jsx("input",{type:"text",placeholder:"Distribution Note (Optional)",value:_,onChange:de=>S(de.target.value),className:"w-full p-3 text-sm bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:outline-none text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600"})]}),E.jsx("div",{className:"p-4 space-y-3",children:Y.filter(de=>de.id).map(de=>{const H=de.id,re=p[H]||0,ue=Z>0?Math.round(re/Z*100):0;return E.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex items-center justify-between",children:[E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:de.name}),re>0&&E.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:[ue,"%"]})]}),E.jsxs("div",{className:"text-xs text-gray-400 dark:text-zinc-400",children:["Balance: $",u(de.id).toNumber().toFixed(2)]})]}),E.jsxs("div",{className:"w-32 relative",children:[E.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",value:p[H]===0?"":p[H],onChange:xe=>k(H,xe.target.value),placeholder:"0",className:"w-full pl-6 pr-6 py-2 text-right bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 outline-none font-mono text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600 appearance-none"})]})]},H)})})]}),N&&E.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-gray-200 dark:border-zinc-700",children:[E.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Save Template"}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Name your template to easily recall this distribution later."}),E.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g. Payday Split",value:B,onChange:de=>O(de.target.value),className:"w-full p-3 bg-gray-100 dark:bg-black rounded-xl mb-4 text-gray-900 dark:text-white border border-transparent focus:border-blue-500 outline-none"}),E.jsxs("div",{className:"flex gap-3",children:[E.jsx("button",{onClick:()=>R(!1),className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-semibold",children:"Cancel"}),E.jsx("button",{onClick:P,disabled:!B.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold disabled:opacity-50",children:"Save"})]})]})}),D&&E.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-end sm:items-center justify-center sm:p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-t-2xl sm:rounded-2xl shadow-2xl border-t sm:border border-gray-200 dark:border-zinc-700 max-h-[80vh] flex flex-col",children:[E.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-zinc-800 flex justify-between items-center",children:[E.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Load Template"}),E.jsx("button",{onClick:()=>L(!1),className:"p-1 rounded-full bg-gray-100 dark:bg-zinc-800 text-gray-500",children:E.jsx(g_,{size:20})})]}),E.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:s.length===0?E.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No templates saved yet."}):s.map(de=>E.jsxs("div",{className:"flex items-center gap-2 p-3 hover:bg-gray-50 dark:hover:bg-zinc-800/50 rounded-xl group transition-colors",children:[E.jsxs("button",{onClick:()=>Ne(de),className:"flex-1 text-left",children:[E.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:de.name}),E.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: $",Object.values(de.distributions).reduce((H,re)=>H+re,0).toFixed(2),de.note&&E.jsxs("span",{className:"ml-2 opacity-75",children:[" ",de.note]})]})]}),E.jsx("button",{onClick:H=>{H.stopPropagation(),confirm("Delete this template?")&&l(de.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:E.jsx(Om,{size:18})})]},de.id))})]})})]}):null},az=()=>{const[n,e]=j.useState(!1),t=j.useRef(null),{currentUser:i,logout:s}=Sc(),{handleUserLogout:o}=et(),l=wa();j.useEffect(()=>{const f=p=>{t.current&&!t.current.contains(p.target)&&e(!1)};if(n)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[n]);const u=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{o(),s(),l("/"),e(!1)}catch(f){console.error("Logout failed:",f)}};if(!i)return null;const d=i.displayName?.charAt(0)?.toUpperCase()||i.email?.charAt(0)?.toUpperCase()||"U";return E.jsxs("div",{className:"relative",ref:t,children:[E.jsxs("button",{onClick:()=>e(!n),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[E.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:d}),E.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:i.displayName||i.email?.split("@")[0]||"User"}),E.jsx(SP,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${n?"rotate-180":""}`})]}),n&&E.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[E.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:d}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:i.displayName||i.email?.split("@")[0]||"User"}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:i.email})]})]})}),E.jsxs("div",{className:"py-1",children:[E.jsxs("button",{onClick:()=>{l("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[E.jsx(l4,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),E.jsxs("button",{onClick:u,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[E.jsx(e4,{size:18}),"Log Out"]})]})]})]})},oz=()=>{const{envelopes:n,transactions:e,fetchData:t,isOnline:i,pendingSync:s,syncData:o,isLoading:l,getEnvelopeBalance:u,testingConnectivity:d}=et(),[f,p]=j.useState(!1),v=wa();j.useEffect(()=>{n.length===0&&t()},[]);const _=[...n].sort((N,R)=>N.name.localeCompare(R.name));console.log(" EnvelopeListView render - calculating balances"),console.log(" Current envelopes:",n.length),console.log(" Current transactions:",e.length);const S=n.reduce((N,R)=>{const D=u(R.id);return console.log(` Envelope ${R.name} (${R.id}): $${D.toNumber().toFixed(2)}`),N+D.toNumber()},0);return console.log(" Total balance:",S),E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-10",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("div",{className:"flex items-center gap-2",children:i?l?E.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[E.jsx(J0,{size:16,className:"animate-spin"}),E.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):s?E.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[E.jsx(J0,{size:16}),E.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):E.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[E.jsx(E4,{size:16}),E.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):E.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[E.jsx(b4,{size:16}),E.jsx("span",{className:"text-sm font-medium",children:d?"Testing Connection...":l?"Offline (Saving...)":"Offline"})]})}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("button",{onClick:()=>v("/transactions"),className:"text-blue-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Transaction History",children:E.jsx(XP,{size:22})}),E.jsx(az,{})]})]}),E.jsx("div",{className:"mt-4",children:E.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"House Expenses"})})]}),E.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[E.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 space-y-4",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("span",{className:"text-gray-600 dark:text-zinc-400 font-medium",children:"Total Balance"}),E.jsxs("span",{className:`text-2xl font-bold ${S>=0?"text-green-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[S<0?"-":"","$",Math.abs(S).toFixed(2)]})]}),E.jsxs("button",{onClick:()=>p(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-50 dark:bg-blue-900/40 text-blue-600 dark:text-blue-300 py-3 rounded-xl font-semibold active:bg-blue-100 dark:active:bg-blue-900/60 transition-colors",children:[E.jsx(YP,{size:20,className:"rotate-90"}),"Distribute Funds"]})]}),E.jsx("section",{children:_.length===0?E.jsxs("div",{className:"text-center py-10 space-y-3",children:[E.jsx(v4,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto"}),E.jsx("h3",{className:"text-gray-500 dark:text-zinc-400 font-medium",children:"No envelopes yet"}),E.jsx("button",{onClick:()=>v("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium",children:"Create First Envelope"})]}):E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{className:"flex justify-between items-end px-1",children:[E.jsx("h2",{className:"text-sm font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-wider",children:"My Envelopes"}),E.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-300 font-medium",onClick:()=>v("/add-envelope"),children:"+ New Envelope"})]}),_.map(N=>E.jsxs("div",{onClick:()=>v(`/envelope/${N.id}`),className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex justify-between items-center active:scale-[0.99] transition-transform cursor-pointer",children:[E.jsx("div",{className:"flex flex-col",children:E.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:N.name})}),E.jsxs("span",{className:`font-bold ${u(N.id).toNumber()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-emerald-400"}`,children:[u(N.id).toNumber()<0?"-":"","$",Math.abs(u(N.id).toNumber()).toFixed(2)]})]},N.id))]})})]}),E.jsx("button",{onClick:()=>v("/add-transaction"),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",children:E.jsx(MP,{size:28})}),E.jsx(sz,{isOpen:f,onClose:()=>p(!1)})]})},Cb=y_((n,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(t,i="neutral",s)=>{n({message:t,type:i,isVisible:!0,undoAction:s}),setTimeout(()=>{e().hideToast()},4e3)},hideToast:()=>{n({isVisible:!1})}})),_N=({isVisible:n,onClose:e,mode:t,currentEnvelope:i,initialTransaction:s})=>{const{addToEnvelope:o,spendFromEnvelope:l,updateTransaction:u,deleteTransaction:d}=et(),[f,p]=j.useState(""),[v,_]=j.useState(""),[S,N]=j.useState(new Date().toISOString().split("T")[0]);if(j.useEffect(()=>{if(!n)return;const O=window.setTimeout(()=>{if(t==="edit"&&s){p(s.amount.toString()),_(s.description);try{const Y=new Date(s.date);isNaN(Y.getTime())?(console.warn("Invalid date in transaction:",s.date),N(new Date().toISOString().split("T")[0])):N(Y.toISOString().split("T")[0])}catch(Y){console.error("Error parsing transaction date:",Y),N(new Date().toISOString().split("T")[0])}}else p(""),_(""),N(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(O)},[n,t,s]),!n)return null;const R=O=>{O.preventDefault();const Y=parseFloat(f);isNaN(Y)||Y<=0||(t==="add"?o(i.id,Y,v,new Date(S)):t==="spend"?l(i.id,Y,v,new Date(S)):t==="edit"&&s&&u({...s,amount:Y,description:v,date:new Date(S).toISOString()}),e())},D=()=>{!s||!s.id||window.confirm("Are you sure you want to delete this transaction?")&&(d(s.id),e())},L=t==="add"?"Add Money":t==="spend"?"Spend Money":"Edit Transaction",B=t==="add"?"text-green-500":"text-red-500";return E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[E.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[E.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),E.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:L}),E.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0,children:"Save"})]}),E.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),E.jsxs("div",{className:"relative inline-block",children:[E.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${B}`,children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:f,onChange:O=>{const Y=O.target.value;(Y===""||!isNaN(parseFloat(Y))&&parseFloat(Y)>=0)&&p(Y)},onKeyDown:O=>{(O.key==="e"||O.key==="E"||O.key==="+"||O.key==="-")&&O.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${B} placeholder-gray-700`})]})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),E.jsx("input",{type:"text",value:v,onChange:O=>_(O.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),E.jsx("input",{type:"date",value:S,onChange:O=>{console.log("Date changed to:",O.target.value),N(O.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),t==="edit"&&E.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:E.jsxs("button",{type:"button",onClick:D,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[E.jsx(LI,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},lz=({isVisible:n,onClose:e,sourceEnvelope:t})=>{const{envelopes:i,transferFunds:s}=et(),[o,l]=j.useState(""),[u,d]=j.useState(""),[f,p]=j.useState(""),[v,_]=j.useState(new Date().toISOString().split("T")[0]),S=i.filter(D=>D.id!==t.id);if(j.useEffect(()=>{if(!n)return;const D=window.setTimeout(()=>{l(""),d(""),p(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(D)},[n]),!n)return null;const N=D=>{D.preventDefault();const L=parseFloat(u);isNaN(L)||L<=0||!o||(s(t.id,o,L,f,new Date(v)),e())},R=i.find(D=>D.id===o);return E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[E.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[E.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),E.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),E.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!u||parseFloat(u)<=0||!o,children:"Transfer"})]}),E.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),E.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.name})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),E.jsxs("select",{value:o,onChange:D=>l(D.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[E.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),S.map(D=>E.jsx("option",{value:D.id,className:"bg-white dark:bg-zinc-900",children:D.name},D.id))]})]}),E.jsxs("div",{className:"text-center",children:[E.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),E.jsxs("div",{className:"relative inline-block",children:[E.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:u,onChange:D=>d(D.target.value),onKeyDown:D=>{(D.key==="e"||D.key==="E"||D.key==="+"||D.key==="-")&&D.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),E.jsx("input",{type:"text",value:f,onChange:D=>p(D.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),E.jsx("input",{type:"date",value:v,onChange:D=>_(D.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),R&&u&&parseFloat(u)>0&&E.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",E.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(u).toFixed(2)]})," from"," ",E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t.name})," to"," ",E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:R.name})]})]})]})})},cz=n=>{if(!n)return"No Date";try{let e;return n&&typeof n=="object"&&n.toDate&&typeof n.toDate=="function"?e=n.toDate():typeof n=="number"?n<1e10?e=new Date((n+978307200)*1e3):e=new Date(n):e=new Date(n),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},uz=n=>{const e=typeof n=="string"?parseFloat(n):n;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},bN=({transaction:n,envelopeName:e,onReconcile:t,onEdit:i})=>{if(!n)return null;const s=n.type==="Income",o=n.type==="Expense";let l="text-gray-900 dark:text-white";return s&&(l="text-green-600 dark:text-green-400"),o&&(l="text-red-600 dark:text-red-400"),E.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[E.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:n.description||"No Description"}),n.reconciled&&E.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),E.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[E.jsx("span",{children:cz(n.date)}),e&&E.jsxs(E.Fragment,{children:[E.jsx("span",{children:""}),E.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${l}`,children:[o?"-":s?"+":"",uz(n.amount)]}),t?E.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),t()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":n.reconciled?"Mark as unreconciled":"Mark as reconciled",children:n.reconciled?E.jsx(Xw,{className:"text-green-500",size:20}):E.jsx(Ww,{className:"text-gray-400",size:20})}):E.jsx("span",{children:n.reconciled?E.jsx(Xw,{className:"text-green-500",size:20}):E.jsx(Ww,{className:"text-gray-400",size:20})})]})]})},Nb=j.createContext({});function ig(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const Db=typeof window<"u",kb=Db?j.useLayoutEffect:j.useEffect,rg=j.createContext(null);function Vb(n,e){n.indexOf(e)===-1&&n.push(e)}function Mb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ls=(n,e,t)=>t>e?e:t<n?n:t;let Pb=()=>{};const cs={},TN=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function EN(n){return typeof n=="object"&&n!==null}const wN=n=>/^0[^.\s]+$/u.test(n);function Ob(n){let e;return()=>(e===void 0&&(e=n()),e)}const Si=n=>n,hz=(n,e)=>t=>e(n(t)),pd=(...n)=>n.reduce(hz),$h=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class Lb{constructor(){this.subscriptions=[]}add(e){return Vb(this.subscriptions,e),()=>Mb(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Er=n=>n*1e3,Ei=n=>n/1e3;function SN(n,e){return e?n*(1e3/e):0}const xN=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,dz=1e-7,fz=12;function mz(n,e,t,i,s){let o,l,u=0;do l=e+(t-e)/2,o=xN(l,i,s)-n,o>0?t=l:e=l;while(Math.abs(o)>dz&&++u<fz);return l}function gd(n,e,t,i){if(n===e&&t===i)return Si;const s=o=>mz(o,0,1,n,t);return o=>o===0||o===1?o:xN(s(o),e,i)}const AN=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,IN=n=>e=>1-n(1-e),RN=gd(.33,1.53,.69,.99),jb=IN(RN),CN=AN(jb),NN=n=>(n*=2)<1?.5*jb(n):.5*(2-Math.pow(2,-10*(n-1))),Ub=n=>1-Math.sin(Math.acos(n)),DN=IN(Ub),kN=AN(Ub),pz=gd(.42,0,1,1),gz=gd(0,0,.58,1),VN=gd(.42,0,.58,1),yz=n=>Array.isArray(n)&&typeof n[0]!="number",MN=n=>Array.isArray(n)&&typeof n[0]=="number",vz={linear:Si,easeIn:pz,easeInOut:VN,easeOut:gz,circIn:Ub,circInOut:kN,circOut:DN,backIn:jb,backInOut:CN,backOut:RN,anticipate:NN},_z=n=>typeof n=="string",sA=n=>{if(MN(n)){Pb(n.length===4);const[e,t,i,s]=n;return gd(e,t,i,s)}else if(_z(n))return vz[n];return n},sm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function bz(n,e){let t=new Set,i=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(p){l.has(p)&&(f.schedule(p),n()),p(u)}const f={schedule:(p,v=!1,_=!1)=>{const N=_&&s?t:i;return v&&l.add(p),N.has(p)||N.add(p),p},cancel:p=>{i.delete(p),l.delete(p)},process:p=>{if(u=p,s){o=!0;return}s=!0,[t,i]=[i,t],t.forEach(d),t.clear(),s=!1,o&&(o=!1,f.process(p))}};return f}const Tz=40;function PN(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=sm.reduce((O,Y)=>(O[Y]=bz(o),O),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:p,update:v,preRender:_,render:S,postRender:N}=l,R=()=>{const O=cs.useManualTiming?s.timestamp:performance.now();t=!1,cs.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(O-s.timestamp,Tz),1)),s.timestamp=O,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),p.process(s),v.process(s),_.process(s),S.process(s),N.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(R))},D=()=>{t=!0,i=!0,s.isProcessing||n(R)};return{schedule:sm.reduce((O,Y)=>{const te=l[Y];return O[Y]=(Z,x=!1,I=!1)=>(t||D(),te.schedule(Z,x,I)),O},{}),cancel:O=>{for(let Y=0;Y<sm.length;Y++)l[sm[Y]].cancel(O)},state:s,steps:l}}const{schedule:Et,cancel:ba,state:pn,steps:O0}=PN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Si,!0);let Cm;function Ez(){Cm=void 0}const qn={now:()=>(Cm===void 0&&qn.set(pn.isProcessing||cs.useManualTiming?pn.timestamp:performance.now()),Cm),set:n=>{Cm=n,queueMicrotask(Ez)}},ON=n=>e=>typeof e=="string"&&e.startsWith(n),zb=ON("--"),wz=ON("var(--"),Bb=n=>wz(n)?Sz.test(n.split("/*")[0].trim()):!1,Sz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Lc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Kh={...Lc,transform:n=>ls(0,1,n)},am={...Lc,default:1},Th=n=>Math.round(n*1e5)/1e5,Fb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xz(n){return n==null}const Az=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qb=(n,e)=>t=>!!(typeof t=="string"&&Az.test(t)&&t.startsWith(n)||e&&!xz(t)&&Object.prototype.hasOwnProperty.call(t,e)),LN=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,o,l,u]=i.match(Fb);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},Iz=n=>ls(0,255,n),L0={...Lc,transform:n=>Math.round(Iz(n))},To={test:qb("rgb","red"),parse:LN("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+L0.transform(n)+", "+L0.transform(e)+", "+L0.transform(t)+", "+Th(Kh.transform(i))+")"};function Rz(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Fv={test:qb("#"),parse:Rz,transform:To.transform},yd=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Zs=yd("deg"),wr=yd("%"),Ce=yd("px"),Cz=yd("vh"),Nz=yd("vw"),aA={...wr,parse:n=>wr.parse(n)/100,transform:n=>wr.transform(n*100)},Yl={test:qb("hsl","hue"),parse:LN("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+wr.transform(Th(e))+", "+wr.transform(Th(t))+", "+Th(Kh.transform(i))+")"},Qt={test:n=>To.test(n)||Fv.test(n)||Yl.test(n),parse:n=>To.test(n)?To.parse(n):Yl.test(n)?Yl.parse(n):Fv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?To.transform(n):Yl.transform(n),getAnimatableNone:n=>{const e=Qt.parse(n);return e.alpha=0,Qt.transform(e)}},Dz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kz(n){return isNaN(n)&&typeof n=="string"&&(n.match(Fb)?.length||0)+(n.match(Dz)?.length||0)>0}const jN="number",UN="color",Vz="var",Mz="var(",oA="${}",Pz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(Pz,d=>(Qt.test(d)?(i.color.push(o),s.push(UN),t.push(Qt.parse(d))):d.startsWith(Mz)?(i.var.push(o),s.push(Vz),t.push(d)):(i.number.push(o),s.push(jN),t.push(parseFloat(d))),++o,oA)).split(oA);return{values:t,split:u,indexes:i,types:s}}function zN(n){return Yh(n).values}function BN(n){const{split:e,types:t}=Yh(n),i=e.length;return s=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],s[l]!==void 0){const u=t[l];u===jN?o+=Th(s[l]):u===UN?o+=Qt.transform(s[l]):o+=s[l]}return o}}const Oz=n=>typeof n=="number"?0:Qt.test(n)?Qt.getAnimatableNone(n):n;function Lz(n){const e=zN(n);return BN(n)(e.map(Oz))}const Ta={test:kz,parse:zN,createTransformer:BN,getAnimatableNone:Lz};function j0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function jz({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;s=j0(d,u,n+1/3),o=j0(d,u,n),l=j0(d,u,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function fp(n,e){return t=>t>0?e:n}const St=(n,e,t)=>n+(e-n)*t,U0=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},Uz=[Fv,To,Yl],zz=n=>Uz.find(e=>e.test(n));function lA(n){const e=zz(n);if(!e)return!1;let t=e.parse(n);return e===Yl&&(t=jz(t)),t}const cA=(n,e)=>{const t=lA(n),i=lA(e);if(!t||!i)return fp(n,e);const s={...t};return o=>(s.red=U0(t.red,i.red,o),s.green=U0(t.green,i.green,o),s.blue=U0(t.blue,i.blue,o),s.alpha=St(t.alpha,i.alpha,o),To.transform(s))},qv=new Set(["none","hidden"]);function Bz(n,e){return qv.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Fz(n,e){return t=>St(n,e,t)}function Hb(n){return typeof n=="number"?Fz:typeof n=="string"?Bb(n)?fp:Qt.test(n)?cA:Gz:Array.isArray(n)?FN:typeof n=="object"?Qt.test(n)?cA:qz:fp}function FN(n,e){const t=[...n],i=t.length,s=n.map((o,l)=>Hb(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)t[l]=s[l](o);return t}}function qz(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=Hb(n[s])(n[s],e[s]));return s=>{for(const o in i)t[o]=i[o](s);return t}}function Hz(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][i[o]],u=n.values[l]??0;t[s]=u,i[o]++}return t}const Gz=(n,e)=>{const t=Ta.createTransformer(e),i=Yh(n),s=Yh(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?qv.has(n)&&!s.values.length||qv.has(e)&&!i.values.length?Bz(n,e):pd(FN(Hz(i,s),s.values),t):fp(n,e)};function qN(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?St(n,e,t):Hb(n)(n,e)}const $z=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Et.update(e,t),stop:()=>ba(e),now:()=>pn.isProcessing?pn.timestamp:qn.now()}},HN=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)i+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},mp=2e4;function Gb(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<mp;)e+=t,i=n.next(e);return e>=mp?1/0:e}function Kz(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(Gb(i),mp);return{type:"keyframes",ease:o=>i.next(s*o).value/e,duration:Ei(s)}}const Yz=5;function GN(n,e,t){const i=Math.max(e-Yz,0);return SN(t-n(i),e-i)}const Rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},z0=.001;function Qz({duration:n=Rt.duration,bounce:e=Rt.bounce,velocity:t=Rt.velocity,mass:i=Rt.mass}){let s,o,l=1-e;l=ls(Rt.minDamping,Rt.maxDamping,l),n=ls(Rt.minDuration,Rt.maxDuration,Ei(n)),l<1?(s=f=>{const p=f*l,v=p*n,_=p-t,S=Hv(f,l),N=Math.exp(-v);return z0-_/S*N},o=f=>{const v=f*l*n,_=v*t+t,S=Math.pow(l,2)*Math.pow(f,2)*n,N=Math.exp(-v),R=Hv(Math.pow(f,2),l);return(-s(f)+z0>0?-1:1)*((_-S)*N)/R}):(s=f=>{const p=Math.exp(-f*n),v=(f-t)*n+1;return-z0+p*v},o=f=>{const p=Math.exp(-f*n),v=(t-f)*(n*n);return p*v});const u=5/n,d=Wz(s,o,u);if(n=Er(n),isNaN(d))return{stiffness:Rt.stiffness,damping:Rt.damping,duration:n};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:n}}}const Xz=12;function Wz(n,e,t){let i=t;for(let s=1;s<Xz;s++)i=i-n(i)/e(i);return i}function Hv(n,e){return n*Math.sqrt(1-e*e)}const Zz=["duration","bounce"],Jz=["stiffness","damping","mass"];function uA(n,e){return e.some(t=>n[t]!==void 0)}function e8(n){let e={velocity:Rt.velocity,stiffness:Rt.stiffness,damping:Rt.damping,mass:Rt.mass,isResolvedFromDuration:!1,...n};if(!uA(n,Jz)&&uA(n,Zz))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,o=2*ls(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Rt.mass,stiffness:s,damping:o}}else{const t=Qz(n);e={...e,...t,mass:Rt.mass},e.isResolvedFromDuration=!0}return e}function pp(n=Rt.visualDuration,e=Rt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:f,mass:p,duration:v,velocity:_,isResolvedFromDuration:S}=e8({...t,velocity:-Ei(t.velocity||0)}),N=_||0,R=f/(2*Math.sqrt(d*p)),D=l-o,L=Ei(Math.sqrt(d/p)),B=Math.abs(D)<5;i||(i=B?Rt.restSpeed.granular:Rt.restSpeed.default),s||(s=B?Rt.restDelta.granular:Rt.restDelta.default);let O;if(R<1){const te=Hv(L,R);O=Z=>{const x=Math.exp(-R*L*Z);return l-x*((N+R*L*D)/te*Math.sin(te*Z)+D*Math.cos(te*Z))}}else if(R===1)O=te=>l-Math.exp(-L*te)*(D+(N+L*D)*te);else{const te=L*Math.sqrt(R*R-1);O=Z=>{const x=Math.exp(-R*L*Z),I=Math.min(te*Z,300);return l-x*((N+R*L*D)*Math.sinh(I)+te*D*Math.cosh(I))/te}}const Y={calculatedDuration:S&&v||null,next:te=>{const Z=O(te);if(S)u.done=te>=v;else{let x=te===0?N:0;R<1&&(x=te===0?Er(N):GN(O,te,Z));const I=Math.abs(x)<=i,V=Math.abs(l-Z)<=s;u.done=I&&V}return u.value=u.done?l:Z,u},toString:()=>{const te=Math.min(Gb(Y),mp),Z=HN(x=>Y.next(te*x).value,te,30);return te+"ms "+Z},toTransition:()=>{}};return Y}pp.applyToOptions=n=>{const e=Kz(n,100,pp);return n.ease=e.ease,n.duration=Er(e.duration),n.type="keyframes",n};function Gv({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:p}){const v=n[0],_={done:!1,value:v},S=I=>u!==void 0&&I<u||d!==void 0&&I>d,N=I=>u===void 0?d:d===void 0||Math.abs(u-I)<Math.abs(d-I)?u:d;let R=t*e;const D=v+R,L=l===void 0?D:l(D);L!==D&&(R=L-v);const B=I=>-R*Math.exp(-I/i),O=I=>L+B(I),Y=I=>{const V=B(I),M=O(I);_.done=Math.abs(V)<=f,_.value=_.done?L:M};let te,Z;const x=I=>{S(_.value)&&(te=I,Z=pp({keyframes:[_.value,N(_.value)],velocity:GN(O,I,_.value),damping:s,stiffness:o,restDelta:f,restSpeed:p}))};return x(0),{calculatedDuration:null,next:I=>{let V=!1;return!Z&&te===void 0&&(V=!0,Y(I),x(I)),te!==void 0&&I>=te?Z.next(I-te):(!V&&Y(I),_)}}}function t8(n,e,t){const i=[],s=t||cs.mix||qN,o=n.length-1;for(let l=0;l<o;l++){let u=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Si:e;u=pd(d,u)}i.push(u)}return i}function n8(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const o=n.length;if(Pb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=t8(e,i,s),d=u.length,f=p=>{if(l&&p<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(p<n[v+1]);v++);const _=$h(n[v],n[v+1],p);return u[v](_)};return t?p=>f(ls(n[0],n[o-1],p)):f}function i8(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=$h(0,e,i);n.push(St(t,1,s))}}function r8(n){const e=[0];return i8(e,n.length-1),e}function s8(n,e){return n.map(t=>t*e)}function a8(n,e){return n.map(()=>e||VN).splice(0,n.length-1)}function Eh({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=yz(i)?i.map(sA):sA(i),o={done:!1,value:e[0]},l=s8(t&&t.length===e.length?t:r8(e),n),u=n8(l,e,{ease:Array.isArray(s)?s:a8(e,s)});return{calculatedDuration:n,next:d=>(o.value=u(d),o.done=d>=n,o)}}const o8=n=>n!==null;function $b(n,{repeat:e,repeatType:t="loop"},i,s=1){const o=n.filter(o8),u=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!u||i===void 0?o[u]:i}const l8={decay:Gv,inertia:Gv,tween:Eh,keyframes:Eh,spring:pp};function $N(n){typeof n.type=="string"&&(n.type=l8[n.type])}class Kb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const c8=n=>n/100;class Yb extends Kb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==qn.now()&&this.tick(qn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;$N(e);const{type:t=Eh,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:u}=e;const d=t||Eh;d!==Eh&&typeof u[0]!="number"&&(this.mixKeyframes=pd(c8,qN(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=Gb(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:p,repeat:v,repeatType:_,repeatDelay:S,type:N,onUpdate:R,finalKeyframe:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const L=this.currentTime-f*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?L<0:L>s;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let O=this.currentTime,Y=i;if(v){const I=Math.min(this.currentTime,s)/u;let V=Math.floor(I),M=I%1;!M&&I>=1&&(M=1),M===1&&V--,V=Math.min(V,v+1),!!(V%2)&&(_==="reverse"?(M=1-M,S&&(M-=S/u)):_==="mirror"&&(Y=l)),O=ls(0,1,M)*u}const te=B?{done:!1,value:p[0]}:Y.next(O);o&&(te.value=o(te.value));let{done:Z}=te;!B&&d!==null&&(Z=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return x&&N!==Gv&&(te.value=$b(p,this.options,D,this.speed)),R&&R(te.value),x&&this.finish(),te}then(e,t){return this.finished.then(e,t)}get duration(){return Ei(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ei(e)}get time(){return Ei(this.currentTime)}set time(e){e=Er(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(qn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ei(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=$z,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(qn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function u8(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Eo=n=>n*180/Math.PI,$v=n=>{const e=Eo(Math.atan2(n[1],n[0]));return Kv(e)},h8={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:$v,rotateZ:$v,skewX:n=>Eo(Math.atan(n[1])),skewY:n=>Eo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Kv=n=>(n=n%360,n<0&&(n+=360),n),hA=$v,dA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),fA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),d8={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:dA,scaleY:fA,scale:n=>(dA(n)+fA(n))/2,rotateX:n=>Kv(Eo(Math.atan2(n[6],n[5]))),rotateY:n=>Kv(Eo(Math.atan2(-n[2],n[0]))),rotateZ:hA,rotate:hA,skewX:n=>Eo(Math.atan(n[4])),skewY:n=>Eo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Yv(n){return n.includes("scale")?1:0}function Qv(n,e){if(!n||n==="none")return Yv(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=d8,s=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=h8,s=u}if(!s)return Yv(e);const o=i[e],l=s[1].split(",").map(m8);return typeof o=="function"?o(l):l[o]}const f8=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Qv(t,e)};function m8(n){return parseFloat(n.trim())}const jc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uc=new Set(jc),mA=n=>n===Lc||n===Ce,p8=new Set(["x","y","z"]),g8=jc.filter(n=>!p8.has(n));function y8(n){const e=[];return g8.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Ro={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Qv(e,"x"),y:(n,{transform:e})=>Qv(e,"y")};Ro.translateX=Ro.x;Ro.translateY=Ro.y;const Co=new Set;let Xv=!1,Wv=!1,Zv=!1;function KN(){if(Wv){const n=Array.from(Co).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=y8(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([o,l])=>{i.getValue(o)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Wv=!1,Xv=!1,Co.forEach(n=>n.complete(Zv)),Co.clear()}function YN(){Co.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Wv=!0)})}function v8(){Zv=!0,YN(),KN(),Zv=!1}class Qb{constructor(e,t,i,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Co.add(this),Xv||(Xv=!0,Et.read(YN),Et.resolveKeyframes(KN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const u=i.readValue(t,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}u8(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Co.delete(this)}cancel(){this.state==="scheduled"&&(Co.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const _8=n=>n.startsWith("--");function b8(n,e,t){_8(e)?n.style.setProperty(e,t):n.style[e]=t}const T8=Ob(()=>window.ScrollTimeline!==void 0),E8={};function w8(n,e){const t=Ob(n);return()=>E8[e]??t()}const QN=w8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ch=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,pA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ch([0,.65,.55,1]),circOut:ch([.55,0,1,.45]),backIn:ch([.31,.01,.66,-.59]),backOut:ch([.33,1.53,.69,.99])};function XN(n,e){if(n)return typeof n=="function"?QN()?HN(n,e):"ease-out":MN(n)?ch(n):Array.isArray(n)?n.map(t=>XN(t,e)||pA.easeOut):pA[n]}function S8(n,e,t,{delay:i=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const p={[e]:t};d&&(p.offset=d);const v=XN(u,s);Array.isArray(v)&&(p.easing=v);const _={delay:i,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),n.animate(p,_)}function WN(n){return typeof n=="function"&&"applyToOptions"in n}function x8({type:n,...e}){return WN(n)&&QN()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class A8 extends Kb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,Pb(typeof e.type!="string");const f=x8(e);this.animation=S8(t,i,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=$b(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):b8(t,i,p),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ei(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ei(e)}get time(){return Ei(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Er(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&T8()?(this.animation.timeline=e,Si):t(this)}}const ZN={anticipate:NN,backInOut:CN,circInOut:kN};function I8(n){return n in ZN}function R8(n){typeof n.ease=="string"&&I8(n.ease)&&(n.ease=ZN[n.ease])}const gA=10;class C8 extends A8{constructor(e){R8(e),$N(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new Yb({...l,autoplay:!1}),d=Er(this.finishedTime??this.time);t.setWithVelocity(u.sample(d-gA).value,u.sample(d).value,gA),u.stop()}}const yA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ta.test(n)||n==="0")&&!n.startsWith("url("));function N8(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function D8(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=yA(s,e),u=yA(o,e);return!l||!u?!1:N8(n)||(t==="spring"||WN(t))&&i}function Jv(n){n.duration=0,n.type="keyframes"}const k8=new Set(["opacity","clipPath","filter","transform"]),V8=Ob(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function M8(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:o,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return V8()&&t&&k8.has(t)&&(t!=="transform"||!f)&&!d&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}const P8=40;class O8 extends Kb{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:p,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=qn.now();const _={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:o,repeatType:l,name:d,motionValue:f,element:p,...v},S=p?.KeyframeResolver||Qb;this.keyframeResolver=new S(u,(N,R,D)=>this.onKeyframesResolved(N,R,_,!D),d,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:p}=i;this.resolvedAt=qn.now(),D8(e,o,l,u)||((cs.instantAnimations||!d)&&p?.($b(e,i,t)),e[0]=e[e.length-1],Jv(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>P8?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},S=!f&&M8(_)?new C8({..._,element:_.motionValue.owner.current}):new Yb(_);S.finished.then(()=>this.notifyFinished()).catch(Si),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),v8()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const L8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function j8(n){const e=L8.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function JN(n,e,t=1){const[i,s]=j8(n);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return TN(l)?parseFloat(l):l}return Bb(s)?JN(s,e,t+1):s}function Xb(n,e){return n?.[e]??n?.default??n}const eD=new Set(["width","height","top","left","right","bottom",...jc]),U8={test:n=>n==="auto",parse:n=>n},tD=n=>e=>e.test(n),nD=[Lc,Ce,wr,Zs,Nz,Cz,U8],vA=n=>nD.find(tD(n));function z8(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||wN(n):!0}const B8=new Set(["brightness","contrast","saturate","opacity"]);function F8(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Fb)||[];if(!i)return n;const s=t.replace(i,"");let o=B8.has(e)?1:0;return i!==t&&(o*=100),e+"("+o+s+")"}const q8=/\b([a-z-]*)\(.*?\)/gu,e_={...Ta,getAnimatableNone:n=>{const e=n.match(q8);return e?e.map(F8).join(" "):n}},_A={...Lc,transform:Math.round},H8={rotate:Zs,rotateX:Zs,rotateY:Zs,rotateZ:Zs,scale:am,scaleX:am,scaleY:am,scaleZ:am,skew:Zs,skewX:Zs,skewY:Zs,distance:Ce,translateX:Ce,translateY:Ce,translateZ:Ce,x:Ce,y:Ce,z:Ce,perspective:Ce,transformPerspective:Ce,opacity:Kh,originX:aA,originY:aA,originZ:Ce},Wb={borderWidth:Ce,borderTopWidth:Ce,borderRightWidth:Ce,borderBottomWidth:Ce,borderLeftWidth:Ce,borderRadius:Ce,radius:Ce,borderTopLeftRadius:Ce,borderTopRightRadius:Ce,borderBottomRightRadius:Ce,borderBottomLeftRadius:Ce,width:Ce,maxWidth:Ce,height:Ce,maxHeight:Ce,top:Ce,right:Ce,bottom:Ce,left:Ce,padding:Ce,paddingTop:Ce,paddingRight:Ce,paddingBottom:Ce,paddingLeft:Ce,margin:Ce,marginTop:Ce,marginRight:Ce,marginBottom:Ce,marginLeft:Ce,backgroundPositionX:Ce,backgroundPositionY:Ce,...H8,zIndex:_A,fillOpacity:Kh,strokeOpacity:Kh,numOctaves:_A},G8={...Wb,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:e_,WebkitFilter:e_},iD=n=>G8[n];function rD(n,e){let t=iD(n);return t!==e_&&(t=Ta),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const $8=new Set(["auto","none","0"]);function K8(n,e,t){let i=0,s;for(;i<n.length&&!s;){const o=n[i];typeof o=="string"&&!$8.has(o)&&Yh(o).values.length&&(s=n[i]),i++}if(s&&t)for(const o of e)n[o]=rD(t,s)}class Y8 extends Qb{constructor(e,t,i,s,o){super(e,t,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),Bb(f))){const p=JN(f,t.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!eD.has(i)||e.length!==2)return;const[s,o]=e,l=vA(s),u=vA(o);if(l!==u)if(mA(l)&&mA(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else Ro[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||z8(e[s]))&&i.push(s);i.length&&K8(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ro[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=Ro[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function Q8(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=t?.[n]??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const sD=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function aD(n){return EN(n)&&"offsetHeight"in n}const bA=30,X8=n=>!isNaN(parseFloat(n));class W8{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=qn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=qn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=X8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Lb);const i=this.events[e].add(t);return e==="change"?()=>{i(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=qn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>bA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,bA);return SN(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xc(n,e){return new W8(n,e)}const{schedule:Zb}=PN(queueMicrotask,!1),ji={x:!1,y:!1};function oD(){return ji.x||ji.y}function Z8(n){return n==="x"||n==="y"?ji[n]?null:(ji[n]=!0,()=>{ji[n]=!1}):ji.x||ji.y?null:(ji.x=ji.y=!0,()=>{ji.x=ji.y=!1})}function lD(n,e){const t=Q8(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function TA(n){return!(n.pointerType==="touch"||oD())}function J8(n,e,t={}){const[i,s,o]=lD(n,t),l=u=>{if(!TA(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const p=v=>{TA(v)&&(f(v),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,s)};return i.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}const cD=(n,e)=>e?n===e?!0:cD(n,e.parentElement):!1,Jb=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,eB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function tB(n){return eB.has(n.tagName)||n.tabIndex!==-1}const Nm=new WeakSet;function EA(n){return e=>{e.key==="Enter"&&n(e)}}function B0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const nB=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=EA(()=>{if(Nm.has(t))return;B0(t,"down");const s=EA(()=>{B0(t,"up")}),o=()=>B0(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function wA(n){return Jb(n)&&!oD()}function iB(n,e,t={}){const[i,s,o]=lD(n,t),l=u=>{const d=u.currentTarget;if(!wA(u))return;Nm.add(d);const f=e(d,u),p=(S,N)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),Nm.has(d)&&Nm.delete(d),wA(S)&&typeof f=="function"&&f(S,{success:N})},v=S=>{p(S,d===window||d===document||t.useGlobalTarget||cD(d,S.target))},_=S=>{p(S,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return i.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),aD(u)&&(u.addEventListener("focus",f=>nB(f,s)),!tB(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function uD(n){return EN(n)&&"ownerSVGElement"in n}function rB(n){return uD(n)&&n.tagName==="svg"}const Sn=n=>!!(n&&n.getVelocity),sB=[...nD,Qt,Ta],aB=n=>sB.find(tD(n)),eT=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function SA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function oB(...n){return e=>{let t=!1;const i=n.map(s=>{const o=SA(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():SA(n[s],null)}}}}function lB(...n){return j.useCallback(oB(...n),n)}class cB extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=aD(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function uB({children:n,isPresent:e,anchorX:t,root:i}){const s=j.useId(),o=j.useRef(null),l=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=j.useContext(eT),d=lB(o,n?.ref);return j.useInsertionEffect(()=>{const{width:f,height:p,top:v,left:_,right:S}=l.current;if(e||!o.current||!f||!p)return;const N=t==="left"?`left: ${_}`:`right: ${S}`;o.current.dataset.motionPopId=s;const R=document.createElement("style");u&&(R.nonce=u);const D=i??document.head;return D.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${p}px !important;
            ${N}px !important;
            top: ${v}px !important;
          }
        `),()=>{D.contains(R)&&D.removeChild(R)}},[e]),E.jsx(cB,{isPresent:e,childRef:o,sizeRef:l,children:j.cloneElement(n,{ref:d})})}const hB=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u,root:d})=>{const f=ig(dB),p=j.useId();let v=!0,_=j.useMemo(()=>(v=!1,{id:p,initial:e,isPresent:t,custom:s,onExitComplete:S=>{f.set(S,!0);for(const N of f.values())if(!N)return;i&&i()},register:S=>(f.set(S,!1),()=>f.delete(S))}),[t,f,i]);return o&&v&&(_={..._}),j.useMemo(()=>{f.forEach((S,N)=>f.set(N,!1))},[t]),j.useEffect(()=>{!t&&!f.size&&i&&i()},[t]),l==="popLayout"&&(n=E.jsx(uB,{isPresent:t,anchorX:u,root:d,children:n})),E.jsx(rg.Provider,{value:_,children:n})};function dB(){return new Map}function hD(n=!0){const e=j.useContext(rg);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,o=j.useId();j.useEffect(()=>{if(n)return s(o)},[n]);const l=j.useCallback(()=>n&&i&&i(o),[o,i,n]);return!t&&i?[!1,l]:[!0]}const om=n=>n.key||"";function xA(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const tT=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left",root:d})=>{const[f,p]=hD(l),v=j.useMemo(()=>xA(n),[n]),_=l&&!f?[]:v.map(om),S=j.useRef(!0),N=j.useRef(v),R=ig(()=>new Map),[D,L]=j.useState(v),[B,O]=j.useState(v);kb(()=>{S.current=!1,N.current=v;for(let Z=0;Z<B.length;Z++){const x=om(B[Z]);_.includes(x)?R.delete(x):R.get(x)!==!0&&R.set(x,!1)}},[B,_.length,_.join("-")]);const Y=[];if(v!==D){let Z=[...v];for(let x=0;x<B.length;x++){const I=B[x],V=om(I);_.includes(V)||(Z.splice(x,0,I),Y.push(I))}return o==="wait"&&Y.length&&(Z=Y),O(xA(Z)),L(v),null}const{forceRender:te}=j.useContext(Nb);return E.jsx(E.Fragment,{children:B.map(Z=>{const x=om(Z),I=l&&!f?!1:v===B||_.includes(x),V=()=>{if(R.has(x))R.set(x,!0);else return;let M=!0;R.forEach(k=>{k||(M=!1)}),M&&(te?.(),O(N.current),l&&p?.(),i&&i())};return E.jsx(hB,{isPresent:I,initial:!S.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:I?void 0:V,anchorX:u,children:Z},x)})})},dD=j.createContext({strict:!1}),AA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ac={};for(const n in AA)Ac[n]={isEnabled:e=>AA[n].some(t=>!!e[t])};function fB(n){for(const e in n)Ac[e]={...Ac[e],...n[e]}}const mB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||mB.has(n)}let fD=n=>!gp(n);function pB(n){typeof n=="function"&&(fD=e=>e.startsWith("on")?!gp(e):n(e))}try{pB(require("@emotion/is-prop-valid").default)}catch{}function gB(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(fD(s)||t===!0&&gp(s)||!e&&!gp(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const sg=j.createContext({});function ag(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Qh(n){return typeof n=="string"||Array.isArray(n)}const nT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iT=["initial",...nT];function og(n){return ag(n.animate)||iT.some(e=>Qh(n[e]))}function mD(n){return!!(og(n)||n.variants)}function yB(n,e){if(og(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Qh(t)?t:void 0,animate:Qh(i)?i:void 0}}return n.inherit!==!1?e:{}}function vB(n){const{initial:e,animate:t}=yB(n,j.useContext(sg));return j.useMemo(()=>({initial:e,animate:t}),[IA(e),IA(t)])}function IA(n){return Array.isArray(n)?n.join(" "):n}const Xh={};function _B(n){for(const e in n)Xh[e]=n[e],zb(e)&&(Xh[e].isCSSVariable=!0)}function pD(n,{layout:e,layoutId:t}){return Uc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Xh[n]||n==="opacity")}const bB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TB=jc.length;function EB(n,e,t){let i="",s=!0;for(let o=0;o<TB;o++){const l=jc[o],u=n[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||t){const f=sD(u,Wb[l]);if(!d){s=!1;const p=bB[l]||l;i+=`${p}(${f}) `}t&&(e[l]=f)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function rT(n,e,t){const{style:i,vars:s,transformOrigin:o}=n;let l=!1,u=!1;for(const d in e){const f=e[d];if(Uc.has(d)){l=!0;continue}else if(zb(d)){s[d]=f;continue}else{const p=sD(f,Wb[d]);d.startsWith("origin")?(u=!0,o[d]=p):i[d]=p}}if(e.transform||(l||t?i.transform=EB(e,n.transform,t):i.transform&&(i.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:p=0}=o;i.transformOrigin=`${d} ${f} ${p}`}}const sT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gD(n,e,t){for(const i in e)!Sn(e[i])&&!pD(i,t)&&(n[i]=e[i])}function wB({transformTemplate:n},e){return j.useMemo(()=>{const t=sT();return rT(t,e,n),Object.assign({},t.vars,t.style)},[e])}function SB(n,e){const t=n.style||{},i={};return gD(i,t,n),Object.assign(i,wB(n,e)),i}function xB(n,e){const t={},i=SB(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const AB={offset:"stroke-dashoffset",array:"stroke-dasharray"},IB={offset:"strokeDashoffset",array:"strokeDasharray"};function RB(n,e,t=1,i=0,s=!0){n.pathLength=1;const o=s?AB:IB;n[o.offset]=Ce.transform(-i);const l=Ce.transform(e),u=Ce.transform(t);n[o.array]=`${l} ${u}`}function yD(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},d,f,p){if(rT(n,u,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_}=n;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=p?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),s!==void 0&&RB(v,s,o,l,!1)}const vD=()=>({...sT(),attrs:{}}),_D=n=>typeof n=="string"&&n.toLowerCase()==="svg";function CB(n,e,t,i){const s=j.useMemo(()=>{const o=vD();return yD(o,e,_D(i),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};gD(o,n.style,n),s.style={...o,...s.style}}return s}const NB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function aT(n){return typeof n!="string"||n.includes("-")?!1:!!(NB.indexOf(n)>-1||/[A-Z]/u.test(n))}function DB(n,e,t,{latestValues:i},s,o=!1){const u=(aT(n)?CB:xB)(e,i,s,n),d=gB(e,typeof n=="string",o),f=n!==j.Fragment?{...d,...u,ref:t}:{},{children:p}=e,v=j.useMemo(()=>Sn(p)?p.get():p,[p]);return j.createElement(n,{...f,children:v})}function RA(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function oT(n,e,t,i){if(typeof e=="function"){const[s,o]=RA(i);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=RA(i);e=e(t!==void 0?t:n.custom,s,o)}return e}function Dm(n){return Sn(n)?n.get():n}function kB({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:VB(t,i,s,n),renderState:e()}}function VB(n,e,t,i){const s={},o=i(n,{});for(const _ in o)s[_]=Dm(o[_]);let{initial:l,animate:u}=n;const d=og(n),f=mD(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let p=t?t.initial===!1:!1;p=p||l===!1;const v=p?u:l;if(v&&typeof v!="boolean"&&!ag(v)){const _=Array.isArray(v)?v:[v];for(let S=0;S<_.length;S++){const N=oT(n,_[S]);if(N){const{transitionEnd:R,transition:D,...L}=N;for(const B in L){let O=L[B];if(Array.isArray(O)){const Y=p?O.length-1:0;O=O[Y]}O!==null&&(s[B]=O)}for(const B in R)s[B]=R[B]}}}return s}const bD=n=>(e,t)=>{const i=j.useContext(sg),s=j.useContext(rg),o=()=>kB(n,e,i,s);return t?o():ig(o)};function lT(n,e,t){const{style:i}=n,s={};for(const o in i)(Sn(i[o])||e.style&&Sn(e.style[o])||pD(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const MB=bD({scrapeMotionValuesFromProps:lT,createRenderState:sT});function TD(n,e,t){const i=lT(n,e,t);for(const s in n)if(Sn(n[s])||Sn(e[s])){const o=jc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=n[s]}return i}const PB=bD({scrapeMotionValuesFromProps:TD,createRenderState:vD}),OB=Symbol.for("motionComponentSymbol");function Ql(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function LB(n,e,t){return j.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Ql(t)&&(t.current=i))},[e])}const cT=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),jB="framerAppearId",ED="data-"+cT(jB),wD=j.createContext({});function UB(n,e,t,i,s){const{visualElement:o}=j.useContext(sg),l=j.useContext(dD),u=j.useContext(rg),d=j.useContext(eT).reducedMotion,f=j.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,v=j.useContext(wD);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&zB(f.current,t,s,v);const _=j.useRef(!1);j.useInsertionEffect(()=>{p&&_.current&&p.update(t,u)});const S=t[ED],N=j.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return kb(()=>{p&&(_.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),N.current&&p.animationState&&p.animationState.animateChanges())}),j.useEffect(()=>{p&&(!N.current&&p.animationState&&p.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),N.current=!1),p.enteringChildren=void 0)}),p}function zB(n,e,t,i){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:SD(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&Ql(u),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:p,layoutScroll:d,layoutRoot:f})}function SD(n){if(n)return n.options.allowProjection!==!1?n.projection:SD(n.parent)}function F0(n,{forwardMotionProps:e=!1}={},t,i){t&&fB(t);const s=aT(n)?PB:MB;function o(u,d){let f;const p={...j.useContext(eT),...u,layoutId:BB(u)},{isStatic:v}=p,_=vB(u),S=s(u,v);if(!v&&Db){FB();const N=qB(p);f=N.MeasureLayout,_.visualElement=UB(n,S,p,i,N.ProjectionNode)}return E.jsxs(sg.Provider,{value:_,children:[f&&_.visualElement?E.jsx(f,{visualElement:_.visualElement,...p}):null,DB(n,u,LB(S,_.visualElement,d),S,v,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=j.forwardRef(o);return l[OB]=n,l}function BB({layoutId:n}){const e=j.useContext(Nb).id;return e&&n!==void 0?e+"-"+n:n}function FB(n,e){j.useContext(dD).strict}function qB(n){const{drag:e,layout:t}=Ac;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function HB(n,e){if(typeof Proxy>"u")return F0;const t=new Map,i=(o,l)=>F0(o,l,n,e),s=(o,l)=>i(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?i:(t.has(l)||t.set(l,F0(l,void 0,n,e)),t.get(l))})}function xD({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function GB({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function $B(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function q0(n){return n===void 0||n===1}function t_({scale:n,scaleX:e,scaleY:t}){return!q0(n)||!q0(e)||!q0(t)}function po(n){return t_(n)||AD(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function AD(n){return CA(n.x)||CA(n.y)}function CA(n){return n&&n!=="0%"}function yp(n,e,t){const i=n-t,s=e*i;return t+s}function NA(n,e,t,i,s){return s!==void 0&&(n=yp(n,s,i)),yp(n,t,i)+e}function n_(n,e=0,t=1,i,s){n.min=NA(n.min,e,t,i,s),n.max=NA(n.max,e,t,i,s)}function ID(n,{x:e,y:t}){n_(n.x,e.translate,e.scale,e.originPoint),n_(n.y,t.translate,t.scale,t.originPoint)}const DA=.999999999999,kA=1.0000000000001;function KB(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let u=0;u<s;u++){o=t[u],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Wl(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,ID(n,l)),i&&po(o.latestValues)&&Wl(n,o.latestValues))}e.x<kA&&e.x>DA&&(e.x=1),e.y<kA&&e.y>DA&&(e.y=1)}function Xl(n,e){n.min=n.min+e,n.max=n.max+e}function VA(n,e,t,i,s=.5){const o=St(n.min,n.max,s);n_(n,e,t,o,i)}function Wl(n,e){VA(n.x,e.x,e.scaleX,e.scale,e.originX),VA(n.y,e.y,e.scaleY,e.scale,e.originY)}function RD(n,e){return xD($B(n.getBoundingClientRect(),e))}function YB(n,e,t){const i=RD(n,t),{scroll:s}=e;return s&&(Xl(i.x,s.offset.x),Xl(i.y,s.offset.y)),i}const MA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zl=()=>({x:MA(),y:MA()}),PA=()=>({min:0,max:0}),Pt=()=>({x:PA(),y:PA()}),i_={current:null},CD={current:!1};function QB(){if(CD.current=!0,!!Db)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>i_.current=n.matches;n.addEventListener("change",e),e()}else i_.current=!1}const XB=new WeakMap;function WB(n,e,t){for(const i in e){const s=e[i],o=t[i];if(Sn(s))n.addValue(i,s);else if(Sn(o))n.addValue(i,xc(s,{owner:n}));else if(o!==s)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,xc(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const OA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ZB{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=qn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Et.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=og(t),this.isVariantNode=mD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const S=v[_];d[_]!==void 0&&Sn(S)&&S.set(d[_])}}mount(e){this.current=e,XB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),CD.current||QB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:i_.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ba(this.notifyUpdate),ba(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Uc.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Et.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ac){const t=Ac[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<OA.length;i++){const s=OA[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=WB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=xc(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(TN(i)||wN(i))?i=parseFloat(i):!aB(i)&&Ta.test(t)&&(i=rD(e,t)),this.setBaseTarget(e,Sn(i)?i.get():i)),Sn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const o=oT(this.props,t,this.presenceContext?.custom);o&&(i=o[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Sn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Lb),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Zb.render(this.render)}}class ND extends ZB{constructor(){super(...arguments),this.KeyframeResolver=Y8}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Sn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function DD(n,{style:e,vars:t},i,s){const o=n.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,i);for(l in t)o.setProperty(l,t[l])}function JB(n){return window.getComputedStyle(n)}class e7 extends ND{constructor(){super(...arguments),this.type="html",this.renderInstance=DD}readValueFromInstance(e,t){if(Uc.has(t))return this.projection?.isProjecting?Yv(t):f8(e,t);{const i=JB(e),s=(zb(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return RD(e,t)}build(e,t,i){rT(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return lT(e,t,i)}}const kD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function t7(n,e,t,i){DD(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(kD.has(s)?s:cT(s),e.attrs[s])}class n7 extends ND{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Uc.has(t)){const i=iD(t);return i&&i.default||0}return t=kD.has(t)?t:cT(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return TD(e,t,i)}build(e,t,i){yD(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){t7(e,t,i,s)}mount(e){this.isSVGTag=_D(e.tagName),super.mount(e)}}const i7=(n,e)=>aT(n)?new n7(e):new e7(e,{allowProjection:n!==j.Fragment});function ic(n,e,t){const i=n.getProps();return oT(i,e,t!==void 0?t:i.custom,n)}const r_=n=>Array.isArray(n);function r7(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,xc(t))}function s7(n){return r_(n)?n[n.length-1]||0:n}function uT(n,e){const t=ic(n,e);let{transitionEnd:i={},transition:s={},...o}=t||{};o={...o,...i};for(const l in o){const u=s7(o[l]);r7(n,l,u)}}function a7(n){return!!(Sn(n)&&n.add)}function s_(n,e){const t=n.getValue("willChange");if(a7(t))return t.add(e);if(!t&&cs.WillChange){const i=new cs.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function VD(n){return n.props[ED]}const o7=n=>n!==null;function l7(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(o7),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}const c7={type:"spring",stiffness:500,damping:25,restSpeed:10},u7=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),h7={type:"keyframes",duration:.8},d7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},f7=(n,{keyframes:e})=>e.length>2?h7:Uc.has(n)?n.startsWith("scale")?u7(e[1]):c7:d7;function m7({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const hT=(n,e,t,i={},s,o)=>l=>{const u=Xb(i,n)||{},d=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Er(d);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:s};m7(u)||Object.assign(p,f7(n,p)),p.duration&&(p.duration=Er(p.duration)),p.repeatDelay&&(p.repeatDelay=Er(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Jv(p),p.delay===0&&(v=!0)),(cs.instantAnimations||cs.skipAnimations)&&(v=!0,Jv(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,v&&!o&&e.get()!==void 0){const _=l7(p.keyframes,u);if(_!==void 0){Et.update(()=>{p.onUpdate(_),p.onComplete()});return}}return u.isSync?new Yb(p):new O8(p)};function p7({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function MD(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...u}=e;i&&(o=i);const d=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const p in u){const v=n.getValue(p,n.latestValues[p]??null),_=u[p];if(_===void 0||f&&p7(f,p))continue;const S={delay:t,...Xb(o||{},p)},N=v.get();if(N!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===N&&!S.velocity)continue;let R=!1;if(window.MotionHandoffAnimation){const L=VD(n);if(L){const B=window.MotionHandoffAnimation(L,p,Et);B!==null&&(S.startTime=B,R=!0)}}s_(n,p),v.start(hT(p,v,_,n.shouldReduceMotion&&eD.has(p)?{type:!1}:S,n,R));const D=v.animation;D&&d.push(D)}return l&&Promise.all(d).then(()=>{Et.update(()=>{l&&uT(n,l)})}),d}function PD(n,e,t,i=0,s=1){const o=Array.from(n).sort((f,p)=>f.sortNodePosition(p)).indexOf(e),l=n.size,u=(l-1)*i;return typeof t=="function"?t(o,l):s===1?o*i:u-o*i}function a_(n,e,t={}){const i=ic(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(MD(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:v}=s;return g7(n,e,d,f,p,v,t)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,f]=u==="beforeChildren"?[o,l]:[l,o];return d().then(()=>f())}else return Promise.all([o(),l(t.delay)])}function g7(n,e,t=0,i=0,s=0,o=1,l){const u=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),u.push(a_(d,e,{...l,delay:t+(typeof i=="function"?0:i)+PD(n.variantChildren,d,i,s,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(u)}function OD(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(o=>a_(n,o,t));i=Promise.all(s)}else if(typeof e=="string")i=a_(n,e,t);else{const s=typeof e=="function"?ic(n,e,t.custom):e;i=Promise.all(MD(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function LD(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const y7=iT.length;function jD(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?jD(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<y7;t++){const i=iT[t],s=n.props[i];(Qh(s)||s===!1)&&(e[i]=s)}return e}const v7=[...nT].reverse(),_7=nT.length;function b7(n){return e=>Promise.all(e.map(({animation:t,options:i})=>OD(n,t,i)))}function T7(n){let e=b7(n),t=LA(),i=!0;const s=d=>(f,p)=>{const v=ic(n,p,d==="exit"?n.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:S,...N}=v;f={...f,...N,...S}}return f};function o(d){e=d(n)}function l(d){const{props:f}=n,p=jD(n.parent)||{},v=[],_=new Set;let S={},N=1/0;for(let D=0;D<_7;D++){const L=v7[D],B=t[L],O=f[L]!==void 0?f[L]:p[L],Y=Qh(O),te=L===d?B.isActive:null;te===!1&&(N=D);let Z=O===p[L]&&O!==f[L]&&Y;if(Z&&i&&n.manuallyAnimateOnMount&&(Z=!1),B.protectedKeys={...S},!B.isActive&&te===null||!O&&!B.prevProp||ag(O)||typeof O=="boolean")continue;const x=E7(B.prevProp,O);let I=x||L===d&&B.isActive&&!Z&&Y||D>N&&Y,V=!1;const M=Array.isArray(O)?O:[O];let k=M.reduce(s(L),{});te===!1&&(k={});const{prevResolvedValues:z={}}=B,P={...z,...k},Ne=re=>{I=!0,_.has(re)&&(V=!0,_.delete(re)),B.needsAnimating[re]=!0;const ue=n.getValue(re);ue&&(ue.liveStyle=!1)};for(const re in P){const ue=k[re],xe=z[re];if(S.hasOwnProperty(re))continue;let De=!1;r_(ue)&&r_(xe)?De=!LD(ue,xe):De=ue!==xe,De?ue!=null?Ne(re):_.add(re):ue!==void 0&&_.has(re)?Ne(re):B.protectedKeys[re]=!0}B.prevProp=O,B.prevResolvedValues=k,B.isActive&&(S={...S,...k}),i&&n.blockInitialAnimation&&(I=!1);const de=Z&&x;I&&(!de||V)&&v.push(...M.map(re=>{const ue={type:L};if(typeof re=="string"&&i&&!de&&n.manuallyAnimateOnMount&&n.parent){const{parent:xe}=n,De=ic(xe,re);if(xe.enteringChildren&&De){const{delayChildren:F}=De.transition||{};ue.delay=PD(xe.enteringChildren,n,F)}}return{animation:re,options:ue}}))}if(_.size){const D={};if(typeof f.initial!="boolean"){const L=ic(n,Array.isArray(f.initial)?f.initial[0]:f.initial);L&&L.transition&&(D.transition=L.transition)}_.forEach(L=>{const B=n.getBaseTarget(L),O=n.getValue(L);O&&(O.liveStyle=!0),D[L]=B??null}),v.push({animation:D})}let R=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(R=!1),i=!1,R?e(v):Promise.resolve()}function u(d,f){if(t[d].isActive===f)return Promise.resolve();n.variantChildren?.forEach(v=>v.animationState?.setActive(d,f)),t[d].isActive=f;const p=l(d);for(const v in t)t[v].protectedKeys={};return p}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>t,reset:()=>{t=LA()}}}function E7(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!LD(e,n):!1}function co(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function LA(){return{animate:co(!0),whileInView:co(),whileHover:co(),whileTap:co(),whileDrag:co(),whileFocus:co(),exit:co()}}class Na{constructor(e){this.isMounted=!1,this.node=e}update(){}}class w7 extends Na{constructor(e){super(e),e.animationState||(e.animationState=T7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ag(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let S7=0;class x7 extends Na{constructor(){super(...arguments),this.id=S7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const A7={animation:{Feature:w7},exit:{Feature:x7}};function Wh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function vd(n){return{point:{x:n.pageX,y:n.pageY}}}const I7=n=>e=>Jb(e)&&n(e,vd(e));function wh(n,e,t,i){return Wh(n,e,I7(t),i)}const UD=1e-4,R7=1-UD,C7=1+UD,zD=.01,N7=0-zD,D7=0+zD;function Dn(n){return n.max-n.min}function k7(n,e,t){return Math.abs(n-e)<=t}function jA(n,e,t,i=.5){n.origin=i,n.originPoint=St(e.min,e.max,n.origin),n.scale=Dn(t)/Dn(e),n.translate=St(t.min,t.max,n.origin)-n.originPoint,(n.scale>=R7&&n.scale<=C7||isNaN(n.scale))&&(n.scale=1),(n.translate>=N7&&n.translate<=D7||isNaN(n.translate))&&(n.translate=0)}function Sh(n,e,t,i){jA(n.x,e.x,t.x,i?i.originX:void 0),jA(n.y,e.y,t.y,i?i.originY:void 0)}function UA(n,e,t){n.min=t.min+e.min,n.max=n.min+Dn(e)}function V7(n,e,t){UA(n.x,e.x,t.x),UA(n.y,e.y,t.y)}function zA(n,e,t){n.min=e.min-t.min,n.max=n.min+Dn(e)}function xh(n,e,t){zA(n.x,e.x,t.x),zA(n.y,e.y,t.y)}function vi(n){return[n("x"),n("y")]}const BD=({current:n})=>n?n.ownerDocument.defaultView:null,BA=(n,e)=>Math.abs(n-e);function M7(n,e){const t=BA(n.x,e.x),i=BA(n.y,e.y);return Math.sqrt(t**2+i**2)}class FD{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=G0(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,N=M7(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!N)return;const{point:R}=_,{timestamp:D}=pn;this.history.push({...R,timestamp:D});const{onStart:L,onMove:B}=this.handlers;S||(L&&L(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,_)},this.handlePointerMove=(_,S)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=H0(S,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(_,S)=>{this.end();const{onEnd:N,onSessionEnd:R,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=G0(_.type==="pointercancel"?this.lastMoveEventInfo:H0(S,this.transformPagePoint),this.history);this.startEvent&&N&&N(_,L),R&&R(_,L)},!Jb(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=s||window;const u=vd(e),d=H0(u,this.transformPagePoint),{point:f}=d,{timestamp:p}=pn;this.history=[{...f,timestamp:p}];const{onSessionStart:v}=t;v&&v(e,G0(d,this.history)),this.removeListeners=pd(wh(this.contextWindow,"pointermove",this.handlePointerMove),wh(this.contextWindow,"pointerup",this.handlePointerUp),wh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ba(this.updatePoint)}}function H0(n,e){return e?{point:e(n.point)}:n}function FA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function G0({point:n},e){return{point:n,delta:FA(n,qD(e)),offset:FA(n,P7(e)),velocity:O7(e,.1)}}function P7(n){return n[0]}function qD(n){return n[n.length-1]}function O7(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=qD(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>Er(e)));)t--;if(!i)return{x:0,y:0};const o=Ei(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function L7(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?St(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?St(t,n,i.max):Math.min(n,t)),n}function qA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function j7(n,{top:e,left:t,bottom:i,right:s}){return{x:qA(n.x,t,s),y:qA(n.y,e,i)}}function HA(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function U7(n,e){return{x:HA(n.x,e.x),y:HA(n.y,e.y)}}function z7(n,e){let t=.5;const i=Dn(n),s=Dn(e);return s>i?t=$h(e.min,e.max-i,n.min):i>s&&(t=$h(n.min,n.max-s,e.min)),ls(0,1,t)}function B7(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const o_=.35;function F7(n=o_){return n===!1?n=0:n===!0&&(n=o_),{x:GA(n,"left","right"),y:GA(n,"top","bottom")}}function GA(n,e,t){return{min:$A(n,e),max:$A(n,t)}}function $A(n,e){return typeof n=="number"?n:n[e]||0}const q7=new WeakMap;class H7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(vd(v).point)},l=(v,_)=>{const{drag:S,dragPropagation:N,onDragStart:R}=this.getProps();if(S&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Z8(S),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vi(L=>{let B=this.getAxisMotionValue(L).get()||0;if(wr.test(B)){const{projection:O}=this.visualElement;if(O&&O.layout){const Y=O.layout.layoutBox[L];Y&&(B=Dn(Y)*(parseFloat(B)/100))}}this.originPoint[L]=B}),R&&Et.postRender(()=>R(v,_)),s_(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},u=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:S,dragDirectionLock:N,onDirectionLock:R,onDrag:D}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:L}=_;if(N&&this.currentDirection===null){this.currentDirection=G7(L),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",_.point,L),this.updateAxis("y",_.point,L),this.visualElement.render(),D&&D(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>vi(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new FD(e,{onSessionStart:o,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:i,contextWindow:BD(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&Et.postRender(()=>u(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!lm(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=L7(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Ql(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=j7(i.layoutBox,e):this.constraints=!1,this.elastic=F7(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&vi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=B7(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ql(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=YB(i,s.root,this.visualElement.getTransformPagePoint());let l=U7(s.layout.layoutBox,o);if(t){const u=t(GB(l));this.hasMutatedConstraints=!!u,u&&(l=xD(u))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=vi(p=>{if(!lm(p,t,this.currentDirection))return;let v=d&&d[p]||{};l&&(v={min:0,max:0});const _=s?200:1e6,S=s?40:1e7,N={type:"inertia",velocity:i?e[p]:0,bounceStiffness:_,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(p,N)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return s_(this.visualElement,e),i.start(hT(e,i,0,t,this.visualElement,!1))}stopAnimation(){vi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){vi(t=>{const{drag:i}=this.getProps();if(!lm(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[t];o.set(e[t]-St(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Ql(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};vi(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=z7({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),vi(l=>{if(!lm(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(St(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;q7.set(this.visualElement,this);const e=this.visualElement.current,t=wh(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Ql(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Et.read(i);const l=Wh(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(vi(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=d[p].translate,v.set(v.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),t(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=o_,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function lm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function G7(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class $7 extends Na{constructor(e){super(e),this.removeGroupControls=Si,this.removeListeners=Si,this.controls=new H7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Si}unmount(){this.removeGroupControls(),this.removeListeners()}}const KA=n=>(e,t)=>{n&&Et.postRender(()=>n(e,t))};class K7 extends Na{constructor(){super(...arguments),this.removePointerDownListener=Si}onPointerDown(e){this.session=new FD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:KA(e),onStart:KA(t),onMove:i,onEnd:(o,l)=>{delete this.session,s&&Et.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=wh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const km={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function YA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const th={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ce.test(n))n=parseFloat(n);else return n;const t=YA(n,e.target.x),i=YA(n,e.target.y);return`${t}% ${i}%`}},Y7={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=Ta.parse(n);if(s.length>5)return i;const o=Ta.createTransformer(n),l=typeof s[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=u,s[1+l]/=d;const f=St(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),o(s)}};let $0=!1;class Q7 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=e;_B(X7),o&&(t.group&&t.group.add(o),i&&i.register&&s&&i.register(o),$0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),km.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:o}=this.props,{projection:l}=i;return l&&(l.isPresent=o,$0=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Et.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Zb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;$0=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function HD(n){const[e,t]=hD(),i=j.useContext(Nb);return E.jsx(Q7,{...n,layoutGroup:i,switchLayoutGroup:j.useContext(wD),isPresent:e,safeToRemove:t})}const X7={borderRadius:{...th,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:th,borderTopRightRadius:th,borderBottomLeftRadius:th,borderBottomRightRadius:th,boxShadow:Y7};function W7(n,e,t){const i=Sn(n)?n:xc(n);return i.start(hT("",i,e,t)),i.animation}const Z7=(n,e)=>n.depth-e.depth;class J7{constructor(){this.children=[],this.isDirty=!1}add(e){Vb(this.children,e),this.isDirty=!0}remove(e){Mb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Z7),this.isDirty=!1,this.children.forEach(e)}}function eF(n,e){const t=qn.now(),i=({timestamp:s})=>{const o=s-t;o>=e&&(ba(i),n(o-e))};return Et.setup(i,!0),()=>ba(i)}const GD=["TopLeft","TopRight","BottomLeft","BottomRight"],tF=GD.length,QA=n=>typeof n=="string"?parseFloat(n):n,XA=n=>typeof n=="number"||Ce.test(n);function nF(n,e,t,i,s,o){s?(n.opacity=St(0,t.opacity??1,iF(i)),n.opacityExit=St(e.opacity??1,0,rF(i))):o&&(n.opacity=St(e.opacity??1,t.opacity??1,i));for(let l=0;l<tF;l++){const u=`border${GD[l]}Radius`;let d=WA(e,u),f=WA(t,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||XA(d)===XA(f)?(n[u]=Math.max(St(QA(d),QA(f),i),0),(wr.test(f)||wr.test(d))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=St(e.rotate||0,t.rotate||0,i))}function WA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const iF=$D(0,.5,DN),rF=$D(.5,.95,Si);function $D(n,e,t){return i=>i<n?0:i>e?1:t($h(n,e,i))}function ZA(n,e){n.min=e.min,n.max=e.max}function yi(n,e){ZA(n.x,e.x),ZA(n.y,e.y)}function JA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function eI(n,e,t,i,s){return n-=e,n=yp(n,1/t,i),s!==void 0&&(n=yp(n,1/s,i)),n}function sF(n,e=0,t=1,i=.5,s,o=n,l=n){if(wr.test(e)&&(e=parseFloat(e),e=St(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=St(o.min,o.max,i);n===o&&(u-=e),n.min=eI(n.min,e,t,u,s),n.max=eI(n.max,e,t,u,s)}function tI(n,e,[t,i,s],o,l){sF(n,e[t],e[i],e[s],e.scale,o,l)}const aF=["x","scaleX","originX"],oF=["y","scaleY","originY"];function nI(n,e,t,i){tI(n.x,e,aF,t?t.x:void 0,i?i.x:void 0),tI(n.y,e,oF,t?t.y:void 0,i?i.y:void 0)}function iI(n){return n.translate===0&&n.scale===1}function KD(n){return iI(n.x)&&iI(n.y)}function rI(n,e){return n.min===e.min&&n.max===e.max}function lF(n,e){return rI(n.x,e.x)&&rI(n.y,e.y)}function sI(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function YD(n,e){return sI(n.x,e.x)&&sI(n.y,e.y)}function aI(n){return Dn(n.x)/Dn(n.y)}function oI(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class cF{constructor(){this.members=[]}add(e){Vb(this.members,e),e.scheduleRender()}remove(e){if(Mb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uF(n,e,t){let i="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=t?.z||0;if((s||o||l)&&(i=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:p,rotateX:v,rotateY:_,skewX:S,skewY:N}=t;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),v&&(i+=`rotateX(${v}deg) `),_&&(i+=`rotateY(${_}deg) `),S&&(i+=`skewX(${S}deg) `),N&&(i+=`skewY(${N}deg) `)}const u=n.x.scale*e.x,d=n.y.scale*e.y;return(u!==1||d!==1)&&(i+=`scale(${u}, ${d})`),i||"none"}const K0=["","X","Y","Z"],hF=1e3;let dF=0;function Y0(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function QD(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=VD(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Et,!(s||o))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&QD(i)}function XD({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},u=e?.()){this.id=dF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(pF),this.nodes.forEach(_F),this.nodes.forEach(bF),this.nodes.forEach(gF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new J7)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Lb),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=uD(l)&&!rB(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),n){let p,v=0;const _=()=>this.root.updateBlockedByResize=!1;Et.read(()=>{v=window.innerWidth}),n(l,()=>{const S=window.innerWidth;S!==v&&(v=S,this.root.updateBlockedByResize=!0,p&&p(),p=eF(_,250),km.hasAnimatedSinceResize&&(km.hasAnimatedSinceResize=!1,this.nodes.forEach(uI)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||f.getDefaultTransition()||xF,{onLayoutAnimationStart:R,onLayoutAnimationComplete:D}=f.getProps(),L=!this.targetLayout||!YD(this.targetLayout,S),B=!v&&_;if(this.options.layoutRoot||this.resumeFrom||B||v&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...Xb(N,"layout"),onPlay:R,onComplete:D};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(p,B)}else v||uI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ba(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(TF),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&QD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lI);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(cI);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(vF),this.nodes.forEach(fF),this.nodes.forEach(mF)):this.nodes.forEach(cI),this.clearAllSnapshots();const u=qn.now();pn.delta=ls(0,1e3/60,u-pn.timestamp),pn.timestamp=u,pn.isProcessing=!0,O0.update.process(pn),O0.preRender.process(pn),O0.render.process(pn),pn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Zb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yF),this.sharedNodes.forEach(EF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!KD(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||po(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),AF(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Pt();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(IF))){const{scroll:f}=this.root;f&&(Xl(u.x,f.offset.x),Xl(u.y,f.offset.y))}return u}removeElementScroll(l){const u=Pt();if(yi(u,l),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:p,options:v}=f;f!==this.root&&p&&v.layoutScroll&&(p.wasRoot&&yi(u,l),Xl(u.x,p.offset.x),Xl(u.y,p.offset.y))}return u}applyTransform(l,u=!1){const d=Pt();yi(d,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Wl(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),po(p.latestValues)&&Wl(d,p.latestValues)}return po(this.latestValues)&&Wl(d,this.latestValues),d}removeTransform(l){const u=Pt();yi(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!po(f.latestValues))continue;t_(f.latestValues)&&f.updateSnapshot();const p=Pt(),v=f.measurePageBox();yi(p,v),nI(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return po(this.latestValues)&&nI(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:v}=this.options;if(!(!this.layout||!(p||v))){if(this.resolvedRelativeTargetAt=pn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),xh(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),yi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),V7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yi(this.target,this.layout.layoutBox),ID(this.target,this.targetDelta)):yi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),xh(this.relativeTargetOrigin,this.target,_.target),yi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||t_(this.parent.latestValues)||AD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===pn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;yi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;KB(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Pt());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(JA(this.prevProjectionDelta.x,this.projectionDelta.x),JA(this.prevProjectionDelta.y,this.projectionDelta.y)),Sh(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!oI(this.projectionDelta.x,this.prevProjectionDelta.x)||!oI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zl(),this.projectionDelta=Zl(),this.projectionDeltaWithTransform=Zl()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},v=Zl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=Pt(),S=d?d.source:void 0,N=this.layout?this.layout.source:void 0,R=S!==N,D=this.getStack(),L=!D||D.members.length<=1,B=!!(R&&!L&&this.options.crossfade===!0&&!this.path.some(SF));this.animationProgress=0;let O;this.mixTargetDelta=Y=>{const te=Y/1e3;hI(v.x,l.x,te),hI(v.y,l.y,te),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xh(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wF(this.relativeTarget,this.relativeTargetOrigin,_,te),O&&lF(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Pt()),yi(O,this.relativeTarget)),R&&(this.animationValues=p,nF(p,f,this.latestValues,te,B,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ba(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{km.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xc(0)),this.currentAnimation=W7(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:p}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&WD(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Pt();const v=Dn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const _=Dn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}yi(u,d),Wl(u,p),Sh(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new cF),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&Y0("z",l,f,this.animationValues);for(let p=0;p<K0.length;p++)Y0(`rotate${K0[p]}`,l,f,this.animationValues),Y0(`skew${K0[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Dm(u?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Dm(u?.pointerEvents)||""),this.hasProjected&&!po(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=uF(this.projectionDeltaWithTransform,this.treeScale,p);d&&(v=d(p,v)),l.transform=v;const{x:_,y:S}=this.projectionDelta;l.transformOrigin=`${_.origin*100}% ${S.origin*100}% 0`,f.animationValues?l.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const N in Xh){if(p[N]===void 0)continue;const{correct:R,applyTo:D,isCSSVariable:L}=Xh[N],B=v==="none"?p[N]:R(p[N],f);if(D){const O=D.length;for(let Y=0;Y<O;Y++)l[D[Y]]=B}else L?this.options.visualElement.renderState.vars[N]=B:l[N]=B}this.options.layoutId&&(l.pointerEvents=f===this?Dm(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(lI),this.root.sharedNodes.clear()}}}function fF(n){n.updateLayout()}function mF(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?vi(p=>{const v=o?e.measuredBox[p]:e.layoutBox[p],_=Dn(v);v.min=t[p].min,v.max=v.min+_}):WD(s,e.layoutBox,t)&&vi(p=>{const v=o?e.measuredBox[p]:e.layoutBox[p],_=Dn(t[p]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+_)});const l=Zl();Sh(l,t,e.layoutBox);const u=Zl();o?Sh(u,n.applyTransform(i,!0),e.measuredBox):Sh(u,t,e.layoutBox);const d=!KD(l);let f=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:v,layout:_}=p;if(v&&_){const S=Pt();xh(S,e.layoutBox,v.layoutBox);const N=Pt();xh(N,t,_.layoutBox),YD(S,N)||(f=!0),p.options.layoutRoot&&(n.relativeTarget=N,n.relativeTargetOrigin=S,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function pF(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function gF(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function yF(n){n.clearSnapshot()}function lI(n){n.clearMeasurements()}function cI(n){n.isLayoutDirty=!1}function vF(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function uI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function _F(n){n.resolveTargetDelta()}function bF(n){n.calcProjection()}function TF(n){n.resetSkewAndRotation()}function EF(n){n.removeLeadSnapshot()}function hI(n,e,t){n.translate=St(e.translate,0,t),n.scale=St(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function dI(n,e,t,i){n.min=St(e.min,t.min,i),n.max=St(e.max,t.max,i)}function wF(n,e,t,i){dI(n.x,e.x,t.x,i),dI(n.y,e.y,t.y,i)}function SF(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const xF={duration:.45,ease:[.4,0,.1,1]},fI=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),mI=fI("applewebkit/")&&!fI("chrome/")?Math.round:Si;function pI(n){n.min=mI(n.min),n.max=mI(n.max)}function AF(n){pI(n.x),pI(n.y)}function WD(n,e,t){return n==="position"||n==="preserve-aspect"&&!k7(aI(e),aI(t),.2)}function IF(n){return n!==n.root&&n.scroll?.wasRoot}const RF=XD({attachResizeListener:(n,e)=>Wh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Q0={current:void 0},ZD=XD({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Q0.current){const n=new RF({});n.mount(window),n.setOptions({layoutScroll:!0}),Q0.current=n}return Q0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),CF={pan:{Feature:K7},drag:{Feature:$7,ProjectionNode:ZD,MeasureLayout:HD}};function gI(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=i[s];o&&Et.postRender(()=>o(e,vd(e)))}class NF extends Na{mount(){const{current:e}=this.node;e&&(this.unmount=J8(e,(t,i)=>(gI(this.node,i,"Start"),s=>gI(this.node,s,"End"))))}unmount(){}}class DF extends Na{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pd(Wh(this.node.current,"focus",()=>this.onFocus()),Wh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yI(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=i[s];o&&Et.postRender(()=>o(e,vd(e)))}class kF extends Na{mount(){const{current:e}=this.node;e&&(this.unmount=iB(e,(t,i)=>(yI(this.node,i,"Start"),(s,{success:o})=>yI(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const l_=new WeakMap,X0=new WeakMap,VF=n=>{const e=l_.get(n.target);e&&e(n)},MF=n=>{n.forEach(VF)};function PF({root:n,...e}){const t=n||document;X0.has(t)||X0.set(t,{});const i=X0.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(MF,{root:n,...e})),i[s]}function OF(n,e,t){const i=PF(e);return l_.set(n,t),i.observe(n),()=>{l_.delete(n),i.unobserve(n)}}const LF={some:0,all:1};class jF extends Na{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:LF[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),_=f?p:v;_&&_(d)};return OF(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(UF(e,t))&&this.startObserver()}unmount(){}}function UF({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const zF={inView:{Feature:jF},tap:{Feature:kF},focus:{Feature:DF},hover:{Feature:NF}},BF={layout:{ProjectionNode:ZD,MeasureLayout:HD}},FF={...A7,...zF,...CF,...BF},lg=HB(FF,i7);function qF(n){n.values.forEach(e=>e.stop())}function c_(n,e){[...e].reverse().forEach(i=>{const s=n.getVariant(i);s&&uT(n,s),n.variantChildren&&n.variantChildren.forEach(o=>{c_(o,e)})})}function HF(n,e){if(Array.isArray(e))return c_(n,e);if(typeof e=="string")return c_(n,[e]);uT(n,e)}function GF(){const n=new Set,e={subscribe(t){return n.add(t),()=>void n.delete(t)},start(t,i){const s=[];return n.forEach(o=>{s.push(OD(o,t,{transitionOverride:i}))}),Promise.all(s)},set(t){return n.forEach(i=>{HF(i,t)})},stop(){n.forEach(t=>{qF(t)})},mount(){return()=>{e.stop()}}};return e}function $F(){const n=ig(GF);return kb(n.mount,[]),n}const KF=$F,JD=({children:n,onDelete:e,threshold:t=-100})=>{const i=KF(),[s,o]=j.useState(!1),l=j.useRef(0),u=()=>{o(!0),l.current=Date.now()},d=async(f,p)=>{const v=p.offset.x,_=p.velocity.x;setTimeout(()=>o(!1),100),v<t||v<-50&&_<-500?e():i.start({x:0})};return E.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[E.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:E.jsx(Om,{className:"text-white w-6 h-6"})}),E.jsx(lg.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:u,onDragEnd:d,animate:i,className:"relative bg-white dark:bg-zinc-900 z-10 rounded-xl",style:{touchAction:"pan-y",pointerEvents:s?"none":"auto"},children:n})]})},vI=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),YF=()=>{const{id:n}=TM(),{envelopes:e,transactions:t,fetchData:i,isLoading:s,deleteEnvelope:o,renameEnvelope:l,updateTransaction:u,deleteTransaction:d,restoreTransaction:f,getEnvelopeBalance:p}=et(),{showToast:v}=Cb(),_=wa(),S=Ea(),[N,R]=j.useState(!1),[D,L]=j.useState(!1),[B,O]=j.useState(!1),[Y,te]=j.useState(null);j.useEffect(()=>{e.length===0&&i()},[]);const Z=e.find(k=>k.id===n);if(!Z)return s?E.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:E.jsx("p",{children:"Loading envelope..."})}):E.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:E.jsx("p",{children:"Envelope not found."})});const x=t.filter(k=>k.envelopeId===Z.id).sort((k,z)=>new Date(z.date).getTime()-new Date(k.date).getTime()),I=()=>{S.state?.fromGlobalFAB?_("/"):_(-1)},V=()=>{n&&(o(n),_(-1))},M=k=>{const z={...k,reconciled:!k.reconciled};u(z)};return E.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4",children:[E.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[E.jsx("button",{onClick:()=>{const k=prompt("Rename envelope:",Z.name);k&&k.trim()&&n&&l(n,k)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),E.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Z.name}),E.jsx("button",{onClick:I,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),E.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const k=p(Z.id).toNumber();return console.log(`Debug: Envelope ${Z.name} Balance:`,k),E.jsx("span",{className:`text-xl font-bold ${k<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:vI(k)})})()]}),E.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-zinc-400",children:[E.jsx("span",{children:"Budget"}),E.jsx("span",{children:vI(Z.currentBalance||0)})]})]}),E.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[E.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>R(!0),children:[E.jsx(CP,{className:"w-5 h-5 mr-3"}),"Add Money"]}),E.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>L(!0),children:[E.jsx(IP,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),E.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[E.jsx(EP,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),E.jsxs("section",{className:"mt-6",children:[E.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),E.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:x.length===0?E.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):E.jsx(tT,{initial:!1,mode:"popLayout",children:x.map(k=>E.jsx(lg.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:E.jsx(JD,{onDelete:()=>{if(!k.id)return;const z={...k};d(k.id),v("Transaction deleted","neutral",()=>f(z))},children:E.jsx(bN,{transaction:k,onReconcile:()=>M(k),onEdit:()=>te(k)})})},k.id))})})]}),E.jsx("div",{className:"mt-8",children:E.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${Z.name}"? This will delete all transactions.`)&&V()},children:[E.jsx(LI,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(N||D||Y)&&E.jsx(_N,{isVisible:N||D||!!Y,onClose:()=>{R(!1),L(!1),te(null)},mode:N?"add":D?"spend":"edit",currentEnvelope:Z,initialTransaction:Y}),B&&E.jsx(lz,{isVisible:B,onClose:()=>O(!1),sourceEnvelope:Z})]})},QF=()=>{const n=wa(),e=j.useRef(null),{envelopes:t,transactions:i,distributionTemplates:s,resetData:o,importData:l,getEnvelopeBalance:u,appSettings:d,updateAppSettings:f,initializeAppSettings:p,cleanupOrphanedTemplates:v}=et(),[_,S]=j.useState(null),[N,R]=j.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[D,L]=j.useState(!1),B=978307200,O=d?.theme??"system";j.useEffect(()=>{d||p().catch(z=>{console.error("Failed to initialize app settings:",z)})},[d,p]);const Y=(z,P)=>{S({type:z,text:P}),setTimeout(()=>S(null),3500)},te=j.useMemo(()=>{const z=t.length,P=i.length,Ne=s.length,de=t.reduce((xe,De)=>xe+u(De.id).toNumber(),0),H=0,re=i.reduce((xe,De)=>{let F=0;if(typeof De.date=="string"){const se=Date.parse(De.date);F=Number.isNaN(se)?0:se}else typeof De.date=="number"&&(F=De.date<2e9?(De.date+B)*1e3:De.date);return Math.max(xe,F)},0),ue=H||re?new Date(Math.max(H,re)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:z,transactionCount:P,templateCount:Ne,totalBalance:de,lastUpdated:ue}},[t,i,s]),Z=()=>{try{const z={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:d||{theme:"system"},envelopes:t.map(re=>({...re,currentBalance:u(re.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:s},P=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),Ne=URL.createObjectURL(P),de=document.createElement("a");de.href=Ne,de.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(Ne);const H=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",H),R(H),Y("success","Backup downloaded successfully.")}catch(z){console.error(z),Y("error","Failed to create backup file.")}},x=()=>{try{const z=["Date","Description","Amount","Type","Envelope","Reconciled"],P=i.map(ue=>{const xe=t.find(se=>se.id===ue.envelopeId)?.name||"Unknown",De=(ue.description||"").replace(/"/g,'""');let F="Invalid Date";if(ue.date){if(typeof ue.date=="string")F=ue.date.split("T")[0];else if(typeof ue.date=="number"){const se=ue.date<2e9?(ue.date+B)*1e3:ue.date;F=new Date(se).toISOString().split("T")[0]}}return[F,`"${De}"`,ue.amount.toFixed(2),ue.type,`"${xe}"`,ue.reconciled?"Yes":"No"].join(",")}),Ne=[z.join(","),...P].join(`
`),de=new Blob([Ne],{type:"text/csv;charset=utf-8;"}),H=URL.createObjectURL(de),re=document.createElement("a");re.href=H,re.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(H),Y("success","CSV export ready to open in Excel/Numbers.")}catch(z){console.error(z),Y("error","Failed to export CSV.")}},I=()=>{e.current?.click()},V=z=>{const P=z.target.files?.[0];if(!P)return;const Ne=new FileReader;Ne.onload=async de=>{try{const H=JSON.parse(de.target?.result),re=await l(H);if(!re.success){Y("error",re.message);return}if(H.appSettings?.theme)try{await f({theme:H.appSettings.theme})}catch(ue){console.error("Failed to update imported settings:",ue)}else if(H.appSettings?.isDarkMode!==void 0)try{const ue=H.appSettings.isDarkMode?"dark":"light";await f({theme:ue})}catch(ue){console.error("Failed to update imported settings:",ue)}Y("success",`Loaded ${H.envelopes?.length??0} envelopes, ${H.transactions?.length??0} transactions, and ${H.distributionTemplates?.length??0} templates.`)}catch(H){console.error(H),Y("error","Invalid backup file. Please verify the JSON.")}},Ne.readAsText(P),z.target.value=""},M=async()=>{L(!0);try{Y("success","Scanning templates for orphaned references..."),await v(),Y("success","Orphaned templates have been cleaned up successfully.")}catch(z){console.error("Template cleanup failed:",z),Y("error","Failed to clean up orphaned templates. Check console for details.")}finally{L(!1)}},k=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),Y("success","All data has been permanently deleted."),n("/")}catch(z){console.error("Reset failed:",z),Y("error","Failed to delete all data. Some data may remain.")}};return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[E.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:E.jsxs("div",{className:"flex items-center",children:[E.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),E.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),E.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[_&&E.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${_.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[_.type==="success"?E.jsx(DP,{size:18}):E.jsx(Om,{size:18}),_.text]}),E.jsx("section",{children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Pm,{className:"text-blue-500",size:22}),E.jsxs("div",{children:[E.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),E.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),E.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.envelopeCount})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),E.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.transactionCount})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),E.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.templateCount})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),E.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:te.lastUpdated})]})]})]})}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[O==="light"&&E.jsx("span",{className:"text-orange-500 text-lg",children:""}),O==="dark"&&E.jsx("span",{className:"text-purple-500 text-lg",children:""}),O==="system"&&E.jsx("span",{className:"text-gray-500 text-lg",children:""}),E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),E.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:O})]}),E.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),E.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(z=>E.jsx("button",{onClick:async()=>{try{await f({theme:z.value})}catch(P){console.error("Failed to update theme setting:",P)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${O===z.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:z.label},z.value))})]})]}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[E.jsxs("button",{onClick:Z,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Pm,{className:"text-blue-500",size:20}),E.jsxs("div",{className:"flex flex-col items-start",children:[E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),E.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",N]})]})]}),E.jsx(zl,{className:"text-gray-400",size:18})]}),E.jsxs("button",{onClick:I,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(m4,{className:"text-blue-500",size:20}),E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),E.jsx(zl,{className:"text-gray-400",size:18})]}),E.jsxs("button",{onClick:x,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(FP,{className:"text-blue-500",size:20}),E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),E.jsx(zl,{className:"text-gray-400",size:18})]}),E.jsxs("button",{onClick:M,disabled:D,className:`w-full p-4 flex items-center justify-between transition-colors ${D?"bg-gray-50 dark:bg-zinc-800/50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[E.jsxs("div",{className:"flex items-center gap-3",children:[D?E.jsx(ZP,{className:"text-blue-500 animate-spin",size:20}):E.jsx(J0,{className:"text-blue-500",size:20}),E.jsx("span",{className:`font-medium ${D?"text-gray-500 dark:text-zinc-400":"text-gray-900 dark:text-white"}`,children:D?"Cleaning Templates...":"Clean Up Orphaned Templates"})]}),D?E.jsx("div",{className:"text-gray-400 text-sm",children:"Working..."}):E.jsx(zl,{className:"text-gray-400",size:18})]}),E.jsx("input",{type:"file",ref:e,onChange:V,accept:".json",className:"hidden"})]})]}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[E.jsx("p",{children:"Create regular backups before major changes."}),E.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),E.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),E.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),E.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:E.jsxs("button",{onClick:k,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Om,{className:"text-red-500 group-hover:text-red-600",size:20}),E.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),E.jsx(zl,{className:"text-gray-400",size:18})]})}),E.jsx("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500",children:"This clears every envelope, transaction, and template. Use with caution."})]}),E.jsx("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:"House Budget PWA  App Version 2.0.1"})]})]})},XF=()=>{const n=wa(),{createEnvelope:e}=et(),[t,i]=j.useState(""),[s,o]=j.useState(""),l=u=>{if(u.preventDefault(),!t.trim())return;const d=parseFloat(s),f=isNaN(d)?0:d,p=et.getState().envelopes,_=(p.length>0?Math.max(...p.map(S=>S.orderIndex??0)):-1)+1;e({name:t,currentBalance:f,lastUpdated:new Date().toISOString(),isActive:!0,orderIndex:_}),n("/")};return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[E.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:E.jsx(Mm,{size:24})}),E.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Envelope"})]}),E.jsx("div",{className:"p-4 max-w-md mx-auto",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[E.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:E.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:E.jsx(HP,{size:40})})}),E.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Envelope Name"}),E.jsx("input",{type:"text",id:"name",value:t,onChange:u=>i(u.target.value),placeholder:"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),E.jsxs("div",{className:"relative",children:[E.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),E.jsx("input",{type:"number",id:"balance",value:s,onChange:u=>o(u.target.value),onKeyDown:u=>{(u.key==="e"||u.key==="E"||u.key==="+"||u.key==="-")&&u.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later via the "Distribute Funds" screen.'})]}),E.jsxs("div",{className:"pt-4 flex gap-3",children:[E.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),E.jsx("button",{type:"submit",disabled:!t.trim(),className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${t.trim()?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:"Create Envelope"})]})]})]})})]})},WF=()=>{const n=wa(),{envelopes:e}=et(),t=[...e].sort((i,s)=>i.name.localeCompare(s.name));return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[E.jsx("button",{onClick:()=>n(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),E.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),E.jsx("div",{className:"w-12"})," "]}),E.jsx("div",{className:"p-4 max-w-md mx-auto",children:E.jsx("section",{className:"mb-6",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[E.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:E.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:"SELECT ENVELOPE"})}),t.length===0?E.jsx("div",{className:"px-4 py-8 text-center text-gray-500 dark:text-zinc-400",children:E.jsx("p",{children:"No envelopes available"})}):E.jsx("div",{className:"divide-y divide-gray-200 dark:divide-zinc-700",children:t.map(i=>E.jsxs("button",{onClick:()=>n(`/envelope/${i.id}`,{state:{fromGlobalFAB:!0}}),className:"w-full px-4 py-4 text-left flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700 transition-colors",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.name}),E.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Balance calculation not available here"})]}),E.jsx(zl,{size:20,className:"text-gray-400 dark:text-zinc-500"})]},i.id))})]})})})]})},ZF=()=>{const n=wa(),{transactions:e,envelopes:t,updateTransaction:i,deleteTransaction:s,restoreTransaction:o}=et(),{showToast:l}=Cb(),[u,d]=j.useState(!1),[f,p]=j.useState(""),[v,_]=j.useState("all"),[S,N]=j.useState("All"),[R,D]=j.useState(!1),[L,B]=j.useState(()=>{const M=new Date;return M.setMonth(M.getMonth()-1),M.toISOString().split("T")[0]}),[O,Y]=j.useState(()=>new Date().toISOString().split("T")[0]),[te,Z]=j.useState(null),x=j.useMemo(()=>e.map(k=>{if(!k)return null;let z=k.date;if(typeof k.date=="number"){const Ne=(k.date+978307200)*1e3;z=new Date(Ne).toISOString()}else if(!k.date||typeof k.date!="string")return null;return{...k,date:z}}).filter(Boolean).filter(k=>{if(f){const P=f.toLowerCase(),Ne=t.find(re=>re.id===k.envelopeId)?.name.toLowerCase()||"",de=k.amount.toFixed(2);if(!(k.description.toLowerCase().includes(P)||Ne.includes(P)||de.includes(P)))return!1}if(v!=="all"&&k.envelopeId!==v||S!=="All"&&k.type!==S||!k.date||typeof k.date!="string")return!1;const z=k.date.split("T")[0];return!(z<L||z>O||R&&!k.reconciled)}).sort((k,z)=>new Date(z.date).getTime()-new Date(k.date).getTime()),[e,t,f,v,S,L,O,R]),I=te?t.find(M=>M.id===te.envelopeId):null,V=M=>{const k={...M,reconciled:!M.reconciled};i(k)};return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:E.jsx(Mm,{size:24})}),E.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),E.jsx("button",{onClick:()=>d(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:E.jsx($P,{size:20,className:u?"fill-current":""})})]}),E.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:E.jsxs("div",{className:"p-4 space-y-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx(a4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),E.jsx("input",{type:"text",placeholder:"Search transactions...",value:f,onChange:M=>p(M.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),f&&E.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:E.jsx(g_,{size:16})})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),E.jsxs("select",{value:v,onChange:M=>_(M.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[E.jsx("option",{value:"all",children:"All Envelopes"}),t.sort((M,k)=>M.name.localeCompare(k.name)).map(M=>E.jsx("option",{value:M.id,children:M.name},M.id))]})]}),E.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(M=>E.jsx("button",{onClick:()=>N(M),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${S===M?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:M},M))}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),E.jsx("div",{className:"relative",children:E.jsx("input",{type:"date",value:L,onChange:M=>B(M.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),E.jsx("div",{className:"relative",children:E.jsx("input",{type:"date",value:O,onChange:M=>Y(M.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),E.jsxs("div",{className:"flex items-center justify-between pt-2",children:[E.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),E.jsx("button",{onClick:()=>D(!R),className:`w-11 h-6 rounded-full transition-colors relative ${R?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:E.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${R?"translate-x-5":"translate-x-0"}`})})]})]})}),E.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:E.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:x.length===0?E.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):E.jsx(tT,{initial:!1,mode:"popLayout",children:x.map(M=>{const k=t.find(z=>z.id===M.envelopeId);return E.jsx(lg.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:E.jsx(JD,{onDelete:()=>{if(!M.id)return;const z={...M};s(M.id),l("Transaction deleted","neutral",()=>o(z))},children:E.jsx(bN,{transaction:M,envelopeName:k?.name||"Unknown Envelope",onReconcile:()=>V(M),onEdit:()=>{k?Z(M):alert("Cannot edit: Envelope deleted.")}})})},M.id)})})})}),te&&I&&E.jsx(_N,{isVisible:!!te,onClose:()=>Z(null),mode:"edit",currentEnvelope:I,initialTransaction:te})]})},JF=()=>{const[n,e]=j.useState(""),[t,i]=j.useState(""),[s,o]=j.useState(""),[l,u]=j.useState(!1),[d,f]=j.useState(!1),[p,v]=j.useState(!1),[_,S]=j.useState(!1),{login:N,register:R,sendPasswordReset:D,isLoading:L,loginError:B,clearError:O}=Sc(),Y=async Z=>{if(Z.preventDefault(),n.trim()&&t.trim())if(d){if(!s.trim())return;await R(n.trim(),t,s.trim())}else await N(n.trim(),t)};j.useEffect(()=>{B&&O()},[n,t,B,O]);const te=async Z=>{Z.preventDefault(),n.trim()&&await D(n.trim())&&S(!0)};return j.useEffect(()=>{e(""),i(""),o(""),S(!1)},[d,p]),E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:E.jsxs("div",{className:"max-w-md w-full space-y-8",children:[E.jsx("div",{className:"text-center",children:E.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("img",{src:"/house-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),E.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]}),E.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for your household"})]})}),E.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:p?E.jsxs("form",{onSubmit:te,className:"space-y-6",children:[E.jsxs("div",{className:"text-center mb-2",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(Zw,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{id:"reset-email",type:"email",value:n,onChange:Z=>e(Z.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:L,autoComplete:"email"})]})]}),_?E.jsxs("div",{className:"text-center py-4",children:[E.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:E.jsx(Zw,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),E.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),E.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",E.jsx("span",{className:"font-medium",children:n})]}),E.jsxs("button",{type:"button",onClick:()=>v(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[E.jsx(Mm,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):E.jsxs(E.Fragment,{children:[E.jsx("button",{type:"submit",disabled:L||!n.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:L?"Sending...":"Send Reset Link"}),E.jsx("div",{className:"mt-4 text-center",children:E.jsxs("button",{type:"button",onClick:()=>v(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:L,children:[E.jsx(Mm,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):E.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[E.jsxs("div",{className:"text-center mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d?"Create Account":"Sign In"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:d?"Create a new account to get started":"Sign in to your account"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),E.jsx("input",{id:"email",type:"email",value:n,onChange:Z=>e(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:L,autoComplete:"username"})]}),d&&E.jsxs("div",{children:[E.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),E.jsx("input",{id:"displayName",type:"text",value:s,onChange:Z=>o(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:L})]}),E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!d&&E.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:L,children:"Forgot password?"})]}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{id:"password",type:l?"text":"password",value:t,onChange:Z=>i(Z.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",required:!0,disabled:L,autoComplete:d?"new-password":"current-password"}),E.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:L,children:l?E.jsx(jP,{className:"h-5 w-5"}):E.jsx(zP,{className:"h-5 w-5"})})]})]}),B&&E.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:B}),E.jsx("button",{type:"submit",disabled:L||!n.trim()||!t.trim()||d&&!s.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:L?d?"Creating Account...":"Signing in...":d?"Create Account":"Sign In"}),E.jsx("div",{className:"mt-6 text-center",children:E.jsxs("button",{type:"button",onClick:()=>{f(!d),v(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:L,children:[E.jsx(g4,{className:"h-4 w-4"}),d?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},eq=()=>{const{message:n,type:e,isVisible:t,undoAction:i,hideToast:s}=Cb(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return E.jsx(tT,{children:t&&E.jsx(lg.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:E.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[E.jsx("div",{className:"flex items-center flex-1 min-w-0",children:E.jsx("span",{className:"text-sm font-medium truncate pr-2",children:n})}),E.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&E.jsxs("button",{onClick:()=>{i(),s()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[E.jsx(d4,{size:14,className:"inline mr-1"}),"Undo"]}),E.jsx("button",{onClick:s,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:E.jsx(g_,{size:16})})]})]})})})};function tq(){const[n,e]=j.useState(!0),{appSettings:t}=et(),{isAuthenticated:i,isInitialized:s,initializeAuth:o}=Sc();return j.useEffect(()=>{const l=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(l)},[]),j.useEffect(()=>o(),[o]),j.useEffect(()=>{const l=document.documentElement,u=window.matchMedia("(prefers-color-scheme: dark)"),d=()=>{const f=t?.theme??"system",p=u.matches;f==="dark"||f==="system"&&p?l.classList.add("dark"):l.classList.remove("dark")};if(d(),t?.theme==="system")return u.addEventListener("change",d),()=>u.removeEventListener("change",d)},[t]),n||!s?E.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-blue-600 text-white dark:bg-black",children:E.jsx("div",{className:"text-3xl font-bold animate-pulse",children:"House Budget"})}):i?E.jsxs(E.Fragment,{children:[E.jsx(sP,{children:E.jsxs(OM,{children:[E.jsx(uo,{path:"/",element:E.jsx(oz,{})}),E.jsx(uo,{path:"/envelope/:id",element:E.jsx(YF,{})}),E.jsx(uo,{path:"/add-envelope",element:E.jsx(XF,{})}),E.jsx(uo,{path:"/add-transaction",element:E.jsx(WF,{})}),E.jsx(uo,{path:"/transactions",element:E.jsx(ZF,{})}),E.jsx(uo,{path:"/settings",element:E.jsx(QF,{})})]})}),E.jsx(eq,{})]}):E.jsx(JF,{})}HV({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});zV.createRoot(document.getElementById("root")).render(E.jsx(j.StrictMode,{children:E.jsx(tq,{})}));
