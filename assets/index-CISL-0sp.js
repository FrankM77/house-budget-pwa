(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function RV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var s0={exports:{}},qu={};var Cw;function CV(){if(Cw)return qu;Cw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:o}}return qu.Fragment=e,qu.jsx=t,qu.jsxs=t,qu}var Dw;function DV(){return Dw||(Dw=1,s0.exports=CV()),s0.exports}var T=DV(),a0={exports:{}},Me={};var Nw;function NV(){if(Nw)return Me;Nw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function S(z){return z===null||typeof z!="object"?null:(z=_&&z[_]||z["@@iterator"],typeof z=="function"?z:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function P(z,ne,pe){this.props=z,this.context=ne,this.refs=C,this.updater=pe||N}P.prototype.isReactComponent={},P.prototype.setState=function(z,ne){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ne,"setState")},P.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function U(){}U.prototype=P.prototype;function M(z,ne,pe){this.props=z,this.context=ne,this.refs=C,this.updater=pe||N}var $=M.prototype=new U;$.constructor=M,A($,P.prototype),$.isPureReactComponent=!0;var te=Array.isArray;function Z(){}var x={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function V(z,ne,pe){var ye=pe.ref;return{$$typeof:n,type:z,key:ne,ref:ye!==void 0?ye:null,props:pe}}function O(z,ne){return V(z.type,ne,z.props)}function k(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function B(z){var ne={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(pe){return ne[pe]})}var L=/\/+/g;function Ce(z,ne){return typeof z=="object"&&z!==null&&z.key!=null?B(""+z.key):ne.toString(36)}function de(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Z,Z):(z.status="pending",z.then(function(ne){z.status==="pending"&&(z.status="fulfilled",z.value=ne)},function(ne){z.status==="pending"&&(z.status="rejected",z.reason=ne)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function H(z,ne,pe,ye,ke){var je=typeof z;(je==="undefined"||je==="boolean")&&(z=null);var Ye=!1;if(z===null)Ye=!0;else switch(je){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(z.$$typeof){case n:case e:Ye=!0;break;case g:return Ye=z._init,H(Ye(z._payload),ne,pe,ye,ke)}}if(Ye)return ke=ke(z),Ye=ye===""?"."+Ce(z,0):ye,te(ke)?(pe="",Ye!=null&&(pe=Ye.replace(L,"$&/")+"/"),H(ke,ne,pe,"",function(Ca){return Ca})):ke!=null&&(k(ke)&&(ke=O(ke,pe+(ke.key==null||z&&z.key===ke.key?"":(""+ke.key).replace(L,"$&/")+"/")+Ye)),ne.push(ke)),1;Ye=0;var Xt=ye===""?".":ye+":";if(te(z))for(var yt=0;yt<z.length;yt++)ye=z[yt],je=Xt+Ce(ye,yt),Ye+=H(ye,ne,pe,je,ke);else if(yt=S(z),typeof yt=="function")for(z=yt.call(z),yt=0;!(ye=z.next()).done;)ye=ye.value,je=Xt+Ce(ye,yt++),Ye+=H(ye,ne,pe,je,ke);else if(je==="object"){if(typeof z.then=="function")return H(de(z),ne,pe,ye,ke);throw ne=String(z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function se(z,ne,pe){if(z==null)return z;var ye=[],ke=0;return H(z,ye,"","",function(je){return ne.call(pe,je,ke++)}),ye}function he(z){if(z._status===-1){var ne=z._result;ne=ne(),ne.then(function(pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=pe)},function(pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=pe)}),z._status===-1&&(z._status=0,z._result=ne)}if(z._status===1)return z._result.default;throw z._result}var Te=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},le={map:se,forEach:function(z,ne,pe){se(z,function(){ne.apply(this,arguments)},pe)},count:function(z){var ne=0;return se(z,function(){ne++}),ne},toArray:function(z){return se(z,function(ne){return ne})||[]},only:function(z){if(!k(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Me.Activity=v,Me.Children=le,Me.Component=P,Me.Fragment=t,Me.Profiler=s,Me.PureComponent=M,Me.StrictMode=i,Me.Suspense=d,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Me.__COMPILER_RUNTIME={__proto__:null,c:function(z){return x.H.useMemoCache(z)}},Me.cache=function(z){return function(){return z.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(z,ne,pe){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ye=A({},z.props),ke=z.key;if(ne!=null)for(je in ne.key!==void 0&&(ke=""+ne.key),ne)!R.call(ne,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&ne.ref===void 0||(ye[je]=ne[je]);var je=arguments.length-2;if(je===1)ye.children=pe;else if(1<je){for(var Ye=Array(je),Xt=0;Xt<je;Xt++)Ye[Xt]=arguments[Xt+2];ye.children=Ye}return V(z.type,ke,ye)},Me.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},Me.createElement=function(z,ne,pe){var ye,ke={},je=null;if(ne!=null)for(ye in ne.key!==void 0&&(je=""+ne.key),ne)R.call(ne,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(ke[ye]=ne[ye]);var Ye=arguments.length-2;if(Ye===1)ke.children=pe;else if(1<Ye){for(var Xt=Array(Ye),yt=0;yt<Ye;yt++)Xt[yt]=arguments[yt+2];ke.children=Xt}if(z&&z.defaultProps)for(ye in Ye=z.defaultProps,Ye)ke[ye]===void 0&&(ke[ye]=Ye[ye]);return V(z,je,ke)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(z){return{$$typeof:u,render:z}},Me.isValidElement=k,Me.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:he}},Me.memo=function(z,ne){return{$$typeof:f,type:z,compare:ne===void 0?null:ne}},Me.startTransition=function(z){var ne=x.T,pe={};x.T=pe;try{var ye=z(),ke=x.S;ke!==null&&ke(pe,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(Z,Te)}catch(je){Te(je)}finally{ne!==null&&pe.types!==null&&(ne.types=pe.types),x.T=ne}},Me.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Me.use=function(z){return x.H.use(z)},Me.useActionState=function(z,ne,pe){return x.H.useActionState(z,ne,pe)},Me.useCallback=function(z,ne){return x.H.useCallback(z,ne)},Me.useContext=function(z){return x.H.useContext(z)},Me.useDebugValue=function(){},Me.useDeferredValue=function(z,ne){return x.H.useDeferredValue(z,ne)},Me.useEffect=function(z,ne){return x.H.useEffect(z,ne)},Me.useEffectEvent=function(z){return x.H.useEffectEvent(z)},Me.useId=function(){return x.H.useId()},Me.useImperativeHandle=function(z,ne,pe){return x.H.useImperativeHandle(z,ne,pe)},Me.useInsertionEffect=function(z,ne){return x.H.useInsertionEffect(z,ne)},Me.useLayoutEffect=function(z,ne){return x.H.useLayoutEffect(z,ne)},Me.useMemo=function(z,ne){return x.H.useMemo(z,ne)},Me.useOptimistic=function(z,ne){return x.H.useOptimistic(z,ne)},Me.useReducer=function(z,ne,pe){return x.H.useReducer(z,ne,pe)},Me.useRef=function(z){return x.H.useRef(z)},Me.useState=function(z){return x.H.useState(z)},Me.useSyncExternalStore=function(z,ne,pe){return x.H.useSyncExternalStore(z,ne,pe)},Me.useTransition=function(){return x.H.useTransition()},Me.version="19.2.0",Me}var kw;function o_(){return kw||(kw=1,a0.exports=NV()),a0.exports}var j=o_();const $f=RV(j);var o0={exports:{}},Hu={},l0={exports:{}},c0={};var Vw;function kV(){return Vw||(Vw=1,(function(n){function e(H,se){var he=H.length;H.push(se);e:for(;0<he;){var Te=he-1>>>1,le=H[Te];if(0<s(le,se))H[Te]=se,H[he]=le,he=Te;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var se=H[0],he=H.pop();if(he!==se){H[0]=he;e:for(var Te=0,le=H.length,z=le>>>1;Te<z;){var ne=2*(Te+1)-1,pe=H[ne],ye=ne+1,ke=H[ye];if(0>s(pe,he))ye<le&&0>s(ke,pe)?(H[Te]=ke,H[ye]=he,Te=ye):(H[Te]=pe,H[ne]=he,Te=ne);else if(ye<le&&0>s(ke,he))H[Te]=ke,H[ye]=he,Te=ye;else break e}}return se}function s(H,se){var he=H.sortIndex-se.sortIndex;return he!==0?he:H.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,v=null,_=3,S=!1,N=!1,A=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function $(H){for(var se=t(f);se!==null;){if(se.callback===null)i(f);else if(se.startTime<=H)i(f),se.sortIndex=se.expirationTime,e(d,se);else break;se=t(f)}}function te(H){if(A=!1,$(H),!N)if(t(d)!==null)N=!0,Z||(Z=!0,B());else{var se=t(f);se!==null&&de(te,se.startTime-H)}}var Z=!1,x=-1,R=5,V=-1;function O(){return C?!0:!(n.unstable_now()-V<R)}function k(){if(C=!1,Z){var H=n.unstable_now();V=H;var se=!0;try{e:{N=!1,A&&(A=!1,U(x),x=-1),S=!0;var he=_;try{t:{for($(H),v=t(d);v!==null&&!(v.expirationTime>H&&O());){var Te=v.callback;if(typeof Te=="function"){v.callback=null,_=v.priorityLevel;var le=Te(v.expirationTime<=H);if(H=n.unstable_now(),typeof le=="function"){v.callback=le,$(H),se=!0;break t}v===t(d)&&i(d),$(H)}else i(d);v=t(d)}if(v!==null)se=!0;else{var z=t(f);z!==null&&de(te,z.startTime-H),se=!1}}break e}finally{v=null,_=he,S=!1}se=void 0}}finally{se?B():Z=!1}}}var B;if(typeof M=="function")B=function(){M(k)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,Ce=L.port2;L.port1.onmessage=k,B=function(){Ce.postMessage(null)}}else B=function(){P(k,0)};function de(H,se){x=P(function(){H(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(H){switch(_){case 1:case 2:case 3:var se=3;break;default:se=_}var he=_;_=se;try{return H()}finally{_=he}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(H,se){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var he=_;_=H;try{return se()}finally{_=he}},n.unstable_scheduleCallback=function(H,se,he){var Te=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Te+he:Te):he=Te,H){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=he+le,H={id:g++,callback:se,priorityLevel:H,startTime:he,expirationTime:le,sortIndex:-1},he>Te?(H.sortIndex=he,e(f,H),t(d)===null&&H===t(f)&&(A?(U(x),x=-1):A=!0,de(te,he-Te))):(H.sortIndex=le,e(d,H),N||S||(N=!0,Z||(Z=!0,B()))),H},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(H){var se=_;return function(){var he=_;_=se;try{return H.apply(this,arguments)}finally{_=he}}}})(c0)),c0}var Pw;function VV(){return Pw||(Pw=1,l0.exports=kV()),l0.exports}var u0={exports:{}},gn={};var Mw;function PV(){if(Mw)return gn;Mw=1;var n=o_();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:f,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,gn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},gn.flushSync=function(d){var f=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=g,i.d.f()}},gn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},gn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},gn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,v=u(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:S}):g==="script"&&i.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},gn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},gn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=u(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},gn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},gn.requestFormReset=function(d){i.d.r(d)},gn.unstable_batchedUpdates=function(d,f){return d(f)},gn.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},gn.useFormStatus=function(){return l.H.useHostTransitionStatus()},gn.version="19.2.0",gn}var Ow;function MV(){if(Ow)return u0.exports;Ow=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),u0.exports=PV(),u0.exports}var Lw;function OV(){if(Lw)return Hu;Lw=1;var n=VV(),e=o_(),t=MV();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function u(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var c=r,h=a;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){c=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return d(p),r;if(y===h)return d(p),a;y=y.sibling}throw Error(i(188))}if(c.return!==h.return)c=p,h=y;else{for(var E=!1,I=p.child;I;){if(I===c){E=!0,c=p,h=y;break}if(I===h){E=!0,h=p,c=y;break}I=I.sibling}if(!E){for(I=y.child;I;){if(I===c){E=!0,c=y,h=p;break}if(I===h){E=!0,h=y,c=p;break}I=I.sibling}if(!E)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:a}function g(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=g(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),M=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=k&&r[k]||r["@@iterator"],typeof r=="function"?r:null)}var L=Symbol.for("react.client.reference");function Ce(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===L?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case P:return"Profiler";case C:return"StrictMode";case te:return"Suspense";case Z:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case M:return r.displayName||"Context";case U:return(r._context.displayName||"Context")+".Consumer";case $:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x:return a=r.displayName||null,a!==null?a:Ce(r.type)||"Memo";case R:a=r._payload,r=r._init;try{return Ce(r(a))}catch{}}return null}var de=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Te=[],le=-1;function z(r){return{current:r}}function ne(r){0>le||(r.current=Te[le],Te[le]=null,le--)}function pe(r,a){le++,Te[le]=r.current,r.current=a}var ye=z(null),ke=z(null),je=z(null),Ye=z(null);function Xt(r,a){switch(pe(je,a),pe(ke,r),pe(ye,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?ZE(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=ZE(a),r=JE(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ne(ye),pe(ye,r)}function yt(){ne(ye),ne(ke),ne(je)}function Ca(r){r.memoizedState!==null&&pe(Ye,r);var a=ye.current,c=JE(a,r.type);a!==c&&(pe(ke,r),pe(ye,c))}function qo(r){ke.current===r&&(ne(ye),ne(ke)),Ye.current===r&&(ne(Ye),Uu._currentValue=he)}var Ho,Go;function Fi(r){if(Ho===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Ho=a&&a[1]||"",Go=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ho+r+Go}var Uc=!1;function Da(r,a){if(!r||Uc)return"";Uc=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ee){var W=ee}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(ee){W=ee}r.call(oe.prototype)}}else{try{throw Error()}catch(ee){W=ee}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ee){if(ee&&W&&typeof ee.stack=="string")return[ee.stack,W.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),E=y[0],I=y[1];if(E&&I){var F=E.split(`
`),X=I.split(`
`);for(p=h=0;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(h===F.length||p===X.length)for(h=F.length-1,p=X.length-1;1<=h&&0<=p&&F[h]!==X[p];)p--;for(;1<=h&&0<=p;h--,p--)if(F[h]!==X[p]){if(h!==1||p!==1)do if(h--,p--,0>p||F[h]!==X[p]){var ie=`
`+F[h].replace(" at new "," at ");return r.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",r.displayName)),ie}while(1<=h&&0<=p);break}}}finally{Uc=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Fi(c):""}function zc(r,a){switch(r.tag){case 26:case 27:case 5:return Fi(r.type);case 16:return Fi("Lazy");case 13:return r.child!==a&&a!==null?Fi("Suspense Fallback"):Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 15:return Da(r.type,!1);case 11:return Da(r.type.render,!1);case 1:return Da(r.type,!0);case 31:return Fi("Activity");default:return""}}function Bc(r){try{var a="",c=null;do a+=zc(r,c),c=r,r=r.return;while(r);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Lt=Object.prototype.hasOwnProperty,Wt=n.unstable_scheduleCallback,fs=n.unstable_cancelCallback,og=n.unstable_shouldYield,gd=n.unstable_requestPaint,xn=n.unstable_now,Na=n.unstable_getCurrentPriorityLevel,Fc=n.unstable_ImmediatePriority,qc=n.unstable_UserBlockingPriority,ms=n.unstable_NormalPriority,lg=n.unstable_LowPriority,yd=n.unstable_IdlePriority,vd=n.log,_d=n.unstable_setDisableYieldValue,Si=null,on=null;function ni(r){if(typeof vd=="function"&&_d(r),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(Si,r)}catch{}}var Ct=Math.clz32?Math.clz32:Td,bd=Math.log,$o=Math.LN2;function Td(r){return r>>>=0,r===0?32:31-(bd(r)/$o|0)|0}var qi=256,ka=262144,jt=4194304;function Hi(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Gi(r,a,c){var h=r.pendingLanes;if(h===0)return 0;var p=0,y=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var I=h&134217727;return I!==0?(h=I&~y,h!==0?p=Hi(h):(E&=I,E!==0?p=Hi(E):c||(c=I&~r,c!==0&&(p=Hi(c))))):(I=h&~y,I!==0?p=Hi(I):E!==0?p=Hi(E):c||(c=h&~r,c!==0&&(p=Hi(c)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:p}function xi(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function cg(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ed(){var r=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),r}function $i(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function Va(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ug(r,a,c,h,p,y){var E=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var I=r.entanglements,F=r.expirationTimes,X=r.hiddenUpdates;for(c=E&~c;0<c;){var ie=31-Ct(c),oe=1<<ie;I[ie]=0,F[ie]=-1;var W=X[ie];if(W!==null)for(X[ie]=null,ie=0;ie<W.length;ie++){var ee=W[ie];ee!==null&&(ee.lane&=-536870913)}c&=~oe}h!==0&&Pa(r,h,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(E&~a))}function Pa(r,a,c){r.pendingLanes|=a,r.suspendedLanes&=~a;var h=31-Ct(a);r.entangledLanes|=a,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function Hc(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var h=31-Ct(c),p=1<<h;p&a|r[h]&a&&(r[h]|=a),c&=~p}}function Gc(r,a){var c=a&-a;return c=(c&42)!==0?1:Ma(c),(c&(r.suspendedLanes|a))!==0?0:c}function Ma(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ir(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function wd(){var r=se.p;return r!==0?r:(r=window.event,r===void 0?32:Ew(r.type))}function Ai(r,a){var c=se.p;try{return se.p=r,a()}finally{se.p=c}}var Ii=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Ii,nn="__reactProps$"+Ii,Ki="__reactContainer$"+Ii,Ko="__reactEvents$"+Ii,hg="__reactListeners$"+Ii,Sd="__reactHandles$"+Ii,xd="__reactResources$"+Ii,Yi="__reactMarker$"+Ii;function Yo(r){delete r[Ut],delete r[nn],delete r[Ko],delete r[hg],delete r[Sd]}function Qi(r){var a=r[Ut];if(a)return a;for(var c=r.parentNode;c;){if(a=c[Ki]||c[Ut]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=aw(r);r!==null;){if(c=r[Ut])return c;r=aw(r)}return a}r=c,c=r.parentNode}return null}function ii(r){if(r=r[Ut]||r[Ki]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function qn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Xi(r){var a=r[xd];return a||(a=r[xd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function zt(r){r[Yi]=!0}var $c=new Set,Kc={};function Wi(r,a){Zi(r,a),Zi(r+"Capture",a)}function Zi(r,a){for(Kc[r]=a,r=0;r<a.length;r++)$c.add(a[r])}var Yc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qc={},Xc={};function Ad(r){return Lt.call(Xc,r)?!0:Lt.call(Qc,r)?!1:Yc.test(r)?Xc[r]=!0:(Qc[r]=!0,!1)}function Qo(r,a,c){if(Ad(a))if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+c)}}function Hn(r,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+c)}}function Bt(r,a,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(a,c,""+h)}}function rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ps(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Wc(r,a,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,y=h.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return p.call(this)},set:function(E){c=""+E,y.call(this,E)}}),Object.defineProperty(r,a,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function it(r){if(!r._valueTracker){var a=ps(r)?"checked":"value";r._valueTracker=Wc(r,a,""+r[a])}}function Oa(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),h="";return r&&(h=ps(r)?r.checked?"true":"false":r.value),r=h,r!==c?(a.setValue(r),!0):!1}function Ji(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var La=/[\n"\\]/g;function Nn(r){return r.replace(La,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Xo(r,a,c,h,p,y,E,I){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),a!=null?E==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+rn(a)):r.value!==""+rn(a)&&(r.value=""+rn(a)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),a!=null?Zc(r,E,rn(a)):c!=null?Zc(r,E,rn(c)):h!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+rn(I):r.removeAttribute("name")}function Id(r,a,c,h,p,y,E,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){it(r);return}c=c!=null?""+rn(c):"",a=a!=null?""+rn(a):c,I||a===r.value||(r.value=a),r.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=I?r.checked:!!h,r.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E),it(r)}function Zc(r,a,c){a==="number"&&Ji(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function gs(r,a,c,h){if(r=r.options,a){a={};for(var p=0;p<c.length;p++)a["$"+c[p]]=!0;for(c=0;c<r.length;c++)p=a.hasOwnProperty("$"+r[c].value),r[c].selected!==p&&(r[c].selected=p),p&&h&&(r[c].defaultSelected=!0)}else{for(c=""+rn(c),a=null,p=0;p<r.length;p++){if(r[p].value===c){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}a!==null||r[p].disabled||(a=r[p])}a!==null&&(a.selected=!0)}}function Rd(r,a,c){if(a!=null&&(a=""+rn(a),a!==r.value&&(r.value=a),c==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=c!=null?""+rn(c):""}function ys(r,a,c,h){if(a==null){if(h!=null){if(c!=null)throw Error(i(92));if(de(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),a=c}c=rn(a),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),it(r)}function kn(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var Cd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jc(r,a,c){var h=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":h?r.setProperty(a,c):typeof c!="number"||c===0||Cd.has(a)?a==="float"?r.cssFloat=c:r[a]=(""+c).trim():r[a]=c+"px"}function eu(r,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&c[p]!==h&&Jc(r,p,h)}else for(var y in a)a.hasOwnProperty(y)&&Jc(r,y,a[y])}function Wo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zo(r){return vs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ri(){}var tu=null;function ri(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _s=null,er=null;function ja(r){var a=ii(r);if(a&&(r=a.stateNode)){var c=r[nn]||null;e:switch(r=a.stateNode,a.type){case"input":if(Xo(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Nn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var h=c[a];if(h!==r&&h.form===r.form){var p=h[nn]||null;if(!p)throw Error(i(90));Xo(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<c.length;a++)h=c[a],h.form===r.form&&Oa(h)}break e;case"textarea":Rd(r,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&gs(r,!!c.multiple,a,!1)}}}var Jo=!1;function bs(r,a,c){if(Jo)return r(a,c);Jo=!0;try{var h=r(a);return h}finally{if(Jo=!1,(_s!==null||er!==null)&&(Sf(),_s&&(a=_s,r=er,er=_s=null,ja(a),r)))for(a=0;a<r.length;a++)ja(r[a])}}function Ci(r,a){var c=r.stateNode;if(c===null)return null;var h=c[nn]||null;if(h===null)return null;c=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ua=!1;if(si)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{Ua=!1}var tr=null,nu=null,za=null;function iu(){if(za)return za;var r,a=nu,c=a.length,h,p="value"in tr?tr.value:tr.textContent,y=p.length;for(r=0;r<c&&a[r]===p[r];r++);var E=c-r;for(h=1;h<=E&&a[c-h]===p[y-h];h++);return za=p.slice(r,1<h?1-h:void 0)}function Ba(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Rr(){return!0}function Di(){return!1}function ln(r){function a(c,h,p,y,E){this._reactName=c,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(c=r[I],this[I]=c?c(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Rr:Di,this.isPropagationStopped=Di,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),a}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nr=ln(Cr),Ts=v({},Cr,{view:0,detail:0}),ru=ln(Ts),Es,el,ir,tl=v({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ws,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ir&&(ir&&r.type==="mousemove"?(Es=r.screenX-ir.screenX,el=r.screenY-ir.screenY):el=Es=0,ir=r),Es)},movementY:function(r){return"movementY"in r?r.movementY:el}}),su=ln(tl),Fa=v({},tl,{dataTransfer:0}),Nd=ln(Fa),kd=v({},Ts,{relatedTarget:0}),qa=ln(kd),au=v({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vd=ln(au),nl=v({},Cr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Pd=ln(nl),Md=v({},Cr,{data:0}),rr=ln(Md),Od={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ld={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ud(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=jd[r])?!!a[r]:!1}function ws(){return Ud}var An=v({},Ts,{key:function(r){if(r.key){var a=Od[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ba(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ld[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ws,charCode:function(r){return r.type==="keypress"?Ba(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ba(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),zd=ln(An),Bd=v({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dr=ln(Bd),m=v({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ws}),b=ln(m),w=v({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=ln(w),Y=v({},tl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),J=ln(Y),me=v({},Cr,{newState:0,oldState:0}),Oe=ln(me),Dt=[9,13,27,32],et=si&&"CompositionEvent"in window,vt=null;si&&"documentMode"in document&&(vt=document.documentMode);var ai=si&&"TextEvent"in window&&!vt,sr=si&&(!et||vt&&8<vt&&11>=vt),Ni=" ",ki=!1;function Ha(r,a){switch(r){case"keyup":return Dt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function il(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var rl=!1;function ZN(r,a){switch(r){case"compositionend":return il(a);case"keypress":return a.which!==32?null:(ki=!0,Ni);case"textInput":return r=a.data,r===Ni&&ki?null:r;default:return null}}function JN(r,a){if(rl)return r==="compositionend"||!et&&Ha(r,a)?(r=iu(),za=nu=tr=null,rl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return sr&&a.locale!=="ko"?null:a.data;default:return null}}var ek={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cT(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!ek[r.type]:a==="textarea"}function uT(r,a,c,h){_s?er?er.push(h):er=[h]:_s=h,a=Nf(a,"onChange"),0<a.length&&(c=new nr("onChange","change",null,c,h),r.push({event:c,listeners:a}))}var ou=null,lu=null;function tk(r){$E(r,0)}function Fd(r){var a=qn(r);if(Oa(a))return r}function hT(r,a){if(r==="change")return a}var dT=!1;if(si){var dg;if(si){var fg="oninput"in document;if(!fg){var fT=document.createElement("div");fT.setAttribute("oninput","return;"),fg=typeof fT.oninput=="function"}dg=fg}else dg=!1;dT=dg&&(!document.documentMode||9<document.documentMode)}function mT(){ou&&(ou.detachEvent("onpropertychange",pT),lu=ou=null)}function pT(r){if(r.propertyName==="value"&&Fd(lu)){var a=[];uT(a,lu,r,ri(r)),bs(tk,a)}}function nk(r,a,c){r==="focusin"?(mT(),ou=a,lu=c,ou.attachEvent("onpropertychange",pT)):r==="focusout"&&mT()}function ik(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Fd(lu)}function rk(r,a){if(r==="click")return Fd(a)}function sk(r,a){if(r==="input"||r==="change")return Fd(a)}function ak(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Gn=typeof Object.is=="function"?Object.is:ak;function cu(r,a){if(Gn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),h=Object.keys(a);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var p=c[h];if(!Lt.call(a,p)||!Gn(r[p],a[p]))return!1}return!0}function gT(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function yT(r,a){var c=gT(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=a&&h>=a)return{node:c,offset:a-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=gT(c)}}function vT(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?vT(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function _T(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Ji(r.document);a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=Ji(r.document)}return a}function mg(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var ok=si&&"documentMode"in document&&11>=document.documentMode,sl=null,pg=null,uu=null,gg=!1;function bT(r,a,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;gg||sl==null||sl!==Ji(h)||(h=sl,"selectionStart"in h&&mg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),uu&&cu(uu,h)||(uu=h,h=Nf(pg,"onSelect"),0<h.length&&(a=new nr("onSelect","select",null,a,c),r.push({event:a,listeners:h}),a.target=sl)))}function Ga(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var al={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},yg={},TT={};si&&(TT=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function $a(r){if(yg[r])return yg[r];if(!al[r])return r;var a=al[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in TT)return yg[r]=a[c];return r}var ET=$a("animationend"),wT=$a("animationiteration"),ST=$a("animationstart"),lk=$a("transitionrun"),ck=$a("transitionstart"),uk=$a("transitioncancel"),xT=$a("transitionend"),AT=new Map,vg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vg.push("scrollEnd");function Vi(r,a){AT.set(r,a),Wi(a,[r])}var qd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},oi=[],ol=0,_g=0;function Hd(){for(var r=ol,a=_g=ol=0;a<r;){var c=oi[a];oi[a++]=null;var h=oi[a];oi[a++]=null;var p=oi[a];oi[a++]=null;var y=oi[a];if(oi[a++]=null,h!==null&&p!==null){var E=h.pending;E===null?p.next=p:(p.next=E.next,E.next=p),h.pending=p}y!==0&&IT(c,p,y)}}function Gd(r,a,c,h){oi[ol++]=r,oi[ol++]=a,oi[ol++]=c,oi[ol++]=h,_g|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function bg(r,a,c,h){return Gd(r,a,c,h),$d(r)}function Ka(r,a){return Gd(r,null,null,a),$d(r)}function IT(r,a,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var p=!1,y=r.return;y!==null;)y.childLanes|=c,h=y.alternate,h!==null&&(h.childLanes|=c),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&a!==null&&(p=31-Ct(c),r=y.hiddenUpdates,h=r[p],h===null?r[p]=[a]:h.push(a),a.lane=c|536870912),y):null}function $d(r){if(50<ku)throw ku=0,Cy=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var ll={};function hk(r,a,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(r,a,c,h){return new hk(r,a,c,h)}function Tg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Nr(r,a){var c=r.alternate;return c===null?(c=$n(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function RT(r,a){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,a=c.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Kd(r,a,c,h,p,y){var E=0;if(h=r,typeof r=="function")Tg(r)&&(E=1);else if(typeof r=="string")E=gV(r,c,ye.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=$n(31,c,a,p),r.elementType=V,r.lanes=y,r;case A:return Ya(c.children,p,y,a);case C:E=8,p|=24;break;case P:return r=$n(12,c,a,p|2),r.elementType=P,r.lanes=y,r;case te:return r=$n(13,c,a,p),r.elementType=te,r.lanes=y,r;case Z:return r=$n(19,c,a,p),r.elementType=Z,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case M:E=10;break e;case U:E=9;break e;case $:E=11;break e;case x:E=14;break e;case R:E=16,h=null;break e}E=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return a=$n(E,c,a,p),a.elementType=r,a.type=h,a.lanes=y,a}function Ya(r,a,c,h){return r=$n(7,r,h,a),r.lanes=c,r}function Eg(r,a,c){return r=$n(6,r,null,a),r.lanes=c,r}function CT(r){var a=$n(18,null,null,0);return a.stateNode=r,a}function wg(r,a,c){return a=$n(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var DT=new WeakMap;function li(r,a){if(typeof r=="object"&&r!==null){var c=DT.get(r);return c!==void 0?c:(a={value:r,source:a,stack:Bc(a)},DT.set(r,a),a)}return{value:r,source:a,stack:Bc(a)}}var cl=[],ul=0,Yd=null,hu=0,ci=[],ui=0,Ss=null,ar=1,or="";function kr(r,a){cl[ul++]=hu,cl[ul++]=Yd,Yd=r,hu=a}function NT(r,a,c){ci[ui++]=ar,ci[ui++]=or,ci[ui++]=Ss,Ss=r;var h=ar;r=or;var p=32-Ct(h)-1;h&=~(1<<p),c+=1;var y=32-Ct(a)+p;if(30<y){var E=p-p%5;y=(h&(1<<E)-1).toString(32),h>>=E,p-=E,ar=1<<32-Ct(a)+p|c<<p|h,or=y+r}else ar=1<<y|c<<p|h,or=r}function Sg(r){r.return!==null&&(kr(r,1),NT(r,1,0))}function xg(r){for(;r===Yd;)Yd=cl[--ul],cl[ul]=null,hu=cl[--ul],cl[ul]=null;for(;r===Ss;)Ss=ci[--ui],ci[ui]=null,or=ci[--ui],ci[ui]=null,ar=ci[--ui],ci[ui]=null}function kT(r,a){ci[ui++]=ar,ci[ui++]=or,ci[ui++]=Ss,ar=a.id,or=a.overflow,Ss=r}var cn=null,pt=null,Ke=!1,xs=null,hi=!1,Ag=Error(i(519));function As(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw du(li(a,r)),Ag}function VT(r){var a=r.stateNode,c=r.type,h=r.memoizedProps;switch(a[Ut]=r,a[nn]=h,c){case"dialog":Fe("cancel",a),Fe("close",a);break;case"iframe":case"object":case"embed":Fe("load",a);break;case"video":case"audio":for(c=0;c<Pu.length;c++)Fe(Pu[c],a);break;case"source":Fe("error",a);break;case"img":case"image":case"link":Fe("error",a),Fe("load",a);break;case"details":Fe("toggle",a);break;case"input":Fe("invalid",a),Id(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Fe("invalid",a);break;case"textarea":Fe("invalid",a),ys(a,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||h.suppressHydrationWarning===!0||XE(a.textContent,c)?(h.popover!=null&&(Fe("beforetoggle",a),Fe("toggle",a)),h.onScroll!=null&&Fe("scroll",a),h.onScrollEnd!=null&&Fe("scrollend",a),h.onClick!=null&&(a.onclick=Ri),a=!0):a=!1,a||As(r,!0)}function PT(r){for(cn=r.return;cn;)switch(cn.tag){case 5:case 31:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:cn=cn.return}}function hl(r){if(r!==cn)return!1;if(!Ke)return PT(r),Ke=!0,!1;var a=r.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||Hy(r.type,r.memoizedProps)),c=!c),c&&pt&&As(r),PT(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));pt=sw(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));pt=sw(r)}else a===27?(a=pt,zs(r.type)?(r=Qy,Qy=null,pt=r):pt=a):pt=cn?fi(r.stateNode.nextSibling):null;return!0}function Qa(){pt=cn=null,Ke=!1}function Ig(){var r=xs;return r!==null&&(On===null?On=r:On.push.apply(On,r),xs=null),r}function du(r){xs===null?xs=[r]:xs.push(r)}var Rg=z(null),Xa=null,Vr=null;function Is(r,a,c){pe(Rg,a._currentValue),a._currentValue=c}function Pr(r){r._currentValue=Rg.current,ne(Rg)}function Cg(r,a,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),r===c)break;r=r.return}}function Dg(r,a,c,h){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var E=p.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=p;for(var F=0;F<a.length;F++)if(I.context===a[F]){y.lanes|=c,I=y.alternate,I!==null&&(I.lanes|=c),Cg(y.return,c,r),h||(E=null);break e}y=I.next}}else if(p.tag===18){if(E=p.return,E===null)throw Error(i(341));E.lanes|=c,y=E.alternate,y!==null&&(y.lanes|=c),Cg(E,c,r),E=null}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===r){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}}function dl(r,a,c,h){r=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var E=p.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var I=p.type;Gn(p.pendingProps.value,E.value)||(r!==null?r.push(I):r=[I])}}else if(p===Ye.current){if(E=p.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Uu):r=[Uu])}p=p.return}r!==null&&Dg(a,r,c,h),a.flags|=262144}function Qd(r){for(r=r.firstContext;r!==null;){if(!Gn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Wa(r){Xa=r,Vr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function un(r){return MT(Xa,r)}function Xd(r,a){return Xa===null&&Wa(r),MT(r,a)}function MT(r,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Vr===null){if(r===null)throw Error(i(308));Vr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Vr=Vr.next=a;return c}var dk=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){a.aborted=!0,r.forEach(function(c){return c()})}},fk=n.unstable_scheduleCallback,mk=n.unstable_NormalPriority,Ft={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ng(){return{controller:new dk,data:new Map,refCount:0}}function fu(r){r.refCount--,r.refCount===0&&fk(mk,function(){r.controller.abort()})}var mu=null,kg=0,fl=0,ml=null;function pk(r,a){if(mu===null){var c=mu=[];kg=0,fl=My(),ml={status:"pending",value:void 0,then:function(h){c.push(h)}}}return kg++,a.then(OT,OT),a}function OT(){if(--kg===0&&mu!==null){ml!==null&&(ml.status="fulfilled");var r=mu;mu=null,fl=0,ml=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function gk(r,a){var c=[],h={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return r.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<c.length;p++)(0,c[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),h}var LT=H.S;H.S=function(r,a){bE=xn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&pk(r,a),LT!==null&&LT(r,a)};var Za=z(null);function Vg(){var r=Za.current;return r!==null?r:dt.pooledCache}function Wd(r,a){a===null?pe(Za,Za.current):pe(Za,a.pool)}function jT(){var r=Vg();return r===null?null:{parent:Ft._currentValue,pool:r}}var pl=Error(i(460)),Pg=Error(i(474)),Zd=Error(i(542)),Jd={then:function(){}};function UT(r){return r=r.status,r==="fulfilled"||r==="rejected"}function zT(r,a,c){switch(c=r[c],c===void 0?r.push(a):c!==a&&(a.then(Ri,Ri),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,FT(r),r;default:if(typeof a.status=="string")a.then(Ri,Ri);else{if(r=dt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,FT(r),r}throw eo=a,pl}}function Ja(r){try{var a=r._init;return a(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(eo=c,pl):c}}var eo=null;function BT(){if(eo===null)throw Error(i(459));var r=eo;return eo=null,r}function FT(r){if(r===pl||r===Zd)throw Error(i(483))}var gl=null,pu=0;function ef(r){var a=pu;return pu+=1,gl===null&&(gl=[]),zT(gl,r,a)}function gu(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function tf(r,a){throw a.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function qT(r){function a(G,q){if(r){var Q=G.deletions;Q===null?(G.deletions=[q],G.flags|=16):Q.push(q)}}function c(G,q){if(!r)return null;for(;q!==null;)a(G,q),q=q.sibling;return null}function h(G){for(var q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function p(G,q){return G=Nr(G,q),G.index=0,G.sibling=null,G}function y(G,q,Q){return G.index=Q,r?(Q=G.alternate,Q!==null?(Q=Q.index,Q<q?(G.flags|=67108866,q):Q):(G.flags|=67108866,q)):(G.flags|=1048576,q)}function E(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function I(G,q,Q,ae){return q===null||q.tag!==6?(q=Eg(Q,G.mode,ae),q.return=G,q):(q=p(q,Q),q.return=G,q)}function F(G,q,Q,ae){var xe=Q.type;return xe===A?ie(G,q,Q.props.children,ae,Q.key):q!==null&&(q.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&Ja(xe)===q.type)?(q=p(q,Q.props),gu(q,Q),q.return=G,q):(q=Kd(Q.type,Q.key,Q.props,null,G.mode,ae),gu(q,Q),q.return=G,q)}function X(G,q,Q,ae){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=wg(Q,G.mode,ae),q.return=G,q):(q=p(q,Q.children||[]),q.return=G,q)}function ie(G,q,Q,ae,xe){return q===null||q.tag!==7?(q=Ya(Q,G.mode,ae,xe),q.return=G,q):(q=p(q,Q),q.return=G,q)}function oe(G,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Eg(""+q,G.mode,Q),q.return=G,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return Q=Kd(q.type,q.key,q.props,null,G.mode,Q),gu(Q,q),Q.return=G,Q;case N:return q=wg(q,G.mode,Q),q.return=G,q;case R:return q=Ja(q),oe(G,q,Q)}if(de(q)||B(q))return q=Ya(q,G.mode,Q,null),q.return=G,q;if(typeof q.then=="function")return oe(G,ef(q),Q);if(q.$$typeof===M)return oe(G,Xd(G,q),Q);tf(G,q)}return null}function W(G,q,Q,ae){var xe=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return xe!==null?null:I(G,q,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:return Q.key===xe?F(G,q,Q,ae):null;case N:return Q.key===xe?X(G,q,Q,ae):null;case R:return Q=Ja(Q),W(G,q,Q,ae)}if(de(Q)||B(Q))return xe!==null?null:ie(G,q,Q,ae,null);if(typeof Q.then=="function")return W(G,q,ef(Q),ae);if(Q.$$typeof===M)return W(G,q,Xd(G,Q),ae);tf(G,Q)}return null}function ee(G,q,Q,ae,xe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return G=G.get(Q)||null,I(q,G,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return G=G.get(ae.key===null?Q:ae.key)||null,F(q,G,ae,xe);case N:return G=G.get(ae.key===null?Q:ae.key)||null,X(q,G,ae,xe);case R:return ae=Ja(ae),ee(G,q,Q,ae,xe)}if(de(ae)||B(ae))return G=G.get(Q)||null,ie(q,G,ae,xe,null);if(typeof ae.then=="function")return ee(G,q,Q,ef(ae),xe);if(ae.$$typeof===M)return ee(G,q,Q,Xd(q,ae),xe);tf(q,ae)}return null}function _e(G,q,Q,ae){for(var xe=null,Ze=null,Ee=q,Ue=q=0,He=null;Ee!==null&&Ue<Q.length;Ue++){Ee.index>Ue?(He=Ee,Ee=null):He=Ee.sibling;var Je=W(G,Ee,Q[Ue],ae);if(Je===null){Ee===null&&(Ee=He);break}r&&Ee&&Je.alternate===null&&a(G,Ee),q=y(Je,q,Ue),Ze===null?xe=Je:Ze.sibling=Je,Ze=Je,Ee=He}if(Ue===Q.length)return c(G,Ee),Ke&&kr(G,Ue),xe;if(Ee===null){for(;Ue<Q.length;Ue++)Ee=oe(G,Q[Ue],ae),Ee!==null&&(q=y(Ee,q,Ue),Ze===null?xe=Ee:Ze.sibling=Ee,Ze=Ee);return Ke&&kr(G,Ue),xe}for(Ee=h(Ee);Ue<Q.length;Ue++)He=ee(Ee,G,Ue,Q[Ue],ae),He!==null&&(r&&He.alternate!==null&&Ee.delete(He.key===null?Ue:He.key),q=y(He,q,Ue),Ze===null?xe=He:Ze.sibling=He,Ze=He);return r&&Ee.forEach(function(Gs){return a(G,Gs)}),Ke&&kr(G,Ue),xe}function Ie(G,q,Q,ae){if(Q==null)throw Error(i(151));for(var xe=null,Ze=null,Ee=q,Ue=q=0,He=null,Je=Q.next();Ee!==null&&!Je.done;Ue++,Je=Q.next()){Ee.index>Ue?(He=Ee,Ee=null):He=Ee.sibling;var Gs=W(G,Ee,Je.value,ae);if(Gs===null){Ee===null&&(Ee=He);break}r&&Ee&&Gs.alternate===null&&a(G,Ee),q=y(Gs,q,Ue),Ze===null?xe=Gs:Ze.sibling=Gs,Ze=Gs,Ee=He}if(Je.done)return c(G,Ee),Ke&&kr(G,Ue),xe;if(Ee===null){for(;!Je.done;Ue++,Je=Q.next())Je=oe(G,Je.value,ae),Je!==null&&(q=y(Je,q,Ue),Ze===null?xe=Je:Ze.sibling=Je,Ze=Je);return Ke&&kr(G,Ue),xe}for(Ee=h(Ee);!Je.done;Ue++,Je=Q.next())Je=ee(Ee,G,Ue,Je.value,ae),Je!==null&&(r&&Je.alternate!==null&&Ee.delete(Je.key===null?Ue:Je.key),q=y(Je,q,Ue),Ze===null?xe=Je:Ze.sibling=Je,Ze=Je);return r&&Ee.forEach(function(IV){return a(G,IV)}),Ke&&kr(G,Ue),xe}function ht(G,q,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:e:{for(var xe=Q.key;q!==null;){if(q.key===xe){if(xe=Q.type,xe===A){if(q.tag===7){c(G,q.sibling),ae=p(q,Q.props.children),ae.return=G,G=ae;break e}}else if(q.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&Ja(xe)===q.type){c(G,q.sibling),ae=p(q,Q.props),gu(ae,Q),ae.return=G,G=ae;break e}c(G,q);break}else a(G,q);q=q.sibling}Q.type===A?(ae=Ya(Q.props.children,G.mode,ae,Q.key),ae.return=G,G=ae):(ae=Kd(Q.type,Q.key,Q.props,null,G.mode,ae),gu(ae,Q),ae.return=G,G=ae)}return E(G);case N:e:{for(xe=Q.key;q!==null;){if(q.key===xe)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){c(G,q.sibling),ae=p(q,Q.children||[]),ae.return=G,G=ae;break e}else{c(G,q);break}else a(G,q);q=q.sibling}ae=wg(Q,G.mode,ae),ae.return=G,G=ae}return E(G);case R:return Q=Ja(Q),ht(G,q,Q,ae)}if(de(Q))return _e(G,q,Q,ae);if(B(Q)){if(xe=B(Q),typeof xe!="function")throw Error(i(150));return Q=xe.call(Q),Ie(G,q,Q,ae)}if(typeof Q.then=="function")return ht(G,q,ef(Q),ae);if(Q.$$typeof===M)return ht(G,q,Xd(G,Q),ae);tf(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(c(G,q.sibling),ae=p(q,Q),ae.return=G,G=ae):(c(G,q),ae=Eg(Q,G.mode,ae),ae.return=G,G=ae),E(G)):c(G,q)}return function(G,q,Q,ae){try{pu=0;var xe=ht(G,q,Q,ae);return gl=null,xe}catch(Ee){if(Ee===pl||Ee===Zd)throw Ee;var Ze=$n(29,Ee,null,G.mode);return Ze.lanes=ae,Ze.return=G,Ze}finally{}}}var to=qT(!0),HT=qT(!1),Rs=!1;function Mg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Og(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Cs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ds(r,a,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(tt&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=$d(r),IT(r,null,c),a}return Gd(r,h,a,c),$d(r)}function yu(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var h=a.lanes;h&=r.pendingLanes,c|=h,a.lanes=c,Hc(r,c)}}function Lg(r,a){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?p=y=E:y=y.next=E,c=c.next}while(c!==null);y===null?p=y=a:y=y.next=a}else p=y=a;c={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}var jg=!1;function vu(){if(jg){var r=ml;if(r!==null)throw r}}function _u(r,a,c,h){jg=!1;var p=r.updateQueue;Rs=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,I=p.shared.pending;if(I!==null){p.shared.pending=null;var F=I,X=F.next;F.next=null,E===null?y=X:E.next=X,E=F;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,I=ie.lastBaseUpdate,I!==E&&(I===null?ie.firstBaseUpdate=X:I.next=X,ie.lastBaseUpdate=F))}if(y!==null){var oe=p.baseState;E=0,ie=X=F=null,I=y;do{var W=I.lane&-536870913,ee=W!==I.lane;if(ee?(qe&W)===W:(h&W)===W){W!==0&&W===fl&&(jg=!0),ie!==null&&(ie=ie.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var _e=r,Ie=I;W=a;var ht=c;switch(Ie.tag){case 1:if(_e=Ie.payload,typeof _e=="function"){oe=_e.call(ht,oe,W);break e}oe=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ie.payload,W=typeof _e=="function"?_e.call(ht,oe,W):_e,W==null)break e;oe=v({},oe,W);break e;case 2:Rs=!0}}W=I.callback,W!==null&&(r.flags|=64,ee&&(r.flags|=8192),ee=p.callbacks,ee===null?p.callbacks=[W]:ee.push(W))}else ee={lane:W,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ie===null?(X=ie=ee,F=oe):ie=ie.next=ee,E|=W;if(I=I.next,I===null){if(I=p.shared.pending,I===null)break;ee=I,I=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);ie===null&&(F=oe),p.baseState=F,p.firstBaseUpdate=X,p.lastBaseUpdate=ie,y===null&&(p.shared.lanes=0),Ms|=E,r.lanes=E,r.memoizedState=oe}}function GT(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function $T(r,a){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)GT(c[r],a)}var yl=z(null),nf=z(0);function KT(r,a){r=qr,pe(nf,r),pe(yl,a),qr=r|a.baseLanes}function Ug(){pe(nf,qr),pe(yl,yl.current)}function zg(){qr=nf.current,ne(yl),ne(nf)}var Kn=z(null),di=null;function Ns(r){var a=r.alternate;pe(Nt,Nt.current&1),pe(Kn,r),di===null&&(a===null||yl.current!==null||a.memoizedState!==null)&&(di=r)}function Bg(r){pe(Nt,Nt.current),pe(Kn,r),di===null&&(di=r)}function YT(r){r.tag===22?(pe(Nt,Nt.current),pe(Kn,r),di===null&&(di=r)):ks()}function ks(){pe(Nt,Nt.current),pe(Kn,Kn.current)}function Yn(r){ne(Kn),di===r&&(di=null),ne(Nt)}var Nt=z(0);function rf(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Ky(c)||Yy(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Mr=0,Le=null,ct=null,qt=null,sf=!1,vl=!1,no=!1,af=0,bu=0,_l=null,yk=0;function xt(){throw Error(i(321))}function Fg(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!Gn(r[c],a[c]))return!1;return!0}function qg(r,a,c,h,p,y){return Mr=y,Le=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=r===null||r.memoizedState===null?N1:ry,no=!1,y=c(h,p),no=!1,vl&&(y=XT(a,c,h,p)),QT(r),y}function QT(r){H.H=wu;var a=ct!==null&&ct.next!==null;if(Mr=0,qt=ct=Le=null,sf=!1,bu=0,_l=null,a)throw Error(i(300));r===null||Ht||(r=r.dependencies,r!==null&&Qd(r)&&(Ht=!0))}function XT(r,a,c,h){Le=r;var p=0;do{if(vl&&(_l=null),bu=0,vl=!1,25<=p)throw Error(i(301));if(p+=1,qt=ct=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=k1,y=a(c,h)}while(vl);return y}function vk(){var r=H.H,a=r.useState()[0];return a=typeof a.then=="function"?Tu(a):a,r=r.useState()[0],(ct!==null?ct.memoizedState:null)!==r&&(Le.flags|=1024),a}function Hg(){var r=af!==0;return af=0,r}function Gg(r,a,c){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~c}function $g(r){if(sf){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}sf=!1}Mr=0,qt=ct=Le=null,vl=!1,bu=af=0,_l=null}function In(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Le.memoizedState=qt=r:qt=qt.next=r,qt}function kt(){if(ct===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=ct.next;var a=qt===null?Le.memoizedState:qt.next;if(a!==null)qt=a,ct=r;else{if(r===null)throw Le.alternate===null?Error(i(467)):Error(i(310));ct=r,r={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},qt===null?Le.memoizedState=qt=r:qt=qt.next=r}return qt}function of(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tu(r){var a=bu;return bu+=1,_l===null&&(_l=[]),r=zT(_l,r,a),a=Le,(qt===null?a.memoizedState:qt.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?N1:ry),r}function lf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Tu(r);if(r.$$typeof===M)return un(r)}throw Error(i(438,String(r)))}function Kg(r){var a=null,c=Le.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var h=Le.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=of(),Le.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(r),h=0;h<r;h++)c[h]=O;return a.index++,c}function Or(r,a){return typeof a=="function"?a(r):a}function cf(r){var a=kt();return Yg(a,ct,r)}function Yg(r,a,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var p=r.baseQueue,y=h.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}a.baseQueue=p=y,h.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{a=p.next;var I=E=null,F=null,X=a,ie=!1;do{var oe=X.lane&-536870913;if(oe!==X.lane?(qe&oe)===oe:(Mr&oe)===oe){var W=X.revertLane;if(W===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),oe===fl&&(ie=!0);else if((Mr&W)===W){X=X.next,W===fl&&(ie=!0);continue}else oe={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(I=F=oe,E=y):F=F.next=oe,Le.lanes|=W,Ms|=W;oe=X.action,no&&c(y,oe),y=X.hasEagerState?X.eagerState:c(y,oe)}else W={lane:oe,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(I=F=W,E=y):F=F.next=W,Le.lanes|=oe,Ms|=oe;X=X.next}while(X!==null&&X!==a);if(F===null?E=y:F.next=I,!Gn(y,r.memoizedState)&&(Ht=!0,ie&&(c=ml,c!==null)))throw c;r.memoizedState=y,r.baseState=E,r.baseQueue=F,h.lastRenderedState=y}return p===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Qg(r){var a=kt(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,p=c.pending,y=a.memoizedState;if(p!==null){c.pending=null;var E=p=p.next;do y=r(y,E.action),E=E.next;while(E!==p);Gn(y,a.memoizedState)||(Ht=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,h]}function WT(r,a,c){var h=Le,p=kt(),y=Ke;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=a();var E=!Gn((ct||p).memoizedState,c);if(E&&(p.memoizedState=c,Ht=!0),p=p.queue,Zg(e1.bind(null,h,p,r),[r]),p.getSnapshot!==a||E||qt!==null&&qt.memoizedState.tag&1){if(h.flags|=2048,bl(9,{destroy:void 0},JT.bind(null,h,p,c,a),null),dt===null)throw Error(i(349));y||(Mr&127)!==0||ZT(h,a,c)}return c}function ZT(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=Le.updateQueue,a===null?(a=of(),Le.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function JT(r,a,c,h){a.value=c,a.getSnapshot=h,t1(a)&&n1(r)}function e1(r,a,c){return c(function(){t1(a)&&n1(r)})}function t1(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!Gn(r,c)}catch{return!0}}function n1(r){var a=Ka(r,2);a!==null&&Ln(a,r,2)}function Xg(r){var a=In();if(typeof r=="function"){var c=r;if(r=c(),no){ni(!0);try{c()}finally{ni(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:r},a}function i1(r,a,c,h){return r.baseState=c,Yg(r,ct,typeof h=="function"?h:Or)}function _k(r,a,c,h,p){if(df(r))throw Error(i(485));if(r=a.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};H.T!==null?c(!0):y.isTransition=!1,h(y),c=a.pending,c===null?(y.next=a.pending=y,r1(a,y)):(y.next=c.next,a.pending=c.next=y)}}function r1(r,a){var c=a.action,h=a.payload,p=r.state;if(a.isTransition){var y=H.T,E={};H.T=E;try{var I=c(p,h),F=H.S;F!==null&&F(E,I),s1(r,a,I)}catch(X){Wg(r,a,X)}finally{y!==null&&E.types!==null&&(y.types=E.types),H.T=y}}else try{y=c(p,h),s1(r,a,y)}catch(X){Wg(r,a,X)}}function s1(r,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){a1(r,a,h)},function(h){return Wg(r,a,h)}):a1(r,a,c)}function a1(r,a,c){a.status="fulfilled",a.value=c,o1(a),r.state=c,a=r.pending,a!==null&&(c=a.next,c===a?r.pending=null:(c=c.next,a.next=c,r1(r,c)))}function Wg(r,a,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=c,o1(a),a=a.next;while(a!==h)}r.action=null}function o1(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function l1(r,a){return a}function c1(r,a){if(Ke){var c=dt.formState;if(c!==null){e:{var h=Le;if(Ke){if(pt){t:{for(var p=pt,y=hi;p.nodeType!==8;){if(!y){p=null;break t}if(p=fi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){pt=fi(p.nextSibling),h=p.data==="F!";break e}}As(h)}h=!1}h&&(a=c[0])}}return c=In(),c.memoizedState=c.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l1,lastRenderedState:a},c.queue=h,c=R1.bind(null,Le,h),h.dispatch=c,h=Xg(!1),y=iy.bind(null,Le,!1,h.queue),h=In(),p={state:a,dispatch:null,action:r,pending:null},h.queue=p,c=_k.bind(null,Le,p,y,c),p.dispatch=c,h.memoizedState=r,[a,c,!1]}function u1(r){var a=kt();return h1(a,ct,r)}function h1(r,a,c){if(a=Yg(r,a,l1)[0],r=cf(Or)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Tu(a)}catch(E){throw E===pl?Zd:E}else h=a;a=kt();var p=a.queue,y=p.dispatch;return c!==a.memoizedState&&(Le.flags|=2048,bl(9,{destroy:void 0},bk.bind(null,p,c),null)),[h,y,r]}function bk(r,a){r.action=a}function d1(r){var a=kt(),c=ct;if(c!==null)return h1(a,c,r);kt(),a=a.memoizedState,c=kt();var h=c.queue.dispatch;return c.memoizedState=r,[a,h,!1]}function bl(r,a,c,h){return r={tag:r,create:c,deps:h,inst:a,next:null},a=Le.updateQueue,a===null&&(a=of(),Le.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,a.lastEffect=r),r}function f1(){return kt().memoizedState}function uf(r,a,c,h){var p=In();Le.flags|=r,p.memoizedState=bl(1|a,{destroy:void 0},c,h===void 0?null:h)}function hf(r,a,c,h){var p=kt();h=h===void 0?null:h;var y=p.memoizedState.inst;ct!==null&&h!==null&&Fg(h,ct.memoizedState.deps)?p.memoizedState=bl(a,y,c,h):(Le.flags|=r,p.memoizedState=bl(1|a,y,c,h))}function m1(r,a){uf(8390656,8,r,a)}function Zg(r,a){hf(2048,8,r,a)}function Tk(r){Le.flags|=4;var a=Le.updateQueue;if(a===null)a=of(),Le.updateQueue=a,a.events=[r];else{var c=a.events;c===null?a.events=[r]:c.push(r)}}function p1(r){var a=kt().memoizedState;return Tk({ref:a,nextImpl:r}),function(){if((tt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function g1(r,a){return hf(4,2,r,a)}function y1(r,a){return hf(4,4,r,a)}function v1(r,a){if(typeof a=="function"){r=r();var c=a(r);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function _1(r,a,c){c=c!=null?c.concat([r]):null,hf(4,4,v1.bind(null,a,r),c)}function Jg(){}function b1(r,a){var c=kt();a=a===void 0?null:a;var h=c.memoizedState;return a!==null&&Fg(a,h[1])?h[0]:(c.memoizedState=[r,a],r)}function T1(r,a){var c=kt();a=a===void 0?null:a;var h=c.memoizedState;if(a!==null&&Fg(a,h[1]))return h[0];if(h=r(),no){ni(!0);try{r()}finally{ni(!1)}}return c.memoizedState=[h,a],h}function ey(r,a,c){return c===void 0||(Mr&1073741824)!==0&&(qe&261930)===0?r.memoizedState=a:(r.memoizedState=c,r=EE(),Le.lanes|=r,Ms|=r,c)}function E1(r,a,c,h){return Gn(c,a)?c:yl.current!==null?(r=ey(r,c,h),Gn(r,a)||(Ht=!0),r):(Mr&42)===0||(Mr&1073741824)!==0&&(qe&261930)===0?(Ht=!0,r.memoizedState=c):(r=EE(),Le.lanes|=r,Ms|=r,a)}function w1(r,a,c,h,p){var y=se.p;se.p=y!==0&&8>y?y:8;var E=H.T,I={};H.T=I,iy(r,!1,a,c);try{var F=p(),X=H.S;if(X!==null&&X(I,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ie=gk(F,h);Eu(r,a,ie,Wn(r))}else Eu(r,a,h,Wn(r))}catch(oe){Eu(r,a,{then:function(){},status:"rejected",reason:oe},Wn())}finally{se.p=y,E!==null&&I.types!==null&&(E.types=I.types),H.T=E}}function Ek(){}function ty(r,a,c,h){if(r.tag!==5)throw Error(i(476));var p=S1(r).queue;w1(r,p,a,he,c===null?Ek:function(){return x1(r),c(h)})}function S1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:he},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:c},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function x1(r){var a=S1(r);a.next===null&&(a=r.alternate.memoizedState),Eu(r,a.next.queue,{},Wn())}function ny(){return un(Uu)}function A1(){return kt().memoizedState}function I1(){return kt().memoizedState}function wk(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var c=Wn();r=Cs(c);var h=Ds(a,r,c);h!==null&&(Ln(h,a,c),yu(h,a,c)),a={cache:Ng()},r.payload=a;return}a=a.return}}function Sk(r,a,c){var h=Wn();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},df(r)?C1(a,c):(c=bg(r,a,c,h),c!==null&&(Ln(c,r,h),D1(c,a,h)))}function R1(r,a,c){var h=Wn();Eu(r,a,c,h)}function Eu(r,a,c,h){var p={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(df(r))C1(a,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var E=a.lastRenderedState,I=y(E,c);if(p.hasEagerState=!0,p.eagerState=I,Gn(I,E))return Gd(r,a,p,0),dt===null&&Hd(),!1}catch{}finally{}if(c=bg(r,a,p,h),c!==null)return Ln(c,r,h),D1(c,a,h),!0}return!1}function iy(r,a,c,h){if(h={lane:2,revertLane:My(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},df(r)){if(a)throw Error(i(479))}else a=bg(r,c,h,2),a!==null&&Ln(a,r,2)}function df(r){var a=r.alternate;return r===Le||a!==null&&a===Le}function C1(r,a){vl=sf=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function D1(r,a,c){if((c&4194048)!==0){var h=a.lanes;h&=r.pendingLanes,c|=h,a.lanes=c,Hc(r,c)}}var wu={readContext:un,use:lf,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};wu.useEffectEvent=xt;var N1={readContext:un,use:lf,useCallback:function(r,a){return In().memoizedState=[r,a===void 0?null:a],r},useContext:un,useEffect:m1,useImperativeHandle:function(r,a,c){c=c!=null?c.concat([r]):null,uf(4194308,4,v1.bind(null,a,r),c)},useLayoutEffect:function(r,a){return uf(4194308,4,r,a)},useInsertionEffect:function(r,a){uf(4,2,r,a)},useMemo:function(r,a){var c=In();a=a===void 0?null:a;var h=r();if(no){ni(!0);try{r()}finally{ni(!1)}}return c.memoizedState=[h,a],h},useReducer:function(r,a,c){var h=In();if(c!==void 0){var p=c(a);if(no){ni(!0);try{c(a)}finally{ni(!1)}}}else p=a;return h.memoizedState=h.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},h.queue=r,r=r.dispatch=Sk.bind(null,Le,r),[h.memoizedState,r]},useRef:function(r){var a=In();return r={current:r},a.memoizedState=r},useState:function(r){r=Xg(r);var a=r.queue,c=R1.bind(null,Le,a);return a.dispatch=c,[r.memoizedState,c]},useDebugValue:Jg,useDeferredValue:function(r,a){var c=In();return ey(c,r,a)},useTransition:function(){var r=Xg(!1);return r=w1.bind(null,Le,r.queue,!0,!1),In().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,c){var h=Le,p=In();if(Ke){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),dt===null)throw Error(i(349));(qe&127)!==0||ZT(h,a,c)}p.memoizedState=c;var y={value:c,getSnapshot:a};return p.queue=y,m1(e1.bind(null,h,y,r),[r]),h.flags|=2048,bl(9,{destroy:void 0},JT.bind(null,h,y,c,a),null),c},useId:function(){var r=In(),a=dt.identifierPrefix;if(Ke){var c=or,h=ar;c=(h&~(1<<32-Ct(h)-1)).toString(32)+c,a="_"+a+"R_"+c,c=af++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=yk++,a="_"+a+"r_"+c.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:ny,useFormState:c1,useActionState:c1,useOptimistic:function(r){var a=In();a.memoizedState=a.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=iy.bind(null,Le,!0,c),c.dispatch=a,[r,a]},useMemoCache:Kg,useCacheRefresh:function(){return In().memoizedState=wk.bind(null,Le)},useEffectEvent:function(r){var a=In(),c={impl:r};return a.memoizedState=c,function(){if((tt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},ry={readContext:un,use:lf,useCallback:b1,useContext:un,useEffect:Zg,useImperativeHandle:_1,useInsertionEffect:g1,useLayoutEffect:y1,useMemo:T1,useReducer:cf,useRef:f1,useState:function(){return cf(Or)},useDebugValue:Jg,useDeferredValue:function(r,a){var c=kt();return E1(c,ct.memoizedState,r,a)},useTransition:function(){var r=cf(Or)[0],a=kt().memoizedState;return[typeof r=="boolean"?r:Tu(r),a]},useSyncExternalStore:WT,useId:A1,useHostTransitionStatus:ny,useFormState:u1,useActionState:u1,useOptimistic:function(r,a){var c=kt();return i1(c,ct,r,a)},useMemoCache:Kg,useCacheRefresh:I1};ry.useEffectEvent=p1;var k1={readContext:un,use:lf,useCallback:b1,useContext:un,useEffect:Zg,useImperativeHandle:_1,useInsertionEffect:g1,useLayoutEffect:y1,useMemo:T1,useReducer:Qg,useRef:f1,useState:function(){return Qg(Or)},useDebugValue:Jg,useDeferredValue:function(r,a){var c=kt();return ct===null?ey(c,r,a):E1(c,ct.memoizedState,r,a)},useTransition:function(){var r=Qg(Or)[0],a=kt().memoizedState;return[typeof r=="boolean"?r:Tu(r),a]},useSyncExternalStore:WT,useId:A1,useHostTransitionStatus:ny,useFormState:d1,useActionState:d1,useOptimistic:function(r,a){var c=kt();return ct!==null?i1(c,ct,r,a):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Kg,useCacheRefresh:I1};k1.useEffectEvent=p1;function sy(r,a,c,h){a=r.memoizedState,c=c(h,a),c=c==null?a:v({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var ay={enqueueSetState:function(r,a,c){r=r._reactInternals;var h=Wn(),p=Cs(h);p.payload=a,c!=null&&(p.callback=c),a=Ds(r,p,h),a!==null&&(Ln(a,r,h),yu(a,r,h))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var h=Wn(),p=Cs(h);p.tag=1,p.payload=a,c!=null&&(p.callback=c),a=Ds(r,p,h),a!==null&&(Ln(a,r,h),yu(a,r,h))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=Wn(),h=Cs(c);h.tag=2,a!=null&&(h.callback=a),a=Ds(r,h,c),a!==null&&(Ln(a,r,c),yu(a,r,c))}};function V1(r,a,c,h,p,y,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,E):a.prototype&&a.prototype.isPureReactComponent?!cu(c,h)||!cu(p,y):!0}function P1(r,a,c,h){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,h),a.state!==r&&ay.enqueueReplaceState(a,a.state,null)}function io(r,a){var c=a;if("ref"in a){c={};for(var h in a)h!=="ref"&&(c[h]=a[h])}if(r=r.defaultProps){c===a&&(c=v({},c));for(var p in r)c[p]===void 0&&(c[p]=r[p])}return c}function M1(r){qd(r)}function O1(r){console.error(r)}function L1(r){qd(r)}function ff(r,a){try{var c=r.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function j1(r,a,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function oy(r,a,c){return c=Cs(c),c.tag=3,c.payload={element:null},c.callback=function(){ff(r,a)},c}function U1(r){return r=Cs(r),r.tag=3,r}function z1(r,a,c,h){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var y=h.value;r.payload=function(){return p(y)},r.callback=function(){j1(a,c,h)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){j1(a,c,h),typeof p!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var I=h.stack;this.componentDidCatch(h.value,{componentStack:I!==null?I:""})})}function xk(r,a,c,h,p){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=c.alternate,a!==null&&dl(a,c,p,!0),c=Kn.current,c!==null){switch(c.tag){case 31:case 13:return di===null?xf():c.alternate===null&&At===0&&(At=3),c.flags&=-257,c.flags|=65536,c.lanes=p,h===Jd?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([h]):a.add(h),ky(r,h,p)),!1;case 22:return c.flags|=65536,h===Jd?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([h]):c.add(h)),ky(r,h,p)),!1}throw Error(i(435,c.tag))}return ky(r,h,p),xf(),!1}if(Ke)return a=Kn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==Ag&&(r=Error(i(422),{cause:h}),du(li(r,c)))):(h!==Ag&&(a=Error(i(423),{cause:h}),du(li(a,c))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,h=li(h,c),p=oy(r.stateNode,h,p),Lg(r,p),At!==4&&(At=2)),!1;var y=Error(i(520),{cause:h});if(y=li(y,c),Nu===null?Nu=[y]:Nu.push(y),At!==4&&(At=2),a===null)return!0;h=li(h,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,r=p&-p,c.lanes|=r,r=oy(c.stateNode,h,r),Lg(c,r),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Os===null||!Os.has(y))))return c.flags|=65536,p&=-p,c.lanes|=p,p=U1(p),z1(p,r,c,h),Lg(c,p),!1}c=c.return}while(c!==null);return!1}var ly=Error(i(461)),Ht=!1;function hn(r,a,c,h){a.child=r===null?HT(a,null,c,h):to(a,r.child,c,h)}function B1(r,a,c,h,p){c=c.render;var y=a.ref;if("ref"in h){var E={};for(var I in h)I!=="ref"&&(E[I]=h[I])}else E=h;return Wa(a),h=qg(r,a,c,E,y,p),I=Hg(),r!==null&&!Ht?(Gg(r,a,p),Lr(r,a,p)):(Ke&&I&&Sg(a),a.flags|=1,hn(r,a,h,p),a.child)}function F1(r,a,c,h,p){if(r===null){var y=c.type;return typeof y=="function"&&!Tg(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,q1(r,a,y,h,p)):(r=Kd(c.type,null,h,a,a.mode,p),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!gy(r,p)){var E=y.memoizedProps;if(c=c.compare,c=c!==null?c:cu,c(E,h)&&r.ref===a.ref)return Lr(r,a,p)}return a.flags|=1,r=Nr(y,h),r.ref=a.ref,r.return=a,a.child=r}function q1(r,a,c,h,p){if(r!==null){var y=r.memoizedProps;if(cu(y,h)&&r.ref===a.ref)if(Ht=!1,a.pendingProps=h=y,gy(r,p))(r.flags&131072)!==0&&(Ht=!0);else return a.lanes=r.lanes,Lr(r,a,p)}return cy(r,a,c,h,p)}function H1(r,a,c,h){var p=h.children,y=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,r!==null){for(h=a.child=r.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~y}else h=0,a.child=null;return G1(r,a,y,c,h)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Wd(a,y!==null?y.cachePool:null),y!==null?KT(a,y):Ug(),YT(a);else return h=a.lanes=536870912,G1(r,a,y!==null?y.baseLanes|c:c,c,h)}else y!==null?(Wd(a,y.cachePool),KT(a,y),ks(),a.memoizedState=null):(r!==null&&Wd(a,null),Ug(),ks());return hn(r,a,p,c),a.child}function Su(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function G1(r,a,c,h,p){var y=Vg();return y=y===null?null:{parent:Ft._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},r!==null&&Wd(a,null),Ug(),YT(a),r!==null&&dl(r,a,h,!0),a.childLanes=p,null}function mf(r,a){return a=gf({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function $1(r,a,c){return to(a,r.child,null,c),r=mf(a,a.pendingProps),r.flags|=2,Yn(a),a.memoizedState=null,r}function Ak(r,a,c){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Ke){if(h.mode==="hidden")return r=mf(a,h),a.lanes=536870912,Su(null,r);if(Bg(a),(r=pt)?(r=rw(r,hi),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Ss!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},c=CT(r),c.return=a,a.child=c,cn=a,pt=null)):r=null,r===null)throw As(a);return a.lanes=536870912,null}return mf(a,h)}var y=r.memoizedState;if(y!==null){var E=y.dehydrated;if(Bg(a),p)if(a.flags&256)a.flags&=-257,a=$1(r,a,c);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(Ht||dl(r,a,c,!1),p=(c&r.childLanes)!==0,Ht||p){if(h=dt,h!==null&&(E=Gc(h,c),E!==0&&E!==y.retryLane))throw y.retryLane=E,Ka(r,E),Ln(h,r,E),ly;xf(),a=$1(r,a,c)}else r=y.treeContext,pt=fi(E.nextSibling),cn=a,Ke=!0,xs=null,hi=!1,r!==null&&kT(a,r),a=mf(a,h),a.flags|=4096;return a}return r=Nr(r.child,{mode:h.mode,children:h.children}),r.ref=a.ref,a.child=r,r.return=a,r}function pf(r,a){var c=a.ref;if(c===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(a.flags|=4194816)}}function cy(r,a,c,h,p){return Wa(a),c=qg(r,a,c,h,void 0,p),h=Hg(),r!==null&&!Ht?(Gg(r,a,p),Lr(r,a,p)):(Ke&&h&&Sg(a),a.flags|=1,hn(r,a,c,p),a.child)}function K1(r,a,c,h,p,y){return Wa(a),a.updateQueue=null,c=XT(a,h,c,p),QT(r),h=Hg(),r!==null&&!Ht?(Gg(r,a,y),Lr(r,a,y)):(Ke&&h&&Sg(a),a.flags|=1,hn(r,a,c,y),a.child)}function Y1(r,a,c,h,p){if(Wa(a),a.stateNode===null){var y=ll,E=c.contextType;typeof E=="object"&&E!==null&&(y=un(E)),y=new c(h,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ay,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=h,y.state=a.memoizedState,y.refs={},Mg(a),E=c.contextType,y.context=typeof E=="object"&&E!==null?un(E):ll,y.state=a.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(sy(a,c,E,h),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&ay.enqueueReplaceState(y,y.state,null),_u(a,h,y,p),vu(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(r===null){y=a.stateNode;var I=a.memoizedProps,F=io(c,I);y.props=F;var X=y.context,ie=c.contextType;E=ll,typeof ie=="object"&&ie!==null&&(E=un(ie));var oe=c.getDerivedStateFromProps;ie=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||X!==E)&&P1(a,y,h,E),Rs=!1;var W=a.memoizedState;y.state=W,_u(a,h,y,p),vu(),X=a.memoizedState,I||W!==X||Rs?(typeof oe=="function"&&(sy(a,c,oe,h),X=a.memoizedState),(F=Rs||V1(a,c,F,h,W,X,E))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=X),y.props=h,y.state=X,y.context=E,h=F):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{y=a.stateNode,Og(r,a),E=a.memoizedProps,ie=io(c,E),y.props=ie,oe=a.pendingProps,W=y.context,X=c.contextType,F=ll,typeof X=="object"&&X!==null&&(F=un(X)),I=c.getDerivedStateFromProps,(X=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==oe||W!==F)&&P1(a,y,h,F),Rs=!1,W=a.memoizedState,y.state=W,_u(a,h,y,p),vu();var ee=a.memoizedState;E!==oe||W!==ee||Rs||r!==null&&r.dependencies!==null&&Qd(r.dependencies)?(typeof I=="function"&&(sy(a,c,I,h),ee=a.memoizedState),(ie=Rs||V1(a,c,ie,h,W,ee,F)||r!==null&&r.dependencies!==null&&Qd(r.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,ee,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,ee,F)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ee),y.props=h,y.state=ee,y.context=F,h=ie):(typeof y.componentDidUpdate!="function"||E===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),h=!1)}return y=h,pf(r,a),h=(a.flags&128)!==0,y||h?(y=a.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&h?(a.child=to(a,r.child,null,p),a.child=to(a,null,c,p)):hn(r,a,c,p),a.memoizedState=y.state,r=a.child):r=Lr(r,a,p),r}function Q1(r,a,c,h){return Qa(),a.flags|=256,hn(r,a,c,h),a.child}var uy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hy(r){return{baseLanes:r,cachePool:jT()}}function dy(r,a,c){return r=r!==null?r.childLanes&~c:0,a&&(r|=Xn),r}function X1(r,a,c){var h=a.pendingProps,p=!1,y=(a.flags&128)!==0,E;if((E=y)||(E=r!==null&&r.memoizedState===null?!1:(Nt.current&2)!==0),E&&(p=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,r===null){if(Ke){if(p?Ns(a):ks(),(r=pt)?(r=rw(r,hi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Ss!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},c=CT(r),c.return=a,a.child=c,cn=a,pt=null)):r=null,r===null)throw As(a);return Yy(r)?a.lanes=32:a.lanes=536870912,null}var I=h.children;return h=h.fallback,p?(ks(),p=a.mode,I=gf({mode:"hidden",children:I},p),h=Ya(h,p,c,null),I.return=a,h.return=a,I.sibling=h,a.child=I,h=a.child,h.memoizedState=hy(c),h.childLanes=dy(r,E,c),a.memoizedState=uy,Su(null,h)):(Ns(a),fy(a,I))}var F=r.memoizedState;if(F!==null&&(I=F.dehydrated,I!==null)){if(y)a.flags&256?(Ns(a),a.flags&=-257,a=my(r,a,c)):a.memoizedState!==null?(ks(),a.child=r.child,a.flags|=128,a=null):(ks(),I=h.fallback,p=a.mode,h=gf({mode:"visible",children:h.children},p),I=Ya(I,p,c,null),I.flags|=2,h.return=a,I.return=a,h.sibling=I,a.child=h,to(a,r.child,null,c),h=a.child,h.memoizedState=hy(c),h.childLanes=dy(r,E,c),a.memoizedState=uy,a=Su(null,h));else if(Ns(a),Yy(I)){if(E=I.nextSibling&&I.nextSibling.dataset,E)var X=E.dgst;E=X,h=Error(i(419)),h.stack="",h.digest=E,du({value:h,source:null,stack:null}),a=my(r,a,c)}else if(Ht||dl(r,a,c,!1),E=(c&r.childLanes)!==0,Ht||E){if(E=dt,E!==null&&(h=Gc(E,c),h!==0&&h!==F.retryLane))throw F.retryLane=h,Ka(r,h),Ln(E,r,h),ly;Ky(I)||xf(),a=my(r,a,c)}else Ky(I)?(a.flags|=192,a.child=r.child,a=null):(r=F.treeContext,pt=fi(I.nextSibling),cn=a,Ke=!0,xs=null,hi=!1,r!==null&&kT(a,r),a=fy(a,h.children),a.flags|=4096);return a}return p?(ks(),I=h.fallback,p=a.mode,F=r.child,X=F.sibling,h=Nr(F,{mode:"hidden",children:h.children}),h.subtreeFlags=F.subtreeFlags&65011712,X!==null?I=Nr(X,I):(I=Ya(I,p,c,null),I.flags|=2),I.return=a,h.return=a,h.sibling=I,a.child=h,Su(null,h),h=a.child,I=r.child.memoizedState,I===null?I=hy(c):(p=I.cachePool,p!==null?(F=Ft._currentValue,p=p.parent!==F?{parent:F,pool:F}:p):p=jT(),I={baseLanes:I.baseLanes|c,cachePool:p}),h.memoizedState=I,h.childLanes=dy(r,E,c),a.memoizedState=uy,Su(r.child,h)):(Ns(a),c=r.child,r=c.sibling,c=Nr(c,{mode:"visible",children:h.children}),c.return=a,c.sibling=null,r!==null&&(E=a.deletions,E===null?(a.deletions=[r],a.flags|=16):E.push(r)),a.child=c,a.memoizedState=null,c)}function fy(r,a){return a=gf({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function gf(r,a){return r=$n(22,r,null,a),r.lanes=0,r}function my(r,a,c){return to(a,r.child,null,c),r=fy(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function W1(r,a,c){r.lanes|=a;var h=r.alternate;h!==null&&(h.lanes|=a),Cg(r.return,a,c)}function py(r,a,c,h,p,y){var E=r.memoizedState;E===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:p,treeForkCount:y}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=c,E.tailMode=p,E.treeForkCount=y)}function Z1(r,a,c){var h=a.pendingProps,p=h.revealOrder,y=h.tail;h=h.children;var E=Nt.current,I=(E&2)!==0;if(I?(E=E&1|2,a.flags|=128):E&=1,pe(Nt,E),hn(r,a,h,c),h=Ke?hu:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&W1(r,c,a);else if(r.tag===19)W1(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(c=a.child,p=null;c!==null;)r=c.alternate,r!==null&&rf(r)===null&&(p=c),c=c.sibling;c=p,c===null?(p=a.child,a.child=null):(p=c.sibling,c.sibling=null),py(a,!1,p,c,y,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,p=a.child,a.child=null;p!==null;){if(r=p.alternate,r!==null&&rf(r)===null){a.child=p;break}r=p.sibling,p.sibling=c,c=p,p=r}py(a,!0,c,null,y,h);break;case"together":py(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Lr(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),Ms|=a.lanes,(c&a.childLanes)===0)if(r!==null){if(dl(r,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,c=Nr(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=Nr(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function gy(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Qd(r)))}function Ik(r,a,c){switch(a.tag){case 3:Xt(a,a.stateNode.containerInfo),Is(a,Ft,r.memoizedState.cache),Qa();break;case 27:case 5:Ca(a);break;case 4:Xt(a,a.stateNode.containerInfo);break;case 10:Is(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Bg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Ns(a),a.flags|=128,null):(c&a.child.childLanes)!==0?X1(r,a,c):(Ns(a),r=Lr(r,a,c),r!==null?r.sibling:null);Ns(a);break;case 19:var p=(r.flags&128)!==0;if(h=(c&a.childLanes)!==0,h||(dl(r,a,c,!1),h=(c&a.childLanes)!==0),p){if(h)return Z1(r,a,c);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),pe(Nt,Nt.current),h)break;return null;case 22:return a.lanes=0,H1(r,a,c,a.pendingProps);case 24:Is(a,Ft,r.memoizedState.cache)}return Lr(r,a,c)}function J1(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps)Ht=!0;else{if(!gy(r,c)&&(a.flags&128)===0)return Ht=!1,Ik(r,a,c);Ht=(r.flags&131072)!==0}else Ht=!1,Ke&&(a.flags&1048576)!==0&&NT(a,hu,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(r=Ja(a.elementType),a.type=r,typeof r=="function")Tg(r)?(h=io(r,h),a.tag=1,a=Y1(null,a,r,h,c)):(a.tag=0,a=cy(null,a,r,h,c));else{if(r!=null){var p=r.$$typeof;if(p===$){a.tag=11,a=B1(null,a,r,h,c);break e}else if(p===x){a.tag=14,a=F1(null,a,r,h,c);break e}}throw a=Ce(r)||r,Error(i(306,a,""))}}return a;case 0:return cy(r,a,a.type,a.pendingProps,c);case 1:return h=a.type,p=io(h,a.pendingProps),Y1(r,a,h,p,c);case 3:e:{if(Xt(a,a.stateNode.containerInfo),r===null)throw Error(i(387));h=a.pendingProps;var y=a.memoizedState;p=y.element,Og(r,a),_u(a,h,null,c);var E=a.memoizedState;if(h=E.cache,Is(a,Ft,h),h!==y.cache&&Dg(a,[Ft],c,!0),vu(),h=E.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Q1(r,a,h,c);break e}else if(h!==p){p=li(Error(i(424)),a),du(p),a=Q1(r,a,h,c);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(pt=fi(r.firstChild),cn=a,Ke=!0,xs=null,hi=!0,c=HT(a,null,h,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Qa(),h===p){a=Lr(r,a,c);break e}hn(r,a,h,c)}a=a.child}return a;case 26:return pf(r,a),r===null?(c=uw(a.type,null,a.pendingProps,null))?a.memoizedState=c:Ke||(c=a.type,r=a.pendingProps,h=kf(je.current).createElement(c),h[Ut]=a,h[nn]=r,dn(h,c,r),zt(h),a.stateNode=h):a.memoizedState=uw(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Ca(a),r===null&&Ke&&(h=a.stateNode=ow(a.type,a.pendingProps,je.current),cn=a,hi=!0,p=pt,zs(a.type)?(Qy=p,pt=fi(h.firstChild)):pt=p),hn(r,a,a.pendingProps.children,c),pf(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Ke&&((p=h=pt)&&(h=iV(h,a.type,a.pendingProps,hi),h!==null?(a.stateNode=h,cn=a,pt=fi(h.firstChild),hi=!1,p=!0):p=!1),p||As(a)),Ca(a),p=a.type,y=a.pendingProps,E=r!==null?r.memoizedProps:null,h=y.children,Hy(p,y)?h=null:E!==null&&Hy(p,E)&&(a.flags|=32),a.memoizedState!==null&&(p=qg(r,a,vk,null,null,c),Uu._currentValue=p),pf(r,a),hn(r,a,h,c),a.child;case 6:return r===null&&Ke&&((r=c=pt)&&(c=rV(c,a.pendingProps,hi),c!==null?(a.stateNode=c,cn=a,pt=null,r=!0):r=!1),r||As(a)),null;case 13:return X1(r,a,c);case 4:return Xt(a,a.stateNode.containerInfo),h=a.pendingProps,r===null?a.child=to(a,null,h,c):hn(r,a,h,c),a.child;case 11:return B1(r,a,a.type,a.pendingProps,c);case 7:return hn(r,a,a.pendingProps,c),a.child;case 8:return hn(r,a,a.pendingProps.children,c),a.child;case 12:return hn(r,a,a.pendingProps.children,c),a.child;case 10:return h=a.pendingProps,Is(a,a.type,h.value),hn(r,a,h.children,c),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,Wa(a),p=un(p),h=h(p),a.flags|=1,hn(r,a,h,c),a.child;case 14:return F1(r,a,a.type,a.pendingProps,c);case 15:return q1(r,a,a.type,a.pendingProps,c);case 19:return Z1(r,a,c);case 31:return Ak(r,a,c);case 22:return H1(r,a,c,a.pendingProps);case 24:return Wa(a),h=un(Ft),r===null?(p=Vg(),p===null&&(p=dt,y=Ng(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=c),p=y),a.memoizedState={parent:h,cache:p},Mg(a),Is(a,Ft,p)):((r.lanes&c)!==0&&(Og(r,a),_u(a,null,null,c),vu()),p=r.memoizedState,y=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Is(a,Ft,h)):(h=y.cache,Is(a,Ft,h),h!==p.cache&&Dg(a,[Ft],c,!0))),hn(r,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function jr(r){r.flags|=4}function yy(r,a,c,h,p){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(AE())r.flags|=8192;else throw eo=Jd,Pg}else r.flags&=-16777217}function eE(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!pw(a))if(AE())r.flags|=8192;else throw eo=Jd,Pg}function yf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Ed():536870912,r.lanes|=a,Sl|=a)}function xu(r,a){if(!Ke)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function gt(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(a)for(var p=r.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=c,a}function Rk(r,a,c){var h=a.pendingProps;switch(xg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(a),null;case 1:return gt(a),null;case 3:return c=a.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Pr(Ft),yt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(hl(a)?jr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ig())),gt(a),null;case 26:var p=a.type,y=a.memoizedState;return r===null?(jr(a),y!==null?(gt(a),eE(a,y)):(gt(a),yy(a,p,null,h,c))):y?y!==r.memoizedState?(jr(a),gt(a),eE(a,y)):(gt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==h&&jr(a),gt(a),yy(a,p,r,h,c)),null;case 27:if(qo(a),c=je.current,p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==h&&jr(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return gt(a),null}r=ye.current,hl(a)?VT(a):(r=ow(p,h,c),a.stateNode=r,jr(a))}return gt(a),null;case 5:if(qo(a),p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==h&&jr(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return gt(a),null}if(y=ye.current,hl(a))VT(a);else{var E=kf(je.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?E.createElement("select",{is:h.is}):E.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?E.createElement(p,{is:h.is}):E.createElement(p)}}y[Ut]=a,y[nn]=h;e:for(E=a.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===a)break e;for(;E.sibling===null;){if(E.return===null||E.return===a)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}a.stateNode=y;e:switch(dn(y,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&jr(a)}}return gt(a),yy(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,c),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==h&&jr(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(r=je.current,hl(a)){if(r=a.stateNode,c=a.memoizedProps,h=null,p=cn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}r[Ut]=a,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||XE(r.nodeValue,c)),r||As(a,!0)}else r=kf(r).createTextNode(h),r[Ut]=a,a.stateNode=r}return gt(a),null;case 31:if(c=a.memoizedState,r===null||r.memoizedState!==null){if(h=hl(a),c!==null){if(r===null){if(!h)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Ut]=a}else Qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gt(a),r=!1}else c=Ig(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return a.flags&256?(Yn(a),a):(Yn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return gt(a),null;case 13:if(h=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=hl(a),h!==null&&h.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Ut]=a}else Qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gt(a),p=!1}else p=Ig(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Yn(a),a):(Yn(a),null)}return Yn(a),(a.flags&128)!==0?(a.lanes=c,a):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==p&&(h.flags|=2048)),c!==r&&c&&(a.child.flags|=8192),yf(a,a.updateQueue),gt(a),null);case 4:return yt(),r===null&&Uy(a.stateNode.containerInfo),gt(a),null;case 10:return Pr(a.type),gt(a),null;case 19:if(ne(Nt),h=a.memoizedState,h===null)return gt(a),null;if(p=(a.flags&128)!==0,y=h.rendering,y===null)if(p)xu(h,!1);else{if(At!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=rf(r),y!==null){for(a.flags|=128,xu(h,!1),r=y.updateQueue,a.updateQueue=r,yf(a,r),a.subtreeFlags=0,r=c,c=a.child;c!==null;)RT(c,r),c=c.sibling;return pe(Nt,Nt.current&1|2),Ke&&kr(a,h.treeForkCount),a.child}r=r.sibling}h.tail!==null&&xn()>Ef&&(a.flags|=128,p=!0,xu(h,!1),a.lanes=4194304)}else{if(!p)if(r=rf(y),r!==null){if(a.flags|=128,p=!0,r=r.updateQueue,a.updateQueue=r,yf(a,r),xu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!Ke)return gt(a),null}else 2*xn()-h.renderingStartTime>Ef&&c!==536870912&&(a.flags|=128,p=!0,xu(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(r=h.last,r!==null?r.sibling=y:a.child=y,h.last=y)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=xn(),r.sibling=null,c=Nt.current,pe(Nt,p?c&1|2:c&1),Ke&&kr(a,h.treeForkCount),r):(gt(a),null);case 22:case 23:return Yn(a),zg(),h=a.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(c&536870912)!==0&&(a.flags&128)===0&&(gt(a),a.subtreeFlags&6&&(a.flags|=8192)):gt(a),c=a.updateQueue,c!==null&&yf(a,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==c&&(a.flags|=2048),r!==null&&ne(Za),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Pr(Ft),gt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Ck(r,a){switch(xg(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Pr(Ft),yt(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return qo(a),null;case 31:if(a.memoizedState!==null){if(Yn(a),a.alternate===null)throw Error(i(340));Qa()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Yn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Qa()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return ne(Nt),null;case 4:return yt(),null;case 10:return Pr(a.type),null;case 22:case 23:return Yn(a),zg(),r!==null&&ne(Za),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Pr(Ft),null;case 25:return null;default:return null}}function tE(r,a){switch(xg(a),a.tag){case 3:Pr(Ft),yt();break;case 26:case 27:case 5:qo(a);break;case 4:yt();break;case 31:a.memoizedState!==null&&Yn(a);break;case 13:Yn(a);break;case 19:ne(Nt);break;case 10:Pr(a.type);break;case 22:case 23:Yn(a),zg(),r!==null&&ne(Za);break;case 24:Pr(Ft)}}function Au(r,a){try{var c=a.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var p=h.next;c=p;do{if((c.tag&r)===r){h=void 0;var y=c.create,E=c.inst;h=y(),E.destroy=h}c=c.next}while(c!==p)}}catch(I){st(a,a.return,I)}}function Vs(r,a,c){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var y=p.next;h=y;do{if((h.tag&r)===r){var E=h.inst,I=E.destroy;if(I!==void 0){E.destroy=void 0,p=a;var F=c,X=I;try{X()}catch(ie){st(p,F,ie)}}}h=h.next}while(h!==y)}}catch(ie){st(a,a.return,ie)}}function nE(r){var a=r.updateQueue;if(a!==null){var c=r.stateNode;try{$T(a,c)}catch(h){st(r,r.return,h)}}}function iE(r,a,c){c.props=io(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){st(r,a,h)}}function Iu(r,a){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(p){st(r,a,p)}}function lr(r,a){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(p){st(r,a,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){st(r,a,p)}else c.current=null}function rE(r){var a=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(p){st(r,r.return,p)}}function vy(r,a,c){try{var h=r.stateNode;Wk(h,r.type,c,a),h[nn]=a}catch(p){st(r,r.return,p)}}function sE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&zs(r.type)||r.tag===4}function _y(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||sE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&zs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function by(r,a,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(r),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Ri));else if(h!==4&&(h===27&&zs(r.type)&&(c=r.stateNode,a=null),r=r.child,r!==null))for(by(r,a,c),r=r.sibling;r!==null;)by(r,a,c),r=r.sibling}function vf(r,a,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(h!==4&&(h===27&&zs(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(vf(r,a,c),r=r.sibling;r!==null;)vf(r,a,c),r=r.sibling}function aE(r){var a=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);dn(a,h,c),a[Ut]=r,a[nn]=c}catch(y){st(r,r.return,y)}}var Ur=!1,Gt=!1,Ty=!1,oE=typeof WeakSet=="function"?WeakSet:Set,sn=null;function Dk(r,a){if(r=r.containerInfo,Fy=Uf,r=_T(r),mg(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var E=0,I=-1,F=-1,X=0,ie=0,oe=r,W=null;t:for(;;){for(var ee;oe!==c||p!==0&&oe.nodeType!==3||(I=E+p),oe!==y||h!==0&&oe.nodeType!==3||(F=E+h),oe.nodeType===3&&(E+=oe.nodeValue.length),(ee=oe.firstChild)!==null;)W=oe,oe=ee;for(;;){if(oe===r)break t;if(W===c&&++X===p&&(I=E),W===y&&++ie===h&&(F=E),(ee=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=ee}c=I===-1||F===-1?null:{start:I,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(qy={focusedElem:r,selectionRange:c},Uf=!1,sn=a;sn!==null;)if(a=sn,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,sn=r;else for(;sn!==null;){switch(a=sn,y=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)p=r[c],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,c=a,p=y.memoizedProps,y=y.memoizedState,h=c.stateNode;try{var _e=io(c.type,p);r=h.getSnapshotBeforeUpdate(_e,y),h.__reactInternalSnapshotBeforeUpdate=r}catch(Ie){st(c,c.return,Ie)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,c=r.nodeType,c===9)$y(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":$y(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,sn=r;break}sn=a.return}}function lE(r,a,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Br(r,c),h&4&&Au(5,c);break;case 1:if(Br(r,c),h&4)if(r=c.stateNode,a===null)try{r.componentDidMount()}catch(E){st(c,c.return,E)}else{var p=io(c.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(p,a,r.__reactInternalSnapshotBeforeUpdate)}catch(E){st(c,c.return,E)}}h&64&&nE(c),h&512&&Iu(c,c.return);break;case 3:if(Br(r,c),h&64&&(r=c.updateQueue,r!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{$T(r,a)}catch(E){st(c,c.return,E)}}break;case 27:a===null&&h&4&&aE(c);case 26:case 5:Br(r,c),a===null&&h&4&&rE(c),h&512&&Iu(c,c.return);break;case 12:Br(r,c);break;case 31:Br(r,c),h&4&&hE(r,c);break;case 13:Br(r,c),h&4&&dE(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=Uk.bind(null,c),sV(r,c))));break;case 22:if(h=c.memoizedState!==null||Ur,!h){a=a!==null&&a.memoizedState!==null||Gt,p=Ur;var y=Gt;Ur=h,(Gt=a)&&!y?Fr(r,c,(c.subtreeFlags&8772)!==0):Br(r,c),Ur=p,Gt=y}break;case 30:break;default:Br(r,c)}}function cE(r){var a=r.alternate;a!==null&&(r.alternate=null,cE(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Yo(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var _t=null,Vn=!1;function zr(r,a,c){for(c=c.child;c!==null;)uE(r,a,c),c=c.sibling}function uE(r,a,c){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Si,c)}catch{}switch(c.tag){case 26:Gt||lr(c,a),zr(r,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Gt||lr(c,a);var h=_t,p=Vn;zs(c.type)&&(_t=c.stateNode,Vn=!1),zr(r,a,c),Ou(c.stateNode),_t=h,Vn=p;break;case 5:Gt||lr(c,a);case 6:if(h=_t,p=Vn,_t=null,zr(r,a,c),_t=h,Vn=p,_t!==null)if(Vn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(c.stateNode)}catch(y){st(c,a,y)}else try{_t.removeChild(c.stateNode)}catch(y){st(c,a,y)}break;case 18:_t!==null&&(Vn?(r=_t,nw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),kl(r)):nw(_t,c.stateNode));break;case 4:h=_t,p=Vn,_t=c.stateNode.containerInfo,Vn=!0,zr(r,a,c),_t=h,Vn=p;break;case 0:case 11:case 14:case 15:Vs(2,c,a),Gt||Vs(4,c,a),zr(r,a,c);break;case 1:Gt||(lr(c,a),h=c.stateNode,typeof h.componentWillUnmount=="function"&&iE(c,a,h)),zr(r,a,c);break;case 21:zr(r,a,c);break;case 22:Gt=(h=Gt)||c.memoizedState!==null,zr(r,a,c),Gt=h;break;default:zr(r,a,c)}}function hE(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{kl(r)}catch(c){st(a,a.return,c)}}}function dE(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{kl(r)}catch(c){st(a,a.return,c)}}function Nk(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new oE),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new oE),a;default:throw Error(i(435,r.tag))}}function _f(r,a){var c=Nk(r);a.forEach(function(h){if(!c.has(h)){c.add(h);var p=zk.bind(null,r,h);h.then(p,p)}})}function Pn(r,a){var c=a.deletions;if(c!==null)for(var h=0;h<c.length;h++){var p=c[h],y=r,E=a,I=E;e:for(;I!==null;){switch(I.tag){case 27:if(zs(I.type)){_t=I.stateNode,Vn=!1;break e}break;case 5:_t=I.stateNode,Vn=!1;break e;case 3:case 4:_t=I.stateNode.containerInfo,Vn=!0;break e}I=I.return}if(_t===null)throw Error(i(160));uE(y,E,p),_t=null,Vn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)fE(a,r),a=a.sibling}var Pi=null;function fE(r,a){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Pn(a,r),Mn(r),h&4&&(Vs(3,r,r.return),Au(3,r),Vs(5,r,r.return));break;case 1:Pn(a,r),Mn(r),h&512&&(Gt||c===null||lr(c,c.return)),h&64&&Ur&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var p=Pi;if(Pn(a,r),Mn(r),h&512&&(Gt||c===null||lr(c,c.return)),h&4){var y=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Yi]||y[Ut]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(h),p.head.insertBefore(y,p.querySelector("head > title"))),dn(y,h,c),y[Ut]=r,zt(y),h=y;break e;case"link":var E=fw("link","href",p).get(h+(c.href||""));if(E){for(var I=0;I<E.length;I++)if(y=E[I],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(I,1);break t}}y=p.createElement(h),dn(y,h,c),p.head.appendChild(y);break;case"meta":if(E=fw("meta","content",p).get(h+(c.content||""))){for(I=0;I<E.length;I++)if(y=E[I],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(I,1);break t}}y=p.createElement(h),dn(y,h,c),p.head.appendChild(y);break;default:throw Error(i(468,h))}y[Ut]=r,zt(y),h=y}r.stateNode=h}else mw(p,r.type,r.stateNode);else r.stateNode=dw(p,h,r.memoizedProps);else y!==h?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,h===null?mw(p,r.type,r.stateNode):dw(p,h,r.memoizedProps)):h===null&&r.stateNode!==null&&vy(r,r.memoizedProps,c.memoizedProps)}break;case 27:Pn(a,r),Mn(r),h&512&&(Gt||c===null||lr(c,c.return)),c!==null&&h&4&&vy(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Pn(a,r),Mn(r),h&512&&(Gt||c===null||lr(c,c.return)),r.flags&32){p=r.stateNode;try{kn(p,"")}catch(_e){st(r,r.return,_e)}}h&4&&r.stateNode!=null&&(p=r.memoizedProps,vy(r,p,c!==null?c.memoizedProps:p)),h&1024&&(Ty=!0);break;case 6:if(Pn(a,r),Mn(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(_e){st(r,r.return,_e)}}break;case 3:if(Mf=null,p=Pi,Pi=Vf(a.containerInfo),Pn(a,r),Pi=p,Mn(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{kl(a.containerInfo)}catch(_e){st(r,r.return,_e)}Ty&&(Ty=!1,mE(r));break;case 4:h=Pi,Pi=Vf(r.stateNode.containerInfo),Pn(a,r),Mn(r),Pi=h;break;case 12:Pn(a,r),Mn(r);break;case 31:Pn(a,r),Mn(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,_f(r,h)));break;case 13:Pn(a,r),Mn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Tf=xn()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,_f(r,h)));break;case 22:p=r.memoizedState!==null;var F=c!==null&&c.memoizedState!==null,X=Ur,ie=Gt;if(Ur=X||p,Gt=ie||F,Pn(a,r),Gt=ie,Ur=X,Mn(r),h&8192)e:for(a=r.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(c===null||F||Ur||Gt||ro(r)),c=null,a=r;;){if(a.tag===5||a.tag===26){if(c===null){F=c=a;try{if(y=F.stateNode,p)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{I=F.stateNode;var oe=F.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;I.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(_e){st(F,F.return,_e)}}}else if(a.tag===6){if(c===null){F=a;try{F.stateNode.nodeValue=p?"":F.memoizedProps}catch(_e){st(F,F.return,_e)}}}else if(a.tag===18){if(c===null){F=a;try{var ee=F.stateNode;p?iw(ee,!0):iw(F.stateNode,!1)}catch(_e){st(F,F.return,_e)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,_f(r,c))));break;case 19:Pn(a,r),Mn(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,_f(r,h)));break;case 30:break;case 21:break;default:Pn(a,r),Mn(r)}}function Mn(r){var a=r.flags;if(a&2){try{for(var c,h=r.return;h!==null;){if(sE(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var p=c.stateNode,y=_y(r);vf(r,y,p);break;case 5:var E=c.stateNode;c.flags&32&&(kn(E,""),c.flags&=-33);var I=_y(r);vf(r,I,E);break;case 3:case 4:var F=c.stateNode.containerInfo,X=_y(r);by(r,X,F);break;default:throw Error(i(161))}}catch(ie){st(r,r.return,ie)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function mE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;mE(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Br(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)lE(r,a.alternate,a),a=a.sibling}function ro(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Vs(4,a,a.return),ro(a);break;case 1:lr(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&iE(a,a.return,c),ro(a);break;case 27:Ou(a.stateNode);case 26:case 5:lr(a,a.return),ro(a);break;case 22:a.memoizedState===null&&ro(a);break;case 30:ro(a);break;default:ro(a)}r=r.sibling}}function Fr(r,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=r,y=a,E=y.flags;switch(y.tag){case 0:case 11:case 15:Fr(p,y,c),Au(4,y);break;case 1:if(Fr(p,y,c),h=y,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){st(h,h.return,X)}if(h=y,p=h.updateQueue,p!==null){var I=h.stateNode;try{var F=p.shared.hiddenCallbacks;if(F!==null)for(p.shared.hiddenCallbacks=null,p=0;p<F.length;p++)GT(F[p],I)}catch(X){st(h,h.return,X)}}c&&E&64&&nE(y),Iu(y,y.return);break;case 27:aE(y);case 26:case 5:Fr(p,y,c),c&&h===null&&E&4&&rE(y),Iu(y,y.return);break;case 12:Fr(p,y,c);break;case 31:Fr(p,y,c),c&&E&4&&hE(p,y);break;case 13:Fr(p,y,c),c&&E&4&&dE(p,y);break;case 22:y.memoizedState===null&&Fr(p,y,c),Iu(y,y.return);break;case 30:break;default:Fr(p,y,c)}a=a.sibling}}function Ey(r,a){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&fu(c))}function wy(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&fu(r))}function Mi(r,a,c,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)pE(r,a,c,h),a=a.sibling}function pE(r,a,c,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(r,a,c,h),p&2048&&Au(9,a);break;case 1:Mi(r,a,c,h);break;case 3:Mi(r,a,c,h),p&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&fu(r)));break;case 12:if(p&2048){Mi(r,a,c,h),r=a.stateNode;try{var y=a.memoizedProps,E=y.id,I=y.onPostCommit;typeof I=="function"&&I(E,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(F){st(a,a.return,F)}}else Mi(r,a,c,h);break;case 31:Mi(r,a,c,h);break;case 13:Mi(r,a,c,h);break;case 23:break;case 22:y=a.stateNode,E=a.alternate,a.memoizedState!==null?y._visibility&2?Mi(r,a,c,h):Ru(r,a):y._visibility&2?Mi(r,a,c,h):(y._visibility|=2,Tl(r,a,c,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Ey(E,a);break;case 24:Mi(r,a,c,h),p&2048&&wy(a.alternate,a);break;default:Mi(r,a,c,h)}}function Tl(r,a,c,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=r,E=a,I=c,F=h,X=E.flags;switch(E.tag){case 0:case 11:case 15:Tl(y,E,I,F,p),Au(8,E);break;case 23:break;case 22:var ie=E.stateNode;E.memoizedState!==null?ie._visibility&2?Tl(y,E,I,F,p):Ru(y,E):(ie._visibility|=2,Tl(y,E,I,F,p)),p&&X&2048&&Ey(E.alternate,E);break;case 24:Tl(y,E,I,F,p),p&&X&2048&&wy(E.alternate,E);break;default:Tl(y,E,I,F,p)}a=a.sibling}}function Ru(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=r,h=a,p=h.flags;switch(h.tag){case 22:Ru(c,h),p&2048&&Ey(h.alternate,h);break;case 24:Ru(c,h),p&2048&&wy(h.alternate,h);break;default:Ru(c,h)}a=a.sibling}}var Cu=8192;function El(r,a,c){if(r.subtreeFlags&Cu)for(r=r.child;r!==null;)gE(r,a,c),r=r.sibling}function gE(r,a,c){switch(r.tag){case 26:El(r,a,c),r.flags&Cu&&r.memoizedState!==null&&yV(c,Pi,r.memoizedState,r.memoizedProps);break;case 5:El(r,a,c);break;case 3:case 4:var h=Pi;Pi=Vf(r.stateNode.containerInfo),El(r,a,c),Pi=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=Cu,Cu=16777216,El(r,a,c),Cu=h):El(r,a,c));break;default:El(r,a,c)}}function yE(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Du(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];sn=h,_E(h,r)}yE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)vE(r),r=r.sibling}function vE(r){switch(r.tag){case 0:case 11:case 15:Du(r),r.flags&2048&&Vs(9,r,r.return);break;case 3:Du(r);break;case 12:Du(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,bf(r)):Du(r);break;default:Du(r)}}function bf(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];sn=h,_E(h,r)}yE(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Vs(8,a,a.return),bf(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,bf(a));break;default:bf(a)}r=r.sibling}}function _E(r,a){for(;sn!==null;){var c=sn;switch(c.tag){case 0:case 11:case 15:Vs(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:fu(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,sn=h;else e:for(c=r;sn!==null;){h=sn;var p=h.sibling,y=h.return;if(cE(h),h===c){sn=null;break e}if(p!==null){p.return=y,sn=p;break e}sn=y}}}var kk={getCacheForType:function(r){var a=un(Ft),c=a.data.get(r);return c===void 0&&(c=r(),a.data.set(r,c)),c},cacheSignal:function(){return un(Ft).controller.signal}},Vk=typeof WeakMap=="function"?WeakMap:Map,tt=0,dt=null,Be=null,qe=0,rt=0,Qn=null,Ps=!1,wl=!1,Sy=!1,qr=0,At=0,Ms=0,so=0,xy=0,Xn=0,Sl=0,Nu=null,On=null,Ay=!1,Tf=0,bE=0,Ef=1/0,wf=null,Os=null,Zt=0,Ls=null,xl=null,Hr=0,Iy=0,Ry=null,TE=null,ku=0,Cy=null;function Wn(){return(tt&2)!==0&&qe!==0?qe&-qe:H.T!==null?My():wd()}function EE(){if(Xn===0)if((qe&536870912)===0||Ke){var r=ka;ka<<=1,(ka&3932160)===0&&(ka=262144),Xn=r}else Xn=536870912;return r=Kn.current,r!==null&&(r.flags|=32),Xn}function Ln(r,a,c){(r===dt&&(rt===2||rt===9)||r.cancelPendingCommit!==null)&&(Al(r,0),js(r,qe,Xn,!1)),Va(r,c),((tt&2)===0||r!==dt)&&(r===dt&&((tt&2)===0&&(so|=c),At===4&&js(r,qe,Xn,!1)),cr(r))}function wE(r,a,c){if((tt&6)!==0)throw Error(i(327));var h=!c&&(a&127)===0&&(a&r.expiredLanes)===0||xi(r,a),p=h?Ok(r,a):Ny(r,a,!0),y=h;do{if(p===0){wl&&!h&&js(r,a,0,!1);break}else{if(c=r.current.alternate,y&&!Pk(c)){p=Ny(r,a,!1),y=!1;continue}if(p===2){if(y=a,r.errorRecoveryDisabledLanes&y)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var I=r;p=Nu;var F=I.current.memoizedState.isDehydrated;if(F&&(Al(I,E).flags|=256),E=Ny(I,E,!1),E!==2){if(Sy&&!F){I.errorRecoveryDisabledLanes|=y,so|=y,p=4;break e}y=On,On=p,y!==null&&(On===null?On=y:On.push.apply(On,y))}p=E}if(y=!1,p!==2)continue}}if(p===1){Al(r,0),js(r,a,0,!0);break}e:{switch(h=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:js(h,a,Xn,!Ps);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=Tf+300-xn(),10<p)){if(js(h,a,Xn,!Ps),Gi(h,0,!0)!==0)break e;Hr=a,h.timeoutHandle=ew(SE.bind(null,h,c,On,wf,Ay,a,Xn,so,Sl,Ps,y,"Throttled",-0,0),p);break e}SE(h,c,On,wf,Ay,a,Xn,so,Sl,Ps,y,null,-0,0)}}break}while(!0);cr(r)}function SE(r,a,c,h,p,y,E,I,F,X,ie,oe,W,ee){if(r.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ri},gE(a,y,oe);var _e=(y&62914560)===y?Tf-xn():(y&4194048)===y?bE-xn():0;if(_e=vV(oe,_e),_e!==null){Hr=y,r.cancelPendingCommit=_e(kE.bind(null,r,a,y,c,h,p,E,I,F,ie,oe,null,W,ee)),js(r,y,E,!X);return}}kE(r,a,y,c,h,p,E,I,F)}function Pk(r){for(var a=r;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var p=c[h],y=p.getSnapshot;p=p.value;try{if(!Gn(y(),p))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function js(r,a,c,h){a&=~xy,a&=~so,r.suspendedLanes|=a,r.pingedLanes&=~a,h&&(r.warmLanes|=a),h=r.expirationTimes;for(var p=a;0<p;){var y=31-Ct(p),E=1<<y;h[y]=-1,p&=~E}c!==0&&Pa(r,c,a)}function Sf(){return(tt&6)===0?(Vu(0),!1):!0}function Dy(){if(Be!==null){if(rt===0)var r=Be.return;else r=Be,Vr=Xa=null,$g(r),gl=null,pu=0,r=Be;for(;r!==null;)tE(r.alternate,r),r=r.return;Be=null}}function Al(r,a){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,eV(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Hr=0,Dy(),dt=r,Be=c=Nr(r.current,null),qe=a,rt=0,Qn=null,Ps=!1,wl=xi(r,a),Sy=!1,Sl=Xn=xy=so=Ms=At=0,On=Nu=null,Ay=!1,(a&8)!==0&&(a|=a&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=a;0<h;){var p=31-Ct(h),y=1<<p;a|=r[p],h&=~y}return qr=a,Hd(),c}function xE(r,a){Le=null,H.H=wu,a===pl||a===Zd?(a=BT(),rt=3):a===Pg?(a=BT(),rt=4):rt=a===ly?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Qn=a,Be===null&&(At=1,ff(r,li(a,r.current)))}function AE(){var r=Kn.current;return r===null?!0:(qe&4194048)===qe?di===null:(qe&62914560)===qe||(qe&536870912)!==0?r===di:!1}function IE(){var r=H.H;return H.H=wu,r===null?wu:r}function RE(){var r=H.A;return H.A=kk,r}function xf(){At=4,Ps||(qe&4194048)!==qe&&Kn.current!==null||(wl=!0),(Ms&134217727)===0&&(so&134217727)===0||dt===null||js(dt,qe,Xn,!1)}function Ny(r,a,c){var h=tt;tt|=2;var p=IE(),y=RE();(dt!==r||qe!==a)&&(wf=null,Al(r,a)),a=!1;var E=At;e:do try{if(rt!==0&&Be!==null){var I=Be,F=Qn;switch(rt){case 8:Dy(),E=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(a=!0);var X=rt;if(rt=0,Qn=null,Il(r,I,F,X),c&&wl){E=0;break e}break;default:X=rt,rt=0,Qn=null,Il(r,I,F,X)}}Mk(),E=At;break}catch(ie){xE(r,ie)}while(!0);return a&&r.shellSuspendCounter++,Vr=Xa=null,tt=h,H.H=p,H.A=y,Be===null&&(dt=null,qe=0,Hd()),E}function Mk(){for(;Be!==null;)CE(Be)}function Ok(r,a){var c=tt;tt|=2;var h=IE(),p=RE();dt!==r||qe!==a?(wf=null,Ef=xn()+500,Al(r,a)):wl=xi(r,a);e:do try{if(rt!==0&&Be!==null){a=Be;var y=Qn;t:switch(rt){case 1:rt=0,Qn=null,Il(r,a,y,1);break;case 2:case 9:if(UT(y)){rt=0,Qn=null,DE(a);break}a=function(){rt!==2&&rt!==9||dt!==r||(rt=7),cr(r)},y.then(a,a);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:UT(y)?(rt=0,Qn=null,DE(a)):(rt=0,Qn=null,Il(r,a,y,7));break;case 5:var E=null;switch(Be.tag){case 26:E=Be.memoizedState;case 5:case 27:var I=Be;if(E?pw(E):I.stateNode.complete){rt=0,Qn=null;var F=I.sibling;if(F!==null)Be=F;else{var X=I.return;X!==null?(Be=X,Af(X)):Be=null}break t}}rt=0,Qn=null,Il(r,a,y,5);break;case 6:rt=0,Qn=null,Il(r,a,y,6);break;case 8:Dy(),At=6;break e;default:throw Error(i(462))}}Lk();break}catch(ie){xE(r,ie)}while(!0);return Vr=Xa=null,H.H=h,H.A=p,tt=c,Be!==null?0:(dt=null,qe=0,Hd(),At)}function Lk(){for(;Be!==null&&!og();)CE(Be)}function CE(r){var a=J1(r.alternate,r,qr);r.memoizedProps=r.pendingProps,a===null?Af(r):Be=a}function DE(r){var a=r,c=a.alternate;switch(a.tag){case 15:case 0:a=K1(c,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=K1(c,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:$g(a);default:tE(c,a),a=Be=RT(a,qr),a=J1(c,a,qr)}r.memoizedProps=r.pendingProps,a===null?Af(r):Be=a}function Il(r,a,c,h){Vr=Xa=null,$g(a),gl=null,pu=0;var p=a.return;try{if(xk(r,p,a,c,qe)){At=1,ff(r,li(c,r.current)),Be=null;return}}catch(y){if(p!==null)throw Be=p,y;At=1,ff(r,li(c,r.current)),Be=null;return}a.flags&32768?(Ke||h===1?r=!0:wl||(qe&536870912)!==0?r=!1:(Ps=r=!0,(h===2||h===9||h===3||h===6)&&(h=Kn.current,h!==null&&h.tag===13&&(h.flags|=16384))),NE(a,r)):Af(a)}function Af(r){var a=r;do{if((a.flags&32768)!==0){NE(a,Ps);return}r=a.return;var c=Rk(a.alternate,a,qr);if(c!==null){Be=c;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=r}while(a!==null);At===0&&(At=5)}function NE(r,a){do{var c=Ck(r.alternate,r);if(c!==null){c.flags&=32767,Be=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(r=r.sibling,r!==null)){Be=r;return}Be=r=c}while(r!==null);At=6,Be=null}function kE(r,a,c,h,p,y,E,I,F){r.cancelPendingCommit=null;do If();while(Zt!==0);if((tt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=_g,ug(r,c,y,E,I,F),r===dt&&(Be=dt=null,qe=0),xl=a,Ls=r,Hr=c,Iy=y,Ry=p,TE=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Bk(ms,function(){return LE(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,p=se.p,se.p=2,E=tt,tt|=4;try{Dk(r,a,c)}finally{tt=E,se.p=p,H.T=h}}Zt=1,VE(),PE(),ME()}}function VE(){if(Zt===1){Zt=0;var r=Ls,a=xl,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=H.T,H.T=null;var h=se.p;se.p=2;var p=tt;tt|=4;try{fE(a,r);var y=qy,E=_T(r.containerInfo),I=y.focusedElem,F=y.selectionRange;if(E!==I&&I&&I.ownerDocument&&vT(I.ownerDocument.documentElement,I)){if(F!==null&&mg(I)){var X=F.start,ie=F.end;if(ie===void 0&&(ie=X),"selectionStart"in I)I.selectionStart=X,I.selectionEnd=Math.min(ie,I.value.length);else{var oe=I.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var ee=W.getSelection(),_e=I.textContent.length,Ie=Math.min(F.start,_e),ht=F.end===void 0?Ie:Math.min(F.end,_e);!ee.extend&&Ie>ht&&(E=ht,ht=Ie,Ie=E);var G=yT(I,Ie),q=yT(I,ht);if(G&&q&&(ee.rangeCount!==1||ee.anchorNode!==G.node||ee.anchorOffset!==G.offset||ee.focusNode!==q.node||ee.focusOffset!==q.offset)){var Q=oe.createRange();Q.setStart(G.node,G.offset),ee.removeAllRanges(),Ie>ht?(ee.addRange(Q),ee.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),ee.addRange(Q))}}}}for(oe=[],ee=I;ee=ee.parentNode;)ee.nodeType===1&&oe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<oe.length;I++){var ae=oe[I];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Uf=!!Fy,qy=Fy=null}finally{tt=p,se.p=h,H.T=c}}r.current=a,Zt=2}}function PE(){if(Zt===2){Zt=0;var r=Ls,a=xl,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=H.T,H.T=null;var h=se.p;se.p=2;var p=tt;tt|=4;try{lE(r,a.alternate,a)}finally{tt=p,se.p=h,H.T=c}}Zt=3}}function ME(){if(Zt===4||Zt===3){Zt=0,gd();var r=Ls,a=xl,c=Hr,h=TE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Zt=5:(Zt=0,xl=Ls=null,OE(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Os=null),Ir(c),a=a.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Si,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=H.T,p=se.p,se.p=2,H.T=null;try{for(var y=r.onRecoverableError,E=0;E<h.length;E++){var I=h[E];y(I.value,{componentStack:I.stack})}}finally{H.T=a,se.p=p}}(Hr&3)!==0&&If(),cr(r),p=r.pendingLanes,(c&261930)!==0&&(p&42)!==0?r===Cy?ku++:(ku=0,Cy=r):ku=0,Vu(0)}}function OE(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,fu(a)))}function If(){return VE(),PE(),ME(),LE()}function LE(){if(Zt!==5)return!1;var r=Ls,a=Iy;Iy=0;var c=Ir(Hr),h=H.T,p=se.p;try{se.p=32>c?32:c,H.T=null,c=Ry,Ry=null;var y=Ls,E=Hr;if(Zt=0,xl=Ls=null,Hr=0,(tt&6)!==0)throw Error(i(331));var I=tt;if(tt|=4,vE(y.current),pE(y,y.current,E,c),tt=I,Vu(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Si,y)}catch{}return!0}finally{se.p=p,H.T=h,OE(r,a)}}function jE(r,a,c){a=li(c,a),a=oy(r.stateNode,a,2),r=Ds(r,a,2),r!==null&&(Va(r,2),cr(r))}function st(r,a,c){if(r.tag===3)jE(r,r,c);else for(;a!==null;){if(a.tag===3){jE(a,r,c);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Os===null||!Os.has(h))){r=li(c,r),c=U1(2),h=Ds(a,c,2),h!==null&&(z1(c,h,a,r),Va(h,2),cr(h));break}}a=a.return}}function ky(r,a,c){var h=r.pingCache;if(h===null){h=r.pingCache=new Vk;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(c)||(Sy=!0,p.add(c),r=jk.bind(null,r,a,c),a.then(r,r))}function jk(r,a,c){var h=r.pingCache;h!==null&&h.delete(a),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,dt===r&&(qe&c)===c&&(At===4||At===3&&(qe&62914560)===qe&&300>xn()-Tf?(tt&2)===0&&Al(r,0):xy|=c,Sl===qe&&(Sl=0)),cr(r)}function UE(r,a){a===0&&(a=Ed()),r=Ka(r,a),r!==null&&(Va(r,a),cr(r))}function Uk(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),UE(r,c)}function zk(r,a){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(c=p.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),UE(r,c)}function Bk(r,a){return Wt(r,a)}var Rf=null,Rl=null,Vy=!1,Cf=!1,Py=!1,Us=0;function cr(r){r!==Rl&&r.next===null&&(Rl===null?Rf=Rl=r:Rl=Rl.next=r),Cf=!0,Vy||(Vy=!0,qk())}function Vu(r,a){if(!Py&&Cf){Py=!0;do for(var c=!1,h=Rf;h!==null;){if(r!==0){var p=h.pendingLanes;if(p===0)var y=0;else{var E=h.suspendedLanes,I=h.pingedLanes;y=(1<<31-Ct(42|r)+1)-1,y&=p&~(E&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,qE(h,y))}else y=qe,y=Gi(h,h===dt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||xi(h,y)||(c=!0,qE(h,y));h=h.next}while(c);Py=!1}}function Fk(){zE()}function zE(){Cf=Vy=!1;var r=0;Us!==0&&Jk()&&(r=Us);for(var a=xn(),c=null,h=Rf;h!==null;){var p=h.next,y=BE(h,a);y===0?(h.next=null,c===null?Rf=p:c.next=p,p===null&&(Rl=c)):(c=h,(r!==0||(y&3)!==0)&&(Cf=!0)),h=p}Zt!==0&&Zt!==5||Vu(r),Us!==0&&(Us=0)}function BE(r,a){for(var c=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var E=31-Ct(y),I=1<<E,F=p[E];F===-1?((I&c)===0||(I&h)!==0)&&(p[E]=cg(I,a)):F<=a&&(r.expiredLanes|=I),y&=~I}if(a=dt,c=qe,c=Gi(r,r===a?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===a&&(rt===2||rt===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&fs(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||xi(r,c)){if(a=c&-c,a===r.callbackPriority)return a;switch(h!==null&&fs(h),Ir(c)){case 2:case 8:c=qc;break;case 32:c=ms;break;case 268435456:c=yd;break;default:c=ms}return h=FE.bind(null,r),c=Wt(c,h),r.callbackPriority=a,r.callbackNode=c,a}return h!==null&&h!==null&&fs(h),r.callbackPriority=2,r.callbackNode=null,2}function FE(r,a){if(Zt!==0&&Zt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(If()&&r.callbackNode!==c)return null;var h=qe;return h=Gi(r,r===dt?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(wE(r,h,a),BE(r,xn()),r.callbackNode!=null&&r.callbackNode===c?FE.bind(null,r):null)}function qE(r,a){if(If())return null;wE(r,a,!0)}function qk(){tV(function(){(tt&6)!==0?Wt(Fc,Fk):zE()})}function My(){if(Us===0){var r=fl;r===0&&(r=qi,qi<<=1,(qi&261888)===0&&(qi=256)),Us=r}return Us}function HE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Zo(""+r)}function GE(r,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,r.id&&c.setAttribute("form",r.id),a.parentNode.insertBefore(c,a),r=new FormData(r),c.parentNode.removeChild(c),r}function Hk(r,a,c,h,p){if(a==="submit"&&c&&c.stateNode===p){var y=HE((p[nn]||null).action),E=h.submitter;E&&(a=(a=E[nn]||null)?HE(a.formAction):E.getAttribute("formAction"),a!==null&&(y=a,E=null));var I=new nr("action","action",null,h,p);r.push({event:I,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Us!==0){var F=E?GE(p,E):new FormData(p);ty(c,{pending:!0,data:F,method:p.method,action:y},null,F)}}else typeof y=="function"&&(I.preventDefault(),F=E?GE(p,E):new FormData(p),ty(c,{pending:!0,data:F,method:p.method,action:y},y,F))},currentTarget:p}]})}}for(var Oy=0;Oy<vg.length;Oy++){var Ly=vg[Oy],Gk=Ly.toLowerCase(),$k=Ly[0].toUpperCase()+Ly.slice(1);Vi(Gk,"on"+$k)}Vi(ET,"onAnimationEnd"),Vi(wT,"onAnimationIteration"),Vi(ST,"onAnimationStart"),Vi("dblclick","onDoubleClick"),Vi("focusin","onFocus"),Vi("focusout","onBlur"),Vi(lk,"onTransitionRun"),Vi(ck,"onTransitionStart"),Vi(uk,"onTransitionCancel"),Vi(xT,"onTransitionEnd"),Zi("onMouseEnter",["mouseout","mouseover"]),Zi("onMouseLeave",["mouseout","mouseover"]),Zi("onPointerEnter",["pointerout","pointerover"]),Zi("onPointerLeave",["pointerout","pointerover"]),Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function $E(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],p=h.event;h=h.listeners;e:{var y=void 0;if(a)for(var E=h.length-1;0<=E;E--){var I=h[E],F=I.instance,X=I.currentTarget;if(I=I.listener,F!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=X;try{y(p)}catch(ie){qd(ie)}p.currentTarget=null,y=F}else for(E=0;E<h.length;E++){if(I=h[E],F=I.instance,X=I.currentTarget,I=I.listener,F!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=X;try{y(p)}catch(ie){qd(ie)}p.currentTarget=null,y=F}}}}function Fe(r,a){var c=a[Ko];c===void 0&&(c=a[Ko]=new Set);var h=r+"__bubble";c.has(h)||(KE(a,r,2,!1),c.add(h))}function jy(r,a,c){var h=0;a&&(h|=4),KE(c,r,h,a)}var Df="_reactListening"+Math.random().toString(36).slice(2);function Uy(r){if(!r[Df]){r[Df]=!0,$c.forEach(function(c){c!=="selectionchange"&&(Kk.has(c)||jy(c,!1,r),jy(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Df]||(a[Df]=!0,jy("selectionchange",!1,a))}}function KE(r,a,c,h){switch(Ew(a)){case 2:var p=TV;break;case 8:p=EV;break;default:p=e0}c=p.bind(null,a,c,r),p=void 0,!Ua||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(a,c,{capture:!0,passive:p}):r.addEventListener(a,c,!0):p!==void 0?r.addEventListener(a,c,{passive:p}):r.addEventListener(a,c,!1)}function zy(r,a,c,h,p){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var I=h.stateNode.containerInfo;if(I===p)break;if(E===4)for(E=h.return;E!==null;){var F=E.tag;if((F===3||F===4)&&E.stateNode.containerInfo===p)return;E=E.return}for(;I!==null;){if(E=Qi(I),E===null)return;if(F=E.tag,F===5||F===6||F===26||F===27){h=y=E;continue e}I=I.parentNode}}h=h.return}bs(function(){var X=y,ie=ri(c),oe=[];e:{var W=AT.get(r);if(W!==void 0){var ee=nr,_e=r;switch(r){case"keypress":if(Ba(c)===0)break e;case"keydown":case"keyup":ee=zd;break;case"focusin":_e="focus",ee=qa;break;case"focusout":_e="blur",ee=qa;break;case"beforeblur":case"afterblur":ee=qa;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=su;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Nd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=b;break;case ET:case wT:case ST:ee=Vd;break;case xT:ee=D;break;case"scroll":case"scrollend":ee=ru;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=Pd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Dr;break;case"toggle":case"beforetoggle":ee=Oe}var Ie=(a&4)!==0,ht=!Ie&&(r==="scroll"||r==="scrollend"),G=Ie?W!==null?W+"Capture":null:W;Ie=[];for(var q=X,Q;q!==null;){var ae=q;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||G===null||(ae=Ci(q,G),ae!=null&&Ie.push(Mu(q,ae,Q))),ht)break;q=q.return}0<Ie.length&&(W=new ee(W,_e,null,c,ie),oe.push({event:W,listeners:Ie}))}}if((a&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",ee=r==="mouseout"||r==="pointerout",W&&c!==tu&&(_e=c.relatedTarget||c.fromElement)&&(Qi(_e)||_e[Ki]))break e;if((ee||W)&&(W=ie.window===ie?ie:(W=ie.ownerDocument)?W.defaultView||W.parentWindow:window,ee?(_e=c.relatedTarget||c.toElement,ee=X,_e=_e?Qi(_e):null,_e!==null&&(ht=o(_e),Ie=_e.tag,_e!==ht||Ie!==5&&Ie!==27&&Ie!==6)&&(_e=null)):(ee=null,_e=X),ee!==_e)){if(Ie=su,ae="onMouseLeave",G="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ie=Dr,ae="onPointerLeave",G="onPointerEnter",q="pointer"),ht=ee==null?W:qn(ee),Q=_e==null?W:qn(_e),W=new Ie(ae,q+"leave",ee,c,ie),W.target=ht,W.relatedTarget=Q,ae=null,Qi(ie)===X&&(Ie=new Ie(G,q+"enter",_e,c,ie),Ie.target=Q,Ie.relatedTarget=ht,ae=Ie),ht=ae,ee&&_e)t:{for(Ie=Yk,G=ee,q=_e,Q=0,ae=G;ae;ae=Ie(ae))Q++;ae=0;for(var xe=q;xe;xe=Ie(xe))ae++;for(;0<Q-ae;)G=Ie(G),Q--;for(;0<ae-Q;)q=Ie(q),ae--;for(;Q--;){if(G===q||q!==null&&G===q.alternate){Ie=G;break t}G=Ie(G),q=Ie(q)}Ie=null}else Ie=null;ee!==null&&YE(oe,W,ee,Ie,!1),_e!==null&&ht!==null&&YE(oe,ht,_e,Ie,!0)}}e:{if(W=X?qn(X):window,ee=W.nodeName&&W.nodeName.toLowerCase(),ee==="select"||ee==="input"&&W.type==="file")var Ze=hT;else if(cT(W))if(dT)Ze=sk;else{Ze=ik;var Ee=nk}else ee=W.nodeName,!ee||ee.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&Wo(X.elementType)&&(Ze=hT):Ze=rk;if(Ze&&(Ze=Ze(r,X))){uT(oe,Ze,c,ie);break e}Ee&&Ee(r,W,X),r==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&Zc(W,"number",W.value)}switch(Ee=X?qn(X):window,r){case"focusin":(cT(Ee)||Ee.contentEditable==="true")&&(sl=Ee,pg=X,uu=null);break;case"focusout":uu=pg=sl=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,bT(oe,c,ie);break;case"selectionchange":if(ok)break;case"keydown":case"keyup":bT(oe,c,ie)}var Ue;if(et)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else rl?Ha(r,c)&&(He="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(He="onCompositionStart");He&&(sr&&c.locale!=="ko"&&(rl||He!=="onCompositionStart"?He==="onCompositionEnd"&&rl&&(Ue=iu()):(tr=ie,nu="value"in tr?tr.value:tr.textContent,rl=!0)),Ee=Nf(X,He),0<Ee.length&&(He=new rr(He,r,null,c,ie),oe.push({event:He,listeners:Ee}),Ue?He.data=Ue:(Ue=il(c),Ue!==null&&(He.data=Ue)))),(Ue=ai?ZN(r,c):JN(r,c))&&(He=Nf(X,"onBeforeInput"),0<He.length&&(Ee=new rr("onBeforeInput","beforeinput",null,c,ie),oe.push({event:Ee,listeners:He}),Ee.data=Ue)),Hk(oe,r,X,c,ie)}$E(oe,a)})}function Mu(r,a,c){return{instance:r,listener:a,currentTarget:c}}function Nf(r,a){for(var c=a+"Capture",h=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Ci(r,c),p!=null&&h.unshift(Mu(r,p,y)),p=Ci(r,a),p!=null&&h.push(Mu(r,p,y))),r.tag===3)return h;r=r.return}return[]}function Yk(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function YE(r,a,c,h,p){for(var y=a._reactName,E=[];c!==null&&c!==h;){var I=c,F=I.alternate,X=I.stateNode;if(I=I.tag,F!==null&&F===h)break;I!==5&&I!==26&&I!==27||X===null||(F=X,p?(X=Ci(c,y),X!=null&&E.unshift(Mu(c,X,F))):p||(X=Ci(c,y),X!=null&&E.push(Mu(c,X,F)))),c=c.return}E.length!==0&&r.push({event:a,listeners:E})}var Qk=/\r\n?/g,Xk=/\u0000|\uFFFD/g;function QE(r){return(typeof r=="string"?r:""+r).replace(Qk,`
`).replace(Xk,"")}function XE(r,a){return a=QE(a),QE(r)===a}function ut(r,a,c,h,p,y){switch(c){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||kn(r,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&kn(r,""+h);break;case"className":Hn(r,"class",h);break;case"tabIndex":Hn(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(r,c,h);break;case"style":eu(r,h,y);break;case"data":if(a!=="object"){Hn(r,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=Zo(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&ut(r,a,"name",p.name,p,null),ut(r,a,"formEncType",p.formEncType,p,null),ut(r,a,"formMethod",p.formMethod,p,null),ut(r,a,"formTarget",p.formTarget,p,null)):(ut(r,a,"encType",p.encType,p,null),ut(r,a,"method",p.method,p,null),ut(r,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=Zo(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Ri);break;case"onScroll":h!=null&&Fe("scroll",r);break;case"onScrollEnd":h!=null&&Fe("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=Zo(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":Fe("beforetoggle",r),Fe("toggle",r),Qo(r,"popover",h);break;case"xlinkActuate":Bt(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Bt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Bt(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Bt(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Bt(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Bt(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Bt(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Bt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Bt(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Qo(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Dd.get(c)||c,Qo(r,c,h))}}function By(r,a,c,h,p,y){switch(c){case"style":eu(r,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?kn(r,h):(typeof h=="number"||typeof h=="bigint")&&kn(r,""+h);break;case"onScroll":h!=null&&Fe("scroll",r);break;case"onScrollEnd":h!=null&&Fe("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),a=c.slice(2,p?c.length-7:void 0),y=r[nn]||null,y=y!=null?y[c]:null,typeof y=="function"&&r.removeEventListener(a,y,p),typeof h=="function")){typeof y!="function"&&y!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(a,h,p);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):Qo(r,c,h)}}}function dn(r,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",r),Fe("load",r);var h=!1,p=!1,y;for(y in c)if(c.hasOwnProperty(y)){var E=c[y];if(E!=null)switch(y){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ut(r,a,y,E,c,null)}}p&&ut(r,a,"srcSet",c.srcSet,c,null),h&&ut(r,a,"src",c.src,c,null);return;case"input":Fe("invalid",r);var I=y=E=p=null,F=null,X=null;for(h in c)if(c.hasOwnProperty(h)){var ie=c[h];if(ie!=null)switch(h){case"name":p=ie;break;case"type":E=ie;break;case"checked":F=ie;break;case"defaultChecked":X=ie;break;case"value":y=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ut(r,a,h,ie,c,null)}}Id(r,y,I,F,X,E,p,!1);return;case"select":Fe("invalid",r),h=E=y=null;for(p in c)if(c.hasOwnProperty(p)&&(I=c[p],I!=null))switch(p){case"value":y=I;break;case"defaultValue":E=I;break;case"multiple":h=I;default:ut(r,a,p,I,c,null)}a=y,c=E,r.multiple=!!h,a!=null?gs(r,!!h,a,!1):c!=null&&gs(r,!!h,c,!0);return;case"textarea":Fe("invalid",r),y=p=h=null;for(E in c)if(c.hasOwnProperty(E)&&(I=c[E],I!=null))switch(E){case"value":h=I;break;case"defaultValue":p=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:ut(r,a,E,I,c,null)}ys(r,h,p,y);return;case"option":for(F in c)if(c.hasOwnProperty(F)&&(h=c[F],h!=null))switch(F){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ut(r,a,F,h,c,null)}return;case"dialog":Fe("beforetoggle",r),Fe("toggle",r),Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":Fe("load",r);break;case"video":case"audio":for(h=0;h<Pu.length;h++)Fe(Pu[h],r);break;case"image":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"embed":case"source":case"link":Fe("error",r),Fe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in c)if(c.hasOwnProperty(X)&&(h=c[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ut(r,a,X,h,c,null)}return;default:if(Wo(a)){for(ie in c)c.hasOwnProperty(ie)&&(h=c[ie],h!==void 0&&By(r,a,ie,h,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(h=c[I],h!=null&&ut(r,a,I,h,c,null))}function Wk(r,a,c,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,E=null,I=null,F=null,X=null,ie=null;for(ee in c){var oe=c[ee];if(c.hasOwnProperty(ee)&&oe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":F=oe;default:h.hasOwnProperty(ee)||ut(r,a,ee,null,h,oe)}}for(var W in h){var ee=h[W];if(oe=c[W],h.hasOwnProperty(W)&&(ee!=null||oe!=null))switch(W){case"type":y=ee;break;case"name":p=ee;break;case"checked":X=ee;break;case"defaultChecked":ie=ee;break;case"value":E=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,a));break;default:ee!==oe&&ut(r,a,W,ee,h,oe)}}Xo(r,E,I,F,X,ie,y,p);return;case"select":ee=E=I=W=null;for(y in c)if(F=c[y],c.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":ee=F;default:h.hasOwnProperty(y)||ut(r,a,y,null,h,F)}for(p in h)if(y=h[p],F=c[p],h.hasOwnProperty(p)&&(y!=null||F!=null))switch(p){case"value":W=y;break;case"defaultValue":I=y;break;case"multiple":E=y;default:y!==F&&ut(r,a,p,y,h,F)}a=I,c=E,h=ee,W!=null?gs(r,!!c,W,!1):!!h!=!!c&&(a!=null?gs(r,!!c,a,!0):gs(r,!!c,c?[]:"",!1));return;case"textarea":ee=W=null;for(I in c)if(p=c[I],c.hasOwnProperty(I)&&p!=null&&!h.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ut(r,a,I,null,h,p)}for(E in h)if(p=h[E],y=c[E],h.hasOwnProperty(E)&&(p!=null||y!=null))switch(E){case"value":W=p;break;case"defaultValue":ee=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ut(r,a,E,p,h,y)}Rd(r,W,ee);return;case"option":for(var _e in c)if(W=c[_e],c.hasOwnProperty(_e)&&W!=null&&!h.hasOwnProperty(_e))switch(_e){case"selected":r.selected=!1;break;default:ut(r,a,_e,null,h,W)}for(F in h)if(W=h[F],ee=c[F],h.hasOwnProperty(F)&&W!==ee&&(W!=null||ee!=null))switch(F){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ut(r,a,F,W,h,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in c)W=c[Ie],c.hasOwnProperty(Ie)&&W!=null&&!h.hasOwnProperty(Ie)&&ut(r,a,Ie,null,h,W);for(X in h)if(W=h[X],ee=c[X],h.hasOwnProperty(X)&&W!==ee&&(W!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,a));break;default:ut(r,a,X,W,h,ee)}return;default:if(Wo(a)){for(var ht in c)W=c[ht],c.hasOwnProperty(ht)&&W!==void 0&&!h.hasOwnProperty(ht)&&By(r,a,ht,void 0,h,W);for(ie in h)W=h[ie],ee=c[ie],!h.hasOwnProperty(ie)||W===ee||W===void 0&&ee===void 0||By(r,a,ie,W,h,ee);return}}for(var G in c)W=c[G],c.hasOwnProperty(G)&&W!=null&&!h.hasOwnProperty(G)&&ut(r,a,G,null,h,W);for(oe in h)W=h[oe],ee=c[oe],!h.hasOwnProperty(oe)||W===ee||W==null&&ee==null||ut(r,a,oe,W,h,ee)}function WE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Zk(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var p=c[h],y=p.transferSize,E=p.initiatorType,I=p.duration;if(y&&I&&WE(E)){for(E=0,I=p.responseEnd,h+=1;h<c.length;h++){var F=c[h],X=F.startTime;if(X>I)break;var ie=F.transferSize,oe=F.initiatorType;ie&&WE(oe)&&(F=F.responseEnd,E+=ie*(F<I?1:(I-X)/(F-X)))}if(--h,a+=8*(y+E)/(p.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Fy=null,qy=null;function kf(r){return r.nodeType===9?r:r.ownerDocument}function ZE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function JE(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Hy(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Gy=null;function Jk(){var r=window.event;return r&&r.type==="popstate"?r===Gy?!1:(Gy=r,!0):(Gy=null,!1)}var ew=typeof setTimeout=="function"?setTimeout:void 0,eV=typeof clearTimeout=="function"?clearTimeout:void 0,tw=typeof Promise=="function"?Promise:void 0,tV=typeof queueMicrotask=="function"?queueMicrotask:typeof tw<"u"?function(r){return tw.resolve(null).then(r).catch(nV)}:ew;function nV(r){setTimeout(function(){throw r})}function zs(r){return r==="head"}function nw(r,a){var c=a,h=0;do{var p=c.nextSibling;if(r.removeChild(c),p&&p.nodeType===8)if(c=p.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(p),kl(a);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Ou(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,Ou(c);for(var y=c.firstChild;y;){var E=y.nextSibling,I=y.nodeName;y[Yi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=E}}else c==="body"&&Ou(r.ownerDocument.body);c=p}while(c);kl(a)}function iw(r,a){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function $y(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":$y(c),Yo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function iV(r,a,c,h){for(;r.nodeType===1;){var p=c;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[Yi])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=fi(r.nextSibling),r===null)break}return null}function rV(r,a,c){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=fi(r.nextSibling),r===null))return null;return r}function rw(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=fi(r.nextSibling),r===null))return null;return r}function Ky(r){return r.data==="$?"||r.data==="$~"}function Yy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function sV(r,a){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||c.readyState!=="loading")a();else{var h=function(){a(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function fi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Qy=null;function sw(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(a===0)return fi(r.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}r=r.nextSibling}return null}function aw(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return r;a--}else c!=="/$"&&c!=="/&"||a++}r=r.previousSibling}return null}function ow(r,a,c){switch(a=kf(c),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ou(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Yo(r)}var mi=new Map,lw=new Set;function Vf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Gr=se.d;se.d={f:aV,r:oV,D:lV,C:cV,L:uV,m:hV,X:fV,S:dV,M:mV};function aV(){var r=Gr.f(),a=Sf();return r||a}function oV(r){var a=ii(r);a!==null&&a.tag===5&&a.type==="form"?x1(a):Gr.r(r)}var Cl=typeof document>"u"?null:document;function cw(r,a,c){var h=Cl;if(h&&typeof a=="string"&&a){var p=Nn(a);p='link[rel="'+r+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),lw.has(p)||(lw.add(p),r={rel:r,crossOrigin:c,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),dn(a,"link",r),zt(a),h.head.appendChild(a)))}}function lV(r){Gr.D(r),cw("dns-prefetch",r,null)}function cV(r,a){Gr.C(r,a),cw("preconnect",r,a)}function uV(r,a,c){Gr.L(r,a,c);var h=Cl;if(h&&r&&a){var p='link[rel="preload"][as="'+Nn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+Nn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+Nn(c.imageSizes)+'"]')):p+='[href="'+Nn(r)+'"]';var y=p;switch(a){case"style":y=Dl(r);break;case"script":y=Nl(r)}mi.has(y)||(r=v({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:r,as:a},c),mi.set(y,r),h.querySelector(p)!==null||a==="style"&&h.querySelector(Lu(y))||a==="script"&&h.querySelector(ju(y))||(a=h.createElement("link"),dn(a,"link",r),zt(a),h.head.appendChild(a)))}}function hV(r,a){Gr.m(r,a);var c=Cl;if(c&&r){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Nn(h)+'"][href="'+Nn(r)+'"]',y=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Nl(r)}if(!mi.has(y)&&(r=v({rel:"modulepreload",href:r},a),mi.set(y,r),c.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ju(y)))return}h=c.createElement("link"),dn(h,"link",r),zt(h),c.head.appendChild(h)}}}function dV(r,a,c){Gr.S(r,a,c);var h=Cl;if(h&&r){var p=Xi(h).hoistableStyles,y=Dl(r);a=a||"default";var E=p.get(y);if(!E){var I={loading:0,preload:null};if(E=h.querySelector(Lu(y)))I.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},c),(c=mi.get(y))&&Xy(r,c);var F=E=h.createElement("link");zt(F),dn(F,"link",r),F._p=new Promise(function(X,ie){F.onload=X,F.onerror=ie}),F.addEventListener("load",function(){I.loading|=1}),F.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Pf(E,a,h)}E={type:"stylesheet",instance:E,count:1,state:I},p.set(y,E)}}}function fV(r,a){Gr.X(r,a);var c=Cl;if(c&&r){var h=Xi(c).hoistableScripts,p=Nl(r),y=h.get(p);y||(y=c.querySelector(ju(p)),y||(r=v({src:r,async:!0},a),(a=mi.get(p))&&Wy(r,a),y=c.createElement("script"),zt(y),dn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(p,y))}}function mV(r,a){Gr.M(r,a);var c=Cl;if(c&&r){var h=Xi(c).hoistableScripts,p=Nl(r),y=h.get(p);y||(y=c.querySelector(ju(p)),y||(r=v({src:r,async:!0,type:"module"},a),(a=mi.get(p))&&Wy(r,a),y=c.createElement("script"),zt(y),dn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(p,y))}}function uw(r,a,c,h){var p=(p=je.current)?Vf(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Dl(c.href),c=Xi(p).hoistableStyles,h=c.get(a),h||(h={type:"style",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Dl(c.href);var y=Xi(p).hoistableStyles,E=y.get(r);if(E||(p=p.ownerDocument||p,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,E),(y=p.querySelector(Lu(r)))&&!y._p&&(E.instance=y,E.state.loading=5),mi.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},mi.set(r,c),y||pV(p,r,c,E.state))),a&&h===null)throw Error(i(528,""));return E}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Nl(c),c=Xi(p).hoistableScripts,h=c.get(a),h||(h={type:"script",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Dl(r){return'href="'+Nn(r)+'"'}function Lu(r){return'link[rel="stylesheet"]['+r+"]"}function hw(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function pV(r,a,c,h){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=r.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),dn(a,"link",c),zt(a),r.head.appendChild(a))}function Nl(r){return'[src="'+Nn(r)+'"]'}function ju(r){return"script[async]"+r}function dw(r,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var h=r.querySelector('style[data-href~="'+Nn(c.href)+'"]');if(h)return a.instance=h,zt(h),h;var p=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),zt(h),dn(h,"style",p),Pf(h,c.precedence,r),a.instance=h;case"stylesheet":p=Dl(c.href);var y=r.querySelector(Lu(p));if(y)return a.state.loading|=4,a.instance=y,zt(y),y;h=hw(c),(p=mi.get(p))&&Xy(h,p),y=(r.ownerDocument||r).createElement("link"),zt(y);var E=y;return E._p=new Promise(function(I,F){E.onload=I,E.onerror=F}),dn(y,"link",h),a.state.loading|=4,Pf(y,c.precedence,r),a.instance=y;case"script":return y=Nl(c.src),(p=r.querySelector(ju(y)))?(a.instance=p,zt(p),p):(h=c,(p=mi.get(y))&&(h=v({},c),Wy(h,p)),r=r.ownerDocument||r,p=r.createElement("script"),zt(p),dn(p,"link",h),r.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Pf(h,c.precedence,r));return a.instance}function Pf(r,a,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,y=p,E=0;E<h.length;E++){var I=h[E];if(I.dataset.precedence===a)y=I;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(r,a.firstChild))}function Xy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Wy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Mf=null;function fw(r,a,c){if(Mf===null){var h=new Map,p=Mf=new Map;p.set(c,h)}else p=Mf,h=p.get(c),h||(h=new Map,p.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),p=0;p<c.length;p++){var y=c[p];if(!(y[Yi]||y[Ut]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(a)||"";E=r+E;var I=h.get(E);I?I.push(y):h.set(E,[y])}}return h}function mw(r,a,c){r=r.ownerDocument||r,r.head.insertBefore(c,a==="title"?r.querySelector("head > title"):null)}function gV(r,a,c){if(c===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function pw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function yV(r,a,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var p=Dl(h.href),y=a.querySelector(Lu(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Of.bind(r),a.then(r,r)),c.state.loading|=4,c.instance=y,zt(y);return}y=a.ownerDocument||a,h=hw(h),(p=mi.get(p))&&Xy(h,p),y=y.createElement("link"),zt(y);var E=y;E._p=new Promise(function(I,F){E.onload=I,E.onerror=F}),dn(y,"link",h),c.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Of.bind(r),a.addEventListener("load",c),a.addEventListener("error",c))}}var Zy=0;function vV(r,a){return r.stylesheets&&r.count===0&&jf(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&jf(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+a);0<r.imgBytes&&Zy===0&&(Zy=62500*Zk());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&jf(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Zy?50:800)+a);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function Of(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Lf=null;function jf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Lf=new Map,a.forEach(_V,r),Lf=null,Of.call(r))}function _V(r,a){if(!(a.state.loading&4)){var c=Lf.get(r);if(c)var h=c.get(null);else{c=new Map,Lf.set(r,c);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var E=p[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),h=E)}h&&c.set(null,h)}p=a.instance,E=p.getAttribute("data-precedence"),y=c.get(E)||h,y===h&&c.set(null,p),c.set(E,p),this.count++,h=Of.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),a.state.loading|=4}}var Uu={$$typeof:M,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function bV(r,a,c,h,p,y,E,I,F){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.hiddenUpdates=$i(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function gw(r,a,c,h,p,y,E,I,F,X,ie,oe){return r=new bV(r,a,c,E,F,X,ie,oe,I),a=1,y===!0&&(a|=24),y=$n(3,null,null,a),r.current=y,y.stateNode=r,a=Ng(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:h,isDehydrated:c,cache:a},Mg(y),r}function yw(r){return r?(r=ll,r):ll}function vw(r,a,c,h,p,y){p=yw(p),h.context===null?h.context=p:h.pendingContext=p,h=Cs(a),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=Ds(r,h,a),c!==null&&(Ln(c,r,a),yu(c,r,a))}function _w(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function Jy(r,a){_w(r,a),(r=r.alternate)&&_w(r,a)}function bw(r){if(r.tag===13||r.tag===31){var a=Ka(r,67108864);a!==null&&Ln(a,r,67108864),Jy(r,67108864)}}function Tw(r){if(r.tag===13||r.tag===31){var a=Wn();a=Ma(a);var c=Ka(r,a);c!==null&&Ln(c,r,a),Jy(r,a)}}var Uf=!0;function TV(r,a,c,h){var p=H.T;H.T=null;var y=se.p;try{se.p=2,e0(r,a,c,h)}finally{se.p=y,H.T=p}}function EV(r,a,c,h){var p=H.T;H.T=null;var y=se.p;try{se.p=8,e0(r,a,c,h)}finally{se.p=y,H.T=p}}function e0(r,a,c,h){if(Uf){var p=t0(h);if(p===null)zy(r,a,h,zf,c),ww(r,h);else if(SV(p,r,a,c,h))h.stopPropagation();else if(ww(r,h),a&4&&-1<wV.indexOf(r)){for(;p!==null;){var y=ii(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=Hi(y.pendingLanes);if(E!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;E;){var F=1<<31-Ct(E);I.entanglements[1]|=F,E&=~F}cr(y),(tt&6)===0&&(Ef=xn()+500,Vu(0))}}break;case 31:case 13:I=Ka(y,2),I!==null&&Ln(I,y,2),Sf(),Jy(y,2)}if(y=t0(h),y===null&&zy(r,a,h,zf,c),y===p)break;p=y}p!==null&&h.stopPropagation()}else zy(r,a,h,null,c)}}function t0(r){return r=ri(r),n0(r)}var zf=null;function n0(r){if(zf=null,r=Qi(r),r!==null){var a=o(r);if(a===null)r=null;else{var c=a.tag;if(c===13){if(r=l(a),r!==null)return r;r=null}else if(c===31){if(r=u(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return zf=r,null}function Ew(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Na()){case Fc:return 2;case qc:return 8;case ms:case lg:return 32;case yd:return 268435456;default:return 32}default:return 32}}var i0=!1,Bs=null,Fs=null,qs=null,zu=new Map,Bu=new Map,Hs=[],wV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ww(r,a){switch(r){case"focusin":case"focusout":Bs=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":zu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bu.delete(a.pointerId)}}function Fu(r,a,c,h,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},a!==null&&(a=ii(a),a!==null&&bw(a)),r):(r.eventSystemFlags|=h,a=r.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),r)}function SV(r,a,c,h,p){switch(a){case"focusin":return Bs=Fu(Bs,r,a,c,h,p),!0;case"dragenter":return Fs=Fu(Fs,r,a,c,h,p),!0;case"mouseover":return qs=Fu(qs,r,a,c,h,p),!0;case"pointerover":var y=p.pointerId;return zu.set(y,Fu(zu.get(y)||null,r,a,c,h,p)),!0;case"gotpointercapture":return y=p.pointerId,Bu.set(y,Fu(Bu.get(y)||null,r,a,c,h,p)),!0}return!1}function Sw(r){var a=Qi(r.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){r.blockedOn=a,Ai(r.priority,function(){Tw(c)});return}}else if(a===31){if(a=u(c),a!==null){r.blockedOn=a,Ai(r.priority,function(){Tw(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Bf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=t0(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);tu=h,c.target.dispatchEvent(h),tu=null}else return a=ii(c),a!==null&&bw(a),r.blockedOn=c,!1;a.shift()}return!0}function xw(r,a,c){Bf(r)&&c.delete(a)}function xV(){i0=!1,Bs!==null&&Bf(Bs)&&(Bs=null),Fs!==null&&Bf(Fs)&&(Fs=null),qs!==null&&Bf(qs)&&(qs=null),zu.forEach(xw),Bu.forEach(xw)}function Ff(r,a){r.blockedOn===a&&(r.blockedOn=null,i0||(i0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,xV)))}var qf=null;function Aw(r){qf!==r&&(qf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){qf===r&&(qf=null);for(var a=0;a<r.length;a+=3){var c=r[a],h=r[a+1],p=r[a+2];if(typeof h!="function"){if(n0(h||c)===null)continue;break}var y=ii(c);y!==null&&(r.splice(a,3),a-=3,ty(y,{pending:!0,data:p,method:c.method,action:h},h,p))}}))}function kl(r){function a(F){return Ff(F,r)}Bs!==null&&Ff(Bs,r),Fs!==null&&Ff(Fs,r),qs!==null&&Ff(qs,r),zu.forEach(a),Bu.forEach(a);for(var c=0;c<Hs.length;c++){var h=Hs[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<Hs.length&&(c=Hs[0],c.blockedOn===null);)Sw(c),c.blockedOn===null&&Hs.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var p=c[h],y=c[h+1],E=p[nn]||null;if(typeof y=="function")E||Aw(c);else if(E){var I=null;if(y&&y.hasAttribute("formAction")){if(p=y,E=y[nn]||null)I=E.formAction;else if(n0(p)!==null)continue}else I=E.action;typeof I=="function"?c[h+1]=I:(c.splice(h,3),h-=3),Aw(c)}}}function Iw(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return p=E})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function r0(r){this._internalRoot=r}Hf.prototype.render=r0.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,h=Wn();vw(c,h,r,a,null,null)},Hf.prototype.unmount=r0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;vw(r.current,2,null,r,null,null),Sf(),a[Ki]=null}};function Hf(r){this._internalRoot=r}Hf.prototype.unstable_scheduleHydration=function(r){if(r){var a=wd();r={blockedOn:null,target:r,priority:a};for(var c=0;c<Hs.length&&a!==0&&a<Hs[c].priority;c++);Hs.splice(c,0,r),c===0&&Sw(r)}};var Rw=e.version;if(Rw!=="19.2.0")throw Error(i(527,Rw,"19.2.0"));se.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var AV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gf.isDisabled&&Gf.supportsFiber)try{Si=Gf.inject(AV),on=Gf}catch{}}return Hu.createRoot=function(r,a){if(!s(r))throw Error(i(299));var c=!1,h="",p=M1,y=O1,E=L1;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=gw(r,1,!1,null,null,c,h,null,p,y,E,Iw),r[Ki]=a.current,Uy(r),new r0(a)},Hu.hydrateRoot=function(r,a,c){if(!s(r))throw Error(i(299));var h=!1,p="",y=M1,E=O1,I=L1,F=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.formState!==void 0&&(F=c.formState)),a=gw(r,1,!0,a,c??null,h,p,F,y,E,I,Iw),a.context=yw(null),c=a.current,h=Wn(),h=Ma(h),p=Cs(h),p.callback=null,Ds(c,p,h),c=h,a.current.lanes=c,Va(a,c),cr(a),r[Ki]=a.current,Uy(r),new Hf(a)},Hu.version="19.2.0",Hu}var jw;function LV(){if(jw)return o0.exports;jw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),o0.exports=OV(),o0.exports}var jV=LV();const UV="modulepreload",zV=function(n){return"/house-budget-pwa/"+n},Uw={},BV=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var l=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=f(t.map(g=>{if(g=zV(g),g in Uw)return;Uw[g]=!0;const v=g.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":UV,v||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((N,A)=>{S.addEventListener("load",N),S.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function FV(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:s,onRegisteredSW:o,onRegisterError:l}=n;let u,d;const f=async(v=!0)=>{await d};async function g(){if("serviceWorker"in navigator){if(u=await BV(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/house-budget-pwa/sw.js",{scope:"/house-budget-pwa/",type:"classic"})).catch(v=>{l?.(v)}),!u)return;u.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),u.addEventListener("installed",v=>{v.isUpdate||i?.()}),u.register({immediate:e}).then(v=>{o?o("/house-budget-pwa/sw.js",v):s?.(v)}).catch(v=>{l?.(v)})}}return d=g(),f}var zw="popstate";function qV(n={}){function e(s,o){let{pathname:l="/",search:u="",hash:d=""}=Bo(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Q0("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:wh(o))}function i(s,o){wi(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return GV(e,t,i,n)}function St(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HV(){return Math.random().toString(36).substring(2,10)}function Bw(n,e){return{usr:n.state,key:n.key,idx:e}}function Q0(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Bo(e):e,state:t,key:e&&e.key||i||HV()}}function wh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Bo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function GV(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,u="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function v(){u="POP";let C=g(),P=C==null?null:C-f;f=C,d&&d({action:u,location:A.location,delta:P})}function _(C,P){u="PUSH";let U=Q0(A.location,C,P);t&&t(U,C),f=g()+1;let M=Bw(U,f),$=A.createHref(U);try{l.pushState(M,"",$)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;s.location.assign($)}o&&d&&d({action:u,location:A.location,delta:1})}function S(C,P){u="REPLACE";let U=Q0(A.location,C,P);t&&t(U,C),f=g();let M=Bw(U,f),$=A.createHref(U);l.replaceState(M,"",$),o&&d&&d({action:u,location:A.location,delta:0})}function N(C){return $V(C)}let A={get action(){return u},get location(){return n(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(zw,v),d=C,()=>{s.removeEventListener(zw,v),d=null}},createHref(C){return e(s,C)},createURL:N,encodeLocation(C){let P=N(C);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:_,replace:S,go(C){return l.go(C)}};return A}function $V(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),St(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:wh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function gI(n,e,t="/"){return KV(n,e,t,!1)}function KV(n,e,t,i){let s=typeof e=="string"?Bo(e):e,o=ts(s.pathname||"/",t);if(o==null)return null;let l=yI(n);YV(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=sP(o);u=iP(l[d],f,i)}return u}function yI(n,e=[],t=[],i="",s=!1){let o=(l,u,d=s,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;St(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let v=Zr([i,g.relativePath]),_=t.concat(g);l.children&&l.children.length>0&&(St(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),yI(l.children,e,_,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:tP(v,l.index),routesMeta:_})};return n.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of vI(l.path))o(l,u,!0,d)}),e}function vI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=vI(i.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function YV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:nP(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var QV=/^:[\w-]+$/,XV=3,WV=2,ZV=1,JV=10,eP=-2,Fw=n=>n==="*";function tP(n,e){let t=n.split("/"),i=t.length;return t.some(Fw)&&(i+=eP),e&&(i+=WV),t.filter(s=>!Fw(s)).reduce((s,o)=>s+(QV.test(o)?XV:o===""?ZV:JV),i)}function nP(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function iP(n,e,t=!1){let{routesMeta:i}=n,s={},o="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Nm({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),_=d.route;if(!v&&f&&t&&!i[i.length-1].route.index&&(v=Nm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Zr([o,v.pathname]),pathnameBase:uP(Zr([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=Zr([o,v.pathnameBase]))}return l}function Nm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=rP(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:v},_)=>{if(g==="*"){let N=u[_]||"";l=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const S=u[_];return v&&!S?f[g]=void 0:f[g]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function rP(n,e=!1,t=!0){wi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function sP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ts(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var aP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oP=n=>aP.test(n);function lP(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Bo(n):n,o;if(t)if(oP(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),wi(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=qw(t.substring(1),"/"):o=qw(t,e)}else o=e;return{pathname:o,search:hP(i),hash:dP(s)}}function qw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function h0(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _I(n){let e=cP(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function bI(n,e,t,i=!1){let s;typeof n=="string"?s=Bo(n):(s={...n},St(!s.pathname||!s.pathname.includes("?"),h0("?","pathname","search",s)),St(!s.pathname||!s.pathname.includes("#"),h0("#","pathname","hash",s)),St(!s.search||!s.search.includes("#"),h0("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let v=e.length-1;if(!i&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}u=v>=0?e[v]:"/"}let d=lP(s,u),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Zr=n=>n.join("/").replace(/\/\/+/g,"/"),uP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),hP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,dP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function fP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var TI=["POST","PUT","PATCH","DELETE"];new Set(TI);var mP=["GET",...TI];new Set(mP);var Ac=j.createContext(null);Ac.displayName="DataRouter";var gp=j.createContext(null);gp.displayName="DataRouterState";j.createContext(!1);var EI=j.createContext({isTransitioning:!1});EI.displayName="ViewTransition";var pP=j.createContext(new Map);pP.displayName="Fetchers";var gP=j.createContext(null);gP.displayName="Await";var Sr=j.createContext(null);Sr.displayName="Navigation";var Qh=j.createContext(null);Qh.displayName="Location";var xr=j.createContext({outlet:null,matches:[],isDataRoute:!1});xr.displayName="Route";var l_=j.createContext(null);l_.displayName="RouteError";function yP(n,{relative:e}={}){St(Xh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=j.useContext(Sr),{hash:s,pathname:o,search:l}=Wh(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Zr([t,o])),i.createHref({pathname:u,search:l,hash:s})}function Xh(){return j.useContext(Qh)!=null}function ba(){return St(Xh(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Qh).location}var wI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function SI(n){j.useContext(Sr).static||j.useLayoutEffect(n)}function Ta(){let{isDataRoute:n}=j.useContext(xr);return n?NP():vP()}function vP(){St(Xh(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(Ac),{basename:e,navigator:t}=j.useContext(Sr),{matches:i}=j.useContext(xr),{pathname:s}=ba(),o=JSON.stringify(_I(i)),l=j.useRef(!1);return SI(()=>{l.current=!0}),j.useCallback((d,f={})=>{if(wi(l.current,wI),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=bI(d,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Zr([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,n])}j.createContext(null);function _P(){let{matches:n}=j.useContext(xr),e=n[n.length-1];return e?e.params:{}}function Wh(n,{relative:e}={}){let{matches:t}=j.useContext(xr),{pathname:i}=ba(),s=JSON.stringify(_I(t));return j.useMemo(()=>bI(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function bP(n,e){return xI(n,e)}function xI(n,e,t,i,s){St(Xh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(Sr),{matches:l}=j.useContext(xr),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let U=v&&v.path||"";AI(f,!v||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let _=ba(),S;if(e){let U=typeof e=="string"?Bo(e):e;St(g==="/"||U.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${U.pathname}" was given in the \`location\` prop.`),S=U}else S=_;let N=S.pathname||"/",A=N;if(g!=="/"){let U=g.replace(/^\//,"").split("/");A="/"+N.replace(/^\//,"").split("/").slice(U.length).join("/")}let C=gI(n,{pathname:A});wi(v||C!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),wi(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=xP(C&&C.map(U=>Object.assign({},U,{params:Object.assign({},d,U.params),pathname:Zr([g,o.encodeLocation?o.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?g:Zr([g,o.encodeLocation?o.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),l,t,i,s);return e&&P?j.createElement(Qh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},P):P}function TP(){let n=DP(),e=fP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,l)}var EP=j.createElement(TP,null),wP=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?j.createElement(xr.Provider,{value:this.props.routeContext},j.createElement(l_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function SP({routeContext:n,match:e,children:t}){let i=j.useContext(Ac);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(xr.Provider,{value:n},t)}function xP(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let g=o.findIndex(v=>v.route.id&&l?.[v.route.id]!==void 0);St(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let v=o[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:_,errors:S}=t,N=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||N){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&i?(g,v)=>{i(g,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:v})}:void 0;return o.reduceRight((g,v,_)=>{let S,N=!1,A=null,C=null;t&&(S=l&&v.route.id?l[v.route.id]:void 0,A=v.route.errorElement||EP,u&&(d<0&&_===0?(AI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,C=null):d===_&&(N=!0,C=v.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,_+1)),U=()=>{let M;return S?M=A:N?M=C:v.route.Component?M=j.createElement(v.route.Component,null):v.route.element?M=v.route.element:M=g,j.createElement(SP,{match:v,routeContext:{outlet:g,matches:P,isDataRoute:t!=null},children:M})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?j.createElement(wP,{location:t.location,revalidation:t.revalidation,component:A,error:S,children:U(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:f}):U()},null)}function c_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AP(n){let e=j.useContext(Ac);return St(e,c_(n)),e}function IP(n){let e=j.useContext(gp);return St(e,c_(n)),e}function RP(n){let e=j.useContext(xr);return St(e,c_(n)),e}function u_(n){let e=RP(n),t=e.matches[e.matches.length-1];return St(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function CP(){return u_("useRouteId")}function DP(){let n=j.useContext(l_),e=IP("useRouteError"),t=u_("useRouteError");return n!==void 0?n:e.errors?.[t]}function NP(){let{router:n}=AP("useNavigate"),e=u_("useNavigate"),t=j.useRef(!1);return SI(()=>{t.current=!0}),j.useCallback(async(s,o={})=>{wi(t.current,wI),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Hw={};function AI(n,e,t){!e&&!Hw[n]&&(Hw[n]=!0,wi(!1,t))}j.memo(kP);function kP({routes:n,future:e,state:t,unstable_onError:i}){return xI(n,void 0,t,i,e)}function lo(n){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VP({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:o=!1}){St(!Xh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=Bo(t));let{pathname:d="/",search:f="",hash:g="",state:v=null,key:_="default"}=t,S=j.useMemo(()=>{let N=ts(d,l);return N==null?null:{location:{pathname:N,search:f,hash:g,state:v,key:_},navigationType:i}},[l,d,f,g,v,_,i]);return wi(S!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:j.createElement(Sr.Provider,{value:u},j.createElement(Qh.Provider,{children:e,value:S}))}function PP({children:n,location:e}){return bP(X0(n),e)}function X0(n,e=[]){let t=[];return j.Children.forEach(n,(i,s)=>{if(!j.isValidElement(i))return;let o=[...e,s];if(i.type===j.Fragment){t.push.apply(t,X0(i.props.children,o));return}St(i.type===lo,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=X0(i.props.children,o)),t.push(l)}),t}var om="get",lm="application/x-www-form-urlencoded";function yp(n){return n!=null&&typeof n.tagName=="string"}function MP(n){return yp(n)&&n.tagName.toLowerCase()==="button"}function OP(n){return yp(n)&&n.tagName.toLowerCase()==="form"}function LP(n){return yp(n)&&n.tagName.toLowerCase()==="input"}function jP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function UP(n,e){return n.button===0&&(!e||e==="_self")&&!jP(n)}var Kf=null;function zP(){if(Kf===null)try{new FormData(document.createElement("form"),0),Kf=!1}catch{Kf=!0}return Kf}var BP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function d0(n){return n!=null&&!BP.has(n)?(wi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lm}"`),null):n}function FP(n,e){let t,i,s,o,l;if(OP(n)){let u=n.getAttribute("action");i=u?ts(u,e):null,t=n.getAttribute("method")||om,s=d0(n.getAttribute("enctype"))||lm,o=new FormData(n)}else if(MP(n)||LP(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(i=d?ts(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||om,s=d0(n.getAttribute("formenctype"))||d0(u.getAttribute("enctype"))||lm,o=new FormData(u,n),!zP()){let{name:f,type:g,value:v}=n;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,v)}}else{if(yp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=om,i=null,s=lm,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function h_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function qP(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&ts(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function HP(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function $P(n,e,t){let i=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await HP(o,t);return l.links?l.links():[]}return[]}));return XP(i.flat(1).filter(GP).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Gw(n,e,t,i,s,o){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function KP(n,e,{includeHydrateFallback:t}={}){return YP(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function YP(n){return[...new Set(n)]}function QP(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function XP(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let o=JSON.stringify(QP(s));return t.has(o)||(t.add(o),i.push({key:o,link:s})),i},[])}function II(){let n=j.useContext(Ac);return h_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function WP(){let n=j.useContext(gp);return h_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var d_=j.createContext(void 0);d_.displayName="FrameworkContext";function RI(){let n=j.useContext(d_);return h_(n,"You must render this element inside a <HydratedRouter> element"),n}function ZP(n,e){let t=j.useContext(d_),[i,s]=j.useState(!1),[o,l]=j.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=e,_=j.useRef(null);j.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let A=P=>{P.forEach(U=>{l(U.isIntersecting)})},C=new IntersectionObserver(A,{threshold:.5});return _.current&&C.observe(_.current),()=>{C.disconnect()}}},[n]),j.useEffect(()=>{if(i){let A=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(A)}}},[i]);let S=()=>{s(!0)},N=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:Gu(u,S),onBlur:Gu(d,N),onMouseEnter:Gu(f,S),onMouseLeave:Gu(g,N),onTouchStart:Gu(v,S)}]:[!1,_,{}]}function Gu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function JP({page:n,...e}){let{router:t}=II(),i=j.useMemo(()=>gI(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?j.createElement(t4,{page:n,matches:i,...e}):null}function e4(n){let{manifest:e,routeModules:t}=RI(),[i,s]=j.useState([]);return j.useEffect(()=>{let o=!1;return $P(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),i}function t4({page:n,matches:e,...t}){let i=ba(),{manifest:s,routeModules:o}=RI(),{basename:l}=II(),{loaderData:u,matches:d}=WP(),f=j.useMemo(()=>Gw(n,e,d,s,i,"data"),[n,e,d,s,i]),g=j.useMemo(()=>Gw(n,e,d,s,i,"assets"),[n,e,d,s,i]),v=j.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let N=new Set,A=!1;if(e.forEach(P=>{let U=s.routes[P.route.id];!U||!U.hasLoader||(!f.some(M=>M.route.id===P.route.id)&&P.route.id in u&&o[P.route.id]?.shouldRevalidate||U.hasClientLoader?A=!0:N.add(P.route.id))}),N.size===0)return[];let C=qP(n,l,"data");return A&&N.size>0&&C.searchParams.set("_routes",e.filter(P=>N.has(P.route.id)).map(P=>P.route.id).join(",")),[C.pathname+C.search]},[l,u,i,s,f,e,n,o]),_=j.useMemo(()=>KP(g,s),[g,s]),S=e4(g);return j.createElement(j.Fragment,null,v.map(N=>j.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),_.map(N=>j.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),S.map(({key:N,link:A})=>j.createElement("link",{key:N,nonce:t.nonce,...A})))}function n4(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var CI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CI&&(window.__reactRouterVersion="7.9.6")}catch{}function i4({basename:n,children:e,window:t}){let i=j.useRef();i.current==null&&(i.current=qV({window:t,v5Compat:!0}));let s=i.current,[o,l]=j.useState({action:s.action,location:s.location}),u=j.useCallback(d=>{j.startTransition(()=>l(d))},[l]);return j.useLayoutEffect(()=>s.listen(u),[s,u]),j.createElement(VP,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var DI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NI=j.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:g,viewTransition:v,..._},S){let{basename:N}=j.useContext(Sr),A=typeof f=="string"&&DI.test(f),C,P=!1;if(typeof f=="string"&&A&&(C=f,CI))try{let V=new URL(window.location.href),O=f.startsWith("//")?new URL(V.protocol+f):new URL(f),k=ts(O.pathname,N);O.origin===V.origin&&k!=null?f=k+O.search+O.hash:P=!0}catch{wi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=yP(f,{relative:s}),[M,$,te]=ZP(i,_),Z=o4(f,{replace:l,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:v});function x(V){e&&e(V),V.defaultPrevented||Z(V)}let R=j.createElement("a",{..._,...te,href:C||U,onClick:P||o?e:x,ref:n4(S,$),target:d,"data-discover":!A&&t==="render"?"true":void 0});return M&&!A?j.createElement(j.Fragment,null,R,j.createElement(JP,{page:U})):R});NI.displayName="Link";var r4=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...f},g){let v=Wh(l,{relative:f.relative}),_=ba(),S=j.useContext(gp),{navigator:N,basename:A}=j.useContext(Sr),C=S!=null&&d4(v)&&u===!0,P=N.encodeLocation?N.encodeLocation(v).pathname:v.pathname,U=_.pathname,M=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(U=U.toLowerCase(),M=M?M.toLowerCase():null,P=P.toLowerCase()),M&&A&&(M=ts(M,A)||M);const $=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let te=U===P||!s&&U.startsWith(P)&&U.charAt($)==="/",Z=M!=null&&(M===P||!s&&M.startsWith(P)&&M.charAt(P.length)==="/"),x={isActive:te,isPending:Z,isTransitioning:C},R=te?e:void 0,V;typeof i=="function"?V=i(x):V=[i,te?"active":null,Z?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(x):o;return j.createElement(NI,{...f,"aria-current":R,className:V,ref:g,style:O,to:l,viewTransition:u},typeof d=="function"?d(x):d)});r4.displayName="NavLink";var s4=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:o,method:l=om,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:v,..._},S)=>{let N=u4(),A=h4(u,{relative:f}),C=l.toLowerCase()==="get"?"get":"post",P=typeof u=="string"&&DI.test(u),U=M=>{if(d&&d(M),M.defaultPrevented)return;M.preventDefault();let $=M.nativeEvent.submitter,te=$?.getAttribute("formmethod")||l;N($||M.currentTarget,{fetcherKey:e,method:te,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:v})};return j.createElement("form",{ref:S,method:C,action:A,onSubmit:i?d:U,..._,"data-discover":!P&&n==="render"?"true":void 0})});s4.displayName="Form";function a4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kI(n){let e=j.useContext(Ac);return St(e,a4(n)),e}function o4(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=Ta(),d=ba(),f=Wh(n,{relative:o});return j.useCallback(g=>{if(UP(g,e)){g.preventDefault();let v=t!==void 0?t:wh(d)===wh(f);u(n,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,f,t,i,e,n,s,o,l])}var l4=0,c4=()=>`__${String(++l4)}__`;function u4(){let{router:n}=kI("useSubmit"),{basename:e}=j.useContext(Sr),t=CP();return j.useCallback(async(i,s={})=>{let{action:o,method:l,encType:u,formData:d,body:f}=FP(i,e);if(s.navigate===!1){let g=s.fetcherKey||c4();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function h4(n,{relative:e}={}){let{basename:t}=j.useContext(Sr),i=j.useContext(xr);St(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...Wh(n||".",{relative:e})},l=ba();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Zr([t,o.pathname])),wh(o)}function d4(n,{relative:e}={}){let t=j.useContext(EI);St(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=kI("useViewTransitionState"),s=Wh(n,{relative:e});if(!t.isTransitioning)return!1;let o=ts(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=ts(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Nm(s.pathname,l)!=null||Nm(s.pathname,o)!=null}const f4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m4=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),$w=n=>{const e=m4(n);return e.charAt(0).toUpperCase()+e.slice(1)},VI=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),p4=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var g4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const y4=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:l,...u},d)=>j.createElement("svg",{ref:d,...g4,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:VI("lucide",s),...!o&&!p4(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,g])=>j.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Xe=(n,e)=>{const t=j.forwardRef(({className:i,...s},o)=>j.createElement(y4,{ref:o,iconNode:e,className:VI(`lucide-${f4($w(n))}`,`lucide-${n}`,i),...s}));return t.displayName=$w(n),t};const v4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],km=Xe("arrow-left",v4);const _4=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],b4=Xe("arrow-right-left",_4);const T4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],E4=Xe("chevron-down",T4);const w4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ul=Xe("chevron-right",w4);const S4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],x4=Xe("circle-arrow-down",S4);const A4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],I4=Xe("circle-arrow-up",A4);const R4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],C4=Xe("circle-check-big",R4);const D4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Kw=Xe("circle-check",D4);const N4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],k4=Xe("circle-plus",N4);const V4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yw=Xe("circle",V4);const P4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Vm=Xe("download",P4);const M4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],O4=Xe("eye-off",M4);const L4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j4=Xe("eye",L4);const U4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],z4=Xe("file-text",U4);const B4=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],F4=Xe("folder-plus",B4);const q4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],H4=Xe("funnel",q4);const G4=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],$4=Xe("git-branch",G4);const K4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Y4=Xe("list",K4);const Q4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],X4=Xe("loader",Q4);const W4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Z4=Xe("log-out",W4);const J4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Qw=Xe("mail",J4);const eM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],W0=Xe("refresh-cw",eM);const tM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],nM=Xe("save",tM);const iM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],rM=Xe("search",iM);const sM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],aM=Xe("settings",sM);const oM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Pm=Xe("trash-2",oM);const lM=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],PI=Xe("trash",lM);const cM=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],uM=Xe("undo-2",cM);const hM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],dM=Xe("upload",hM);const fM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],mM=Xe("user-plus",fM);const pM=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],gM=Xe("wallet",pM);const yM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vM=Xe("wifi-off",yM);const _M=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],bM=Xe("wifi",_M);const TM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],f_=Xe("x",TM),Xw=n=>{let e;const t=new Set,i=(f,g)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(S=>S(e,_))}},s=()=>e,u={setState:i,getState:s,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=n(i,s,u);return u},EM=(n=>n?Xw(n):Xw),wM=n=>n;function SM(n,e=wM){const t=$f.useSyncExternalStore(n.subscribe,$f.useCallback(()=>e(n.getState()),[n,e]),$f.useCallback(()=>e(n.getInitialState()),[n,e]));return $f.useDebugValue(t),t}const Ww=n=>{const e=EM(n),t=i=>SM(e,i);return Object.assign(t,e),t},m_=(n=>n?Ww(n):Ww);function xM(n,e){let t;try{t=n()}catch{return}return{getItem:s=>{var o;const l=d=>d===null?null:JSON.parse(d,void 0),u=(o=t.getItem(s))!=null?o:null;return u instanceof Promise?u.then(l):l(u)},setItem:(s,o)=>t.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>t.removeItem(s)}}const Z0=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(i){return Z0(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return Z0(i)(t)}}}},AM=(n,e)=>(t,i,s)=>{let o={storage:xM(()=>localStorage),partialize:A=>A,version:0,merge:(A,C)=>({...C,...A}),...e},l=!1;const u=new Set,d=new Set;let f=o.storage;if(!f)return n((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...A)},i,s);const g=()=>{const A=o.partialize({...i()});return f.setItem(o.name,{state:A,version:o.version})},v=s.setState;s.setState=(A,C)=>(v(A,C),g());const _=n((...A)=>(t(...A),g()),i,s);s.getInitialState=()=>_;let S;const N=()=>{var A,C;if(!f)return;l=!1,u.forEach(U=>{var M;return U((M=i())!=null?M:_)});const P=((C=o.onRehydrateStorage)==null?void 0:C.call(o,(A=i())!=null?A:_))||void 0;return Z0(f.getItem.bind(f))(o.name).then(U=>{if(U)if(typeof U.version=="number"&&U.version!==o.version){if(o.migrate){const M=o.migrate(U.state,U.version);return M instanceof Promise?M.then($=>[!0,$]):[!0,M]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,U.state];return[!1,void 0]}).then(U=>{var M;const[$,te]=U;if(S=o.merge(te,(M=i())!=null?M:_),t(S,!0),$)return g()}).then(()=>{P?.(S,void 0),S=i(),l=!0,d.forEach(U=>U(S))}).catch(U=>{P?.(void 0,U)})};return s.persist={setOptions:A=>{o={...o,...A},A.storage&&(f=A.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>N(),hasHydrated:()=>l,onHydrate:A=>(u.add(A),()=>{u.delete(A)}),onFinishHydration:A=>(d.add(A),()=>{d.delete(A)})},o.skipHydration||N(),S||_},MI=AM;var $l=9e15,Ea=1e9,J0="0123456789abcdef",Mm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Om="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ev={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-$l,maxE:$l,crypto:!1},OI,Yr,Pe=!0,vp="[DecimalError] ",da=vp+"Invalid argument: ",LI=vp+"Precision limit exceeded",jI=vp+"crypto unavailable",UI="[object Decimal]",Sn=Math.floor,Jt=Math.pow,IM=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,RM=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,CM=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,zI=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ui=1e7,Re=7,DM=9007199254740991,NM=Mm.length-1,tv=Om.length-1,ce={toStringTag:UI};ce.absoluteValue=ce.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Se(n)};ce.ceil=function(){return Se(new this.constructor(this),this.e+1,2)};ce.clampedTo=ce.clamp=function(n,e){var t,i=this,s=i.constructor;if(n=new s(n),e=new s(e),!n.s||!e.s)return new s(NaN);if(n.gt(e))throw Error(da+e);return t=i.cmp(n),t<0?n:i.cmp(e)>0?e:new s(i)};ce.comparedTo=ce.cmp=function(n){var e,t,i,s,o=this,l=o.d,u=(n=new o.constructor(n)).d,d=o.s,f=n.s;if(!l||!u)return!d||!f?NaN:d!==f?d:l===u?0:!l^d<0?1:-1;if(!l[0]||!u[0])return l[0]?d:u[0]?-f:0;if(d!==f)return d;if(o.e!==n.e)return o.e>n.e^d<0?1:-1;for(i=l.length,s=u.length,e=0,t=i<s?i:s;e<t;++e)if(l[e]!==u[e])return l[e]>u[e]^d<0?1:-1;return i===s?0:i>s^d<0?1:-1};ce.cosine=ce.cos=function(){var n,e,t=this,i=t.constructor;return t.d?t.d[0]?(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Re,i.rounding=1,t=kM(i,GI(i,t)),i.precision=n,i.rounding=e,Se(Yr==2||Yr==3?t.neg():t,n,e,!0)):new i(1):new i(NaN)};ce.cubeRoot=ce.cbrt=function(){var n,e,t,i,s,o,l,u,d,f,g=this,v=g.constructor;if(!g.isFinite()||g.isZero())return new v(g);for(Pe=!1,o=g.s*Jt(g.s*g,1/3),!o||Math.abs(o)==1/0?(t=pn(g.d),n=g.e,(o=(n-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=Jt(t,1/3),n=Sn((n+1)/3)-(n%3==(n<0?-1:2)),o==1/0?t="5e"+n:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),i=new v(t),i.s=g.s):i=new v(o.toString()),l=(n=v.precision)+3;;)if(u=i,d=u.times(u).times(u),f=d.plus(g),i=ft(f.plus(g).times(u),f.plus(d),l+2,1),pn(u.d).slice(0,l)===(t=pn(i.d)).slice(0,l))if(t=t.slice(l-3,l+1),t=="9999"||!s&&t=="4999"){if(!s&&(Se(u,n+1,0),u.times(u).times(u).eq(g))){i=u;break}l+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Se(i,n+1,1),e=!i.times(i).times(i).eq(g));break}return Pe=!0,Se(i,n,v.rounding,e)};ce.decimalPlaces=ce.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-Sn(this.e/Re))*Re,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};ce.dividedBy=ce.div=function(n){return ft(this,new this.constructor(n))};ce.dividedToIntegerBy=ce.divToInt=function(n){var e=this,t=e.constructor;return Se(ft(e,new t(n),0,1,1),t.precision,t.rounding)};ce.equals=ce.eq=function(n){return this.cmp(n)===0};ce.floor=function(){return Se(new this.constructor(this),this.e+1,3)};ce.greaterThan=ce.gt=function(n){return this.cmp(n)>0};ce.greaterThanOrEqualTo=ce.gte=function(n){var e=this.cmp(n);return e==1||e===0};ce.hyperbolicCosine=ce.cosh=function(){var n,e,t,i,s,o=this,l=o.constructor,u=new l(1);if(!o.isFinite())return new l(o.s?1/0:NaN);if(o.isZero())return u;t=l.precision,i=l.rounding,l.precision=t+Math.max(o.e,o.sd())+4,l.rounding=1,s=o.d.length,s<32?(n=Math.ceil(s/3),e=(1/bp(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),o=rc(l,1,o.times(e),new l(1),!0);for(var d,f=n,g=new l(8);f--;)d=o.times(o),o=u.minus(d.times(g.minus(d.times(g))));return Se(o,l.precision=t,l.rounding=i,!0)};ce.hyperbolicSine=ce.sinh=function(){var n,e,t,i,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<3)s=rc(o,2,s,s,!0);else{n=1.4*Math.sqrt(i),n=n>16?16:n|0,s=s.times(1/bp(5,n)),s=rc(o,2,s,s,!0);for(var l,u=new o(5),d=new o(16),f=new o(20);n--;)l=s.times(s),s=s.times(u.plus(l.times(d.times(l).plus(f))))}return o.precision=e,o.rounding=t,Se(s,e,t,!0)};ce.hyperbolicTangent=ce.tanh=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+7,i.rounding=1,ft(t.sinh(),t.cosh(),i.precision=n,i.rounding=e)):new i(t.s)};ce.inverseCosine=ce.acos=function(){var n=this,e=n.constructor,t=n.abs().cmp(1),i=e.precision,s=e.rounding;return t!==-1?t===0?n.isNeg()?dr(e,i,s):new e(0):new e(NaN):n.isZero()?dr(e,i+4,s).times(.5):(e.precision=i+6,e.rounding=1,n=new e(1).minus(n).div(n.plus(1)).sqrt().atan(),e.precision=i,e.rounding=s,n.times(2))};ce.inverseHyperbolicCosine=ce.acosh=function(){var n,e,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(n=i.precision,e=i.rounding,i.precision=n+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,Pe=!1,t=t.times(t).minus(1).sqrt().plus(t),Pe=!0,i.precision=n,i.rounding=e,t.ln()):new i(t)};ce.inverseHyperbolicSine=ce.asinh=function(){var n,e,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,Pe=!1,t=t.times(t).plus(1).sqrt().plus(t),Pe=!0,i.precision=n,i.rounding=e,t.ln())};ce.inverseHyperbolicTangent=ce.atanh=function(){var n,e,t,i,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(n=o.precision,e=o.rounding,i=s.sd(),Math.max(i,n)<2*-s.e-1?Se(new o(s),n,e,!0):(o.precision=t=i-s.e,s=ft(s.plus(1),new o(1).minus(s),t+n,1),o.precision=n+4,o.rounding=1,s=s.ln(),o.precision=n,o.rounding=e,s.times(.5))):new o(NaN)};ce.inverseSine=ce.asin=function(){var n,e,t,i,s=this,o=s.constructor;return s.isZero()?new o(s):(e=s.abs().cmp(1),t=o.precision,i=o.rounding,e!==-1?e===0?(n=dr(o,t+4,i).times(.5),n.s=s.s,n):new o(NaN):(o.precision=t+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=i,s.times(2)))};ce.inverseTangent=ce.atan=function(){var n,e,t,i,s,o,l,u,d,f=this,g=f.constructor,v=g.precision,_=g.rounding;if(f.isFinite()){if(f.isZero())return new g(f);if(f.abs().eq(1)&&v+4<=tv)return l=dr(g,v+4,_).times(.25),l.s=f.s,l}else{if(!f.s)return new g(NaN);if(v+4<=tv)return l=dr(g,v+4,_).times(.5),l.s=f.s,l}for(g.precision=u=v+10,g.rounding=1,t=Math.min(28,u/Re+2|0),n=t;n;--n)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Pe=!1,e=Math.ceil(u/Re),i=1,d=f.times(f),l=new g(f),s=f;n!==-1;)if(s=s.times(d),o=l.minus(s.div(i+=2)),s=s.times(d),l=o.plus(s.div(i+=2)),l.d[e]!==void 0)for(n=e;l.d[n]===o.d[n]&&n--;);return t&&(l=l.times(2<<t-1)),Pe=!0,Se(l,g.precision=v,g.rounding=_,!0)};ce.isFinite=function(){return!!this.d};ce.isInteger=ce.isInt=function(){return!!this.d&&Sn(this.e/Re)>this.d.length-2};ce.isNaN=function(){return!this.s};ce.isNegative=ce.isNeg=function(){return this.s<0};ce.isPositive=ce.isPos=function(){return this.s>0};ce.isZero=function(){return!!this.d&&this.d[0]===0};ce.lessThan=ce.lt=function(n){return this.cmp(n)<0};ce.lessThanOrEqualTo=ce.lte=function(n){return this.cmp(n)<1};ce.logarithm=ce.log=function(n){var e,t,i,s,o,l,u,d,f=this,g=f.constructor,v=g.precision,_=g.rounding,S=5;if(n==null)n=new g(10),e=!0;else{if(n=new g(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new g(NaN);e=n.eq(10)}if(t=f.d,f.s<0||!t||!t[0]||f.eq(1))return new g(t&&!t[0]?-1/0:f.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(s=t[0];s%10===0;)s/=10;o=s!==1}if(Pe=!1,u=v+S,l=ra(f,u),i=e?Lm(g,u+10):ra(n,u),d=ft(l,i,u,1),Sh(d.d,s=v,_))do if(u+=10,l=ra(f,u),i=e?Lm(g,u+10):ra(n,u),d=ft(l,i,u,1),!o){+pn(d.d).slice(s+1,s+15)+1==1e14&&(d=Se(d,v+1,0));break}while(Sh(d.d,s+=10,_));return Pe=!0,Se(d,v,_)};ce.minus=ce.sub=function(n){var e,t,i,s,o,l,u,d,f,g,v,_,S=this,N=S.constructor;if(n=new N(n),!S.d||!n.d)return!S.s||!n.s?n=new N(NaN):S.d?n.s=-n.s:n=new N(n.d||S.s!==n.s?S:NaN),n;if(S.s!=n.s)return n.s=-n.s,S.plus(n);if(f=S.d,_=n.d,u=N.precision,d=N.rounding,!f[0]||!_[0]){if(_[0])n.s=-n.s;else if(f[0])n=new N(S);else return new N(d===3?-0:0);return Pe?Se(n,u,d):n}if(t=Sn(n.e/Re),g=Sn(S.e/Re),f=f.slice(),o=g-t,o){for(v=o<0,v?(e=f,o=-o,l=_.length):(e=_,t=g,l=f.length),i=Math.max(Math.ceil(u/Re),l)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,l=_.length,v=i<l,v&&(l=i),i=0;i<l;i++)if(f[i]!=_[i]){v=f[i]<_[i];break}o=0}for(v&&(e=f,f=_,_=e,n.s=-n.s),l=f.length,i=_.length-l;i>0;--i)f[l++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(s=i;s&&f[--s]===0;)f[s]=Ui-1;--f[s],f[i]+=Ui}f[i]-=_[i]}for(;f[--l]===0;)f.pop();for(;f[0]===0;f.shift())--t;return f[0]?(n.d=f,n.e=_p(f,t),Pe?Se(n,u,d):n):new N(d===3?-0:0)};ce.modulo=ce.mod=function(n){var e,t=this,i=t.constructor;return n=new i(n),!t.d||!n.s||n.d&&!n.d[0]?new i(NaN):!n.d||t.d&&!t.d[0]?Se(new i(t),i.precision,i.rounding):(Pe=!1,i.modulo==9?(e=ft(t,n.abs(),0,3,1),e.s*=n.s):e=ft(t,n,0,i.modulo,1),e=e.times(n),Pe=!0,t.minus(e))};ce.naturalExponential=ce.exp=function(){return nv(this)};ce.naturalLogarithm=ce.ln=function(){return ra(this)};ce.negated=ce.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Se(n)};ce.plus=ce.add=function(n){var e,t,i,s,o,l,u,d,f,g,v=this,_=v.constructor;if(n=new _(n),!v.d||!n.d)return!v.s||!n.s?n=new _(NaN):v.d||(n=new _(n.d||v.s===n.s?v:NaN)),n;if(v.s!=n.s)return n.s=-n.s,v.minus(n);if(f=v.d,g=n.d,u=_.precision,d=_.rounding,!f[0]||!g[0])return g[0]||(n=new _(v)),Pe?Se(n,u,d):n;if(o=Sn(v.e/Re),i=Sn(n.e/Re),f=f.slice(),s=o-i,s){for(s<0?(t=f,s=-s,l=g.length):(t=g,i=o,l=f.length),o=Math.ceil(u/Re),l=o>l?o+1:l+1,s>l&&(s=l,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(l=f.length,s=g.length,l-s<0&&(s=l,t=g,g=f,f=t),e=0;s;)e=(f[--s]=f[s]+g[s]+e)/Ui|0,f[s]%=Ui;for(e&&(f.unshift(e),++i),l=f.length;f[--l]==0;)f.pop();return n.d=f,n.e=_p(f,i),Pe?Se(n,u,d):n};ce.precision=ce.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(da+n);return t.d?(e=BI(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};ce.round=function(){var n=this,e=n.constructor;return Se(new e(n),n.e+1,e.rounding)};ce.sine=ce.sin=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Re,i.rounding=1,t=PM(i,GI(i,t)),i.precision=n,i.rounding=e,Se(Yr>2?t.neg():t,n,e,!0)):new i(NaN)};ce.squareRoot=ce.sqrt=function(){var n,e,t,i,s,o,l=this,u=l.d,d=l.e,f=l.s,g=l.constructor;if(f!==1||!u||!u[0])return new g(!f||f<0&&(!u||u[0])?NaN:u?l:1/0);for(Pe=!1,f=Math.sqrt(+l),f==0||f==1/0?(e=pn(u),(e.length+d)%2==0&&(e+="0"),f=Math.sqrt(e),d=Sn((d+1)/2)-(d<0||d%2),f==1/0?e="5e"+d:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+d),i=new g(e)):i=new g(f.toString()),t=(d=g.precision)+3;;)if(o=i,i=o.plus(ft(l,o,t+2,1)).times(.5),pn(o.d).slice(0,t)===(e=pn(i.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!s&&e=="4999"){if(!s&&(Se(o,d+1,0),o.times(o).eq(l))){i=o;break}t+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Se(i,d+1,1),n=!i.times(i).eq(l));break}return Pe=!0,Se(i,d,g.rounding,n)};ce.tangent=ce.tan=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+10,i.rounding=1,t=t.sin(),t.s=1,t=ft(t,new i(1).minus(t.times(t)).sqrt(),n+10,0),i.precision=n,i.rounding=e,Se(Yr==2||Yr==4?t.neg():t,n,e,!0)):new i(NaN)};ce.times=ce.mul=function(n){var e,t,i,s,o,l,u,d,f,g=this,v=g.constructor,_=g.d,S=(n=new v(n)).d;if(n.s*=g.s,!_||!_[0]||!S||!S[0])return new v(!n.s||_&&!_[0]&&!S||S&&!S[0]&&!_?NaN:!_||!S?n.s/0:n.s*0);for(t=Sn(g.e/Re)+Sn(n.e/Re),d=_.length,f=S.length,d<f&&(o=_,_=S,S=o,l=d,d=f,f=l),o=[],l=d+f,i=l;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,s=d+i;s>i;)u=o[s]+S[i]*_[s-i-1]+e,o[s--]=u%Ui|0,e=u/Ui|0;o[s]=(o[s]+e)%Ui|0}for(;!o[--l];)o.pop();return e?++t:o.shift(),n.d=o,n.e=_p(o,t),Pe?Se(n,v.precision,v.rounding):n};ce.toBinary=function(n,e){return p_(this,2,n,e)};ce.toDecimalPlaces=ce.toDP=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(Bn(n,0,Ea),e===void 0?e=i.rounding:Bn(e,0,8),Se(t,n+t.e+1,e))};ce.toExponential=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Er(i,!0):(Bn(n,0,Ea),e===void 0?e=s.rounding:Bn(e,0,8),i=Se(new s(i),n+1,e),t=Er(i,!0,n+1)),i.isNeg()&&!i.isZero()?"-"+t:t};ce.toFixed=function(n,e){var t,i,s=this,o=s.constructor;return n===void 0?t=Er(s):(Bn(n,0,Ea),e===void 0?e=o.rounding:Bn(e,0,8),i=Se(new o(s),n+s.e+1,e),t=Er(i,!1,n+i.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t};ce.toFraction=function(n){var e,t,i,s,o,l,u,d,f,g,v,_,S=this,N=S.d,A=S.constructor;if(!N)return new A(S);if(f=t=new A(1),i=d=new A(0),e=new A(i),o=e.e=BI(N)-S.e-1,l=o%Re,e.d[0]=Jt(10,l<0?Re+l:l),n==null)n=o>0?e:f;else{if(u=new A(n),!u.isInt()||u.lt(f))throw Error(da+u);n=u.gt(e)?o>0?e:f:u}for(Pe=!1,u=new A(pn(N)),g=A.precision,A.precision=o=N.length*Re*2;v=ft(u,e,0,1,1),s=t.plus(v.times(i)),s.cmp(n)!=1;)t=i,i=s,s=f,f=d.plus(v.times(s)),d=s,s=e,e=u.minus(v.times(s)),u=s;return s=ft(n.minus(t),i,0,1,1),d=d.plus(s.times(f)),t=t.plus(s.times(i)),d.s=f.s=S.s,_=ft(f,i,o,1).minus(S).abs().cmp(ft(d,t,o,1).minus(S).abs())<1?[f,i]:[d,t],A.precision=g,Pe=!0,_};ce.toHexadecimal=ce.toHex=function(n,e){return p_(this,16,n,e)};ce.toNearest=function(n,e){var t=this,i=t.constructor;if(t=new i(t),n==null){if(!t.d)return t;n=new i(1),e=i.rounding}else{if(n=new i(n),e===void 0?e=i.rounding:Bn(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Pe=!1,t=ft(t,n,0,e,1).times(n),Pe=!0,Se(t)):(n.s=t.s,t=n),t};ce.toNumber=function(){return+this};ce.toOctal=function(n,e){return p_(this,8,n,e)};ce.toPower=ce.pow=function(n){var e,t,i,s,o,l,u=this,d=u.constructor,f=+(n=new d(n));if(!u.d||!n.d||!u.d[0]||!n.d[0])return new d(Jt(+u,f));if(u=new d(u),u.eq(1))return u;if(i=d.precision,o=d.rounding,n.eq(1))return Se(u,i,o);if(e=Sn(n.e/Re),e>=n.d.length-1&&(t=f<0?-f:f)<=DM)return s=FI(d,u,t,i),n.s<0?new d(1).div(s):Se(s,i,o);if(l=u.s,l<0){if(e<n.d.length-1)return new d(NaN);if((n.d[e]&1)==0&&(l=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=l,u}return t=Jt(+u,f),e=t==0||!isFinite(t)?Sn(f*(Math.log("0."+pn(u.d))/Math.LN10+u.e+1)):new d(t+"").e,e>d.maxE+1||e<d.minE-1?new d(e>0?l/0:0):(Pe=!1,d.rounding=u.s=1,t=Math.min(12,(e+"").length),s=nv(n.times(ra(u,i+t)),i),s.d&&(s=Se(s,i+5,1),Sh(s.d,i,o)&&(e=i+10,s=Se(nv(n.times(ra(u,e+t)),e),e+5,1),+pn(s.d).slice(i+1,i+15)+1==1e14&&(s=Se(s,i+1,0)))),s.s=l,Pe=!0,d.rounding=o,Se(s,i,o))};ce.toPrecision=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Er(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(Bn(n,1,Ea),e===void 0?e=s.rounding:Bn(e,0,8),i=Se(new s(i),n,e),t=Er(i,n<=i.e||i.e<=s.toExpNeg,n)),i.isNeg()&&!i.isZero()?"-"+t:t};ce.toSignificantDigits=ce.toSD=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(Bn(n,1,Ea),e===void 0?e=i.rounding:Bn(e,0,8)),Se(new i(t),n,e)};ce.toString=function(){var n=this,e=n.constructor,t=Er(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};ce.truncated=ce.trunc=function(){return Se(new this.constructor(this),this.e+1,1)};ce.valueOf=ce.toJSON=function(){var n=this,e=n.constructor,t=Er(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function pn(n){var e,t,i,s=n.length-1,o="",l=n[0];if(s>0){for(o+=l,e=1;e<s;e++)i=n[e]+"",t=Re-i.length,t&&(o+=Ws(t)),o+=i;l=n[e],i=l+"",t=Re-i.length,t&&(o+=Ws(t))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}function Bn(n,e,t){if(n!==~~n||n<e||n>t)throw Error(da+n)}function Sh(n,e,t,i){var s,o,l,u;for(o=n[0];o>=10;o/=10)--e;return--e<0?(e+=Re,s=0):(s=Math.ceil((e+1)/Re),e%=Re),o=Jt(10,Re-e),u=n[s]%o|0,i==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),l=t<4&&u==99999||t>3&&u==49999||u==5e4||u==0):l=(t<4&&u+1==o||t>3&&u+1==o/2)&&(n[s+1]/o/100|0)==Jt(10,e-2)-1||(u==o/2||u==0)&&(n[s+1]/o/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),l=(i||t<4)&&u==9999||!i&&t>3&&u==4999):l=((i||t<4)&&u+1==o||!i&&t>3&&u+1==o/2)&&(n[s+1]/o/1e3|0)==Jt(10,e-3)-1,l}function cm(n,e,t){for(var i,s=[0],o,l=0,u=n.length;l<u;){for(o=s.length;o--;)s[o]*=e;for(s[0]+=J0.indexOf(n.charAt(l++)),i=0;i<s.length;i++)s[i]>t-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/t|0,s[i]%=t)}return s.reverse()}function kM(n,e){var t,i,s;if(e.isZero())return e;i=e.d.length,i<32?(t=Math.ceil(i/3),s=(1/bp(4,t)).toString()):(t=16,s="2.3283064365386962890625e-10"),n.precision+=t,e=rc(n,1,e.times(s),new n(1));for(var o=t;o--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return n.precision-=t,e}var ft=(function(){function n(i,s,o){var l,u=0,d=i.length;for(i=i.slice();d--;)l=i[d]*s+u,i[d]=l%o|0,u=l/o|0;return u&&i.unshift(u),i}function e(i,s,o,l){var u,d;if(o!=l)d=o>l?1:-1;else for(u=d=0;u<o;u++)if(i[u]!=s[u]){d=i[u]>s[u]?1:-1;break}return d}function t(i,s,o,l){for(var u=0;o--;)i[o]-=u,u=i[o]<s[o]?1:0,i[o]=u*l+i[o]-s[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,o,l,u,d){var f,g,v,_,S,N,A,C,P,U,M,$,te,Z,x,R,V,O,k,B,L=i.constructor,Ce=i.s==s.s?1:-1,de=i.d,H=s.d;if(!de||!de[0]||!H||!H[0])return new L(!i.s||!s.s||(de?H&&de[0]==H[0]:!H)?NaN:de&&de[0]==0||!H?Ce*0:Ce/0);for(d?(S=1,g=i.e-s.e):(d=Ui,S=Re,g=Sn(i.e/S)-Sn(s.e/S)),k=H.length,V=de.length,P=new L(Ce),U=P.d=[],v=0;H[v]==(de[v]||0);v++);if(H[v]>(de[v]||0)&&g--,o==null?(Z=o=L.precision,l=L.rounding):u?Z=o+(i.e-s.e)+1:Z=o,Z<0)U.push(1),N=!0;else{if(Z=Z/S+2|0,v=0,k==1){for(_=0,H=H[0],Z++;(v<V||_)&&Z--;v++)x=_*d+(de[v]||0),U[v]=x/H|0,_=x%H|0;N=_||v<V}else{for(_=d/(H[0]+1)|0,_>1&&(H=n(H,_,d),de=n(de,_,d),k=H.length,V=de.length),R=k,M=de.slice(0,k),$=M.length;$<k;)M[$++]=0;B=H.slice(),B.unshift(0),O=H[0],H[1]>=d/2&&++O;do _=0,f=e(H,M,k,$),f<0?(te=M[0],k!=$&&(te=te*d+(M[1]||0)),_=te/O|0,_>1?(_>=d&&(_=d-1),A=n(H,_,d),C=A.length,$=M.length,f=e(A,M,C,$),f==1&&(_--,t(A,k<C?B:H,C,d))):(_==0&&(f=_=1),A=H.slice()),C=A.length,C<$&&A.unshift(0),t(M,A,$,d),f==-1&&($=M.length,f=e(H,M,k,$),f<1&&(_++,t(M,k<$?B:H,$,d))),$=M.length):f===0&&(_++,M=[0]),U[v++]=_,f&&M[0]?M[$++]=de[R]||0:(M=[de[R]],$=1);while((R++<V||M[0]!==void 0)&&Z--);N=M[0]!==void 0}U[0]||U.shift()}if(S==1)P.e=g,OI=N;else{for(v=1,_=U[0];_>=10;_/=10)v++;P.e=v+g*S-1,Se(P,u?o+P.e+1:o,l,N)}return P}})();function Se(n,e,t,i){var s,o,l,u,d,f,g,v,_,S=n.constructor;e:if(e!=null){if(v=n.d,!v)return n;for(s=1,u=v[0];u>=10;u/=10)s++;if(o=e-s,o<0)o+=Re,l=e,g=v[_=0],d=g/Jt(10,s-l-1)%10|0;else if(_=Math.ceil((o+1)/Re),u=v.length,_>=u)if(i){for(;u++<=_;)v.push(0);g=d=0,s=1,o%=Re,l=o-Re+1}else break e;else{for(g=u=v[_],s=1;u>=10;u/=10)s++;o%=Re,l=o-Re+s,d=l<0?0:g/Jt(10,s-l-1)%10|0}if(i=i||e<0||v[_+1]!==void 0||(l<0?g:g%Jt(10,s-l-1)),f=t<4?(d||i)&&(t==0||t==(n.s<0?3:2)):d>5||d==5&&(t==4||i||t==6&&(o>0?l>0?g/Jt(10,s-l):0:v[_-1])%10&1||t==(n.s<0?8:7)),e<1||!v[0])return v.length=0,f?(e-=n.e+1,v[0]=Jt(10,(Re-e%Re)%Re),n.e=-e||0):v[0]=n.e=0,n;if(o==0?(v.length=_,u=1,_--):(v.length=_+1,u=Jt(10,Re-o),v[_]=l>0?(g/Jt(10,s-l)%Jt(10,l)|0)*u:0),f)for(;;)if(_==0){for(o=1,l=v[0];l>=10;l/=10)o++;for(l=v[0]+=u,u=1;l>=10;l/=10)u++;o!=u&&(n.e++,v[0]==Ui&&(v[0]=1));break}else{if(v[_]+=u,v[_]!=Ui)break;v[_--]=0,u=1}for(o=v.length;v[--o]===0;)v.pop()}return Pe&&(n.e>S.maxE?(n.d=null,n.e=NaN):n.e<S.minE&&(n.e=0,n.d=[0])),n}function Er(n,e,t){if(!n.isFinite())return HI(n);var i,s=n.e,o=pn(n.d),l=o.length;return e?(t&&(i=t-l)>0?o=o.charAt(0)+"."+o.slice(1)+Ws(i):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n.e<0?"e":"e+")+n.e):s<0?(o="0."+Ws(-s-1)+o,t&&(i=t-l)>0&&(o+=Ws(i))):s>=l?(o+=Ws(s+1-l),t&&(i=t-s-1)>0&&(o=o+"."+Ws(i))):((i=s+1)<l&&(o=o.slice(0,i)+"."+o.slice(i)),t&&(i=t-l)>0&&(s+1===l&&(o+="."),o+=Ws(i))),o}function _p(n,e){var t=n[0];for(e*=Re;t>=10;t/=10)e++;return e}function Lm(n,e,t){if(e>NM)throw Pe=!0,t&&(n.precision=t),Error(LI);return Se(new n(Mm),e,1,!0)}function dr(n,e,t){if(e>tv)throw Error(LI);return Se(new n(Om),e,t,!0)}function BI(n){var e=n.length-1,t=e*Re+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function Ws(n){for(var e="";n--;)e+="0";return e}function FI(n,e,t,i){var s,o=new n(1),l=Math.ceil(i/Re+4);for(Pe=!1;;){if(t%2&&(o=o.times(e),Jw(o.d,l)&&(s=!0)),t=Sn(t/2),t===0){t=o.d.length-1,s&&o.d[t]===0&&++o.d[t];break}e=e.times(e),Jw(e.d,l)}return Pe=!0,o}function Zw(n){return n.d[n.d.length-1]&1}function qI(n,e,t){for(var i,s,o=new n(e[0]),l=0;++l<e.length;){if(s=new n(e[l]),!s.s){o=s;break}i=o.cmp(s),(i===t||i===0&&o.s===t)&&(o=s)}return o}function nv(n,e){var t,i,s,o,l,u,d,f=0,g=0,v=0,_=n.constructor,S=_.rounding,N=_.precision;if(!n.d||!n.d[0]||n.e>17)return new _(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Pe=!1,d=N):d=e,u=new _(.03125);n.e>-2;)n=n.times(u),v+=5;for(i=Math.log(Jt(2,v))/Math.LN10*2+5|0,d+=i,t=o=l=new _(1),_.precision=d;;){if(o=Se(o.times(n),d,1),t=t.times(++g),u=l.plus(ft(o,t,d,1)),pn(u.d).slice(0,d)===pn(l.d).slice(0,d)){for(s=v;s--;)l=Se(l.times(l),d,1);if(e==null)if(f<3&&Sh(l.d,d-i,S,f))_.precision=d+=10,t=o=u=new _(1),g=0,f++;else return Se(l,_.precision=N,S,Pe=!0);else return _.precision=N,l}l=u}}function ra(n,e){var t,i,s,o,l,u,d,f,g,v,_,S=1,N=10,A=n,C=A.d,P=A.constructor,U=P.rounding,M=P.precision;if(A.s<0||!C||!C[0]||!A.e&&C[0]==1&&C.length==1)return new P(C&&!C[0]?-1/0:A.s!=1?NaN:C?0:A);if(e==null?(Pe=!1,g=M):g=e,P.precision=g+=N,t=pn(C),i=t.charAt(0),Math.abs(o=A.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)A=A.times(n),t=pn(A.d),i=t.charAt(0),S++;o=A.e,i>1?(A=new P("0."+t),o++):A=new P(i+"."+t.slice(1))}else return f=Lm(P,g+2,M).times(o+""),A=ra(new P(i+"."+t.slice(1)),g-N).plus(f),P.precision=M,e==null?Se(A,M,U,Pe=!0):A;for(v=A,d=l=A=ft(A.minus(1),A.plus(1),g,1),_=Se(A.times(A),g,1),s=3;;){if(l=Se(l.times(_),g,1),f=d.plus(ft(l,new P(s),g,1)),pn(f.d).slice(0,g)===pn(d.d).slice(0,g))if(d=d.times(2),o!==0&&(d=d.plus(Lm(P,g+2,M).times(o+""))),d=ft(d,new P(S),g,1),e==null)if(Sh(d.d,g-N,U,u))P.precision=g+=N,f=l=A=ft(v.minus(1),v.plus(1),g,1),_=Se(A.times(A),g,1),s=u=1;else return Se(d,P.precision=M,U,Pe=!0);else return P.precision=M,d;d=f,s+=2}}function HI(n){return String(n.s*n.s/0)}function um(n,e){var t,i,s;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,n.e=t=t-i-1,n.d=[],i=(t+1)%Re,t<0&&(i+=Re),i<s){for(i&&n.d.push(+e.slice(0,i)),s-=Re;i<s;)n.d.push(+e.slice(i,i+=Re));e=e.slice(i),i=Re-e.length}else i-=s;for(;i--;)e+="0";n.d.push(+e),Pe&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function VM(n,e){var t,i,s,o,l,u,d,f,g;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),zI.test(e))return um(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(RM.test(e))t=16,e=e.toLowerCase();else if(IM.test(e))t=2;else if(CM.test(e))t=8;else throw Error(da+e);for(o=e.search(/p/i),o>0?(d=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),l=o>=0,i=n.constructor,l&&(e=e.replace(".",""),u=e.length,o=u-o,s=FI(i,new i(t),o,o*2)),f=cm(e,t,Ui),g=f.length-1,o=g;f[o]===0;--o)f.pop();return o<0?new i(n.s*0):(n.e=_p(f,g),n.d=f,Pe=!1,l&&(n=ft(n,s,u*4)),d&&(n=n.times(Math.abs(d)<54?Jt(2,d):$r.pow(2,d))),Pe=!0,n)}function PM(n,e){var t,i=e.d.length;if(i<3)return e.isZero()?e:rc(n,2,e,e);t=1.4*Math.sqrt(i),t=t>16?16:t|0,e=e.times(1/bp(5,t)),e=rc(n,2,e,e);for(var s,o=new n(5),l=new n(16),u=new n(20);t--;)s=e.times(e),e=e.times(o.plus(s.times(l.times(s).minus(u))));return e}function rc(n,e,t,i,s){var o,l,u,d,f=n.precision,g=Math.ceil(f/Re);for(Pe=!1,d=t.times(t),u=new n(i);;){if(l=ft(u.times(d),new n(e++*e++),f,1),u=s?i.plus(l):i.minus(l),i=ft(l.times(d),new n(e++*e++),f,1),l=u.plus(i),l.d[g]!==void 0){for(o=g;l.d[o]===u.d[o]&&o--;);if(o==-1)break}o=u,u=i,i=l,l=o}return Pe=!0,l.d.length=g+1,l}function bp(n,e){for(var t=n;--e;)t*=n;return t}function GI(n,e){var t,i=e.s<0,s=dr(n,n.precision,1),o=s.times(.5);if(e=e.abs(),e.lte(o))return Yr=i?4:1,e;if(t=e.divToInt(s),t.isZero())Yr=i?3:2;else{if(e=e.minus(t.times(s)),e.lte(o))return Yr=Zw(t)?i?2:3:i?4:1,e;Yr=Zw(t)?i?1:4:i?3:2}return e.minus(s).abs()}function p_(n,e,t,i){var s,o,l,u,d,f,g,v,_,S=n.constructor,N=t!==void 0;if(N?(Bn(t,1,Ea),i===void 0?i=S.rounding:Bn(i,0,8)):(t=S.precision,i=S.rounding),!n.isFinite())g=HI(n);else{for(g=Er(n),l=g.indexOf("."),N?(s=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):s=e,l>=0&&(g=g.replace(".",""),_=new S(1),_.e=g.length-l,_.d=cm(Er(_),10,s),_.e=_.d.length),v=cm(g,10,s),o=d=v.length;v[--d]==0;)v.pop();if(!v[0])g=N?"0p+0":"0";else{if(l<0?o--:(n=new S(n),n.d=v,n.e=o,n=ft(n,_,t,i,0,s),v=n.d,o=n.e,f=OI),l=v[t],u=s/2,f=f||v[t+1]!==void 0,f=i<4?(l!==void 0||f)&&(i===0||i===(n.s<0?3:2)):l>u||l===u&&(i===4||f||i===6&&v[t-1]&1||i===(n.s<0?8:7)),v.length=t,f)for(;++v[--t]>s-1;)v[t]=0,t||(++o,v.unshift(1));for(d=v.length;!v[d-1];--d);for(l=0,g="";l<d;l++)g+=J0.charAt(v[l]);if(N){if(d>1)if(e==16||e==8){for(l=e==16?4:3,--d;d%l;d++)g+="0";for(v=cm(g,s,e),d=v.length;!v[d-1];--d);for(l=1,g="1.";l<d;l++)g+=J0.charAt(v[l])}else g=g.charAt(0)+"."+g.slice(1);g=g+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)g="0"+g;g="0."+g}else if(++o>d)for(o-=d;o--;)g+="0";else o<d&&(g=g.slice(0,o)+"."+g.slice(o))}g=(e==16?"0x":e==2?"0b":e==8?"0o":"")+g}return n.s<0?"-"+g:g}function Jw(n,e){if(n.length>e)return n.length=e,!0}function MM(n){return new this(n).abs()}function OM(n){return new this(n).acos()}function LM(n){return new this(n).acosh()}function jM(n,e){return new this(n).plus(e)}function UM(n){return new this(n).asin()}function zM(n){return new this(n).asinh()}function BM(n){return new this(n).atan()}function FM(n){return new this(n).atanh()}function qM(n,e){n=new this(n),e=new this(e);var t,i=this.precision,s=this.rounding,o=i+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=dr(this,o,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?dr(this,i,s):new this(0),t.s=n.s):!n.d||e.isZero()?(t=dr(this,o,1).times(.5),t.s=n.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(ft(n,e,o,1)),e=dr(this,o,1),this.precision=i,this.rounding=s,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(ft(n,e,o,1)),t}function HM(n){return new this(n).cbrt()}function GM(n){return Se(n=new this(n),n.e+1,2)}function $M(n,e,t){return new this(n).clamp(e,t)}function KM(n){if(!n||typeof n!="object")throw Error(vp+"Object expected");var e,t,i,s=n.defaults===!0,o=["precision",1,Ea,"rounding",0,8,"toExpNeg",-$l,0,"toExpPos",0,$l,"maxE",0,$l,"minE",-$l,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],s&&(this[t]=ev[t]),(i=n[t])!==void 0)if(Sn(i)===i&&i>=o[e+1]&&i<=o[e+2])this[t]=i;else throw Error(da+t+": "+i);if(t="crypto",s&&(this[t]=ev[t]),(i=n[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(jI);else this[t]=!1;else throw Error(da+t+": "+i);return this}function YM(n){return new this(n).cos()}function QM(n){return new this(n).cosh()}function $I(n){var e,t,i;function s(o){var l,u,d,f=this;if(!(f instanceof s))return new s(o);if(f.constructor=s,eS(o)){f.s=o.s,Pe?!o.d||o.e>s.maxE?(f.e=NaN,f.d=null):o.e<s.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(d=typeof o,d==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(l=0,u=o;u>=10;u/=10)l++;Pe?l>s.maxE?(f.e=NaN,f.d=null):l<s.minE?(f.e=0,f.d=[0]):(f.e=l,f.d=[o]):(f.e=l,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return um(f,o.toString())}if(d==="string")return(u=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(u===43&&(o=o.slice(1)),f.s=1),zI.test(o)?um(f,o):VM(f,o);if(d==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,um(f,o.toString());throw Error(da+o)}if(s.prototype=ce,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=KM,s.clone=$I,s.isDecimal=eS,s.abs=MM,s.acos=OM,s.acosh=LM,s.add=jM,s.asin=UM,s.asinh=zM,s.atan=BM,s.atanh=FM,s.atan2=qM,s.cbrt=HM,s.ceil=GM,s.clamp=$M,s.cos=YM,s.cosh=QM,s.div=XM,s.exp=WM,s.floor=ZM,s.hypot=JM,s.ln=eO,s.log=tO,s.log10=iO,s.log2=nO,s.max=rO,s.min=sO,s.mod=aO,s.mul=oO,s.pow=lO,s.random=cO,s.round=uO,s.sign=hO,s.sin=dO,s.sinh=fO,s.sqrt=mO,s.sub=pO,s.sum=gO,s.tan=yO,s.tanh=vO,s.trunc=_O,n===void 0&&(n={}),n&&n.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return s.config(n),s}function XM(n,e){return new this(n).div(e)}function WM(n){return new this(n).exp()}function ZM(n){return Se(n=new this(n),n.e+1,3)}function JM(){var n,e,t=new this(0);for(Pe=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Pe=!0,new this(1/0);t=e}return Pe=!0,t.sqrt()}function eS(n){return n instanceof $r||n&&n.toStringTag===UI||!1}function eO(n){return new this(n).ln()}function tO(n,e){return new this(n).log(e)}function nO(n){return new this(n).log(2)}function iO(n){return new this(n).log(10)}function rO(){return qI(this,arguments,-1)}function sO(){return qI(this,arguments,1)}function aO(n,e){return new this(n).mod(e)}function oO(n,e){return new this(n).mul(e)}function lO(n,e){return new this(n).pow(e)}function cO(n){var e,t,i,s,o=0,l=new this(1),u=[];if(n===void 0?n=this.precision:Bn(n,1,Ea),i=Math.ceil(n/Re),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)s=e[o],s>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:u[o++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)s=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,o):(u.push(s%1e7),o+=4);o=i/4}else throw Error(jI);else for(;o<i;)u[o++]=Math.random()*1e7|0;for(i=u[--o],n%=Re,i&&n&&(s=Jt(10,Re-n),u[o]=(i/s|0)*s);u[o]===0;o--)u.pop();if(o<0)t=0,u=[0];else{for(t=-1;u[0]===0;t-=Re)u.shift();for(i=1,s=u[0];s>=10;s/=10)i++;i<Re&&(t-=Re-i)}return l.e=t,l.d=u,l}function uO(n){return Se(n=new this(n),n.e+1,this.rounding)}function hO(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function dO(n){return new this(n).sin()}function fO(n){return new this(n).sinh()}function mO(n){return new this(n).sqrt()}function pO(n,e){return new this(n).sub(e)}function gO(){var n=0,e=arguments,t=new this(e[n]);for(Pe=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Pe=!0,Se(t,this.precision,this.rounding)}function yO(n){return new this(n).tan()}function vO(n){return new this(n).tanh()}function _O(n){return Se(n=new this(n),n.e+1,1)}ce[Symbol.for("nodejs.util.inspect.custom")]=ce.toString;ce[Symbol.toStringTag]="Decimal";var $r=ce.constructor=$I(ev);Mm=new $r(Mm);Om=new $r(Om);const bO=()=>{};var tS={};const KI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},TO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},YI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,g=o>>2,v=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,S=f&63;d||(S=64,l||(_=64)),i.push(t[g],t[v],t[_],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||f==null||v==null)throw new EO;const _=o<<2|u>>4;if(i.push(_),f!==64){const S=u<<4&240|f>>2;if(i.push(S),v!==64){const N=f<<6&192|v;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class EO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wO=function(n){const e=KI(n);return YI.encodeByteArray(e,!0)},QI=function(n){return wO(n).replace(/\./g,"")},XI=function(n){try{return YI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const SO=()=>WI().__FIREBASE_DEFAULTS__,xO=()=>{if(typeof process>"u"||typeof tS>"u")return;const n=tS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},AO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&XI(n[1]);return e&&JSON.parse(e)},Tp=()=>{try{return bO()||SO()||xO()||AO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IO=n=>Tp()?.emulatorHosts?.[n],ZI=()=>Tp()?.config,JI=n=>Tp()?.[`_${n}`];class RO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Ic(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eR(n){return(await fetch(n,{credentials:"include"})).ok}const oh={};function CO(){const n={prod:[],emulator:[]};for(const e of Object.keys(oh))oh[e]?n.emulator.push(e):n.prod.push(e);return n}function DO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let nS=!1;function NO(n,e){if(typeof window>"u"||typeof document>"u"||!Ic(window.location.host)||oh[n]===e||oh[n]||nS)return;oh[n]=e;function t(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=CO().prod.length>0;function l(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,S){_.setAttribute("width","24"),_.setAttribute("id",S),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{nS=!0,l()},_}function g(_,S){_.setAttribute("id",S),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=DO(i),S=t("text"),N=document.getElementById(S)||document.createElement("span"),A=t("learnmore"),C=document.getElementById(A)||document.createElement("a"),P=t("preprendIcon"),U=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const M=_.element;u(M),g(C,A);const $=f();d(U,P),M.append(U,N,C,$),document.body.appendChild(M)}o?(N.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function tR(){const n=Tp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function MO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OO(){const n=en();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nR(){return!tR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iR(){return!tR()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function rR(){try{return typeof indexedDB=="object"}catch{return!1}}function LO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const jO="FirebaseError";class ls extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=jO,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zh.prototype.create)}}class Zh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?UO(o,i):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new ls(s,u,i)}}function UO(n,e){return n.replace(zO,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const zO=/\{\$([^}]+)}/g;function BO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ro(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],l=e[s];if(iS(o)&&iS(l)){if(!Ro(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function iS(n){return n!==null&&typeof n=="object"}function Jh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ju(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function eh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function FO(n,e){const t=new qO(n,e);return t.subscribe.bind(t)}class qO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");HO(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=f0),s.error===void 0&&(s.error=f0),s.complete===void 0&&(s.complete=f0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function f0(){}function Qt(n){return n&&n._delegate?n._delegate:n}class Co{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const co="[DEFAULT]";class GO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new RO;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KO(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$O(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $O(n){return n===co?void 0:n}function KO(n){return n.instantiationMode==="EAGER"}class YO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const QO={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},XO=Ge.INFO,WO={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},ZO=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=WO[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class g_{constructor(e){this.name=e,this._logLevel=XO,this._logHandler=ZO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const JO=(n,e)=>e.some(t=>n instanceof t);let rS,sS;function e3(){return rS||(rS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t3(){return sS||(sS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sR=new WeakMap,iv=new WeakMap,aR=new WeakMap,m0=new WeakMap,y_=new WeakMap;function n3(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(aa(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&sR.set(t,n)}).catch(()=>{}),y_.set(e,n),e}function i3(n){if(iv.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});iv.set(n,e)}let rv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return iv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||aR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return aa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function r3(n){rv=n(rv)}function s3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(p0(this),e,...t);return aR.set(i,e.sort?e.sort():[e]),aa(i)}:t3().includes(n)?function(...e){return n.apply(p0(this),e),aa(sR.get(this))}:function(...e){return aa(n.apply(p0(this),e))}}function a3(n){return typeof n=="function"?s3(n):(n instanceof IDBTransaction&&i3(n),JO(n,e3())?new Proxy(n,rv):n)}function aa(n){if(n instanceof IDBRequest)return n3(n);if(m0.has(n))return m0.get(n);const e=a3(n);return e!==n&&(m0.set(n,e),y_.set(e,n)),e}const p0=n=>y_.get(n);function o3(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=aa(l);return i&&l.addEventListener("upgradeneeded",d=>{i(aa(l.result),d.oldVersion,d.newVersion,aa(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const l3=["get","getKey","getAll","getAllKeys","count"],c3=["put","add","delete","clear"],g0=new Map;function aS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(g0.get(e))return g0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=c3.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||l3.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return g0.set(e,o),o}r3(n=>({...n,get:(e,t,i)=>aS(e,t)||n.get(e,t,i),has:(e,t)=>!!aS(e,t)||n.has(e,t)}));class u3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(h3(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function h3(n){return n.getComponent()?.type==="VERSION"}const sv="@firebase/app",oS="0.14.6";const ns=new g_("@firebase/app"),d3="@firebase/app-compat",f3="@firebase/analytics-compat",m3="@firebase/analytics",p3="@firebase/app-check-compat",g3="@firebase/app-check",y3="@firebase/auth",v3="@firebase/auth-compat",_3="@firebase/database",b3="@firebase/data-connect",T3="@firebase/database-compat",E3="@firebase/functions",w3="@firebase/functions-compat",S3="@firebase/installations",x3="@firebase/installations-compat",A3="@firebase/messaging",I3="@firebase/messaging-compat",R3="@firebase/performance",C3="@firebase/performance-compat",D3="@firebase/remote-config",N3="@firebase/remote-config-compat",k3="@firebase/storage",V3="@firebase/storage-compat",P3="@firebase/firestore",M3="@firebase/ai",O3="@firebase/firestore-compat",L3="firebase",j3="12.6.0";const av="[DEFAULT]",U3={[sv]:"fire-core",[d3]:"fire-core-compat",[m3]:"fire-analytics",[f3]:"fire-analytics-compat",[g3]:"fire-app-check",[p3]:"fire-app-check-compat",[y3]:"fire-auth",[v3]:"fire-auth-compat",[_3]:"fire-rtdb",[b3]:"fire-data-connect",[T3]:"fire-rtdb-compat",[E3]:"fire-fn",[w3]:"fire-fn-compat",[S3]:"fire-iid",[x3]:"fire-iid-compat",[A3]:"fire-fcm",[I3]:"fire-fcm-compat",[R3]:"fire-perf",[C3]:"fire-perf-compat",[D3]:"fire-rc",[N3]:"fire-rc-compat",[k3]:"fire-gcs",[V3]:"fire-gcs-compat",[P3]:"fire-fst",[O3]:"fire-fst-compat",[M3]:"fire-vertex","fire-js":"fire-js",[L3]:"fire-js-all"};const jm=new Map,z3=new Map,ov=new Map;function lS(n,e){try{n.container.addComponent(e)}catch(t){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sc(n){const e=n.name;if(ov.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;ov.set(e,n);for(const t of jm.values())lS(t,n);for(const t of z3.values())lS(t,n);return!0}function v_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vi(n){return n==null?!1:n.settings!==void 0}const B3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oa=new Zh("app","Firebase",B3);class F3{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oa.create("app-deleted",{appName:this._name})}}const Rc=j3;function oR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:av,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw oa.create("bad-app-name",{appName:String(s)});if(t||(t=ZI()),!t)throw oa.create("no-options");const o=jm.get(s);if(o){if(Ro(t,o.options)&&Ro(i,o.config))return o;throw oa.create("duplicate-app",{appName:s})}const l=new YO(s);for(const d of ov.values())l.addComponent(d);const u=new F3(t,i,l);return jm.set(s,u),u}function q3(n=av){const e=jm.get(n);if(!e&&n===av&&ZI())return oR();if(!e)throw oa.create("no-app",{appName:n});return e}function la(n,e,t){let i=U3[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(l.join(" "));return}sc(new Co(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const H3="firebase-heartbeat-database",G3=1,xh="firebase-heartbeat-store";let y0=null;function lR(){return y0||(y0=o3(H3,G3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xh)}catch(t){console.warn(t)}}}}).catch(n=>{throw oa.create("idb-open",{originalErrorMessage:n.message})})),y0}async function $3(n){try{const t=(await lR()).transaction(xh),i=await t.objectStore(xh).get(cR(n));return await t.done,i}catch(e){if(e instanceof ls)ns.warn(e.message);else{const t=oa.create("idb-get",{originalErrorMessage:e?.message});ns.warn(t.message)}}}async function cS(n,e){try{const i=(await lR()).transaction(xh,"readwrite");await i.objectStore(xh).put(e,cR(n)),await i.done}catch(t){if(t instanceof ls)ns.warn(t.message);else{const i=oa.create("idb-set",{originalErrorMessage:t?.message});ns.warn(i.message)}}}function cR(n){return`${n.name}!${n.options.appId}`}const K3=1024,Y3=30;class Q3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new W3(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=uS();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Y3){const s=Z3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ns.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=uS(),{heartbeatsToSend:t,unsentEntries:i}=X3(this._heartbeatsCache.heartbeats),s=QI(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ns.warn(e),""}}}function uS(){return new Date().toISOString().substring(0,10)}function X3(n,e=K3){const t=[];let i=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),hS(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),hS(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class W3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rR()?LO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return cS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return cS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function hS(n){return QI(JSON.stringify({version:2,heartbeats:n})).length}function Z3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function J3(n){sc(new Co("platform-logger",e=>new u3(e),"PRIVATE")),sc(new Co("heartbeat",e=>new Q3(e),"PRIVATE")),la(sv,oS,n),la(sv,oS,"esm2020"),la("fire-js","")}J3("");function uR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const e5=uR,hR=new Zh("auth","Firebase",uR());const Um=new g_("@firebase/auth");function t5(n,...e){Um.logLevel<=Ge.WARN&&Um.warn(`Auth (${Rc}): ${n}`,...e)}function hm(n,...e){Um.logLevel<=Ge.ERROR&&Um.error(`Auth (${Rc}): ${n}`,...e)}function Bi(n,...e){throw __(n,...e)}function gr(n,...e){return __(n,...e)}function dR(n,e,t){const i={...e5(),[e]:t};return new Zh("auth","Firebase",i).create(e,{appName:n.name})}function Jr(n){return dR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function __(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return hR.create(n,...e)}function De(n,e,...t){if(!n)throw __(e,...t)}function Qr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw hm(e),new Error(e)}function is(n,e){n||Qr(e)}function lv(){return typeof self<"u"&&self.location?.href||""}function n5(){return dS()==="http:"||dS()==="https:"}function dS(){return typeof self<"u"&&self.location?.protocol||null}function i5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n5()||PO()||"connection"in navigator)?navigator.onLine:!0}function r5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ed{constructor(e,t){this.shortDelay=e,this.longDelay=t,is(t>e,"Short delay should be less than long delay!"),this.isMobile=kO()||MO()}get(){return i5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function b_(n,e){is(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class fR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const s5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const a5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o5=new ed(3e4,6e4);function cs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ar(n,e,t,i,s={}){return mR(n,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const u=Jh({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...o};return VO()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ic(n.emulatorConfig.host)&&(f.credentials="include"),fR.fetch()(await pR(n,n.config.apiHost,t,u),f)})}async function mR(n,e,t){n._canInitEmulator=!1;const i={...s5,...e};try{const s=new c5(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Yf(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yf(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Yf(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Yf(n,"user-disabled",l);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw dR(n,g,f);Bi(n,g)}}catch(s){if(s instanceof ls)throw s;Bi(n,"network-request-failed",{message:String(s)})}}async function td(n,e,t,i,s={}){const o=await Ar(n,e,t,i,s);return"mfaPendingCredential"in o&&Bi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function pR(n,e,t,i){const s=`${e}${t}?${i}`,o=n,l=o.config.emulator?b_(n.config,s):`${n.config.apiScheme}://${s}`;return a5.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function l5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class c5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(gr(this.auth,"network-request-failed")),o5.get())})}}function Yf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=gr(n,e,i);return s.customData._tokenResponse=t,s}function fS(n){return n!==void 0&&n.enterprise!==void 0}class u5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return l5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function h5(n,e){return Ar(n,"GET","/v2/recaptchaConfig",cs(n,e))}async function d5(n,e){return Ar(n,"POST","/v1/accounts:delete",e)}async function zm(n,e){return Ar(n,"POST","/v1/accounts:lookup",e)}function lh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function f5(n,e=!1){const t=Qt(n),i=await t.getIdToken(e),s=T_(i);De(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:i,authTime:lh(v0(s.auth_time)),issuedAtTime:lh(v0(s.iat)),expirationTime:lh(v0(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function v0(n){return Number(n)*1e3}function T_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return hm("JWT malformed, contained fewer than 3 sections"),null;try{const s=XI(t);return s?JSON.parse(s):(hm("Failed to decode base64 JWT payload"),null)}catch(s){return hm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function mS(n){const e=T_(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ac(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ls&&m5(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function m5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class p5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class cv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lh(this.lastLoginAt),this.creationTime=lh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bm(n){const e=n.auth,t=await n.getIdToken(),i=await ac(n,zm(e,{idToken:t}));De(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?gR(s.providerUserInfo):[],l=y5(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new cv(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function g5(n){const e=Qt(n);await Bm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function y5(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function gR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function v5(n,e){const t=await mR(n,{},async()=>{const i=Jh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await pR(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:i};return n.emulatorConfig&&Ic(n.emulatorConfig.host)&&(d.credentials="include"),fR.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _5(n,e){return Ar(n,"POST","/v2/accounts:revokeToken",cs(n,e))}class Jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=mS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:o}=await v5(e,t);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:o}=t,l=new Jl;return i&&(De(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(De(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(De(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jl,this.toJSON())}_performRefresh(){return Qr("not implemented")}}function $s(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ji{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new p5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ac(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return f5(this,e)}reload(){return g5(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ji({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Bm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(Jr(this.auth));const e=await this.getIdToken();return await ac(this,d5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:S,providerData:N,stsTokenManager:A}=t;De(v&&A,e,"internal-error");const C=Jl.fromJSON(this.name,A);De(typeof v=="string",e,"internal-error"),$s(i,e.name),$s(s,e.name),De(typeof _=="boolean",e,"internal-error"),De(typeof S=="boolean",e,"internal-error"),$s(o,e.name),$s(l,e.name),$s(u,e.name),$s(d,e.name),$s(f,e.name),$s(g,e.name);const P=new ji({uid:v,auth:e,email:s,emailVerified:_,displayName:i,isAnonymous:S,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:C,createdAt:f,lastLoginAt:g});return N&&Array.isArray(N)&&(P.providerData=N.map(U=>({...U}))),d&&(P._redirectEventId=d),P}static async _fromIdTokenResponse(e,t,i=!1){const s=new Jl;s.updateFromServerResponse(t);const o=new ji({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Bm(o),o}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];De(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?gR(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new Jl;u.updateFromIdToken(i);const d=new ji({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new cv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const pS=new Map;function Xr(n){is(n instanceof Function,"Expected a class definition");let e=pS.get(n);return e?(is(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pS.set(n,e),e)}class yR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yR.type="NONE";const gS=yR;function dm(n,e,t){return`firebase:${n}:${e}:${t}`}class ec{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=dm(this.userKey,s.apiKey,o),this.fullPersistenceKey=dm("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await zm(this.auth,{idToken:e}).catch(()=>{});return t?ji._fromGetAccountInfoResponse(this.auth,t,e):null}return ji._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ec(Xr(gS),e,i);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Xr(gS);const l=dm(i,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(l);if(g){let v;if(typeof g=="string"){const _=await zm(e,{idToken:g}).catch(()=>{});if(!_)break;v=await ji._fromGetAccountInfoResponse(e,_,g)}else v=ji._fromJSON(e,g);f!==o&&(u=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new ec(o,e,i):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new ec(o,e,i))}}function yS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wR(e))return"Blackberry";if(SR(e))return"Webos";if(_R(e))return"Safari";if((e.includes("chrome/")||bR(e))&&!e.includes("edge/"))return"Chrome";if(ER(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function vR(n=en()){return/firefox\//i.test(n)}function _R(n=en()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bR(n=en()){return/crios\//i.test(n)}function TR(n=en()){return/iemobile/i.test(n)}function ER(n=en()){return/android/i.test(n)}function wR(n=en()){return/blackberry/i.test(n)}function SR(n=en()){return/webos/i.test(n)}function E_(n=en()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function b5(n=en()){return E_(n)&&!!window.navigator?.standalone}function T5(){return OO()&&document.documentMode===10}function xR(n=en()){return E_(n)||ER(n)||SR(n)||wR(n)||/windows phone/i.test(n)||TR(n)}function AR(n,e=[]){let t;switch(n){case"Browser":t=yS(en());break;case"Worker":t=`${yS(en())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Rc}/${i}`}class E5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function w5(n,e={}){return Ar(n,"GET","/v2/passwordPolicy",cs(n,e))}const S5=6;class x5{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??S5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class A5{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vS(this),this.idTokenSubscription=new vS(this),this.beforeStateQueue=new E5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ec.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await zm(this,{idToken:e}),i=await ji._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(vi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=r5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vi(this.app))return Promise.reject(Jr(this));const t=e?Qt(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(Jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vi(this.app)?Promise.reject(Jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await w5(this),t=new x5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await _5(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await ec.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&t5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wa(n){return Qt(n)}class vS{constructor(e){this.auth=e,this.observer=null,this.addObserver=FO(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ep={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function I5(n){Ep=n}function IR(n){return Ep.loadJS(n)}function R5(){return Ep.recaptchaEnterpriseScript}function C5(){return Ep.gapiScript}function D5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class N5{constructor(){this.enterprise=new k5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class k5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const V5="recaptcha-enterprise",RR="NO_RECAPTCHA";class P5{constructor(e){this.type=V5,this.auth=wa(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{h5(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new u5(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;fS(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(RR)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new N5().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(u=>{if(!t&&fS(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=R5();d.length!==0&&(d+=u),IR(d).then(()=>{s(u,o,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function _S(n,e,t,i=!1,s=!1){const o=new P5(n);let l;if(s)l=RR;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Fm(n,e,t,i,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await _S(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await _S(n,e,t,t==="getOobCode");return i(n,l)}else return Promise.reject(o)})}function M5(n,e){const t=v_(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Ro(o,e??{}))return s;Bi(s,"already-initialized")}return t.initialize({options:e})}function O5(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Xr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function L5(n,e,t){const i=wa(n);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=CR(e),{host:l,port:u}=j5(e),d=u===null?"":`:${u}`,f={url:`${o}//${l}${d}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Ro(f,i.config.emulator)&&Ro(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Ic(l)?(eR(`${o}//${l}${d}`),NO("Auth",!0)):U5()}function CR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function j5(n){const e=CR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:bS(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:bS(l)}}}function bS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function U5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class w_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,t){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}async function z5(n,e){return Ar(n,"POST","/v1/accounts:signUp",e)}async function B5(n,e){return td(n,"POST","/v1/accounts:signInWithPassword",cs(n,e))}async function F5(n,e){return Ar(n,"POST","/v1/accounts:sendOobCode",cs(n,e))}async function q5(n,e){return F5(n,e)}async function H5(n,e){return td(n,"POST","/v1/accounts:signInWithEmailLink",cs(n,e))}async function G5(n,e){return td(n,"POST","/v1/accounts:signInWithEmailLink",cs(n,e))}class Ah extends w_{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Ah(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ah(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fm(e,t,"signInWithPassword",B5);case"emailLink":return H5(e,{email:this._email,oobCode:this._password});default:Bi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fm(e,i,"signUpPassword",z5);case"emailLink":return G5(e,{idToken:t,email:this._email,oobCode:this._password});default:Bi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function tc(n,e){return td(n,"POST","/v1/accounts:signInWithIdp",cs(n,e))}const $5="http://localhost";class Do extends w_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=t;if(!i||!s)return null;const l=new Do(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return tc(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,tc(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tc(e,t)}buildRequest(){const e={requestUri:$5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jh(t)}return e}}function K5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y5(n){const e=Ju(eh(n)).link,t=e?Ju(eh(e)).deep_link_id:null,i=Ju(eh(n)).deep_link_id;return(i?Ju(eh(i)).link:null)||i||t||e||n}class S_{constructor(e){const t=Ju(eh(e)),i=t.apiKey??null,s=t.oobCode??null,o=K5(t.mode??null);De(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Y5(e);try{return new S_(t)}catch{return null}}}class Cc{constructor(){this.providerId=Cc.PROVIDER_ID}static credential(e,t){return Ah._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=S_.parseLink(t);return De(i,"argument-error"),Ah._fromEmailAndCode(e,i.code,i.tenantId)}}Cc.PROVIDER_ID="password";Cc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class DR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class nd extends DR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zs extends nd{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zs.PROVIDER_ID="facebook.com";class Js extends nd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Do._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Js.credential(t,i)}catch{return null}}}Js.GOOGLE_SIGN_IN_METHOD="google.com";Js.PROVIDER_ID="google.com";class ea extends nd{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.GITHUB_SIGN_IN_METHOD="github.com";ea.PROVIDER_ID="github.com";class ta extends nd{constructor(){super("twitter.com")}static credential(e,t){return Do._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ta.credential(t,i)}catch{return null}}}ta.TWITTER_SIGN_IN_METHOD="twitter.com";ta.PROVIDER_ID="twitter.com";async function Q5(n,e){return td(n,"POST","/v1/accounts:signUp",cs(n,e))}class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const o=await ji._fromIdTokenResponse(e,i,s),l=TS(i);return new No({user:o,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=TS(i);return new No({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function TS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class qm extends ls{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,qm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new qm(e,t,i,s)}}function NR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qm._fromErrorAndOperation(n,o,e,i):o})}async function X5(n,e,t=!1){const i=await ac(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return No._forOperation(n,"link",i)}async function W5(n,e,t=!1){const{auth:i}=n;if(vi(i.app))return Promise.reject(Jr(i));const s="reauthenticate";try{const o=await ac(n,NR(i,s,e,n),t);De(o.idToken,i,"internal-error");const l=T_(o.idToken);De(l,i,"internal-error");const{sub:u}=l;return De(n.uid===u,i,"user-mismatch"),No._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Bi(i,"user-mismatch"),o}}async function kR(n,e,t=!1){if(vi(n.app))return Promise.reject(Jr(n));const i="signIn",s=await NR(n,i,e),o=await No._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(o.user),o}async function Z5(n,e){return kR(wa(n),e)}async function VR(n){const e=wa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function J5(n,e,t){const i=wa(n);await Fm(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",q5)}async function e6(n,e,t){if(vi(n.app))return Promise.reject(Jr(n));const i=wa(n),l=await Fm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q5).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&VR(n),d}),u=await No._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function t6(n,e,t){return vi(n.app)?Promise.reject(Jr(n)):Z5(Qt(n),Cc.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&VR(n),i})}async function n6(n,e){return Ar(n,"POST","/v1/accounts:update",e)}async function i6(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Qt(n),o={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await ac(i,n6(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const u=i.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function r6(n,e,t,i){return Qt(n).onIdTokenChanged(e,t,i)}function s6(n,e,t){return Qt(n).beforeAuthStateChanged(e,t)}function a6(n,e,t,i){return Qt(n).onAuthStateChanged(e,t,i)}function o6(n){return Qt(n).signOut()}const Hm="__sak";class PR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hm,"1"),this.storage.removeItem(Hm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const l6=1e3,c6=10;class MR extends PR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);T5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,c6):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},l6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}MR.type="LOCAL";const u6=MR;class OR extends PR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}OR.type="SESSION";const LR=OR;function h6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class wp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new wp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(l).map(async f=>f(t.origin,o)),d=await h6(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wp.receivers=[];function x_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class d6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const f=x_("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function yr(){return window}function f6(n){yr().location.href=n}function jR(){return typeof yr().WorkerGlobalScope<"u"&&typeof yr().importScripts=="function"}async function m6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p6(){return navigator?.serviceWorker?.controller||null}function g6(){return jR()?self:null}const UR="firebaseLocalStorageDb",y6=1,Gm="firebaseLocalStorage",zR="fbase_key";class id{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sp(n,e){return n.transaction([Gm],e?"readwrite":"readonly").objectStore(Gm)}function v6(){const n=indexedDB.deleteDatabase(UR);return new id(n).toPromise()}function uv(){const n=indexedDB.open(UR,y6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Gm,{keyPath:zR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Gm)?e(i):(i.close(),await v6(),e(await uv()))})})}async function ES(n,e,t){const i=Sp(n,!0).put({[zR]:e,value:t});return new id(i).toPromise()}async function _6(n,e){const t=Sp(n,!1).get(e),i=await new id(t).toPromise();return i===void 0?null:i.value}function wS(n,e){const t=Sp(n,!0).delete(e);return new id(t).toPromise()}const b6=800,T6=3;class BR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>T6)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wp._getInstance(g6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await m6(),!this.activeServiceWorker)return;this.sender=new d6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uv();return await ES(e,Hm,"1"),await wS(e,Hm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ES(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>_6(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Sp(s,!1).getAll();return new id(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BR.type="LOCAL";const E6=BR;new ed(3e4,6e4);function w6(n,e){return e?Xr(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class A_ extends w_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function S6(n){return kR(n.auth,new A_(n),n.bypassAuthState)}function x6(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),W5(t,new A_(n),n.bypassAuthState)}async function A6(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),X5(t,new A_(n),n.bypassAuthState)}class FR{constructor(e,t,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S6;case"linkViaPopup":case"linkViaRedirect":return A6;case"reauthViaPopup":case"reauthViaRedirect":return x6;default:Bi(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const I6=new ed(2e3,1e4);class Kl extends FR{constructor(e,t,i,s,o){super(e,t,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Kl.currentPopupAction&&Kl.currentPopupAction.cancel(),Kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const e=x_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,I6.get())};e()}}Kl.currentPopupAction=null;const R6="pendingRedirect",fm=new Map;class C6 extends FR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=fm.get(this.auth._key());if(!e){try{const i=await D6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}fm.set(this.auth._key(),e)}return this.bypassAuthState||fm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function D6(n,e){const t=V6(e),i=k6(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function N6(n,e){fm.set(n._key(),e)}function k6(n){return Xr(n._redirectPersistence)}function V6(n){return dm(R6,n.config.apiKey,n.name)}async function P6(n,e,t=!1){if(vi(n.app))return Promise.reject(Jr(n));const i=wa(n),s=w6(i,e),l=await new C6(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}const M6=600*1e3;class O6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!L6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!qR(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(gr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=M6&&this.cachedEventUids.clear(),this.cachedEventUids.has(SS(e))}saveEventToCache(e){this.cachedEventUids.add(SS(e)),this.lastProcessedEventTime=Date.now()}}function SS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function qR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function L6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qR(n);default:return!1}}async function j6(n,e={}){return Ar(n,"GET","/v1/projects",e)}const U6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z6=/^https?/;async function B6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await j6(n);for(const t of e)try{if(F6(t))return}catch{}Bi(n,"unauthorized-domain")}function F6(n){const e=lv(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!z6.test(t))return!1;if(U6.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const q6=new ed(3e4,6e4);function xS(){const n=yr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function H6(n){return new Promise((e,t)=>{function i(){xS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xS(),t(gr(n,"network-request-failed"))},timeout:q6.get()})}if(yr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yr().gapi?.load)i();else{const s=D5("iframefcb");return yr()[s]=()=>{gapi.load?i():t(gr(n,"network-request-failed"))},IR(`${C5()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw mm=null,e})}let mm=null;function G6(n){return mm=mm||H6(n),mm}const $6=new ed(5e3,15e3),K6="__/auth/iframe",Y6="emulator/auth/iframe",Q6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W6(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?b_(e,Y6):`https://${n.config.authDomain}/${K6}`,i={apiKey:e.apiKey,appName:n.name,v:Rc},s=X6.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Jh(i).slice(1)}`}async function Z6(n){const e=await G6(n),t=yr().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:W6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q6,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=gr(n,"network-request-failed"),u=yr().setTimeout(()=>{o(l)},$6.get());function d(){yr().clearTimeout(u),s(i)}i.ping(d).then(d,()=>{o(l)})}))}const J6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eL=500,tL=600,nL="_blank",iL="http://localhost";class AS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rL(n,e,t,i=eL,s=tL){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d={...J6,width:i.toString(),height:s.toString(),top:o,left:l},f=en().toLowerCase();t&&(u=bR(f)?nL:t),vR(f)&&(e=e||iL,d.scrollbars="yes");const g=Object.entries(d).reduce((_,[S,N])=>`${_}${S}=${N},`,"");if(b5(f)&&u!=="_self")return sL(e||"",u),new AS(null);const v=window.open(e||"",u,g);De(v,n,"popup-blocked");try{v.focus()}catch{}return new AS(v)}function sL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const aL="__/auth/handler",oL="emulator/auth/handler",lL=encodeURIComponent("fac");async function IS(n,e,t,i,s,o){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Rc,eventId:s};if(e instanceof DR){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",BO(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof nd){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await n._getAppCheckToken(),f=d?`#${lL}=${encodeURIComponent(d)}`:"";return`${cL(n)}?${Jh(u).slice(1)}${f}`}function cL({config:n}){return n.emulator?b_(n,oL):`https://${n.authDomain}/${aL}`}const _0="webStorageSupport";class uL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LR,this._completeRedirectFn=P6,this._overrideRedirectResult=N6}async _openPopup(e,t,i,s){is(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await IS(e,t,i,lv(),s);return rL(e,o,x_())}async _openRedirect(e,t,i,s){await this._originValidation(e);const o=await IS(e,t,i,lv(),s);return f6(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(is(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Z6(e),i=new O6(e);return t.register("authEvent",s=>(De(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_0,{type:_0},s=>{const o=s?.[0]?.[_0];o!==void 0&&t(!!o),Bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=B6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xR()||_R()||E_()}}const hL=uL;var RS="@firebase/auth",CS="1.11.1";class dL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mL(n){sc(new Co("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;De(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AR(n)},f=new A5(i,s,o,d);return O5(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),sc(new Co("auth-internal",e=>{const t=wa(e.getProvider("auth").getImmediate());return(i=>new dL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),la(RS,CS,fL(n)),la(RS,CS,"esm2020")}const pL=300,gL=JI("authIdTokenMaxAge")||pL;let DS=null;const yL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>gL)return;const s=t?.token;DS!==s&&(DS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function vL(n=q3()){const e=v_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=M5(n,{popupRedirectResolver:hL,persistence:[E6,u6,LR]}),i=JI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=yL(o.toString());s6(t,l,()=>l(t.currentUser)),r6(t,u=>l(u))}}const s=IO("auth");return s&&L5(t,`http://${s}`),t}function _L(){return document.getElementsByTagName("head")?.[0]??document}I5({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=gr("internal-error");o.customData=s,t(o)},i.type="text/javascript",i.charset="UTF-8",_L().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mL("Browser");var bL="firebase",TL="12.6.0";la(bL,TL,"app");var NS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ca,HR;(function(){var n;function e(x,R){function V(){}V.prototype=R.prototype,x.F=R.prototype,x.prototype=new V,x.prototype.constructor=x,x.D=function(O,k,B){for(var L=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)L[Ce-2]=arguments[Ce];return R.prototype[k].apply(O,L)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,R,V){V||(V=0);const O=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)O[k]=R.charCodeAt(V++)|R.charCodeAt(V++)<<8|R.charCodeAt(V++)<<16|R.charCodeAt(V++)<<24;else for(k=0;k<16;++k)O[k]=R[V++]|R[V++]<<8|R[V++]<<16|R[V++]<<24;R=x.g[0],V=x.g[1],k=x.g[2];let B=x.g[3],L;L=R+(B^V&(k^B))+O[0]+3614090360&4294967295,R=V+(L<<7&4294967295|L>>>25),L=B+(k^R&(V^k))+O[1]+3905402710&4294967295,B=R+(L<<12&4294967295|L>>>20),L=k+(V^B&(R^V))+O[2]+606105819&4294967295,k=B+(L<<17&4294967295|L>>>15),L=V+(R^k&(B^R))+O[3]+3250441966&4294967295,V=k+(L<<22&4294967295|L>>>10),L=R+(B^V&(k^B))+O[4]+4118548399&4294967295,R=V+(L<<7&4294967295|L>>>25),L=B+(k^R&(V^k))+O[5]+1200080426&4294967295,B=R+(L<<12&4294967295|L>>>20),L=k+(V^B&(R^V))+O[6]+2821735955&4294967295,k=B+(L<<17&4294967295|L>>>15),L=V+(R^k&(B^R))+O[7]+4249261313&4294967295,V=k+(L<<22&4294967295|L>>>10),L=R+(B^V&(k^B))+O[8]+1770035416&4294967295,R=V+(L<<7&4294967295|L>>>25),L=B+(k^R&(V^k))+O[9]+2336552879&4294967295,B=R+(L<<12&4294967295|L>>>20),L=k+(V^B&(R^V))+O[10]+4294925233&4294967295,k=B+(L<<17&4294967295|L>>>15),L=V+(R^k&(B^R))+O[11]+2304563134&4294967295,V=k+(L<<22&4294967295|L>>>10),L=R+(B^V&(k^B))+O[12]+1804603682&4294967295,R=V+(L<<7&4294967295|L>>>25),L=B+(k^R&(V^k))+O[13]+4254626195&4294967295,B=R+(L<<12&4294967295|L>>>20),L=k+(V^B&(R^V))+O[14]+2792965006&4294967295,k=B+(L<<17&4294967295|L>>>15),L=V+(R^k&(B^R))+O[15]+1236535329&4294967295,V=k+(L<<22&4294967295|L>>>10),L=R+(k^B&(V^k))+O[1]+4129170786&4294967295,R=V+(L<<5&4294967295|L>>>27),L=B+(V^k&(R^V))+O[6]+3225465664&4294967295,B=R+(L<<9&4294967295|L>>>23),L=k+(R^V&(B^R))+O[11]+643717713&4294967295,k=B+(L<<14&4294967295|L>>>18),L=V+(B^R&(k^B))+O[0]+3921069994&4294967295,V=k+(L<<20&4294967295|L>>>12),L=R+(k^B&(V^k))+O[5]+3593408605&4294967295,R=V+(L<<5&4294967295|L>>>27),L=B+(V^k&(R^V))+O[10]+38016083&4294967295,B=R+(L<<9&4294967295|L>>>23),L=k+(R^V&(B^R))+O[15]+3634488961&4294967295,k=B+(L<<14&4294967295|L>>>18),L=V+(B^R&(k^B))+O[4]+3889429448&4294967295,V=k+(L<<20&4294967295|L>>>12),L=R+(k^B&(V^k))+O[9]+568446438&4294967295,R=V+(L<<5&4294967295|L>>>27),L=B+(V^k&(R^V))+O[14]+3275163606&4294967295,B=R+(L<<9&4294967295|L>>>23),L=k+(R^V&(B^R))+O[3]+4107603335&4294967295,k=B+(L<<14&4294967295|L>>>18),L=V+(B^R&(k^B))+O[8]+1163531501&4294967295,V=k+(L<<20&4294967295|L>>>12),L=R+(k^B&(V^k))+O[13]+2850285829&4294967295,R=V+(L<<5&4294967295|L>>>27),L=B+(V^k&(R^V))+O[2]+4243563512&4294967295,B=R+(L<<9&4294967295|L>>>23),L=k+(R^V&(B^R))+O[7]+1735328473&4294967295,k=B+(L<<14&4294967295|L>>>18),L=V+(B^R&(k^B))+O[12]+2368359562&4294967295,V=k+(L<<20&4294967295|L>>>12),L=R+(V^k^B)+O[5]+4294588738&4294967295,R=V+(L<<4&4294967295|L>>>28),L=B+(R^V^k)+O[8]+2272392833&4294967295,B=R+(L<<11&4294967295|L>>>21),L=k+(B^R^V)+O[11]+1839030562&4294967295,k=B+(L<<16&4294967295|L>>>16),L=V+(k^B^R)+O[14]+4259657740&4294967295,V=k+(L<<23&4294967295|L>>>9),L=R+(V^k^B)+O[1]+2763975236&4294967295,R=V+(L<<4&4294967295|L>>>28),L=B+(R^V^k)+O[4]+1272893353&4294967295,B=R+(L<<11&4294967295|L>>>21),L=k+(B^R^V)+O[7]+4139469664&4294967295,k=B+(L<<16&4294967295|L>>>16),L=V+(k^B^R)+O[10]+3200236656&4294967295,V=k+(L<<23&4294967295|L>>>9),L=R+(V^k^B)+O[13]+681279174&4294967295,R=V+(L<<4&4294967295|L>>>28),L=B+(R^V^k)+O[0]+3936430074&4294967295,B=R+(L<<11&4294967295|L>>>21),L=k+(B^R^V)+O[3]+3572445317&4294967295,k=B+(L<<16&4294967295|L>>>16),L=V+(k^B^R)+O[6]+76029189&4294967295,V=k+(L<<23&4294967295|L>>>9),L=R+(V^k^B)+O[9]+3654602809&4294967295,R=V+(L<<4&4294967295|L>>>28),L=B+(R^V^k)+O[12]+3873151461&4294967295,B=R+(L<<11&4294967295|L>>>21),L=k+(B^R^V)+O[15]+530742520&4294967295,k=B+(L<<16&4294967295|L>>>16),L=V+(k^B^R)+O[2]+3299628645&4294967295,V=k+(L<<23&4294967295|L>>>9),L=R+(k^(V|~B))+O[0]+4096336452&4294967295,R=V+(L<<6&4294967295|L>>>26),L=B+(V^(R|~k))+O[7]+1126891415&4294967295,B=R+(L<<10&4294967295|L>>>22),L=k+(R^(B|~V))+O[14]+2878612391&4294967295,k=B+(L<<15&4294967295|L>>>17),L=V+(B^(k|~R))+O[5]+4237533241&4294967295,V=k+(L<<21&4294967295|L>>>11),L=R+(k^(V|~B))+O[12]+1700485571&4294967295,R=V+(L<<6&4294967295|L>>>26),L=B+(V^(R|~k))+O[3]+2399980690&4294967295,B=R+(L<<10&4294967295|L>>>22),L=k+(R^(B|~V))+O[10]+4293915773&4294967295,k=B+(L<<15&4294967295|L>>>17),L=V+(B^(k|~R))+O[1]+2240044497&4294967295,V=k+(L<<21&4294967295|L>>>11),L=R+(k^(V|~B))+O[8]+1873313359&4294967295,R=V+(L<<6&4294967295|L>>>26),L=B+(V^(R|~k))+O[15]+4264355552&4294967295,B=R+(L<<10&4294967295|L>>>22),L=k+(R^(B|~V))+O[6]+2734768916&4294967295,k=B+(L<<15&4294967295|L>>>17),L=V+(B^(k|~R))+O[13]+1309151649&4294967295,V=k+(L<<21&4294967295|L>>>11),L=R+(k^(V|~B))+O[4]+4149444226&4294967295,R=V+(L<<6&4294967295|L>>>26),L=B+(V^(R|~k))+O[11]+3174756917&4294967295,B=R+(L<<10&4294967295|L>>>22),L=k+(R^(B|~V))+O[2]+718787259&4294967295,k=B+(L<<15&4294967295|L>>>17),L=V+(B^(k|~R))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(k+(L<<21&4294967295|L>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+B&4294967295}i.prototype.v=function(x,R){R===void 0&&(R=x.length);const V=R-this.blockSize,O=this.C;let k=this.h,B=0;for(;B<R;){if(k==0)for(;B<=V;)s(this,x,B),B+=this.blockSize;if(typeof x=="string"){for(;B<R;)if(O[k++]=x.charCodeAt(B++),k==this.blockSize){s(this,O),k=0;break}}else for(;B<R;)if(O[k++]=x[B++],k==this.blockSize){s(this,O),k=0;break}}this.h=k,this.o+=R},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;R=this.o*8;for(var V=x.length-8;V<x.length;++V)x[V]=R&255,R/=256;for(this.v(x),x=Array(16),R=0,V=0;V<4;++V)for(let O=0;O<32;O+=8)x[R++]=this.g[V]>>>O&255;return x};function o(x,R){var V=u;return Object.prototype.hasOwnProperty.call(V,x)?V[x]:V[x]=R(x)}function l(x,R){this.h=R;const V=[];let O=!0;for(let k=x.length-1;k>=0;k--){const B=x[k]|0;O&&B==R||(V[k]=B,O=!1)}this.g=V}var u={};function d(x){return-128<=x&&x<128?o(x,function(R){return new l([R|0],R<0?-1:0)}):new l([x|0],x<0?-1:0)}function f(x){if(isNaN(x)||!isFinite(x))return v;if(x<0)return C(f(-x));const R=[];let V=1;for(let O=0;x>=V;O++)R[O]=x/V|0,V*=4294967296;return new l(R,0)}function g(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return C(g(x.substring(1),R));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=f(Math.pow(R,8));let O=v;for(let B=0;B<x.length;B+=8){var k=Math.min(8,x.length-B);const L=parseInt(x.substring(B,B+k),R);k<8?(k=f(Math.pow(R,k)),O=O.j(k).add(f(L))):(O=O.j(V),O=O.add(f(L)))}return O}var v=d(0),_=d(1),S=d(16777216);n=l.prototype,n.m=function(){if(A(this))return-C(this).m();let x=0,R=1;for(let V=0;V<this.g.length;V++){const O=this.i(V);x+=(O>=0?O:4294967296+O)*R,R*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N(this))return"0";if(A(this))return"-"+C(this).toString(x);const R=f(Math.pow(x,6));var V=this;let O="";for(;;){const k=$(V,R).g;V=P(V,k.j(R));let B=((V.g.length>0?V.g[0]:V.h)>>>0).toString(x);if(V=k,N(V))return B+O;for(;B.length<6;)B="0"+B;O=B+O}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function N(x){if(x.h!=0)return!1;for(let R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function A(x){return x.h==-1}n.l=function(x){return x=P(this,x),A(x)?-1:N(x)?0:1};function C(x){const R=x.g.length,V=[];for(let O=0;O<R;O++)V[O]=~x.g[O];return new l(V,~x.h).add(_)}n.abs=function(){return A(this)?C(this):this},n.add=function(x){const R=Math.max(this.g.length,x.g.length),V=[];let O=0;for(let k=0;k<=R;k++){let B=O+(this.i(k)&65535)+(x.i(k)&65535),L=(B>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);O=L>>>16,B&=65535,L&=65535,V[k]=L<<16|B}return new l(V,V[V.length-1]&-2147483648?-1:0)};function P(x,R){return x.add(C(R))}n.j=function(x){if(N(this)||N(x))return v;if(A(this))return A(x)?C(this).j(C(x)):C(C(this).j(x));if(A(x))return C(this.j(C(x)));if(this.l(S)<0&&x.l(S)<0)return f(this.m()*x.m());const R=this.g.length+x.g.length,V=[];for(var O=0;O<2*R;O++)V[O]=0;for(O=0;O<this.g.length;O++)for(let k=0;k<x.g.length;k++){const B=this.i(O)>>>16,L=this.i(O)&65535,Ce=x.i(k)>>>16,de=x.i(k)&65535;V[2*O+2*k]+=L*de,U(V,2*O+2*k),V[2*O+2*k+1]+=B*de,U(V,2*O+2*k+1),V[2*O+2*k+1]+=L*Ce,U(V,2*O+2*k+1),V[2*O+2*k+2]+=B*Ce,U(V,2*O+2*k+2)}for(x=0;x<R;x++)V[x]=V[2*x+1]<<16|V[2*x];for(x=R;x<2*R;x++)V[x]=0;return new l(V,0)};function U(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function M(x,R){this.g=x,this.h=R}function $(x,R){if(N(R))throw Error("division by zero");if(N(x))return new M(v,v);if(A(x))return R=$(C(x),R),new M(C(R.g),C(R.h));if(A(R))return R=$(x,C(R)),new M(C(R.g),R.h);if(x.g.length>30){if(A(x)||A(R))throw Error("slowDivide_ only works with positive integers.");for(var V=_,O=R;O.l(x)<=0;)V=te(V),O=te(O);var k=Z(V,1),B=Z(O,1);for(O=Z(O,2),V=Z(V,2);!N(O);){var L=B.add(O);L.l(x)<=0&&(k=k.add(V),B=L),O=Z(O,1),V=Z(V,1)}return R=P(x,k.j(R)),new M(k,R)}for(k=v;x.l(R)>=0;){for(V=Math.max(1,Math.floor(x.m()/R.m())),O=Math.ceil(Math.log(V)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),B=f(V),L=B.j(R);A(L)||L.l(x)>0;)V-=O,B=f(V),L=B.j(R);N(B)&&(B=_),k=k.add(B),x=P(x,L)}return new M(k,x)}n.B=function(x){return $(this,x).h},n.and=function(x){const R=Math.max(this.g.length,x.g.length),V=[];for(let O=0;O<R;O++)V[O]=this.i(O)&x.i(O);return new l(V,this.h&x.h)},n.or=function(x){const R=Math.max(this.g.length,x.g.length),V=[];for(let O=0;O<R;O++)V[O]=this.i(O)|x.i(O);return new l(V,this.h|x.h)},n.xor=function(x){const R=Math.max(this.g.length,x.g.length),V=[];for(let O=0;O<R;O++)V[O]=this.i(O)^x.i(O);return new l(V,this.h^x.h)};function te(x){const R=x.g.length+1,V=[];for(let O=0;O<R;O++)V[O]=x.i(O)<<1|x.i(O-1)>>>31;return new l(V,x.h)}function Z(x,R){const V=R>>5;R%=32;const O=x.g.length-V,k=[];for(let B=0;B<O;B++)k[B]=R>0?x.i(B+V)>>>R|x.i(B+V+1)<<32-R:x.i(B+V);return new l(k,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,HR=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,ca=l}).apply(typeof NS<"u"?NS:typeof self<"u"?self:typeof window<"u"?window:{});var Qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var GR,th,$R,pm,hv,KR,YR,QR;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qf=="object"&&Qf];for(var b=0;b<m.length;++b){var w=m[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function s(m,b){if(b)e:{var w=i;m=m.split(".");for(var D=0;D<m.length-1;D++){var Y=m[D];if(!(Y in w))break e;w=w[Y]}m=m[m.length-1],D=w[m],b=b(D),b!=D&&b!=null&&e(w,m,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(b){var w=[],D;for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&w.push([D,b[D]]);return w}});var o=o||{},l=this||self;function u(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function d(m,b,w){return m.call.apply(m.bind,arguments)}function f(m,b,w){return f=d,f.apply(null,arguments)}function g(m,b){var w=Array.prototype.slice.call(arguments,1);return function(){var D=w.slice();return D.push.apply(D,arguments),m.apply(this,D)}}function v(m,b){function w(){}w.prototype=b.prototype,m.Z=b.prototype,m.prototype=new w,m.prototype.constructor=m,m.Ob=function(D,Y,J){for(var me=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)me[Oe-2]=arguments[Oe];return b.prototype[Y].apply(D,me)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function S(m){const b=m.length;if(b>0){const w=Array(b);for(let D=0;D<b;D++)w[D]=m[D];return w}return[]}function N(m,b){for(let D=1;D<arguments.length;D++){const Y=arguments[D];var w=typeof Y;if(w=w!="object"?w:Y?Array.isArray(Y)?"array":w:"null",w=="array"||w=="object"&&typeof Y.length=="number"){w=m.length||0;const J=Y.length||0;m.length=w+J;for(let me=0;me<J;me++)m[w+me]=Y[me]}else m.push(Y)}}class A{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function C(m){l.setTimeout(()=>{throw m},0)}function P(){var m=x;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class U{constructor(){this.h=this.g=null}add(b,w){const D=M.get();D.set(b,w),this.h?this.h.next=D:this.g=D,this.h=D}}var M=new A(()=>new $,m=>m.reset());class ${constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let te,Z=!1,x=new U,R=()=>{const m=Promise.resolve(void 0);te=()=>{m.then(V)}};function V(){for(var m;m=P();){try{m.h.call(m.g)}catch(w){C(w)}var b=M;b.j(m),b.h<100&&(b.h++,m.next=b.g,b.g=m)}Z=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};l.addEventListener("test",w,b),l.removeEventListener("test",w,b)}catch{}return m})();function L(m){return/^[\s\xa0]*$/.test(m)}function Ce(m,b){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,b)}v(Ce,k),Ce.prototype.init=function(m,b){const w=this.type=m.type,D=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget,b||(w=="mouseover"?b=m.fromElement:w=="mouseout"&&(b=m.toElement)),this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),H=0;function se(m,b,w,D,Y){this.listener=m,this.proxy=null,this.src=b,this.type=w,this.capture=!!D,this.ha=Y,this.key=++H,this.da=this.fa=!1}function he(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Te(m,b,w){for(const D in m)b.call(w,m[D],D,m)}function le(m,b){for(const w in m)b.call(void 0,m[w],w,m)}function z(m){const b={};for(const w in m)b[w]=m[w];return b}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(m,b){let w,D;for(let Y=1;Y<arguments.length;Y++){D=arguments[Y];for(w in D)m[w]=D[w];for(let J=0;J<ne.length;J++)w=ne[J],Object.prototype.hasOwnProperty.call(D,w)&&(m[w]=D[w])}}function ye(m){this.src=m,this.g={},this.h=0}ye.prototype.add=function(m,b,w,D,Y){const J=m.toString();m=this.g[J],m||(m=this.g[J]=[],this.h++);const me=je(m,b,D,Y);return me>-1?(b=m[me],w||(b.fa=!1)):(b=new se(b,this.src,J,!!D,Y),b.fa=w,m.push(b)),b};function ke(m,b){const w=b.type;if(w in m.g){var D=m.g[w],Y=Array.prototype.indexOf.call(D,b,void 0),J;(J=Y>=0)&&Array.prototype.splice.call(D,Y,1),J&&(he(b),m.g[w].length==0&&(delete m.g[w],m.h--))}}function je(m,b,w,D){for(let Y=0;Y<m.length;++Y){const J=m[Y];if(!J.da&&J.listener==b&&J.capture==!!w&&J.ha==D)return Y}return-1}var Ye="closure_lm_"+(Math.random()*1e6|0),Xt={};function yt(m,b,w,D,Y){if(Array.isArray(b)){for(let J=0;J<b.length;J++)yt(m,b[J],w,D,Y);return null}return w=Bc(w),m&&m[de]?m.J(b,w,u(D)?!!D.capture:!1,Y):Ca(m,b,w,!1,D,Y)}function Ca(m,b,w,D,Y,J){if(!b)throw Error("Invalid event type");const me=u(Y)?!!Y.capture:!!Y;let Oe=Da(m);if(Oe||(m[Ye]=Oe=new ye(m)),w=Oe.add(b,w,D,me,J),w.proxy)return w;if(D=qo(),w.proxy=D,D.src=m,D.listener=w,m.addEventListener)B||(Y=me),Y===void 0&&(Y=!1),m.addEventListener(b.toString(),D,Y);else if(m.attachEvent)m.attachEvent(Fi(b.toString()),D);else if(m.addListener&&m.removeListener)m.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return w}function qo(){function m(w){return b.call(m.src,m.listener,w)}const b=Uc;return m}function Ho(m,b,w,D,Y){if(Array.isArray(b))for(var J=0;J<b.length;J++)Ho(m,b[J],w,D,Y);else D=u(D)?!!D.capture:!!D,w=Bc(w),m&&m[de]?(m=m.i,J=String(b).toString(),J in m.g&&(b=m.g[J],w=je(b,w,D,Y),w>-1&&(he(b[w]),Array.prototype.splice.call(b,w,1),b.length==0&&(delete m.g[J],m.h--)))):m&&(m=Da(m))&&(b=m.g[b.toString()],m=-1,b&&(m=je(b,w,D,Y)),(w=m>-1?b[m]:null)&&Go(w))}function Go(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[de])ke(b.i,m);else{var w=m.type,D=m.proxy;b.removeEventListener?b.removeEventListener(w,D,m.capture):b.detachEvent?b.detachEvent(Fi(w),D):b.addListener&&b.removeListener&&b.removeListener(D),(w=Da(b))?(ke(w,m),w.h==0&&(w.src=null,b[Ye]=null)):he(m)}}}function Fi(m){return m in Xt?Xt[m]:Xt[m]="on"+m}function Uc(m,b){if(m.da)m=!0;else{b=new Ce(b,this);const w=m.listener,D=m.ha||m.src;m.fa&&Go(m),m=w.call(D,b)}return m}function Da(m){return m=m[Ye],m instanceof ye?m:null}var zc="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bc(m){return typeof m=="function"?m:(m[zc]||(m[zc]=function(b){return m.handleEvent(b)}),m[zc])}function Lt(){O.call(this),this.i=new ye(this),this.M=this,this.G=null}v(Lt,O),Lt.prototype[de]=!0,Lt.prototype.removeEventListener=function(m,b,w,D){Ho(this,m,b,w,D)};function Wt(m,b){var w,D=m.G;if(D)for(w=[];D;D=D.G)w.push(D);if(m=m.M,D=b.type||b,typeof b=="string")b=new k(b,m);else if(b instanceof k)b.target=b.target||m;else{var Y=b;b=new k(D,m),pe(b,Y)}Y=!0;let J,me;if(w)for(me=w.length-1;me>=0;me--)J=b.g=w[me],Y=fs(J,D,!0,b)&&Y;if(J=b.g=m,Y=fs(J,D,!0,b)&&Y,Y=fs(J,D,!1,b)&&Y,w)for(me=0;me<w.length;me++)J=b.g=w[me],Y=fs(J,D,!1,b)&&Y}Lt.prototype.N=function(){if(Lt.Z.N.call(this),this.i){var m=this.i;for(const b in m.g){const w=m.g[b];for(let D=0;D<w.length;D++)he(w[D]);delete m.g[b],m.h--}}this.G=null},Lt.prototype.J=function(m,b,w,D){return this.i.add(String(m),b,!1,w,D)},Lt.prototype.K=function(m,b,w,D){return this.i.add(String(m),b,!0,w,D)};function fs(m,b,w,D){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();let Y=!0;for(let J=0;J<b.length;++J){const me=b[J];if(me&&!me.da&&me.capture==w){const Oe=me.listener,Dt=me.ha||me.src;me.fa&&ke(m.i,me),Y=Oe.call(Dt,D)!==!1&&Y}}return Y&&!D.defaultPrevented}function og(m,b){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:l.setTimeout(m,b||0)}function gd(m){m.g=og(()=>{m.g=null,m.i&&(m.i=!1,gd(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class xn extends O{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:gd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Na(m){O.call(this),this.h=m,this.g={}}v(Na,O);var Fc=[];function qc(m){Te(m.g,function(b,w){this.g.hasOwnProperty(w)&&Go(b)},m),m.g={}}Na.prototype.N=function(){Na.Z.N.call(this),qc(this)},Na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ms=l.JSON.stringify,lg=l.JSON.parse,yd=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function vd(){}function _d(){}var Si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function on(){k.call(this,"d")}v(on,k);function ni(){k.call(this,"c")}v(ni,k);var Ct={},bd=null;function $o(){return bd=bd||new Lt}Ct.Ia="serverreachability";function Td(m){k.call(this,Ct.Ia,m)}v(Td,k);function qi(m){const b=$o();Wt(b,new Td(b))}Ct.STAT_EVENT="statevent";function ka(m,b){k.call(this,Ct.STAT_EVENT,m),this.stat=b}v(ka,k);function jt(m){const b=$o();Wt(b,new ka(b,m))}Ct.Ja="timingevent";function Hi(m,b){k.call(this,Ct.Ja,m),this.size=b}v(Hi,k);function Gi(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},b)}function xi(){this.g=!0}xi.prototype.ua=function(){this.g=!1};function cg(m,b,w,D,Y,J){m.info(function(){if(m.g)if(J){var me="",Oe=J.split("&");for(let et=0;et<Oe.length;et++){var Dt=Oe[et].split("=");if(Dt.length>1){const vt=Dt[0];Dt=Dt[1];const ai=vt.split("_");me=ai.length>=2&&ai[1]=="type"?me+(vt+"="+Dt+"&"):me+(vt+"=redacted&")}}}else me=null;else me=J;return"XMLHTTP REQ ("+D+") [attempt "+Y+"]: "+b+`
`+w+`
`+me})}function Ed(m,b,w,D,Y,J,me){m.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Y+"]: "+b+`
`+w+`
`+J+" "+me})}function $i(m,b,w,D){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+ug(m,w)+(D?" "+D:"")})}function Va(m,b){m.info(function(){return"TIMEOUT: "+b})}xi.prototype.info=function(){};function ug(m,b){if(!m.g)return b;if(!b)return null;try{const J=JSON.parse(b);if(J){for(m=0;m<J.length;m++)if(Array.isArray(J[m])){var w=J[m];if(!(w.length<2)){var D=w[1];if(Array.isArray(D)&&!(D.length<1)){var Y=D[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let me=1;me<D.length;me++)D[me]=""}}}}return ms(J)}catch{return b}}var Pa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gc;function Ma(){}v(Ma,vd),Ma.prototype.g=function(){return new XMLHttpRequest},Gc=new Ma;function Ir(m){return encodeURIComponent(String(m))}function wd(m){var b=1;m=m.split(":");const w=[];for(;b>0&&m.length;)w.push(m.shift()),b--;return m.length&&w.push(m.join(":")),w}function Ai(m,b,w,D){this.j=m,this.i=b,this.l=w,this.S=D||1,this.V=new Na(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ii}function Ii(){this.i=null,this.g="",this.h=!1}var Ut={},nn={};function Ki(m,b,w){m.M=1,m.A=Oa(Bt(b)),m.u=w,m.R=!0,Ko(m,null)}function Ko(m,b){m.F=Date.now(),Yi(m),m.B=Bt(m.A);var w=m.B,D=m.S;Array.isArray(D)||(D=[String(D)]),Wo(w.i,"t",D),m.C=0,w=m.j.L,m.h=new Ii,m.g=jd(m.j,w?b:null,!m.u),m.P>0&&(m.O=new xn(f(m.Y,m,m.g),m.P)),b=m.V,w=m.g,D=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(Fc[0]=Y.toString()),Y=Fc);for(let J=0;J<Y.length;J++){const me=yt(w,Y[J],D||b.handleEvent,!1,b.h||b);if(!me)break;b.g[me.key]=me}b=m.J?z(m.J):{},m.u?(m.v||(m.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,b)):(m.v="GET",m.g.ea(m.B,m.v,null,b)),qi(),cg(m.i,m.v,m.B,m.l,m.S,m.u)}Ai.prototype.ba=function(m){m=m.target;const b=this.O;b&&Di(m)==3?b.j():this.Y(m)},Ai.prototype.Y=function(m){try{if(m==this.g)e:{const Oe=Di(this.g),Dt=this.g.ya(),et=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||Oe!=4||Dt==7||(Dt==8||et<=0?qi(3):qi(2)),Qi(this);var b=this.g.ca();this.X=b;var w=hg(this);if(this.o=b==200,Ed(this.i,this.v,this.B,this.l,this.S,Oe,b),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Y=this.g;if((D=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(D)){var J=D;break t}}J=null}if(m=J)$i(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xi(this,m);else{this.o=!1,this.m=3,jt(12),qn(this),ii(this);break e}}if(this.R){m=!0;let vt;for(;!this.K&&this.C<w.length;)if(vt=xd(this,w),vt==nn){Oe==4&&(this.m=4,jt(14),m=!1),$i(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Ut){this.m=4,jt(15),$i(this.i,this.l,w,"[Invalid Chunk]"),m=!1;break}else $i(this.i,this.l,vt,null),Xi(this,vt);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||w.length!=0||this.h.h||(this.m=1,jt(16),m=!1),this.o=this.o&&m,!m)$i(this.i,this.l,w,"[Invalid Chunked Response]"),qn(this),ii(this);else if(w.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),au(me),me.P=!0,jt(11))}}else $i(this.i,this.l,w,null),Xi(this,w);Oe==4&&qn(this),this.o&&!this.K&&(Oe==4?Pd(this.j,this):(this.o=!1,Yi(this)))}else Cr(this.g),b==400&&w.indexOf("Unknown SID")>0?(this.m=3,jt(12)):(this.m=0,jt(13)),qn(this),ii(this)}}}catch{}finally{}};function hg(m){if(!Sd(m))return m.g.la();const b=ln(m.g);if(b==="")return"";let w="";const D=b.length,Y=Di(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return qn(m),ii(m),"";m.h.i=new l.TextDecoder}for(let J=0;J<D;J++)m.h.h=!0,w+=m.h.i.decode(b[J],{stream:!(Y&&J==D-1)});return b.length=0,m.h.g+=w,m.C=0,m.h.g}function Sd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function xd(m,b){var w=m.C,D=b.indexOf(`
`,w);return D==-1?nn:(w=Number(b.substring(w,D)),isNaN(w)?Ut:(D+=1,D+w>b.length?nn:(b=b.slice(D,D+w),m.C=D+w,b)))}Ai.prototype.cancel=function(){this.K=!0,qn(this)};function Yi(m){m.T=Date.now()+m.H,Yo(m,m.H)}function Yo(m,b){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Gi(f(m.aa,m),b)}function Qi(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Ai.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Va(this.i,this.B),this.M!=2&&(qi(),jt(17)),qn(this),this.m=2,ii(this)):Yo(this,this.T-m)};function ii(m){m.j.I==0||m.K||Pd(m.j,m)}function qn(m){Qi(m);var b=m.O;b&&typeof b.dispose=="function"&&b.dispose(),m.O=null,qc(m.V),m.g&&(b=m.g,m.g=null,b.abort(),b.dispose())}function Xi(m,b){try{var w=m.j;if(w.I!=0&&(w.g==m||Zi(w.h,m))){if(!m.L&&Zi(w.h,m)&&w.I==3){try{var D=w.Ba.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Y=D;if(Y[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<m.F)nl(w),Es(w);else break e;qa(w),jt(18)}}else w.xa=Y[1],0<w.xa-w.K&&Y[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Gi(f(w.Va,w),6e3));Wi(w.h)<=1&&w.ta&&(w.ta=void 0)}else rr(w,11)}else if((m.L||w.g==m)&&nl(w),!L(b))for(Y=w.Ba.g.parse(b),b=0;b<Y.length;b++){let et=Y[b];const vt=et[0];if(!(vt<=w.K))if(w.K=vt,et=et[1],w.I==2)if(et[0]=="c"){w.M=et[1],w.ba=et[2];const ai=et[3];ai!=null&&(w.ka=ai,w.j.info("VER="+w.ka));const sr=et[4];sr!=null&&(w.za=sr,w.j.info("SVER="+w.za));const Ni=et[5];Ni!=null&&typeof Ni=="number"&&Ni>0&&(D=1.5*Ni,w.O=D,w.j.info("backChannelRequestTimeoutMs_="+D)),D=w;const ki=m.g;if(ki){const Ha=ki.g?ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ha){var J=D.h;J.g||Ha.indexOf("spdy")==-1&&Ha.indexOf("quic")==-1&&Ha.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Yc(J,J.h),J.h=null))}if(D.G){const il=ki.g?ki.g.getResponseHeader("X-HTTP-Session-Id"):null;il&&(D.wa=il,it(D.J,D.G,il))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-m.F,w.j.info("Handshake RTT: "+w.T+"ms")),D=w;var me=m;if(D.na=Ld(D,D.L?D.ba:null,D.W),me.L){Qc(D.h,me);var Oe=me,Dt=D.O;Dt&&(Oe.H=Dt),Oe.D&&(Qi(Oe),Yi(Oe)),D.g=me}else kd(D);w.i.length>0&&ir(w)}else et[0]!="stop"&&et[0]!="close"||rr(w,7);else w.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?rr(w,7):ru(w):et[0]!="noop"&&w.l&&w.l.qa(et),w.A=0)}}qi(4)}catch{}}var zt=class{constructor(m,b){this.g=m,this.map=b}};function $c(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Kc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Wi(m){return m.h?1:m.g?m.g.size:0}function Zi(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function Yc(m,b){m.g?m.g.add(b):m.h=b}function Qc(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}$c.prototype.cancel=function(){if(this.i=Xc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Xc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const w of m.g.values())b=b.concat(w.G);return b}return S(m.i)}var Ad=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qo(m,b){if(m){m=m.split("&");for(let w=0;w<m.length;w++){const D=m[w].indexOf("=");let Y,J=null;D>=0?(Y=m[w].substring(0,D),J=m[w].substring(D+1)):Y=m[w],b(Y,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Hn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;m instanceof Hn?(this.l=m.l,rn(this,m.j),this.o=m.o,this.g=m.g,ps(this,m.u),this.h=m.h,Wc(this,Dd(m.i)),this.m=m.m):m&&(b=String(m).match(Ad))?(this.l=!1,rn(this,b[1]||"",!0),this.o=Ji(b[2]||""),this.g=Ji(b[3]||"",!0),ps(this,b[4]),this.h=Ji(b[5]||"",!0),Wc(this,b[6]||"",!0),this.m=Ji(b[7]||"")):(this.l=!1,this.i=new ys(null,this.l))}Hn.prototype.toString=function(){const m=[];var b=this.j;b&&m.push(La(b,Xo,!0),":");var w=this.g;return(w||b=="file")&&(m.push("//"),(b=this.o)&&m.push(La(b,Xo,!0),"@"),m.push(Ir(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&m.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(La(w,w.charAt(0)=="/"?Zc:Id,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",La(w,Rd)),m.join("")},Hn.prototype.resolve=function(m){const b=Bt(this);let w=!!m.j;w?rn(b,m.j):w=!!m.o,w?b.o=m.o:w=!!m.g,w?b.g=m.g:w=m.u!=null;var D=m.h;if(w)ps(b,m.u);else if(w=!!m.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Y=b.h.lastIndexOf("/");Y!=-1&&(D=b.h.slice(0,Y+1)+D)}if(Y=D,Y==".."||Y==".")D="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){D=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const J=[];for(let me=0;me<Y.length;){const Oe=Y[me++];Oe=="."?D&&me==Y.length&&J.push(""):Oe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),D&&me==Y.length&&J.push("")):(J.push(Oe),D=!0)}D=J.join("/")}else D=Y}return w?b.h=D:w=m.i.toString()!=="",w?Wc(b,Dd(m.i)):w=!!m.m,w&&(b.m=m.m),b};function Bt(m){return new Hn(m)}function rn(m,b,w){m.j=w?Ji(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function ps(m,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);m.u=b}else m.u=null}function Wc(m,b,w){b instanceof ys?(m.i=b,Zo(m.i,m.l)):(w||(b=La(b,gs)),m.i=new ys(b,m.l))}function it(m,b,w){m.i.set(b,w)}function Oa(m){return it(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ji(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function La(m,b,w){return typeof m=="string"?(m=encodeURI(m).replace(b,Nn),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Nn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Xo=/[#\/\?@]/g,Id=/[#\?:]/g,Zc=/[#\?]/g,gs=/[#\?@]/g,Rd=/#/g;function ys(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function kn(m){m.g||(m.g=new Map,m.h=0,m.i&&Qo(m.i,function(b,w){m.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}n=ys.prototype,n.add=function(m,b){kn(this),this.i=null,m=vs(this,m);let w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(b),this.h+=1,this};function Cd(m,b){kn(m),b=vs(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Jc(m,b){return kn(m),b=vs(m,b),m.g.has(b)}n.forEach=function(m,b){kn(this),this.g.forEach(function(w,D){w.forEach(function(Y){m.call(b,Y,D,this)},this)},this)};function eu(m,b){kn(m);let w=[];if(typeof b=="string")Jc(m,b)&&(w=w.concat(m.g.get(vs(m,b))));else for(m=Array.from(m.g.values()),b=0;b<m.length;b++)w=w.concat(m[b]);return w}n.set=function(m,b){return kn(this),this.i=null,m=vs(this,m),Jc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=eu(this,m),m.length>0?String(m[0]):b):b};function Wo(m,b,w){Cd(m,b),w.length>0&&(m.i=null,m.g.set(vs(m,b),S(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(let D=0;D<b.length;D++){var w=b[D];const Y=Ir(w);w=eu(this,w);for(let J=0;J<w.length;J++){let me=Y;w[J]!==""&&(me+="="+Ir(w[J])),m.push(me)}}return this.i=m.join("&")};function Dd(m){const b=new ys;return b.i=m.i,m.g&&(b.g=new Map(m.g),b.h=m.h),b}function vs(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function Zo(m,b){b&&!m.j&&(kn(m),m.i=null,m.g.forEach(function(w,D){const Y=D.toLowerCase();D!=Y&&(Cd(this,D),Wo(this,Y,w))},m)),m.j=b}function Ri(m,b){const w=new xi;if(l.Image){const D=new Image;D.onload=g(ri,w,"TestLoadImage: loaded",!0,b,D),D.onerror=g(ri,w,"TestLoadImage: error",!1,b,D),D.onabort=g(ri,w,"TestLoadImage: abort",!1,b,D),D.ontimeout=g(ri,w,"TestLoadImage: timeout",!1,b,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=m}else b(!1)}function tu(m,b){const w=new xi,D=new AbortController,Y=setTimeout(()=>{D.abort(),ri(w,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:D.signal}).then(J=>{clearTimeout(Y),J.ok?ri(w,"TestPingServer: ok",!0,b):ri(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Y),ri(w,"TestPingServer: error",!1,b)})}function ri(m,b,w,D,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),D(w)}catch{}}function _s(){this.g=new yd}function er(m){this.i=m.Sb||null,this.h=m.ab||!1}v(er,vd),er.prototype.g=function(){return new ja(this.i,this.h)};function ja(m,b){Lt.call(this),this.H=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(ja,Lt),n=ja.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=b,this.readyState=1,Ci(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(b.body=m),(this.H||l).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jo(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jo(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?bs(this):Ci(this),this.readyState==3&&Jo(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,bs(this))},n.Na=function(m){this.g&&(this.response=m,bs(this))},n.ga=function(){this.g&&bs(this)};function bs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ci(m)}n.setRequestHeader=function(m,b){this.A.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=b.next();return m.join(`\r
`)};function Ci(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function si(m){let b="";return Te(m,function(w,D){b+=D,b+=":",b+=w,b+=`\r
`}),b}function Ua(m,b,w){e:{for(D in w){var D=!1;break e}D=!0}D||(w=si(w),typeof m=="string"?w!=null&&Ir(w):it(m,b,w))}function lt(m){Lt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(lt,Lt);var tr=/^https?$/i,nu=["POST","PUT"];n=lt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,b,w,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(J){za(this,J);return}if(m=w||"",w=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Y in D)w.set(Y,D[Y]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const J of D.keys())w.set(J,D.get(J));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(w.keys()).find(J=>J.toLowerCase()=="content-type"),Y=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(nu,b,void 0)>=0)||D||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,me]of w)this.g.setRequestHeader(J,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(J){za(this,J)}};function za(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.o=5,iu(m),Rr(m)}function iu(m){m.A||(m.A=!0,Wt(m,"complete"),Wt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Wt(this,"complete"),Wt(this,"abort"),Rr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rr(this,!0)),lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ba(this):this.Xa())},n.Xa=function(){Ba(this)};function Ba(m){if(m.h&&typeof o<"u"){if(m.v&&Di(m)==4)setTimeout(m.Ca.bind(m),0);else if(Wt(m,"readystatechange"),Di(m)==4){m.h=!1;try{const J=m.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var D;if(D=J===0){let me=String(m.D).match(Ad)[1]||null;!me&&l.self&&l.self.location&&(me=l.self.location.protocol.slice(0,-1)),D=!tr.test(me?me.toLowerCase():"")}w=D}if(w)Wt(m,"complete"),Wt(m,"success");else{m.o=6;try{var Y=Di(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",iu(m)}}finally{Rr(m)}}}}function Rr(m,b){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const w=m.g;m.g=null,b||Wt(m,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Di(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Di(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),lg(b)}};function ln(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Cr(m){const b={};m=(m.g&&Di(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<m.length;D++){if(L(m[D]))continue;var w=wd(m[D]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const J=b[Y]||[];b[Y]=J,J.push(w)}le(b,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function nr(m,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||b}function Ts(m){this.za=0,this.i=[],this.j=new xi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=nr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=nr("baseRetryDelayMs",5e3,m),this.Za=nr("retryDelaySeedMs",1e4,m),this.Ta=nr("forwardChannelMaxRetries",2,m),this.va=nr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new $c(m&&m.concurrentRequestLimit),this.Ba=new _s,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ts.prototype,n.ka=8,n.I=1,n.connect=function(m,b,w,D){jt(0),this.W=m,this.H=b||{},w&&D!==void 0&&(this.H.OSID=w,this.H.OAID=D),this.F=this.X,this.J=Ld(this,null,this.W),ir(this)};function ru(m){if(el(m),m.I==3){var b=m.V++,w=Bt(m.J);if(it(w,"SID",m.M),it(w,"RID",b),it(w,"TYPE","terminate"),Fa(m,w),b=new Ai(m,m.j,b),b.M=2,b.A=Oa(Bt(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(b.A.toString(),"")}catch{}!w&&l.Image&&(new Image().src=b.A,w=!0),w||(b.g=jd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Yi(b)}Od(m)}function Es(m){m.g&&(au(m),m.g.cancel(),m.g=null)}function el(m){Es(m),m.v&&(l.clearTimeout(m.v),m.v=null),nl(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function ir(m){if(!Kc(m.h)&&!m.m){m.m=!0;var b=m.Ea;te||R(),Z||(te(),Z=!0),x.add(b,m),m.D=0}}function tl(m,b){return Wi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=b.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Gi(f(m.Ea,m,b),Md(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new Ai(this,this.j,m);let J=this.o;if(this.U&&(J?(J=z(J),pe(J,this.U)):J=this.U),this.u!==null||this.R||(Y.J=J,J=null),this.S)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var D=this.i[w];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,b>4096){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=Nd(this,Y,b),w=Bt(this.J),it(w,"RID",m),it(w,"CVER",22),this.G&&it(w,"X-HTTP-Session-Id",this.G),Fa(this,w),J&&(this.R?b="headers="+Ir(si(J))+"&"+b:this.u&&Ua(w,this.u,J)),Yc(this.h,Y),this.Ra&&it(w,"TYPE","init"),this.S?(it(w,"$req",b),it(w,"SID","null"),Y.U=!0,Ki(Y,w,null)):Ki(Y,w,b),this.I=2}}else this.I==3&&(m?su(this,m):this.i.length==0||Kc(this.h)||su(this))};function su(m,b){var w;b?w=b.l:w=m.V++;const D=Bt(m.J);it(D,"SID",m.M),it(D,"RID",w),it(D,"AID",m.K),Fa(m,D),m.u&&m.o&&Ua(D,m.u,m.o),w=new Ai(m,m.j,w,m.D+1),m.u===null&&(w.J=m.o),b&&(m.i=b.G.concat(m.i)),b=Nd(m,w,1e3),w.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Yc(m.h,w),Ki(w,D,b)}function Fa(m,b){m.H&&Te(m.H,function(w,D){it(b,D,w)}),m.l&&Te({},function(w,D){it(b,D,w)})}function Nd(m,b,w){w=Math.min(m.i.length,w);const D=m.l?f(m.l.Ka,m.l,m):null;e:{var Y=m.i;let Oe=-1;for(;;){const Dt=["count="+w];Oe==-1?w>0?(Oe=Y[0].g,Dt.push("ofs="+Oe)):Oe=0:Dt.push("ofs="+Oe);let et=!0;for(let vt=0;vt<w;vt++){var J=Y[vt].g;const ai=Y[vt].map;if(J-=Oe,J<0)Oe=Math.max(0,Y[vt].g-100),et=!1;else try{J="req"+J+"_"||"";try{var me=ai instanceof Map?ai:Object.entries(ai);for(const[sr,Ni]of me){let ki=Ni;u(Ni)&&(ki=ms(Ni)),Dt.push(J+sr+"="+encodeURIComponent(ki))}}catch(sr){throw Dt.push(J+"type="+encodeURIComponent("_badmap")),sr}}catch{D&&D(ai)}}if(et){me=Dt.join("&");break e}}me=void 0}return m=m.i.splice(0,w),b.G=m,me}function kd(m){if(!m.g&&!m.v){m.Y=1;var b=m.Da;te||R(),Z||(te(),Z=!0),x.add(b,m),m.A=0}}function qa(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Gi(f(m.Da,m),Md(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Vd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Gi(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,jt(10),Es(this),Vd(this))};function au(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Vd(m){m.g=new Ai(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var b=Bt(m.na);it(b,"RID","rpc"),it(b,"SID",m.M),it(b,"AID",m.K),it(b,"CI",m.F?"0":"1"),!m.F&&m.ia&&it(b,"TO",m.ia),it(b,"TYPE","xmlhttp"),Fa(m,b),m.u&&m.o&&Ua(b,m.u,m.o),m.O&&(m.g.H=m.O);var w=m.g;m=m.ba,w.M=1,w.A=Oa(Bt(b)),w.u=null,w.R=!0,Ko(w,m)}n.Va=function(){this.C!=null&&(this.C=null,Es(this),qa(this),jt(19))};function nl(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function Pd(m,b){var w=null;if(m.g==b){nl(m),au(m),m.g=null;var D=2}else if(Zi(m.h,b))w=b.G,Qc(m.h,b),D=1;else return;if(m.I!=0){if(b.o)if(D==1){w=b.u?b.u.length:0,b=Date.now()-b.F;var Y=m.D;D=$o(),Wt(D,new Hi(D,w)),ir(m)}else kd(m);else if(Y=b.m,Y==3||Y==0&&b.X>0||!(D==1&&tl(m,b)||D==2&&qa(m)))switch(w&&w.length>0&&(b=m.h,b.i=b.i.concat(w)),Y){case 1:rr(m,5);break;case 4:rr(m,10);break;case 3:rr(m,6);break;default:rr(m,2)}}}function Md(m,b){let w=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(w*=2),w*b}function rr(m,b){if(m.j.info("Error code "+b),b==2){var w=f(m.bb,m),D=m.Ua;const Y=!D;D=new Hn(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||rn(D,"https"),Oa(D),Y?Ri(D.toString(),w):tu(D.toString(),w)}else jt(2);m.I=0,m.l&&m.l.pa(b),Od(m),el(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Od(m){if(m.I=0,m.ja=[],m.l){const b=Xc(m.h);(b.length!=0||m.i.length!=0)&&(N(m.ja,b),N(m.ja,m.i),m.h.i.length=0,S(m.i),m.i.length=0),m.l.oa()}}function Ld(m,b,w){var D=w instanceof Hn?Bt(w):new Hn(w);if(D.g!="")b&&(D.g=b+"."+D.g),ps(D,D.u);else{var Y=l.location;D=Y.protocol,b=b?b+"."+Y.hostname:Y.hostname,Y=+Y.port;const J=new Hn(null);D&&rn(J,D),b&&(J.g=b),Y&&ps(J,Y),w&&(J.h=w),D=J}return w=m.G,b=m.wa,w&&b&&it(D,w,b),it(D,"VER",m.ka),Fa(m,D),D}function jd(m,b,w){if(b&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Aa&&!m.ma?new lt(new er({ab:w})):new lt(m.ma),b.Fa(m.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ud(){}n=Ud.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ws(){}ws.prototype.g=function(m,b){return new An(m,b)};function An(m,b){Lt.call(this),this.g=new Ts(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(m?m["X-WebChannel-Client-Profile"]=b.sa:m={"X-WebChannel-Client-Profile":b.sa}),this.g.U=m,(m=b&&b.Qb)&&!L(m)&&(this.g.u=m),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!L(b)&&(this.g.G=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Dr(this)}v(An,Lt),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){ru(this.g)},An.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.v&&(w={},w.__data__=ms(m),m=w);b.i.push(new zt(b.Ya++,m)),b.I==3&&ir(b)},An.prototype.N=function(){this.g.l=null,delete this.j,ru(this.g),delete this.g,An.Z.N.call(this)};function zd(m){on.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const w in b){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}v(zd,on);function Bd(){ni.call(this),this.status=1}v(Bd,ni);function Dr(m){this.g=m}v(Dr,Ud),Dr.prototype.ra=function(){Wt(this.g,"a")},Dr.prototype.qa=function(m){Wt(this.g,new zd(m))},Dr.prototype.pa=function(m){Wt(this.g,new Bd)},Dr.prototype.oa=function(){Wt(this.g,"b")},ws.prototype.createWebChannel=ws.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,QR=function(){return new ws},YR=function(){return $o()},KR=Ct,hv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pa.NO_ERROR=0,Pa.TIMEOUT=8,Pa.HTTP_ERROR=6,pm=Pa,Hc.COMPLETE="complete",$R=Hc,_d.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",Lt.prototype.listen=Lt.prototype.J,th=_d,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,GR=lt}).apply(typeof Qf<"u"?Qf:typeof self<"u"?self:typeof window<"u"?window:{});const kS="@firebase/firestore",VS="4.9.2";class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let Dc="12.3.0";const ko=new g_("@firebase/firestore");function zl(){return ko.logLevel}function ue(n,...e){if(ko.logLevel<=Ge.DEBUG){const t=e.map(I_);ko.debug(`Firestore (${Dc}): ${n}`,...t)}}function Pt(n,...e){if(ko.logLevel<=Ge.ERROR){const t=e.map(I_);ko.error(`Firestore (${Dc}): ${n}`,...t)}}function Ih(n,...e){if(ko.logLevel<=Ge.WARN){const t=e.map(I_);ko.warn(`Firestore (${Dc}): ${n}`,...t)}}function I_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ve(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,XR(n,i,t)}function XR(n,e,t){let i=`FIRESTORE (${Dc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Pt(i),new Error(i)}function we(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||XR(e,s,i)}function be(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class es{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class EL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vn.UNAUTHENTICATED)))}shutdown(){}}class SL{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){we(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new es;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new es,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new es)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(we(typeof i.accessToken=="string",31837,{l:i}),new EL(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class xL{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AL{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new xL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class PS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){we(this.o===void 0,3512);const i=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new PS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(we(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new PS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function RL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class R_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=RL(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%62))}return i}}function Ve(n,e){return n<e?-1:n>e?1:0}function dv(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return b0(s)===b0(o)?Ve(s,o):b0(s)?1:-1}return Ve(n.length,e.length)}const CL=55296,DL=57343;function b0(n){const e=n.charCodeAt(0);return e>=CL&&e<=DL}function oc(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function WR(n){return n+"\0"}const MS="__name__";class ur{constructor(e,t,i){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ve(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ur.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ur?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const o=ur.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Ve(e.length,t.length)}static compareSegments(e,t){const i=ur.isNumericId(e),s=ur.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?ur.extractNumericId(e).compare(ur.extractNumericId(t)):dv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ca.fromString(e.substring(4,e.length-2))}}class nt extends ur{construct(e,t,i){return new nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const NL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends ur{construct(e,t,i){return new Et(e,t,i)}static isValidIdentifier(e){return NL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MS}static keyField(){return new Et([MS])}static fromServerFormat(e){const t=[];let i="",s=0;const o=()=>{if(i.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new fe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new fe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(i+=u,s++):(o(),s++)}if(o(),l)throw new fe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(t)}static emptyPath(){return new Et([])}}class ge{constructor(e){this.path=e}static fromPath(e){return new ge(nt.fromString(e))}static fromName(e){return new ge(nt.fromString(e).popFirst(5))}static empty(){return new ge(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new nt(e.slice()))}}function ZR(n,e,t){if(!t)throw new fe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kL(n,e,t,i){if(e===!0&&i===!0)throw new fe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function OS(n){if(!ge.isDocumentKey(n))throw new fe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LS(n){if(ge.isDocumentKey(n))throw new fe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function xp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve(12329,{type:typeof n})}function zi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xp(n);throw new fe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function rd(n,e){if(!JR(n))throw new fe(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new fe(re.INVALID_ARGUMENT,t);return!0}const jS=-62135596800,US=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*US);return new We(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jS)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/US}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rd(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:Yt("string",We._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new We(0,0))}static max(){return new Ae(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const lc=-1;class $m{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function fv(n){return n.fields.find((e=>e.kind===2))}function uo(n){return n.fields.filter((e=>e.kind!==2))}$m.UNKNOWN_ID=-1;class gm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Rh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Rh(0,ti.min())}}function e2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(i===1e9?new We(t+1,0):new We(t,i));return new ti(s,ge.empty(),e)}function t2(n){return new ti(n.readTime,n.key,lc)}class ti{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ti(Ae.min(),ge.empty(),lc)}static max(){return new ti(Ae.max(),ge.empty(),lc)}}function C_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}const n2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Sa(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==n2)throw n;ue("LocalStore","Unexpectedly lost primary lease")}class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,i)=>{t(e)}))}static reject(e){return new K(((t,i)=>{i(e)}))}static waitFor(e){return new K(((t,i)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&t()}),(d=>i(d)))})),l=!0,o===s&&t()}))}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next((s=>s?K.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,o)=>{i.push(t.call(this,s,o))})),this.waitFor(i)}static mapArray(e,t){return new K(((i,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{l[f]=g,++u,u===o&&i(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new K(((i,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):i()};o()}))}}const Zn="SimpleDb";class Ap{static open(e,t,i,s){try{return new Ap(t,e.transaction(s,i))}catch(o){throw new ch(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new es,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ch(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=D_(i.target.error);this.S.reject(new ch(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ue(Zn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new PL(t)}}class ua{static delete(e){return ue(Zn,"Removing database:",e),mo(WI().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!rR())return!1;if(ua.F())return!0;const e=en(),t=ua.M(e),i=0<t&&t<10,s=r2(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,ua.M(en())===12.2&&Pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ue(Zn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const l=o.target.result;t(l)},s.onblocked=()=>{i(new ch(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const l=o.target.error;l.name==="VersionError"?i(new fe(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new fe(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new ch(e,l))},s.onupgradeneeded=o=>{ue(Zn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,s.transaction,o.oldVersion,this.version).next((()=>{ue(Zn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const u=Ap.open(this.db,e,o?"readonly":"readwrite",i),d=s(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),K.reject(f)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&l<3;if(ue(Zn,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function r2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class VL{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return mo(this.U.delete())}}class ch extends fe{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xa(n){return n.name==="IndexedDbTransactionError"}class PL{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ue(Zn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ue(Zn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),mo(i)}add(e){return ue(Zn,"ADD",this.store.name,e,e),mo(this.store.add(e))}get(e){return mo(this.store.get(e)).next((t=>(t===void 0&&(t=null),ue(Zn,"GET",this.store.name,e,t),t)))}delete(e){return ue(Zn,"DELETE",this.store.name,e),mo(this.store.delete(e))}count(){return ue(Zn,"COUNT",this.store.name),mo(this.store.count())}J(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new K(((l,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{l(d.target.result)}}))}{const o=this.cursor(i),l=[];return this.H(o,((u,d)=>{l.push(d)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new K(((s,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{s(l.target.result)}}))}Z(e,t){ue(Zn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,((o,l,u)=>u.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}te(e){const t=this.cursor({});return new K(((i,s)=>{t.onerror=o=>{const l=D_(o.target.error);s(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((u=>{u?l.continue():i()})):i()}}))}H(e,t){const i=[];return new K(((s,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void s();const d=new VL(u),f=t(u.primaryKey,u.value,d);if(f instanceof K){const g=f.catch((v=>(d.done(),K.reject(v))));i.push(g)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>K.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function mo(n){return new K(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=D_(i.target.error);t(s)}}))}let zS=!1;function D_(n){const e=ua.M(en());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zS||(zS=!0,setTimeout((()=>{throw i}),0)),i}}return n}const uh="IndexBackfiller";class ML{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ue(uh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ue(uh,`Documents written: ${t}`)}catch(t){xa(t)?ue(uh,"Ignoring IndexedDB error during index backfill: ",t):await Sa(t)}await this.re(6e4)}))}}class OL{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,o=!0;return K.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return ue(uh,`Processing collection: ${l}`),this.oe(e,l,s).next((u=>{s-=u,i.add(l)}));o=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(s,o))).next((u=>(ue(uh,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,o)=>{const l=t2(o);C_(l,i)>0&&(i=l)})),new ti(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class jn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jn.ce=-1;const To=-1;function Ip(n){return n==null}function Ch(n){return n===0&&1/n==-1/0}function s2(n){return typeof n=="number"&&Number.isInteger(n)&&!Ch(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Km="";function wn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BS(e)),e=LL(n.get(t),e);return BS(e)}function LL(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Km:t+="";break;default:t+=o}}return t}function BS(n){return n+Km+""}function fr(n){const e=n.length;if(we(e>=2,64408,{path:n}),e===2)return we(n.charAt(0)===Km&&n.charAt(1)==="",56145,{path:n}),nt.emptyPath();const t=e-2,i=[];let s="";for(let o=0;o<e;){const l=n.indexOf(Km,o);switch((l<0||l>t)&&ve(50515,{path:n}),n.charAt(l+1)){case"":const u=n.substring(o,l);let d;s.length===0?d=u:(s+=u,d=s,s=""),i.push(d);break;case"":s+=n.substring(o,l),s+="\0";break;case"":s+=n.substring(o,l+1);break;default:ve(61167,{path:n})}o=l+2}return new nt(i)}const ho="remoteDocuments",sd="owner",Vl="owner",Dh="mutationQueues",jL="userId",Li="mutations",FS="batchId",vo="userMutationsIndex",qS=["userId","batchId"];function ym(n,e){return[n,wn(e)]}function a2(n,e,t){return[n,wn(e),t]}const UL={},cc="documentMutations",Ym="remoteDocumentsV14",zL=["prefixPath","collectionGroup","readTime","documentId"],vm="documentKeyIndex",BL=["prefixPath","collectionGroup","documentId"],o2="collectionGroupIndex",FL=["collectionGroup","readTime","prefixPath","documentId"],Nh="remoteDocumentGlobal",mv="remoteDocumentGlobalKey",uc="targets",l2="queryTargetsIndex",qL=["canonicalId","targetId"],hc="targetDocuments",HL=["targetId","path"],N_="documentTargetsIndex",GL=["path","targetId"],Qm="targetGlobalKey",Eo="targetGlobal",kh="collectionParents",$L=["collectionId","parent"],dc="clientMetadata",KL="clientId",Rp="bundles",YL="bundleId",Cp="namedQueries",QL="name",k_="indexConfiguration",XL="indexId",pv="collectionGroupIndex",WL="collectionGroup",hh="indexState",ZL=["indexId","uid"],c2="sequenceNumberIndex",JL=["uid","sequenceNumber"],dh="indexEntries",e9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],u2="documentKeyIndex",t9=["indexId","uid","orderedDocumentKey"],Dp="documentOverlays",n9=["userId","collectionPath","documentId"],gv="collectionPathOverlayIndex",i9=["userId","collectionPath","largestBatchId"],h2="collectionGroupOverlayIndex",r9=["userId","collectionGroup","largestBatchId"],V_="globals",s9="name",d2=[Dh,Li,cc,ho,uc,sd,Eo,hc,dc,Nh,kh,Rp,Cp],a9=[...d2,Dp],f2=[Dh,Li,cc,Ym,uc,sd,Eo,hc,dc,Nh,kh,Rp,Cp,Dp],m2=f2,P_=[...m2,k_,hh,dh],o9=P_,p2=[...P_,V_],l9=p2;class yv extends i2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function tn(n,e){const t=be(n);return ua.O(t.le,e)}function HS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Aa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function g2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xf(this.root,e,this.comparator,!0)}}class Xf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??mn.RED,this.left=s??mn.EMPTY,this.right=o??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new mn(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return mn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,i,s,o){return this}insert(e,t,i){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new GS(this.data.getIterator())}getIteratorFrom(e){return new GS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ot(this.comparator);return t.data=e,t}}class GS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pl(n){return n.hasNext()?n.getNext():void 0}class Un{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new Un([])}unionWith(e){let t=new ot(Et.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class y2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new y2("Invalid base64 string: "+o):o}})(e);return new Ot(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new Ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const c9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(n){if(we(!!n,39018),typeof n=="string"){let e=0;const t=c9.exec(n);if(we(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ss(n){return typeof n=="string"?Ot.fromBase64String(n):Ot.fromUint8Array(n)}const v2="server_timestamp",_2="__type__",b2="__previous_value__",T2="__local_write_time__";function M_(n){return(n?.mapValue?.fields||{})[_2]?.stringValue===v2}function Np(n){const e=n.mapValue.fields[b2];return M_(e)?Np(e):e}function Vh(n){const e=rs(n.mapValue.fields[T2].timestampValue);return new We(e.seconds,e.nanos)}class u9{constructor(e,t,i,s,o,l,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const Xm="(default)";class Vo{constructor(e,t){this.projectId=e,this.database=t||Xm}static empty(){return new Vo("","")}get isDefaultDatabase(){return this.database===Xm}isEqual(e){return e instanceof Vo&&e.projectId===this.projectId&&e.database===this.database}}const O_="__type__",E2="__max__",sa={mapValue:{fields:{__type__:{stringValue:E2}}}},L_="__vector__",fc="value",_m={nullValue:"NULL_VALUE"};function fa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?M_(n)?4:w2(n)?9007199254740991:kp(n)?10:11:ve(28295,{value:n})}function wr(n,e){if(n===e)return!0;const t=fa(n);if(t!==fa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vh(n).isEqual(Vh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=rs(s.timestampValue),u=rs(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return ss(s.bytesValue).isEqual(ss(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return bt(s.geoPointValue.latitude)===bt(o.geoPointValue.latitude)&&bt(s.geoPointValue.longitude)===bt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return bt(s.integerValue)===bt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=bt(s.doubleValue),u=bt(o.doubleValue);return l===u?Ch(l)===Ch(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return oc(n.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(HS(l)!==HS(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!wr(l[d],u[d])))return!1;return!0})(n,e);default:return ve(52216,{left:n})}}function Ph(n,e){return(n.values||[]).find((t=>wr(t,e)))!==void 0}function ma(n,e){if(n===e)return 0;const t=fa(n),i=fa(e);if(t!==i)return Ve(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=bt(o.integerValue||o.doubleValue),d=bt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return $S(n.timestampValue,e.timestampValue);case 4:return $S(Vh(n),Vh(e));case 5:return dv(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=ss(o),d=ss(l);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Ve(u[f],d[f]);if(g!==0)return g}return Ve(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Ve(bt(o.latitude),bt(l.latitude));return u!==0?u:Ve(bt(o.longitude),bt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return KS(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const u=o.fields||{},d=l.fields||{},f=u[fc]?.arrayValue,g=d[fc]?.arrayValue,v=Ve(f?.values?.length||0,g?.values?.length||0);return v!==0?v:KS(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===sa.mapValue&&l===sa.mapValue)return 0;if(o===sa.mapValue)return 1;if(l===sa.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=l.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const _=dv(d[v],g[v]);if(_!==0)return _;const S=ma(u[d[v]],f[g[v]]);if(S!==0)return S}return Ve(d.length,g.length)})(n.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function $S(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=rs(n),i=rs(e),s=Ve(t.seconds,i.seconds);return s!==0?s:Ve(t.nanos,i.nanos)}function KS(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const o=ma(t[s],i[s]);if(o)return o}return Ve(t.length,i.length)}function mc(n){return vv(n)}function vv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=rs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ss(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ge.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const o of t.values||[])s?s=!1:i+=",",i+=vv(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${vv(t.fields[l])}`;return s+"}"})(n.mapValue):ve(61005,{value:n})}function bm(n){switch(fa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Np(n);return e?16+bm(e):16;case 5:return 2*n.stringValue.length;case 6:return ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+bm(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Aa(i.fields,((o,l)=>{s+=o.length+bm(l)})),s})(n.mapValue);default:throw ve(13486,{value:n})}}function Mh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _v(n){return!!n&&"integerValue"in n}function Oh(n){return!!n&&"arrayValue"in n}function YS(n){return!!n&&"nullValue"in n}function QS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tm(n){return!!n&&"mapValue"in n}function kp(n){return(n?.mapValue?.fields||{})[O_]?.stringValue===L_}function fh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Aa(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=fh(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fh(n.arrayValue.values[t]);return e}return{...n}}function w2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===E2}const S2={mapValue:{fields:{[O_]:{stringValue:L_},[fc]:{arrayValue:{}}}}};function h9(n){return"nullValue"in n?_m:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Mh(Vo.empty(),ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?kp(n)?S2:{mapValue:{}}:ve(35942,{value:n})}function d9(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Mh(Vo.empty(),ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?S2:"mapValue"in n?kp(n)?{mapValue:{}}:sa:ve(61959,{value:n})}function XS(n,e){const t=ma(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function WS(n,e){const t=ma(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Tm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fh(t)}setAll(e){let t=Et.emptyPath(),i={},s=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,i,s),i={},s=[],t=u.popLast()}l?i[u.lastSegment()]=fh(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){const t=this.field(e.popLast());Tm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Tm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Aa(t,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new bn(fh(this.value))}}function x2(n){const e=[];return Aa(n.fields,((t,i)=>{const s=new Et([t]);if(Tm(i)){const o=x2(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Un(e)}class Rt{constructor(e,t,i,s,o,l,u){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Rt(e,0,Ae.min(),Ae.min(),Ae.min(),bn.empty(),0)}static newFoundDocument(e,t,i,s){return new Rt(e,1,t,Ae.min(),i,s,0)}static newNoDocument(e,t){return new Rt(e,2,t,Ae.min(),Ae.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new Rt(e,3,t,Ae.min(),Ae.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pc{constructor(e,t){this.position=e,this.inclusive=t}}function ZS(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?i=ge.comparator(ge.fromName(l.referenceValue),t.key):i=ma(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function JS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wr(n.position[t],e.position[t]))return!1;return!0}class Lh{constructor(e,t="asc"){this.field=e,this.dir=t}}function f9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class A2{}class $e extends A2{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new m9(e,t,i):t==="array-contains"?new y9(e,i):t==="in"?new k2(e,i):t==="not-in"?new v9(e,i):t==="array-contains-any"?new _9(e,i):new $e(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new p9(e,i):new g9(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ma(t,this.value)):t!==null&&fa(this.value)===fa(t)&&this.matchesComparison(ma(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class at extends A2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new at(e,t)}matches(e){return gc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gc(n){return n.op==="and"}function bv(n){return n.op==="or"}function j_(n){return I2(n)&&gc(n)}function I2(n){for(const e of n.filters)if(e instanceof at)return!1;return!0}function Tv(n){if(n instanceof $e)return n.field.canonicalString()+n.op.toString()+mc(n.value);if(j_(n))return n.filters.map((e=>Tv(e))).join(",");{const e=n.filters.map((t=>Tv(t))).join(",");return`${n.op}(${e})`}}function R2(n,e){return n instanceof $e?(function(i,s){return s instanceof $e&&i.op===s.op&&i.field.isEqual(s.field)&&wr(i.value,s.value)})(n,e):n instanceof at?(function(i,s){return s instanceof at&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,l,u)=>o&&R2(l,s.filters[u])),!0):!1})(n,e):void ve(19439)}function C2(n,e){const t=n.filters.concat(e);return at.create(t,n.op)}function D2(n){return n instanceof $e?(function(t){return`${t.field.canonicalString()} ${t.op} ${mc(t.value)}`})(n):n instanceof at?(function(t){return t.op.toString()+" {"+t.getFilters().map(D2).join(" ,")+"}"})(n):"Filter"}class m9 extends $e{constructor(e,t,i){super(e,t,i),this.key=ge.fromName(i.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class p9 extends $e{constructor(e,t){super(e,"in",t),this.keys=N2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class g9 extends $e{constructor(e,t){super(e,"not-in",t),this.keys=N2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function N2(n,e){return(e.arrayValue?.values||[]).map((t=>ge.fromName(t.referenceValue)))}class y9 extends $e{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Oh(t)&&Ph(t.arrayValue,this.value)}}class k2 extends $e{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ph(this.value.arrayValue,t)}}class v9 extends $e{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ph(this.value.arrayValue,t)}}class _9 extends $e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Oh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ph(this.value.arrayValue,i)))}}class b9{constructor(e,t=null,i=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function Ev(n,e=null,t=[],i=[],s=null,o=null,l=null){return new b9(n,e,t,i,s,o,l)}function Po(n){const e=be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Tv(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Ip(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>mc(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>mc(i))).join(",")),e.Te=t}return e.Te}function ad(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!f9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!R2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JS(n.startAt,e.startAt)&&JS(n.endAt,e.endAt)}function Wm(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Zm(n,e){return n.filters.filter((t=>t instanceof $e&&t.field.isEqual(e)))}function ex(n,e,t){let i=_m,s=!0;for(const o of Zm(n,e)){let l=_m,u=!0;switch(o.op){case"<":case"<=":l=h9(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,u=!1;break;case"!=":case"not-in":l=_m}XS({value:i,inclusive:s},{value:l,inclusive:u})<0&&(i=l,s=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];XS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}function tx(n,e,t){let i=sa,s=!0;for(const o of Zm(n,e)){let l=sa,u=!0;switch(o.op){case">=":case">":l=d9(o.value),u=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,u=!1;break;case"!=":case"not-in":l=sa}WS({value:i,inclusive:s},{value:l,inclusive:u})>0&&(i=l,s=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];WS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}class Nc{constructor(e,t=null,i=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function V2(n,e,t,i,s,o,l,u){return new Nc(n,e,t,i,s,o,l,u)}function Vp(n){return new Nc(n)}function nx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function P2(n){return n.collectionGroup!==null}function mh(n){const e=be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new ot(Et.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Lh(o,i))})),t.has(Et.keyField().canonicalString())||e.Ie.push(new Lh(Et.keyField(),i))}return e.Ie}function ei(n){const e=be(n);return e.Ee||(e.Ee=T9(e,mh(n))),e.Ee}function T9(n,e){if(n.limitType==="F")return Ev(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Lh(s.field,o)}));const t=n.endAt?new pc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new pc(n.startAt.position,n.startAt.inclusive):null;return Ev(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function wv(n,e){const t=n.filters.concat([e]);return new Nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jm(n,e,t){return new Nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pp(n,e){return ad(ei(n),ei(e))&&n.limitType===e.limitType}function M2(n){return`${Po(ei(n))}|lt:${n.limitType}`}function Bl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>D2(s))).join(", ")}]`),Ip(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>mc(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>mc(s))).join(",")),`Target(${i})`})(ei(n))}; limitType=${n.limitType})`}function od(n,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ge.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,s){for(const o of mh(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(l,u,d){const f=ZS(l,u,d);return l.inclusive?f<=0:f<0})(i.startAt,mh(i),s)||i.endAt&&!(function(l,u,d){const f=ZS(l,u,d);return l.inclusive?f>=0:f>0})(i.endAt,mh(i),s))})(n,e)}function O2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function L2(n){return(e,t)=>{let i=!1;for(const s of mh(n)){const o=E9(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function E9(n,e,t){const i=n.field.isKeyField()?ge.comparator(e.key,t.key):(function(o,l,u){const d=l.data.field(o),f=u.data.field(o);return d!==null&&f!==null?ma(d,f):ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ve(19790,{direction:n.dir})}}class us{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Aa(this.inner,((t,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return g2(this.inner)}size(){return this.innerSize}}const w9=new mt(ge.comparator);function Jn(){return w9}const j2=new mt(ge.comparator);function nh(...n){let e=j2;for(const t of n)e=e.insert(t.key,t);return e}function U2(n){let e=j2;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function mr(){return ph()}function z2(){return ph()}function ph(){return new us((n=>n.toString()),((n,e)=>n.isEqual(e)))}const S9=new mt(ge.comparator),x9=new ot(ge.comparator);function ze(...n){let e=x9;for(const t of n)e=e.add(t);return e}const A9=new ot(Ve);function U_(){return A9}function z_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function B2(n){return{integerValue:""+n}}function I9(n,e){return s2(e)?B2(e):z_(n,e)}class Mp{constructor(){this._=void 0}}function R9(n,e,t){return n instanceof jh?(function(s,o){const l={fields:{[_2]:{stringValue:v2},[T2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&M_(o)&&(o=Np(o)),o&&(l.fields[b2]=o),{mapValue:l}})(t,e):n instanceof yc?q2(n,e):n instanceof vc?H2(n,e):(function(s,o){const l=F2(s,o),u=ix(l)+ix(s.Ae);return _v(l)&&_v(s.Ae)?B2(u):z_(s.serializer,u)})(n,e)}function C9(n,e,t){return n instanceof yc?q2(n,e):n instanceof vc?H2(n,e):t}function F2(n,e){return n instanceof Uh?(function(i){return _v(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class jh extends Mp{}class yc extends Mp{constructor(e){super(),this.elements=e}}function q2(n,e){const t=G2(e);for(const i of n.elements)t.some((s=>wr(s,i)))||t.push(i);return{arrayValue:{values:t}}}class vc extends Mp{constructor(e){super(),this.elements=e}}function H2(n,e){let t=G2(e);for(const i of n.elements)t=t.filter((s=>!wr(s,i)));return{arrayValue:{values:t}}}class Uh extends Mp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ix(n){return bt(n.integerValue||n.doubleValue)}function G2(n){return Oh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class D9{constructor(e,t){this.field=e,this.transform=t}}function N9(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof yc&&s instanceof yc||i instanceof vc&&s instanceof vc?oc(i.elements,s.elements,wr):i instanceof Uh&&s instanceof Uh?wr(i.Ae,s.Ae):i instanceof jh&&s instanceof jh})(n.transform,e.transform)}class k9{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Em(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Op{}function $2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lp(n.key,Tn.none()):new kc(n.key,n.data,Tn.none());{const t=n.data,i=bn.empty();let s=new ot(Et.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new hs(n.key,i,new Un(s.toArray()),Tn.none())}}function V9(n,e,t){n instanceof kc?(function(s,o,l){const u=s.value.clone(),d=sx(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof hs?(function(s,o,l){if(!Em(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=sx(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(K2(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function gh(n,e,t,i){return n instanceof kc?(function(o,l,u,d){if(!Em(o.precondition,l))return u;const f=o.value.clone(),g=ax(o.fieldTransforms,d,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof hs?(function(o,l,u,d){if(!Em(o.precondition,l))return u;const f=ax(o.fieldTransforms,d,l),g=l.data;return g.setAll(K2(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(o,l,u){return Em(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function P9(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=F2(i.transform,s||null);o!=null&&(t===null&&(t=bn.empty()),t.set(i.field,o))}return t||null}function rx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&oc(i,s,((o,l)=>N9(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class kc extends Op{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hs extends Op{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function K2(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function sx(n,e,t){const i=new Map;we(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);i.set(o.field,C9(l,u,t[s]))}return i}function ax(n,e,t){const i=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);i.set(s.field,R9(o,l,e))}return i}class Lp extends Op{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Y2 extends Op{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class B_{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&V9(o,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=gh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=gh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=z2();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=$2(l,u);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,((t,i)=>rx(t,i)))&&oc(this.baseMutations,e.baseMutations,((t,i)=>rx(t,i)))}}class F_{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){we(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return S9})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new F_(e,t,i,s)}}class q_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class M9{constructor(e,t){this.count=e,this.unchangedNames=t}}var $t,Qe;function O9(n){switch(n){case re.OK:return ve(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return ve(15467,{code:n})}}function Q2(n){if(n===void 0)return Pt("GRPC error has no .code"),re.UNKNOWN;switch(n){case $t.OK:return re.OK;case $t.CANCELLED:return re.CANCELLED;case $t.UNKNOWN:return re.UNKNOWN;case $t.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case $t.INTERNAL:return re.INTERNAL;case $t.UNAVAILABLE:return re.UNAVAILABLE;case $t.UNAUTHENTICATED:return re.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case $t.NOT_FOUND:return re.NOT_FOUND;case $t.ALREADY_EXISTS:return re.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return re.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case $t.ABORTED:return re.ABORTED;case $t.OUT_OF_RANGE:return re.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return re.UNIMPLEMENTED;case $t.DATA_LOSS:return re.DATA_LOSS;default:return ve(39323,{code:n})}}(Qe=$t||($t={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function L9(){return new TextEncoder}const j9=new ca([4294967295,4294967295],0);function ox(n){const e=L9().encode(n),t=new HR;return t.update(e),new Uint8Array(t.digest())}function lx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ca([t,i],0),new ca([s,o],0)]}class H_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ih(`Invalid padding: ${t}`);if(i<0)throw new ih(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ih(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ih(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ca.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(ca.fromNumber(i)));return s.compare(j9)===1&&(s=new ca([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ox(e),[i,s]=lx(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new H_(o,s,t);return i.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=ox(e),[i,s]=lx(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ih extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ld{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ld(Ae.min(),s,new mt(Ve),Jn(),ze())}}class cd{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new cd(i,t,ze(),ze(),ze())}}class wm{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class X2{constructor(e,t){this.targetId=e,this.Ce=t}}class W2{constructor(e,t,i=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class cx{constructor(){this.ve=0,this.Fe=ux(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),i=ze();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ve(38017,{changeType:o})}})),new cd(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=ux()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class U9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jn(),this.Je=Wf(),this.He=Wf(),this.Ye=new mt(Ve)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Wm(o))if(i===0){const l=new ge(o.path);this.et(t,l,Rt.newNoDocument(l,Ae.min()))}else we(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=ss(i).toUint8Array()}catch(d){if(d instanceof y2)return Ih("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new H_(l,s,o)}catch(d){return Ih(d instanceof ih?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&Wm(u.target)){const d=new ge(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Rt.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let i=ze();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new ld(e,t,this.Ye,this.je,i);return this.je=Jn(),this.Je=Wf(),this.He=Wf(),this.Ye=new mt(Ve),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new cx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ot(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ot(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wf(){return new mt(ge.comparator)}function ux(){return new mt(ge.comparator)}const z9={asc:"ASCENDING",desc:"DESCENDING"},B9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F9={and:"AND",or:"OR"};class q9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sv(n,e){return n.useProto3Json||Ip(e)?e:{value:e}}function _c(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function H9(n,e){return _c(n,e.toTimestamp())}function Cn(n){return we(!!n,49232),Ae.fromTimestamp((function(t){const i=rs(t);return new We(i.seconds,i.nanos)})(n))}function G_(n,e){return xv(n,e).canonicalString()}function xv(n,e){const t=(function(s){return new nt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function J2(n){const e=nt.fromString(n);return we(lC(e),10190,{key:e.toString()}),e}function ep(n,e){return G_(n.databaseId,e.path)}function wo(n,e){const t=J2(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ge(nC(t))}function eC(n,e){return G_(n.databaseId,e)}function tC(n){const e=J2(n);return e.length===4?nt.emptyPath():nC(e)}function Av(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nC(n){return we(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function hx(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function G9(n,e,t){const i=wo(n,e.name),s=Cn(e.updateTime),o=e.createTime?Cn(e.createTime):Ae.min(),l=new bn({mapValue:{fields:e.fields}}),u=Rt.newFoundDocument(i,s,o,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function $9(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ve(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(we(g===void 0||typeof g=="string",58123),Ot.fromBase64String(g||"")):(we(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Ot.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(f){const g=f.code===void 0?re.UNKNOWN:Q2(f.code);return new fe(g,f.message||"")})(l);t=new W2(i,s,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=wo(n,i.document.name),o=Cn(i.document.updateTime),l=i.document.createTime?Cn(i.document.createTime):Ae.min(),u=new bn({mapValue:{fields:i.document.fields}}),d=Rt.newFoundDocument(s,o,l,u),f=i.targetIds||[],g=i.removedTargetIds||[];t=new wm(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=wo(n,i.document),o=i.readTime?Cn(i.readTime):Ae.min(),l=Rt.newNoDocument(s,o),u=i.removedTargetIds||[];t=new wm([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=wo(n,i.document),o=i.removedTargetIds||[];t=new wm([],o,s,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new M9(s,o),u=i.targetId;t=new X2(u,l)}}return t}function tp(n,e){let t;if(e instanceof kc)t={update:hx(n,e.key,e.value)};else if(e instanceof Lp)t={delete:ep(n,e.key)};else if(e instanceof hs)t={update:hx(n,e.key,e.data),updateMask:Z9(e.fieldMask)};else{if(!(e instanceof Y2))return ve(16599,{Vt:e.type});t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const u=l.transform;if(u instanceof jh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof yc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof vc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Uh)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw ve(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:H9(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ve(27497)})(n,e.precondition)),t}function Iv(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Tn.updateTime(Cn(o.updateTime)):o.exists!==void 0?Tn.exists(o.exists):Tn.none()})(e.currentDocument):Tn.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(l,u){let d=null;if("setToServerValue"in u)we(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new jh;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];d=new yc(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];d=new vc(g)}else"increment"in u?d=new Uh(l,u.increment):ve(16584,{proto:u});const f=Et.fromServerFormat(u.fieldPath);return new D9(f,d)})(n,s))):[];if(e.update){e.update.name;const s=wo(n,e.update.name),o=new bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(d){const f=d.fieldPaths||[];return new Un(f.map((g=>Et.fromServerFormat(g))))})(e.updateMask);return new hs(s,o,l,t,i)}return new kc(s,o,t,i)}if(e.delete){const s=wo(n,e.delete);return new Lp(s,t)}if(e.verify){const s=wo(n,e.verify);return new Y2(s,t)}return ve(1463,{proto:e})}function K9(n,e){return n&&n.length>0?(we(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?Cn(s.updateTime):Cn(o);return l.isEqual(Ae.min())&&(l=Cn(o)),new k9(l,s.transformResults||[])})(t,e)))):[]}function iC(n,e){return{documents:[eC(n,e.path)]}}function rC(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=eC(n,s);const o=(function(f){if(f.length!==0)return oC(at.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:Fl(_.field),direction:Q9(_.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Sv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function sC(n){let e=tC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){we(i===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(v){const _=aC(v);return _ instanceof at&&j_(_)?_.getFilters():[_]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((_=>(function(N){return new Lh(ql(N.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(_)))})(t.orderBy));let u=null;t.limit&&(u=(function(v){let _;return _=typeof v=="object"?v.value:v,Ip(_)?null:_})(t.limit));let d=null;t.startAt&&(d=(function(v){const _=!!v.before,S=v.values||[];return new pc(S,_)})(t.startAt));let f=null;return t.endAt&&(f=(function(v){const _=!v.before,S=v.values||[];return new pc(S,_)})(t.endAt)),V2(e,s,l,o,u,"F",d,f)}function Y9(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ql(t.unaryFilter.field);return $e.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=ql(t.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ql(t.unaryFilter.field);return $e.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ql(t.unaryFilter.field);return $e.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return $e.create(ql(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return at.create(t.compositeFilter.filters.map((i=>aC(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(n):ve(30097,{filter:n})}function Q9(n){return z9[n]}function X9(n){return B9[n]}function W9(n){return F9[n]}function Fl(n){return{fieldPath:n.canonicalString()}}function ql(n){return Et.fromServerFormat(n.fieldPath)}function oC(n){return n instanceof $e?(function(t){if(t.op==="=="){if(QS(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NAN"}};if(YS(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(QS(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NOT_NAN"}};if(YS(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fl(t.field),op:X9(t.op),value:t.value}}})(n):n instanceof at?(function(t){const i=t.getFilters().map((s=>oC(s)));return i.length===1?i[0]:{compositeFilter:{op:W9(t.op),filters:i}}})(n):ve(54877,{filter:n})}function Z9(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function lC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Wr{constructor(e,t,i,s,o=Ae.min(),l=Ae.min(),u=Ot.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class cC{constructor(e){this.yt=e}}function J9(n,e){let t;if(e.document)t=G9(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ge.fromSegments(e.noDocument.path),s=Oo(e.noDocument.readTime);t=Rt.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve(56709);{const i=ge.fromSegments(e.unknownDocument.path),s=Oo(e.unknownDocument.version);t=Rt.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const o=new We(s[0],s[1]);return Ae.fromTimestamp(o)})(e.readTime)),t}function dx(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:np(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,l){return{name:ep(o,l.key),fields:l.data.value.mapValue.fields,updateTime:_c(o,l.version.toTimestamp()),createTime:_c(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Mo(e.version)};else{if(!e.isUnknownDocument())return ve(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Mo(e.version)}}return i}function np(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Mo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oo(n){const e=new We(n.seconds,n.nanoseconds);return Ae.fromTimestamp(e)}function po(n,e){const t=(e.baseMutations||[]).map((o=>Iv(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>Iv(n.yt,o))),s=We.fromMillis(e.localWriteTimeMs);return new B_(e.batchId,s,t,i)}function rh(n){const e=Oo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Oo(n.lastLimboFreeSnapshotVersion):Ae.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return we(l===1,1966,{count:l}),ei(Vp(tC(o.documents[0])))})(n.query):(function(o){return ei(sC(o))})(n.query),new Wr(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ot.fromBase64String(n.resumeToken))}function uC(n,e){const t=Mo(e.snapshotVersion),i=Mo(e.lastLimboFreeSnapshotVersion);let s;s=Wm(e.target)?iC(n.yt,e.target):rC(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Po(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function hC(n){const e=sC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jm(e,e.limit,"L"):e}function T0(n,e){return new q_(e.largestBatchId,Iv(n.yt,e.overlayMutation))}function fx(n,e){const t=e.path.lastSegment();return[n,wn(e.path.popLast()),t]}function mx(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Mo(i.readTime),documentKey:wn(i.documentKey.path),largestBatchId:i.largestBatchId}}class ej{getBundleMetadata(e,t){return px(e).get(t).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:Oo(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,t){return px(e).put((function(s){return{bundleId:s.id,createTime:Mo(Cn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return gx(e).get(t).next((i=>{if(i)return(function(o){return{name:o.name,query:hC(o.bundledQuery),readTime:Oo(o.readTime)}})(i)}))}saveNamedQuery(e,t){return gx(e).put((function(s){return{name:s.name,readTime:Mo(Cn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function px(n){return tn(n,Rp)}function gx(n){return tn(n,Cp)}class jp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new jp(e,i)}getOverlay(e,t){return $u(e).get(fx(this.userId,t)).next((i=>i?T0(this.serializer,i):null))}getOverlays(e,t){const i=mr();return K.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((o,l)=>{const u=new q_(t,l);s.push(this.St(e,u))})),K.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((l=>s.add(wn(l.getCollectionPath()))));const o=[];return s.forEach((l=>{const u=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push($u(e).Z(gv,u))})),K.waitFor(o)}getOverlaysForCollection(e,t,i){const s=mr(),o=wn(t),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return $u(e).J(gv,l).next((u=>{for(const d of u){const f=T0(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const o=mr();let l;const u=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $u(e).ee({index:h2,range:u},((d,f,g)=>{const v=T0(this.serializer,f);o.size()<s||v.largestBatchId===l?(o.set(v.getKey(),v),l=v.largestBatchId):g.done()})).next((()=>o))}St(e,t){return $u(e).put((function(s,o,l){const[u,d,f]=fx(o,l.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:tp(s.yt,l.mutation)}})(this.serializer,this.userId,t))}}function $u(n){return tn(n,Dp)}class tj{bt(e){return tn(e,V_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Ot.fromUint8Array(i):Ot.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class go{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(bt(e.integerValue));else if("doubleValue"in e){const i=bt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Ch(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=rs(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ss(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?w2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):kp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ve(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const s=fc,o=i[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(bt(o)),this.Ot(s,t),this.Ct(i[s],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),ge.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}go.Kt=new go;const Ml=255;function nj(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function yx(n){const e=64-(function(i){let s=0;for(let o=0;o<8;++o){const l=nj(255&i[o]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class ij{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),i=yx(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=yx(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Ml),this.sn(255)}_n(){this.an(Ml),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ml?(this.sn(Ml),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ml?(this.an(Ml),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class rj{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class sj{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ku{constructor(){this.cn=new ij,this.ln=new rj(this.cn),this.hn=new sj(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class yo{constructor(e,t,i,s){this.Tn=e,this.In=t,this.En=i,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new yo(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Sm(this.En),directionalValue:Sm(this.dn),orderedDocumentKey:Sm(t),documentKey:i.path.toArray()}}Vn(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Ks(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=vx(n.En,e.En),t!==0?t:(t=vx(n.dn,e.dn),t!==0?t:ge.comparator(n.In,e.In)))}function vx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Sm(n){return iR()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function _x(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class bx{constructor(e){this.mn=new ot(((t,i)=>Et.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(we(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=fv(e);if(t!==void 0&&!this.wn(t))return!1;const i=uo(e);let s=new Set,o=0,l=0;for(;o<i.length&&this.wn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=i[o];if(!this.Sn(u,d)||!this.bn(this.fn[l++],d))return!1}++o}for(;o<i.length;++o){const u=i[o];if(l>=this.fn.length||!this.bn(this.fn[l++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new ot(Et.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new gm(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new gm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new gm(i.field,i.dir==="asc"?0:1)));return new $m($m.UNKNOWN_ID,this.collectionId,t,Rh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function dC(n){if(we(n instanceof $e||n instanceof at,20012),n instanceof $e){if(n instanceof k2){const t=n.value.arrayValue?.values?.map((i=>$e.create(n.field,"==",i)))||[];return at.create(t,"or")}return n}const e=n.filters.map((t=>dC(t)));return at.create(e,n.op)}function aj(n){if(n.getFilters().length===0)return[];const e=Dv(dC(n));return we(fC(e),7391),Rv(e)||Cv(e)?[e]:e.getFilters()}function Rv(n){return n instanceof $e}function Cv(n){return n instanceof at&&j_(n)}function fC(n){return Rv(n)||Cv(n)||(function(t){if(t instanceof at&&bv(t)){for(const i of t.getFilters())if(!Rv(i)&&!Cv(i))return!1;return!0}return!1})(n)}function Dv(n){if(we(n instanceof $e||n instanceof at,34018),n instanceof $e)return n;if(n.filters.length===1)return Dv(n.filters[0]);const e=n.filters.map((i=>Dv(i)));let t=at.create(e,n.op);return t=ip(t),fC(t)?t:(we(t instanceof at,64498),we(gc(t),40251),we(t.filters.length>1,57927),t.filters.reduce(((i,s)=>$_(i,s))))}function $_(n,e){let t;return we(n instanceof $e||n instanceof at,38388),we(e instanceof $e||e instanceof at,25473),t=n instanceof $e?e instanceof $e?(function(s,o){return at.create([s,o],"and")})(n,e):Tx(n,e):e instanceof $e?Tx(e,n):(function(s,o){if(we(s.filters.length>0&&o.filters.length>0,48005),gc(s)&&gc(o))return C2(s,o.getFilters());const l=bv(s)?s:o,u=bv(s)?o:s,d=l.filters.map((f=>$_(f,u)));return at.create(d,"or")})(n,e),ip(t)}function Tx(n,e){if(gc(e))return C2(e,n.getFilters());{const t=e.filters.map((i=>$_(n,i)));return at.create(t,"or")}}function ip(n){if(we(n instanceof $e||n instanceof at,11850),n instanceof $e)return n;const e=n.getFilters();if(e.length===1)return ip(e[0]);if(I2(n))return n;const t=e.map((s=>ip(s))),i=[];return t.forEach((s=>{s instanceof $e?i.push(s):s instanceof at&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:at.create(i,n.op)}class oj{constructor(){this.Cn=new K_}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ti.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class K_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new ot(nt.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ot(nt.comparator)).toArray()}}const Ex="IndexedDbIndexManager",Zf=new Uint8Array(0);class lj{constructor(e,t){this.databaseId=t,this.vn=new K_,this.Fn=new us((i=>Po(i)),((i,s)=>ad(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:i,parent:wn(s)};return wx(e).put(o)}return K.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[WR(t),""],!1,!0);return wx(e).J(s).next((o=>{for(const l of o){if(l.collectionId!==t)break;i.push(fr(l.parent))}return i}))}addFieldIndex(e,t){const i=Yu(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=i.add(s);if(t.indexState){const l=Ll(e);return o.next((u=>{l.put(mx(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const i=Yu(e),s=Ll(e),o=Ol(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Yu(e),i=Ol(e),s=Ll(e);return t.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return K.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const o=new bx(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const i=Ol(e);let s=!0;const o=new Map;return K.forEach(this.Mn(t),(l=>this.xn(e,l).next((u=>{s&&(s=!!u),o.set(l,u)})))).next((()=>{if(s){let l=ze();const u=[];return K.forEach(o,((d,f)=>{ue(Ex,`Using index ${(function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(($=>`${$.fieldPath}:${$.kind}`)).join(",")}`})(d)} to execute ${Po(t)}`);const g=(function(M,$){const te=fv($);if(te===void 0)return null;for(const Z of Zm(M,te.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null})(f,d),v=(function(M,$){const te=new Map;for(const Z of uo($))for(const x of Zm(M,Z.fieldPath))switch(x.op){case"==":case"in":te.set(Z.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return te.set(Z.fieldPath.canonicalString(),x.value),Array.from(te.values())}return null})(f,d),_=(function(M,$){const te=[];let Z=!0;for(const x of uo($)){const R=x.kind===0?ex(M,x.fieldPath,M.startAt):tx(M,x.fieldPath,M.startAt);te.push(R.value),Z&&(Z=R.inclusive)}return new pc(te,Z)})(f,d),S=(function(M,$){const te=[];let Z=!0;for(const x of uo($)){const R=x.kind===0?tx(M,x.fieldPath,M.endAt):ex(M,x.fieldPath,M.endAt);te.push(R.value),Z&&(Z=R.inclusive)}return new pc(te,Z)})(f,d),N=this.On(d,f,_),A=this.On(d,f,S),C=this.Nn(d,f,v),P=this.Bn(d.indexId,g,N,_.inclusive,A,S.inclusive,C);return K.forEach(P,(U=>i.Y(U,t.limit).next((M=>{M.forEach(($=>{const te=ge.fromSegments($.documentKey);l.has(te)||(l=l.add(te),u.push(te))}))}))))})).next((()=>u))}return K.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=aj(at.create(e.filters,"and")).map((i=>Ev(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,s,o,l,u){const d=(t!=null?t.length:1)*Math.max(i.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let v=0;v<d;++v){const _=t?this.Ln(t[v/f]):Zf,S=this.kn(e,_,i[v%f],s),N=this.qn(e,_,o[v%f],l),A=u.map((C=>this.kn(e,_,C,!0)));g.push(...this.createRange(S,N,A))}return g}kn(e,t,i,s){const o=new yo(e,ge.empty(),t,i);return s?o:o.An()}qn(e,t,i,s){const o=new yo(e,ge.empty(),t,i);return s?o.An():o}xn(e,t){const i=new bx(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let l=null;for(const u of o)i.yn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l}))}getIndexType(e,t){let i=2;const s=this.Mn(t);return K.forEach(s,(o=>this.xn(e,o).next((l=>{l?i!==0&&l.fields.length<(function(d){let f=new ot(Et.comparator),g=!1;for(const v of d.filters)for(const _ of v.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?g=!0:f=f.add(_.field));for(const v of d.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(g?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&i===2?1:i))}Qn(e,t){const i=new Ku;for(const s of uo(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const l=i.Pn(s.kind);go.Kt.Dt(o,l)}return i.un()}Ln(e){const t=new Ku;return go.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Ku;return go.Kt.Dt(Mh(this.databaseId,t),i.Pn((function(o){const l=uo(o);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let s=[];s.push(new Ku);let o=0;for(const l of uo(e)){const u=i[o++];for(const d of s)if(this.Un(t,l.fieldPath)&&Oh(u))s=this.Kn(s,l,u);else{const f=d.Pn(l.kind);go.Kt.Dt(u,f)}}return this.Wn(s)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const s=[...e],o=[];for(const l of i.arrayValue.values||[])for(const u of s){const d=new Ku;d.seed(u.un()),go.Kt.Dt(l,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((i=>i instanceof $e&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Yu(e),s=Ll(e);return(t?i.J(pv,IDBKeyRange.bound(t,t)):i.J()).next((o=>{const l=[];return K.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{l.push((function(g,v){const _=v?new Rh(v.sequenceNumber,new ti(Oo(v.readTime),new ge(fr(v.documentKey)),v.largestBatchId)):Rh.empty(),S=g.fields.map((([N,A])=>new gm(Et.fromServerFormat(N),A)));return new $m(g.indexId,g.collectionGroup,S,_)})(u,d))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Ve(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=Yu(e),o=Ll(e);return this.Gn(e).next((l=>s.J(pv,IDBKeyRange.bound(t,t)).next((u=>K.forEach(u,(d=>o.put(mx(d.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return K.forEach(t,((s,o)=>{const l=i.get(s.collectionGroup);return(l?K.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(i.set(s.collectionGroup,u),K.forEach(u,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?K.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,i,s){return Ol(e).put(s.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,s){return Ol(e).delete(s.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const s=Ol(e);let o=new ot(Ks);return s.ee({index:u2,range:IDBKeyRange.only([i.indexId,this.uid,Sm(this.$n(i,t))])},((l,u)=>{o=o.add(new yo(i.indexId,t,_x(u.arrayValue),_x(u.directionalValue)))})).next((()=>o))}jn(e,t){let i=new ot(Ks);const s=this.Qn(t,e);if(s==null)return i;const o=fv(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Oh(l))for(const u of l.arrayValue.values||[])i=i.add(new yo(t.indexId,e.key,this.Ln(u),s))}else i=i.add(new yo(t.indexId,e.key,Zf,s));return i}Jn(e,t,i,s,o){ue(Ex,"Updating index entries for document '%s'",t.key);const l=[];return(function(d,f,g,v,_){const S=d.getIterator(),N=f.getIterator();let A=Pl(S),C=Pl(N);for(;A||C;){let P=!1,U=!1;if(A&&C){const M=g(A,C);M<0?U=!0:M>0&&(P=!0)}else A!=null?U=!0:P=!0;P?(v(C),C=Pl(N)):U?(_(A),A=Pl(S)):(A=Pl(S),C=Pl(N))}})(s,o,Ks,(u=>{l.push(this.Hn(e,t,i,u))}),(u=>{l.push(this.Yn(e,t,i,u))})),K.waitFor(l)}Gn(e){let t=1;return Ll(e).ee({index:c2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,u)=>Ks(l,u))).filter(((l,u,d)=>!u||Ks(l,d[u-1])!==0));const s=[];s.push(e);for(const l of i){const u=Ks(l,e),d=Ks(l,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(l),s.push(l.An());else if(d>0)break}s.push(t);const o=[];for(let l=0;l<s.length;l+=2){if(this.Zn(s[l],s[l+1]))return[];const u=s[l].Vn(this.uid,Zf,ge.empty()),d=s[l+1].Vn(this.uid,Zf,ge.empty());o.push(IDBKeyRange.bound(u,d))}return o}Zn(e,t){return Ks(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Sx)}getMinOffset(e,t){return K.mapArray(this.Mn(t),(i=>this.xn(e,i).next((s=>s||ve(44426))))).next(Sx)}}function wx(n){return tn(n,kh)}function Ol(n){return tn(n,dh)}function Yu(n){return tn(n,k_)}function Ll(n){return tn(n,hh)}function Sx(n){we(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;C_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ti(e.readTime,e.documentKey,t)}const xx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mC=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function pC(n,e,t){const i=n.store(Li),s=n.store(cc),o=[],l=IDBKeyRange.only(t.batchId);let u=0;const d=i.ee({range:l},((g,v,_)=>(u++,_.delete())));o.push(d.next((()=>{we(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const v=a2(e,g.key.path,t.batchId);o.push(s.delete(v)),f.push(g.key)}return K.waitFor(o).next((()=>f))}function rp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ve(14731);e=n.noDocument}return JSON.stringify(e).length}_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(mC,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);class Up{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,t,i,s){we(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Up(o,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ys(e).ee({index:vo,range:i},((s,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const o=Hl(e),l=Ys(e);return l.add({}).next((u=>{we(typeof u=="number",49019);const d=new B_(u,t,i,s),f=(function(S,N,A){const C=A.baseMutations.map((U=>tp(S.yt,U))),P=A.mutations.map((U=>tp(S.yt,U)));return{userId:N,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:C,mutations:P}})(this.serializer,this.userId,d),g=[];let v=new ot(((_,S)=>Ve(_.canonicalString(),S.canonicalString())));for(const _ of s){const S=a2(this.userId,_.key.path,u);v=v.add(_.key.path.popLast()),g.push(l.put(f)),g.push(o.put(S,UL))}return v.forEach((_=>{g.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),K.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return Ys(e).get(t).next((i=>i?(we(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),po(this.serializer,i)):null))}er(e,t){return this.Xn[t]?K.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Ys(e).ee({index:vo,range:s},((l,u,d)=>{u.userId===this.userId&&(we(u.batchId>=i,47524,{tr:i}),o=po(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=To;return Ys(e).ee({index:vo,range:t,reverse:!0},((s,o,l)=>{i=o.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,To],[this.userId,Number.POSITIVE_INFINITY]);return Ys(e).J(vo,t).next((i=>i.map((s=>po(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=ym(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=[];return Hl(e).ee({range:s},((l,u,d)=>{const[f,g,v]=l,_=fr(g);if(f===this.userId&&t.path.isEqual(_))return Ys(e).get(v).next((S=>{if(!S)throw ve(61480,{nr:l,batchId:v});we(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:v}),o.push(po(this.serializer,S))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(Ve);const s=[];return t.forEach((o=>{const l=ym(this.userId,o.path),u=IDBKeyRange.lowerBound(l),d=Hl(e).ee({range:u},((f,g,v)=>{const[_,S,N]=f,A=fr(S);_===this.userId&&o.path.isEqual(A)?i=i.add(N):v.done()}));s.push(d)})),K.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,o=ym(this.userId,i),l=IDBKeyRange.lowerBound(o);let u=new ot(Ve);return Hl(e).ee({range:l},((d,f,g)=>{const[v,_,S]=d,N=fr(_);v===this.userId&&i.isPrefixOf(N)?N.length===s&&(u=u.add(S)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const i=[],s=[];return t.forEach((o=>{s.push(Ys(e).get(o).next((l=>{if(l===null)throw ve(35274,{batchId:o});we(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),i.push(po(this.serializer,l))})))})),K.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return pC(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),K.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return K.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return Hl(e).ee({range:i},((o,l,u)=>{if(o[0]===this.userId){const d=fr(o[1]);s.push(d)}else u.done()})).next((()=>{we(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return gC(e,this.userId,t)}_r(e){return yC(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:To,lastStreamToken:""}))}}function gC(n,e,t){const i=ym(e,t.path),s=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return Hl(n).ee({range:o,X:!0},((u,d,f)=>{const[g,v,_]=u;g===e&&v===s&&(l=!0),f.done()})).next((()=>l))}function Ys(n){return tn(n,Li)}function Hl(n){return tn(n,cc)}function yC(n){return tn(n,Dh)}class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}class cj{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Lo(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ae.fromTimestamp(new We(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>jl(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(we(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let s=0;const o=[];return jl(e).ee(((l,u)=>{const d=rh(u);d.sequenceNumber<=t&&i.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>K.waitFor(o))).next((()=>s))}forEachTarget(e,t){return jl(e).ee(((i,s)=>{const o=rh(s);t(o)}))}lr(e){return Ax(e).get(Qm).next((t=>(we(t!==null,2888),t)))}hr(e,t){return Ax(e).put(Qm,t)}Pr(e,t){return jl(e).put(uC(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Po(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return jl(e).ee({range:s,index:l2},((l,u,d)=>{const f=rh(u);ad(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,i){const s=[],o=na(e);return t.forEach((l=>{const u=wn(l.path);s.push(o.put({targetId:i,path:u})),s.push(this.referenceDelegate.addReference(e,i,l))})),K.waitFor(s)}removeMatchingKeys(e,t,i){const s=na(e);return K.forEach(t,(o=>{const l=wn(o.path);return K.waitFor([s.delete([i,l]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,t){const i=na(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=na(e);let o=ze();return s.ee({range:i,X:!0},((l,u,d)=>{const f=fr(l[1]),g=new ge(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const i=wn(t.path),s=IDBKeyRange.bound([i],[WR(i)],!1,!0);let o=0;return na(e).ee({index:N_,X:!0,range:s},(([l,u],d,f)=>{l!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return jl(e).get(t).next((i=>i?rh(i):null))}}function jl(n){return tn(n,uc)}function Ax(n){return tn(n,Eo)}function na(n){return tn(n,hc)}const Ix="LruGarbageCollector",vC=1048576;function Rx([n,e],[t,i]){const s=Ve(n,t);return s===0?Ve(e,i):s}class uj{constructor(e){this.Ir=e,this.buffer=new ot(Rx),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Rx(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _C{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Ix,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xa(t)?ue(Ix,"Ignoring IndexedDB error during garbage collection: ",t):await Sa(t)}await this.Vr(3e5)}))}}class hj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(jn.ce);const i=new uj(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(xx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xx):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,o,l,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(i=v,u=Date.now(),this.removeTargets(e,i,t)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),zl()<=Ge.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function bC(n,e){return new hj(n,e)}class dj{constructor(e,t){this.db=e,this.garbageCollector=bC(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,s)=>t(s)))}addReference(e,t,i){return Jf(e,i)}removeReference(e,t,i){return Jf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Jf(e,t)}br(e,t){return(function(s,o){let l=!1;return yC(s).te((u=>gC(s,u,o).next((d=>(d&&(l=!0),K.resolve(!d)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((l,u)=>{if(u<=t){const d=this.br(e,l).next((f=>{if(!f)return o++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Ae.min()),na(e).delete((function(v){return[0,wn(v.path)]})(l)))))}));s.push(d)}})).next((()=>K.waitFor(s))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Jf(e,t)}Sr(e,t){const i=na(e);let s,o=jn.ce;return i.ee({index:N_},(([l,u],{path:d,sequenceNumber:f})=>{l===0?(o!==jn.ce&&t(new ge(fr(s)),o),o=f,s=d):o=jn.ce})).next((()=>{o!==jn.ce&&t(new ge(fr(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jf(n,e){return na(n).put((function(i,s){return{targetId:0,path:wn(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class TC{constructor(){this.changes=new us((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ao(e).put(i)}removeEntry(e,t,i){return ao(e).delete((function(o,l){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],np(l),u[u.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Rt.newInvalidDocument(t);return ao(e).ee({index:vm,range:IDBKeyRange.only(Qu(t))},((s,o)=>{i=this.Cr(t,o)})).next((()=>i))}vr(e,t){let i={size:0,document:Rt.newInvalidDocument(t)};return ao(e).ee({index:vm,range:IDBKeyRange.only(Qu(t))},((s,o)=>{i={document:this.Cr(t,o),size:rp(o)}})).next((()=>i))}getEntries(e,t){let i=Jn();return this.Fr(e,t,((s,o)=>{const l=this.Cr(s,o);i=i.insert(s,l)})).next((()=>i))}Mr(e,t){let i=Jn(),s=new mt(ge.comparator);return this.Fr(e,t,((o,l)=>{const u=this.Cr(o,l);i=i.insert(o,u),s=s.insert(o,rp(l))})).next((()=>({documents:i,Or:s})))}Fr(e,t,i){if(t.isEmpty())return K.resolve();let s=new ot(Nx);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Qu(s.first()),Qu(s.last())),l=s.getIterator();let u=l.getNext();return ao(e).ee({index:vm,range:o},((d,f,g)=>{const v=ge.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&Nx(u,v)<0;)i(u,null),u=l.getNext();u&&u.isEqual(v)&&(i(u,f),u=l.hasNext()?l.getNext():null),u?g.j(Qu(u)):g.done()})).next((()=>{for(;u;)i(u,null),u=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,o){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),np(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ao(e).J(IDBKeyRange.bound(u,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=Jn();for(const v of f){const _=this.Cr(ge.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);_.isFoundDocument()&&(od(t,_)||s.has(_.key))&&(g=g.insert(_.key,_))}return g}))}getAllFromCollectionGroup(e,t,i,s){let o=Jn();const l=Dx(t,i),u=Dx(t,ti.max());return ao(e).ee({index:o2,range:IDBKeyRange.bound(l,u,!0)},((d,f,g)=>{const v=this.Cr(ge.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new mj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Cx(e).get(mv).next((t=>(we(!!t,20021),t)))}Dr(e,t){return Cx(e).put(mv,t)}Cr(e,t){if(t){const i=J9(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ae.min())))return i}return Rt.newInvalidDocument(e)}}function EC(n){return new fj(n)}class mj extends TC{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new us((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new ot(((o,l)=>Ve(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),l.isValidDocument()){const d=dx(this.Nr.serializer,l);s=s.add(o.path.popLast());const f=rp(d);i+=f-u.size,t.push(this.Nr.addEntry(e,o,d))}else if(i-=u.size,this.trackRemovals){const d=dx(this.Nr.serializer,l.convertToNoDocument(Ae.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,i)),K.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:s})=>(s.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:i.get(o).readTime})})),i)))}}function Cx(n){return tn(n,Nh)}function ao(n){return tn(n,Ym)}function Qu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Dx(n,e){const t=e.documentKey.path.toArray();return[n,np(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Nx(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(s=Ve(t[o],i[o]),s)return s;return s=Ve(t.length,i.length),s||(s=Ve(t[t.length-2],i[i.length-2]),s||Ve(t[t.length-1],i[i.length-1]))}class pj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wC{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&gh(i.mutation,s,Un.empty(),We.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const s=mr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((o=>{let l=nh();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=mr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const s=[];return i.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,i,s){let o=Jn();const l=ph(),u=(function(){return ph()})();return t.forEach(((d,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof hs)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),gh(g.mutation,f,g.mutation.getFieldMask(),We.now())):l.set(f.key,Un.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>l.set(f,g))),t.forEach(((f,g)=>u.set(f,new pj(g,l.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const i=ph();let s=new mt(((l,u)=>l-u)),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=i.get(d)||Un.empty();g=u.applyToLocalView(f,g),i.set(d,g);const v=(s.get(u.batchId)||ze()).add(d);s=s.insert(u.batchId,v)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,v=z2();g.forEach((_=>{if(!o.has(_)){const S=$2(t.get(_),i.get(_));S!==null&&v.set(_,S),o=o.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return K.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(l){return ge.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):P2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):K.resolve(mr());let u=lc,d=o;return l.next((f=>K.forEach(f,((g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(g)?K.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{d=d.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,ze()))).next((g=>({batchId:u,changes:U2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((i=>{let s=nh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const o=t.collectionGroup;let l=nh();return this.indexManager.getCollectionParents(e,o).next((u=>K.forEach(u,(d=>{const f=(function(v,_){return new Nc(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((g=>{g.forEach(((v,_)=>{l=l.insert(v,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s)))).next((l=>{o.forEach(((d,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,Rt.newInvalidDocument(g)))}));let u=nh();return l.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&gh(g.mutation,f,Un.empty(),We.now()),od(t,f)&&(u=u.insert(d,f))})),u}))}}class gj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Cn(s.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:hC(s.bundledQuery),readTime:Cn(s.readTime)}})(t)),K.resolve()}}class yj{constructor(){this.overlays=new mt(ge.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=mr();return K.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,o)=>{this.St(e,t,o)})),K.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const s=mr(),o=t.length+1,l=new ge(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return K.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new mt(((f,g)=>f-g));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=mr(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=mr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return K.resolve(u)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new q_(t,i));let o=this.qr.get(t);o===void 0&&(o=ze(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}class vj{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}class Y_{constructor(){this.Qr=new ot(an.$r),this.Ur=new ot(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new an(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new an(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ge(new nt([])),i=new an(t,e),s=new an(t,e+1),o=[];return this.Ur.forEachInRange([i,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ge(new nt([])),i=new an(t,e),s=new an(t,e+1);let o=ze();return this.Ur.forEachInRange([i,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new an(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class an{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ge.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||ge.comparator(e.key,t.key)}}class _j{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ot(an.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new B_(o,t,i,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new an(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(l)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),o=s<0?0:s;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?To:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new an(t,0),s=new an(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(l=>{const u=this.Xr(l.Yr);o.push(u)})),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(Ve);return t.forEach((s=>{const o=new an(s,0),l=new an(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{i=i.add(u.Yr)}))})),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let o=i;ge.isDocumentKey(o)||(o=o.child(""));const l=new an(new ge(o),0);let u=new ot(Ve);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),l),K.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){we(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(t.mutations,(s=>{const o=new an(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new an(t,0),s=this.Zr.firstAfterOrEqual(i);return K.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bj{constructor(e){this.ri=e,this.docs=(function(){return new mt(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Rt.newInvalidDocument(t))}getEntries(e,t){let i=Jn();return t.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Rt.newInvalidDocument(s))})),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=Jn();const l=t.path,u=new ge(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||C_(t2(g),i)<=0||(s.has(g.key)||od(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,t,i,s){ve(9500)}ii(e,t){return K.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Tj(this)}getSize(e){return K.resolve(this.size)}}class Tj extends TC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Ej{constructor(e){this.persistence=e,this.si=new us((t=>Po(t)),ad),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Y_,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let s=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&i.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),K.waitFor(o).next((()=>s))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),K.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}class Q_{constructor(e,t){this.ui={},this.overlays={},this.ci=new jn(0),this.li=!1,this.li=!0,this.hi=new vj,this.referenceDelegate=e(this),this.Pi=new Ej(this),this.indexManager=new oj,this.remoteDocumentCache=(function(s){return new bj(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new cC(t),this.Ii=new gj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new _j(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const s=new wj(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return K.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class wj extends i2{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.Ri=new Y_,this.Vi=null}static mi(e){return new zp(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(i=>{const s=ge.fromPath(i);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class sp{constructor(e,t){this.persistence=e,this.pi=new us((i=>wn(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=bC(this,t)}static mi(e,t){return new sp(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?K.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((u=>{u||(i++,o.removeEntry(l,Ae.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bm(e.data.value)),t}br(e,t,i){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return K.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Sj{constructor(e){this.serializer=e}k(e,t,i,s){const o=new Ap("createOrUpgrade",t);i<1&&s>=1&&((function(d){d.createObjectStore(sd)})(e),(function(d){d.createObjectStore(Dh,{keyPath:jL}),d.createObjectStore(Li,{keyPath:FS,autoIncrement:!0}).createIndex(vo,qS,{unique:!0}),d.createObjectStore(cc)})(e),kx(e),(function(d){d.createObjectStore(ho)})(e));let l=K.resolve();return i<3&&s>=3&&(i!==0&&((function(d){d.deleteObjectStore(hc),d.deleteObjectStore(uc),d.deleteObjectStore(Eo)})(e),kx(e)),l=l.next((()=>(function(d){const f=d.store(Eo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ae.min().toTimestamp(),targetCount:0};return f.put(Qm,g)})(o)))),i<4&&s>=4&&(i!==0&&(l=l.next((()=>(function(d,f){return f.store(Li).J().next((v=>{d.deleteObjectStore(Li),d.createObjectStore(Li,{keyPath:FS,autoIncrement:!0}).createIndex(vo,qS,{unique:!0});const _=f.store(Li),S=v.map((N=>_.put(N)));return K.waitFor(S)}))})(e,o)))),l=l.next((()=>{(function(d){d.createObjectStore(dc,{keyPath:KL})})(e)}))),i<5&&s>=5&&(l=l.next((()=>this.yi(o)))),i<6&&s>=6&&(l=l.next((()=>((function(d){d.createObjectStore(Nh)})(e),this.wi(o))))),i<7&&s>=7&&(l=l.next((()=>this.Si(o)))),i<8&&s>=8&&(l=l.next((()=>this.bi(e,o)))),i<9&&s>=9&&(l=l.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(l=l.next((()=>this.Di(o)))),i<11&&s>=11&&(l=l.next((()=>{(function(d){d.createObjectStore(Rp,{keyPath:YL})})(e),(function(d){d.createObjectStore(Cp,{keyPath:QL})})(e)}))),i<12&&s>=12&&(l=l.next((()=>{(function(d){const f=d.createObjectStore(Dp,{keyPath:n9});f.createIndex(gv,i9,{unique:!1}),f.createIndex(h2,r9,{unique:!1})})(e)}))),i<13&&s>=13&&(l=l.next((()=>(function(d){const f=d.createObjectStore(Ym,{keyPath:zL});f.createIndex(vm,BL),f.createIndex(o2,FL)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(ho)))),i<14&&s>=14&&(l=l.next((()=>this.Fi(e,o)))),i<15&&s>=15&&(l=l.next((()=>(function(d){d.createObjectStore(k_,{keyPath:XL,autoIncrement:!0}).createIndex(pv,WL,{unique:!1}),d.createObjectStore(hh,{keyPath:ZL}).createIndex(c2,JL,{unique:!1}),d.createObjectStore(dh,{keyPath:e9}).createIndex(u2,t9,{unique:!1})})(e)))),i<16&&s>=16&&(l=l.next((()=>{t.objectStore(hh).clear()})).next((()=>{t.objectStore(dh).clear()}))),i<17&&s>=17&&(l=l.next((()=>{(function(d){d.createObjectStore(V_,{keyPath:s9})})(e)}))),i<18&&s>=18&&iR()&&(l=l.next((()=>{t.objectStore(hh).clear()})).next((()=>{t.objectStore(dh).clear()}))),l}wi(e){let t=0;return e.store(ho).ee(((i,s)=>{t+=rp(s)})).next((()=>{const i={byteSize:t};return e.store(Nh).put(mv,i)}))}yi(e){const t=e.store(Dh),i=e.store(Li);return t.J().next((s=>K.forEach(s,(o=>{const l=IDBKeyRange.bound([o.userId,To],[o.userId,o.lastAcknowledgedBatchId]);return i.J(vo,l).next((u=>K.forEach(u,(d=>{we(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=po(this.serializer,d);return pC(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(hc),i=e.store(ho);return e.store(Eo).get(Qm).next((s=>{const o=[];return i.ee(((l,u)=>{const d=new nt(l),f=(function(v){return[0,wn(v)]})(d);o.push(t.get(f).next((g=>g?K.resolve():(v=>t.put({targetId:0,path:wn(v),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>K.waitFor(o)))}))}bi(e,t){e.createObjectStore(kh,{keyPath:$L});const i=t.store(kh),s=new K_,o=l=>{if(s.add(l)){const u=l.lastSegment(),d=l.popLast();return i.put({collectionId:u,parent:wn(d)})}};return t.store(ho).ee({X:!0},((l,u)=>{const d=new nt(l);return o(d.popLast())})).next((()=>t.store(cc).ee({X:!0},(([l,u,d],f)=>{const g=fr(u);return o(g.popLast())}))))}Di(e){const t=e.store(uc);return t.ee(((i,s)=>{const o=rh(s),l=uC(this.serializer,o);return t.put(l)}))}Ci(e,t){const i=t.store(ho),s=[];return i.ee(((o,l)=>{const u=t.store(Ym),d=(function(v){return v.document?new ge(nt.fromString(v.document.name).popFirst(5)):v.noDocument?ge.fromSegments(v.noDocument.path):v.unknownDocument?ge.fromSegments(v.unknownDocument.path):ve(36783)})(l).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(u.put(f))})).next((()=>K.waitFor(s)))}Fi(e,t){const i=t.store(Li),s=EC(this.serializer),o=new Q_(zp.mi,this.serializer.yt);return i.J().next((l=>{const u=new Map;return l.forEach((d=>{let f=u.get(d.userId)??ze();po(this.serializer,d).keys().forEach((g=>f=f.add(g))),u.set(d.userId,f)})),K.forEach(u,((d,f)=>{const g=new vn(f),v=jp.wt(this.serializer,g),_=o.getIndexManager(g),S=Up.wt(g,this.serializer,_,o.referenceDelegate);return new wC(s,S,v,_).recalculateAndSaveOverlaysForDocumentKeys(new yv(t,jn.ce),d).next()}))}))}}function kx(n){n.createObjectStore(hc,{keyPath:HL}).createIndex(N_,GL,{unique:!0}),n.createObjectStore(uc,{keyPath:"targetId"}).createIndex(l2,qL,{unique:!0}),n.createObjectStore(Eo)}const Qs="IndexedDbPersistence",E0=18e5,w0=5e3,S0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xj="main";class X_{constructor(e,t,i,s,o,l,u,d,f,g,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=o,this.window=l,this.document=u,this.xi=f,this.Oi=g,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!X_.v())throw new fe(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dj(this,s),this.$i=t+xj,this.serializer=new cC(d),this.Ui=new ua(this.$i,this.Ni,new Sj(this.serializer)),this.hi=new tj,this.Pi=new cj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=EC(this.serializer),this.Ii=new ej,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Pt(Qs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(re.FAILED_PRECONDITION,S0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new jn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>em(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(xa(e))return ue(Qs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue(Qs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Xu(e).get(Vl).next((t=>K.resolve(this.es(t))))}ts(e){return em(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,E0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=tn(t,dc);return i.J().next((s=>{const o=this.ss(s,E0),l=s.filter((u=>o.indexOf(u)===-1));return K.forEach(l,(u=>i.delete(u.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?K.resolve(!0):Xu(e).get(Vl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,w0)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new fe(re.FAILED_PRECONDITION,S0);return!1}}return!(!this.networkEnabled||!this.inForeground)||em(e).J().next((i=>this.ss(i,w0).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||l&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ue(Qs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[sd,dc],(e=>{const t=new yv(e,jn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>em(e).J().next((t=>this.ss(t,E0).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Up.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lj(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return jp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue(Qs,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?l9:d===17?p2:d===16?o9:d===15?P_:d===14?m2:d===13?f2:d===12?a9:d===11?d2:void ve(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,s,o,(u=>(l=new yv(u,this.ci?this.ci.next():jn.ce),t==="readwrite-primary"?this.Hi(l).next((d=>!!d||this.Yi(l))).next((d=>{if(!d)throw Pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new fe(re.FAILED_PRECONDITION,n2);return i(l)})).next((d=>this.Xi(l).next((()=>d)))):this.Is(l).next((()=>i(l)))))).then((u=>(l.raiseOnCommittedEvent(),u)))}Is(e){return Xu(e).get(Vl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,w0)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new fe(re.FAILED_PRECONDITION,S0)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xu(e).put(Vl,t)}static v(){return ua.v()}Zi(e){const t=Xu(e);return t.get(Vl).next((i=>this.es(i)?(ue(Qs,"Releasing primary lease."),t.delete(Vl)):K.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Pt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;nR()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ue(Qs,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Pt(Qs,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Pt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xu(n){return tn(n,sd)}function em(n){return tn(n,dc)}function SC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class W_{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=ze(),s=ze();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new W_(e,t.fromCache,i,s)}}class Aj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nR()?8:r2(en())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new Aj;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(zl()<=Ge.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Bl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(zl()<=Ge.DEBUG&&ue("QueryEngine","Query:",Bl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(zl()<=Ge.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Bl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(t))):K.resolve())}ys(e,t){if(nx(t))return K.resolve(null);let i=ei(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Jm(t,null,"F"),i=ei(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=ze(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,l,d.readTime)?this.ys(e,Jm(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,i,s){return nx(t)||s.isEqual(Ae.min())?K.resolve(null):this.ps.getDocuments(e,i).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,i,s)?K.resolve(null):(zl()<=Ge.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bl(t)),this.vs(e,l,t,e2(s,lc)).next((u=>u)))}))}Ds(e,t){let i=new ot(L2(e));return t.forEach(((s,o)=>{od(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,i){return zl()<=Ge.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Bl(t)),this.ps.getDocumentsMatchingQuery(e,t,ti.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}const Z_="LocalStore",Ij=3e8;class Rj{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new mt(Ve),this.xs=new us((o=>Po(o)),ad),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function AC(n,e,t,i){return new Rj(n,e,t,i)}async function IC(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],u=[];let d=ze();for(const f of s){l.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(i,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:u})))}))}))}function Cj(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const v=f.batch,_=v.keys();let S=K.resolve();return _.forEach((N=>{S=S.next((()=>g.getEntry(d,N))).next((A=>{const C=f.docVersions.get(N);we(C!==null,48541),A.version.compareTo(C)<0&&(v.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),g.addEntry(A)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(d,v)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let d=ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function RC(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Dj(n,e){const t=be(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,v)=>{const _=s.get(v);if(!_)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,v))));let S=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(Ot.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),s=s.insert(v,S),(function(A,C,P){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=Ij?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(_,S,g)&&u.push(t.Pi.updateTargetData(o,S))}));let d=Jn(),f=ze();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(Nj(o,l,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!i.isEqual(Ae.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));u.push(g)}return K.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function Nj(n,e,t){let i=ze(),s=ze();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=Jn();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Ae.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):ue(Z_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function kj(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=To),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function ap(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((o=>o?(s=o,K.resolve(s)):t.Pi.allocateTargetId(i).next((l=>(s=new Wr(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function bc(n,e,t){const i=be(n),s=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!xa(l))throw l;ue(Z_,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function Nv(n,e,t){const i=be(n);let s=Ae.min(),o=ze();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,g){const v=be(d),_=v.xs.get(g);return _!==void 0?K.resolve(v.Ms.get(_)):v.Pi.getTargetData(f,g)})(i,l,ei(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?s:Ae.min(),t?o:ze()))).next((u=>(NC(i,O2(e),u),{documents:u,Qs:o})))))}function CC(n,e){const t=be(n),i=be(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,e).next((l=>l?l.target:null))))}function DC(n,e){const t=be(n),i=t.Os.get(e)||Ae.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,e2(i,lc),Number.MAX_SAFE_INTEGER))).then((s=>(NC(t,e,s),s)))}function NC(n,e,t){let i=n.Os.get(e)||Ae.min();t.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}const kC="firestore_clients";function Vx(n,e){return`${kC}_${n}_${e}`}const VC="firestore_mutations";function Px(n,e,t){let i=`${VC}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const PC="firestore_targets";function x0(n,e){return`${PC}_${n}_${e}`}const hr="SharedClientState";class op{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Ws(e,t,i){const s=JSON.parse(i);let o,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(o=new fe(s.error.code,s.error.message))),l?new op(e,t,s.state,o):(Pt(hr,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new fe(i.error.code,i.error.message))),o?new yh(e,i.state,s):(Pt(hr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=U_();for(let l=0;s&&l<i.activeTargetIds.length;++l)s=s2(i.activeTargetIds[l]),o=o.add(i.activeTargetIds[l]);return s?new lp(e,o):(Pt(hr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class J_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new J_(t.clientId,t.onlineState):(Pt(hr,`Failed to parse online state: ${e}`),null)}}class kv{constructor(){this.activeTargetIds=U_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A0{constructor(e,t,i,s,o){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new mt(Ve),this.started=!1,this.Xs=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=Vx(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new kv),this.ro=new RegExp(`^${kC}_${l}_([^_]*)$`),this.io=new RegExp(`^${VC}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${PC}_${l}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(Vx(this.persistenceKey,i));if(s){const o=lp.Ws(i,s);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(x0(this.persistenceKey,e));if(s){const o=yh.Ws(e,s);o&&(i=o.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(x0(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue(hr,"READ",e,t),t}setItem(e,t){ue(hr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue(hr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ue(hr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(o){let l=jn.ce;if(o!=null)try{const u=JSON.parse(o);we(typeof u=="number",30636,{So:o}),l=u}catch(u){Pt(hr,"Failed to read sequence number from WebStorage",u)}return l})(t.newValue);i!==jn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const s=new op(this.currentUser,e,t,i),o=Px(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Gs())}Po(e){const t=Px(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const s=x0(this.persistenceKey,e),o=new yh(e,t,i);this.setItem(s,o.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return lp.Ws(i,t)}fo(e,t){const i=this.io.exec(e),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return op.Ws(new vn(o),s,t)}yo(e,t){const i=this.so.exec(e),s=Number(i[1]);return yh.Ws(s,t)}uo(e){return J_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ue(hr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),o=this.lo(i),l=[],u=[];return o.forEach((d=>{s.has(d)||l.push(d)})),s.forEach((d=>{o.has(d)||u.push(d)})),this.syncEngine.Fo(l,u).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=U_();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class MC{constructor(){this.Mo=new kv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vj{Oo(e){}shutdown(){}}const Mx="ConnectivityMonitor";class Ox{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(Mx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(Mx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let tm=null;function Vv(){return tm===null?tm=(function(){return 268435456+Math.round(2147483648*Math.random())})():tm++,"0x"+tm.toString(16)}const I0="RestConnection",Pj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Mj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Xm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,o){const l=Vv(),u=this.zo(e,t.toUriEncodedString());ue(I0,`Sending RPC '${e}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),g=Ic(f);return this.Jo(e,u,d,i,g).then((v=>(ue(I0,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw Ih(I0,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",i),v}))}Ho(e,t,i,s,o,l){return this.Go(e,t,i,s,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const i=Pj[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class Oj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const yn="WebChannelConnection";class Lj extends Mj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,o){const l=Vv();return new Promise(((u,d)=>{const f=new GR;f.setWithCredentials(!0),f.listenOnce($R.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case pm.NO_ERROR:const v=f.getResponseJson();ue(yn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case pm.TIMEOUT:ue(yn,`RPC '${e}' ${l} timed out`),d(new fe(re.DEADLINE_EXCEEDED,"Request time out"));break;case pm.HTTP_ERROR:const _=f.getStatus();if(ue(yn,`RPC '${e}' ${l} failed with status:`,_,"response text:",f.getResponseText()),_>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S?.error;if(N&&N.status&&N.message){const A=(function(P){const U=P.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(U)>=0?U:re.UNKNOWN})(N.status);d(new fe(A,N.message))}else d(new fe(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new fe(re.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ue(yn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);ue(yn,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",g,i,15)}))}T_(e,t,i){const s=Vv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=QR(),u=YR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=o.join("");ue(yn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=l.createWebChannel(g,d);this.I_(v);let _=!1,S=!1;const N=new Oj({Yo:C=>{S?ue(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(_||(ue(yn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),ue(yn,`RPC '${e}' stream ${s} sending:`,C),v.send(C))},Zo:()=>v.close()}),A=(C,P,U)=>{C.listen(P,(M=>{try{U(M)}catch($){setTimeout((()=>{throw $}),0)}}))};return A(v,th.EventType.OPEN,(()=>{S||(ue(yn,`RPC '${e}' stream ${s} transport opened.`),N.o_())})),A(v,th.EventType.CLOSE,(()=>{S||(S=!0,ue(yn,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(v))})),A(v,th.EventType.ERROR,(C=>{S||(S=!0,Ih(yn,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),N.a_(new fe(re.UNAVAILABLE,"The operation could not be completed")))})),A(v,th.EventType.MESSAGE,(C=>{if(!S){const P=C.data[0];we(!!P,16349);const U=P,M=U?.error||U[0]?.error;if(M){ue(yn,`RPC '${e}' stream ${s} received error:`,M);const $=M.status;let te=(function(R){const V=$t[R];if(V!==void 0)return Q2(V)})($),Z=M.message;te===void 0&&(te=re.INTERNAL,Z="Unknown error status: "+$+" with message "+M.message),S=!0,N.a_(new fe(te,Z)),v.close()}else ue(yn,`RPC '${e}' stream ${s} received:`,P),N.u_(P)}})),A(u,KR.STAT_EVENT,(C=>{C.stat===hv.PROXY?ue(yn,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===hv.NOPROXY&&ue(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function OC(){return typeof window<"u"?window:null}function xm(){return typeof document<"u"?document:null}function Bp(n){return new q9(n,!0)}class LC{constructor(e,t,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Lx="PersistentStream";class jC{constructor(e,t,i,s,o,l,u,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new LC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Pt(t.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new fe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(Lx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(Lx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jj extends jC{constructor(e,t,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=$9(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Ae.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ae.min():l.readTime?Cn(l.readTime):Ae.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Av(this.serializer),t.addTarget=(function(o,l){let u;const d=l.target;if(u=Wm(d)?{documents:iC(o,d)}:{query:rC(o,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=Z2(o,l.resumeToken);const f=Sv(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(Ae.min())>0){u.readTime=_c(o,l.snapshotVersion.toTimestamp());const f=Sv(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const i=Y9(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Av(this.serializer),t.removeTarget=e,this.q_(t)}}class Uj extends jC{constructor(e,t,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=K9(e.writeResults,e.commitTime),i=Cn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Av(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>tp(this.serializer,i)))};this.q_(t)}}class zj{}class Bj extends zj{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,xv(t,i),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(re.UNKNOWN,o.toString())}))}Ho(e,t,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,xv(t,i),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(re.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Fj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pt(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const jo="RemoteStore";class qj{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{Fo(this)&&(ue(jo,"Restarting streams for network reachability change."),await(async function(d){const f=be(d);f.Ea.add(4),await ud(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Fp(f)})(this))}))})),this.Ra=new Fj(i,s)}}async function Fp(n){if(Fo(n))for(const e of n.da)await e(!0)}async function ud(n){for(const e of n.da)await e(!1)}function qp(n,e){const t=be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),nb(t)?tb(t):Pc(t).O_()&&eb(t,e))}function Tc(n,e){const t=be(n),i=Pc(t);t.Ia.delete(e),i.O_()&&UC(t,e),t.Ia.size===0&&(i.O_()?i.L_():Fo(t)&&t.Ra.set("Unknown"))}function eb(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pc(n).Y_(e)}function UC(n,e){n.Va.Ue(e),Pc(n).Z_(e)}function tb(n){n.Va=new U9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pc(n).start(),n.Ra.ua()}function nb(n){return Fo(n)&&!Pc(n).x_()&&n.Ia.size>0}function Fo(n){return be(n).Ea.size===0}function zC(n){n.Va=void 0}async function Hj(n){n.Ra.set("Online")}async function Gj(n){n.Ia.forEach(((e,t)=>{eb(n,e)}))}async function $j(n,e){zC(n),nb(n)?(n.Ra.ha(e),tb(n)):n.Ra.set("Unknown")}async function Kj(n,e,t){if(n.Ra.set("Online"),e instanceof W2&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(n,e)}catch(i){ue(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cp(n,i)}else if(e instanceof wm?n.Va.Ze(e):e instanceof X2?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ae.min()))try{const i=await RC(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(Ot.EMPTY_BYTE_STRING,g.snapshotVersion)),UC(o,d);const v=new Wr(g.target,d,f,g.sequenceNumber);eb(o,v)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(i){ue(jo,"Failed to raise snapshot:",i),await cp(n,i)}}async function cp(n,e,t){if(!xa(e))throw e;n.Ea.add(1),await ud(n),n.Ra.set("Offline"),t||(t=()=>RC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(jo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Fp(n)}))}function BC(n,e){return e().catch((t=>cp(n,t,e)))}async function Vc(n){const e=be(n),t=pa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:To;for(;Yj(e);)try{const s=await kj(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,Qj(e,s)}catch(s){await cp(e,s)}FC(e)&&qC(e)}function Yj(n){return Fo(n)&&n.Ta.length<10}function Qj(n,e){n.Ta.push(e);const t=pa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function FC(n){return Fo(n)&&!pa(n).x_()&&n.Ta.length>0}function qC(n){pa(n).start()}async function Xj(n){pa(n).ra()}async function Wj(n){const e=pa(n);for(const t of n.Ta)e.ea(t.mutations)}async function Zj(n,e,t){const i=n.Ta.shift(),s=F_.from(i,e,t);await BC(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Vc(n)}async function Jj(n,e){e&&pa(n).X_&&await(async function(i,s){if((function(l){return O9(l)&&l!==re.ABORTED})(s.code)){const o=i.Ta.shift();pa(i).B_(),await BC(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Vc(i)}})(n,e),FC(n)&&qC(n)}async function jx(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),ue(jo,"RemoteStore received new credentials");const i=Fo(t);t.Ea.add(3),await ud(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Fp(t)}async function Pv(n,e){const t=be(n);e?(t.Ea.delete(2),await Fp(t)):e||(t.Ea.add(2),await ud(t),t.Ra.set("Unknown"))}function Pc(n){return n.ma||(n.ma=(function(t,i,s){const o=be(t);return o.sa(),new jj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:Hj.bind(null,n),t_:Gj.bind(null,n),r_:$j.bind(null,n),H_:Kj.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),nb(n)?tb(n):n.Ra.set("Unknown")):(await n.ma.stop(),zC(n))}))),n.ma}function pa(n){return n.fa||(n.fa=(function(t,i,s){const o=be(t);return o.sa(),new Uj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Xj.bind(null,n),r_:Jj.bind(null,n),ta:Wj.bind(null,n),na:Zj.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Vc(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(jo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class ib{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){const l=Date.now()+i,u=new ib(e,t,l,s,o);return u.start(i),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rb(n,e){if(Pt("AsyncQueue",`${e}: ${n}`),xa(n))return new fe(re.UNAVAILABLE,`${e}: ${n}`);throw n}class nc{static emptySet(e){return new nc(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ge.comparator(t.key,i.key):(t,i)=>ge.comparator(t.key,i.key),this.keyedMap=nh(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new nc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Ux{constructor(){this.ga=new mt(ge.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ec{constructor(e,t,i,s,o,l,u,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,s,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Ec(e,t,nc.emptySet(t),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class eU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class tU{constructor(){this.queries=zx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=be(t),o=s.queries;s.queries=zx(),o.forEach(((l,u)=>{for(const d of u.Sa)d.onError(i)}))})(this,new fe(re.ABORTED,"Firestore shutting down"))}}function zx(){return new us((n=>M2(n)),Pp)}async function HC(n,e){const t=be(n);let i=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new eU,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=rb(l,`Initialization of query '${Bl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&sb(t)}async function GC(n,e){const t=be(n),i=e.query;let s=3;const o=t.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function nU(n,e){const t=be(n);let i=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(s)&&(i=!0);l.wa=s}}i&&sb(t)}function iU(n,e,t){const i=be(n),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);i.queries.delete(e)}function sb(n){n.Ca.forEach((e=>{e.next()}))}var Mv,Bx;(Bx=Mv||(Mv={})).Ma="default",Bx.Cache="cache";class $C{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ec(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mv.Cache}}class KC{constructor(e){this.key=e}}class YC{constructor(e){this.key=e}}class rU{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=L2(e),this.tu=new nc(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Ux,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const _=s.get(g),S=od(this.query,v)?v:null,N=!!_&&this.mutatedKeys.has(_.key),A=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let C=!1;_&&S?_.data.isEqual(S.data)?N!==A&&(i.track({type:3,doc:S}),C=!0):this.su(_,S)||(i.track({type:2,doc:S}),C=!0,(d&&this.eu(S,d)>0||f&&this.eu(S,f)<0)&&(u=!0)):!_&&S?(i.track({type:0,doc:S}),C=!0):_&&!S&&(i.track({type:1,doc:_}),C=!0,(d||f)&&(u=!0)),C&&(S?(l=l.add(S),o=A?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:l,iu:i,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(S,N){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:C})}};return A(S)-A(N)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(i),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new Ec(this.query,e.tu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ux,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new YC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new KC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ec.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Mc="SyncEngine";class sU{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class aU{constructor(e){this.key=e,this.hu=!1}}class oU{constructor(e,t,i,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new us((u=>M2(u)),Pp),this.Iu=new Map,this.Eu=new Set,this.du=new mt(ge.comparator),this.Au=new Map,this.Ru=new Y_,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lU(n,e,t=!0){const i=Hp(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await QC(i,e,t,!0),s}async function cU(n,e){const t=Hp(n);await QC(t,e,!0,!1)}async function QC(n,e,t,i){const s=await ap(n.localStore,ei(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return i&&(u=await ab(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&qp(n.remoteStore,s),u}async function ab(n,e,t,i,s){n.pu=(v,_,S)=>(async function(A,C,P,U){let M=C.view.ru(P);M.Cs&&(M=await Nv(A.localStore,C.query,!1).then((({documents:x})=>C.view.ru(x,M))));const $=U&&U.targetChanges.get(C.targetId),te=U&&U.targetMismatches.get(C.targetId)!=null,Z=C.view.applyChanges(M,A.isPrimaryClient,$,te);return Ov(A,C.targetId,Z.au),Z.snapshot})(n,v,_,S);const o=await Nv(n.localStore,e,!0),l=new rU(e,o.Qs),u=l.ru(o.documents),d=cd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),f=l.applyChanges(u,n.isPrimaryClient,d);Ov(n,t,f.au);const g=new sU(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function uU(n,e,t){const i=be(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((l=>!Pp(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await bc(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Tc(i.remoteStore,s.targetId),wc(i,s.targetId)})).catch(Sa)):(wc(i,s.targetId),await bc(i.localStore,s.targetId,!0))}async function hU(n,e){const t=be(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Tc(t.remoteStore,i.targetId))}async function dU(n,e,t){const i=ub(n);try{const s=await(function(l,u){const d=be(l),f=We.now(),g=u.reduce(((S,N)=>S.add(N.key)),ze());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let N=Jn(),A=ze();return d.Ns.getEntries(S,g).next((C=>{N=C,N.forEach(((P,U)=>{U.isValidDocument()||(A=A.add(P))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,N))).next((C=>{v=C;const P=[];for(const U of u){const M=P9(U,v.get(U.key).overlayedDocument);M!=null&&P.push(new hs(U.key,M,x2(M.value.mapValue),Tn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,P,u)})).next((C=>{_=C;const P=C.applyToLocalDocumentSet(v,A);return d.documentOverlayCache.saveOverlays(S,C.batchId,P)}))})).then((()=>({batchId:_.batchId,changes:U2(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new mt(Ve)),f=f.insert(u,d),l.Vu[l.currentUser.toKey()]=f})(i,s.batchId,t),await Ia(i,s.changes),await Vc(i.remoteStore)}catch(s){const o=rb(s,"Failed to persist write");t.reject(o)}}async function XC(n,e){const t=be(n);try{const i=await Dj(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?we(l.hu,14607):s.removedDocuments.size>0&&(we(l.hu,42227),l.hu=!1))})),await Ia(t,i,e)}catch(i){await Sa(i)}}function Fx(n,e,t){const i=be(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=be(l);d.onlineState=u;let f=!1;d.queries.forEach(((g,v)=>{for(const _ of v.Sa)_.va(u)&&(f=!0)})),f&&sb(d)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fU(n,e,t){const i=be(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new mt(ge.comparator);l=l.insert(o,Rt.newNoDocument(o,Ae.min()));const u=ze().add(o),d=new ld(Ae.min(),new Map,new mt(Ve),l,u);await XC(i,d),i.du=i.du.remove(o),i.Au.delete(e),cb(i)}else await bc(i.localStore,e,!1).then((()=>wc(i,e,t))).catch(Sa)}async function mU(n,e){const t=be(n),i=e.batch.batchId;try{const s=await Cj(t.localStore,e);lb(t,i,null),ob(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ia(t,s)}catch(s){await Sa(s)}}async function pU(n,e,t){const i=be(n);try{const s=await(function(l,u){const d=be(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((v=>(we(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(i.localStore,e);lb(i,e,t),ob(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ia(i,s)}catch(s){await Sa(s)}}function ob(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function lb(n,e,t){const i=be(n);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function wc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||WC(n,i)}))}function WC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Tc(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),cb(n))}function Ov(n,e,t){for(const i of t)i instanceof KC?(n.Ru.addReference(i.key,e),gU(n,i)):i instanceof YC?(ue(Mc,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||WC(n,i.key)):ve(19791,{wu:i})}function gU(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ue(Mc,"New document in limbo: "+t),n.Eu.add(i),cb(n))}function cb(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ge(nt.fromString(e)),i=n.fu.next();n.Au.set(i,new aU(t)),n.du=n.du.insert(t,i),qp(n.remoteStore,new Wr(ei(Vp(t.path)),i,"TargetPurposeLimboResolution",jn.ce))}}async function Ia(n,e,t){const i=be(n),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,d)=>{l.push(i.pu(d,e,t).then((f=>{if((f||t)&&i.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=W_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(l),i.Pu.H_(s),await(async function(d,f){const g=be(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>K.forEach(f,(_=>K.forEach(_.Es,(S=>g.persistence.referenceDelegate.addReference(v,_.targetId,S))).next((()=>K.forEach(_.ds,(S=>g.persistence.referenceDelegate.removeReference(v,_.targetId,S)))))))))}catch(v){if(!xa(v))throw v;ue(Z_,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const S=g.Ms.get(_),N=S.snapshotVersion,A=S.withLastLimboFreeSnapshotVersion(N);g.Ms=g.Ms.insert(_,A)}}})(i.localStore,o))}async function yU(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){ue(Mc,"User change. New user:",e.toKey());const i=await IC(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new fe(re.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ia(t,i.Ls)}}function vU(n,e){const t=be(n),i=t.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let s=ze();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const u=t.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}async function _U(n,e){const t=be(n),i=await Nv(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&Ov(t,e.targetId,s.au),s}async function bU(n,e){const t=be(n);return DC(t.localStore,e).then((i=>Ia(t,i)))}async function TU(n,e,t,i){const s=be(n),o=await(function(u,d){const f=be(u),g=be(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(v=>g.er(v,d).next((_=>_?f.localDocuments.getDocuments(v,_):K.resolve(null)))))})(s.localStore,e);o!==null?(t==="pending"?await Vc(s.remoteStore):t==="acknowledged"||t==="rejected"?(lb(s,e,i||null),ob(s,e),(function(u,d){be(be(u).mutationQueue).ir(d)})(s.localStore,e)):ve(6720,"Unknown batchState",{Su:t}),await Ia(s,o)):ue(Mc,"Cannot apply mutation batch with id: "+e)}async function EU(n,e){const t=be(n);if(Hp(t),ub(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await qx(t,i.toArray());t.gu=!0,await Pv(t.remoteStore,!0);for(const o of s)qp(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):s=s.then((()=>(wc(t,l),bc(t.localStore,l,!0)))),Tc(t.remoteStore,l)})),await s,await qx(t,i),(function(l){const u=be(l);u.Au.forEach(((d,f)=>{Tc(u.remoteStore,f)})),u.Ru.Jr(),u.Au=new Map,u.du=new mt(ge.comparator)})(t),t.gu=!1,await Pv(t.remoteStore,!1)}}async function qx(n,e,t){const i=be(n),s=[],o=[];for(const l of e){let u;const d=i.Iu.get(l);if(d&&d.length!==0){u=await ap(i.localStore,ei(d[0]));for(const f of d){const g=i.Tu.get(f),v=await _U(i,g);v.snapshot&&o.push(v.snapshot)}}else{const f=await CC(i.localStore,l);u=await ap(i.localStore,f),await ab(i,ZC(f),l,!1,u.resumeToken)}s.push(u)}return i.Pu.H_(o),s}function ZC(n){return V2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function wU(n){return(function(t){return be(be(t).persistence).Ts()})(be(n).localStore)}async function SU(n,e,t,i){const s=be(n);if(s.gu)return void ue(Mc,"Ignoring unexpected query state notification.");const o=s.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await DC(s.localStore,O2(o[0])),u=ld.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ot.EMPTY_BYTE_STRING);await Ia(s,l,u);break}case"rejected":await bc(s.localStore,e,!0),wc(s,e,i);break;default:ve(64155,t)}}async function xU(n,e,t){const i=Hp(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){ue(Mc,"Adding an already active target "+s);continue}const o=await CC(i.localStore,s),l=await ap(i.localStore,o);await ab(i,ZC(o),l.targetId,!1,l.resumeToken),qp(i.remoteStore,l)}for(const s of t)i.Iu.has(s)&&await bc(i.localStore,s,!1).then((()=>{Tc(i.remoteStore,s),wc(i,s)})).catch(Sa)}}function Hp(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fU.bind(null,e),e.Pu.H_=nU.bind(null,e.eventManager),e.Pu.yu=iU.bind(null,e.eventManager),e}function ub(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pU.bind(null,e),e}class zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return AC(this.persistence,new xC,e.initialUser,this.serializer)}Cu(e){return new Q_(zp.mi,this.serializer)}Du(e){return new MC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zh.provider={build:()=>new zh};class AU extends zh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){we(this.persistence.referenceDelegate instanceof sp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new _C(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new Q_((i=>sp.mi(i,t)),this.serializer)}}class JC extends zh{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await ub(this.xu.syncEngine),await Vc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return AC(this.persistence,new xC,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new _C(i,e.asyncQueue,t)}Mu(e,t){const i=new OL(t,this.persistence);return new ML(e.asyncQueue,i)}Cu(e){const t=SC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new X_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,OC(),xm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new MC}}class IU extends JC{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof A0&&(this.sharedClientState.syncEngine={Co:TU.bind(null,t),vo:SU.bind(null,t),Fo:xU.bind(null,t),Ts:wU.bind(null,t),Do:bU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await EU(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=OC();if(!A0.v(t))throw new fe(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=SC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new A0(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Bh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yU.bind(null,this.syncEngine),await Pv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tU})()}createDatastore(e){const t=Bp(e.databaseInfo.databaseId),i=(function(o){return new Lj(o)})(e.databaseInfo);return(function(o,l,u,d){return new Bj(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,o,l,u){return new qj(i,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>Fx(this.syncEngine,t,0)),(function(){return Ox.v()?new Ox:new Vj})())}createSyncEngine(e,t){return(function(s,o,l,u,d,f,g){const v=new oU(s,o,l,u,d,f);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=be(t);ue(jo,"RemoteStore shutting down."),i.Ea.add(5),await ud(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bh.provider={build:()=>new Bh};class eD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ga="FirestoreClient";class RU{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=R_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{ue(ga,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(ue(ga,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=rb(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function R0(n,e){n.asyncQueue.verifyOperationInProgress(),ue(ga,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await IC(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Hx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await CU(n);ue(ga,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>jx(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>jx(e.remoteStore,s))),n._onlineComponents=e}async function CU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(ga,"Using user provided OfflineComponentProvider");try{await R0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ih("Error using user provided cache. Falling back to memory cache: "+t),await R0(n,new zh)}}else ue(ga,"Using default OfflineComponentProvider"),await R0(n,new AU(void 0));return n._offlineComponents}async function tD(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(ga,"Using user provided OnlineComponentProvider"),await Hx(n,n._uninitializedComponentsProvider._online)):(ue(ga,"Using default OnlineComponentProvider"),await Hx(n,new Bh))),n._onlineComponents}function DU(n){return tD(n).then((e=>e.syncEngine))}async function Lv(n){const e=await tD(n),t=e.eventManager;return t.onListen=lU.bind(null,e.syncEngine),t.onUnlisten=uU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hU.bind(null,e.syncEngine),t}function NU(n,e,t={}){const i=new es;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,f){const g=new eD({next:_=>{g.Nu(),l.enqueueAndForget((()=>GC(o,v))),_.fromCache&&d.source==="server"?f.reject(new fe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new $C(u,g,{includeMetadataChanges:!0,qa:!0});return HC(o,v)})(await Lv(n),n.asyncQueue,e,t,i))),i.promise}function nD(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Gx=new Map;const kU="firestore.googleapis.com",$x=!0;class Kx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kU,this.ssl=$x}else this.host=e.host,this.ssl=e.ssl??$x;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vC)throw new fe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nD(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hb{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new wL;switch(i.type){case"firstParty":return new AL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Gx.get(t);i&&(ue("ComponentProvider","Removing Datastore"),Gx.delete(t),i.terminate())})(this),Promise.resolve()}}class ds{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ds(this.firestore,e,this._query)}}class Mt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(rd(t,Mt._jsonSchema))return new Mt(e,i||null,new ge(nt.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Yt("string",Mt._jsonSchemaVersion),referencePath:Yt("string")};class ha extends ds{constructor(e,t,i){super(e,t,Vp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new ge(e))}withConverter(e){return new ha(this.firestore,e,this._path)}}function Gp(n,e,...t){if(n=Qt(n),ZR("collection","path",e),n instanceof hb){const i=nt.fromString(e,...t);return LS(i),new ha(n,null,i)}{if(!(n instanceof Mt||n instanceof ha))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return LS(i),new ha(n.firestore,null,i)}}function Ti(n,e,...t){if(n=Qt(n),arguments.length===1&&(e=R_.newId()),ZR("doc","path",e),n instanceof hb){const i=nt.fromString(e,...t);return OS(i),new Mt(n,null,new ge(i))}{if(!(n instanceof Mt||n instanceof ha))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return OS(i),new Mt(n.firestore,n instanceof ha?n.converter:null,new ge(i))}}const Yx="AsyncQueue";class Qx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new LC(this,"async_queue_retry"),this._c=()=>{const i=xm();i&&ue(Yx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=xm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=xm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new es;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xa(e))throw e;ue(Yx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Pt("INTERNAL UNHANDLED ERROR: ",Xx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=ib.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&ve(47125,{Pc:Xx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Xx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Wx(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class ya extends hb{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new Qx,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qx(e),this._firestoreClient=void 0,await e}}}function VU(n,e,t){t||(t=Xm);const i=v_(n,"firestore");if(i.isInitialized(t)){const s=i.getImmediate({identifier:t}),o=i.getOptions(t);if(Ro(o,e))return s;throw new fe(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new fe(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vC)throw new fe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ic(e.host)&&eR(e.host),i.initialize({options:e,instanceIdentifier:t})}function db(n){if(n._terminated)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PU(n),n._firestoreClient}function PU(n){const e=n._freezeSettings(),t=(function(s,o,l,u){return new u9(s,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,nD(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new RU(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}class _i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _i(Ot.fromBase64String(e))}catch(t){throw new fe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _i(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_i._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rd(e,_i._jsonSchema))return _i.fromBase64String(e.bytes)}}_i._jsonSchemaVersion="firestore/bytes/1.0",_i._jsonSchema={type:Yt("string",_i._jsonSchemaVersion),bytes:Yt("string")};class $p{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fb{constructor(e){this._methodName=e}}class vr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vr._jsonSchemaVersion}}static fromJSON(e){if(rd(e,vr._jsonSchema))return new vr(e.latitude,e.longitude)}}vr._jsonSchemaVersion="firestore/geoPoint/1.0",vr._jsonSchema={type:Yt("string",vr._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};class _r{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rd(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _r(e.vectorValues);throw new fe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:Yt("string",_r._jsonSchemaVersion),vectorValues:Yt("object")};const MU=/^__.*__$/;class OU{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}class iD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:n})}}class mb{constructor(e,t,i,s,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return up(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rD(this.Ac)&&MU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class LU{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Bp(e)}Cc(e,t,i,s=!1){return new mb({Ac:e,methodName:t,Dc:i,path:Et.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kp(n){const e=n._freezeSettings(),t=Bp(n._databaseId);return new LU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sD(n,e,t,i,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);pb("Data must be an object, but it was:",l,i);const u=aD(i,l);let d,f;if(o.merge)d=new Un(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const _=jv(e,v,t);if(!l.contains(_))throw new fe(re.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);lD(g,_)||g.push(_)}d=new Un(g),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new OU(new bn(u),d,f)}class Yp extends fb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yp}}function jU(n,e,t,i){const s=n.Cc(1,e,t);pb("Data must be an object, but it was:",s,i);const o=[],l=bn.empty();Aa(i,((d,f)=>{const g=gb(e,d,t);f=Qt(f);const v=s.yc(g);if(f instanceof Yp)o.push(g);else{const _=hd(f,v);_!=null&&(o.push(g),l.set(g,_))}}));const u=new Un(o);return new iD(l,u,s.fieldTransforms)}function UU(n,e,t,i,s,o){const l=n.Cc(1,e,t),u=[jv(e,i,t)],d=[s];if(o.length%2!=0)throw new fe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(jv(e,o[_])),d.push(o[_+1]);const f=[],g=bn.empty();for(let _=u.length-1;_>=0;--_)if(!lD(f,u[_])){const S=u[_];let N=d[_];N=Qt(N);const A=l.yc(S);if(N instanceof Yp)f.push(S);else{const C=hd(N,A);C!=null&&(f.push(S),g.set(S,C))}}const v=new Un(f);return new iD(g,v,l.fieldTransforms)}function zU(n,e,t,i=!1){return hd(t,n.Cc(i?4:3,e))}function hd(n,e){if(oD(n=Qt(n)))return pb("Unsupported field value:",e,n),aD(n,e);if(n instanceof fb)return(function(i,s){if(!rD(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let l=0;for(const u of i){let d=hd(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,s){if((i=Qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return I9(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=We.fromDate(i);return{timestampValue:_c(s.serializer,o)}}if(i instanceof We){const o=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_c(s.serializer,o)}}if(i instanceof vr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _i)return{bytesValue:Z2(s.serializer,i._byteString)};if(i instanceof Mt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:G_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof _r)return(function(l,u){return{mapValue:{fields:{[O_]:{stringValue:L_},[fc]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return z_(u.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${xp(i)}`)})(n,e)}function aD(n,e){const t={};return g2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Aa(n,((i,s)=>{const o=hd(s,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function oD(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof We||n instanceof vr||n instanceof _i||n instanceof Mt||n instanceof fb||n instanceof _r)}function pb(n,e,t){if(!oD(t)||!JR(t)){const i=xp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function jv(n,e,t){if((e=Qt(e))instanceof $p)return e._internalPath;if(typeof e=="string")return gb(n,e);throw up("Field path arguments must be of type string or ",n,!1,void 0,t)}const BU=new RegExp("[~\\*/\\[\\]]");function gb(n,e,t){if(e.search(BU)>=0)throw up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $p(...e.split("."))._internalPath}catch{throw up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function up(n,e,t,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new fe(re.INVALID_ARGUMENT,u+n+d)}function lD(n,e){return n.some((t=>t.isEqual(e)))}class cD{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class FU extends cD{data(){return super.data()}}function yb(n,e){return typeof e=="string"?gb(n,e):e instanceof $p?e._internalPath:e._delegate._internalPath}function uD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vb{}class _b extends vb{}function Uo(n,e,...t){let i=[];e instanceof vb&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((d=>d instanceof Tb)).length,u=o.filter((d=>d instanceof bb)).length;if(l>1||l>0&&u>0)throw new fe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class bb extends _b{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new bb(e,t,i)}_apply(e){const t=this._parse(e);return hD(e._query,t),new ds(e.firestore,e.converter,wv(e._query,t))}_parse(e){const t=Kp(e.firestore);return(function(o,l,u,d,f,g,v){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new fe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){eA(v,g);const N=[];for(const A of v)N.push(Jx(d,o,A));_={arrayValue:{values:N}}}else _=Jx(d,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||eA(v,g),_=zU(u,l,v,g==="in"||g==="not-in");return $e.create(f,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Tb extends vb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tb(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:at.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)hD(l,d),l=wv(l,d)})(e._query,t),new ds(e.firestore,e.converter,wv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Eb extends _b{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Eb(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lh(o,l)})(e._query,this._field,this._direction);return new ds(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new Nc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Fh(n,e="asc"){const t=e,i=yb("orderBy",n);return Eb._create(i,t)}class wb extends _b{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new wb(e,t,i)}_apply(e){return new ds(e.firestore,e.converter,Jm(e._query,this._limit,this._limitType))}}function Zx(n){return wb._create("limit",n,"F")}function Jx(n,e,t){if(typeof(t=Qt(t))=="string"){if(t==="")throw new fe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!P2(e)&&t.indexOf("/")!==-1)throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(nt.fromString(t));if(!ge.isDocumentKey(i))throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Mh(n,new ge(i))}if(t instanceof Mt)return Mh(n,t._key);throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xp(t)}.`)}function eA(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hD(n,e){const t=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class qU{convertValue(e,t="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Aa(e,((s,o)=>{i[s]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[fc].arrayValue?.values?.map((i=>bt(i.doubleValue)));return new _r(t)}convertGeoPoint(e){return new vr(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Np(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Vh(e));default:return null}}convertTimestamp(e){const t=rs(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=nt.fromString(e);we(lC(i),9688,{name:e});const s=new Vo(i.get(1),i.get(3)),o=new ge(i.popFirst(5));return s.isEqual(t)||Pt(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function dD(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class sh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends cD{constructor(e,t,i,s,o,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Am(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(yb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=So._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}So._jsonSchemaVersion="firestore/documentSnapshot/1.0",So._jsonSchema={type:Yt("string",So._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class Am extends So{data(e={}){return super.data(e)}}class xo{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new sh(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Am(this._firestore,this._userDataWriter,i.key,i,new sh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new Am(s._firestore,s._userDataWriter,u.doc.key,u.doc,new sh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new Am(s._firestore,s._userDataWriter,u.doc.key,u.doc,new sh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:HU(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=R_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:n})}}xo._jsonSchemaVersion="firestore/querySnapshot/1.0",xo._jsonSchema={type:Yt("string",xo._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class Sb extends qU{constructor(e){super(),this.firestore=e}convertBytes(e){return new _i(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}function Qp(n){n=zi(n,ds);const e=zi(n.firestore,ya),t=db(e),i=new Sb(e);return uD(n._query),NU(t,n._query).then((s=>new xo(e,i,n,s)))}function xb(n,e,t){n=zi(n,Mt);const i=zi(n.firestore,ya),s=dD(n.converter,e,t);return eg(i,[sD(Kp(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Tn.none())])}function Xp(n,e,t,...i){n=zi(n,Mt);const s=zi(n.firestore,ya),o=Kp(s);let l;return l=typeof(e=Qt(e))=="string"||e instanceof $p?UU(o,"updateDoc",n._key,e,t,i):jU(o,"updateDoc",n._key,e),eg(s,[l.toMutation(n._key,Tn.exists(!0))])}function Wp(n){return eg(zi(n.firestore,ya),[new Lp(n._key,Tn.none())])}function Zp(n,e){const t=zi(n.firestore,ya),i=Ti(n),s=dD(n.converter,e);return eg(t,[sD(Kp(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Tn.exists(!1))]).then((()=>i))}function Jp(n,...e){n=Qt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Wx(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Wx(e[i])){const d=e[i];e[i]=d.next?.bind(d),e[i+1]=d.error?.bind(d),e[i+2]=d.complete?.bind(d)}let o,l,u;if(n instanceof Mt)l=zi(n.firestore,ya),u=Vp(n._key.path),o={next:d=>{e[i]&&e[i](GU(l,n,d))},error:e[i+1],complete:e[i+2]};else{const d=zi(n,ds);l=zi(d.firestore,ya),u=d._query;const f=new Sb(l);o={next:g=>{e[i]&&e[i](new xo(l,f,d,g))},error:e[i+1],complete:e[i+2]},uD(n._query)}return(function(f,g,v,_){const S=new eD(_),N=new $C(g,S,v);return f.asyncQueue.enqueueAndForget((async()=>HC(await Lv(f),N))),()=>{S.Nu(),f.asyncQueue.enqueueAndForget((async()=>GC(await Lv(f),N)))}})(db(l),u,s,o)}function eg(n,e){return(function(i,s){const o=new es;return i.asyncQueue.enqueueAndForget((async()=>dU(await DU(i),s,o))),o.promise})(db(n),e)}function GU(n,e,t){const i=t.docs.get(e._key),s=new Sb(n);return new So(n,s,e._key,i,new sh(t.hasPendingWrites,t.fromCache),e.converter)}class $U{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=XU(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function KU(n){return new $U(n)}class YU{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Bh.provider,this._offlineComponentProvider={build:t=>new JC(t,e?.cacheSizeBytes,this.forceOwnership)}}}class QU{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Bh.provider,this._offlineComponentProvider={build:t=>new IU(t,e?.cacheSizeBytes)}}}function XU(n){return new YU(n?.forceOwnership)}function WU(){return new QU}(function(e,t=!0){(function(s){Dc=s})(Rc),sc(new Co("firestore",((i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),u=new ya(new SL(i.getProvider("auth-internal")),new IL(l,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new fe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(f.options.projectId,g)})(l,s),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),la(kS,VS,e),la(kS,VS,"esm2020")})();const ZU={apiKey:"AIzaSyAQ5FdR_OjZvMkTOYy9auXDctOQXGtZPgg",authDomain:"house-budget-pwa.firebaseapp.com",projectId:"house-budget-pwa",storageBucket:"house-budget-pwa.firebasestorage.app",messagingSenderId:"7591891522",appId:"1:7591891522:web:ebf15777f6c206129753db",measurementId:"G-6QDXEYXPTE"},fD=oR(ZU),Dn=VU(fD,{localCache:KU({tabManager:WU()})}),Wu=vL(fD),C0=n=>({id:n.uid,username:n.email||n.uid,displayName:n.displayName||n.email?.split("@")[0]||"User",email:n.email||void 0}),zo=m_()(MI(n=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,login:async(e,t)=>{n({isLoading:!0,loginError:null});try{const s=(await t6(Wu,e,t)).user,o=C0(s);return n({currentUser:o,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${o.email}`),!0}catch(i){console.error("Login error:",i);let s="Login failed. Please try again.";switch(i.code){case"auth/invalid-email":s="Invalid email address.";break;case"auth/user-disabled":s="This account has been disabled.";break;case"auth/user-not-found":s="No account found with this email.";break;case"auth/wrong-password":s="Incorrect password.";break;case"auth/too-many-requests":s="Too many failed attempts. Please try again later.";break}return n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:s}),!1}},register:async(e,t,i)=>{n({isLoading:!0,loginError:null});try{const o=(await e6(Wu,e,t)).user;await i6(o,{displayName:i});const l=C0(o);return n({currentUser:l,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User registered and logged in: ${l.email}`),!0}catch(s){console.error("Registration error:",s);let o="Registration failed. Please try again.";switch(s.code){case"auth/email-already-in-use":o="An account with this email already exists.";break;case"auth/invalid-email":o="Invalid email address.";break;case"auth/weak-password":o="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":o="Email/password accounts are not enabled.";break}return n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:o}),!1}},logout:async()=>{try{await o6(Wu),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{n({loginError:null})},sendPasswordReset:async e=>{n({isLoading:!0,loginError:null});try{return await J5(Wu,e),n({isLoading:!1}),!0}catch(t){console.error("Password reset error:",t);let i="Failed to send password reset email. Please try again.";switch(t.code){case"auth/user-not-found":i="No account found with this email.";break;case"auth/invalid-email":i="Invalid email address.";break;case"auth/too-many-requests":i="Too many attempts. Please try again later.";break}return n({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>zo.getState().isInitialized?()=>{}:(n({isInitialized:!1}),a6(Wu,i=>{const s=Date.now(),o=zo.getState(),l=i?C0(i):null,u=o.lastAuthTime&&s-o.lastAuthTime<o.offlineGracePeriod,f=typeof navigator<"u"&&!navigator.onLine&&o.isAuthenticated&&u&&!l,g=!!l||!!f,v=l||(f?o.currentUser:null);n({currentUser:v,isAuthenticated:g,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:l?s:o.lastAuthTime}),v?console.log(` Auth state: User is signed in (${v.email})`,f?"(offline grace period)":""):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:n=>({isAuthenticated:n.isAuthenticated,currentUser:n.currentUser,lastAuthTime:n.lastAuthTime,offlineGracePeriod:n.offlineGracePeriod})})),D0=n=>Gp(Dn,"users",n,"transactions"),pr={subscribeToTransactions:(n,e)=>{const t=Uo(D0(n),Fh("date","desc"));return Jp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllTransactions:async n=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${n}`);const e=Uo(D0(n),Fh("date","desc")),i=(await Qp(e)).docs.map(s=>({id:s.id,...s.data()}));return console.log(` Fetched ${i.length} transactions:`,i.map(s=>({id:s.id,description:s.description}))),i},addTransaction:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${t}`);try{console.log(" About to call addDoc with:",i);const s=await Zp(D0(e),i);console.log(" addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`),console.log(` Document path: ${s.path}`);const o={id:s.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(s){throw console.error(" addDoc failed:",s),console.error("Error message:",s.message),s}},updateTransaction:async(n,e,t)=>{const i=Ti(Dn,"users",n,"transactions",e);return await Xp(i,t)},deleteTransaction:async(n,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${n}`);try{const t=Ti(Dn,"users",n,"transactions",e);console.log(` Deleting document at path: ${t.path}`),await Wp(t),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(t){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,t),console.error("Error message:",t.message),t}}},N0=n=>Gp(Dn,"users",n,"envelopes"),ia={subscribeToEnvelopes:(n,e)=>{const t=Uo(N0(n),Fh("orderIndex","asc"));return Jp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllEnvelopes:async n=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",n);const e=N0(n),s=(await Qp(e)).docs.map((o,l)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??l})).sort((o,l)=>{const u=o.orderIndex??0,d=l.orderIndex??0;return u-d});return console.log(" Fetched envelopes:",s.length),s}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create envelope");console.log(` EnvelopeService.createEnvelope: Adding envelope for user ${e}:`,i),console.log(` Original envelope had temp ID: ${t}`);try{const s=await Zp(N0(e),i);console.log(" Envelope addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`);const o={id:s.id,...i,userId:e};return console.log(" Final envelope result object:",o),o}catch(s){throw console.error(" Envelope addDoc failed:",s),s}},saveEnvelope:async(n,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const t=Ti(Dn,"users",n,"envelopes",e.id);return await xb(t,e,{merge:!0})},updateBalance:async(n,e,t)=>{const i=Ti(Dn,"users",n,"envelopes",e);return await Xp(i,{currentBalance:t,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(n,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${n}`);const t=Ti(Dn,"users",n,"envelopes",e);await Wp(t),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},JU=({set:n,get:e,getCurrentUserId:t,isNetworkError:i})=>{const s=o=>({id:o.id,date:o.date?.toDate?.()?o.date.toDate().toISOString():o.date,amount:parseFloat(o.amount)||0,description:o.description||"",envelopeId:o.envelopeId||"",reconciled:o.reconciled||!1,type:o.type==="income"?"Income":o.type==="expense"?"Expense":"Transfer",transferId:o.transferId||void 0,userId:o.userId||void 0});return{createEnvelope:async o=>{const l=o.currentBalance&&o.currentBalance>0,u=l?{...o,currentBalance:0,orderIndex:o.orderIndex??0}:{...o,orderIndex:o.orderIndex??0},d=`temp-${Date.now()}-${Math.random()}`,f={...u,id:d};if(n(g=>({envelopes:[...g.envelopes,f],isLoading:!0})),l){console.log(` Creating initial deposit transaction locally first: ${f.name} (tempId: ${d})`);try{await e().addTransaction({description:"Initial Deposit",amount:o.currentBalance,envelopeId:d,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const g=e().getEnvelopeBalance(d);console.log(` Test balance for temp envelope ${d}: $${g.toNumber()}`)}catch(g){console.error(" Failed to create initial deposit transaction locally:",g)}}try{console.log(" Attempting Firebase envelope creation...");const g=t(),v={...u,id:"",userId:g},_=await ia.createEnvelope(v);console.log(" Firebase envelope creation successful:",_);const S={id:_.id,name:_.name,currentBalance:_.currentBalance,lastUpdated:_.lastUpdated,isActive:_.isActive??!0,orderIndex:_.orderIndex??0,userId:_.userId};if(n(N=>({envelopes:N.envelopes.map(A=>A.id===d?S:A),isLoading:!1,pendingSync:!1})),l){console.log(` Updating transactions from temp envelope ID ${d} to real ID ${_.id}`),console.log(" Transactions before update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),n(A=>({transactions:A.transactions.map(C=>C.envelopeId===d?{...C,envelopeId:_.id}:C)})),console.log(" Transactions after envelopeId update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description})));const N=e().transactions.filter(A=>A.envelopeId===_.id&&A.id&&A.id.startsWith("temp-"));console.log(` Found ${N.length} transactions to sync for envelope ${_.id}:`,N.map(A=>({id:A.id,envelopeId:A.envelopeId})));for(const A of N)try{console.log(" Syncing transaction:",A);const C={...A,amount:A.amount.toString(),type:A.type.toLowerCase(),date:We.fromDate(new Date(A.date))},P=await pr.addTransaction(C);console.log(" Transaction synced:",P);const U=s(P);console.log(` Replacing temp transaction ${A.id} with Firebase transaction ${P.id}`),n(M=>({transactions:M.transactions.map($=>$.id===A.id?U:$)}))}catch(C){console.error(` Failed to sync transaction ${A.id}:`,C)}console.log(" Final transactions after sync:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),n({pendingSync:!1}),console.log(` All transactions synced for envelope ${_.id}`)}}catch(g){console.error("Create Envelope Failed:",g),console.log("Error details:",{code:g?.code,message:g?.message,name:g?.name,isNetworkError:i(g)}),i(g)?(console.log(" Treating as offline scenario - keeping temp envelope and transactions"),n({isLoading:!1,pendingSync:!0,error:null})):(console.log(" Real error - removing temp envelope"),n(v=>({envelopes:v.envelopes.filter(_=>_.id!==d),transactions:v.transactions.filter(_=>_.envelopeId!==d),error:g.message,isLoading:!1})))}},addToEnvelope:async(o,l,u,d)=>{const f=d?typeof d=="string"?d:d.toISOString():new Date().toISOString();await e().addTransaction({description:u,amount:l,envelopeId:o,date:f,type:"Income",reconciled:!1})},spendFromEnvelope:async(o,l,u,d)=>{const f=d?typeof d=="string"?d:d.toISOString():new Date().toISOString();await e().addTransaction({description:u,amount:l,envelopeId:o,date:f,type:"Expense",reconciled:!1})},transferFunds:async(o,l,u,d,f)=>{console.log(`Transferring ${u} from ${o} to ${l} with note: ${d}`);const g=f?typeof f=="string"?f:f.toISOString():new Date().toISOString(),v=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(_=>_.id===l)?.name||"envelope"}`,amount:u,envelopeId:o,date:g,type:"Expense",transferId:v,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(_=>_.id===o)?.name||"envelope"}`,amount:u,envelopeId:l,date:g,type:"Income",transferId:v,reconciled:!1})},deleteEnvelope:async o=>{const l=e().transactions.filter(u=>u.envelopeId===o);n(u=>({envelopes:u.envelopes.filter(d=>d.id!==o),transactions:u.transactions.filter(d=>d.envelopeId!==o),isLoading:!0}));try{const u=t();await ia.deleteEnvelope(u,o);for(const d of l)d.id&&!d.id.startsWith("temp-")&&await pr.deleteTransaction(u,d.id);await e().removeEnvelopeFromTemplates(o),n({isLoading:!1})}catch(u){if(console.error("Delete Envelope Failed:",u),i(u))n({isLoading:!1,pendingSync:!0,error:null});else{const d=e().envelopes.find(f=>f.id===o);n(d?f=>({envelopes:[...f.envelopes,d],transactions:[...f.transactions,...l],error:u.message,isLoading:!1}):{error:u.message,isLoading:!1})}}},renameEnvelope:async(o,l)=>{n(u=>({envelopes:u.envelopes.map(d=>d.id===o?{...d,name:l}:d),isLoading:!0}));try{n({isLoading:!1})}catch(u){console.error("Rename Envelope Failed:",u),n({error:u.message,isLoading:!1})}}}},k0=n=>Gp(Dn,"users",n,"distributionTemplates"),yi={subscribeToDistributionTemplates:(n,e)=>{const t=Uo(k0(n),Fh("lastUsed","desc"));return Jp(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllDistributionTemplates:async n=>{const e=Uo(k0(n),Fh("lastUsed","desc"));return(await Qp(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const s=await Zp(k0(e),i);console.log(" Template addDoc succeeded, docRef:",s);const o={id:s.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(s){throw console.error(" Template addDoc failed:",s),s}},saveDistributionTemplate:async(n,e)=>{const t=Ti(Dn,"users",n,"distributionTemplates",e.id);return await xb(t,e,{merge:!0})},updateDistributionTemplate:async(n,e,t)=>{const i=Ti(Dn,"users",n,"distributionTemplates",e);return await Xp(i,t)},deleteDistributionTemplate:async(n,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${n}`);const t=Ti(Dn,"users",n,"distributionTemplates",e);await Wp(t),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},ez=({set:n,get:e,getCurrentUserId:t,isNetworkError:i})=>({saveTemplate:async(s,o,l)=>{console.log(" saveTemplate called with:",{name:s,distributions:o,note:l});try{const u=t(),d={id:`temp-${Date.now()}`,userId:u,name:s,note:l,lastUsed:new Date().toISOString(),distributions:o};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const f=yi.createDistributionTemplate(d),g=new Promise((_,S)=>setTimeout(()=>S(new Error("Firebase timeout - likely offline")),5e3)),v=await Promise.race([f,g]);console.log(" Firebase template save succeeded (online mode):",v),console.log(" Template saved to Firebase - real-time subscription will update local state"),console.log(" Template saved to Firebase:",v),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(f){throw console.log(" Firebase template save failed or timed out:",f.message),f}}catch(u){console.error(" Failed to save template to Firebase, saving locally:",u),console.log(" Error details:",{name:u?.name||"Unknown",message:u?.message||"Unknown",code:u?.code||"Unknown",isNetworkError:i(u)});const d=t(),f={id:`local-${Date.now()}`,userId:d,name:s,note:l,lastUsed:new Date().toISOString(),distributions:o};console.log(" Saving template locally (offline):",f),n(g=>({distributionTemplates:[...g.distributionTemplates,f],pendingSync:!0})),console.log(" Template saved locally as fallback:",f),console.log(" Store now has templates:",e().distributionTemplates.length)}},deleteTemplate:async s=>{try{const o=t();await yi.deleteDistributionTemplate(o,s),n(l=>({distributionTemplates:l.distributionTemplates.filter(u=>u.id!==s)})),console.log(" Template deleted from Firebase:",s)}catch(o){throw console.error(" Failed to delete template from Firebase:",o),o}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const s=e().distributionTemplates,o=e().envelopes,l=new Set(o.map(d=>d.id));let u=0;for(const d of s){const f={...d.distributions},g={};for(const[v,_]of Object.entries(d.distributions))l.has(v)&&(g[v]=_);if(Object.keys(g).length===0){console.log(` Deleting orphaned template: ${d.name}`);const v=t();await yi.deleteDistributionTemplate(v,d.id),u++}else if(JSON.stringify(g)!==JSON.stringify(f)){console.log(` Updating template ${d.name} - removed orphaned envelope references`);const v=t();await yi.updateDistributionTemplate(v,d.id,{distributions:g}),u++}}u>0?console.log(` Cleaned up ${u} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(s,o)=>{console.log(` Updating template references: ${s}  ${o}`);const l=e().distributionTemplates;let u=0;for(const d of l)if(d.distributions[s]!==void 0){const f={...d.distributions};f[o]=f[s],delete f[s],console.log(` Updating template: ${d.name}`);const g=t();await yi.updateDistributionTemplate(g,d.id,{distributions:f}),u++}u>0&&console.log(` Updated ${u} templates with new envelope reference`)},removeEnvelopeFromTemplates:async s=>{console.log(` Removing envelope ${s} from all templates`);const o=e().distributionTemplates;let l=0,u=0;for(const d of o)if(d.distributions[s]!==void 0){const f={...d.distributions};if(delete f[s],Object.keys(f).length===0){console.log(` Deleting template ${d.name} - no envelopes left`);const g=t();await yi.deleteDistributionTemplate(g,d.id),u++}else{console.log(` Removing envelope from template: ${d.name}`);const g=t();await yi.updateDistributionTemplate(g,d.id,{distributions:f}),l++}}(l>0||u>0)&&console.log(` Updated ${l} templates, deleted ${u} empty templates`)}}),V0=n=>Gp(Dn,"users",n,"appSettings"),Kr={subscribeToAppSettings:(n,e)=>{const t=Uo(V0(n),Zx(1));return Jp(t,s=>{if(s.empty){e(null);return}const o=s.docs.map(l=>({id:l.id,...l.data()}))[0];e(o)})},getAppSettings:async n=>{const e=Uo(V0(n),Zx(1)),t=await Qp(e);if(t.empty)return null;const i=t.docs[0];return{id:i.id,...i.data()}},createAppSettings:async n=>{const{userId:e,...t}=n;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,t);try{const i=await Zp(V0(e),t);console.log(" Settings addDoc succeeded, docRef:",i);const s={id:i.id,...t,userId:e};return console.log(" Final settings result object:",s),s}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(n,e)=>{const t=Ti(Dn,"users",n,"appSettings",e.id);return await xb(t,e,{merge:!0})},updateAppSettings:async(n,e,t)=>{const i=Ti(Dn,"users",n,"appSettings",e);return await Xp(i,t)},deleteAppSettings:async(n,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${n}`);const t=Ti(Dn,"users",n,"appSettings",e);await Wp(t),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},mD=({set:n,get:e,getCurrentUserId:t})=>({updateAppSettings:async i=>{const s=e();if(!s.appSettings){try{await mD({set:n,get:e,getCurrentUserId:t}).initializeAppSettings();const o=e();if(o.appSettings){const l={...o.appSettings,...i};n({appSettings:l});const u=t();await Kr.updateAppSettings(u,o.appSettings.id,i),console.log(" App settings updated successfully")}}catch(o){console.error(" Failed to initialize/update settings:",o)}return}try{n(l=>({appSettings:{...l.appSettings,...i}}));const o=t();await Kr.updateAppSettings(o,s.appSettings.id,i),console.log(" App settings updated successfully")}catch(o){throw console.error(" Failed to update app settings:",o),n(l=>({appSettings:l.appSettings})),o}},initializeAppSettings:async()=>{try{const s={userId:t(),theme:"system"},o=await Kr.createAppSettings(s);n({appSettings:o}),console.log(" App settings initialized successfully")}catch(i){console.error(" Failed to initialize app settings:",i);const s=t();n({appSettings:{id:"local-settings",userId:s,theme:"system"}})}}}),tz=n=>n==="income"?"Income":n==="expense"?"Expense":n==="transfer"?"Transfer":n,pD=n=>{const e=n.toLowerCase();return e==="income"||e==="expense"||e==="transfer"?e:"expense"},gD=n=>({id:n.id,date:n.date?.toDate?.()?n.date.toDate().toISOString():n.date,amount:typeof n.amount=="string"?parseFloat(n.amount)||0:n.amount,description:n.description||"",envelopeId:n.envelopeId||"",reconciled:n.reconciled??!1,type:tz(n.type),transferId:n.transferId??void 0,userId:n.userId}),nz=(n,e)=>({id:n.id,userId:e,envelopeId:n.envelopeId,amount:n.amount.toString(),date:We.fromDate(new Date(n.date)),description:n.description,reconciled:n.reconciled??!1,type:pD(n.type),transferId:n.transferId??null}),iz=n=>({envelopeId:n.envelopeId,amount:n.amount.toString(),date:We.fromDate(new Date(n.date)),description:n.description,reconciled:n.reconciled??!1,type:pD(n.type),transferId:n.transferId??null}),rz=({set:n,get:e,getCurrentUserId:t,isNetworkError:i})=>({addTransaction:async s=>{const o=`temp-${Date.now()}-${Math.random()}`,l=t(),u={...s,id:o,userId:l};if(n(d=>({transactions:[...d.transactions,u],isLoading:!0})),s.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${s.envelopeId}`),n({isLoading:!1,pendingSync:!0});else try{const d=nz(u,l),f=await pr.addTransaction(d);console.log(` Replacing temp transaction ${o} with Firebase transaction:`,f);const g=gD(f);n(v=>({transactions:v.transactions.map(_=>_.id===o?g:_),isLoading:!1,pendingSync:!1}))}catch(d){console.error("Add Transaction Failed:",d),i(d)?n({isLoading:!1,pendingSync:!0,error:null}):n(f=>({transactions:f.transactions.filter(g=>g.id!==o),error:d.message,isLoading:!1}))}},deleteTransaction:async s=>{const o=e().transactions.find(u=>u.id===s);if(!o)return;const l=[s];if(o.transferId){const u=e().transactions.find(d=>d.transferId===o.transferId&&d.id!==s);u&&u.id&&l.push(u.id)}n(u=>({transactions:u.transactions.filter(d=>d.id&&!l.includes(d.id)),isLoading:!0}));try{const u=t(),d=l.filter(f=>!f.startsWith("temp-"));for(const f of d)console.log(` About to delete transaction ID: ${f}`),await pr.deleteTransaction(u,f),console.log(` Deleted transaction ID: ${f}`);console.log(" All transaction deletions completed"),n({isLoading:!1})}catch(u){if(console.error("Delete Transaction Failed:",u),i(u))n({isLoading:!1,pendingSync:!0,error:null});else{const d=l.map(f=>e().transactions.find(g=>g.id===f)||o).filter(Boolean);n(f=>({transactions:[...f.transactions,...d],error:u.message,isLoading:!1}))}}},updateTransaction:async s=>{console.log(" updateTransaction called:",s),n(o=>({transactions:o.transactions.map(l=>l.id===s.id?s:l),isLoading:!0}));try{const o=t(),l=pr.updateTransaction(o,s.id,iz(s)),u=new Promise((d,f)=>setTimeout(()=>f(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([l,u]),console.log(" Transaction updated in Firebase"),n({isLoading:!1})}catch(o){console.error("Update Transaction Failed:",o),console.log(" Error details:",{name:o?.name||"Unknown",message:o?.message||"Unknown",code:o?.code||"Unknown",isNetworkError:i(o)}),i(o)?(console.log(" Treating as offline scenario - keeping local transaction update"),n({isLoading:!1,pendingSync:!0,error:null})):n({error:o.message,isLoading:!1})}},restoreTransaction:async s=>{n(o=>({transactions:[...o.transactions,s],isLoading:!0}));try{n({isLoading:!1})}catch(o){console.error("Restore Transaction Failed:",o),n({error:o.message,isLoading:!1})}}}),sz=({set:n,get:e,getCurrentUserId:t,isNetworkError:i,loadFallbackData:s,checkOnlineStatus:o,clearUserData:l})=>{const u=async()=>{const A=e(),C=t();if(A.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",C),n({isLoading:!0,error:null});try{let P,U,M,$;[P,U,M,$]=await Promise.all([ia.getAllEnvelopes(C).catch(x=>(console.error(" Failed to fetch envelopes:",x),[])),pr.getAllTransactions(C).catch(x=>(console.error(" Failed to fetch transactions:",x),[])),yi.getAllDistributionTemplates(C).catch(x=>(console.error(" Failed to fetch templates:",x),[])),Kr.getAppSettings(C).catch(x=>(console.error(" Failed to fetch settings:",x),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:P?.length||0,transactions:U?.length||0,templates:M?.length||0,settings:$?"found":"null"}),e().markOnlineFromFirebaseSuccess();const te=(P?.length||0)>0||(U?.length||0)>0||(M?.length||0)>0;let Z=null;te||(console.log(" No data from Firebase, loading fallback data..."),Z=await s(),Z&&(console.log(" Using fallback data for initialization"),P=Z.envelopes||[],U=Z.transactions||[],M=Z.distributionTemplates||[],$=Z.appSettings||null)),n(x=>{const R=le=>le.map(z=>({...z,date:z.date&&typeof z.date=="object"&&z.date.toDate?z.date.toDate().toISOString():z.date,type:z.type==="income"?"Income":z.type==="expense"?"Expense":z.type==="transfer"?"Transfer":z.type,amount:typeof z.amount=="string"?parseFloat(z.amount):z.amount})),V=le=>({id:le.id,name:le.name,currentBalance:le.currentBalance||0,lastUpdated:le.lastUpdated,isActive:le.isActive??!0,orderIndex:le.orderIndex??0}),O=P.filter(le=>!("orderIndex"in le));O.length>0&&(console.log(` Migrating ${O.length} envelopes to add orderIndex...`),O.forEach((le,z)=>{const ne=z,pe=t();ia.saveEnvelope(pe,{...le,orderIndex:ne}).then(()=>console.log(` Migrated envelope ${le.name} with orderIndex ${ne}`)).catch(ye=>console.warn(`Failed to migrate envelope ${le.id}:`,ye))}));const k=P.map(V),B=new Set([...x.envelopes.map(le=>le.id),...P.map(le=>le.id)]),L=x.envelopes.filter(le=>le.id&&!P.some(z=>z.id===le.id)&&!le.id.startsWith("temp-")),Ce=x.transactions.filter(le=>le.id&&!U.some(z=>z.id===le.id)&&(!le.id.startsWith("temp-")||B.has(le.envelopeId)));let de,H=[];navigator.onLine?(de=M,console.log(` Online mode: Using Firebase templates only (${de.length} templates)`)):(H=x.distributionTemplates.filter(le=>le.id&&!M.some(z=>z.id===le.id)),de=M.concat(H),console.log(` Offline mode: Merged ${M.length} Firebase + ${H.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",x.envelopes.map(le=>({id:le.id,name:le.name}))),console.log("  Firebase envelopes:",P.map(le=>({id:le.id,name:le.name}))),console.log("  Store transactions:",x.transactions.map(le=>({id:le.id,envelopeId:le.envelopeId,description:le.description}))),console.log("  Firebase transactions:",U.map(le=>({id:le.id,envelopeId:le.envelopeId,description:le.description}))),console.log("  Store templates:",x.distributionTemplates.map(le=>({id:le.id,name:le.name}))),console.log("  Firebase templates:",M.map(le=>({id:le.id,name:le.name}))),console.log("  Local-only envelopes:",L.map(le=>({id:le.id,name:le.name}))),console.log("  Local-only transactions:",Ce.map(le=>({id:le.id,envelopeId:le.envelopeId,description:le.description}))),console.log("  Local-only templates:",H.map(le=>({id:le.id,name:le.name}))),console.log("  Total merged templates:",de.length,de.map(le=>({id:le.id,name:le.name})));const se=k.concat(L),he=R(U).concat(Ce);let Te=$;if($&&"isDarkMode"in $&&!("theme"in $)){const le=$;if(Te={...le,theme:le.isDarkMode?"dark":"light"},delete Te.isDarkMode,Te&&Te.id){const z=t();Kr.updateAppSettings(z,Te.id,{theme:Te.theme}).catch(ne=>console.warn("Failed to migrate app settings:",ne))}}return{envelopes:se,transactions:he,distributionTemplates:de,appSettings:Te,isLoading:!1,pendingSync:!1}})}catch(P){console.error("Sync Failed:",P),i(P)?n({isLoading:!1,pendingSync:!0}):n({error:P.message,isLoading:!1})}},d=async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),n({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(C){console.error("Firebase reset during sync failed:",C)}return}n({pendingSync:!0});try{await e().fetchData()}catch(C){console.error("Manual sync failed:",C)}},f=async()=>{const A=await o();n({isOnline:A})},g=()=>{e().isOnline||(console.log(" Firebase operation succeeded - marking as online"),n({isOnline:!0}))},v=()=>{l()},_=async A=>{try{if(!A.envelopes||!A.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const C=t();console.log(` Importing data for user: ${C}`),console.log(" Clearing existing Firebase data before import..."),await S(),n({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,pendingSync:!0,isLoading:!0}),console.log(" Local state cleared before import");const P=A.envelopes.map(x=>({id:x.id||`imported-${Date.now()}-${Math.random()}`,name:x.name,currentBalance:x.currentBalance||x.budget||0,lastUpdated:new Date().toISOString(),isActive:x.isActive??!0,orderIndex:x.orderIndex??0,userId:C})),U=A.transactions.map(x=>({...x,id:x.id||`imported-${Date.now()}-${Math.random()}`,userId:C,date:x.date,amount:typeof x.amount=="number"?x.amount:parseFloat(x.amount)||0,type:x.type,reconciled:x.reconciled??!1})),M=(A.distributionTemplates||[]).map(x=>({...x,id:x.id||`imported-${Date.now()}-${Math.random()}`,userId:C})),$=A.appSettings?{...A.appSettings,id:A.appSettings.id||`settings-${C}`,userId:C}:null;console.log(` Importing: ${P.length} envelopes, ${U.length} transactions, ${M.length} templates`),n({envelopes:P,transactions:U,distributionTemplates:M,appSettings:$,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const x of P)try{await ia.saveEnvelope(C,x),console.log(` Synced envelope: ${x.name}`)}catch(R){console.error(` Failed to sync envelope ${x.name}:`,R)}for(const x of U)try{const R={...x,amount:x.amount.toString(),type:x.type.toLowerCase(),date:We.fromDate(new Date(x.date))};await pr.addTransaction(R),console.log(` Synced transaction: ${x.description}`)}catch(R){console.error(` Failed to sync transaction ${x.description}:`,R)}for(const x of M)try{await yi.createDistributionTemplate(x),console.log(` Synced template: ${x.name}`)}catch(R){console.error(` Failed to sync template ${x.name}:`,R)}if($)try{await Kr.createAppSettings($),console.log(" Synced app settings")}catch(x){console.error(" Failed to sync app settings:",x)}console.log(" All imported data synced to Firebase"),n({pendingSync:!1,isLoading:!1})}catch(x){console.error(" Error syncing to Firebase:",x),n({pendingSync:!0})}const te=M.length,Z=$?"Settings imported.":"";return{success:!0,message:`Imported and synced ${P.length} envelopes, ${U.length} transactions${te>0?`, ${te} templates`:""} to Firebase.${Z?` ${Z}`:""}`}}catch(C){return console.error("Import failed:",C),{success:!1,message:"Failed to import data. Check file format."}}},S=async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),n({isLoading:!0});try{const A=t();console.log(" Querying Firebase for all data to delete...");const[C,P,U,M]=await Promise.all([ia.getAllEnvelopes(A).catch(x=>(console.error(" Failed to fetch envelopes for reset:",x),[])),pr.getAllTransactions(A).catch(x=>(console.error(" Failed to fetch transactions for reset:",x),[])),yi.getAllDistributionTemplates(A).catch(x=>(console.error(" Failed to fetch templates for reset:",x),[])),Kr.getAppSettings(A).catch(x=>(console.error(" Failed to fetch settings for reset:",x),null))]);console.log(` Found in Firebase: ${C.length} envelopes, ${P.length} transactions, ${U.length} templates`);let $=0;for(const x of C)if(x.id)try{await ia.deleteEnvelope(A,x.id),$++,console.log(` Deleted envelope: ${x.name||x.id}`)}catch(R){console.error(` Failed to delete envelope ${x.id}:`,R)}let te=0;for(const x of P)if(x.id)try{await pr.deleteTransaction(A,x.id),te++,console.log(` Deleted transaction: ${x.id}`)}catch(R){console.error(` Failed to delete transaction ${x.id}:`,R)}let Z=0;for(const x of U)if(x.id)try{await yi.deleteDistributionTemplate(A,x.id),Z++,console.log(` Deleted template: ${x.name||x.id}`)}catch(R){console.error(` Failed to delete template ${x.id}:`,R)}if(M?.id)try{await Kr.deleteAppSettings(A,M.id),console.log(" Deleted app settings")}catch(x){console.error(" Failed to delete app settings:",x)}console.log(` Firebase reset complete: Deleted ${$} envelopes, ${te} transactions, ${Z} templates`),n({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(A){throw console.error(" Error during Firebase reset:",A),n({isLoading:!1,pendingSync:!0}),A}};return{fetchData:u,syncData:d,updateOnlineStatus:f,markOnlineFromFirebaseSuccess:g,handleUserLogout:v,importData:_,performFirebaseReset:S,resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),n({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(C){console.error(" Firebase reset failed, will retry on next sync:",C),n({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),n({isLoading:!1,pendingSync:!0})}}},az=n=>gD(n),oz=n=>({id:n.id,name:n.name||"",currentBalance:n.currentBalance||0,lastUpdated:n.lastUpdated,isActive:n.isActive??!0,orderIndex:n.orderIndex??0,userId:n.userId||void 0}),lz=n=>({id:n.id,name:n.name||"",distributions:n.distributions||{},lastUsed:n.lastUsed?.toDate?.()?n.lastUsed.toDate().toISOString():n.lastUsed||new Date().toISOString(),note:n.note||"",userId:n.userId||void 0}),tA=(n,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const t=ia.subscribeToEnvelopes(e,l=>{const u=n.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Envelopes updated",l.length);const d=l.map(oz);n.setState({envelopes:d})}}),i=pr.subscribeToTransactions(e,l=>{const u=n.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Transactions updated",l.length);const d=l.map(az);n.setState({transactions:d})}}),s=yi.subscribeToDistributionTemplates(e,l=>{const u=n.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Templates updated from Firebase",l.length),console.log(" Firebase templates:",l.map(f=>({id:f.id,name:f.name})));const d=l.map(lz);console.log(" Setting store templates to:",d.map(f=>({id:f.id,name:f.name}))),n.setState({distributionTemplates:d})}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),o=Kr.subscribeToAppSettings(e,l=>{const u=n.getState();u.isOnline&&!u.pendingSync&&!u.resetPending&&(console.log(" Real-time sync: Settings updated",l?"found":"null"),n.setState({appSettings:l}))});window.__firebaseUnsubscribers={envelopes:t,transactions:i,templates:s,settings:o},console.log(" Real-time subscriptions active - cross-device sync enabled")},cz=n=>{const{useEnvelopeStore:e,useAuthStore:t,getCurrentUserId:i}=n;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const u=e.getState();u.isOnline&&(u.pendingSync||u.resetPending)&&(console.log(" Auto-syncing pending operations..."),u.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let s=null;const o=()=>{s&&clearInterval(s),s=setInterval(async()=>{const u=e.getState();if(!u.isOnline&&!u.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(u.pendingSync||u.resetPending)&&e.getState().syncData(),s&&(clearInterval(s),s=null)):e.setState({testingConnectivity:!1})}catch(d){console.log(" Periodic retry failed:",d),e.setState({testingConnectivity:!1})}}else u.isOnline&&s&&(clearInterval(s),s=null)},3e4)};o(),e.subscribe(u=>{!u.isOnline&&!s&&(console.log(" Starting periodic connectivity retry"),o())});const l=t.getState();l.isAuthenticated&&l.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),tA(e,i())),t.subscribe(u=>{if(u.isAuthenticated&&u.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),tA(e,i());else if(!u.isAuthenticated&&!u.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const d=window.__firebaseUnsubscribers;d.envelopes&&d.envelopes(),d.transactions&&d.transactions(),d.templates&&d.templates(),d.settings&&d.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}})},uz=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const n=await fetch("/HouseBudget_Backup_2025-11-25.json");if(n.ok){const e=await n.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(n){console.log(" Could not load fallback data:",n)}return null},Gl=()=>{const{currentUser:n}=zo.getState();if(!n)throw new Error("No authenticated user found");return n.id},hz=()=>{console.log(" Clearing user data on logout"),Fn.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},dz=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const n=async(t,i={})=>{try{const s=new AbortController,o=setTimeout(()=>s.abort(),4e3);return await fetch(t,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:s.signal,...i}),clearTimeout(o),!0}catch(s){return console.log(` Connectivity test failed for ${t}:`,s instanceof Error?s.message:"Unknown error"),!1}},e=[n("https://httpbin.org/status/200",{method:"GET"}),n("https://www.cloudflare.com/favicon.ico"),n("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),n("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const t=await Promise.allSettled(e),i=t.filter(o=>o.status==="fulfilled"&&o.value===!0).length,s=t.length;return i>0?(console.log(` Connectivity confirmed (${i}/${s} tests passed)`),!0):(console.log(` All connectivity tests failed (${s} tests)`),!1)}catch(t){return console.log(" Connectivity testing error:",t),!1}},nm=n=>{const e=n?.code?.toLowerCase()||"",t=n?.message?.toLowerCase()||"",i=n?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||t.includes("network")||t.includes("offline")||t.includes("disconnected")||t.includes("connection")||t.includes("fetch")||t.includes("timeout")||t.includes("err_internet_disconnected")||t.includes("err_network_changed")||t.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&t==="undefined")},Fn=m_()(MI((n,e)=>{const t=JU({set:n,get:e,getCurrentUserId:Gl,isNetworkError:nm}),i=ez({set:n,get:e,getCurrentUserId:Gl,isNetworkError:nm}),s=mD({set:n,get:e,getCurrentUserId:Gl}),o=rz({set:n,get:e,getCurrentUserId:Gl,isNetworkError:nm}),l=sz({set:n,get:e,getCurrentUserId:Gl,isNetworkError:nm,loadFallbackData:uz,checkOnlineStatus:dz,clearUserData:hz});return{envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,addTransaction:o.addTransaction,createEnvelope:t.createEnvelope,addToEnvelope:t.addToEnvelope,spendFromEnvelope:t.spendFromEnvelope,transferFunds:t.transferFunds,deleteEnvelope:t.deleteEnvelope,deleteTransaction:o.deleteTransaction,updateTransaction:o.updateTransaction,restoreTransaction:o.restoreTransaction,renameEnvelope:t.renameEnvelope,saveTemplate:i.saveTemplate,deleteTemplate:i.deleteTemplate,updateAppSettings:s.updateAppSettings,initializeAppSettings:s.initializeAppSettings,cleanupOrphanedTemplates:i.cleanupOrphanedTemplates,updateTemplateEnvelopeReferences:i.updateTemplateEnvelopeReferences,removeEnvelopeFromTemplates:i.removeEnvelopeFromTemplates,fetchData:l.fetchData,syncData:l.syncData,updateOnlineStatus:l.updateOnlineStatus,markOnlineFromFirebaseSuccess:l.markOnlineFromFirebaseSuccess,handleUserLogout:l.handleUserLogout,importData:l.importData,performFirebaseReset:l.performFirebaseReset,resetData:l.resetData,getEnvelopeBalance:u=>{const d=e();if(!d.envelopes.find(C=>C.id===u))return console.log(` getEnvelopeBalance: Envelope ${u} not found`),new $r(0);const g=d.transactions.filter(C=>C.envelopeId===u),v=g.filter(C=>C.type==="Expense"),_=g.filter(C=>C.type==="Income"),S=v.reduce((C,P)=>C.plus(new $r(P.amount||0)),new $r(0));return _.reduce((C,P)=>C.plus(new $r(P.amount||0)),new $r(0)).minus(S)}}},{name:"envelope-storage",partialize:n=>({envelopes:n.envelopes,transactions:n.transactions,distributionTemplates:n.distributionTemplates,appSettings:n.appSettings})}));cz({useEnvelopeStore:Fn,useAuthStore:zo,getCurrentUserId:Gl});const fz=({isOpen:n,onClose:e})=>{const{envelopes:t,addToEnvelope:i,distributionTemplates:s,saveTemplate:o,deleteTemplate:l,getEnvelopeBalance:u}=Fn(),[d,f]=j.useState(""),[g,v]=j.useState({}),[_,S]=j.useState(""),[N,A]=j.useState(!1),[C,P]=j.useState(!1),[U,M]=j.useState(""),$=j.useMemo(()=>t.sort((de,H)=>de.name.localeCompare(H.name)),[t]),te=parseFloat(d)||0,Z=j.useMemo(()=>Object.values(g).reduce((de,H)=>de+H,0),[g]),x=te-Z,R=Math.abs(x)<.01,V=te>0&&R,O=Z>0&&R,k=(de,H)=>{const se=parseFloat(H);v(he=>({...he,[de]:isNaN(se)?0:se}))},B=()=>{V&&(Object.entries(g).forEach(([de,H])=>{H>0&&i(de,H,_||"Deposit",new Date)}),f(""),v({}),S(""),e())},L=()=>{U.trim()&&(o(U,g,_),A(!1),M(""))},Ce=de=>{const H=Object.fromEntries(Object.entries(de.distributions).filter(([he])=>$.some(Te=>Te.id===he)));v(H);const se=Object.values(H).reduce((he,Te)=>he+Te,0);f(se.toFixed(2)),S(de.note||""),P(!1)};return n?T.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-gray-50 dark:bg-black sm:bg-gray-100 dark:sm:bg-black",children:[T.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 flex items-center justify-between shadow-sm shrink-0",children:[T.jsx("button",{onClick:e,className:"text-blue-600 dark:text-blue-400 font-medium text-base",children:"Cancel"}),T.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:"Distribute Funds"}),T.jsx("button",{onClick:B,disabled:!V,className:`font-bold text-base ${V?"text-blue-600 dark:text-blue-400":"text-gray-300 dark:text-zinc-600"}`,children:"Apply"})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 relative",children:[T.jsxs("div",{className:"sticky top-0 z-10 bg-gray-50/95 dark:bg-black/95 backdrop-blur-sm border-b border-gray-200 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[T.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-zinc-400 mb-1",children:"Deposit Amount"}),T.jsxs("div",{className:"flex items-center",children:[T.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mr-2",children:"$"}),T.jsx("input",{type:"number",inputMode:"decimal",value:d,onChange:de=>f(de.target.value),placeholder:"0.00",className:"text-3xl font-bold text-black dark:text-white w-full focus:outline-none bg-white dark:bg-zinc-900 placeholder-gray-300 dark:placeholder-zinc-600 appearance-none",autoFocus:!0})]})]}),T.jsxs("div",{className:"flex justify-between items-center text-sm font-medium px-1",children:[T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Distributed"}),T.jsxs("span",{className:"text-gray-900 dark:text-white",children:["$",Z.toFixed(2)]})]}),T.jsxs("div",{className:"flex flex-col items-end",children:[T.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Remaining"}),T.jsxs("span",{className:`text-lg ${x===0?"text-green-600 dark:text-green-400":x<0?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:["$",x.toFixed(2)]})]})]}),!R&&te>0&&T.jsx("div",{className:"text-center text-sm font-medium text-red-500 dark:text-red-400",children:x>0?`You still have $${x.toFixed(2)} to distribute`:`You have over-allocated by $${Math.abs(x).toFixed(2)}`}),T.jsx("div",{className:"pt-2",children:O?T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[T.jsxs("button",{onClick:()=>P(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[T.jsx(Vm,{size:16}),"Load Template"]}),T.jsxs("button",{onClick:()=>A(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 text-green-400 rounded-lg font-medium text-sm hover:bg-gray-700 transition-colors",children:[T.jsx(nM,{size:16}),"Save Template"]})]}):T.jsxs("div",{className:"flex flex-col gap-3",children:[T.jsxs("button",{onClick:()=>P(!0),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[T.jsx(Vm,{size:16}),"Load Template"]}),T.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center px-2 leading-relaxed",children:"You can save this as a template once the Deposit Amount and Total Distributed are equal (Remaining = $0)."})]})}),T.jsx("input",{type:"text",placeholder:"Distribution Note (Optional)",value:_,onChange:de=>S(de.target.value),className:"w-full p-3 text-sm bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:outline-none text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600"})]}),T.jsx("div",{className:"p-4 space-y-3",children:$.filter(de=>de.id).map(de=>{const H=de.id,se=g[H]||0,he=Z>0?Math.round(se/Z*100):0;return T.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex items-center justify-between",children:[T.jsxs("div",{className:"flex-1",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:de.name}),se>0&&T.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:[he,"%"]})]}),T.jsxs("div",{className:"text-xs text-gray-400 dark:text-zinc-400",children:["Balance: $",u(de.id).toNumber().toFixed(2)]})]}),T.jsxs("div",{className:"w-32 relative",children:[T.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",children:"$"}),T.jsx("input",{type:"number",inputMode:"decimal",value:g[H]===0?"":g[H],onChange:Te=>k(H,Te.target.value),placeholder:"0",className:"w-full pl-6 pr-6 py-2 text-right bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 outline-none font-mono text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600 appearance-none"})]})]},H)})})]}),N&&T.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:T.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-gray-200 dark:border-zinc-700",children:[T.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Save Template"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Name your template to easily recall this distribution later."}),T.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g. Payday Split",value:U,onChange:de=>M(de.target.value),className:"w-full p-3 bg-gray-100 dark:bg-black rounded-xl mb-4 text-gray-900 dark:text-white border border-transparent focus:border-blue-500 outline-none"}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("button",{onClick:()=>A(!1),className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-semibold",children:"Cancel"}),T.jsx("button",{onClick:L,disabled:!U.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold disabled:opacity-50",children:"Save"})]})]})}),C&&T.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-end sm:items-center justify-center sm:p-4",children:T.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-t-2xl sm:rounded-2xl shadow-2xl border-t sm:border border-gray-200 dark:border-zinc-700 max-h-[80vh] flex flex-col",children:[T.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-zinc-800 flex justify-between items-center",children:[T.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Load Template"}),T.jsx("button",{onClick:()=>P(!1),className:"p-1 rounded-full bg-gray-100 dark:bg-zinc-800 text-gray-500",children:T.jsx(f_,{size:20})})]}),T.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:s.length===0?T.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No templates saved yet."}):s.map(de=>T.jsxs("div",{className:"flex items-center gap-2 p-3 hover:bg-gray-50 dark:hover:bg-zinc-800/50 rounded-xl group transition-colors",children:[T.jsxs("button",{onClick:()=>Ce(de),className:"flex-1 text-left",children:[T.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:de.name}),T.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: $",Object.values(de.distributions).reduce((H,se)=>H+se,0).toFixed(2),de.note&&T.jsxs("span",{className:"ml-2 opacity-75",children:[" ",de.note]})]})]}),T.jsx("button",{onClick:H=>{H.stopPropagation(),confirm("Delete this template?")&&l(de.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:T.jsx(Pm,{size:18})})]},de.id))})]})})]}):null},mz=()=>{const[n,e]=j.useState(!1),t=j.useRef(null),{currentUser:i,logout:s}=zo(),{handleUserLogout:o}=Fn(),l=Ta();j.useEffect(()=>{const f=g=>{t.current&&!t.current.contains(g.target)&&e(!1)};if(n)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[n]);const u=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{o(),s(),l("/"),e(!1)}catch(f){console.error("Logout failed:",f)}};if(!i)return null;const d=i.displayName?.charAt(0)?.toUpperCase()||i.email?.charAt(0)?.toUpperCase()||"U";return T.jsxs("div",{className:"relative",ref:t,children:[T.jsxs("button",{onClick:()=>e(!n),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[T.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:d}),T.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:i.displayName||i.email?.split("@")[0]||"User"}),T.jsx(E4,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${n?"rotate-180":""}`})]}),n&&T.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[T.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:d}),T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:i.displayName||i.email?.split("@")[0]||"User"}),T.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:i.email})]})]})}),T.jsxs("div",{className:"py-1",children:[T.jsxs("button",{onClick:()=>{l("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[T.jsx(aM,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),T.jsxs("button",{onClick:u,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[T.jsx(Z4,{size:18}),"Log Out"]})]})]})]})},pz=()=>{const{envelopes:n,transactions:e,fetchData:t,isOnline:i,pendingSync:s,syncData:o,isLoading:l,getEnvelopeBalance:u,testingConnectivity:d}=Fn(),[f,g]=j.useState(!1),v=Ta();j.useEffect(()=>{n.length===0&&t()},[]);const _=[...n].sort((N,A)=>{const C=N.orderIndex??0,P=A.orderIndex??0;return C!==P?C-P:N.name.localeCompare(A.name)});console.log(" EnvelopeListView render - calculating balances"),console.log(" Current envelopes:",n.length),console.log(" Current transactions:",e.length);const S=n.reduce((N,A)=>{const C=u(A.id);return console.log(` Envelope ${A.name} (${A.id}): $${C.toNumber().toFixed(2)}`),N+C.toNumber()},0);return console.log(" Total balance:",S),T.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[T.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-10",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("div",{className:"flex items-center gap-2",children:i?l?T.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[T.jsx(W0,{size:16,className:"animate-spin"}),T.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):s?T.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[T.jsx(W0,{size:16}),T.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):T.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[T.jsx(bM,{size:16}),T.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):T.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[T.jsx(vM,{size:16}),T.jsx("span",{className:"text-sm font-medium",children:d?"Testing Connection...":l?"Offline (Saving...)":"Offline"})]})}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:()=>v("/transactions"),className:"text-blue-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Transaction History",children:T.jsx(Y4,{size:22})}),T.jsx(mz,{})]})]}),T.jsx("div",{className:"mt-4",children:T.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"House Expenses"})})]}),T.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[T.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 space-y-4",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-gray-600 dark:text-zinc-400 font-medium",children:"Total Balance"}),T.jsxs("span",{className:`text-2xl font-bold ${S>=0?"text-green-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[S<0?"-":"","$",Math.abs(S).toFixed(2)]})]}),T.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-50 dark:bg-blue-900/40 text-blue-600 dark:text-blue-300 py-3 rounded-xl font-semibold active:bg-blue-100 dark:active:bg-blue-900/60 transition-colors",children:[T.jsx($4,{size:20,className:"rotate-90"}),"Distribute Funds"]})]}),T.jsx("section",{children:_.length===0?T.jsxs("div",{className:"text-center py-10 space-y-3",children:[T.jsx(gM,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto"}),T.jsx("h3",{className:"text-gray-500 dark:text-zinc-400 font-medium",children:"No envelopes yet"}),T.jsx("button",{onClick:()=>v("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium",children:"Create First Envelope"})]}):T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"flex justify-between items-end px-1",children:[T.jsx("h2",{className:"text-sm font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-wider",children:"My Envelopes"}),T.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-300 font-medium",onClick:()=>v("/add-envelope"),children:"+ New Envelope"})]}),_.map(N=>T.jsxs("div",{onClick:()=>v(`/envelope/${N.id}`),className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex justify-between items-center active:scale-[0.99] transition-transform cursor-pointer",children:[T.jsx("div",{className:"flex flex-col",children:T.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:N.name})}),T.jsxs("span",{className:`font-bold ${u(N.id).toNumber()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-emerald-400"}`,children:[u(N.id).toNumber()<0?"-":"","$",Math.abs(u(N.id).toNumber()).toFixed(2)]})]},N.id))]})})]}),T.jsx("button",{onClick:()=>v("/add-transaction"),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",children:T.jsx(k4,{size:28})}),T.jsx(fz,{isOpen:f,onClose:()=>g(!1)})]})},Ab=m_((n,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(t,i="neutral",s)=>{n({message:t,type:i,isVisible:!0,undoAction:s}),setTimeout(()=>{e().hideToast()},4e3)},hideToast:()=>{n({isVisible:!1})}})),yD=({isVisible:n,onClose:e,mode:t,currentEnvelope:i,initialTransaction:s})=>{const{addToEnvelope:o,spendFromEnvelope:l,updateTransaction:u,deleteTransaction:d}=Fn(),[f,g]=j.useState(""),[v,_]=j.useState(""),[S,N]=j.useState(new Date().toISOString().split("T")[0]);if(j.useEffect(()=>{if(!n)return;const M=window.setTimeout(()=>{if(t==="edit"&&s){g(s.amount.toString()),_(s.description);try{const $=new Date(s.date);isNaN($.getTime())?(console.warn("Invalid date in transaction:",s.date),N(new Date().toISOString().split("T")[0])):N($.toISOString().split("T")[0])}catch($){console.error("Error parsing transaction date:",$),N(new Date().toISOString().split("T")[0])}}else g(""),_(""),N(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(M)},[n,t,s]),!n)return null;const A=M=>{M.preventDefault();const $=parseFloat(f);isNaN($)||$<=0||(t==="add"?o(i.id,$,v,new Date(S)):t==="spend"?l(i.id,$,v,new Date(S)):t==="edit"&&s&&u({...s,amount:$,description:v,date:new Date(S).toISOString()}),e())},C=()=>{!s||!s.id||window.confirm("Are you sure you want to delete this transaction?")&&(d(s.id),e())},P=t==="add"?"Add Money":t==="spend"?"Spend Money":"Edit Transaction",U=t==="add"?"text-green-500":"text-red-500";return T.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:T.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[T.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[T.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),T.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:P}),T.jsx("button",{onClick:A,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0,children:"Save"})]}),T.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[T.jsxs("div",{className:"text-center",children:[T.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),T.jsxs("div",{className:"relative inline-block",children:[T.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${U}`,children:"$"}),T.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:f,onChange:M=>{const $=M.target.value;($===""||!isNaN(parseFloat($))&&parseFloat($)>=0)&&g($)},onKeyDown:M=>{(M.key==="e"||M.key==="E"||M.key==="+"||M.key==="-")&&M.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${U} placeholder-gray-700`})]})]}),T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[T.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),T.jsx("input",{type:"text",value:v,onChange:M=>_(M.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[T.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),T.jsx("input",{type:"date",value:S,onChange:M=>{console.log("Date changed to:",M.target.value),N(M.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),t==="edit"&&T.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:T.jsxs("button",{type:"button",onClick:C,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[T.jsx(PI,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},gz=({isVisible:n,onClose:e,sourceEnvelope:t})=>{const{envelopes:i,transferFunds:s}=Fn(),[o,l]=j.useState(""),[u,d]=j.useState(""),[f,g]=j.useState(""),[v,_]=j.useState(new Date().toISOString().split("T")[0]),S=i.filter(C=>C.id!==t.id);if(j.useEffect(()=>{if(!n)return;const C=window.setTimeout(()=>{l(""),d(""),g(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(C)},[n]),!n)return null;const N=C=>{C.preventDefault();const P=parseFloat(u);isNaN(P)||P<=0||!o||(s(t.id,o,P,f,new Date(v)),e())},A=i.find(C=>C.id===o);return T.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:T.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[T.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[T.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),T.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),T.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!u||parseFloat(u)<=0||!o,children:"Transfer"})]}),T.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[T.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),T.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.name})]}),T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[T.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),T.jsxs("select",{value:o,onChange:C=>l(C.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[T.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),S.map(C=>T.jsx("option",{value:C.id,className:"bg-white dark:bg-zinc-900",children:C.name},C.id))]})]}),T.jsxs("div",{className:"text-center",children:[T.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),T.jsxs("div",{className:"relative inline-block",children:[T.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),T.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:u,onChange:C=>d(C.target.value),onKeyDown:C=>{(C.key==="e"||C.key==="E"||C.key==="+"||C.key==="-")&&C.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[T.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),T.jsx("input",{type:"text",value:f,onChange:C=>g(C.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[T.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),T.jsx("input",{type:"date",value:v,onChange:C=>_(C.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),A&&u&&parseFloat(u)>0&&T.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",T.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(u).toFixed(2)]})," from"," ",T.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t.name})," to"," ",T.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:A.name})]})]})]})})},yz=n=>{if(!n)return"No Date";try{let e;return n&&typeof n=="object"&&n.toDate&&typeof n.toDate=="function"?e=n.toDate():typeof n=="number"?n<1e10?e=new Date((n+978307200)*1e3):e=new Date(n):e=new Date(n),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},vz=n=>{const e=typeof n=="string"?parseFloat(n):n;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},vD=({transaction:n,envelopeName:e,onReconcile:t,onEdit:i})=>{if(!n)return null;const s=n.type==="Income",o=n.type==="Expense";let l="text-gray-900 dark:text-white";return s&&(l="text-green-600 dark:text-green-400"),o&&(l="text-red-600 dark:text-red-400"),T.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[T.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:n.description||"No Description"}),n.reconciled&&T.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),T.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[T.jsx("span",{children:yz(n.date)}),e&&T.jsxs(T.Fragment,{children:[T.jsx("span",{children:""}),T.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${l}`,children:[o?"-":s?"+":"",vz(n.amount)]}),t?T.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),t()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":n.reconciled?"Mark as unreconciled":"Mark as reconciled",children:n.reconciled?T.jsx(Kw,{className:"text-green-500",size:20}):T.jsx(Yw,{className:"text-gray-400",size:20})}):T.jsx("span",{children:n.reconciled?T.jsx(Kw,{className:"text-green-500",size:20}):T.jsx(Yw,{className:"text-gray-400",size:20})})]})]})},Ib=j.createContext({});function tg(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const Rb=typeof window<"u",Cb=Rb?j.useLayoutEffect:j.useEffect,ng=j.createContext(null);function Db(n,e){n.indexOf(e)===-1&&n.push(e)}function Nb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const as=(n,e,t)=>t>e?e:t<n?n:t;let kb=()=>{};const os={},_D=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function bD(n){return typeof n=="object"&&n!==null}const TD=n=>/^0[^.\s]+$/u.test(n);function Vb(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ei=n=>n,_z=(n,e)=>t=>e(n(t)),dd=(...n)=>n.reduce(_z),qh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class Pb{constructor(){this.subscriptions=[]}add(e){return Db(this.subscriptions,e),()=>Nb(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const br=n=>n*1e3,bi=n=>n/1e3;function ED(n,e){return e?n*(1e3/e):0}const wD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,bz=1e-7,Tz=12;function Ez(n,e,t,i,s){let o,l,u=0;do l=e+(t-e)/2,o=wD(l,i,s)-n,o>0?t=l:e=l;while(Math.abs(o)>bz&&++u<Tz);return l}function fd(n,e,t,i){if(n===e&&t===i)return Ei;const s=o=>Ez(o,0,1,n,t);return o=>o===0||o===1?o:wD(s(o),e,i)}const SD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,xD=n=>e=>1-n(1-e),AD=fd(.33,1.53,.69,.99),Mb=xD(AD),ID=SD(Mb),RD=n=>(n*=2)<1?.5*Mb(n):.5*(2-Math.pow(2,-10*(n-1))),Ob=n=>1-Math.sin(Math.acos(n)),CD=xD(Ob),DD=SD(Ob),wz=fd(.42,0,1,1),Sz=fd(0,0,.58,1),ND=fd(.42,0,.58,1),xz=n=>Array.isArray(n)&&typeof n[0]!="number",kD=n=>Array.isArray(n)&&typeof n[0]=="number",Az={linear:Ei,easeIn:wz,easeInOut:ND,easeOut:Sz,circIn:Ob,circInOut:DD,circOut:CD,backIn:Mb,backInOut:ID,backOut:AD,anticipate:RD},Iz=n=>typeof n=="string",nA=n=>{if(kD(n)){kb(n.length===4);const[e,t,i,s]=n;return fd(e,t,i,s)}else if(Iz(n))return Az[n];return n},im=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Rz(n,e){let t=new Set,i=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(f.schedule(g),n()),g(u)}const f={schedule:(g,v=!1,_=!1)=>{const N=_&&s?t:i;return v&&l.add(g),N.has(g)||N.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(u=g,s){o=!0;return}s=!0,[t,i]=[i,t],t.forEach(d),t.clear(),s=!1,o&&(o=!1,f.process(g))}};return f}const Cz=40;function VD(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=im.reduce((M,$)=>(M[$]=Rz(o),M),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:g,update:v,preRender:_,render:S,postRender:N}=l,A=()=>{const M=os.useManualTiming?s.timestamp:performance.now();t=!1,os.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(M-s.timestamp,Cz),1)),s.timestamp=M,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),g.process(s),v.process(s),_.process(s),S.process(s),N.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(A))},C=()=>{t=!0,i=!0,s.isProcessing||n(A)};return{schedule:im.reduce((M,$)=>{const te=l[$];return M[$]=(Z,x=!1,R=!1)=>(t||C(),te.schedule(Z,x,R)),M},{}),cancel:M=>{for(let $=0;$<im.length;$++)l[im[$]].cancel(M)},state:s,steps:l}}const{schedule:Tt,cancel:va,state:fn,steps:P0}=VD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ei,!0);let Im;function Dz(){Im=void 0}const zn={now:()=>(Im===void 0&&zn.set(fn.isProcessing||os.useManualTiming?fn.timestamp:performance.now()),Im),set:n=>{Im=n,queueMicrotask(Dz)}},PD=n=>e=>typeof e=="string"&&e.startsWith(n),Lb=PD("--"),Nz=PD("var(--"),jb=n=>Nz(n)?kz.test(n.split("/*")[0].trim()):!1,kz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Oc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Hh={...Oc,transform:n=>as(0,1,n)},rm={...Oc,default:1},vh=n=>Math.round(n*1e5)/1e5,Ub=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Vz(n){return n==null}const Pz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zb=(n,e)=>t=>!!(typeof t=="string"&&Pz.test(t)&&t.startsWith(n)||e&&!Vz(t)&&Object.prototype.hasOwnProperty.call(t,e)),MD=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,o,l,u]=i.match(Ub);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},Mz=n=>as(0,255,n),M0={...Oc,transform:n=>Math.round(Mz(n))},_o={test:zb("rgb","red"),parse:MD("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+M0.transform(n)+", "+M0.transform(e)+", "+M0.transform(t)+", "+vh(Hh.transform(i))+")"};function Oz(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Uv={test:zb("#"),parse:Oz,transform:_o.transform},md=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Xs=md("deg"),Tr=md("%"),Ne=md("px"),Lz=md("vh"),jz=md("vw"),iA={...Tr,parse:n=>Tr.parse(n)/100,transform:n=>Tr.transform(n*100)},Yl={test:zb("hsl","hue"),parse:MD("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Tr.transform(vh(e))+", "+Tr.transform(vh(t))+", "+vh(Hh.transform(i))+")"},Kt={test:n=>_o.test(n)||Uv.test(n)||Yl.test(n),parse:n=>_o.test(n)?_o.parse(n):Yl.test(n)?Yl.parse(n):Uv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?_o.transform(n):Yl.transform(n),getAnimatableNone:n=>{const e=Kt.parse(n);return e.alpha=0,Kt.transform(e)}},Uz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function zz(n){return isNaN(n)&&typeof n=="string"&&(n.match(Ub)?.length||0)+(n.match(Uz)?.length||0)>0}const OD="number",LD="color",Bz="var",Fz="var(",rA="${}",qz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Gh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(qz,d=>(Kt.test(d)?(i.color.push(o),s.push(LD),t.push(Kt.parse(d))):d.startsWith(Fz)?(i.var.push(o),s.push(Bz),t.push(d)):(i.number.push(o),s.push(OD),t.push(parseFloat(d))),++o,rA)).split(rA);return{values:t,split:u,indexes:i,types:s}}function jD(n){return Gh(n).values}function UD(n){const{split:e,types:t}=Gh(n),i=e.length;return s=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],s[l]!==void 0){const u=t[l];u===OD?o+=vh(s[l]):u===LD?o+=Kt.transform(s[l]):o+=s[l]}return o}}const Hz=n=>typeof n=="number"?0:Kt.test(n)?Kt.getAnimatableNone(n):n;function Gz(n){const e=jD(n);return UD(n)(e.map(Hz))}const _a={test:zz,parse:jD,createTransformer:UD,getAnimatableNone:Gz};function O0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function $z({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;s=O0(d,u,n+1/3),o=O0(d,u,n),l=O0(d,u,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function hp(n,e){return t=>t>0?e:n}const wt=(n,e,t)=>n+(e-n)*t,L0=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},Kz=[Uv,_o,Yl],Yz=n=>Kz.find(e=>e.test(n));function sA(n){const e=Yz(n);if(!e)return!1;let t=e.parse(n);return e===Yl&&(t=$z(t)),t}const aA=(n,e)=>{const t=sA(n),i=sA(e);if(!t||!i)return hp(n,e);const s={...t};return o=>(s.red=L0(t.red,i.red,o),s.green=L0(t.green,i.green,o),s.blue=L0(t.blue,i.blue,o),s.alpha=wt(t.alpha,i.alpha,o),_o.transform(s))},zv=new Set(["none","hidden"]);function Qz(n,e){return zv.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Xz(n,e){return t=>wt(n,e,t)}function Bb(n){return typeof n=="number"?Xz:typeof n=="string"?jb(n)?hp:Kt.test(n)?aA:Jz:Array.isArray(n)?zD:typeof n=="object"?Kt.test(n)?aA:Wz:hp}function zD(n,e){const t=[...n],i=t.length,s=n.map((o,l)=>Bb(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)t[l]=s[l](o);return t}}function Wz(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=Bb(n[s])(n[s],e[s]));return s=>{for(const o in i)t[o]=i[o](s);return t}}function Zz(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][i[o]],u=n.values[l]??0;t[s]=u,i[o]++}return t}const Jz=(n,e)=>{const t=_a.createTransformer(e),i=Gh(n),s=Gh(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?zv.has(n)&&!s.values.length||zv.has(e)&&!i.values.length?Qz(n,e):dd(zD(Zz(i,s),s.values),t):hp(n,e)};function BD(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?wt(n,e,t):Bb(n)(n,e)}const e8=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Tt.update(e,t),stop:()=>va(e),now:()=>fn.isProcessing?fn.timestamp:zn.now()}},FD=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)i+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},dp=2e4;function Fb(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<dp;)e+=t,i=n.next(e);return e>=dp?1/0:e}function t8(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(Fb(i),dp);return{type:"keyframes",ease:o=>i.next(s*o).value/e,duration:bi(s)}}const n8=5;function qD(n,e,t){const i=Math.max(e-n8,0);return ED(t-n(i),e-i)}const It={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},j0=.001;function i8({duration:n=It.duration,bounce:e=It.bounce,velocity:t=It.velocity,mass:i=It.mass}){let s,o,l=1-e;l=as(It.minDamping,It.maxDamping,l),n=as(It.minDuration,It.maxDuration,bi(n)),l<1?(s=f=>{const g=f*l,v=g*n,_=g-t,S=Bv(f,l),N=Math.exp(-v);return j0-_/S*N},o=f=>{const v=f*l*n,_=v*t+t,S=Math.pow(l,2)*Math.pow(f,2)*n,N=Math.exp(-v),A=Bv(Math.pow(f,2),l);return(-s(f)+j0>0?-1:1)*((_-S)*N)/A}):(s=f=>{const g=Math.exp(-f*n),v=(f-t)*n+1;return-j0+g*v},o=f=>{const g=Math.exp(-f*n),v=(t-f)*(n*n);return g*v});const u=5/n,d=s8(s,o,u);if(n=br(n),isNaN(d))return{stiffness:It.stiffness,damping:It.damping,duration:n};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:n}}}const r8=12;function s8(n,e,t){let i=t;for(let s=1;s<r8;s++)i=i-n(i)/e(i);return i}function Bv(n,e){return n*Math.sqrt(1-e*e)}const a8=["duration","bounce"],o8=["stiffness","damping","mass"];function oA(n,e){return e.some(t=>n[t]!==void 0)}function l8(n){let e={velocity:It.velocity,stiffness:It.stiffness,damping:It.damping,mass:It.mass,isResolvedFromDuration:!1,...n};if(!oA(n,o8)&&oA(n,a8))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,o=2*as(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:It.mass,stiffness:s,damping:o}}else{const t=i8(n);e={...e,...t,mass:It.mass},e.isResolvedFromDuration=!0}return e}function fp(n=It.visualDuration,e=It.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:f,mass:g,duration:v,velocity:_,isResolvedFromDuration:S}=l8({...t,velocity:-bi(t.velocity||0)}),N=_||0,A=f/(2*Math.sqrt(d*g)),C=l-o,P=bi(Math.sqrt(d/g)),U=Math.abs(C)<5;i||(i=U?It.restSpeed.granular:It.restSpeed.default),s||(s=U?It.restDelta.granular:It.restDelta.default);let M;if(A<1){const te=Bv(P,A);M=Z=>{const x=Math.exp(-A*P*Z);return l-x*((N+A*P*C)/te*Math.sin(te*Z)+C*Math.cos(te*Z))}}else if(A===1)M=te=>l-Math.exp(-P*te)*(C+(N+P*C)*te);else{const te=P*Math.sqrt(A*A-1);M=Z=>{const x=Math.exp(-A*P*Z),R=Math.min(te*Z,300);return l-x*((N+A*P*C)*Math.sinh(R)+te*C*Math.cosh(R))/te}}const $={calculatedDuration:S&&v||null,next:te=>{const Z=M(te);if(S)u.done=te>=v;else{let x=te===0?N:0;A<1&&(x=te===0?br(N):qD(M,te,Z));const R=Math.abs(x)<=i,V=Math.abs(l-Z)<=s;u.done=R&&V}return u.value=u.done?l:Z,u},toString:()=>{const te=Math.min(Fb($),dp),Z=FD(x=>$.next(te*x).value,te,30);return te+"ms "+Z},toTransition:()=>{}};return $}fp.applyToOptions=n=>{const e=t8(n,100,fp);return n.ease=e.ease,n.duration=br(e.duration),n.type="keyframes",n};function Fv({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:g}){const v=n[0],_={done:!1,value:v},S=R=>u!==void 0&&R<u||d!==void 0&&R>d,N=R=>u===void 0?d:d===void 0||Math.abs(u-R)<Math.abs(d-R)?u:d;let A=t*e;const C=v+A,P=l===void 0?C:l(C);P!==C&&(A=P-v);const U=R=>-A*Math.exp(-R/i),M=R=>P+U(R),$=R=>{const V=U(R),O=M(R);_.done=Math.abs(V)<=f,_.value=_.done?P:O};let te,Z;const x=R=>{S(_.value)&&(te=R,Z=fp({keyframes:[_.value,N(_.value)],velocity:qD(M,R,_.value),damping:s,stiffness:o,restDelta:f,restSpeed:g}))};return x(0),{calculatedDuration:null,next:R=>{let V=!1;return!Z&&te===void 0&&(V=!0,$(R),x(R)),te!==void 0&&R>=te?Z.next(R-te):(!V&&$(R),_)}}}function c8(n,e,t){const i=[],s=t||os.mix||BD,o=n.length-1;for(let l=0;l<o;l++){let u=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Ei:e;u=dd(d,u)}i.push(u)}return i}function u8(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const o=n.length;if(kb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=c8(e,i,s),d=u.length,f=g=>{if(l&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const _=qh(n[v],n[v+1],g);return u[v](_)};return t?g=>f(as(n[0],n[o-1],g)):f}function h8(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=qh(0,e,i);n.push(wt(t,1,s))}}function d8(n){const e=[0];return h8(e,n.length-1),e}function f8(n,e){return n.map(t=>t*e)}function m8(n,e){return n.map(()=>e||ND).splice(0,n.length-1)}function _h({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=xz(i)?i.map(nA):nA(i),o={done:!1,value:e[0]},l=f8(t&&t.length===e.length?t:d8(e),n),u=u8(l,e,{ease:Array.isArray(s)?s:m8(e,s)});return{calculatedDuration:n,next:d=>(o.value=u(d),o.done=d>=n,o)}}const p8=n=>n!==null;function qb(n,{repeat:e,repeatType:t="loop"},i,s=1){const o=n.filter(p8),u=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!u||i===void 0?o[u]:i}const g8={decay:Fv,inertia:Fv,tween:_h,keyframes:_h,spring:fp};function HD(n){typeof n.type=="string"&&(n.type=g8[n.type])}class Hb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const y8=n=>n/100;class Gb extends Hb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==zn.now()&&this.tick(zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;HD(e);const{type:t=_h,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:u}=e;const d=t||_h;d!==_h&&typeof u[0]!="number"&&(this.mixKeyframes=dd(y8,BD(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=Fb(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:v,repeatType:_,repeatDelay:S,type:N,onUpdate:A,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const P=this.currentTime-f*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?P<0:P>s;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let M=this.currentTime,$=i;if(v){const R=Math.min(this.currentTime,s)/u;let V=Math.floor(R),O=R%1;!O&&R>=1&&(O=1),O===1&&V--,V=Math.min(V,v+1),!!(V%2)&&(_==="reverse"?(O=1-O,S&&(O-=S/u)):_==="mirror"&&($=l)),M=as(0,1,O)*u}const te=U?{done:!1,value:g[0]}:$.next(M);o&&(te.value=o(te.value));let{done:Z}=te;!U&&d!==null&&(Z=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return x&&N!==Fv&&(te.value=qb(g,this.options,C,this.speed)),A&&A(te.value),x&&this.finish(),te}then(e,t){return this.finished.then(e,t)}get duration(){return bi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+bi(e)}get time(){return bi(this.currentTime)}set time(e){e=br(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(zn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=bi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=e8,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function v8(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const bo=n=>n*180/Math.PI,qv=n=>{const e=bo(Math.atan2(n[1],n[0]));return Hv(e)},_8={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:qv,rotateZ:qv,skewX:n=>bo(Math.atan(n[1])),skewY:n=>bo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Hv=n=>(n=n%360,n<0&&(n+=360),n),lA=qv,cA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),uA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),b8={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:cA,scaleY:uA,scale:n=>(cA(n)+uA(n))/2,rotateX:n=>Hv(bo(Math.atan2(n[6],n[5]))),rotateY:n=>Hv(bo(Math.atan2(-n[2],n[0]))),rotateZ:lA,rotate:lA,skewX:n=>bo(Math.atan(n[4])),skewY:n=>bo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Gv(n){return n.includes("scale")?1:0}function $v(n,e){if(!n||n==="none")return Gv(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=b8,s=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=_8,s=u}if(!s)return Gv(e);const o=i[e],l=s[1].split(",").map(E8);return typeof o=="function"?o(l):l[o]}const T8=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return $v(t,e)};function E8(n){return parseFloat(n.trim())}const Lc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jc=new Set(Lc),hA=n=>n===Oc||n===Ne,w8=new Set(["x","y","z"]),S8=Lc.filter(n=>!w8.has(n));function x8(n){const e=[];return S8.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Ao={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>$v(e,"x"),y:(n,{transform:e})=>$v(e,"y")};Ao.translateX=Ao.x;Ao.translateY=Ao.y;const Io=new Set;let Kv=!1,Yv=!1,Qv=!1;function GD(){if(Yv){const n=Array.from(Io).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=x8(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([o,l])=>{i.getValue(o)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Yv=!1,Kv=!1,Io.forEach(n=>n.complete(Qv)),Io.clear()}function $D(){Io.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Yv=!0)})}function A8(){Qv=!0,$D(),GD(),Qv=!1}class $b{constructor(e,t,i,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Io.add(this),Kv||(Kv=!0,Tt.read($D),Tt.resolveKeyframes(GD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const u=i.readValue(t,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}v8(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Io.delete(this)}cancel(){this.state==="scheduled"&&(Io.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const I8=n=>n.startsWith("--");function R8(n,e,t){I8(e)?n.style.setProperty(e,t):n.style[e]=t}const C8=Vb(()=>window.ScrollTimeline!==void 0),D8={};function N8(n,e){const t=Vb(n);return()=>D8[e]??t()}const KD=N8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ah=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,dA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ah([0,.65,.55,1]),circOut:ah([.55,0,1,.45]),backIn:ah([.31,.01,.66,-.59]),backOut:ah([.33,1.53,.69,.99])};function YD(n,e){if(n)return typeof n=="function"?KD()?FD(n,e):"ease-out":kD(n)?ah(n):Array.isArray(n)?n.map(t=>YD(t,e)||dA.easeOut):dA[n]}function k8(n,e,t,{delay:i=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const g={[e]:t};d&&(g.offset=d);const v=YD(u,s);Array.isArray(v)&&(g.easing=v);const _={delay:i,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),n.animate(g,_)}function QD(n){return typeof n=="function"&&"applyToOptions"in n}function V8({type:n,...e}){return QD(n)&&KD()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class P8 extends Hb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,kb(typeof e.type!="string");const f=V8(e);this.animation=k8(t,i,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=qb(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):R8(t,i,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return bi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+bi(e)}get time(){return bi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=br(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&C8()?(this.animation.timeline=e,Ei):t(this)}}const XD={anticipate:RD,backInOut:ID,circInOut:DD};function M8(n){return n in XD}function O8(n){typeof n.ease=="string"&&M8(n.ease)&&(n.ease=XD[n.ease])}const fA=10;class L8 extends P8{constructor(e){O8(e),HD(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new Gb({...l,autoplay:!1}),d=br(this.finishedTime??this.time);t.setWithVelocity(u.sample(d-fA).value,u.sample(d).value,fA),u.stop()}}const mA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(_a.test(n)||n==="0")&&!n.startsWith("url("));function j8(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function U8(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=mA(s,e),u=mA(o,e);return!l||!u?!1:j8(n)||(t==="spring"||QD(t))&&i}function Xv(n){n.duration=0,n.type="keyframes"}const z8=new Set(["opacity","clipPath","filter","transform"]),B8=Vb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function F8(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:o,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return B8()&&t&&z8.has(t)&&(t!=="transform"||!f)&&!d&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}const q8=40;class H8 extends Hb{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:g,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=zn.now();const _={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:o,repeatType:l,name:d,motionValue:f,element:g,...v},S=g?.KeyframeResolver||$b;this.keyframeResolver=new S(u,(N,A,C)=>this.onKeyframesResolved(N,A,_,!C),d,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:g}=i;this.resolvedAt=zn.now(),U8(e,o,l,u)||((os.instantAnimations||!d)&&g?.(qb(e,i,t)),e[0]=e[e.length-1],Xv(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>q8?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},S=!f&&F8(_)?new L8({..._,element:_.motionValue.owner.current}):new Gb(_);S.finished.then(()=>this.notifyFinished()).catch(Ei),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),A8()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const G8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $8(n){const e=G8.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function WD(n,e,t=1){const[i,s]=$8(n);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return _D(l)?parseFloat(l):l}return jb(s)?WD(s,e,t+1):s}function Kb(n,e){return n?.[e]??n?.default??n}const ZD=new Set(["width","height","top","left","right","bottom",...Lc]),K8={test:n=>n==="auto",parse:n=>n},JD=n=>e=>e.test(n),eN=[Oc,Ne,Tr,Xs,jz,Lz,K8],pA=n=>eN.find(JD(n));function Y8(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||TD(n):!0}const Q8=new Set(["brightness","contrast","saturate","opacity"]);function X8(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Ub)||[];if(!i)return n;const s=t.replace(i,"");let o=Q8.has(e)?1:0;return i!==t&&(o*=100),e+"("+o+s+")"}const W8=/\b([a-z-]*)\(.*?\)/gu,Wv={..._a,getAnimatableNone:n=>{const e=n.match(W8);return e?e.map(X8).join(" "):n}},gA={...Oc,transform:Math.round},Z8={rotate:Xs,rotateX:Xs,rotateY:Xs,rotateZ:Xs,scale:rm,scaleX:rm,scaleY:rm,scaleZ:rm,skew:Xs,skewX:Xs,skewY:Xs,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:Hh,originX:iA,originY:iA,originZ:Ne},Yb={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,radius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,...Z8,zIndex:gA,fillOpacity:Hh,strokeOpacity:Hh,numOctaves:gA},J8={...Yb,color:Kt,backgroundColor:Kt,outlineColor:Kt,fill:Kt,stroke:Kt,borderColor:Kt,borderTopColor:Kt,borderRightColor:Kt,borderBottomColor:Kt,borderLeftColor:Kt,filter:Wv,WebkitFilter:Wv},tN=n=>J8[n];function nN(n,e){let t=tN(n);return t!==Wv&&(t=_a),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const e7=new Set(["auto","none","0"]);function t7(n,e,t){let i=0,s;for(;i<n.length&&!s;){const o=n[i];typeof o=="string"&&!e7.has(o)&&Gh(o).values.length&&(s=n[i]),i++}if(s&&t)for(const o of e)n[o]=nN(t,s)}class n7 extends $b{constructor(e,t,i,s,o){super(e,t,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),jb(f))){const g=WD(f,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!ZD.has(i)||e.length!==2)return;const[s,o]=e,l=pA(s),u=pA(o);if(l!==u)if(hA(l)&&hA(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else Ao[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||Y8(e[s]))&&i.push(s);i.length&&t7(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ao[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=Ao[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function i7(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=t?.[n]??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const iN=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function rN(n){return bD(n)&&"offsetHeight"in n}const yA=30,r7=n=>!isNaN(parseFloat(n));class s7{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=zn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=zn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=r7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Pb);const i=this.events[e].add(t);return e==="change"?()=>{i(),Tt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>yA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,yA);return ED(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sc(n,e){return new s7(n,e)}const{schedule:Qb}=VD(queueMicrotask,!1),Oi={x:!1,y:!1};function sN(){return Oi.x||Oi.y}function a7(n){return n==="x"||n==="y"?Oi[n]?null:(Oi[n]=!0,()=>{Oi[n]=!1}):Oi.x||Oi.y?null:(Oi.x=Oi.y=!0,()=>{Oi.x=Oi.y=!1})}function aN(n,e){const t=i7(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function vA(n){return!(n.pointerType==="touch"||sN())}function o7(n,e,t={}){const[i,s,o]=aN(n,t),l=u=>{if(!vA(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const g=v=>{vA(v)&&(f(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return i.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}const oN=(n,e)=>e?n===e?!0:oN(n,e.parentElement):!1,Xb=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,l7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function c7(n){return l7.has(n.tagName)||n.tabIndex!==-1}const Rm=new WeakSet;function _A(n){return e=>{e.key==="Enter"&&n(e)}}function U0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const u7=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=_A(()=>{if(Rm.has(t))return;U0(t,"down");const s=_A(()=>{U0(t,"up")}),o=()=>U0(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function bA(n){return Xb(n)&&!sN()}function h7(n,e,t={}){const[i,s,o]=aN(n,t),l=u=>{const d=u.currentTarget;if(!bA(u))return;Rm.add(d);const f=e(d,u),g=(S,N)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),Rm.has(d)&&Rm.delete(d),bA(S)&&typeof f=="function"&&f(S,{success:N})},v=S=>{g(S,d===window||d===document||t.useGlobalTarget||oN(d,S.target))},_=S=>{g(S,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return i.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),rN(u)&&(u.addEventListener("focus",f=>u7(f,s)),!c7(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function lN(n){return bD(n)&&"ownerSVGElement"in n}function d7(n){return lN(n)&&n.tagName==="svg"}const En=n=>!!(n&&n.getVelocity),f7=[...eN,Kt,_a],m7=n=>f7.find(JD(n)),Wb=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function TA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function p7(...n){return e=>{let t=!1;const i=n.map(s=>{const o=TA(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():TA(n[s],null)}}}}function g7(...n){return j.useCallback(p7(...n),n)}class y7 extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=rN(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function v7({children:n,isPresent:e,anchorX:t,root:i}){const s=j.useId(),o=j.useRef(null),l=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=j.useContext(Wb),d=g7(o,n?.ref);return j.useInsertionEffect(()=>{const{width:f,height:g,top:v,left:_,right:S}=l.current;if(e||!o.current||!f||!g)return;const N=t==="left"?`left: ${_}`:`right: ${S}`;o.current.dataset.motionPopId=s;const A=document.createElement("style");u&&(A.nonce=u);const C=i??document.head;return C.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${N}px !important;
            top: ${v}px !important;
          }
        `),()=>{C.contains(A)&&C.removeChild(A)}},[e]),T.jsx(y7,{isPresent:e,childRef:o,sizeRef:l,children:j.cloneElement(n,{ref:d})})}const _7=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u,root:d})=>{const f=tg(b7),g=j.useId();let v=!0,_=j.useMemo(()=>(v=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:S=>{f.set(S,!0);for(const N of f.values())if(!N)return;i&&i()},register:S=>(f.set(S,!1),()=>f.delete(S))}),[t,f,i]);return o&&v&&(_={..._}),j.useMemo(()=>{f.forEach((S,N)=>f.set(N,!1))},[t]),j.useEffect(()=>{!t&&!f.size&&i&&i()},[t]),l==="popLayout"&&(n=T.jsx(v7,{isPresent:t,anchorX:u,root:d,children:n})),T.jsx(ng.Provider,{value:_,children:n})};function b7(){return new Map}function cN(n=!0){const e=j.useContext(ng);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,o=j.useId();j.useEffect(()=>{if(n)return s(o)},[n]);const l=j.useCallback(()=>n&&i&&i(o),[o,i,n]);return!t&&i?[!1,l]:[!0]}const sm=n=>n.key||"";function EA(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const Zb=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left",root:d})=>{const[f,g]=cN(l),v=j.useMemo(()=>EA(n),[n]),_=l&&!f?[]:v.map(sm),S=j.useRef(!0),N=j.useRef(v),A=tg(()=>new Map),[C,P]=j.useState(v),[U,M]=j.useState(v);Cb(()=>{S.current=!1,N.current=v;for(let Z=0;Z<U.length;Z++){const x=sm(U[Z]);_.includes(x)?A.delete(x):A.get(x)!==!0&&A.set(x,!1)}},[U,_.length,_.join("-")]);const $=[];if(v!==C){let Z=[...v];for(let x=0;x<U.length;x++){const R=U[x],V=sm(R);_.includes(V)||(Z.splice(x,0,R),$.push(R))}return o==="wait"&&$.length&&(Z=$),M(EA(Z)),P(v),null}const{forceRender:te}=j.useContext(Ib);return T.jsx(T.Fragment,{children:U.map(Z=>{const x=sm(Z),R=l&&!f?!1:v===U||_.includes(x),V=()=>{if(A.has(x))A.set(x,!0);else return;let O=!0;A.forEach(k=>{k||(O=!1)}),O&&(te?.(),M(N.current),l&&g?.(),i&&i())};return T.jsx(_7,{isPresent:R,initial:!S.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:R?void 0:V,anchorX:u,children:Z},x)})})},uN=j.createContext({strict:!1}),wA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xc={};for(const n in wA)xc[n]={isEnabled:e=>wA[n].some(t=>!!e[t])};function T7(n){for(const e in n)xc[e]={...xc[e],...n[e]}}const E7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||E7.has(n)}let hN=n=>!mp(n);function w7(n){typeof n=="function"&&(hN=e=>e.startsWith("on")?!mp(e):n(e))}try{w7(require("@emotion/is-prop-valid").default)}catch{}function S7(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(hN(s)||t===!0&&mp(s)||!e&&!mp(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const ig=j.createContext({});function rg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function $h(n){return typeof n=="string"||Array.isArray(n)}const Jb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eT=["initial",...Jb];function sg(n){return rg(n.animate)||eT.some(e=>$h(n[e]))}function dN(n){return!!(sg(n)||n.variants)}function x7(n,e){if(sg(n)){const{initial:t,animate:i}=n;return{initial:t===!1||$h(t)?t:void 0,animate:$h(i)?i:void 0}}return n.inherit!==!1?e:{}}function A7(n){const{initial:e,animate:t}=x7(n,j.useContext(ig));return j.useMemo(()=>({initial:e,animate:t}),[SA(e),SA(t)])}function SA(n){return Array.isArray(n)?n.join(" "):n}const Kh={};function I7(n){for(const e in n)Kh[e]=n[e],Lb(e)&&(Kh[e].isCSSVariable=!0)}function fN(n,{layout:e,layoutId:t}){return jc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Kh[n]||n==="opacity")}const R7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},C7=Lc.length;function D7(n,e,t){let i="",s=!0;for(let o=0;o<C7;o++){const l=Lc[o],u=n[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||t){const f=iN(u,Yb[l]);if(!d){s=!1;const g=R7[l]||l;i+=`${g}(${f}) `}t&&(e[l]=f)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function tT(n,e,t){const{style:i,vars:s,transformOrigin:o}=n;let l=!1,u=!1;for(const d in e){const f=e[d];if(jc.has(d)){l=!0;continue}else if(Lb(d)){s[d]=f;continue}else{const g=iN(f,Yb[d]);d.startsWith("origin")?(u=!0,o[d]=g):i[d]=g}}if(e.transform||(l||t?i.transform=D7(e,n.transform,t):i.transform&&(i.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:g=0}=o;i.transformOrigin=`${d} ${f} ${g}`}}const nT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mN(n,e,t){for(const i in e)!En(e[i])&&!fN(i,t)&&(n[i]=e[i])}function N7({transformTemplate:n},e){return j.useMemo(()=>{const t=nT();return tT(t,e,n),Object.assign({},t.vars,t.style)},[e])}function k7(n,e){const t=n.style||{},i={};return mN(i,t,n),Object.assign(i,N7(n,e)),i}function V7(n,e){const t={},i=k7(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const P7={offset:"stroke-dashoffset",array:"stroke-dasharray"},M7={offset:"strokeDashoffset",array:"strokeDasharray"};function O7(n,e,t=1,i=0,s=!0){n.pathLength=1;const o=s?P7:M7;n[o.offset]=Ne.transform(-i);const l=Ne.transform(e),u=Ne.transform(t);n[o.array]=`${l} ${u}`}function pN(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},d,f,g){if(tT(n,u,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_}=n;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),s!==void 0&&O7(v,s,o,l,!1)}const gN=()=>({...nT(),attrs:{}}),yN=n=>typeof n=="string"&&n.toLowerCase()==="svg";function L7(n,e,t,i){const s=j.useMemo(()=>{const o=gN();return pN(o,e,yN(i),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};mN(o,n.style,n),s.style={...o,...s.style}}return s}const j7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function iT(n){return typeof n!="string"||n.includes("-")?!1:!!(j7.indexOf(n)>-1||/[A-Z]/u.test(n))}function U7(n,e,t,{latestValues:i},s,o=!1){const u=(iT(n)?L7:V7)(e,i,s,n),d=S7(e,typeof n=="string",o),f=n!==j.Fragment?{...d,...u,ref:t}:{},{children:g}=e,v=j.useMemo(()=>En(g)?g.get():g,[g]);return j.createElement(n,{...f,children:v})}function xA(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function rT(n,e,t,i){if(typeof e=="function"){const[s,o]=xA(i);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=xA(i);e=e(t!==void 0?t:n.custom,s,o)}return e}function Cm(n){return En(n)?n.get():n}function z7({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:B7(t,i,s,n),renderState:e()}}function B7(n,e,t,i){const s={},o=i(n,{});for(const _ in o)s[_]=Cm(o[_]);let{initial:l,animate:u}=n;const d=sg(n),f=dN(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!rg(v)){const _=Array.isArray(v)?v:[v];for(let S=0;S<_.length;S++){const N=rT(n,_[S]);if(N){const{transitionEnd:A,transition:C,...P}=N;for(const U in P){let M=P[U];if(Array.isArray(M)){const $=g?M.length-1:0;M=M[$]}M!==null&&(s[U]=M)}for(const U in A)s[U]=A[U]}}}return s}const vN=n=>(e,t)=>{const i=j.useContext(ig),s=j.useContext(ng),o=()=>z7(n,e,i,s);return t?o():tg(o)};function sT(n,e,t){const{style:i}=n,s={};for(const o in i)(En(i[o])||e.style&&En(e.style[o])||fN(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const F7=vN({scrapeMotionValuesFromProps:sT,createRenderState:nT});function _N(n,e,t){const i=sT(n,e,t);for(const s in n)if(En(n[s])||En(e[s])){const o=Lc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=n[s]}return i}const q7=vN({scrapeMotionValuesFromProps:_N,createRenderState:gN}),H7=Symbol.for("motionComponentSymbol");function Ql(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function G7(n,e,t){return j.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Ql(t)&&(t.current=i))},[e])}const aT=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$7="framerAppearId",bN="data-"+aT($7),TN=j.createContext({});function K7(n,e,t,i,s){const{visualElement:o}=j.useContext(ig),l=j.useContext(uN),u=j.useContext(ng),d=j.useContext(Wb).reducedMotion,f=j.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,v=j.useContext(TN);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&Y7(f.current,t,s,v);const _=j.useRef(!1);j.useInsertionEffect(()=>{g&&_.current&&g.update(t,u)});const S=t[bN],N=j.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return Cb(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),N.current&&g.animationState&&g.animationState.animateChanges())}),j.useEffect(()=>{g&&(!N.current&&g.animationState&&g.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),N.current=!1),g.enteringChildren=void 0)}),g}function Y7(n,e,t,i){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:EN(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&Ql(u),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:d,layoutRoot:f})}function EN(n){if(n)return n.options.allowProjection!==!1?n.projection:EN(n.parent)}function z0(n,{forwardMotionProps:e=!1}={},t,i){t&&T7(t);const s=iT(n)?q7:F7;function o(u,d){let f;const g={...j.useContext(Wb),...u,layoutId:Q7(u)},{isStatic:v}=g,_=A7(u),S=s(u,v);if(!v&&Rb){X7();const N=W7(g);f=N.MeasureLayout,_.visualElement=K7(n,S,g,i,N.ProjectionNode)}return T.jsxs(ig.Provider,{value:_,children:[f&&_.visualElement?T.jsx(f,{visualElement:_.visualElement,...g}):null,U7(n,u,G7(S,_.visualElement,d),S,v,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=j.forwardRef(o);return l[H7]=n,l}function Q7({layoutId:n}){const e=j.useContext(Ib).id;return e&&n!==void 0?e+"-"+n:n}function X7(n,e){j.useContext(uN).strict}function W7(n){const{drag:e,layout:t}=xc;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Z7(n,e){if(typeof Proxy>"u")return z0;const t=new Map,i=(o,l)=>z0(o,l,n,e),s=(o,l)=>i(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?i:(t.has(l)||t.set(l,z0(l,void 0,n,e)),t.get(l))})}function wN({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function J7({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function eB(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function B0(n){return n===void 0||n===1}function Zv({scale:n,scaleX:e,scaleY:t}){return!B0(n)||!B0(e)||!B0(t)}function fo(n){return Zv(n)||SN(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function SN(n){return AA(n.x)||AA(n.y)}function AA(n){return n&&n!=="0%"}function pp(n,e,t){const i=n-t,s=e*i;return t+s}function IA(n,e,t,i,s){return s!==void 0&&(n=pp(n,s,i)),pp(n,t,i)+e}function Jv(n,e=0,t=1,i,s){n.min=IA(n.min,e,t,i,s),n.max=IA(n.max,e,t,i,s)}function xN(n,{x:e,y:t}){Jv(n.x,e.translate,e.scale,e.originPoint),Jv(n.y,t.translate,t.scale,t.originPoint)}const RA=.999999999999,CA=1.0000000000001;function tB(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let u=0;u<s;u++){o=t[u],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Wl(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,xN(n,l)),i&&fo(o.latestValues)&&Wl(n,o.latestValues))}e.x<CA&&e.x>RA&&(e.x=1),e.y<CA&&e.y>RA&&(e.y=1)}function Xl(n,e){n.min=n.min+e,n.max=n.max+e}function DA(n,e,t,i,s=.5){const o=wt(n.min,n.max,s);Jv(n,e,t,o,i)}function Wl(n,e){DA(n.x,e.x,e.scaleX,e.scale,e.originX),DA(n.y,e.y,e.scaleY,e.scale,e.originY)}function AN(n,e){return wN(eB(n.getBoundingClientRect(),e))}function nB(n,e,t){const i=AN(n,t),{scroll:s}=e;return s&&(Xl(i.x,s.offset.x),Xl(i.y,s.offset.y)),i}const NA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zl=()=>({x:NA(),y:NA()}),kA=()=>({min:0,max:0}),Vt=()=>({x:kA(),y:kA()}),e_={current:null},IN={current:!1};function iB(){if(IN.current=!0,!!Rb)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>e_.current=n.matches;n.addEventListener("change",e),e()}else e_.current=!1}const rB=new WeakMap;function sB(n,e,t){for(const i in e){const s=e[i],o=t[i];if(En(s))n.addValue(i,s);else if(En(o))n.addValue(i,Sc(s,{owner:n}));else if(o!==s)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,Sc(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const VA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class aB{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$b,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=zn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Tt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=sg(t),this.isVariantNode=dN(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const S=v[_];d[_]!==void 0&&En(S)&&S.set(d[_])}}mount(e){this.current=e,rB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),IN.current||iB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:e_.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),va(this.notifyUpdate),va(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=jc.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Tt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xc){const t=xc[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<VA.length;i++){const s=VA[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=sB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Sc(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(_D(i)||TD(i))?i=parseFloat(i):!m7(i)&&_a.test(t)&&(i=nN(e,t)),this.setBaseTarget(e,En(i)?i.get():i)),En(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const o=rT(this.props,t,this.presenceContext?.custom);o&&(i=o[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!En(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Pb),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Qb.render(this.render)}}class RN extends aB{constructor(){super(...arguments),this.KeyframeResolver=n7}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;En(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function CN(n,{style:e,vars:t},i,s){const o=n.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,i);for(l in t)o.setProperty(l,t[l])}function oB(n){return window.getComputedStyle(n)}class lB extends RN{constructor(){super(...arguments),this.type="html",this.renderInstance=CN}readValueFromInstance(e,t){if(jc.has(t))return this.projection?.isProjecting?Gv(t):T8(e,t);{const i=oB(e),s=(Lb(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return AN(e,t)}build(e,t,i){tT(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return sT(e,t,i)}}const DN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cB(n,e,t,i){CN(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(DN.has(s)?s:aT(s),e.attrs[s])}class uB extends RN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Vt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(jc.has(t)){const i=tN(t);return i&&i.default||0}return t=DN.has(t)?t:aT(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return _N(e,t,i)}build(e,t,i){pN(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){cB(e,t,i,s)}mount(e){this.isSVGTag=yN(e.tagName),super.mount(e)}}const hB=(n,e)=>iT(n)?new uB(e):new lB(e,{allowProjection:n!==j.Fragment});function ic(n,e,t){const i=n.getProps();return rT(i,e,t!==void 0?t:i.custom,n)}const t_=n=>Array.isArray(n);function dB(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Sc(t))}function fB(n){return t_(n)?n[n.length-1]||0:n}function oT(n,e){const t=ic(n,e);let{transitionEnd:i={},transition:s={},...o}=t||{};o={...o,...i};for(const l in o){const u=fB(o[l]);dB(n,l,u)}}function mB(n){return!!(En(n)&&n.add)}function n_(n,e){const t=n.getValue("willChange");if(mB(t))return t.add(e);if(!t&&os.WillChange){const i=new os.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function NN(n){return n.props[bN]}const pB=n=>n!==null;function gB(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(pB),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}const yB={type:"spring",stiffness:500,damping:25,restSpeed:10},vB=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),_B={type:"keyframes",duration:.8},bB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TB=(n,{keyframes:e})=>e.length>2?_B:jc.has(n)?n.startsWith("scale")?vB(e[1]):yB:bB;function EB({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const lT=(n,e,t,i={},s,o)=>l=>{const u=Kb(i,n)||{},d=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-br(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:s};EB(u)||Object.assign(g,TB(n,g)),g.duration&&(g.duration=br(g.duration)),g.repeatDelay&&(g.repeatDelay=br(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Xv(g),g.delay===0&&(v=!0)),(os.instantAnimations||os.skipAnimations)&&(v=!0,Xv(g),g.delay=0),g.allowFlatten=!u.type&&!u.ease,v&&!o&&e.get()!==void 0){const _=gB(g.keyframes,u);if(_!==void 0){Tt.update(()=>{g.onUpdate(_),g.onComplete()});return}}return u.isSync?new Gb(g):new H8(g)};function wB({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function kN(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...u}=e;i&&(o=i);const d=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const g in u){const v=n.getValue(g,n.latestValues[g]??null),_=u[g];if(_===void 0||f&&wB(f,g))continue;const S={delay:t,...Kb(o||{},g)},N=v.get();if(N!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===N&&!S.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const P=NN(n);if(P){const U=window.MotionHandoffAnimation(P,g,Tt);U!==null&&(S.startTime=U,A=!0)}}n_(n,g),v.start(lT(g,v,_,n.shouldReduceMotion&&ZD.has(g)?{type:!1}:S,n,A));const C=v.animation;C&&d.push(C)}return l&&Promise.all(d).then(()=>{Tt.update(()=>{l&&oT(n,l)})}),d}function VN(n,e,t,i=0,s=1){const o=Array.from(n).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),l=n.size,u=(l-1)*i;return typeof t=="function"?t(o,l):s===1?o*i:u-o*i}function i_(n,e,t={}){const i=ic(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(kN(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:v}=s;return SB(n,e,d,f,g,v,t)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,f]=u==="beforeChildren"?[o,l]:[l,o];return d().then(()=>f())}else return Promise.all([o(),l(t.delay)])}function SB(n,e,t=0,i=0,s=0,o=1,l){const u=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),u.push(i_(d,e,{...l,delay:t+(typeof i=="function"?0:i)+VN(n.variantChildren,d,i,s,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(u)}function PN(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(o=>i_(n,o,t));i=Promise.all(s)}else if(typeof e=="string")i=i_(n,e,t);else{const s=typeof e=="function"?ic(n,e,t.custom):e;i=Promise.all(kN(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function MN(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const xB=eT.length;function ON(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?ON(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<xB;t++){const i=eT[t],s=n.props[i];($h(s)||s===!1)&&(e[i]=s)}return e}const AB=[...Jb].reverse(),IB=Jb.length;function RB(n){return e=>Promise.all(e.map(({animation:t,options:i})=>PN(n,t,i)))}function CB(n){let e=RB(n),t=PA(),i=!0;const s=d=>(f,g)=>{const v=ic(n,g,d==="exit"?n.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:S,...N}=v;f={...f,...N,...S}}return f};function o(d){e=d(n)}function l(d){const{props:f}=n,g=ON(n.parent)||{},v=[],_=new Set;let S={},N=1/0;for(let C=0;C<IB;C++){const P=AB[C],U=t[P],M=f[P]!==void 0?f[P]:g[P],$=$h(M),te=P===d?U.isActive:null;te===!1&&(N=C);let Z=M===g[P]&&M!==f[P]&&$;if(Z&&i&&n.manuallyAnimateOnMount&&(Z=!1),U.protectedKeys={...S},!U.isActive&&te===null||!M&&!U.prevProp||rg(M)||typeof M=="boolean")continue;const x=DB(U.prevProp,M);let R=x||P===d&&U.isActive&&!Z&&$||C>N&&$,V=!1;const O=Array.isArray(M)?M:[M];let k=O.reduce(s(P),{});te===!1&&(k={});const{prevResolvedValues:B={}}=U,L={...B,...k},Ce=se=>{R=!0,_.has(se)&&(V=!0,_.delete(se)),U.needsAnimating[se]=!0;const he=n.getValue(se);he&&(he.liveStyle=!1)};for(const se in L){const he=k[se],Te=B[se];if(S.hasOwnProperty(se))continue;let le=!1;t_(he)&&t_(Te)?le=!MN(he,Te):le=he!==Te,le?he!=null?Ce(se):_.add(se):he!==void 0&&_.has(se)?Ce(se):U.protectedKeys[se]=!0}U.prevProp=M,U.prevResolvedValues=k,U.isActive&&(S={...S,...k}),i&&n.blockInitialAnimation&&(R=!1);const de=Z&&x;R&&(!de||V)&&v.push(...O.map(se=>{const he={type:P};if(typeof se=="string"&&i&&!de&&n.manuallyAnimateOnMount&&n.parent){const{parent:Te}=n,le=ic(Te,se);if(Te.enteringChildren&&le){const{delayChildren:z}=le.transition||{};he.delay=VN(Te.enteringChildren,n,z)}}return{animation:se,options:he}}))}if(_.size){const C={};if(typeof f.initial!="boolean"){const P=ic(n,Array.isArray(f.initial)?f.initial[0]:f.initial);P&&P.transition&&(C.transition=P.transition)}_.forEach(P=>{const U=n.getBaseTarget(P),M=n.getValue(P);M&&(M.liveStyle=!0),C[P]=U??null}),v.push({animation:C})}let A=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(v):Promise.resolve()}function u(d,f){if(t[d].isActive===f)return Promise.resolve();n.variantChildren?.forEach(v=>v.animationState?.setActive(d,f)),t[d].isActive=f;const g=l(d);for(const v in t)t[v].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>t,reset:()=>{t=PA()}}}function DB(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!MN(e,n):!1}function oo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function PA(){return{animate:oo(!0),whileInView:oo(),whileHover:oo(),whileTap:oo(),whileDrag:oo(),whileFocus:oo(),exit:oo()}}class Ra{constructor(e){this.isMounted=!1,this.node=e}update(){}}class NB extends Ra{constructor(e){super(e),e.animationState||(e.animationState=CB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();rg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let kB=0;class VB extends Ra{constructor(){super(...arguments),this.id=kB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const PB={animation:{Feature:NB},exit:{Feature:VB}};function Yh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function pd(n){return{point:{x:n.pageX,y:n.pageY}}}const MB=n=>e=>Xb(e)&&n(e,pd(e));function bh(n,e,t,i){return Yh(n,e,MB(t),i)}const LN=1e-4,OB=1-LN,LB=1+LN,jN=.01,jB=0-jN,UB=0+jN;function Rn(n){return n.max-n.min}function zB(n,e,t){return Math.abs(n-e)<=t}function MA(n,e,t,i=.5){n.origin=i,n.originPoint=wt(e.min,e.max,n.origin),n.scale=Rn(t)/Rn(e),n.translate=wt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=OB&&n.scale<=LB||isNaN(n.scale))&&(n.scale=1),(n.translate>=jB&&n.translate<=UB||isNaN(n.translate))&&(n.translate=0)}function Th(n,e,t,i){MA(n.x,e.x,t.x,i?i.originX:void 0),MA(n.y,e.y,t.y,i?i.originY:void 0)}function OA(n,e,t){n.min=t.min+e.min,n.max=n.min+Rn(e)}function BB(n,e,t){OA(n.x,e.x,t.x),OA(n.y,e.y,t.y)}function LA(n,e,t){n.min=e.min-t.min,n.max=n.min+Rn(e)}function Eh(n,e,t){LA(n.x,e.x,t.x),LA(n.y,e.y,t.y)}function gi(n){return[n("x"),n("y")]}const UN=({current:n})=>n?n.ownerDocument.defaultView:null,jA=(n,e)=>Math.abs(n-e);function FB(n,e){const t=jA(n.x,e.x),i=jA(n.y,e.y);return Math.sqrt(t**2+i**2)}class zN{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=q0(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,N=FB(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!N)return;const{point:A}=_,{timestamp:C}=fn;this.history.push({...A,timestamp:C});const{onStart:P,onMove:U}=this.handlers;S||(P&&P(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,_)},this.handlePointerMove=(_,S)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=F0(S,this.transformPagePoint),Tt.update(this.updatePoint,!0)},this.handlePointerUp=(_,S)=>{this.end();const{onEnd:N,onSessionEnd:A,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=q0(_.type==="pointercancel"?this.lastMoveEventInfo:F0(S,this.transformPagePoint),this.history);this.startEvent&&N&&N(_,P),A&&A(_,P)},!Xb(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=s||window;const u=pd(e),d=F0(u,this.transformPagePoint),{point:f}=d,{timestamp:g}=fn;this.history=[{...f,timestamp:g}];const{onSessionStart:v}=t;v&&v(e,q0(d,this.history)),this.removeListeners=dd(bh(this.contextWindow,"pointermove",this.handlePointerMove),bh(this.contextWindow,"pointerup",this.handlePointerUp),bh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),va(this.updatePoint)}}function F0(n,e){return e?{point:e(n.point)}:n}function UA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function q0({point:n},e){return{point:n,delta:UA(n,BN(e)),offset:UA(n,qB(e)),velocity:HB(e,.1)}}function qB(n){return n[0]}function BN(n){return n[n.length-1]}function HB(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=BN(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>br(e)));)t--;if(!i)return{x:0,y:0};const o=bi(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function GB(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?wt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?wt(t,n,i.max):Math.min(n,t)),n}function zA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function $B(n,{top:e,left:t,bottom:i,right:s}){return{x:zA(n.x,t,s),y:zA(n.y,e,i)}}function BA(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function KB(n,e){return{x:BA(n.x,e.x),y:BA(n.y,e.y)}}function YB(n,e){let t=.5;const i=Rn(n),s=Rn(e);return s>i?t=qh(e.min,e.max-i,n.min):i>s&&(t=qh(n.min,n.max-s,e.min)),as(0,1,t)}function QB(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const r_=.35;function XB(n=r_){return n===!1?n=0:n===!0&&(n=r_),{x:FA(n,"left","right"),y:FA(n,"top","bottom")}}function FA(n,e,t){return{min:qA(n,e),max:qA(n,t)}}function qA(n,e){return typeof n=="number"?n:n[e]||0}const WB=new WeakMap;class ZB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(pd(v).point)},l=(v,_)=>{const{drag:S,dragPropagation:N,onDragStart:A}=this.getProps();if(S&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=a7(S),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gi(P=>{let U=this.getAxisMotionValue(P).get()||0;if(Tr.test(U)){const{projection:M}=this.visualElement;if(M&&M.layout){const $=M.layout.layoutBox[P];$&&(U=Rn($)*(parseFloat(U)/100))}}this.originPoint[P]=U}),A&&Tt.postRender(()=>A(v,_)),n_(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},u=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:S,dragDirectionLock:N,onDirectionLock:A,onDrag:C}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:P}=_;if(N&&this.currentDirection===null){this.currentDirection=JB(P),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",_.point,P),this.updateAxis("y",_.point,P),this.visualElement.render(),C&&C(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>gi(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new zN(e,{onSessionStart:o,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:UN(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&Tt.postRender(()=>u(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!am(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=GB(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Ql(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=$B(i.layoutBox,e):this.constraints=!1,this.elastic=XB(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&gi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=QB(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ql(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=nB(i,s.root,this.visualElement.getTransformPagePoint());let l=KB(s.layout.layoutBox,o);if(t){const u=t(J7(l));this.hasMutatedConstraints=!!u,u&&(l=wN(u))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=gi(g=>{if(!am(g,t,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const _=s?200:1e6,S=s?40:1e7,N={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,N)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return n_(this.visualElement,e),i.start(lT(e,i,0,t,this.visualElement,!1))}stopAnimation(){gi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){gi(t=>{const{drag:i}=this.getProps();if(!am(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[t];o.set(e[t]-wt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Ql(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};gi(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=YB({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),gi(l=>{if(!am(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(wt(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;WB.set(this.visualElement,this);const e=this.visualElement.current,t=bh(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Ql(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Tt.read(i);const l=Yh(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(gi(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=r_,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function am(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function JB(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class eF extends Ra{constructor(e){super(e),this.removeGroupControls=Ei,this.removeListeners=Ei,this.controls=new ZB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ei}unmount(){this.removeGroupControls(),this.removeListeners()}}const HA=n=>(e,t)=>{n&&Tt.postRender(()=>n(e,t))};class tF extends Ra{constructor(){super(...arguments),this.removePointerDownListener=Ei}onPointerDown(e){this.session=new zN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:UN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:HA(e),onStart:HA(t),onMove:i,onEnd:(o,l)=>{delete this.session,s&&Tt.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=bh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Dm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Zu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ne.test(n))n=parseFloat(n);else return n;const t=GA(n,e.target.x),i=GA(n,e.target.y);return`${t}% ${i}%`}},nF={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=_a.parse(n);if(s.length>5)return i;const o=_a.createTransformer(n),l=typeof s[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=u,s[1+l]/=d;const f=wt(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),o(s)}};let H0=!1;class iF extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=e;I7(rF),o&&(t.group&&t.group.add(o),i&&i.register&&s&&i.register(o),H0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Dm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:o}=this.props,{projection:l}=i;return l&&(l.isPresent=o,H0=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Tt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Qb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;H0=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FN(n){const[e,t]=cN(),i=j.useContext(Ib);return T.jsx(iF,{...n,layoutGroup:i,switchLayoutGroup:j.useContext(TN),isPresent:e,safeToRemove:t})}const rF={borderRadius:{...Zu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zu,borderTopRightRadius:Zu,borderBottomLeftRadius:Zu,borderBottomRightRadius:Zu,boxShadow:nF};function sF(n,e,t){const i=En(n)?n:Sc(n);return i.start(lT("",i,e,t)),i.animation}const aF=(n,e)=>n.depth-e.depth;class oF{constructor(){this.children=[],this.isDirty=!1}add(e){Db(this.children,e),this.isDirty=!0}remove(e){Nb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(aF),this.isDirty=!1,this.children.forEach(e)}}function lF(n,e){const t=zn.now(),i=({timestamp:s})=>{const o=s-t;o>=e&&(va(i),n(o-e))};return Tt.setup(i,!0),()=>va(i)}const qN=["TopLeft","TopRight","BottomLeft","BottomRight"],cF=qN.length,$A=n=>typeof n=="string"?parseFloat(n):n,KA=n=>typeof n=="number"||Ne.test(n);function uF(n,e,t,i,s,o){s?(n.opacity=wt(0,t.opacity??1,hF(i)),n.opacityExit=wt(e.opacity??1,0,dF(i))):o&&(n.opacity=wt(e.opacity??1,t.opacity??1,i));for(let l=0;l<cF;l++){const u=`border${qN[l]}Radius`;let d=YA(e,u),f=YA(t,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||KA(d)===KA(f)?(n[u]=Math.max(wt($A(d),$A(f),i),0),(Tr.test(f)||Tr.test(d))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=wt(e.rotate||0,t.rotate||0,i))}function YA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const hF=HN(0,.5,CD),dF=HN(.5,.95,Ei);function HN(n,e,t){return i=>i<n?0:i>e?1:t(qh(n,e,i))}function QA(n,e){n.min=e.min,n.max=e.max}function pi(n,e){QA(n.x,e.x),QA(n.y,e.y)}function XA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function WA(n,e,t,i,s){return n-=e,n=pp(n,1/t,i),s!==void 0&&(n=pp(n,1/s,i)),n}function fF(n,e=0,t=1,i=.5,s,o=n,l=n){if(Tr.test(e)&&(e=parseFloat(e),e=wt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=wt(o.min,o.max,i);n===o&&(u-=e),n.min=WA(n.min,e,t,u,s),n.max=WA(n.max,e,t,u,s)}function ZA(n,e,[t,i,s],o,l){fF(n,e[t],e[i],e[s],e.scale,o,l)}const mF=["x","scaleX","originX"],pF=["y","scaleY","originY"];function JA(n,e,t,i){ZA(n.x,e,mF,t?t.x:void 0,i?i.x:void 0),ZA(n.y,e,pF,t?t.y:void 0,i?i.y:void 0)}function eI(n){return n.translate===0&&n.scale===1}function GN(n){return eI(n.x)&&eI(n.y)}function tI(n,e){return n.min===e.min&&n.max===e.max}function gF(n,e){return tI(n.x,e.x)&&tI(n.y,e.y)}function nI(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function $N(n,e){return nI(n.x,e.x)&&nI(n.y,e.y)}function iI(n){return Rn(n.x)/Rn(n.y)}function rI(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class yF{constructor(){this.members=[]}add(e){Db(this.members,e),e.scheduleRender()}remove(e){if(Nb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vF(n,e,t){let i="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=t?.z||0;if((s||o||l)&&(i=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:v,rotateY:_,skewX:S,skewY:N}=t;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),v&&(i+=`rotateX(${v}deg) `),_&&(i+=`rotateY(${_}deg) `),S&&(i+=`skewX(${S}deg) `),N&&(i+=`skewY(${N}deg) `)}const u=n.x.scale*e.x,d=n.y.scale*e.y;return(u!==1||d!==1)&&(i+=`scale(${u}, ${d})`),i||"none"}const G0=["","X","Y","Z"],_F=1e3;let bF=0;function $0(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function KN(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=NN(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Tt,!(s||o))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&KN(i)}function YN({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},u=e?.()){this.id=bF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wF),this.nodes.forEach(IF),this.nodes.forEach(RF),this.nodes.forEach(SF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new oF)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Pb),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=lN(l)&&!d7(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),n){let g,v=0;const _=()=>this.root.updateBlockedByResize=!1;Tt.read(()=>{v=window.innerWidth}),n(l,()=>{const S=window.innerWidth;S!==v&&(v=S,this.root.updateBlockedByResize=!0,g&&g(),g=lF(_,250),Dm.hasAnimatedSinceResize&&(Dm.hasAnimatedSinceResize=!1,this.nodes.forEach(oI)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||f.getDefaultTransition()||VF,{onLayoutAnimationStart:A,onLayoutAnimationComplete:C}=f.getProps(),P=!this.targetLayout||!$N(this.targetLayout,S),U=!v&&_;if(this.options.layoutRoot||this.resumeFrom||U||v&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...Kb(N,"layout"),onPlay:A,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(g,U)}else v||oI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),va(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CF),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(sI);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(aI);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(AF),this.nodes.forEach(TF),this.nodes.forEach(EF)):this.nodes.forEach(aI),this.clearAllSnapshots();const u=zn.now();fn.delta=as(0,1e3/60,u-fn.timestamp),fn.timestamp=u,fn.isProcessing=!0,P0.update.process(fn),P0.preRender.process(fn),P0.render.process(fn),fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xF),this.sharedNodes.forEach(DF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Rn(this.snapshot.measuredBox.x)&&!Rn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Vt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!GN(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||fo(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),PF(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Vt();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(MF))){const{scroll:f}=this.root;f&&(Xl(u.x,f.offset.x),Xl(u.y,f.offset.y))}return u}removeElementScroll(l){const u=Vt();if(pi(u,l),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:g,options:v}=f;f!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&pi(u,l),Xl(u.x,g.offset.x),Xl(u.y,g.offset.y))}return u}applyTransform(l,u=!1){const d=Vt();pi(d,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Wl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),fo(g.latestValues)&&Wl(d,g.latestValues)}return fo(this.latestValues)&&Wl(d,this.latestValues),d}removeTransform(l){const u=Vt();pi(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!fo(f.latestValues))continue;Zv(f.latestValues)&&f.updateSnapshot();const g=Vt(),v=f.measurePageBox();pi(g,v),JA(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return fo(this.latestValues)&&JA(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=fn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vt(),this.relativeTargetOrigin=Vt(),Eh(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),pi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Vt(),this.targetWithTransforms=Vt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),BB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pi(this.target,this.layout.layoutBox),xN(this.target,this.targetDelta)):pi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vt(),this.relativeTargetOrigin=Vt(),Eh(this.relativeTargetOrigin,this.target,_.target),pi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Zv(this.parent.latestValues)||SN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===fn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;pi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;tB(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Vt());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(XA(this.prevProjectionDelta.x,this.projectionDelta.x),XA(this.prevProjectionDelta.y,this.projectionDelta.y)),Th(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!rI(this.projectionDelta.x,this.prevProjectionDelta.x)||!rI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zl(),this.projectionDelta=Zl(),this.projectionDeltaWithTransform=Zl()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},v=Zl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=Vt(),S=d?d.source:void 0,N=this.layout?this.layout.source:void 0,A=S!==N,C=this.getStack(),P=!C||C.members.length<=1,U=!!(A&&!P&&this.options.crossfade===!0&&!this.path.some(kF));this.animationProgress=0;let M;this.mixTargetDelta=$=>{const te=$/1e3;lI(v.x,l.x,te),lI(v.y,l.y,te),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Eh(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),NF(this.relativeTarget,this.relativeTargetOrigin,_,te),M&&gF(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Vt()),pi(M,this.relativeTarget)),A&&(this.animationValues=g,uF(g,f,this.latestValues,te,U,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(va(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tt.update(()=>{Dm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Sc(0)),this.currentAnimation=sF(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_F),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:g}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&QN(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Vt();const v=Rn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const _=Rn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}pi(u,d),Wl(u,g),Th(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new yF),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&$0("z",l,f,this.animationValues);for(let g=0;g<G0.length;g++)$0(`rotate${G0[g]}`,l,f,this.animationValues),$0(`skew${G0[g]}`,l,f,this.animationValues);l.render();for(const g in f)l.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Cm(u?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Cm(u?.pointerEvents)||""),this.hasProjected&&!fo(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=vF(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),l.transform=v;const{x:_,y:S}=this.projectionDelta;l.transformOrigin=`${_.origin*100}% ${S.origin*100}% 0`,f.animationValues?l.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const N in Kh){if(g[N]===void 0)continue;const{correct:A,applyTo:C,isCSSVariable:P}=Kh[N],U=v==="none"?g[N]:A(g[N],f);if(C){const M=C.length;for(let $=0;$<M;$++)l[C[$]]=U}else P?this.options.visualElement.renderState.vars[N]=U:l[N]=U}this.options.layoutId&&(l.pointerEvents=f===this?Cm(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(sI),this.root.sharedNodes.clear()}}}function TF(n){n.updateLayout()}function EF(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?gi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Rn(v);v.min=t[g].min,v.max=v.min+_}):QN(s,e.layoutBox,t)&&gi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Rn(t[g]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+_)});const l=Zl();Th(l,t,e.layoutBox);const u=Zl();o?Th(u,n.applyTransform(i,!0),e.measuredBox):Th(u,t,e.layoutBox);const d=!GN(l);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:_}=g;if(v&&_){const S=Vt();Eh(S,e.layoutBox,v.layoutBox);const N=Vt();Eh(N,t,_.layoutBox),$N(S,N)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=N,n.relativeTargetOrigin=S,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function wF(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function SF(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function xF(n){n.clearSnapshot()}function sI(n){n.clearMeasurements()}function aI(n){n.isLayoutDirty=!1}function AF(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function oI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function IF(n){n.resolveTargetDelta()}function RF(n){n.calcProjection()}function CF(n){n.resetSkewAndRotation()}function DF(n){n.removeLeadSnapshot()}function lI(n,e,t){n.translate=wt(e.translate,0,t),n.scale=wt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function cI(n,e,t,i){n.min=wt(e.min,t.min,i),n.max=wt(e.max,t.max,i)}function NF(n,e,t,i){cI(n.x,e.x,t.x,i),cI(n.y,e.y,t.y,i)}function kF(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const VF={duration:.45,ease:[.4,0,.1,1]},uI=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),hI=uI("applewebkit/")&&!uI("chrome/")?Math.round:Ei;function dI(n){n.min=hI(n.min),n.max=hI(n.max)}function PF(n){dI(n.x),dI(n.y)}function QN(n,e,t){return n==="position"||n==="preserve-aspect"&&!zB(iI(e),iI(t),.2)}function MF(n){return n!==n.root&&n.scroll?.wasRoot}const OF=YN({attachResizeListener:(n,e)=>Yh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),K0={current:void 0},XN=YN({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!K0.current){const n=new OF({});n.mount(window),n.setOptions({layoutScroll:!0}),K0.current=n}return K0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),LF={pan:{Feature:tF},drag:{Feature:eF,ProjectionNode:XN,MeasureLayout:FN}};function fI(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=i[s];o&&Tt.postRender(()=>o(e,pd(e)))}class jF extends Ra{mount(){const{current:e}=this.node;e&&(this.unmount=o7(e,(t,i)=>(fI(this.node,i,"Start"),s=>fI(this.node,s,"End"))))}unmount(){}}class UF extends Ra{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dd(Yh(this.node.current,"focus",()=>this.onFocus()),Yh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mI(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=i[s];o&&Tt.postRender(()=>o(e,pd(e)))}class zF extends Ra{mount(){const{current:e}=this.node;e&&(this.unmount=h7(e,(t,i)=>(mI(this.node,i,"Start"),(s,{success:o})=>mI(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const s_=new WeakMap,Y0=new WeakMap,BF=n=>{const e=s_.get(n.target);e&&e(n)},FF=n=>{n.forEach(BF)};function qF({root:n,...e}){const t=n||document;Y0.has(t)||Y0.set(t,{});const i=Y0.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(FF,{root:n,...e})),i[s]}function HF(n,e,t){const i=qF(e);return s_.set(n,t),i.observe(n),()=>{s_.delete(n),i.unobserve(n)}}const GF={some:0,all:1};class $F extends Ra{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:GF[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=f?g:v;_&&_(d)};return HF(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(KF(e,t))&&this.startObserver()}unmount(){}}function KF({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const YF={inView:{Feature:$F},tap:{Feature:zF},focus:{Feature:UF},hover:{Feature:jF}},QF={layout:{ProjectionNode:XN,MeasureLayout:FN}},XF={...PB,...YF,...LF,...QF},ag=Z7(XF,hB);function WF(n){n.values.forEach(e=>e.stop())}function a_(n,e){[...e].reverse().forEach(i=>{const s=n.getVariant(i);s&&oT(n,s),n.variantChildren&&n.variantChildren.forEach(o=>{a_(o,e)})})}function ZF(n,e){if(Array.isArray(e))return a_(n,e);if(typeof e=="string")return a_(n,[e]);oT(n,e)}function JF(){const n=new Set,e={subscribe(t){return n.add(t),()=>void n.delete(t)},start(t,i){const s=[];return n.forEach(o=>{s.push(PN(o,t,{transitionOverride:i}))}),Promise.all(s)},set(t){return n.forEach(i=>{ZF(i,t)})},stop(){n.forEach(t=>{WF(t)})},mount(){return()=>{e.stop()}}};return e}function eq(){const n=tg(JF);return Cb(n.mount,[]),n}const tq=eq,WN=({children:n,onDelete:e,threshold:t=-100})=>{const i=tq(),[s,o]=j.useState(!1),l=j.useRef(0),u=()=>{o(!0),l.current=Date.now()},d=async(f,g)=>{const v=g.offset.x,_=g.velocity.x;setTimeout(()=>o(!1),100),v<t||v<-50&&_<-500?e():i.start({x:0})};return T.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[T.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:T.jsx(Pm,{className:"text-white w-6 h-6"})}),T.jsx(ag.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:u,onDragEnd:d,animate:i,className:"relative bg-white dark:bg-zinc-900 z-10 rounded-xl",style:{touchAction:"pan-y",pointerEvents:s?"none":"auto"},children:n})]})},pI=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),nq=()=>{const{id:n}=_P(),{envelopes:e,transactions:t,fetchData:i,isLoading:s,deleteEnvelope:o,renameEnvelope:l,updateTransaction:u,deleteTransaction:d,restoreTransaction:f,getEnvelopeBalance:g}=Fn(),{showToast:v}=Ab(),_=Ta(),S=ba(),[N,A]=j.useState(!1),[C,P]=j.useState(!1),[U,M]=j.useState(!1),[$,te]=j.useState(null);j.useEffect(()=>{e.length===0&&i()},[]);const Z=e.find(k=>k.id===n);if(!Z)return s?T.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:T.jsx("p",{children:"Loading envelope..."})}):T.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:T.jsx("p",{children:"Envelope not found."})});const x=t.filter(k=>k.envelopeId===Z.id).sort((k,B)=>new Date(B.date).getTime()-new Date(k.date).getTime()),R=()=>{S.state?.fromGlobalFAB?_("/"):_(-1)},V=()=>{n&&(o(n),_(-1))},O=k=>{const B={...k,reconciled:!k.reconciled};u(B)};return T.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4",children:[T.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[T.jsx("button",{onClick:()=>{const k=prompt("Rename envelope:",Z.name);k&&k.trim()&&n&&l(n,k)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),T.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Z.name}),T.jsx("button",{onClick:R,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),T.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[T.jsxs("div",{className:"flex justify-between items-center mb-2",children:[T.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const k=g(Z.id).toNumber();return console.log(`Debug: Envelope ${Z.name} Balance:`,k),T.jsx("span",{className:`text-xl font-bold ${k<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:pI(k)})})()]}),T.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-zinc-400",children:[T.jsx("span",{children:"Budget"}),T.jsx("span",{children:pI(Z.currentBalance||0)})]})]}),T.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[T.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>A(!0),children:[T.jsx(I4,{className:"w-5 h-5 mr-3"}),"Add Money"]}),T.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>P(!0),children:[T.jsx(x4,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),T.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>M(!0),children:[T.jsx(b4,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),T.jsxs("section",{className:"mt-6",children:[T.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),T.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:x.length===0?T.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):T.jsx(Zb,{initial:!1,mode:"popLayout",children:x.map(k=>T.jsx(ag.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:T.jsx(WN,{onDelete:()=>{if(!k.id)return;const B={...k};d(k.id),v("Transaction deleted","neutral",()=>f(B))},children:T.jsx(vD,{transaction:k,onReconcile:()=>O(k),onEdit:()=>te(k)})})},k.id))})})]}),T.jsx("div",{className:"mt-8",children:T.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${Z.name}"? This will delete all transactions.`)&&V()},children:[T.jsx(PI,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(N||C||$)&&T.jsx(yD,{isVisible:N||C||!!$,onClose:()=>{A(!1),P(!1),te(null)},mode:N?"add":C?"spend":"edit",currentEnvelope:Z,initialTransaction:$}),U&&T.jsx(gz,{isVisible:U,onClose:()=>M(!1),sourceEnvelope:Z})]})},iq=()=>{const n=Ta(),e=j.useRef(null),{envelopes:t,transactions:i,distributionTemplates:s,resetData:o,importData:l,getEnvelopeBalance:u,appSettings:d,updateAppSettings:f,initializeAppSettings:g,cleanupOrphanedTemplates:v}=Fn(),[_,S]=j.useState(null),[N,A]=j.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[C,P]=j.useState(!1),U=978307200,M=d?.theme??"system";j.useEffect(()=>{d||g().catch(B=>{console.error("Failed to initialize app settings:",B)})},[d,g]);const $=(B,L)=>{S({type:B,text:L}),setTimeout(()=>S(null),3500)},te=j.useMemo(()=>{const B=t.length,L=i.length,Ce=s.length,de=t.reduce((Te,le)=>Te+u(le.id).toNumber(),0),H=0,se=i.reduce((Te,le)=>{let z=0;if(typeof le.date=="string"){const ne=Date.parse(le.date);z=Number.isNaN(ne)?0:ne}else typeof le.date=="number"&&(z=le.date<2e9?(le.date+U)*1e3:le.date);return Math.max(Te,z)},0),he=H||se?new Date(Math.max(H,se)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:B,transactionCount:L,templateCount:Ce,totalBalance:de,lastUpdated:he}},[t,i,s]),Z=()=>{try{const B={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:d||{theme:"system"},envelopes:t.map(se=>({...se,currentBalance:u(se.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:s},L=new Blob([JSON.stringify(B,null,2)],{type:"application/json"}),Ce=URL.createObjectURL(L),de=document.createElement("a");de.href=Ce,de.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(Ce);const H=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",H),A(H),$("success","Backup downloaded successfully.")}catch(B){console.error(B),$("error","Failed to create backup file.")}},x=()=>{try{const B=["Date","Description","Amount","Type","Envelope","Reconciled"],L=i.map(he=>{const Te=t.find(ne=>ne.id===he.envelopeId)?.name||"Unknown",le=(he.description||"").replace(/"/g,'""');let z="Invalid Date";if(he.date){if(typeof he.date=="string")z=he.date.split("T")[0];else if(typeof he.date=="number"){const ne=he.date<2e9?(he.date+U)*1e3:he.date;z=new Date(ne).toISOString().split("T")[0]}}return[z,`"${le}"`,he.amount.toFixed(2),he.type,`"${Te}"`,he.reconciled?"Yes":"No"].join(",")}),Ce=[B.join(","),...L].join(`
`),de=new Blob([Ce],{type:"text/csv;charset=utf-8;"}),H=URL.createObjectURL(de),se=document.createElement("a");se.href=H,se.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(H),$("success","CSV export ready to open in Excel/Numbers.")}catch(B){console.error(B),$("error","Failed to export CSV.")}},R=()=>{e.current?.click()},V=B=>{const L=B.target.files?.[0];if(!L)return;const Ce=new FileReader;Ce.onload=async de=>{try{const H=JSON.parse(de.target?.result),se=await l(H);if(!se.success){$("error",se.message);return}if(H.appSettings?.theme)try{await f({theme:H.appSettings.theme})}catch(he){console.error("Failed to update imported settings:",he)}else if(H.appSettings?.isDarkMode!==void 0)try{const he=H.appSettings.isDarkMode?"dark":"light";await f({theme:he})}catch(he){console.error("Failed to update imported settings:",he)}$("success",`Loaded ${H.envelopes?.length??0} envelopes, ${H.transactions?.length??0} transactions, and ${H.distributionTemplates?.length??0} templates.`)}catch(H){console.error(H),$("error","Invalid backup file. Please verify the JSON.")}},Ce.readAsText(L),B.target.value=""},O=async()=>{P(!0);try{$("success","Scanning templates for orphaned references..."),await v(),$("success","Orphaned templates have been cleaned up successfully.")}catch(B){console.error("Template cleanup failed:",B),$("error","Failed to clean up orphaned templates. Check console for details.")}finally{P(!1)}},k=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),$("success","All data has been permanently deleted."),n("/")}catch(B){console.error("Reset failed:",B),$("error","Failed to delete all data. Some data may remain.")}};return T.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[T.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:T.jsxs("div",{className:"flex items-center",children:[T.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),T.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),T.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[_&&T.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${_.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[_.type==="success"?T.jsx(C4,{size:18}):T.jsx(Pm,{size:18}),_.text]}),T.jsx("section",{children:T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(Vm,{className:"text-blue-500",size:22}),T.jsxs("div",{children:[T.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),T.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),T.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.envelopeCount})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),T.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.transactionCount})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),T.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:te.templateCount})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),T.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:te.lastUpdated})]})]})]})}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[T.jsxs("div",{className:"flex items-center justify-between mb-3",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[M==="light"&&T.jsx("span",{className:"text-orange-500 text-lg",children:""}),M==="dark"&&T.jsx("span",{className:"text-purple-500 text-lg",children:""}),M==="system"&&T.jsx("span",{className:"text-gray-500 text-lg",children:""}),T.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),T.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:M})]}),T.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),T.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(B=>T.jsx("button",{onClick:async()=>{try{await f({theme:B.value})}catch(L){console.error("Failed to update theme setting:",L)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${M===B.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:B.label},B.value))})]})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[T.jsxs("button",{onClick:Z,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(Vm,{className:"text-blue-500",size:20}),T.jsxs("div",{className:"flex flex-col items-start",children:[T.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),T.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",N]})]})]}),T.jsx(Ul,{className:"text-gray-400",size:18})]}),T.jsxs("button",{onClick:R,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(dM,{className:"text-blue-500",size:20}),T.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),T.jsx(Ul,{className:"text-gray-400",size:18})]}),T.jsxs("button",{onClick:x,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(z4,{className:"text-blue-500",size:20}),T.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),T.jsx(Ul,{className:"text-gray-400",size:18})]}),T.jsxs("button",{onClick:O,disabled:C,className:`w-full p-4 flex items-center justify-between transition-colors ${C?"bg-gray-50 dark:bg-zinc-800/50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[T.jsxs("div",{className:"flex items-center gap-3",children:[C?T.jsx(X4,{className:"text-blue-500 animate-spin",size:20}):T.jsx(W0,{className:"text-blue-500",size:20}),T.jsx("span",{className:`font-medium ${C?"text-gray-500 dark:text-zinc-400":"text-gray-900 dark:text-white"}`,children:C?"Cleaning Templates...":"Clean Up Orphaned Templates"})]}),C?T.jsx("div",{className:"text-gray-400 text-sm",children:"Working..."}):T.jsx(Ul,{className:"text-gray-400",size:18})]}),T.jsx("input",{type:"file",ref:e,onChange:V,accept:".json",className:"hidden"})]})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[T.jsx("p",{children:"Create regular backups before major changes."}),T.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),T.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),T.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),T.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:T.jsxs("button",{onClick:k,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(Pm,{className:"text-red-500 group-hover:text-red-600",size:20}),T.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),T.jsx(Ul,{className:"text-gray-400",size:18})]})}),T.jsx("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500",children:"This clears every envelope, transaction, and template. Use with caution."})]}),T.jsx("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:"House Budget PWA  App Version 2.0.1"})]})]})},rq=()=>{const n=Ta(),{createEnvelope:e}=Fn(),[t,i]=j.useState(""),[s,o]=j.useState(""),l=u=>{if(u.preventDefault(),!t.trim())return;const d=parseFloat(s),f=isNaN(d)?0:d,g=Fn.getState().envelopes,_=(g.length>0?Math.max(...g.map(S=>S.orderIndex??0)):-1)+1;e({name:t,currentBalance:f,lastUpdated:new Date().toISOString(),isActive:!0,orderIndex:_}),n("/")};return T.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[T.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[T.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:T.jsx(km,{size:24})}),T.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Envelope"})]}),T.jsx("div",{className:"p-4 max-w-md mx-auto",children:T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[T.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:T.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:T.jsx(F4,{size:40})})}),T.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Envelope Name"}),T.jsx("input",{type:"text",id:"name",value:t,onChange:u=>i(u.target.value),placeholder:"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),T.jsxs("div",{className:"relative",children:[T.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),T.jsx("input",{type:"number",id:"balance",value:s,onChange:u=>o(u.target.value),onKeyDown:u=>{(u.key==="e"||u.key==="E"||u.key==="+"||u.key==="-")&&u.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),T.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later via the "Distribute Funds" screen.'})]}),T.jsxs("div",{className:"pt-4 flex gap-3",children:[T.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),T.jsx("button",{type:"submit",disabled:!t.trim(),className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${t.trim()?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:"Create Envelope"})]})]})]})})]})},sq=()=>{const n=Ta(),{envelopes:e,getEnvelopeBalance:t}=Fn(),i=[...e].sort((s,o)=>{const l=s.orderIndex??0,u=o.orderIndex??0;return l!==u?l-u:s.name.localeCompare(o.name)});return T.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[T.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[T.jsx("button",{onClick:()=>n(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),T.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),T.jsx("div",{className:"w-12"})," "]}),T.jsx("div",{className:"p-4 max-w-md mx-auto",children:T.jsx("section",{className:"mb-6",children:T.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[T.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:T.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:"SELECT ENVELOPE"})}),i.length===0?T.jsx("div",{className:"px-4 py-8 text-center text-gray-500 dark:text-zinc-400",children:T.jsx("p",{children:"No envelopes available"})}):T.jsx("div",{className:"divide-y divide-gray-200 dark:divide-zinc-700",children:i.map(s=>T.jsxs("button",{onClick:()=>n(`/envelope/${s.id}`,{state:{fromGlobalFAB:!0}}),className:"w-full px-4 py-4 text-left flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700 transition-colors",children:[T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),T.jsxs("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["Balance: $",t(s.id).toNumber().toFixed(2)]})]}),T.jsx(Ul,{size:20,className:"text-gray-400 dark:text-zinc-500"})]},s.id))})]})})})]})},aq=()=>{const n=Ta(),{transactions:e,envelopes:t,updateTransaction:i,deleteTransaction:s,restoreTransaction:o}=Fn(),{showToast:l}=Ab(),[u,d]=j.useState(!1),[f,g]=j.useState(""),[v,_]=j.useState("all"),[S,N]=j.useState("All"),[A,C]=j.useState(!1),[P,U]=j.useState(()=>{const O=new Date;return O.setMonth(O.getMonth()-1),O.toISOString().split("T")[0]}),[M,$]=j.useState(()=>new Date().toISOString().split("T")[0]),[te,Z]=j.useState(null),x=j.useMemo(()=>e.map(k=>{if(!k)return null;let B=k.date;if(typeof k.date=="number"){const Ce=(k.date+978307200)*1e3;B=new Date(Ce).toISOString()}else if(!k.date||typeof k.date!="string")return null;return{...k,date:B}}).filter(Boolean).filter(k=>{if(f){const L=f.toLowerCase(),Ce=t.find(se=>se.id===k.envelopeId)?.name.toLowerCase()||"",de=k.amount.toFixed(2);if(!(k.description.toLowerCase().includes(L)||Ce.includes(L)||de.includes(L)))return!1}if(v!=="all"&&k.envelopeId!==v||S!=="All"&&k.type!==S||!k.date||typeof k.date!="string")return!1;const B=k.date.split("T")[0];return!(B<P||B>M||A&&!k.reconciled)}).sort((k,B)=>new Date(B.date).getTime()-new Date(k.date).getTime()),[e,t,f,v,S,P,M,A]),R=te?t.find(O=>O.id===te.envelopeId):null,V=O=>{const k={...O,reconciled:!O.reconciled};i(k)};return T.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[T.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[T.jsxs("div",{className:"flex items-center",children:[T.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:T.jsx(km,{size:24})}),T.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),T.jsx("button",{onClick:()=>d(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:T.jsx(H4,{size:20,className:u?"fill-current":""})})]}),T.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:T.jsxs("div",{className:"p-4 space-y-4",children:[T.jsxs("div",{className:"relative",children:[T.jsx(rM,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),T.jsx("input",{type:"text",placeholder:"Search transactions...",value:f,onChange:O=>g(O.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),f&&T.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:T.jsx(f_,{size:16})})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),T.jsxs("select",{value:v,onChange:O=>_(O.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[T.jsx("option",{value:"all",children:"All Envelopes"}),t.sort((O,k)=>O.name.localeCompare(k.name)).map(O=>T.jsx("option",{value:O.id,children:O.name},O.id))]})]}),T.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(O=>T.jsx("button",{onClick:()=>N(O),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${S===O?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:O},O))}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),T.jsx("div",{className:"relative",children:T.jsx("input",{type:"date",value:P,onChange:O=>U(O.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),T.jsx("div",{className:"relative",children:T.jsx("input",{type:"date",value:M,onChange:O=>$(O.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),T.jsxs("div",{className:"flex items-center justify-between pt-2",children:[T.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),T.jsx("button",{onClick:()=>C(!A),className:`w-11 h-6 rounded-full transition-colors relative ${A?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:T.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${A?"translate-x-5":"translate-x-0"}`})})]})]})}),T.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:T.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:x.length===0?T.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):T.jsx(Zb,{initial:!1,mode:"popLayout",children:x.map(O=>{const k=t.find(B=>B.id===O.envelopeId);return T.jsx(ag.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:T.jsx(WN,{onDelete:()=>{if(!O.id)return;const B={...O};s(O.id),l("Transaction deleted","neutral",()=>o(B))},children:T.jsx(vD,{transaction:O,envelopeName:k?.name||"Unknown Envelope",onReconcile:()=>V(O),onEdit:()=>{k?Z(O):alert("Cannot edit: Envelope deleted.")}})})},O.id)})})})}),te&&R&&T.jsx(yD,{isVisible:!!te,onClose:()=>Z(null),mode:"edit",currentEnvelope:R,initialTransaction:te})]})},oq=()=>{const[n,e]=j.useState(""),[t,i]=j.useState(""),[s,o]=j.useState(""),[l,u]=j.useState(!1),[d,f]=j.useState(!1),[g,v]=j.useState(!1),[_,S]=j.useState(!1),{login:N,register:A,sendPasswordReset:C,isLoading:P,loginError:U,clearError:M}=zo(),$=async Z=>{if(Z.preventDefault(),n.trim()&&t.trim())if(d){if(!s.trim())return;await A(n.trim(),t,s.trim())}else await N(n.trim(),t)};j.useEffect(()=>{U&&M()},[n,t,U,M]);const te=async Z=>{Z.preventDefault(),n.trim()&&await C(n.trim())&&S(!0)};return j.useEffect(()=>{e(""),i(""),o(""),S(!1)},[d,g]),T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:T.jsxs("div",{className:"max-w-md w-full space-y-8",children:[T.jsx("div",{className:"text-center",children:T.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("img",{src:"/house-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),T.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for your household"})]})}),T.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:g?T.jsxs("form",{onSubmit:te,className:"space-y-6",children:[T.jsxs("div",{className:"text-center mb-2",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:T.jsx(Qw,{className:"h-5 w-5 text-gray-400"})}),T.jsx("input",{id:"reset-email",type:"email",value:n,onChange:Z=>e(Z.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:P,autoComplete:"email"})]})]}),_?T.jsxs("div",{className:"text-center py-4",children:[T.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:T.jsx(Qw,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),T.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),T.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",T.jsx("span",{className:"font-medium",children:n})]}),T.jsxs("button",{type:"button",onClick:()=>v(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[T.jsx(km,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):T.jsxs(T.Fragment,{children:[T.jsx("button",{type:"submit",disabled:P||!n.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:P?"Sending...":"Send Reset Link"}),T.jsx("div",{className:"mt-4 text-center",children:T.jsxs("button",{type:"button",onClick:()=>v(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:P,children:[T.jsx(km,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):T.jsxs("form",{onSubmit:$,className:"space-y-6",children:[T.jsxs("div",{className:"text-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d?"Create Account":"Sign In"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:d?"Create a new account to get started":"Sign in to your account"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),T.jsx("input",{id:"email",type:"email",value:n,onChange:Z=>e(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:P,autoComplete:"username"})]}),d&&T.jsxs("div",{children:[T.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),T.jsx("input",{id:"displayName",type:"text",value:s,onChange:Z=>o(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:P})]}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!d&&T.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:P,children:"Forgot password?"})]}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{id:"password",type:l?"text":"password",value:t,onChange:Z=>i(Z.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",required:!0,disabled:P,autoComplete:d?"new-password":"current-password"}),T.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:P,children:l?T.jsx(O4,{className:"h-5 w-5"}):T.jsx(j4,{className:"h-5 w-5"})})]})]}),U&&T.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:U}),T.jsx("button",{type:"submit",disabled:P||!n.trim()||!t.trim()||d&&!s.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:P?d?"Creating Account...":"Signing in...":d?"Create Account":"Sign In"}),T.jsx("div",{className:"mt-6 text-center",children:T.jsxs("button",{type:"button",onClick:()=>{f(!d),v(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:P,children:[T.jsx(mM,{className:"h-4 w-4"}),d?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},lq=()=>{const{message:n,type:e,isVisible:t,undoAction:i,hideToast:s}=Ab(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return T.jsx(Zb,{children:t&&T.jsx(ag.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:T.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[T.jsx("div",{className:"flex items-center flex-1 min-w-0",children:T.jsx("span",{className:"text-sm font-medium truncate pr-2",children:n})}),T.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&T.jsxs("button",{onClick:()=>{i(),s()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[T.jsx(uM,{size:14,className:"inline mr-1"}),"Undo"]}),T.jsx("button",{onClick:s,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:T.jsx(f_,{size:16})})]})]})})})};function cq(){const[n,e]=j.useState(!0),{appSettings:t}=Fn(),{isAuthenticated:i,isInitialized:s,initializeAuth:o,lastAuthTime:l,offlineGracePeriod:u}=zo();if(j.useEffect(()=>{const g=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(g)},[]),j.useEffect(()=>o(),[o]),j.useEffect(()=>{const g=document.documentElement,v=window.matchMedia("(prefers-color-scheme: dark)"),_=()=>{const S=t?.theme??"system",N=v.matches;S==="dark"||S==="system"&&N?g.classList.add("dark"):g.classList.remove("dark")};if(_(),t?.theme==="system")return v.addEventListener("change",_),()=>v.removeEventListener("change",_)},[t]),n||!s)return T.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-blue-600 text-white dark:bg-black",children:T.jsx("div",{className:"text-3xl font-bold animate-pulse",children:"House Budget"})});if(!i)return T.jsx(oq,{});const f=typeof navigator<"u"&&!navigator.onLine&&i&&l&&Date.now()-l<u;return T.jsxs(T.Fragment,{children:[f&&T.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:T.jsxs("div",{className:"flex",children:[T.jsx("div",{className:"flex-shrink-0",children:T.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),T.jsx("div",{className:"ml-3",children:T.jsxs("p",{className:"text-sm",children:[T.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((u-(Date.now()-l))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),T.jsx(i4,{children:T.jsxs(PP,{children:[T.jsx(lo,{path:"/",element:T.jsx(pz,{})}),T.jsx(lo,{path:"/envelope/:id",element:T.jsx(nq,{})}),T.jsx(lo,{path:"/add-envelope",element:T.jsx(rq,{})}),T.jsx(lo,{path:"/add-transaction",element:T.jsx(sq,{})}),T.jsx(lo,{path:"/transactions",element:T.jsx(aq,{})}),T.jsx(lo,{path:"/settings",element:T.jsx(iq,{})})]})}),T.jsx(lq,{})]})}FV({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});jV.createRoot(document.getElementById("root")).render(T.jsx(j.StrictMode,{children:T.jsx(cq,{})}));
