(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function uV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qy={exports:{}},zc={};var _w;function cV(){if(_w)return zc;_w=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:o}}return zc.Fragment=e,zc.jsx=t,zc.jsxs=t,zc}var bw;function hV(){return bw||(bw=1,Qy.exports=cV()),Qy.exports}var E=hV(),Yy={exports:{}},Pe={};var Tw;function dV(){if(Tw)return Pe;Tw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function S(B){return B===null||typeof B!="object"?null:(B=_&&B[_]||B["@@iterator"],typeof B=="function"?B:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,k={};function z(B,te,fe){this.props=B,this.context=te,this.refs=k,this.updater=fe||R}z.prototype.isReactComponent={},z.prototype.setState=function(B,te){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,te,"setState")},z.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function U(){}U.prototype=z.prototype;function P(B,te,fe){this.props=B,this.context=te,this.refs=k,this.updater=fe||R}var W=P.prototype=new U;W.constructor=P,D(W,z.prototype),W.isPureReactComponent=!0;var ne=Array.isArray;function ee(){}var x={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function V(B,te,fe){var me=fe.ref;return{$$typeof:n,type:B,key:te,ref:me!==void 0?me:null,props:fe}}function M(B,te){return V(B.type,te,B.props)}function N(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function H(B){var te={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(fe){return te[fe]})}var O=/\/+/g;function ze(B,te){return typeof B=="object"&&B!==null&&B.key!=null?H(""+B.key):te.toString(36)}function ge(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(ee,ee):(B.status="pending",B.then(function(te){B.status==="pending"&&(B.status="fulfilled",B.value=te)},function(te){B.status==="pending"&&(B.status="rejected",B.reason=te)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function F(B,te,fe,me,Ie){var De=typeof B;(De==="undefined"||De==="boolean")&&(B=null);var Qe=!1;if(B===null)Qe=!0;else switch(De){case"bigint":case"string":case"number":Qe=!0;break;case"object":switch(B.$$typeof){case n:case e:Qe=!0;break;case g:return Qe=B._init,F(Qe(B._payload),te,fe,me,Ie)}}if(Qe)return Ie=Ie(B),Qe=me===""?"."+ze(B,0):me,ne(Ie)?(fe="",Qe!=null&&(fe=Qe.replace(O,"$&/")+"/"),F(Ie,te,fe,"",function(xa){return xa})):Ie!=null&&(N(Ie)&&(Ie=M(Ie,fe+(Ie.key==null||B&&B.key===Ie.key?"":(""+Ie.key).replace(O,"$&/")+"/")+Qe)),te.push(Ie)),1;Qe=0;var Xt=me===""?".":me+":";if(ne(B))for(var yt=0;yt<B.length;yt++)me=B[yt],De=Xt+ze(me,yt),Qe+=F(me,te,fe,De,Ie);else if(yt=S(B),typeof yt=="function")for(B=yt.call(B),yt=0;!(me=B.next()).done;)me=me.value,De=Xt+ze(me,yt++),Qe+=F(me,te,fe,De,Ie);else if(De==="object"){if(typeof B.then=="function")return F(ge(B),te,fe,me,Ie);throw te=String(B),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Qe}function se(B,te,fe){if(B==null)return B;var me=[],Ie=0;return F(B,me,"","",function(De){return te.call(fe,De,Ie++)}),me}function he(B){if(B._status===-1){var te=B._result;te=te(),te.then(function(fe){(B._status===0||B._status===-1)&&(B._status=1,B._result=fe)},function(fe){(B._status===0||B._status===-1)&&(B._status=2,B._result=fe)}),B._status===-1&&(B._status=0,B._result=te)}if(B._status===1)return B._result.default;throw B._result}var Te=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},we={map:se,forEach:function(B,te,fe){se(B,function(){te.apply(this,arguments)},fe)},count:function(B){var te=0;return se(B,function(){te++}),te},toArray:function(B){return se(B,function(te){return te})||[]},only:function(B){if(!N(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Pe.Activity=v,Pe.Children=we,Pe.Component=z,Pe.Fragment=t,Pe.Profiler=s,Pe.PureComponent=P,Pe.StrictMode=i,Pe.Suspense=d,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return x.H.useMemoCache(B)}},Pe.cache=function(B){return function(){return B.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(B,te,fe){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var me=D({},B.props),Ie=B.key;if(te!=null)for(De in te.key!==void 0&&(Ie=""+te.key),te)!I.call(te,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&te.ref===void 0||(me[De]=te[De]);var De=arguments.length-2;if(De===1)me.children=fe;else if(1<De){for(var Qe=Array(De),Xt=0;Xt<De;Xt++)Qe[Xt]=arguments[Xt+2];me.children=Qe}return V(B.type,Ie,me)},Pe.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Pe.createElement=function(B,te,fe){var me,Ie={},De=null;if(te!=null)for(me in te.key!==void 0&&(De=""+te.key),te)I.call(te,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ie[me]=te[me]);var Qe=arguments.length-2;if(Qe===1)Ie.children=fe;else if(1<Qe){for(var Xt=Array(Qe),yt=0;yt<Qe;yt++)Xt[yt]=arguments[yt+2];Ie.children=Xt}if(B&&B.defaultProps)for(me in Qe=B.defaultProps,Qe)Ie[me]===void 0&&(Ie[me]=Qe[me]);return V(B,De,Ie)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(B){return{$$typeof:h,render:B}},Pe.isValidElement=N,Pe.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:he}},Pe.memo=function(B,te){return{$$typeof:f,type:B,compare:te===void 0?null:te}},Pe.startTransition=function(B){var te=x.T,fe={};x.T=fe;try{var me=B(),Ie=x.S;Ie!==null&&Ie(fe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ee,Te)}catch(De){Te(De)}finally{te!==null&&fe.types!==null&&(te.types=fe.types),x.T=te}},Pe.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Pe.use=function(B){return x.H.use(B)},Pe.useActionState=function(B,te,fe){return x.H.useActionState(B,te,fe)},Pe.useCallback=function(B,te){return x.H.useCallback(B,te)},Pe.useContext=function(B){return x.H.useContext(B)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(B,te){return x.H.useDeferredValue(B,te)},Pe.useEffect=function(B,te){return x.H.useEffect(B,te)},Pe.useEffectEvent=function(B){return x.H.useEffectEvent(B)},Pe.useId=function(){return x.H.useId()},Pe.useImperativeHandle=function(B,te,fe){return x.H.useImperativeHandle(B,te,fe)},Pe.useInsertionEffect=function(B,te){return x.H.useInsertionEffect(B,te)},Pe.useLayoutEffect=function(B,te){return x.H.useLayoutEffect(B,te)},Pe.useMemo=function(B,te){return x.H.useMemo(B,te)},Pe.useOptimistic=function(B,te){return x.H.useOptimistic(B,te)},Pe.useReducer=function(B,te,fe){return x.H.useReducer(B,te,fe)},Pe.useRef=function(B){return x.H.useRef(B)},Pe.useState=function(B){return x.H.useState(B)},Pe.useSyncExternalStore=function(B,te,fe){return x.H.useSyncExternalStore(B,te,fe)},Pe.useTransition=function(){return x.H.useTransition()},Pe.version="19.2.0",Pe}var Ew;function Xv(){return Ew||(Ew=1,Yy.exports=dV()),Yy.exports}var L=Xv();const zf=uV(L);var Xy={exports:{}},Uc={},Wy={exports:{}},Zy={};var ww;function fV(){return ww||(ww=1,(function(n){function e(F,se){var he=F.length;F.push(se);e:for(;0<he;){var Te=he-1>>>1,we=F[Te];if(0<s(we,se))F[Te]=se,F[he]=we,he=Te;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var se=F[0],he=F.pop();if(he!==se){F[0]=he;e:for(var Te=0,we=F.length,B=we>>>1;Te<B;){var te=2*(Te+1)-1,fe=F[te],me=te+1,Ie=F[me];if(0>s(fe,he))me<we&&0>s(Ie,fe)?(F[Te]=Ie,F[me]=he,Te=me):(F[Te]=fe,F[te]=he,Te=te);else if(me<we&&0>s(Ie,he))F[Te]=Ie,F[me]=he,Te=me;else break e}}return se}function s(F,se){var he=F.sortIndex-se.sortIndex;return he!==0?he:F.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var d=[],f=[],g=1,v=null,_=3,S=!1,R=!1,D=!1,k=!1,z=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function W(F){for(var se=t(f);se!==null;){if(se.callback===null)i(f);else if(se.startTime<=F)i(f),se.sortIndex=se.expirationTime,e(d,se);else break;se=t(f)}}function ne(F){if(D=!1,W(F),!R)if(t(d)!==null)R=!0,ee||(ee=!0,H());else{var se=t(f);se!==null&&ge(ne,se.startTime-F)}}var ee=!1,x=-1,I=5,V=-1;function M(){return k?!0:!(n.unstable_now()-V<I)}function N(){if(k=!1,ee){var F=n.unstable_now();V=F;var se=!0;try{e:{R=!1,D&&(D=!1,U(x),x=-1),S=!0;var he=_;try{t:{for(W(F),v=t(d);v!==null&&!(v.expirationTime>F&&M());){var Te=v.callback;if(typeof Te=="function"){v.callback=null,_=v.priorityLevel;var we=Te(v.expirationTime<=F);if(F=n.unstable_now(),typeof we=="function"){v.callback=we,W(F),se=!0;break t}v===t(d)&&i(d),W(F)}else i(d);v=t(d)}if(v!==null)se=!0;else{var B=t(f);B!==null&&ge(ne,B.startTime-F),se=!1}}break e}finally{v=null,_=he,S=!1}se=void 0}}finally{se?H():ee=!1}}}var H;if(typeof P=="function")H=function(){P(N)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ze=O.port2;O.port1.onmessage=N,H=function(){ze.postMessage(null)}}else H=function(){z(N,0)};function ge(F,se){x=z(function(){F(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(F){switch(_){case 1:case 2:case 3:var se=3;break;default:se=_}var he=_;_=se;try{return F()}finally{_=he}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(F,se){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var he=_;_=F;try{return se()}finally{_=he}},n.unstable_scheduleCallback=function(F,se,he){var Te=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Te+he:Te):he=Te,F){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=he+we,F={id:g++,callback:se,priorityLevel:F,startTime:he,expirationTime:we,sortIndex:-1},he>Te?(F.sortIndex=he,e(f,F),t(d)===null&&F===t(f)&&(D?(U(x),x=-1):D=!0,ge(ne,he-Te))):(F.sortIndex=we,e(d,F),R||S||(R=!0,ee||(ee=!0,H()))),F},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(F){var se=_;return function(){var he=_;_=se;try{return F.apply(this,arguments)}finally{_=he}}}})(Zy)),Zy}var Sw;function mV(){return Sw||(Sw=1,Wy.exports=fV()),Wy.exports}var Jy={exports:{}},gn={};var xw;function pV(){if(xw)return gn;xw=1;var n=Xv();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:f,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,gn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},gn.flushSync=function(d){var f=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=g,i.d.f()}},gn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},gn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},gn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,v=h(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:S}):g==="script"&&i.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},gn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},gn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=h(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},gn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},gn.requestFormReset=function(d){i.d.r(d)},gn.unstable_batchedUpdates=function(d,f){return d(f)},gn.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},gn.useFormStatus=function(){return l.H.useHostTransitionStatus()},gn.version="19.2.0",gn}var Aw;function gV(){if(Aw)return Jy.exports;Aw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jy.exports=pV(),Jy.exports}var Iw;function yV(){if(Iw)return Uc;Iw=1;var n=mV(),e=Xv(),t=gV();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function h(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var u=r,c=a;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){u=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return d(p),r;if(y===c)return d(p),a;y=y.sibling}throw Error(i(188))}if(u.return!==c.return)u=p,c=y;else{for(var T=!1,A=p.child;A;){if(A===u){T=!0,u=p,c=y;break}if(A===c){T=!0,c=p,u=y;break}A=A.sibling}if(!T){for(A=y.child;A;){if(A===u){T=!0,u=y,c=p;break}if(A===c){T=!0,c=y,u=p;break}A=A.sibling}if(!T)throw Error(i(189))}}if(u.alternate!==c)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:a}function g(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=g(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),P=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function H(r){return r===null||typeof r!="object"?null:(r=N&&r[N]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function ze(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case z:return"Profiler";case k:return"StrictMode";case ne:return"Suspense";case ee:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case R:return"Portal";case P:return r.displayName||"Context";case U:return(r._context.displayName||"Context")+".Consumer";case W:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x:return a=r.displayName||null,a!==null?a:ze(r.type)||"Memo";case I:a=r._payload,r=r._init;try{return ze(r(a))}catch{}}return null}var ge=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Te=[],we=-1;function B(r){return{current:r}}function te(r){0>we||(r.current=Te[we],Te[we]=null,we--)}function fe(r,a){we++,Te[we]=r.current,r.current=a}var me=B(null),Ie=B(null),De=B(null),Qe=B(null);function Xt(r,a){switch(fe(De,a),fe(Ie,r),fe(me,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?FE(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=FE(a),r=qE(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}te(me),fe(me,r)}function yt(){te(me),te(Ie),te(De)}function xa(r){r.memoizedState!==null&&fe(Qe,r);var a=me.current,u=qE(a,r.type);a!==u&&(fe(Ie,r),fe(me,u))}function Bo(r){Ie.current===r&&(te(me),te(Ie)),Qe.current===r&&(te(Qe),Pc._currentValue=he)}var Fo,qo;function Bi(r){if(Fo===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Fo=a&&a[1]||"",qo=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fo+r+qo}var Pu=!1;function Aa(r,a){if(!r||Pu)return"";Pu=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var X=J}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(J){X=J}r.call(oe.prototype)}}else{try{throw Error()}catch(J){X=J}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&X&&typeof J.stack=="string")return[J.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),T=y[0],A=y[1];if(T&&A){var j=T.split(`
`),Y=A.split(`
`);for(p=c=0;c<j.length&&!j[c].includes("DetermineComponentFrameRoot");)c++;for(;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;if(c===j.length||p===Y.length)for(c=j.length-1,p=Y.length-1;1<=c&&0<=p&&j[c]!==Y[p];)p--;for(;1<=c&&0<=p;c--,p--)if(j[c]!==Y[p]){if(c!==1||p!==1)do if(c--,p--,0>p||j[c]!==Y[p]){var ie=`
`+j[c].replace(" at new "," at ");return r.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",r.displayName)),ie}while(1<=c&&0<=p);break}}}finally{Pu=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Bi(u):""}function Ou(r,a){switch(r.tag){case 26:case 27:case 5:return Bi(r.type);case 16:return Bi("Lazy");case 13:return r.child!==a&&a!==null?Bi("Suspense Fallback"):Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return Aa(r.type,!1);case 11:return Aa(r.type.render,!1);case 1:return Aa(r.type,!0);case 31:return Bi("Activity");default:return""}}function Lu(r){try{var a="",u=null;do a+=Ou(r,u),u=r,r=r.return;while(r);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var jt=Object.prototype.hasOwnProperty,Wt=n.unstable_scheduleCallback,hs=n.unstable_cancelCallback,Xp=n.unstable_shouldYield,ud=n.unstable_requestPaint,In=n.unstable_now,Ia=n.unstable_getCurrentPriorityLevel,ju=n.unstable_ImmediatePriority,zu=n.unstable_UserBlockingPriority,ds=n.unstable_NormalPriority,Wp=n.unstable_LowPriority,cd=n.unstable_IdlePriority,hd=n.log,dd=n.unstable_setDisableYieldValue,wi=null,on=null;function ii(r){if(typeof hd=="function"&&dd(r),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(wi,r)}catch{}}var Dt=Math.clz32?Math.clz32:md,fd=Math.log,Ho=Math.LN2;function md(r){return r>>>=0,r===0?32:31-(fd(r)/Ho|0)|0}var Fi=256,Ra=262144,zt=4194304;function qi(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Hi(r,a,u){var c=r.pendingLanes;if(c===0)return 0;var p=0,y=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var A=c&134217727;return A!==0?(c=A&~y,c!==0?p=qi(c):(T&=A,T!==0?p=qi(T):u||(u=A&~r,u!==0&&(p=qi(u))))):(A=c&~y,A!==0?p=qi(A):T!==0?p=qi(T):u||(u=c&~r,u!==0&&(p=qi(u)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,u=a&-a,y>=u||y===32&&(u&4194048)!==0)?a:p}function Si(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Zp(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pd(){var r=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),r}function Gi(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function Ca(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Jp(r,a,u,c,p,y){var T=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var A=r.entanglements,j=r.expirationTimes,Y=r.hiddenUpdates;for(u=T&~u;0<u;){var ie=31-Dt(u),oe=1<<ie;A[ie]=0,j[ie]=-1;var X=Y[ie];if(X!==null)for(Y[ie]=null,ie=0;ie<X.length;ie++){var J=X[ie];J!==null&&(J.lane&=-536870913)}u&=~oe}c!==0&&Da(r,c,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(T&~a))}function Da(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var c=31-Dt(a);r.entangledLanes|=a,r.entanglements[c]=r.entanglements[c]|1073741824|u&261930}function Uu(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var c=31-Dt(u),p=1<<c;p&a|r[c]&a&&(r[c]|=a),u&=~p}}function Bu(r,a){var u=a&-a;return u=(u&42)!==0?1:Na(u),(u&(r.suspendedLanes|a))!==0?0:u}function Na(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function xr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function gd(){var r=se.p;return r!==0?r:(r=window.event,r===void 0?32:dw(r.type))}function xi(r,a){var u=se.p;try{return se.p=r,a()}finally{se.p=u}}var Ai=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Ai,nn="__reactProps$"+Ai,$i="__reactContainer$"+Ai,Go="__reactEvents$"+Ai,eg="__reactListeners$"+Ai,yd="__reactHandles$"+Ai,vd="__reactResources$"+Ai,Ki="__reactMarker$"+Ai;function $o(r){delete r[Ut],delete r[nn],delete r[Go],delete r[eg],delete r[yd]}function Qi(r){var a=r[Ut];if(a)return a;for(var u=r.parentNode;u;){if(a=u[$i]||u[Ut]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=XE(r);r!==null;){if(u=r[Ut])return u;r=XE(r)}return a}r=u,u=r.parentNode}return null}function ri(r){if(r=r[Ut]||r[$i]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Hn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Yi(r){var a=r[vd];return a||(a=r[vd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Bt(r){r[Ki]=!0}var Fu=new Set,qu={};function Xi(r,a){Wi(r,a),Wi(r+"Capture",a)}function Wi(r,a){for(qu[r]=a,r=0;r<a.length;r++)Fu.add(a[r])}var Hu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gu={},$u={};function _d(r){return jt.call($u,r)?!0:jt.call(Gu,r)?!1:Hu.test(r)?$u[r]=!0:(Gu[r]=!0,!1)}function Ko(r,a,u){if(_d(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function Gn(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function Ft(r,a,u,c){if(c===null)r.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+c)}}function rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function fs(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ku(r,a,u){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return p.call(this)},set:function(T){u=""+T,y.call(this,T)}}),Object.defineProperty(r,a,{enumerable:c.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function it(r){if(!r._valueTracker){var a=fs(r)?"checked":"value";r._valueTracker=Ku(r,a,""+r[a])}}function ka(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),c="";return r&&(c=fs(r)?r.checked?"true":"false":r.value),r=c,r!==u?(a.setValue(r),!0):!1}function Zi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Va=/[\n"\\]/g;function Vn(r){return r.replace(Va,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Qo(r,a,u,c,p,y,T,A){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),a!=null?T==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+rn(a)):r.value!==""+rn(a)&&(r.value=""+rn(a)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),a!=null?Qu(r,T,rn(a)):u!=null?Qu(r,T,rn(u)):c!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+rn(A):r.removeAttribute("name")}function bd(r,a,u,c,p,y,T,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){it(r);return}u=u!=null?""+rn(u):"",a=a!=null?""+rn(a):u,A||a===r.value||(r.value=a),r.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=A?r.checked:!!c,r.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),it(r)}function Qu(r,a,u){a==="number"&&Zi(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function ms(r,a,u,c){if(r=r.options,a){a={};for(var p=0;p<u.length;p++)a["$"+u[p]]=!0;for(u=0;u<r.length;u++)p=a.hasOwnProperty("$"+r[u].value),r[u].selected!==p&&(r[u].selected=p),p&&c&&(r[u].defaultSelected=!0)}else{for(u=""+rn(u),a=null,p=0;p<r.length;p++){if(r[p].value===u){r[p].selected=!0,c&&(r[p].defaultSelected=!0);return}a!==null||r[p].disabled||(a=r[p])}a!==null&&(a.selected=!0)}}function Td(r,a,u){if(a!=null&&(a=""+rn(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+rn(u):""}function ps(r,a,u,c){if(a==null){if(c!=null){if(u!=null)throw Error(i(92));if(ge(c)){if(1<c.length)throw Error(i(93));c=c[0]}u=c}u==null&&(u=""),a=u}u=rn(a),r.defaultValue=u,c=r.textContent,c===u&&c!==""&&c!==null&&(r.value=c),it(r)}function Mn(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var Ed=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yu(r,a,u){var c=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?c?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":c?r.setProperty(a,u):typeof u!="number"||u===0||Ed.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function Xu(r,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,u!=null){for(var c in u)!u.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&u[p]!==c&&Yu(r,p,c)}else for(var y in a)a.hasOwnProperty(y)&&Yu(r,y,a[y])}function Yo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xo(r){return gs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ii(){}var Wu=null;function si(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ys=null,Ji=null;function Ma(r){var a=ri(r);if(a&&(r=a.stateNode)){var u=r[nn]||null;e:switch(r=a.stateNode,a.type){case"input":if(Qo(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Vn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var c=u[a];if(c!==r&&c.form===r.form){var p=c[nn]||null;if(!p)throw Error(i(90));Qo(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<u.length;a++)c=u[a],c.form===r.form&&ka(c)}break e;case"textarea":Td(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&ms(r,!!u.multiple,a,!1)}}}var Wo=!1;function vs(r,a,u){if(Wo)return r(a,u);Wo=!0;try{var c=r(a);return c}finally{if(Wo=!1,(ys!==null||Ji!==null)&&(yf(),ys&&(a=ys,r=Ji,Ji=ys=null,Ma(a),r)))for(a=0;a<r.length;a++)Ma(r[a])}}function Ri(r,a){var u=r.stateNode;if(u===null)return null;var c=u[nn]||null;if(c===null)return null;u=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pa=!1;if(ai)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){Pa=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{Pa=!1}var er=null,Zu=null,Oa=null;function Ju(){if(Oa)return Oa;var r,a=Zu,u=a.length,c,p="value"in er?er.value:er.textContent,y=p.length;for(r=0;r<u&&a[r]===p[r];r++);var T=u-r;for(c=1;c<=T&&a[u-c]===p[y-c];c++);return Oa=p.slice(r,1<c?1-c:void 0)}function La(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Ar(){return!0}function Ci(){return!1}function ln(r){function a(u,c,p,y,T){this._reactName=u,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(u=r[A],this[A]=u?u(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ar:Ci,this.isPropagationStopped=Ci,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ar)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ar)},persist:function(){},isPersistent:Ar}),a}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=ln(Ir),_s=v({},Ir,{view:0,detail:0}),ec=ln(_s),bs,Zo,nr,Jo=v({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==nr&&(nr&&r.type==="mousemove"?(bs=r.screenX-nr.screenX,Zo=r.screenY-nr.screenY):Zo=bs=0,nr=r),bs)},movementY:function(r){return"movementY"in r?r.movementY:Zo}}),tc=ln(Jo),ja=v({},Jo,{dataTransfer:0}),Sd=ln(ja),xd=v({},_s,{relatedTarget:0}),za=ln(xd),nc=v({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Ad=ln(nc),el=v({},Ir,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Id=ln(el),Rd=v({},Ir,{data:0}),ir=ln(Rd),Cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kd(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Nd[r])?!!a[r]:!1}function Ts(){return kd}var Rn=v({},_s,{key:function(r){if(r.key){var a=Cd[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=La(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Dd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(r){return r.type==="keypress"?La(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?La(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Vd=ln(Rn),Md=v({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rr=ln(Md),m=v({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),b=ln(m),w=v({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=ln(w),K=v({},Jo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=ln(K),de=v({},Ir,{newState:0,oldState:0}),Oe=ln(de),Nt=[9,13,27,32],Je=ai&&"CompositionEvent"in window,vt=null;ai&&"documentMode"in document&&(vt=document.documentMode);var oi=ai&&"TextEvent"in window&&!vt,rr=ai&&(!Je||vt&&8<vt&&11>=vt),Di=" ",Ni=!1;function Ua(r,a){switch(r){case"keyup":return Nt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var nl=!1;function VN(r,a){switch(r){case"compositionend":return tl(a);case"keypress":return a.which!==32?null:(Ni=!0,Di);case"textInput":return r=a.data,r===Di&&Ni?null:r;default:return null}}function MN(r,a){if(nl)return r==="compositionend"||!Je&&Ua(r,a)?(r=Ju(),Oa=Zu=er=null,nl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return rr&&a.locale!=="ko"?null:a.data;default:return null}}var PN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jb(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!PN[r.type]:a==="textarea"}function eT(r,a,u,c){ys?Ji?Ji.push(c):Ji=[c]:ys=c,a=Sf(a,"onChange"),0<a.length&&(u=new tr("onChange","change",null,u,c),r.push({event:u,listeners:a}))}var ic=null,rc=null;function ON(r){OE(r,0)}function Pd(r){var a=Hn(r);if(ka(a))return r}function tT(r,a){if(r==="change")return a}var nT=!1;if(ai){var tg;if(ai){var ng="oninput"in document;if(!ng){var iT=document.createElement("div");iT.setAttribute("oninput","return;"),ng=typeof iT.oninput=="function"}tg=ng}else tg=!1;nT=tg&&(!document.documentMode||9<document.documentMode)}function rT(){ic&&(ic.detachEvent("onpropertychange",sT),rc=ic=null)}function sT(r){if(r.propertyName==="value"&&Pd(rc)){var a=[];eT(a,rc,r,si(r)),vs(ON,a)}}function LN(r,a,u){r==="focusin"?(rT(),ic=a,rc=u,ic.attachEvent("onpropertychange",sT)):r==="focusout"&&rT()}function jN(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Pd(rc)}function zN(r,a){if(r==="click")return Pd(a)}function UN(r,a){if(r==="input"||r==="change")return Pd(a)}function BN(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var $n=typeof Object.is=="function"?Object.is:BN;function sc(r,a){if($n(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),c=Object.keys(a);if(u.length!==c.length)return!1;for(c=0;c<u.length;c++){var p=u[c];if(!jt.call(a,p)||!$n(r[p],a[p]))return!1}return!0}function aT(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function oT(r,a){var u=aT(r);r=0;for(var c;u;){if(u.nodeType===3){if(c=r+u.textContent.length,r<=a&&c>=a)return{node:u,offset:a-r};r=c}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=aT(u)}}function lT(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?lT(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function uT(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Zi(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=Zi(r.document)}return a}function ig(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var FN=ai&&"documentMode"in document&&11>=document.documentMode,il=null,rg=null,ac=null,sg=!1;function cT(r,a,u){var c=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;sg||il==null||il!==Zi(c)||(c=il,"selectionStart"in c&&ig(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ac&&sc(ac,c)||(ac=c,c=Sf(rg,"onSelect"),0<c.length&&(a=new tr("onSelect","select",null,a,u),r.push({event:a,listeners:c}),a.target=il)))}function Ba(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var rl={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},ag={},hT={};ai&&(hT=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Fa(r){if(ag[r])return ag[r];if(!rl[r])return r;var a=rl[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in hT)return ag[r]=a[u];return r}var dT=Fa("animationend"),fT=Fa("animationiteration"),mT=Fa("animationstart"),qN=Fa("transitionrun"),HN=Fa("transitionstart"),GN=Fa("transitioncancel"),pT=Fa("transitionend"),gT=new Map,og="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");og.push("scrollEnd");function ki(r,a){gT.set(r,a),Xi(a,[r])}var Od=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},li=[],sl=0,lg=0;function Ld(){for(var r=sl,a=lg=sl=0;a<r;){var u=li[a];li[a++]=null;var c=li[a];li[a++]=null;var p=li[a];li[a++]=null;var y=li[a];if(li[a++]=null,c!==null&&p!==null){var T=c.pending;T===null?p.next=p:(p.next=T.next,T.next=p),c.pending=p}y!==0&&yT(u,p,y)}}function jd(r,a,u,c){li[sl++]=r,li[sl++]=a,li[sl++]=u,li[sl++]=c,lg|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function ug(r,a,u,c){return jd(r,a,u,c),zd(r)}function qa(r,a){return jd(r,null,null,a),zd(r)}function yT(r,a,u){r.lanes|=u;var c=r.alternate;c!==null&&(c.lanes|=u);for(var p=!1,y=r.return;y!==null;)y.childLanes|=u,c=y.alternate,c!==null&&(c.childLanes|=u),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&a!==null&&(p=31-Dt(u),r=y.hiddenUpdates,c=r[p],c===null?r[p]=[a]:c.push(a),a.lane=u|536870912),y):null}function zd(r){if(50<Rc)throw Rc=0,vy=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var al={};function $N(r,a,u,c){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(r,a,u,c){return new $N(r,a,u,c)}function cg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Cr(r,a){var u=r.alternate;return u===null?(u=Kn(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function vT(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Ud(r,a,u,c,p,y){var T=0;if(c=r,typeof r=="function")cg(r)&&(T=1);else if(typeof r=="string")T=Wk(r,u,me.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=Kn(31,u,a,p),r.elementType=V,r.lanes=y,r;case D:return Ha(u.children,p,y,a);case k:T=8,p|=24;break;case z:return r=Kn(12,u,a,p|2),r.elementType=z,r.lanes=y,r;case ne:return r=Kn(13,u,a,p),r.elementType=ne,r.lanes=y,r;case ee:return r=Kn(19,u,a,p),r.elementType=ee,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case P:T=10;break e;case U:T=9;break e;case W:T=11;break e;case x:T=14;break e;case I:T=16,c=null;break e}T=29,u=Error(i(130,r===null?"null":typeof r,"")),c=null}return a=Kn(T,u,a,p),a.elementType=r,a.type=c,a.lanes=y,a}function Ha(r,a,u,c){return r=Kn(7,r,c,a),r.lanes=u,r}function hg(r,a,u){return r=Kn(6,r,null,a),r.lanes=u,r}function _T(r){var a=Kn(18,null,null,0);return a.stateNode=r,a}function dg(r,a,u){return a=Kn(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var bT=new WeakMap;function ui(r,a){if(typeof r=="object"&&r!==null){var u=bT.get(r);return u!==void 0?u:(a={value:r,source:a,stack:Lu(a)},bT.set(r,a),a)}return{value:r,source:a,stack:Lu(a)}}var ol=[],ll=0,Bd=null,oc=0,ci=[],hi=0,Es=null,sr=1,ar="";function Dr(r,a){ol[ll++]=oc,ol[ll++]=Bd,Bd=r,oc=a}function TT(r,a,u){ci[hi++]=sr,ci[hi++]=ar,ci[hi++]=Es,Es=r;var c=sr;r=ar;var p=32-Dt(c)-1;c&=~(1<<p),u+=1;var y=32-Dt(a)+p;if(30<y){var T=p-p%5;y=(c&(1<<T)-1).toString(32),c>>=T,p-=T,sr=1<<32-Dt(a)+p|u<<p|c,ar=y+r}else sr=1<<y|u<<p|c,ar=r}function fg(r){r.return!==null&&(Dr(r,1),TT(r,1,0))}function mg(r){for(;r===Bd;)Bd=ol[--ll],ol[ll]=null,oc=ol[--ll],ol[ll]=null;for(;r===Es;)Es=ci[--hi],ci[hi]=null,ar=ci[--hi],ci[hi]=null,sr=ci[--hi],ci[hi]=null}function ET(r,a){ci[hi++]=sr,ci[hi++]=ar,ci[hi++]=Es,sr=a.id,ar=a.overflow,Es=r}var un=null,pt=null,Ke=!1,ws=null,di=!1,pg=Error(i(519));function Ss(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lc(ui(a,r)),pg}function wT(r){var a=r.stateNode,u=r.type,c=r.memoizedProps;switch(a[Ut]=r,a[nn]=c,u){case"dialog":Fe("cancel",a),Fe("close",a);break;case"iframe":case"object":case"embed":Fe("load",a);break;case"video":case"audio":for(u=0;u<Dc.length;u++)Fe(Dc[u],a);break;case"source":Fe("error",a);break;case"img":case"image":case"link":Fe("error",a),Fe("load",a);break;case"details":Fe("toggle",a);break;case"input":Fe("invalid",a),bd(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Fe("invalid",a);break;case"textarea":Fe("invalid",a),ps(a,c.value,c.defaultValue,c.children)}u=c.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||c.suppressHydrationWarning===!0||UE(a.textContent,u)?(c.popover!=null&&(Fe("beforetoggle",a),Fe("toggle",a)),c.onScroll!=null&&Fe("scroll",a),c.onScrollEnd!=null&&Fe("scrollend",a),c.onClick!=null&&(a.onclick=Ii),a=!0):a=!1,a||Ss(r,!0)}function ST(r){for(un=r.return;un;)switch(un.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:un=un.return}}function ul(r){if(r!==un)return!1;if(!Ke)return ST(r),Ke=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Vy(r.type,r.memoizedProps)),u=!u),u&&pt&&Ss(r),ST(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));pt=YE(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));pt=YE(r)}else a===27?(a=pt,js(r.type)?(r=jy,jy=null,pt=r):pt=a):pt=un?mi(r.stateNode.nextSibling):null;return!0}function Ga(){pt=un=null,Ke=!1}function gg(){var r=ws;return r!==null&&(jn===null?jn=r:jn.push.apply(jn,r),ws=null),r}function lc(r){ws===null?ws=[r]:ws.push(r)}var yg=B(null),$a=null,Nr=null;function xs(r,a,u){fe(yg,a._currentValue),a._currentValue=u}function kr(r){r._currentValue=yg.current,te(yg)}function vg(r,a,u){for(;r!==null;){var c=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),r===u)break;r=r.return}}function _g(r,a,u,c){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=p;for(var j=0;j<a.length;j++)if(A.context===a[j]){y.lanes|=u,A=y.alternate,A!==null&&(A.lanes|=u),vg(y.return,u,r),c||(T=null);break e}y=A.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(i(341));T.lanes|=u,y=T.alternate,y!==null&&(y.lanes|=u),vg(T,u,r),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===r){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function cl(r,a,u,c){r=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var A=p.type;$n(p.pendingProps.value,T.value)||(r!==null?r.push(A):r=[A])}}else if(p===Qe.current){if(T=p.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Pc):r=[Pc])}p=p.return}r!==null&&_g(a,r,u,c),a.flags|=262144}function Fd(r){for(r=r.firstContext;r!==null;){if(!$n(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ka(r){$a=r,Nr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function cn(r){return xT($a,r)}function qd(r,a){return $a===null&&Ka(r),xT(r,a)}function xT(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Nr===null){if(r===null)throw Error(i(308));Nr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Nr=Nr.next=a;return u}var KN=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,c){r.push(c)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},QN=n.unstable_scheduleCallback,YN=n.unstable_NormalPriority,qt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bg(){return{controller:new KN,data:new Map,refCount:0}}function uc(r){r.refCount--,r.refCount===0&&QN(YN,function(){r.controller.abort()})}var cc=null,Tg=0,hl=0,dl=null;function XN(r,a){if(cc===null){var u=cc=[];Tg=0,hl=Sy(),dl={status:"pending",value:void 0,then:function(c){u.push(c)}}}return Tg++,a.then(AT,AT),a}function AT(){if(--Tg===0&&cc!==null){dl!==null&&(dl.status="fulfilled");var r=cc;cc=null,hl=0,dl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function WN(r,a){var u=[],c={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return r.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<u.length;p++)(0,u[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),c}var IT=F.S;F.S=function(r,a){cE=In(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&XN(r,a),IT!==null&&IT(r,a)};var Qa=B(null);function Eg(){var r=Qa.current;return r!==null?r:dt.pooledCache}function Hd(r,a){a===null?fe(Qa,Qa.current):fe(Qa,a.pool)}function RT(){var r=Eg();return r===null?null:{parent:qt._currentValue,pool:r}}var fl=Error(i(460)),wg=Error(i(474)),Gd=Error(i(542)),$d={then:function(){}};function CT(r){return r=r.status,r==="fulfilled"||r==="rejected"}function DT(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then(Ii,Ii),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,kT(r),r;default:if(typeof a.status=="string")a.then(Ii,Ii);else{if(r=dt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,kT(r),r}throw Xa=a,fl}}function Ya(r){try{var a=r._init;return a(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Xa=u,fl):u}}var Xa=null;function NT(){if(Xa===null)throw Error(i(459));var r=Xa;return Xa=null,r}function kT(r){if(r===fl||r===Gd)throw Error(i(483))}var ml=null,hc=0;function Kd(r){var a=hc;return hc+=1,ml===null&&(ml=[]),DT(ml,r,a)}function dc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Qd(r,a){throw a.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function VT(r){function a(G,q){if(r){var Q=G.deletions;Q===null?(G.deletions=[q],G.flags|=16):Q.push(q)}}function u(G,q){if(!r)return null;for(;q!==null;)a(G,q),q=q.sibling;return null}function c(G){for(var q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function p(G,q){return G=Cr(G,q),G.index=0,G.sibling=null,G}function y(G,q,Q){return G.index=Q,r?(Q=G.alternate,Q!==null?(Q=Q.index,Q<q?(G.flags|=67108866,q):Q):(G.flags|=67108866,q)):(G.flags|=1048576,q)}function T(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function A(G,q,Q,ae){return q===null||q.tag!==6?(q=hg(Q,G.mode,ae),q.return=G,q):(q=p(q,Q),q.return=G,q)}function j(G,q,Q,ae){var xe=Q.type;return xe===D?ie(G,q,Q.props.children,ae,Q.key):q!==null&&(q.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===I&&Ya(xe)===q.type)?(q=p(q,Q.props),dc(q,Q),q.return=G,q):(q=Ud(Q.type,Q.key,Q.props,null,G.mode,ae),dc(q,Q),q.return=G,q)}function Y(G,q,Q,ae){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=dg(Q,G.mode,ae),q.return=G,q):(q=p(q,Q.children||[]),q.return=G,q)}function ie(G,q,Q,ae,xe){return q===null||q.tag!==7?(q=Ha(Q,G.mode,ae,xe),q.return=G,q):(q=p(q,Q),q.return=G,q)}function oe(G,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=hg(""+q,G.mode,Q),q.return=G,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return Q=Ud(q.type,q.key,q.props,null,G.mode,Q),dc(Q,q),Q.return=G,Q;case R:return q=dg(q,G.mode,Q),q.return=G,q;case I:return q=Ya(q),oe(G,q,Q)}if(ge(q)||H(q))return q=Ha(q,G.mode,Q,null),q.return=G,q;if(typeof q.then=="function")return oe(G,Kd(q),Q);if(q.$$typeof===P)return oe(G,qd(G,q),Q);Qd(G,q)}return null}function X(G,q,Q,ae){var xe=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return xe!==null?null:A(G,q,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:return Q.key===xe?j(G,q,Q,ae):null;case R:return Q.key===xe?Y(G,q,Q,ae):null;case I:return Q=Ya(Q),X(G,q,Q,ae)}if(ge(Q)||H(Q))return xe!==null?null:ie(G,q,Q,ae,null);if(typeof Q.then=="function")return X(G,q,Kd(Q),ae);if(Q.$$typeof===P)return X(G,q,qd(G,Q),ae);Qd(G,Q)}return null}function J(G,q,Q,ae,xe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return G=G.get(Q)||null,A(q,G,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return G=G.get(ae.key===null?Q:ae.key)||null,j(q,G,ae,xe);case R:return G=G.get(ae.key===null?Q:ae.key)||null,Y(q,G,ae,xe);case I:return ae=Ya(ae),J(G,q,Q,ae,xe)}if(ge(ae)||H(ae))return G=G.get(Q)||null,ie(q,G,ae,xe,null);if(typeof ae.then=="function")return J(G,q,Q,Kd(ae),xe);if(ae.$$typeof===P)return J(G,q,Q,qd(q,ae),xe);Qd(q,ae)}return null}function ve(G,q,Q,ae){for(var xe=null,We=null,be=q,je=q=0,He=null;be!==null&&je<Q.length;je++){be.index>je?(He=be,be=null):He=be.sibling;var Ze=X(G,be,Q[je],ae);if(Ze===null){be===null&&(be=He);break}r&&be&&Ze.alternate===null&&a(G,be),q=y(Ze,q,je),We===null?xe=Ze:We.sibling=Ze,We=Ze,be=He}if(je===Q.length)return u(G,be),Ke&&Dr(G,je),xe;if(be===null){for(;je<Q.length;je++)be=oe(G,Q[je],ae),be!==null&&(q=y(be,q,je),We===null?xe=be:We.sibling=be,We=be);return Ke&&Dr(G,je),xe}for(be=c(be);je<Q.length;je++)He=J(be,G,je,Q[je],ae),He!==null&&(r&&He.alternate!==null&&be.delete(He.key===null?je:He.key),q=y(He,q,je),We===null?xe=He:We.sibling=He,We=He);return r&&be.forEach(function(qs){return a(G,qs)}),Ke&&Dr(G,je),xe}function Re(G,q,Q,ae){if(Q==null)throw Error(i(151));for(var xe=null,We=null,be=q,je=q=0,He=null,Ze=Q.next();be!==null&&!Ze.done;je++,Ze=Q.next()){be.index>je?(He=be,be=null):He=be.sibling;var qs=X(G,be,Ze.value,ae);if(qs===null){be===null&&(be=He);break}r&&be&&qs.alternate===null&&a(G,be),q=y(qs,q,je),We===null?xe=qs:We.sibling=qs,We=qs,be=He}if(Ze.done)return u(G,be),Ke&&Dr(G,je),xe;if(be===null){for(;!Ze.done;je++,Ze=Q.next())Ze=oe(G,Ze.value,ae),Ze!==null&&(q=y(Ze,q,je),We===null?xe=Ze:We.sibling=Ze,We=Ze);return Ke&&Dr(G,je),xe}for(be=c(be);!Ze.done;je++,Ze=Q.next())Ze=J(be,G,je,Ze.value,ae),Ze!==null&&(r&&Ze.alternate!==null&&be.delete(Ze.key===null?je:Ze.key),q=y(Ze,q,je),We===null?xe=Ze:We.sibling=Ze,We=Ze);return r&&be.forEach(function(lV){return a(G,lV)}),Ke&&Dr(G,je),xe}function ht(G,q,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===D&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:e:{for(var xe=Q.key;q!==null;){if(q.key===xe){if(xe=Q.type,xe===D){if(q.tag===7){u(G,q.sibling),ae=p(q,Q.props.children),ae.return=G,G=ae;break e}}else if(q.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===I&&Ya(xe)===q.type){u(G,q.sibling),ae=p(q,Q.props),dc(ae,Q),ae.return=G,G=ae;break e}u(G,q);break}else a(G,q);q=q.sibling}Q.type===D?(ae=Ha(Q.props.children,G.mode,ae,Q.key),ae.return=G,G=ae):(ae=Ud(Q.type,Q.key,Q.props,null,G.mode,ae),dc(ae,Q),ae.return=G,G=ae)}return T(G);case R:e:{for(xe=Q.key;q!==null;){if(q.key===xe)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){u(G,q.sibling),ae=p(q,Q.children||[]),ae.return=G,G=ae;break e}else{u(G,q);break}else a(G,q);q=q.sibling}ae=dg(Q,G.mode,ae),ae.return=G,G=ae}return T(G);case I:return Q=Ya(Q),ht(G,q,Q,ae)}if(ge(Q))return ve(G,q,Q,ae);if(H(Q)){if(xe=H(Q),typeof xe!="function")throw Error(i(150));return Q=xe.call(Q),Re(G,q,Q,ae)}if(typeof Q.then=="function")return ht(G,q,Kd(Q),ae);if(Q.$$typeof===P)return ht(G,q,qd(G,Q),ae);Qd(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(u(G,q.sibling),ae=p(q,Q),ae.return=G,G=ae):(u(G,q),ae=hg(Q,G.mode,ae),ae.return=G,G=ae),T(G)):u(G,q)}return function(G,q,Q,ae){try{hc=0;var xe=ht(G,q,Q,ae);return ml=null,xe}catch(be){if(be===fl||be===Gd)throw be;var We=Kn(29,be,null,G.mode);return We.lanes=ae,We.return=G,We}finally{}}}var Wa=VT(!0),MT=VT(!1),As=!1;function Sg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xg(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Is(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Rs(r,a,u){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(et&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=zd(r),yT(r,null,u),a}return jd(r,c,a,u),zd(r)}function fc(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var c=a.lanes;c&=r.pendingLanes,u|=c,a.lanes=u,Uu(r,u)}}function Ag(r,a){var u=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,u===c)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var T={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,u=u.next}while(u!==null);y===null?p=y=a:y=y.next=a}else p=y=a;u={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var Ig=!1;function mc(){if(Ig){var r=dl;if(r!==null)throw r}}function pc(r,a,u,c){Ig=!1;var p=r.updateQueue;As=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var j=A,Y=j.next;j.next=null,T===null?y=Y:T.next=Y,T=j;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==T&&(A===null?ie.firstBaseUpdate=Y:A.next=Y,ie.lastBaseUpdate=j))}if(y!==null){var oe=p.baseState;T=0,ie=Y=j=null,A=y;do{var X=A.lane&-536870913,J=X!==A.lane;if(J?(qe&X)===X:(c&X)===X){X!==0&&X===hl&&(Ig=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ve=r,Re=A;X=a;var ht=u;switch(Re.tag){case 1:if(ve=Re.payload,typeof ve=="function"){oe=ve.call(ht,oe,X);break e}oe=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Re.payload,X=typeof ve=="function"?ve.call(ht,oe,X):ve,X==null)break e;oe=v({},oe,X);break e;case 2:As=!0}}X=A.callback,X!==null&&(r.flags|=64,J&&(r.flags|=8192),J=p.callbacks,J===null?p.callbacks=[X]:J.push(X))}else J={lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(Y=ie=J,j=oe):ie=ie.next=J,T|=X;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;J=A,A=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);ie===null&&(j=oe),p.baseState=j,p.firstBaseUpdate=Y,p.lastBaseUpdate=ie,y===null&&(p.shared.lanes=0),Vs|=T,r.lanes=T,r.memoizedState=oe}}function PT(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function OT(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)PT(u[r],a)}var pl=B(null),Yd=B(0);function LT(r,a){r=Br,fe(Yd,r),fe(pl,a),Br=r|a.baseLanes}function Rg(){fe(Yd,Br),fe(pl,pl.current)}function Cg(){Br=Yd.current,te(pl),te(Yd)}var Qn=B(null),fi=null;function Cs(r){var a=r.alternate;fe(kt,kt.current&1),fe(Qn,r),fi===null&&(a===null||pl.current!==null||a.memoizedState!==null)&&(fi=r)}function Dg(r){fe(kt,kt.current),fe(Qn,r),fi===null&&(fi=r)}function jT(r){r.tag===22?(fe(kt,kt.current),fe(Qn,r),fi===null&&(fi=r)):Ds()}function Ds(){fe(kt,kt.current),fe(Qn,Qn.current)}function Yn(r){te(Qn),fi===r&&(fi=null),te(kt)}var kt=B(0);function Xd(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Oy(u)||Ly(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Vr=0,Le=null,ut=null,Ht=null,Wd=!1,gl=!1,Za=!1,Zd=0,gc=0,yl=null,ZN=0;function xt(){throw Error(i(321))}function Ng(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!$n(r[u],a[u]))return!1;return!0}function kg(r,a,u,c,p,y){return Vr=y,Le=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=r===null||r.memoizedState===null?T1:Kg,Za=!1,y=u(c,p),Za=!1,gl&&(y=UT(a,u,c,p)),zT(r),y}function zT(r){F.H=_c;var a=ut!==null&&ut.next!==null;if(Vr=0,Ht=ut=Le=null,Wd=!1,gc=0,yl=null,a)throw Error(i(300));r===null||Gt||(r=r.dependencies,r!==null&&Fd(r)&&(Gt=!0))}function UT(r,a,u,c){Le=r;var p=0;do{if(gl&&(yl=null),gc=0,gl=!1,25<=p)throw Error(i(301));if(p+=1,Ht=ut=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}F.H=E1,y=a(u,c)}while(gl);return y}function JN(){var r=F.H,a=r.useState()[0];return a=typeof a.then=="function"?yc(a):a,r=r.useState()[0],(ut!==null?ut.memoizedState:null)!==r&&(Le.flags|=1024),a}function Vg(){var r=Zd!==0;return Zd=0,r}function Mg(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function Pg(r){if(Wd){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Wd=!1}Vr=0,Ht=ut=Le=null,gl=!1,gc=Zd=0,yl=null}function Cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Le.memoizedState=Ht=r:Ht=Ht.next=r,Ht}function Vt(){if(ut===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=ut.next;var a=Ht===null?Le.memoizedState:Ht.next;if(a!==null)Ht=a,ut=r;else{if(r===null)throw Le.alternate===null?Error(i(467)):Error(i(310));ut=r,r={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Ht===null?Le.memoizedState=Ht=r:Ht=Ht.next=r}return Ht}function Jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yc(r){var a=gc;return gc+=1,yl===null&&(yl=[]),r=DT(yl,r,a),a=Le,(Ht===null?a.memoizedState:Ht.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?T1:Kg),r}function ef(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return yc(r);if(r.$$typeof===P)return cn(r)}throw Error(i(438,String(r)))}function Og(r){var a=null,u=Le.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var c=Le.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Jd(),Le.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),c=0;c<r;c++)u[c]=M;return a.index++,u}function Mr(r,a){return typeof a=="function"?a(r):a}function tf(r){var a=Vt();return Lg(a,ut,r)}function Lg(r,a,u){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=u;var p=r.baseQueue,y=c.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}a.baseQueue=p=y,c.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{a=p.next;var A=T=null,j=null,Y=a,ie=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?(qe&oe)===oe:(Vr&oe)===oe){var X=Y.revertLane;if(X===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===hl&&(ie=!0);else if((Vr&X)===X){Y=Y.next,X===hl&&(ie=!0);continue}else oe={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(A=j=oe,T=y):j=j.next=oe,Le.lanes|=X,Vs|=X;oe=Y.action,Za&&u(y,oe),y=Y.hasEagerState?Y.eagerState:u(y,oe)}else X={lane:oe,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(A=j=X,T=y):j=j.next=X,Le.lanes|=oe,Vs|=oe;Y=Y.next}while(Y!==null&&Y!==a);if(j===null?T=y:j.next=A,!$n(y,r.memoizedState)&&(Gt=!0,ie&&(u=dl,u!==null)))throw u;r.memoizedState=y,r.baseState=T,r.baseQueue=j,c.lastRenderedState=y}return p===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function jg(r){var a=Vt(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var c=u.dispatch,p=u.pending,y=a.memoizedState;if(p!==null){u.pending=null;var T=p=p.next;do y=r(y,T.action),T=T.next;while(T!==p);$n(y,a.memoizedState)||(Gt=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),u.lastRenderedState=y}return[y,c]}function BT(r,a,u){var c=Le,p=Vt(),y=Ke;if(y){if(u===void 0)throw Error(i(407));u=u()}else u=a();var T=!$n((ut||p).memoizedState,u);if(T&&(p.memoizedState=u,Gt=!0),p=p.queue,Bg(HT.bind(null,c,p,r),[r]),p.getSnapshot!==a||T||Ht!==null&&Ht.memoizedState.tag&1){if(c.flags|=2048,vl(9,{destroy:void 0},qT.bind(null,c,p,u,a),null),dt===null)throw Error(i(349));y||(Vr&127)!==0||FT(c,a,u)}return u}function FT(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=Le.updateQueue,a===null?(a=Jd(),Le.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function qT(r,a,u,c){a.value=u,a.getSnapshot=c,GT(a)&&$T(r)}function HT(r,a,u){return u(function(){GT(a)&&$T(r)})}function GT(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!$n(r,u)}catch{return!0}}function $T(r){var a=qa(r,2);a!==null&&zn(a,r,2)}function zg(r){var a=Cn();if(typeof r=="function"){var u=r;if(r=u(),Za){ii(!0);try{u()}finally{ii(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:r},a}function KT(r,a,u,c){return r.baseState=u,Lg(r,ut,typeof c=="function"?c:Mr)}function ek(r,a,u,c,p){if(sf(r))throw Error(i(485));if(r=a.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};F.T!==null?u(!0):y.isTransition=!1,c(y),u=a.pending,u===null?(y.next=a.pending=y,QT(a,y)):(y.next=u.next,a.pending=u.next=y)}}function QT(r,a){var u=a.action,c=a.payload,p=r.state;if(a.isTransition){var y=F.T,T={};F.T=T;try{var A=u(p,c),j=F.S;j!==null&&j(T,A),YT(r,a,A)}catch(Y){Ug(r,a,Y)}finally{y!==null&&T.types!==null&&(y.types=T.types),F.T=y}}else try{y=u(p,c),YT(r,a,y)}catch(Y){Ug(r,a,Y)}}function YT(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(c){XT(r,a,c)},function(c){return Ug(r,a,c)}):XT(r,a,u)}function XT(r,a,u){a.status="fulfilled",a.value=u,WT(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,QT(r,u)))}function Ug(r,a,u){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=u,WT(a),a=a.next;while(a!==c)}r.action=null}function WT(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function ZT(r,a){return a}function JT(r,a){if(Ke){var u=dt.formState;if(u!==null){e:{var c=Le;if(Ke){if(pt){t:{for(var p=pt,y=di;p.nodeType!==8;){if(!y){p=null;break t}if(p=mi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){pt=mi(p.nextSibling),c=p.data==="F!";break e}}Ss(c)}c=!1}c&&(a=u[0])}}return u=Cn(),u.memoizedState=u.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ZT,lastRenderedState:a},u.queue=c,u=v1.bind(null,Le,c),c.dispatch=u,c=zg(!1),y=$g.bind(null,Le,!1,c.queue),c=Cn(),p={state:a,dispatch:null,action:r,pending:null},c.queue=p,u=ek.bind(null,Le,p,y,u),p.dispatch=u,c.memoizedState=r,[a,u,!1]}function e1(r){var a=Vt();return t1(a,ut,r)}function t1(r,a,u){if(a=Lg(r,a,ZT)[0],r=tf(Mr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=yc(a)}catch(T){throw T===fl?Gd:T}else c=a;a=Vt();var p=a.queue,y=p.dispatch;return u!==a.memoizedState&&(Le.flags|=2048,vl(9,{destroy:void 0},tk.bind(null,p,u),null)),[c,y,r]}function tk(r,a){r.action=a}function n1(r){var a=Vt(),u=ut;if(u!==null)return t1(a,u,r);Vt(),a=a.memoizedState,u=Vt();var c=u.queue.dispatch;return u.memoizedState=r,[a,c,!1]}function vl(r,a,u,c){return r={tag:r,create:u,deps:c,inst:a,next:null},a=Le.updateQueue,a===null&&(a=Jd(),Le.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(c=u.next,u.next=r,r.next=c,a.lastEffect=r),r}function i1(){return Vt().memoizedState}function nf(r,a,u,c){var p=Cn();Le.flags|=r,p.memoizedState=vl(1|a,{destroy:void 0},u,c===void 0?null:c)}function rf(r,a,u,c){var p=Vt();c=c===void 0?null:c;var y=p.memoizedState.inst;ut!==null&&c!==null&&Ng(c,ut.memoizedState.deps)?p.memoizedState=vl(a,y,u,c):(Le.flags|=r,p.memoizedState=vl(1|a,y,u,c))}function r1(r,a){nf(8390656,8,r,a)}function Bg(r,a){rf(2048,8,r,a)}function nk(r){Le.flags|=4;var a=Le.updateQueue;if(a===null)a=Jd(),Le.updateQueue=a,a.events=[r];else{var u=a.events;u===null?a.events=[r]:u.push(r)}}function s1(r){var a=Vt().memoizedState;return nk({ref:a,nextImpl:r}),function(){if((et&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function a1(r,a){return rf(4,2,r,a)}function o1(r,a){return rf(4,4,r,a)}function l1(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function u1(r,a,u){u=u!=null?u.concat([r]):null,rf(4,4,l1.bind(null,a,r),u)}function Fg(){}function c1(r,a){var u=Vt();a=a===void 0?null:a;var c=u.memoizedState;return a!==null&&Ng(a,c[1])?c[0]:(u.memoizedState=[r,a],r)}function h1(r,a){var u=Vt();a=a===void 0?null:a;var c=u.memoizedState;if(a!==null&&Ng(a,c[1]))return c[0];if(c=r(),Za){ii(!0);try{r()}finally{ii(!1)}}return u.memoizedState=[c,a],c}function qg(r,a,u){return u===void 0||(Vr&1073741824)!==0&&(qe&261930)===0?r.memoizedState=a:(r.memoizedState=u,r=dE(),Le.lanes|=r,Vs|=r,u)}function d1(r,a,u,c){return $n(u,a)?u:pl.current!==null?(r=qg(r,u,c),$n(r,a)||(Gt=!0),r):(Vr&42)===0||(Vr&1073741824)!==0&&(qe&261930)===0?(Gt=!0,r.memoizedState=u):(r=dE(),Le.lanes|=r,Vs|=r,a)}function f1(r,a,u,c,p){var y=se.p;se.p=y!==0&&8>y?y:8;var T=F.T,A={};F.T=A,$g(r,!1,a,u);try{var j=p(),Y=F.S;if(Y!==null&&Y(A,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ie=WN(j,c);vc(r,a,ie,Zn(r))}else vc(r,a,c,Zn(r))}catch(oe){vc(r,a,{then:function(){},status:"rejected",reason:oe},Zn())}finally{se.p=y,T!==null&&A.types!==null&&(T.types=A.types),F.T=T}}function ik(){}function Hg(r,a,u,c){if(r.tag!==5)throw Error(i(476));var p=m1(r).queue;f1(r,p,a,he,u===null?ik:function(){return p1(r),u(c)})}function m1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:he},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function p1(r){var a=m1(r);a.next===null&&(a=r.alternate.memoizedState),vc(r,a.next.queue,{},Zn())}function Gg(){return cn(Pc)}function g1(){return Vt().memoizedState}function y1(){return Vt().memoizedState}function rk(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=Zn();r=Is(u);var c=Rs(a,r,u);c!==null&&(zn(c,a,u),fc(c,a,u)),a={cache:bg()},r.payload=a;return}a=a.return}}function sk(r,a,u){var c=Zn();u={lane:c,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},sf(r)?_1(a,u):(u=ug(r,a,u,c),u!==null&&(zn(u,r,c),b1(u,a,c)))}function v1(r,a,u){var c=Zn();vc(r,a,u,c)}function vc(r,a,u,c){var p={lane:c,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(sf(r))_1(a,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,A=y(T,u);if(p.hasEagerState=!0,p.eagerState=A,$n(A,T))return jd(r,a,p,0),dt===null&&Ld(),!1}catch{}finally{}if(u=ug(r,a,p,c),u!==null)return zn(u,r,c),b1(u,a,c),!0}return!1}function $g(r,a,u,c){if(c={lane:2,revertLane:Sy(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},sf(r)){if(a)throw Error(i(479))}else a=ug(r,u,c,2),a!==null&&zn(a,r,2)}function sf(r){var a=r.alternate;return r===Le||a!==null&&a===Le}function _1(r,a){gl=Wd=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function b1(r,a,u){if((u&4194048)!==0){var c=a.lanes;c&=r.pendingLanes,u|=c,a.lanes=u,Uu(r,u)}}var _c={readContext:cn,use:ef,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};_c.useEffectEvent=xt;var T1={readContext:cn,use:ef,useCallback:function(r,a){return Cn().memoizedState=[r,a===void 0?null:a],r},useContext:cn,useEffect:r1,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,nf(4194308,4,l1.bind(null,a,r),u)},useLayoutEffect:function(r,a){return nf(4194308,4,r,a)},useInsertionEffect:function(r,a){nf(4,2,r,a)},useMemo:function(r,a){var u=Cn();a=a===void 0?null:a;var c=r();if(Za){ii(!0);try{r()}finally{ii(!1)}}return u.memoizedState=[c,a],c},useReducer:function(r,a,u){var c=Cn();if(u!==void 0){var p=u(a);if(Za){ii(!0);try{u(a)}finally{ii(!1)}}}else p=a;return c.memoizedState=c.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},c.queue=r,r=r.dispatch=sk.bind(null,Le,r),[c.memoizedState,r]},useRef:function(r){var a=Cn();return r={current:r},a.memoizedState=r},useState:function(r){r=zg(r);var a=r.queue,u=v1.bind(null,Le,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:Fg,useDeferredValue:function(r,a){var u=Cn();return qg(u,r,a)},useTransition:function(){var r=zg(!1);return r=f1.bind(null,Le,r.queue,!0,!1),Cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var c=Le,p=Cn();if(Ke){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),dt===null)throw Error(i(349));(qe&127)!==0||FT(c,a,u)}p.memoizedState=u;var y={value:u,getSnapshot:a};return p.queue=y,r1(HT.bind(null,c,y,r),[r]),c.flags|=2048,vl(9,{destroy:void 0},qT.bind(null,c,y,u,a),null),u},useId:function(){var r=Cn(),a=dt.identifierPrefix;if(Ke){var u=ar,c=sr;u=(c&~(1<<32-Dt(c)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Zd++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=ZN++,a="_"+a+"r_"+u.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:Gg,useFormState:JT,useActionState:JT,useOptimistic:function(r){var a=Cn();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=$g.bind(null,Le,!0,u),u.dispatch=a,[r,a]},useMemoCache:Og,useCacheRefresh:function(){return Cn().memoizedState=rk.bind(null,Le)},useEffectEvent:function(r){var a=Cn(),u={impl:r};return a.memoizedState=u,function(){if((et&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Kg={readContext:cn,use:ef,useCallback:c1,useContext:cn,useEffect:Bg,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:o1,useMemo:h1,useReducer:tf,useRef:i1,useState:function(){return tf(Mr)},useDebugValue:Fg,useDeferredValue:function(r,a){var u=Vt();return d1(u,ut.memoizedState,r,a)},useTransition:function(){var r=tf(Mr)[0],a=Vt().memoizedState;return[typeof r=="boolean"?r:yc(r),a]},useSyncExternalStore:BT,useId:g1,useHostTransitionStatus:Gg,useFormState:e1,useActionState:e1,useOptimistic:function(r,a){var u=Vt();return KT(u,ut,r,a)},useMemoCache:Og,useCacheRefresh:y1};Kg.useEffectEvent=s1;var E1={readContext:cn,use:ef,useCallback:c1,useContext:cn,useEffect:Bg,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:o1,useMemo:h1,useReducer:jg,useRef:i1,useState:function(){return jg(Mr)},useDebugValue:Fg,useDeferredValue:function(r,a){var u=Vt();return ut===null?qg(u,r,a):d1(u,ut.memoizedState,r,a)},useTransition:function(){var r=jg(Mr)[0],a=Vt().memoizedState;return[typeof r=="boolean"?r:yc(r),a]},useSyncExternalStore:BT,useId:g1,useHostTransitionStatus:Gg,useFormState:n1,useActionState:n1,useOptimistic:function(r,a){var u=Vt();return ut!==null?KT(u,ut,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Og,useCacheRefresh:y1};E1.useEffectEvent=s1;function Qg(r,a,u,c){a=r.memoizedState,u=u(c,a),u=u==null?a:v({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Yg={enqueueSetState:function(r,a,u){r=r._reactInternals;var c=Zn(),p=Is(c);p.payload=a,u!=null&&(p.callback=u),a=Rs(r,p,c),a!==null&&(zn(a,r,c),fc(a,r,c))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var c=Zn(),p=Is(c);p.tag=1,p.payload=a,u!=null&&(p.callback=u),a=Rs(r,p,c),a!==null&&(zn(a,r,c),fc(a,r,c))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Zn(),c=Is(u);c.tag=2,a!=null&&(c.callback=a),a=Rs(r,c,u),a!==null&&(zn(a,r,u),fc(a,r,u))}};function w1(r,a,u,c,p,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,y,T):a.prototype&&a.prototype.isPureReactComponent?!sc(u,c)||!sc(p,y):!0}function S1(r,a,u,c){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,c),a.state!==r&&Yg.enqueueReplaceState(a,a.state,null)}function Ja(r,a){var u=a;if("ref"in a){u={};for(var c in a)c!=="ref"&&(u[c]=a[c])}if(r=r.defaultProps){u===a&&(u=v({},u));for(var p in r)u[p]===void 0&&(u[p]=r[p])}return u}function x1(r){Od(r)}function A1(r){console.error(r)}function I1(r){Od(r)}function af(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function R1(r,a,u){try{var c=r.onCaughtError;c(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Xg(r,a,u){return u=Is(u),u.tag=3,u.payload={element:null},u.callback=function(){af(r,a)},u}function C1(r){return r=Is(r),r.tag=3,r}function D1(r,a,u,c){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;r.payload=function(){return p(y)},r.callback=function(){R1(a,u,c)}}var T=u.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){R1(a,u,c),typeof p!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function ak(r,a,u,c,p){if(u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=u.alternate,a!==null&&cl(a,u,p,!0),u=Qn.current,u!==null){switch(u.tag){case 31:case 13:return fi===null?vf():u.alternate===null&&At===0&&(At=3),u.flags&=-257,u.flags|=65536,u.lanes=p,c===$d?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([c]):a.add(c),Ty(r,c,p)),!1;case 22:return u.flags|=65536,c===$d?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([c]):u.add(c)),Ty(r,c,p)),!1}throw Error(i(435,u.tag))}return Ty(r,c,p),vf(),!1}if(Ke)return a=Qn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==pg&&(r=Error(i(422),{cause:c}),lc(ui(r,u)))):(c!==pg&&(a=Error(i(423),{cause:c}),lc(ui(a,u))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,c=ui(c,u),p=Xg(r.stateNode,c,p),Ag(r,p),At!==4&&(At=2)),!1;var y=Error(i(520),{cause:c});if(y=ui(y,u),Ic===null?Ic=[y]:Ic.push(y),At!==4&&(At=2),a===null)return!0;c=ui(c,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=p&-p,u.lanes|=r,r=Xg(u.stateNode,c,r),Ag(u,r),!1;case 1:if(a=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ms===null||!Ms.has(y))))return u.flags|=65536,p&=-p,u.lanes|=p,p=C1(p),D1(p,r,u,c),Ag(u,p),!1}u=u.return}while(u!==null);return!1}var Wg=Error(i(461)),Gt=!1;function hn(r,a,u,c){a.child=r===null?MT(a,null,u,c):Wa(a,r.child,u,c)}function N1(r,a,u,c,p){u=u.render;var y=a.ref;if("ref"in c){var T={};for(var A in c)A!=="ref"&&(T[A]=c[A])}else T=c;return Ka(a),c=kg(r,a,u,T,y,p),A=Vg(),r!==null&&!Gt?(Mg(r,a,p),Pr(r,a,p)):(Ke&&A&&fg(a),a.flags|=1,hn(r,a,c,p),a.child)}function k1(r,a,u,c,p){if(r===null){var y=u.type;return typeof y=="function"&&!cg(y)&&y.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=y,V1(r,a,y,c,p)):(r=Ud(u.type,null,c,a,a.mode,p),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!sy(r,p)){var T=y.memoizedProps;if(u=u.compare,u=u!==null?u:sc,u(T,c)&&r.ref===a.ref)return Pr(r,a,p)}return a.flags|=1,r=Cr(y,c),r.ref=a.ref,r.return=a,a.child=r}function V1(r,a,u,c,p){if(r!==null){var y=r.memoizedProps;if(sc(y,c)&&r.ref===a.ref)if(Gt=!1,a.pendingProps=c=y,sy(r,p))(r.flags&131072)!==0&&(Gt=!0);else return a.lanes=r.lanes,Pr(r,a,p)}return Zg(r,a,u,c,p)}function M1(r,a,u,c){var p=c.children,y=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|u:u,r!==null){for(c=a.child=r.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~y}else c=0,a.child=null;return P1(r,a,y,u,c)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Hd(a,y!==null?y.cachePool:null),y!==null?LT(a,y):Rg(),jT(a);else return c=a.lanes=536870912,P1(r,a,y!==null?y.baseLanes|u:u,u,c)}else y!==null?(Hd(a,y.cachePool),LT(a,y),Ds(),a.memoizedState=null):(r!==null&&Hd(a,null),Rg(),Ds());return hn(r,a,p,u),a.child}function bc(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function P1(r,a,u,c,p){var y=Eg();return y=y===null?null:{parent:qt._currentValue,pool:y},a.memoizedState={baseLanes:u,cachePool:y},r!==null&&Hd(a,null),Rg(),jT(a),r!==null&&cl(r,a,c,!0),a.childLanes=p,null}function of(r,a){return a=uf({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function O1(r,a,u){return Wa(a,r.child,null,u),r=of(a,a.pendingProps),r.flags|=2,Yn(a),a.memoizedState=null,r}function ok(r,a,u){var c=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Ke){if(c.mode==="hidden")return r=of(a,c),a.lanes=536870912,bc(null,r);if(Dg(a),(r=pt)?(r=QE(r,di),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Es!==null?{id:sr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},u=_T(r),u.return=a,a.child=u,un=a,pt=null)):r=null,r===null)throw Ss(a);return a.lanes=536870912,null}return of(a,c)}var y=r.memoizedState;if(y!==null){var T=y.dehydrated;if(Dg(a),p)if(a.flags&256)a.flags&=-257,a=O1(r,a,u);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(Gt||cl(r,a,u,!1),p=(u&r.childLanes)!==0,Gt||p){if(c=dt,c!==null&&(T=Bu(c,u),T!==0&&T!==y.retryLane))throw y.retryLane=T,qa(r,T),zn(c,r,T),Wg;vf(),a=O1(r,a,u)}else r=y.treeContext,pt=mi(T.nextSibling),un=a,Ke=!0,ws=null,di=!1,r!==null&&ET(a,r),a=of(a,c),a.flags|=4096;return a}return r=Cr(r.child,{mode:c.mode,children:c.children}),r.ref=a.ref,a.child=r,r.return=a,r}function lf(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function Zg(r,a,u,c,p){return Ka(a),u=kg(r,a,u,c,void 0,p),c=Vg(),r!==null&&!Gt?(Mg(r,a,p),Pr(r,a,p)):(Ke&&c&&fg(a),a.flags|=1,hn(r,a,u,p),a.child)}function L1(r,a,u,c,p,y){return Ka(a),a.updateQueue=null,u=UT(a,c,u,p),zT(r),c=Vg(),r!==null&&!Gt?(Mg(r,a,y),Pr(r,a,y)):(Ke&&c&&fg(a),a.flags|=1,hn(r,a,u,y),a.child)}function j1(r,a,u,c,p){if(Ka(a),a.stateNode===null){var y=al,T=u.contextType;typeof T=="object"&&T!==null&&(y=cn(T)),y=new u(c,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Yg,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=c,y.state=a.memoizedState,y.refs={},Sg(a),T=u.contextType,y.context=typeof T=="object"&&T!==null?cn(T):al,y.state=a.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(Qg(a,u,T,c),y.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Yg.enqueueReplaceState(y,y.state,null),pc(a,c,y,p),mc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(r===null){y=a.stateNode;var A=a.memoizedProps,j=Ja(u,A);y.props=j;var Y=y.context,ie=u.contextType;T=al,typeof ie=="object"&&ie!==null&&(T=cn(ie));var oe=u.getDerivedStateFromProps;ie=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||Y!==T)&&S1(a,y,c,T),As=!1;var X=a.memoizedState;y.state=X,pc(a,c,y,p),mc(),Y=a.memoizedState,A||X!==Y||As?(typeof oe=="function"&&(Qg(a,u,oe,c),Y=a.memoizedState),(j=As||w1(a,u,j,c,X,Y,T))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=Y),y.props=c,y.state=Y,y.context=T,c=j):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{y=a.stateNode,xg(r,a),T=a.memoizedProps,ie=Ja(u,T),y.props=ie,oe=a.pendingProps,X=y.context,Y=u.contextType,j=al,typeof Y=="object"&&Y!==null&&(j=cn(Y)),A=u.getDerivedStateFromProps,(Y=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==oe||X!==j)&&S1(a,y,c,j),As=!1,X=a.memoizedState,y.state=X,pc(a,c,y,p),mc();var J=a.memoizedState;T!==oe||X!==J||As||r!==null&&r.dependencies!==null&&Fd(r.dependencies)?(typeof A=="function"&&(Qg(a,u,A,c),J=a.memoizedState),(ie=As||w1(a,u,ie,c,X,J,j)||r!==null&&r.dependencies!==null&&Fd(r.dependencies))?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,J,j),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,J,j)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=J),y.props=c,y.state=J,y.context=j,c=ie):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(a.flags|=1024),c=!1)}return y=c,lf(r,a),c=(a.flags&128)!==0,y||c?(y=a.stateNode,u=c&&typeof u.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&c?(a.child=Wa(a,r.child,null,p),a.child=Wa(a,null,u,p)):hn(r,a,u,p),a.memoizedState=y.state,r=a.child):r=Pr(r,a,p),r}function z1(r,a,u,c){return Ga(),a.flags|=256,hn(r,a,u,c),a.child}var Jg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ey(r){return{baseLanes:r,cachePool:RT()}}function ty(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=Wn),r}function U1(r,a,u){var c=a.pendingProps,p=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=r!==null&&r.memoizedState===null?!1:(kt.current&2)!==0),T&&(p=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,r===null){if(Ke){if(p?Cs(a):Ds(),(r=pt)?(r=QE(r,di),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Es!==null?{id:sr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},u=_T(r),u.return=a,a.child=u,un=a,pt=null)):r=null,r===null)throw Ss(a);return Ly(r)?a.lanes=32:a.lanes=536870912,null}var A=c.children;return c=c.fallback,p?(Ds(),p=a.mode,A=uf({mode:"hidden",children:A},p),c=Ha(c,p,u,null),A.return=a,c.return=a,A.sibling=c,a.child=A,c=a.child,c.memoizedState=ey(u),c.childLanes=ty(r,T,u),a.memoizedState=Jg,bc(null,c)):(Cs(a),ny(a,A))}var j=r.memoizedState;if(j!==null&&(A=j.dehydrated,A!==null)){if(y)a.flags&256?(Cs(a),a.flags&=-257,a=iy(r,a,u)):a.memoizedState!==null?(Ds(),a.child=r.child,a.flags|=128,a=null):(Ds(),A=c.fallback,p=a.mode,c=uf({mode:"visible",children:c.children},p),A=Ha(A,p,u,null),A.flags|=2,c.return=a,A.return=a,c.sibling=A,a.child=c,Wa(a,r.child,null,u),c=a.child,c.memoizedState=ey(u),c.childLanes=ty(r,T,u),a.memoizedState=Jg,a=bc(null,c));else if(Cs(a),Ly(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var Y=T.dgst;T=Y,c=Error(i(419)),c.stack="",c.digest=T,lc({value:c,source:null,stack:null}),a=iy(r,a,u)}else if(Gt||cl(r,a,u,!1),T=(u&r.childLanes)!==0,Gt||T){if(T=dt,T!==null&&(c=Bu(T,u),c!==0&&c!==j.retryLane))throw j.retryLane=c,qa(r,c),zn(T,r,c),Wg;Oy(A)||vf(),a=iy(r,a,u)}else Oy(A)?(a.flags|=192,a.child=r.child,a=null):(r=j.treeContext,pt=mi(A.nextSibling),un=a,Ke=!0,ws=null,di=!1,r!==null&&ET(a,r),a=ny(a,c.children),a.flags|=4096);return a}return p?(Ds(),A=c.fallback,p=a.mode,j=r.child,Y=j.sibling,c=Cr(j,{mode:"hidden",children:c.children}),c.subtreeFlags=j.subtreeFlags&65011712,Y!==null?A=Cr(Y,A):(A=Ha(A,p,u,null),A.flags|=2),A.return=a,c.return=a,c.sibling=A,a.child=c,bc(null,c),c=a.child,A=r.child.memoizedState,A===null?A=ey(u):(p=A.cachePool,p!==null?(j=qt._currentValue,p=p.parent!==j?{parent:j,pool:j}:p):p=RT(),A={baseLanes:A.baseLanes|u,cachePool:p}),c.memoizedState=A,c.childLanes=ty(r,T,u),a.memoizedState=Jg,bc(r.child,c)):(Cs(a),u=r.child,r=u.sibling,u=Cr(u,{mode:"visible",children:c.children}),u.return=a,u.sibling=null,r!==null&&(T=a.deletions,T===null?(a.deletions=[r],a.flags|=16):T.push(r)),a.child=u,a.memoizedState=null,u)}function ny(r,a){return a=uf({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function uf(r,a){return r=Kn(22,r,null,a),r.lanes=0,r}function iy(r,a,u){return Wa(a,r.child,null,u),r=ny(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function B1(r,a,u){r.lanes|=a;var c=r.alternate;c!==null&&(c.lanes|=a),vg(r.return,a,u)}function ry(r,a,u,c,p,y){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:u,tailMode:p,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=u,T.tailMode=p,T.treeForkCount=y)}function F1(r,a,u){var c=a.pendingProps,p=c.revealOrder,y=c.tail;c=c.children;var T=kt.current,A=(T&2)!==0;if(A?(T=T&1|2,a.flags|=128):T&=1,fe(kt,T),hn(r,a,c,u),c=Ke?oc:0,!A&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&B1(r,u,a);else if(r.tag===19)B1(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(u=a.child,p=null;u!==null;)r=u.alternate,r!==null&&Xd(r)===null&&(p=u),u=u.sibling;u=p,u===null?(p=a.child,a.child=null):(p=u.sibling,u.sibling=null),ry(a,!1,p,u,y,c);break;case"backwards":case"unstable_legacy-backwards":for(u=null,p=a.child,a.child=null;p!==null;){if(r=p.alternate,r!==null&&Xd(r)===null){a.child=p;break}r=p.sibling,p.sibling=u,u=p,p=r}ry(a,!0,u,null,y,c);break;case"together":ry(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function Pr(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),Vs|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(cl(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,u=Cr(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=Cr(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function sy(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Fd(r)))}function lk(r,a,u){switch(a.tag){case 3:Xt(a,a.stateNode.containerInfo),xs(a,qt,r.memoizedState.cache),Ga();break;case 27:case 5:xa(a);break;case 4:Xt(a,a.stateNode.containerInfo);break;case 10:xs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Dg(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Cs(a),a.flags|=128,null):(u&a.child.childLanes)!==0?U1(r,a,u):(Cs(a),r=Pr(r,a,u),r!==null?r.sibling:null);Cs(a);break;case 19:var p=(r.flags&128)!==0;if(c=(u&a.childLanes)!==0,c||(cl(r,a,u,!1),c=(u&a.childLanes)!==0),p){if(c)return F1(r,a,u);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),fe(kt,kt.current),c)break;return null;case 22:return a.lanes=0,M1(r,a,u,a.pendingProps);case 24:xs(a,qt,r.memoizedState.cache)}return Pr(r,a,u)}function q1(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)Gt=!0;else{if(!sy(r,u)&&(a.flags&128)===0)return Gt=!1,lk(r,a,u);Gt=(r.flags&131072)!==0}else Gt=!1,Ke&&(a.flags&1048576)!==0&&TT(a,oc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(r=Ya(a.elementType),a.type=r,typeof r=="function")cg(r)?(c=Ja(r,c),a.tag=1,a=j1(null,a,r,c,u)):(a.tag=0,a=Zg(null,a,r,c,u));else{if(r!=null){var p=r.$$typeof;if(p===W){a.tag=11,a=N1(null,a,r,c,u);break e}else if(p===x){a.tag=14,a=k1(null,a,r,c,u);break e}}throw a=ze(r)||r,Error(i(306,a,""))}}return a;case 0:return Zg(r,a,a.type,a.pendingProps,u);case 1:return c=a.type,p=Ja(c,a.pendingProps),j1(r,a,c,p,u);case 3:e:{if(Xt(a,a.stateNode.containerInfo),r===null)throw Error(i(387));c=a.pendingProps;var y=a.memoizedState;p=y.element,xg(r,a),pc(a,c,null,u);var T=a.memoizedState;if(c=T.cache,xs(a,qt,c),c!==y.cache&&_g(a,[qt],u,!0),mc(),c=T.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=z1(r,a,c,u);break e}else if(c!==p){p=ui(Error(i(424)),a),lc(p),a=z1(r,a,c,u);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(pt=mi(r.firstChild),un=a,Ke=!0,ws=null,di=!0,u=MT(a,null,c,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ga(),c===p){a=Pr(r,a,u);break e}hn(r,a,c,u)}a=a.child}return a;case 26:return lf(r,a),r===null?(u=ew(a.type,null,a.pendingProps,null))?a.memoizedState=u:Ke||(u=a.type,r=a.pendingProps,c=xf(De.current).createElement(u),c[Ut]=a,c[nn]=r,dn(c,u,r),Bt(c),a.stateNode=c):a.memoizedState=ew(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return xa(a),r===null&&Ke&&(c=a.stateNode=WE(a.type,a.pendingProps,De.current),un=a,di=!0,p=pt,js(a.type)?(jy=p,pt=mi(c.firstChild)):pt=p),hn(r,a,a.pendingProps.children,u),lf(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Ke&&((p=c=pt)&&(c=jk(c,a.type,a.pendingProps,di),c!==null?(a.stateNode=c,un=a,pt=mi(c.firstChild),di=!1,p=!0):p=!1),p||Ss(a)),xa(a),p=a.type,y=a.pendingProps,T=r!==null?r.memoizedProps:null,c=y.children,Vy(p,y)?c=null:T!==null&&Vy(p,T)&&(a.flags|=32),a.memoizedState!==null&&(p=kg(r,a,JN,null,null,u),Pc._currentValue=p),lf(r,a),hn(r,a,c,u),a.child;case 6:return r===null&&Ke&&((r=u=pt)&&(u=zk(u,a.pendingProps,di),u!==null?(a.stateNode=u,un=a,pt=null,r=!0):r=!1),r||Ss(a)),null;case 13:return U1(r,a,u);case 4:return Xt(a,a.stateNode.containerInfo),c=a.pendingProps,r===null?a.child=Wa(a,null,c,u):hn(r,a,c,u),a.child;case 11:return N1(r,a,a.type,a.pendingProps,u);case 7:return hn(r,a,a.pendingProps,u),a.child;case 8:return hn(r,a,a.pendingProps.children,u),a.child;case 12:return hn(r,a,a.pendingProps.children,u),a.child;case 10:return c=a.pendingProps,xs(a,a.type,c.value),hn(r,a,c.children,u),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,Ka(a),p=cn(p),c=c(p),a.flags|=1,hn(r,a,c,u),a.child;case 14:return k1(r,a,a.type,a.pendingProps,u);case 15:return V1(r,a,a.type,a.pendingProps,u);case 19:return F1(r,a,u);case 31:return ok(r,a,u);case 22:return M1(r,a,u,a.pendingProps);case 24:return Ka(a),c=cn(qt),r===null?(p=Eg(),p===null&&(p=dt,y=bg(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=u),p=y),a.memoizedState={parent:c,cache:p},Sg(a),xs(a,qt,p)):((r.lanes&u)!==0&&(xg(r,a),pc(a,null,null,u),mc()),p=r.memoizedState,y=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),xs(a,qt,c)):(c=y.cache,xs(a,qt,c),c!==p.cache&&_g(a,[qt],u,!0))),hn(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Or(r){r.flags|=4}function ay(r,a,u,c,p){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(gE())r.flags|=8192;else throw Xa=$d,wg}else r.flags&=-16777217}function H1(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!sw(a))if(gE())r.flags|=8192;else throw Xa=$d,wg}function cf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?pd():536870912,r.lanes|=a,El|=a)}function Tc(r,a){if(!Ke)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function gt(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,c=0;if(a)for(var p=r.child;p!==null;)u|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)u|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=c,r.childLanes=u,a}function uk(r,a,u){var c=a.pendingProps;switch(mg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(a),null;case 1:return gt(a),null;case 3:return u=a.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),kr(qt),yt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(ul(a)?Or(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,gg())),gt(a),null;case 26:var p=a.type,y=a.memoizedState;return r===null?(Or(a),y!==null?(gt(a),H1(a,y)):(gt(a),ay(a,p,null,c,u))):y?y!==r.memoizedState?(Or(a),gt(a),H1(a,y)):(gt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==c&&Or(a),gt(a),ay(a,p,r,c,u)),null;case 27:if(Bo(a),u=De.current,p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==c&&Or(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return gt(a),null}r=me.current,ul(a)?wT(a):(r=WE(p,c,u),a.stateNode=r,Or(a))}return gt(a),null;case 5:if(Bo(a),p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==c&&Or(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return gt(a),null}if(y=me.current,ul(a))wT(a);else{var T=xf(De.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?T.createElement(p,{is:c.is}):T.createElement(p)}}y[Ut]=a,y[nn]=c;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;e:switch(dn(y,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Or(a)}}return gt(a),ay(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,u),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==c&&Or(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(i(166));if(r=De.current,ul(a)){if(r=a.stateNode,u=a.memoizedProps,c=null,p=un,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}r[Ut]=a,r=!!(r.nodeValue===u||c!==null&&c.suppressHydrationWarning===!0||UE(r.nodeValue,u)),r||Ss(a,!0)}else r=xf(r).createTextNode(c),r[Ut]=a,a.stateNode=r}return gt(a),null;case 31:if(u=a.memoizedState,r===null||r.memoizedState!==null){if(c=ul(a),u!==null){if(r===null){if(!c)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Ut]=a}else Ga(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gt(a),r=!1}else u=gg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return a.flags&256?(Yn(a),a):(Yn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return gt(a),null;case 13:if(c=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=ul(a),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Ut]=a}else Ga(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gt(a),p=!1}else p=gg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Yn(a),a):(Yn(a),null)}return Yn(a),(a.flags&128)!==0?(a.lanes=u,a):(u=c!==null,r=r!==null&&r.memoizedState!==null,u&&(c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)),u!==r&&u&&(a.child.flags|=8192),cf(a,a.updateQueue),gt(a),null);case 4:return yt(),r===null&&Ry(a.stateNode.containerInfo),gt(a),null;case 10:return kr(a.type),gt(a),null;case 19:if(te(kt),c=a.memoizedState,c===null)return gt(a),null;if(p=(a.flags&128)!==0,y=c.rendering,y===null)if(p)Tc(c,!1);else{if(At!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=Xd(r),y!==null){for(a.flags|=128,Tc(c,!1),r=y.updateQueue,a.updateQueue=r,cf(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)vT(u,r),u=u.sibling;return fe(kt,kt.current&1|2),Ke&&Dr(a,c.treeForkCount),a.child}r=r.sibling}c.tail!==null&&In()>pf&&(a.flags|=128,p=!0,Tc(c,!1),a.lanes=4194304)}else{if(!p)if(r=Xd(y),r!==null){if(a.flags|=128,p=!0,r=r.updateQueue,a.updateQueue=r,cf(a,r),Tc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!Ke)return gt(a),null}else 2*In()-c.renderingStartTime>pf&&u!==536870912&&(a.flags|=128,p=!0,Tc(c,!1),a.lanes=4194304);c.isBackwards?(y.sibling=a.child,a.child=y):(r=c.last,r!==null?r.sibling=y:a.child=y,c.last=y)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=In(),r.sibling=null,u=kt.current,fe(kt,p?u&1|2:u&1),Ke&&Dr(a,c.treeForkCount),r):(gt(a),null);case 22:case 23:return Yn(a),Cg(),c=a.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(u&536870912)!==0&&(a.flags&128)===0&&(gt(a),a.subtreeFlags&6&&(a.flags|=8192)):gt(a),u=a.updateQueue,u!==null&&cf(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==u&&(a.flags|=2048),r!==null&&te(Qa),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),kr(qt),gt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function ck(r,a){switch(mg(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return kr(qt),yt(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Bo(a),null;case 31:if(a.memoizedState!==null){if(Yn(a),a.alternate===null)throw Error(i(340));Ga()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Yn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ga()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return te(kt),null;case 4:return yt(),null;case 10:return kr(a.type),null;case 22:case 23:return Yn(a),Cg(),r!==null&&te(Qa),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return kr(qt),null;case 25:return null;default:return null}}function G1(r,a){switch(mg(a),a.tag){case 3:kr(qt),yt();break;case 26:case 27:case 5:Bo(a);break;case 4:yt();break;case 31:a.memoizedState!==null&&Yn(a);break;case 13:Yn(a);break;case 19:te(kt);break;case 10:kr(a.type);break;case 22:case 23:Yn(a),Cg(),r!==null&&te(Qa);break;case 24:kr(qt)}}function Ec(r,a){try{var u=a.updateQueue,c=u!==null?u.lastEffect:null;if(c!==null){var p=c.next;u=p;do{if((u.tag&r)===r){c=void 0;var y=u.create,T=u.inst;c=y(),T.destroy=c}u=u.next}while(u!==p)}}catch(A){st(a,a.return,A)}}function Ns(r,a,u){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&r)===r){var T=c.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,p=a;var j=u,Y=A;try{Y()}catch(ie){st(p,j,ie)}}}c=c.next}while(c!==y)}}catch(ie){st(a,a.return,ie)}}function $1(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{OT(a,u)}catch(c){st(r,r.return,c)}}}function K1(r,a,u){u.props=Ja(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(c){st(r,a,c)}}function wc(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof u=="function"?r.refCleanup=u(c):u.current=c}}catch(p){st(r,a,p)}}function or(r,a){var u=r.ref,c=r.refCleanup;if(u!==null)if(typeof c=="function")try{c()}catch(p){st(r,a,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){st(r,a,p)}else u.current=null}function Q1(r){var a=r.type,u=r.memoizedProps,c=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&c.focus();break e;case"img":u.src?c.src=u.src:u.srcSet&&(c.srcset=u.srcSet)}}catch(p){st(r,r.return,p)}}function oy(r,a,u){try{var c=r.stateNode;kk(c,r.type,u,a),c[nn]=a}catch(p){st(r,r.return,p)}}function Y1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&js(r.type)||r.tag===4}function ly(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Y1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&js(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function uy(r,a,u){var c=r.tag;if(c===5||c===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Ii));else if(c!==4&&(c===27&&js(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(uy(r,a,u),r=r.sibling;r!==null;)uy(r,a,u),r=r.sibling}function hf(r,a,u){var c=r.tag;if(c===5||c===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(c!==4&&(c===27&&js(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(hf(r,a,u),r=r.sibling;r!==null;)hf(r,a,u),r=r.sibling}function X1(r){var a=r.stateNode,u=r.memoizedProps;try{for(var c=r.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);dn(a,c,u),a[Ut]=r,a[nn]=u}catch(y){st(r,r.return,y)}}var Lr=!1,$t=!1,cy=!1,W1=typeof WeakSet=="function"?WeakSet:Set,sn=null;function hk(r,a){if(r=r.containerInfo,Ny=kf,r=uT(r),ig(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&c.rangeCount!==0){u=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var T=0,A=-1,j=-1,Y=0,ie=0,oe=r,X=null;t:for(;;){for(var J;oe!==u||p!==0&&oe.nodeType!==3||(A=T+p),oe!==y||c!==0&&oe.nodeType!==3||(j=T+c),oe.nodeType===3&&(T+=oe.nodeValue.length),(J=oe.firstChild)!==null;)X=oe,oe=J;for(;;){if(oe===r)break t;if(X===u&&++Y===p&&(A=T),X===y&&++ie===c&&(j=T),(J=oe.nextSibling)!==null)break;oe=X,X=oe.parentNode}oe=J}u=A===-1||j===-1?null:{start:A,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(ky={focusedElem:r,selectionRange:u},kf=!1,sn=a;sn!==null;)if(a=sn,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,sn=r;else for(;sn!==null;){switch(a=sn,y=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)p=r[u],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,u=a,p=y.memoizedProps,y=y.memoizedState,c=u.stateNode;try{var ve=Ja(u.type,p);r=c.getSnapshotBeforeUpdate(ve,y),c.__reactInternalSnapshotBeforeUpdate=r}catch(Re){st(u,u.return,Re)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)Py(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Py(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,sn=r;break}sn=a.return}}function Z1(r,a,u){var c=u.flags;switch(u.tag){case 0:case 11:case 15:zr(r,u),c&4&&Ec(5,u);break;case 1:if(zr(r,u),c&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(T){st(u,u.return,T)}else{var p=Ja(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(p,a,r.__reactInternalSnapshotBeforeUpdate)}catch(T){st(u,u.return,T)}}c&64&&$1(u),c&512&&wc(u,u.return);break;case 3:if(zr(r,u),c&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{OT(r,a)}catch(T){st(u,u.return,T)}}break;case 27:a===null&&c&4&&X1(u);case 26:case 5:zr(r,u),a===null&&c&4&&Q1(u),c&512&&wc(u,u.return);break;case 12:zr(r,u);break;case 31:zr(r,u),c&4&&tE(r,u);break;case 13:zr(r,u),c&4&&nE(r,u),c&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=bk.bind(null,u),Uk(r,u))));break;case 22:if(c=u.memoizedState!==null||Lr,!c){a=a!==null&&a.memoizedState!==null||$t,p=Lr;var y=$t;Lr=c,($t=a)&&!y?Ur(r,u,(u.subtreeFlags&8772)!==0):zr(r,u),Lr=p,$t=y}break;case 30:break;default:zr(r,u)}}function J1(r){var a=r.alternate;a!==null&&(r.alternate=null,J1(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&$o(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var _t=null,Pn=!1;function jr(r,a,u){for(u=u.child;u!==null;)eE(r,a,u),u=u.sibling}function eE(r,a,u){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(wi,u)}catch{}switch(u.tag){case 26:$t||or(u,a),jr(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:$t||or(u,a);var c=_t,p=Pn;js(u.type)&&(_t=u.stateNode,Pn=!1),jr(r,a,u),kc(u.stateNode),_t=c,Pn=p;break;case 5:$t||or(u,a);case 6:if(c=_t,p=Pn,_t=null,jr(r,a,u),_t=c,Pn=p,_t!==null)if(Pn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(u.stateNode)}catch(y){st(u,a,y)}else try{_t.removeChild(u.stateNode)}catch(y){st(u,a,y)}break;case 18:_t!==null&&(Pn?(r=_t,$E(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),Dl(r)):$E(_t,u.stateNode));break;case 4:c=_t,p=Pn,_t=u.stateNode.containerInfo,Pn=!0,jr(r,a,u),_t=c,Pn=p;break;case 0:case 11:case 14:case 15:Ns(2,u,a),$t||Ns(4,u,a),jr(r,a,u);break;case 1:$t||(or(u,a),c=u.stateNode,typeof c.componentWillUnmount=="function"&&K1(u,a,c)),jr(r,a,u);break;case 21:jr(r,a,u);break;case 22:$t=(c=$t)||u.memoizedState!==null,jr(r,a,u),$t=c;break;default:jr(r,a,u)}}function tE(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Dl(r)}catch(u){st(a,a.return,u)}}}function nE(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Dl(r)}catch(u){st(a,a.return,u)}}function dk(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new W1),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new W1),a;default:throw Error(i(435,r.tag))}}function df(r,a){var u=dk(r);a.forEach(function(c){if(!u.has(c)){u.add(c);var p=Tk.bind(null,r,c);c.then(p,p)}})}function On(r,a){var u=a.deletions;if(u!==null)for(var c=0;c<u.length;c++){var p=u[c],y=r,T=a,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(js(A.type)){_t=A.stateNode,Pn=!1;break e}break;case 5:_t=A.stateNode,Pn=!1;break e;case 3:case 4:_t=A.stateNode.containerInfo,Pn=!0;break e}A=A.return}if(_t===null)throw Error(i(160));eE(y,T,p),_t=null,Pn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)iE(a,r),a=a.sibling}var Vi=null;function iE(r,a){var u=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:On(a,r),Ln(r),c&4&&(Ns(3,r,r.return),Ec(3,r),Ns(5,r,r.return));break;case 1:On(a,r),Ln(r),c&512&&($t||u===null||or(u,u.return)),c&64&&Lr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?c:u.concat(c))));break;case 26:var p=Vi;if(On(a,r),Ln(r),c&512&&($t||u===null||or(u,u.return)),c&4){var y=u!==null?u.memoizedState:null;if(c=r.memoizedState,u===null)if(c===null)if(r.stateNode===null){e:{c=r.type,u=r.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Ki]||y[Ut]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),dn(y,c,u),y[Ut]=r,Bt(y),c=y;break e;case"link":var T=iw("link","href",p).get(c+(u.href||""));if(T){for(var A=0;A<T.length;A++)if(y=T[A],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){T.splice(A,1);break t}}y=p.createElement(c),dn(y,c,u),p.head.appendChild(y);break;case"meta":if(T=iw("meta","content",p).get(c+(u.content||""))){for(A=0;A<T.length;A++)if(y=T[A],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){T.splice(A,1);break t}}y=p.createElement(c),dn(y,c,u),p.head.appendChild(y);break;default:throw Error(i(468,c))}y[Ut]=r,Bt(y),c=y}r.stateNode=c}else rw(p,r.type,r.stateNode);else r.stateNode=nw(p,c,r.memoizedProps);else y!==c?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,c===null?rw(p,r.type,r.stateNode):nw(p,c,r.memoizedProps)):c===null&&r.stateNode!==null&&oy(r,r.memoizedProps,u.memoizedProps)}break;case 27:On(a,r),Ln(r),c&512&&($t||u===null||or(u,u.return)),u!==null&&c&4&&oy(r,r.memoizedProps,u.memoizedProps);break;case 5:if(On(a,r),Ln(r),c&512&&($t||u===null||or(u,u.return)),r.flags&32){p=r.stateNode;try{Mn(p,"")}catch(ve){st(r,r.return,ve)}}c&4&&r.stateNode!=null&&(p=r.memoizedProps,oy(r,p,u!==null?u.memoizedProps:p)),c&1024&&(cy=!0);break;case 6:if(On(a,r),Ln(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,u=r.stateNode;try{u.nodeValue=c}catch(ve){st(r,r.return,ve)}}break;case 3:if(Rf=null,p=Vi,Vi=Af(a.containerInfo),On(a,r),Vi=p,Ln(r),c&4&&u!==null&&u.memoizedState.isDehydrated)try{Dl(a.containerInfo)}catch(ve){st(r,r.return,ve)}cy&&(cy=!1,rE(r));break;case 4:c=Vi,Vi=Af(r.stateNode.containerInfo),On(a,r),Ln(r),Vi=c;break;case 12:On(a,r),Ln(r);break;case 31:On(a,r),Ln(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,df(r,c)));break;case 13:On(a,r),Ln(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(mf=In()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,df(r,c)));break;case 22:p=r.memoizedState!==null;var j=u!==null&&u.memoizedState!==null,Y=Lr,ie=$t;if(Lr=Y||p,$t=ie||j,On(a,r),$t=ie,Lr=Y,Ln(r),c&8192)e:for(a=r.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(u===null||j||Lr||$t||eo(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){j=u=a;try{if(y=j.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=j.stateNode;var oe=j.memoizedProps.style,X=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;A.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ve){st(j,j.return,ve)}}}else if(a.tag===6){if(u===null){j=a;try{j.stateNode.nodeValue=p?"":j.memoizedProps}catch(ve){st(j,j.return,ve)}}}else if(a.tag===18){if(u===null){j=a;try{var J=j.stateNode;p?KE(J,!0):KE(j.stateNode,!1)}catch(ve){st(j,j.return,ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=r.updateQueue,c!==null&&(u=c.retryQueue,u!==null&&(c.retryQueue=null,df(r,u))));break;case 19:On(a,r),Ln(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,df(r,c)));break;case 30:break;case 21:break;default:On(a,r),Ln(r)}}function Ln(r){var a=r.flags;if(a&2){try{for(var u,c=r.return;c!==null;){if(Y1(c)){u=c;break}c=c.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var p=u.stateNode,y=ly(r);hf(r,y,p);break;case 5:var T=u.stateNode;u.flags&32&&(Mn(T,""),u.flags&=-33);var A=ly(r);hf(r,A,T);break;case 3:case 4:var j=u.stateNode.containerInfo,Y=ly(r);uy(r,Y,j);break;default:throw Error(i(161))}}catch(ie){st(r,r.return,ie)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function rE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;rE(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function zr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Z1(r,a.alternate,a),a=a.sibling}function eo(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Ns(4,a,a.return),eo(a);break;case 1:or(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&K1(a,a.return,u),eo(a);break;case 27:kc(a.stateNode);case 26:case 5:or(a,a.return),eo(a);break;case 22:a.memoizedState===null&&eo(a);break;case 30:eo(a);break;default:eo(a)}r=r.sibling}}function Ur(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=r,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:Ur(p,y,u),Ec(4,y);break;case 1:if(Ur(p,y,u),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Y){st(c,c.return,Y)}if(c=y,p=c.updateQueue,p!==null){var A=c.stateNode;try{var j=p.shared.hiddenCallbacks;if(j!==null)for(p.shared.hiddenCallbacks=null,p=0;p<j.length;p++)PT(j[p],A)}catch(Y){st(c,c.return,Y)}}u&&T&64&&$1(y),wc(y,y.return);break;case 27:X1(y);case 26:case 5:Ur(p,y,u),u&&c===null&&T&4&&Q1(y),wc(y,y.return);break;case 12:Ur(p,y,u);break;case 31:Ur(p,y,u),u&&T&4&&tE(p,y);break;case 13:Ur(p,y,u),u&&T&4&&nE(p,y);break;case 22:y.memoizedState===null&&Ur(p,y,u),wc(y,y.return);break;case 30:break;default:Ur(p,y,u)}a=a.sibling}}function hy(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&uc(u))}function dy(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&uc(r))}function Mi(r,a,u,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)sE(r,a,u,c),a=a.sibling}function sE(r,a,u,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(r,a,u,c),p&2048&&Ec(9,a);break;case 1:Mi(r,a,u,c);break;case 3:Mi(r,a,u,c),p&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&uc(r)));break;case 12:if(p&2048){Mi(r,a,u,c),r=a.stateNode;try{var y=a.memoizedProps,T=y.id,A=y.onPostCommit;typeof A=="function"&&A(T,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){st(a,a.return,j)}}else Mi(r,a,u,c);break;case 31:Mi(r,a,u,c);break;case 13:Mi(r,a,u,c);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?Mi(r,a,u,c):Sc(r,a):y._visibility&2?Mi(r,a,u,c):(y._visibility|=2,_l(r,a,u,c,(a.subtreeFlags&10256)!==0||!1)),p&2048&&hy(T,a);break;case 24:Mi(r,a,u,c),p&2048&&dy(a.alternate,a);break;default:Mi(r,a,u,c)}}function _l(r,a,u,c,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=r,T=a,A=u,j=c,Y=T.flags;switch(T.tag){case 0:case 11:case 15:_l(y,T,A,j,p),Ec(8,T);break;case 23:break;case 22:var ie=T.stateNode;T.memoizedState!==null?ie._visibility&2?_l(y,T,A,j,p):Sc(y,T):(ie._visibility|=2,_l(y,T,A,j,p)),p&&Y&2048&&hy(T.alternate,T);break;case 24:_l(y,T,A,j,p),p&&Y&2048&&dy(T.alternate,T);break;default:_l(y,T,A,j,p)}a=a.sibling}}function Sc(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,c=a,p=c.flags;switch(c.tag){case 22:Sc(u,c),p&2048&&hy(c.alternate,c);break;case 24:Sc(u,c),p&2048&&dy(c.alternate,c);break;default:Sc(u,c)}a=a.sibling}}var xc=8192;function bl(r,a,u){if(r.subtreeFlags&xc)for(r=r.child;r!==null;)aE(r,a,u),r=r.sibling}function aE(r,a,u){switch(r.tag){case 26:bl(r,a,u),r.flags&xc&&r.memoizedState!==null&&Zk(u,Vi,r.memoizedState,r.memoizedProps);break;case 5:bl(r,a,u);break;case 3:case 4:var c=Vi;Vi=Af(r.stateNode.containerInfo),bl(r,a,u),Vi=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=xc,xc=16777216,bl(r,a,u),xc=c):bl(r,a,u));break;default:bl(r,a,u)}}function oE(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Ac(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var c=a[u];sn=c,uE(c,r)}oE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lE(r),r=r.sibling}function lE(r){switch(r.tag){case 0:case 11:case 15:Ac(r),r.flags&2048&&Ns(9,r,r.return);break;case 3:Ac(r);break;case 12:Ac(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,ff(r)):Ac(r);break;default:Ac(r)}}function ff(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var c=a[u];sn=c,uE(c,r)}oE(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Ns(8,a,a.return),ff(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,ff(a));break;default:ff(a)}r=r.sibling}}function uE(r,a){for(;sn!==null;){var u=sn;switch(u.tag){case 0:case 11:case 15:Ns(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var c=u.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:uc(u.memoizedState.cache)}if(c=u.child,c!==null)c.return=u,sn=c;else e:for(u=r;sn!==null;){c=sn;var p=c.sibling,y=c.return;if(J1(c),c===u){sn=null;break e}if(p!==null){p.return=y,sn=p;break e}sn=y}}}var fk={getCacheForType:function(r){var a=cn(qt),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u},cacheSignal:function(){return cn(qt).controller.signal}},mk=typeof WeakMap=="function"?WeakMap:Map,et=0,dt=null,Be=null,qe=0,rt=0,Xn=null,ks=!1,Tl=!1,fy=!1,Br=0,At=0,Vs=0,to=0,my=0,Wn=0,El=0,Ic=null,jn=null,py=!1,mf=0,cE=0,pf=1/0,gf=null,Ms=null,Zt=0,Ps=null,wl=null,Fr=0,gy=0,yy=null,hE=null,Rc=0,vy=null;function Zn(){return(et&2)!==0&&qe!==0?qe&-qe:F.T!==null?Sy():gd()}function dE(){if(Wn===0)if((qe&536870912)===0||Ke){var r=Ra;Ra<<=1,(Ra&3932160)===0&&(Ra=262144),Wn=r}else Wn=536870912;return r=Qn.current,r!==null&&(r.flags|=32),Wn}function zn(r,a,u){(r===dt&&(rt===2||rt===9)||r.cancelPendingCommit!==null)&&(Sl(r,0),Os(r,qe,Wn,!1)),Ca(r,u),((et&2)===0||r!==dt)&&(r===dt&&((et&2)===0&&(to|=u),At===4&&Os(r,qe,Wn,!1)),lr(r))}function fE(r,a,u){if((et&6)!==0)throw Error(i(327));var c=!u&&(a&127)===0&&(a&r.expiredLanes)===0||Si(r,a),p=c?yk(r,a):by(r,a,!0),y=c;do{if(p===0){Tl&&!c&&Os(r,a,0,!1);break}else{if(u=r.current.alternate,y&&!pk(u)){p=by(r,a,!1),y=!1;continue}if(p===2){if(y=a,r.errorRecoveryDisabledLanes&y)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var A=r;p=Ic;var j=A.current.memoizedState.isDehydrated;if(j&&(Sl(A,T).flags|=256),T=by(A,T,!1),T!==2){if(fy&&!j){A.errorRecoveryDisabledLanes|=y,to|=y,p=4;break e}y=jn,jn=p,y!==null&&(jn===null?jn=y:jn.push.apply(jn,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){Sl(r,0),Os(r,a,0,!0);break}e:{switch(c=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Os(c,a,Wn,!ks);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=mf+300-In(),10<p)){if(Os(c,a,Wn,!ks),Hi(c,0,!0)!==0)break e;Fr=a,c.timeoutHandle=HE(mE.bind(null,c,u,jn,gf,py,a,Wn,to,El,ks,y,"Throttled",-0,0),p);break e}mE(c,u,jn,gf,py,a,Wn,to,El,ks,y,null,-0,0)}}break}while(!0);lr(r)}function mE(r,a,u,c,p,y,T,A,j,Y,ie,oe,X,J){if(r.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ii},aE(a,y,oe);var ve=(y&62914560)===y?mf-In():(y&4194048)===y?cE-In():0;if(ve=Jk(oe,ve),ve!==null){Fr=y,r.cancelPendingCommit=ve(EE.bind(null,r,a,y,u,c,p,T,A,j,ie,oe,null,X,J)),Os(r,y,T,!Y);return}}EE(r,a,y,u,c,p,T,A,j)}function pk(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var c=0;c<u.length;c++){var p=u[c],y=p.getSnapshot;p=p.value;try{if(!$n(y(),p))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Os(r,a,u,c){a&=~my,a&=~to,r.suspendedLanes|=a,r.pingedLanes&=~a,c&&(r.warmLanes|=a),c=r.expirationTimes;for(var p=a;0<p;){var y=31-Dt(p),T=1<<y;c[y]=-1,p&=~T}u!==0&&Da(r,u,a)}function yf(){return(et&6)===0?(Cc(0),!1):!0}function _y(){if(Be!==null){if(rt===0)var r=Be.return;else r=Be,Nr=$a=null,Pg(r),ml=null,hc=0,r=Be;for(;r!==null;)G1(r.alternate,r),r=r.return;Be=null}}function Sl(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,Pk(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Fr=0,_y(),dt=r,Be=u=Cr(r.current,null),qe=a,rt=0,Xn=null,ks=!1,Tl=Si(r,a),fy=!1,El=Wn=my=to=Vs=At=0,jn=Ic=null,py=!1,(a&8)!==0&&(a|=a&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=a;0<c;){var p=31-Dt(c),y=1<<p;a|=r[p],c&=~y}return Br=a,Ld(),u}function pE(r,a){Le=null,F.H=_c,a===fl||a===Gd?(a=NT(),rt=3):a===wg?(a=NT(),rt=4):rt=a===Wg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Xn=a,Be===null&&(At=1,af(r,ui(a,r.current)))}function gE(){var r=Qn.current;return r===null?!0:(qe&4194048)===qe?fi===null:(qe&62914560)===qe||(qe&536870912)!==0?r===fi:!1}function yE(){var r=F.H;return F.H=_c,r===null?_c:r}function vE(){var r=F.A;return F.A=fk,r}function vf(){At=4,ks||(qe&4194048)!==qe&&Qn.current!==null||(Tl=!0),(Vs&134217727)===0&&(to&134217727)===0||dt===null||Os(dt,qe,Wn,!1)}function by(r,a,u){var c=et;et|=2;var p=yE(),y=vE();(dt!==r||qe!==a)&&(gf=null,Sl(r,a)),a=!1;var T=At;e:do try{if(rt!==0&&Be!==null){var A=Be,j=Xn;switch(rt){case 8:_y(),T=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(a=!0);var Y=rt;if(rt=0,Xn=null,xl(r,A,j,Y),u&&Tl){T=0;break e}break;default:Y=rt,rt=0,Xn=null,xl(r,A,j,Y)}}gk(),T=At;break}catch(ie){pE(r,ie)}while(!0);return a&&r.shellSuspendCounter++,Nr=$a=null,et=c,F.H=p,F.A=y,Be===null&&(dt=null,qe=0,Ld()),T}function gk(){for(;Be!==null;)_E(Be)}function yk(r,a){var u=et;et|=2;var c=yE(),p=vE();dt!==r||qe!==a?(gf=null,pf=In()+500,Sl(r,a)):Tl=Si(r,a);e:do try{if(rt!==0&&Be!==null){a=Be;var y=Xn;t:switch(rt){case 1:rt=0,Xn=null,xl(r,a,y,1);break;case 2:case 9:if(CT(y)){rt=0,Xn=null,bE(a);break}a=function(){rt!==2&&rt!==9||dt!==r||(rt=7),lr(r)},y.then(a,a);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:CT(y)?(rt=0,Xn=null,bE(a)):(rt=0,Xn=null,xl(r,a,y,7));break;case 5:var T=null;switch(Be.tag){case 26:T=Be.memoizedState;case 5:case 27:var A=Be;if(T?sw(T):A.stateNode.complete){rt=0,Xn=null;var j=A.sibling;if(j!==null)Be=j;else{var Y=A.return;Y!==null?(Be=Y,_f(Y)):Be=null}break t}}rt=0,Xn=null,xl(r,a,y,5);break;case 6:rt=0,Xn=null,xl(r,a,y,6);break;case 8:_y(),At=6;break e;default:throw Error(i(462))}}vk();break}catch(ie){pE(r,ie)}while(!0);return Nr=$a=null,F.H=c,F.A=p,et=u,Be!==null?0:(dt=null,qe=0,Ld(),At)}function vk(){for(;Be!==null&&!Xp();)_E(Be)}function _E(r){var a=q1(r.alternate,r,Br);r.memoizedProps=r.pendingProps,a===null?_f(r):Be=a}function bE(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=L1(u,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=L1(u,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:Pg(a);default:G1(u,a),a=Be=vT(a,Br),a=q1(u,a,Br)}r.memoizedProps=r.pendingProps,a===null?_f(r):Be=a}function xl(r,a,u,c){Nr=$a=null,Pg(a),ml=null,hc=0;var p=a.return;try{if(ak(r,p,a,u,qe)){At=1,af(r,ui(u,r.current)),Be=null;return}}catch(y){if(p!==null)throw Be=p,y;At=1,af(r,ui(u,r.current)),Be=null;return}a.flags&32768?(Ke||c===1?r=!0:Tl||(qe&536870912)!==0?r=!1:(ks=r=!0,(c===2||c===9||c===3||c===6)&&(c=Qn.current,c!==null&&c.tag===13&&(c.flags|=16384))),TE(a,r)):_f(a)}function _f(r){var a=r;do{if((a.flags&32768)!==0){TE(a,ks);return}r=a.return;var u=uk(a.alternate,a,Br);if(u!==null){Be=u;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=r}while(a!==null);At===0&&(At=5)}function TE(r,a){do{var u=ck(r.alternate,r);if(u!==null){u.flags&=32767,Be=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){Be=r;return}Be=r=u}while(r!==null);At=6,Be=null}function EE(r,a,u,c,p,y,T,A,j){r.cancelPendingCommit=null;do bf();while(Zt!==0);if((et&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=lg,Jp(r,u,y,T,A,j),r===dt&&(Be=dt=null,qe=0),wl=a,Ps=r,Fr=u,gy=y,yy=p,hE=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Ek(ds,function(){return IE(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=F.T,F.T=null,p=se.p,se.p=2,T=et,et|=4;try{hk(r,a,u)}finally{et=T,se.p=p,F.T=c}}Zt=1,wE(),SE(),xE()}}function wE(){if(Zt===1){Zt=0;var r=Ps,a=wl,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=F.T,F.T=null;var c=se.p;se.p=2;var p=et;et|=4;try{iE(a,r);var y=ky,T=uT(r.containerInfo),A=y.focusedElem,j=y.selectionRange;if(T!==A&&A&&A.ownerDocument&&lT(A.ownerDocument.documentElement,A)){if(j!==null&&ig(A)){var Y=j.start,ie=j.end;if(ie===void 0&&(ie=Y),"selectionStart"in A)A.selectionStart=Y,A.selectionEnd=Math.min(ie,A.value.length);else{var oe=A.ownerDocument||document,X=oe&&oe.defaultView||window;if(X.getSelection){var J=X.getSelection(),ve=A.textContent.length,Re=Math.min(j.start,ve),ht=j.end===void 0?Re:Math.min(j.end,ve);!J.extend&&Re>ht&&(T=ht,ht=Re,Re=T);var G=oT(A,Re),q=oT(A,ht);if(G&&q&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==q.node||J.focusOffset!==q.offset)){var Q=oe.createRange();Q.setStart(G.node,G.offset),J.removeAllRanges(),Re>ht?(J.addRange(Q),J.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),J.addRange(Q))}}}}for(oe=[],J=A;J=J.parentNode;)J.nodeType===1&&oe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<oe.length;A++){var ae=oe[A];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}kf=!!Ny,ky=Ny=null}finally{et=p,se.p=c,F.T=u}}r.current=a,Zt=2}}function SE(){if(Zt===2){Zt=0;var r=Ps,a=wl,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=F.T,F.T=null;var c=se.p;se.p=2;var p=et;et|=4;try{Z1(r,a.alternate,a)}finally{et=p,se.p=c,F.T=u}}Zt=3}}function xE(){if(Zt===4||Zt===3){Zt=0,ud();var r=Ps,a=wl,u=Fr,c=hE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Zt=5:(Zt=0,wl=Ps=null,AE(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Ms=null),xr(u),a=a.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(wi,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=F.T,p=se.p,se.p=2,F.T=null;try{for(var y=r.onRecoverableError,T=0;T<c.length;T++){var A=c[T];y(A.value,{componentStack:A.stack})}}finally{F.T=a,se.p=p}}(Fr&3)!==0&&bf(),lr(r),p=r.pendingLanes,(u&261930)!==0&&(p&42)!==0?r===vy?Rc++:(Rc=0,vy=r):Rc=0,Cc(0)}}function AE(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,uc(a)))}function bf(){return wE(),SE(),xE(),IE()}function IE(){if(Zt!==5)return!1;var r=Ps,a=gy;gy=0;var u=xr(Fr),c=F.T,p=se.p;try{se.p=32>u?32:u,F.T=null,u=yy,yy=null;var y=Ps,T=Fr;if(Zt=0,wl=Ps=null,Fr=0,(et&6)!==0)throw Error(i(331));var A=et;if(et|=4,lE(y.current),sE(y,y.current,T,u),et=A,Cc(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(wi,y)}catch{}return!0}finally{se.p=p,F.T=c,AE(r,a)}}function RE(r,a,u){a=ui(u,a),a=Xg(r.stateNode,a,2),r=Rs(r,a,2),r!==null&&(Ca(r,2),lr(r))}function st(r,a,u){if(r.tag===3)RE(r,r,u);else for(;a!==null;){if(a.tag===3){RE(a,r,u);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ms===null||!Ms.has(c))){r=ui(u,r),u=C1(2),c=Rs(a,u,2),c!==null&&(D1(u,c,a,r),Ca(c,2),lr(c));break}}a=a.return}}function Ty(r,a,u){var c=r.pingCache;if(c===null){c=r.pingCache=new mk;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(u)||(fy=!0,p.add(u),r=_k.bind(null,r,a,u),a.then(r,r))}function _k(r,a,u){var c=r.pingCache;c!==null&&c.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,dt===r&&(qe&u)===u&&(At===4||At===3&&(qe&62914560)===qe&&300>In()-mf?(et&2)===0&&Sl(r,0):my|=u,El===qe&&(El=0)),lr(r)}function CE(r,a){a===0&&(a=pd()),r=qa(r,a),r!==null&&(Ca(r,a),lr(r))}function bk(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),CE(r,u)}function Tk(r,a){var u=0;switch(r.tag){case 31:case 13:var c=r.stateNode,p=r.memoizedState;p!==null&&(u=p.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(a),CE(r,u)}function Ek(r,a){return Wt(r,a)}var Tf=null,Al=null,Ey=!1,Ef=!1,wy=!1,Ls=0;function lr(r){r!==Al&&r.next===null&&(Al===null?Tf=Al=r:Al=Al.next=r),Ef=!0,Ey||(Ey=!0,Sk())}function Cc(r,a){if(!wy&&Ef){wy=!0;do for(var u=!1,c=Tf;c!==null;){if(r!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var T=c.suspendedLanes,A=c.pingedLanes;y=(1<<31-Dt(42|r)+1)-1,y&=p&~(T&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,VE(c,y))}else y=qe,y=Hi(c,c===dt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Si(c,y)||(u=!0,VE(c,y));c=c.next}while(u);wy=!1}}function wk(){DE()}function DE(){Ef=Ey=!1;var r=0;Ls!==0&&Mk()&&(r=Ls);for(var a=In(),u=null,c=Tf;c!==null;){var p=c.next,y=NE(c,a);y===0?(c.next=null,u===null?Tf=p:u.next=p,p===null&&(Al=u)):(u=c,(r!==0||(y&3)!==0)&&(Ef=!0)),c=p}Zt!==0&&Zt!==5||Cc(r),Ls!==0&&(Ls=0)}function NE(r,a){for(var u=r.suspendedLanes,c=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var T=31-Dt(y),A=1<<T,j=p[T];j===-1?((A&u)===0||(A&c)!==0)&&(p[T]=Zp(A,a)):j<=a&&(r.expiredLanes|=A),y&=~A}if(a=dt,u=qe,u=Hi(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,u===0||r===a&&(rt===2||rt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&hs(c),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Si(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(c!==null&&hs(c),xr(u)){case 2:case 8:u=zu;break;case 32:u=ds;break;case 268435456:u=cd;break;default:u=ds}return c=kE.bind(null,r),u=Wt(u,c),r.callbackPriority=a,r.callbackNode=u,a}return c!==null&&c!==null&&hs(c),r.callbackPriority=2,r.callbackNode=null,2}function kE(r,a){if(Zt!==0&&Zt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(bf()&&r.callbackNode!==u)return null;var c=qe;return c=Hi(r,r===dt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(fE(r,c,a),NE(r,In()),r.callbackNode!=null&&r.callbackNode===u?kE.bind(null,r):null)}function VE(r,a){if(bf())return null;fE(r,a,!0)}function Sk(){Ok(function(){(et&6)!==0?Wt(ju,wk):DE()})}function Sy(){if(Ls===0){var r=hl;r===0&&(r=Fi,Fi<<=1,(Fi&261888)===0&&(Fi=256)),Ls=r}return Ls}function ME(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Xo(""+r)}function PE(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function xk(r,a,u,c,p){if(a==="submit"&&u&&u.stateNode===p){var y=ME((p[nn]||null).action),T=c.submitter;T&&(a=(a=T[nn]||null)?ME(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var A=new tr("action","action",null,c,p);r.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ls!==0){var j=T?PE(p,T):new FormData(p);Hg(u,{pending:!0,data:j,method:p.method,action:y},null,j)}}else typeof y=="function"&&(A.preventDefault(),j=T?PE(p,T):new FormData(p),Hg(u,{pending:!0,data:j,method:p.method,action:y},y,j))},currentTarget:p}]})}}for(var xy=0;xy<og.length;xy++){var Ay=og[xy],Ak=Ay.toLowerCase(),Ik=Ay[0].toUpperCase()+Ay.slice(1);ki(Ak,"on"+Ik)}ki(dT,"onAnimationEnd"),ki(fT,"onAnimationIteration"),ki(mT,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(qN,"onTransitionRun"),ki(HN,"onTransitionStart"),ki(GN,"onTransitionCancel"),ki(pT,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function OE(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var c=r[u],p=c.event;c=c.listeners;e:{var y=void 0;if(a)for(var T=c.length-1;0<=T;T--){var A=c[T],j=A.instance,Y=A.currentTarget;if(A=A.listener,j!==y&&p.isPropagationStopped())break e;y=A,p.currentTarget=Y;try{y(p)}catch(ie){Od(ie)}p.currentTarget=null,y=j}else for(T=0;T<c.length;T++){if(A=c[T],j=A.instance,Y=A.currentTarget,A=A.listener,j!==y&&p.isPropagationStopped())break e;y=A,p.currentTarget=Y;try{y(p)}catch(ie){Od(ie)}p.currentTarget=null,y=j}}}}function Fe(r,a){var u=a[Go];u===void 0&&(u=a[Go]=new Set);var c=r+"__bubble";u.has(c)||(LE(a,r,2,!1),u.add(c))}function Iy(r,a,u){var c=0;a&&(c|=4),LE(u,r,c,a)}var wf="_reactListening"+Math.random().toString(36).slice(2);function Ry(r){if(!r[wf]){r[wf]=!0,Fu.forEach(function(u){u!=="selectionchange"&&(Rk.has(u)||Iy(u,!1,r),Iy(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[wf]||(a[wf]=!0,Iy("selectionchange",!1,a))}}function LE(r,a,u,c){switch(dw(a)){case 2:var p=nV;break;case 8:p=iV;break;default:p=qy}u=p.bind(null,a,u,r),p=void 0,!Pa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?r.addEventListener(a,u,{capture:!0,passive:p}):r.addEventListener(a,u,!0):p!==void 0?r.addEventListener(a,u,{passive:p}):r.addEventListener(a,u,!1)}function Cy(r,a,u,c,p){var y=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var A=c.stateNode.containerInfo;if(A===p)break;if(T===4)for(T=c.return;T!==null;){var j=T.tag;if((j===3||j===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;A!==null;){if(T=Qi(A),T===null)return;if(j=T.tag,j===5||j===6||j===26||j===27){c=y=T;continue e}A=A.parentNode}}c=c.return}vs(function(){var Y=y,ie=si(u),oe=[];e:{var X=gT.get(r);if(X!==void 0){var J=tr,ve=r;switch(r){case"keypress":if(La(u)===0)break e;case"keydown":case"keyup":J=Vd;break;case"focusin":ve="focus",J=za;break;case"focusout":ve="blur",J=za;break;case"beforeblur":case"afterblur":J=za;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=b;break;case dT:case fT:case mT:J=Ad;break;case pT:J=C;break;case"scroll":case"scrollend":J=ec;break;case"wheel":J=Z;break;case"copy":case"cut":case"paste":J=Id;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Rr;break;case"toggle":case"beforetoggle":J=Oe}var Re=(a&4)!==0,ht=!Re&&(r==="scroll"||r==="scrollend"),G=Re?X!==null?X+"Capture":null:X;Re=[];for(var q=Y,Q;q!==null;){var ae=q;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||G===null||(ae=Ri(q,G),ae!=null&&Re.push(Nc(q,ae,Q))),ht)break;q=q.return}0<Re.length&&(X=new J(X,ve,null,u,ie),oe.push({event:X,listeners:Re}))}}if((a&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",X&&u!==Wu&&(ve=u.relatedTarget||u.fromElement)&&(Qi(ve)||ve[$i]))break e;if((J||X)&&(X=ie.window===ie?ie:(X=ie.ownerDocument)?X.defaultView||X.parentWindow:window,J?(ve=u.relatedTarget||u.toElement,J=Y,ve=ve?Qi(ve):null,ve!==null&&(ht=o(ve),Re=ve.tag,ve!==ht||Re!==5&&Re!==27&&Re!==6)&&(ve=null)):(J=null,ve=Y),J!==ve)){if(Re=tc,ae="onMouseLeave",G="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Re=Rr,ae="onPointerLeave",G="onPointerEnter",q="pointer"),ht=J==null?X:Hn(J),Q=ve==null?X:Hn(ve),X=new Re(ae,q+"leave",J,u,ie),X.target=ht,X.relatedTarget=Q,ae=null,Qi(ie)===Y&&(Re=new Re(G,q+"enter",ve,u,ie),Re.target=Q,Re.relatedTarget=ht,ae=Re),ht=ae,J&&ve)t:{for(Re=Ck,G=J,q=ve,Q=0,ae=G;ae;ae=Re(ae))Q++;ae=0;for(var xe=q;xe;xe=Re(xe))ae++;for(;0<Q-ae;)G=Re(G),Q--;for(;0<ae-Q;)q=Re(q),ae--;for(;Q--;){if(G===q||q!==null&&G===q.alternate){Re=G;break t}G=Re(G),q=Re(q)}Re=null}else Re=null;J!==null&&jE(oe,X,J,Re,!1),ve!==null&&ht!==null&&jE(oe,ht,ve,Re,!0)}}e:{if(X=Y?Hn(Y):window,J=X.nodeName&&X.nodeName.toLowerCase(),J==="select"||J==="input"&&X.type==="file")var We=tT;else if(Jb(X))if(nT)We=UN;else{We=jN;var be=LN}else J=X.nodeName,!J||J.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Y&&Yo(Y.elementType)&&(We=tT):We=zN;if(We&&(We=We(r,Y))){eT(oe,We,u,ie);break e}be&&be(r,X,Y),r==="focusout"&&Y&&X.type==="number"&&Y.memoizedProps.value!=null&&Qu(X,"number",X.value)}switch(be=Y?Hn(Y):window,r){case"focusin":(Jb(be)||be.contentEditable==="true")&&(il=be,rg=Y,ac=null);break;case"focusout":ac=rg=il=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,cT(oe,u,ie);break;case"selectionchange":if(FN)break;case"keydown":case"keyup":cT(oe,u,ie)}var je;if(Je)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else nl?Ua(r,u)&&(He="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(He="onCompositionStart");He&&(rr&&u.locale!=="ko"&&(nl||He!=="onCompositionStart"?He==="onCompositionEnd"&&nl&&(je=Ju()):(er=ie,Zu="value"in er?er.value:er.textContent,nl=!0)),be=Sf(Y,He),0<be.length&&(He=new ir(He,r,null,u,ie),oe.push({event:He,listeners:be}),je?He.data=je:(je=tl(u),je!==null&&(He.data=je)))),(je=oi?VN(r,u):MN(r,u))&&(He=Sf(Y,"onBeforeInput"),0<He.length&&(be=new ir("onBeforeInput","beforeinput",null,u,ie),oe.push({event:be,listeners:He}),be.data=je)),xk(oe,r,Y,u,ie)}OE(oe,a)})}function Nc(r,a,u){return{instance:r,listener:a,currentTarget:u}}function Sf(r,a){for(var u=a+"Capture",c=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Ri(r,u),p!=null&&c.unshift(Nc(r,p,y)),p=Ri(r,a),p!=null&&c.push(Nc(r,p,y))),r.tag===3)return c;r=r.return}return[]}function Ck(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function jE(r,a,u,c,p){for(var y=a._reactName,T=[];u!==null&&u!==c;){var A=u,j=A.alternate,Y=A.stateNode;if(A=A.tag,j!==null&&j===c)break;A!==5&&A!==26&&A!==27||Y===null||(j=Y,p?(Y=Ri(u,y),Y!=null&&T.unshift(Nc(u,Y,j))):p||(Y=Ri(u,y),Y!=null&&T.push(Nc(u,Y,j)))),u=u.return}T.length!==0&&r.push({event:a,listeners:T})}var Dk=/\r\n?/g,Nk=/\u0000|\uFFFD/g;function zE(r){return(typeof r=="string"?r:""+r).replace(Dk,`
`).replace(Nk,"")}function UE(r,a){return a=zE(a),zE(r)===a}function ct(r,a,u,c,p,y){switch(u){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Mn(r,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Mn(r,""+c);break;case"className":Gn(r,"class",c);break;case"tabIndex":Gn(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Gn(r,u,c);break;case"style":Xu(r,c,y);break;case"data":if(a!=="object"){Gn(r,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(u);break}c=Xo(""+c),r.setAttribute(u,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(a!=="input"&&ct(r,a,"name",p.name,p,null),ct(r,a,"formEncType",p.formEncType,p,null),ct(r,a,"formMethod",p.formMethod,p,null),ct(r,a,"formTarget",p.formTarget,p,null)):(ct(r,a,"encType",p.encType,p,null),ct(r,a,"method",p.method,p,null),ct(r,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(u);break}c=Xo(""+c),r.setAttribute(u,c);break;case"onClick":c!=null&&(r.onclick=Ii);break;case"onScroll":c!=null&&Fe("scroll",r);break;case"onScrollEnd":c!=null&&Fe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(u=c.__html,u!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}u=Xo(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(u,""+c):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":c===!0?r.setAttribute(u,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(u,c):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(u,c):r.removeAttribute(u);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(u):r.setAttribute(u,c);break;case"popover":Fe("beforetoggle",r),Fe("toggle",r),Ko(r,"popover",c);break;case"xlinkActuate":Ft(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ft(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ft(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ft(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ft(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ft(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ko(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=wd.get(u)||u,Ko(r,u,c))}}function Dy(r,a,u,c,p,y){switch(u){case"style":Xu(r,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(u=c.__html,u!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof c=="string"?Mn(r,c):(typeof c=="number"||typeof c=="bigint")&&Mn(r,""+c);break;case"onScroll":c!=null&&Fe("scroll",r);break;case"onScrollEnd":c!=null&&Fe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qu.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),a=u.slice(2,p?u.length-7:void 0),y=r[nn]||null,y=y!=null?y[u]:null,typeof y=="function"&&r.removeEventListener(a,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,c,p);break e}u in r?r[u]=c:c===!0?r.setAttribute(u,""):Ko(r,u,c)}}}function dn(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",r),Fe("load",r);var c=!1,p=!1,y;for(y in u)if(u.hasOwnProperty(y)){var T=u[y];if(T!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ct(r,a,y,T,u,null)}}p&&ct(r,a,"srcSet",u.srcSet,u,null),c&&ct(r,a,"src",u.src,u,null);return;case"input":Fe("invalid",r);var A=y=T=p=null,j=null,Y=null;for(c in u)if(u.hasOwnProperty(c)){var ie=u[c];if(ie!=null)switch(c){case"name":p=ie;break;case"type":T=ie;break;case"checked":j=ie;break;case"defaultChecked":Y=ie;break;case"value":y=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ct(r,a,c,ie,u,null)}}bd(r,y,A,j,Y,T,p,!1);return;case"select":Fe("invalid",r),c=T=y=null;for(p in u)if(u.hasOwnProperty(p)&&(A=u[p],A!=null))switch(p){case"value":y=A;break;case"defaultValue":T=A;break;case"multiple":c=A;default:ct(r,a,p,A,u,null)}a=y,u=T,r.multiple=!!c,a!=null?ms(r,!!c,a,!1):u!=null&&ms(r,!!c,u,!0);return;case"textarea":Fe("invalid",r),y=p=c=null;for(T in u)if(u.hasOwnProperty(T)&&(A=u[T],A!=null))switch(T){case"value":c=A;break;case"defaultValue":p=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:ct(r,a,T,A,u,null)}ps(r,c,p,y);return;case"option":for(j in u)if(u.hasOwnProperty(j)&&(c=u[j],c!=null))switch(j){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ct(r,a,j,c,u,null)}return;case"dialog":Fe("beforetoggle",r),Fe("toggle",r),Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":Fe("load",r);break;case"video":case"audio":for(c=0;c<Dc.length;c++)Fe(Dc[c],r);break;case"image":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"embed":case"source":case"link":Fe("error",r),Fe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in u)if(u.hasOwnProperty(Y)&&(c=u[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ct(r,a,Y,c,u,null)}return;default:if(Yo(a)){for(ie in u)u.hasOwnProperty(ie)&&(c=u[ie],c!==void 0&&Dy(r,a,ie,c,u,void 0));return}}for(A in u)u.hasOwnProperty(A)&&(c=u[A],c!=null&&ct(r,a,A,c,u,null))}function kk(r,a,u,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,A=null,j=null,Y=null,ie=null;for(J in u){var oe=u[J];if(u.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":j=oe;default:c.hasOwnProperty(J)||ct(r,a,J,null,c,oe)}}for(var X in c){var J=c[X];if(oe=u[X],c.hasOwnProperty(X)&&(J!=null||oe!=null))switch(X){case"type":y=J;break;case"name":p=J;break;case"checked":Y=J;break;case"defaultChecked":ie=J;break;case"value":T=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:J!==oe&&ct(r,a,X,J,c,oe)}}Qo(r,T,A,j,Y,ie,y,p);return;case"select":J=T=A=X=null;for(y in u)if(j=u[y],u.hasOwnProperty(y)&&j!=null)switch(y){case"value":break;case"multiple":J=j;default:c.hasOwnProperty(y)||ct(r,a,y,null,c,j)}for(p in c)if(y=c[p],j=u[p],c.hasOwnProperty(p)&&(y!=null||j!=null))switch(p){case"value":X=y;break;case"defaultValue":A=y;break;case"multiple":T=y;default:y!==j&&ct(r,a,p,y,c,j)}a=A,u=T,c=J,X!=null?ms(r,!!u,X,!1):!!c!=!!u&&(a!=null?ms(r,!!u,a,!0):ms(r,!!u,u?[]:"",!1));return;case"textarea":J=X=null;for(A in u)if(p=u[A],u.hasOwnProperty(A)&&p!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ct(r,a,A,null,c,p)}for(T in c)if(p=c[T],y=u[T],c.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":X=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ct(r,a,T,p,c,y)}Td(r,X,J);return;case"option":for(var ve in u)if(X=u[ve],u.hasOwnProperty(ve)&&X!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":r.selected=!1;break;default:ct(r,a,ve,null,c,X)}for(j in c)if(X=c[j],J=u[j],c.hasOwnProperty(j)&&X!==J&&(X!=null||J!=null))switch(j){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ct(r,a,j,X,c,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in u)X=u[Re],u.hasOwnProperty(Re)&&X!=null&&!c.hasOwnProperty(Re)&&ct(r,a,Re,null,c,X);for(Y in c)if(X=c[Y],J=u[Y],c.hasOwnProperty(Y)&&X!==J&&(X!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,a));break;default:ct(r,a,Y,X,c,J)}return;default:if(Yo(a)){for(var ht in u)X=u[ht],u.hasOwnProperty(ht)&&X!==void 0&&!c.hasOwnProperty(ht)&&Dy(r,a,ht,void 0,c,X);for(ie in c)X=c[ie],J=u[ie],!c.hasOwnProperty(ie)||X===J||X===void 0&&J===void 0||Dy(r,a,ie,X,c,J);return}}for(var G in u)X=u[G],u.hasOwnProperty(G)&&X!=null&&!c.hasOwnProperty(G)&&ct(r,a,G,null,c,X);for(oe in c)X=c[oe],J=u[oe],!c.hasOwnProperty(oe)||X===J||X==null&&J==null||ct(r,a,oe,X,c,J)}function BE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vk(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,u=performance.getEntriesByType("resource"),c=0;c<u.length;c++){var p=u[c],y=p.transferSize,T=p.initiatorType,A=p.duration;if(y&&A&&BE(T)){for(T=0,A=p.responseEnd,c+=1;c<u.length;c++){var j=u[c],Y=j.startTime;if(Y>A)break;var ie=j.transferSize,oe=j.initiatorType;ie&&BE(oe)&&(j=j.responseEnd,T+=ie*(j<A?1:(A-Y)/(j-Y)))}if(--c,a+=8*(y+T)/(p.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Ny=null,ky=null;function xf(r){return r.nodeType===9?r:r.ownerDocument}function FE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qE(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Vy(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var My=null;function Mk(){var r=window.event;return r&&r.type==="popstate"?r===My?!1:(My=r,!0):(My=null,!1)}var HE=typeof setTimeout=="function"?setTimeout:void 0,Pk=typeof clearTimeout=="function"?clearTimeout:void 0,GE=typeof Promise=="function"?Promise:void 0,Ok=typeof queueMicrotask=="function"?queueMicrotask:typeof GE<"u"?function(r){return GE.resolve(null).then(r).catch(Lk)}:HE;function Lk(r){setTimeout(function(){throw r})}function js(r){return r==="head"}function $E(r,a){var u=a,c=0;do{var p=u.nextSibling;if(r.removeChild(u),p&&p.nodeType===8)if(u=p.data,u==="/$"||u==="/&"){if(c===0){r.removeChild(p),Dl(a);return}c--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")c++;else if(u==="html")kc(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,kc(u);for(var y=u.firstChild;y;){var T=y.nextSibling,A=y.nodeName;y[Ki]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||u.removeChild(y),y=T}}else u==="body"&&kc(r.ownerDocument.body);u=p}while(u);Dl(a)}function KE(r,a){var u=r;r=0;do{var c=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),c&&c.nodeType===8)if(u=c.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=c}while(u)}function Py(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Py(u),$o(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function jk(r,a,u,c){for(;r.nodeType===1;){var p=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Ki])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=mi(r.nextSibling),r===null)break}return null}function zk(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=mi(r.nextSibling),r===null))return null;return r}function QE(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=mi(r.nextSibling),r===null))return null;return r}function Oy(r){return r.data==="$?"||r.data==="$~"}function Ly(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function Uk(r,a){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||u.readyState!=="loading")a();else{var c=function(){a(),u.removeEventListener("DOMContentLoaded",c)};u.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function mi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var jy=null;function YE(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(a===0)return mi(r.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}r=r.nextSibling}return null}function XE(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return r;a--}else u!=="/$"&&u!=="/&"||a++}r=r.previousSibling}return null}function WE(r,a,u){switch(a=xf(u),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function kc(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);$o(r)}var pi=new Map,ZE=new Set;function Af(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var qr=se.d;se.d={f:Bk,r:Fk,D:qk,C:Hk,L:Gk,m:$k,X:Qk,S:Kk,M:Yk};function Bk(){var r=qr.f(),a=yf();return r||a}function Fk(r){var a=ri(r);a!==null&&a.tag===5&&a.type==="form"?p1(a):qr.r(r)}var Il=typeof document>"u"?null:document;function JE(r,a,u){var c=Il;if(c&&typeof a=="string"&&a){var p=Vn(a);p='link[rel="'+r+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),ZE.has(p)||(ZE.add(p),r={rel:r,crossOrigin:u,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),dn(a,"link",r),Bt(a),c.head.appendChild(a)))}}function qk(r){qr.D(r),JE("dns-prefetch",r,null)}function Hk(r,a){qr.C(r,a),JE("preconnect",r,a)}function Gk(r,a,u){qr.L(r,a,u);var c=Il;if(c&&r&&a){var p='link[rel="preload"][as="'+Vn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+Vn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+Vn(u.imageSizes)+'"]')):p+='[href="'+Vn(r)+'"]';var y=p;switch(a){case"style":y=Rl(r);break;case"script":y=Cl(r)}pi.has(y)||(r=v({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),pi.set(y,r),c.querySelector(p)!==null||a==="style"&&c.querySelector(Vc(y))||a==="script"&&c.querySelector(Mc(y))||(a=c.createElement("link"),dn(a,"link",r),Bt(a),c.head.appendChild(a)))}}function $k(r,a){qr.m(r,a);var u=Il;if(u&&r){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Vn(c)+'"][href="'+Vn(r)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Cl(r)}if(!pi.has(y)&&(r=v({rel:"modulepreload",href:r},a),pi.set(y,r),u.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Mc(y)))return}c=u.createElement("link"),dn(c,"link",r),Bt(c),u.head.appendChild(c)}}}function Kk(r,a,u){qr.S(r,a,u);var c=Il;if(c&&r){var p=Yi(c).hoistableStyles,y=Rl(r);a=a||"default";var T=p.get(y);if(!T){var A={loading:0,preload:null};if(T=c.querySelector(Vc(y)))A.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},u),(u=pi.get(y))&&zy(r,u);var j=T=c.createElement("link");Bt(j),dn(j,"link",r),j._p=new Promise(function(Y,ie){j.onload=Y,j.onerror=ie}),j.addEventListener("load",function(){A.loading|=1}),j.addEventListener("error",function(){A.loading|=2}),A.loading|=4,If(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:A},p.set(y,T)}}}function Qk(r,a){qr.X(r,a);var u=Il;if(u&&r){var c=Yi(u).hoistableScripts,p=Cl(r),y=c.get(p);y||(y=u.querySelector(Mc(p)),y||(r=v({src:r,async:!0},a),(a=pi.get(p))&&Uy(r,a),y=u.createElement("script"),Bt(y),dn(y,"link",r),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function Yk(r,a){qr.M(r,a);var u=Il;if(u&&r){var c=Yi(u).hoistableScripts,p=Cl(r),y=c.get(p);y||(y=u.querySelector(Mc(p)),y||(r=v({src:r,async:!0,type:"module"},a),(a=pi.get(p))&&Uy(r,a),y=u.createElement("script"),Bt(y),dn(y,"link",r),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function ew(r,a,u,c){var p=(p=De.current)?Af(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Rl(u.href),u=Yi(p).hoistableStyles,c=u.get(a),c||(c={type:"style",instance:null,count:0,state:null},u.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Rl(u.href);var y=Yi(p).hoistableStyles,T=y.get(r);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,T),(y=p.querySelector(Vc(r)))&&!y._p&&(T.instance=y,T.state.loading=5),pi.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},pi.set(r,u),y||Xk(p,r,u,T.state))),a&&c===null)throw Error(i(528,""));return T}if(a&&c!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Cl(u),u=Yi(p).hoistableScripts,c=u.get(a),c||(c={type:"script",instance:null,count:0,state:null},u.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Rl(r){return'href="'+Vn(r)+'"'}function Vc(r){return'link[rel="stylesheet"]['+r+"]"}function tw(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function Xk(r,a,u,c){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=r.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),dn(a,"link",u),Bt(a),r.head.appendChild(a))}function Cl(r){return'[src="'+Vn(r)+'"]'}function Mc(r){return"script[async]"+r}function nw(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var c=r.querySelector('style[data-href~="'+Vn(u.href)+'"]');if(c)return a.instance=c,Bt(c),c;var p=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Bt(c),dn(c,"style",p),If(c,u.precedence,r),a.instance=c;case"stylesheet":p=Rl(u.href);var y=r.querySelector(Vc(p));if(y)return a.state.loading|=4,a.instance=y,Bt(y),y;c=tw(u),(p=pi.get(p))&&zy(c,p),y=(r.ownerDocument||r).createElement("link"),Bt(y);var T=y;return T._p=new Promise(function(A,j){T.onload=A,T.onerror=j}),dn(y,"link",c),a.state.loading|=4,If(y,u.precedence,r),a.instance=y;case"script":return y=Cl(u.src),(p=r.querySelector(Mc(y)))?(a.instance=p,Bt(p),p):(c=u,(p=pi.get(y))&&(c=v({},u),Uy(c,p)),r=r.ownerDocument||r,p=r.createElement("script"),Bt(p),dn(p,"link",c),r.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,If(c,u.precedence,r));return a.instance}function If(r,a,u){for(var c=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,T=0;T<c.length;T++){var A=c[T];if(A.dataset.precedence===a)y=A;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function zy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Uy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Rf=null;function iw(r,a,u){if(Rf===null){var c=new Map,p=Rf=new Map;p.set(u,c)}else p=Rf,c=p.get(u),c||(c=new Map,p.set(u,c));if(c.has(r))return c;for(c.set(r,null),u=u.getElementsByTagName(r),p=0;p<u.length;p++){var y=u[p];if(!(y[Ki]||y[Ut]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=r+T;var A=c.get(T);A?A.push(y):c.set(T,[y])}}return c}function rw(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function Wk(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function sw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Zk(r,a,u,c){if(u.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var p=Rl(c.href),y=a.querySelector(Vc(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Cf.bind(r),a.then(r,r)),u.state.loading|=4,u.instance=y,Bt(y);return}y=a.ownerDocument||a,c=tw(c),(p=pi.get(p))&&zy(c,p),y=y.createElement("link"),Bt(y);var T=y;T._p=new Promise(function(A,j){T.onload=A,T.onerror=j}),dn(y,"link",c),u.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=Cf.bind(r),a.addEventListener("load",u),a.addEventListener("error",u))}}var By=0;function Jk(r,a){return r.stylesheets&&r.count===0&&Nf(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var c=setTimeout(function(){if(r.stylesheets&&Nf(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+a);0<r.imgBytes&&By===0&&(By=62500*Vk());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Nf(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>By?50:800)+a);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Cf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Df=null;function Nf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Df=new Map,a.forEach(eV,r),Df=null,Cf.call(r))}function eV(r,a){if(!(a.state.loading&4)){var u=Df.get(r);if(u)var c=u.get(null);else{u=new Map,Df.set(r,u);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(u.set(T.dataset.precedence,T),c=T)}c&&u.set(null,c)}p=a.instance,T=p.getAttribute("data-precedence"),y=u.get(T)||c,y===c&&u.set(null,p),u.set(T,p),this.count++,c=Cf.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),a.state.loading|=4}}var Pc={$$typeof:P,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function tV(r,a,u,c,p,y,T,A,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function aw(r,a,u,c,p,y,T,A,j,Y,ie,oe){return r=new tV(r,a,u,T,j,Y,ie,oe,A),a=1,y===!0&&(a|=24),y=Kn(3,null,null,a),r.current=y,y.stateNode=r,a=bg(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:c,isDehydrated:u,cache:a},Sg(y),r}function ow(r){return r?(r=al,r):al}function lw(r,a,u,c,p,y){p=ow(p),c.context===null?c.context=p:c.pendingContext=p,c=Is(a),c.payload={element:u},y=y===void 0?null:y,y!==null&&(c.callback=y),u=Rs(r,c,a),u!==null&&(zn(u,r,a),fc(u,r,a))}function uw(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function Fy(r,a){uw(r,a),(r=r.alternate)&&uw(r,a)}function cw(r){if(r.tag===13||r.tag===31){var a=qa(r,67108864);a!==null&&zn(a,r,67108864),Fy(r,67108864)}}function hw(r){if(r.tag===13||r.tag===31){var a=Zn();a=Na(a);var u=qa(r,a);u!==null&&zn(u,r,a),Fy(r,a)}}var kf=!0;function nV(r,a,u,c){var p=F.T;F.T=null;var y=se.p;try{se.p=2,qy(r,a,u,c)}finally{se.p=y,F.T=p}}function iV(r,a,u,c){var p=F.T;F.T=null;var y=se.p;try{se.p=8,qy(r,a,u,c)}finally{se.p=y,F.T=p}}function qy(r,a,u,c){if(kf){var p=Hy(c);if(p===null)Cy(r,a,c,Vf,u),fw(r,c);else if(sV(p,r,a,u,c))c.stopPropagation();else if(fw(r,c),a&4&&-1<rV.indexOf(r)){for(;p!==null;){var y=ri(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=qi(y.pendingLanes);if(T!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var j=1<<31-Dt(T);A.entanglements[1]|=j,T&=~j}lr(y),(et&6)===0&&(pf=In()+500,Cc(0))}}break;case 31:case 13:A=qa(y,2),A!==null&&zn(A,y,2),yf(),Fy(y,2)}if(y=Hy(c),y===null&&Cy(r,a,c,Vf,u),y===p)break;p=y}p!==null&&c.stopPropagation()}else Cy(r,a,c,null,u)}}function Hy(r){return r=si(r),Gy(r)}var Vf=null;function Gy(r){if(Vf=null,r=Qi(r),r!==null){var a=o(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=l(a),r!==null)return r;r=null}else if(u===31){if(r=h(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Vf=r,null}function dw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ia()){case ju:return 2;case zu:return 8;case ds:case Wp:return 32;case cd:return 268435456;default:return 32}default:return 32}}var $y=!1,zs=null,Us=null,Bs=null,Oc=new Map,Lc=new Map,Fs=[],rV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fw(r,a){switch(r){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":Oc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(a.pointerId)}}function jc(r,a,u,c,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:u,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},a!==null&&(a=ri(a),a!==null&&cw(a)),r):(r.eventSystemFlags|=c,a=r.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),r)}function sV(r,a,u,c,p){switch(a){case"focusin":return zs=jc(zs,r,a,u,c,p),!0;case"dragenter":return Us=jc(Us,r,a,u,c,p),!0;case"mouseover":return Bs=jc(Bs,r,a,u,c,p),!0;case"pointerover":var y=p.pointerId;return Oc.set(y,jc(Oc.get(y)||null,r,a,u,c,p)),!0;case"gotpointercapture":return y=p.pointerId,Lc.set(y,jc(Lc.get(y)||null,r,a,u,c,p)),!0}return!1}function mw(r){var a=Qi(r.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){r.blockedOn=a,xi(r.priority,function(){hw(u)});return}}else if(a===31){if(a=h(u),a!==null){r.blockedOn=a,xi(r.priority,function(){hw(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Mf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=Hy(r.nativeEvent);if(u===null){u=r.nativeEvent;var c=new u.constructor(u.type,u);Wu=c,u.target.dispatchEvent(c),Wu=null}else return a=ri(u),a!==null&&cw(a),r.blockedOn=u,!1;a.shift()}return!0}function pw(r,a,u){Mf(r)&&u.delete(a)}function aV(){$y=!1,zs!==null&&Mf(zs)&&(zs=null),Us!==null&&Mf(Us)&&(Us=null),Bs!==null&&Mf(Bs)&&(Bs=null),Oc.forEach(pw),Lc.forEach(pw)}function Pf(r,a){r.blockedOn===a&&(r.blockedOn=null,$y||($y=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aV)))}var Of=null;function gw(r){Of!==r&&(Of=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Of===r&&(Of=null);for(var a=0;a<r.length;a+=3){var u=r[a],c=r[a+1],p=r[a+2];if(typeof c!="function"){if(Gy(c||u)===null)continue;break}var y=ri(u);y!==null&&(r.splice(a,3),a-=3,Hg(y,{pending:!0,data:p,method:u.method,action:c},c,p))}}))}function Dl(r){function a(j){return Pf(j,r)}zs!==null&&Pf(zs,r),Us!==null&&Pf(Us,r),Bs!==null&&Pf(Bs,r),Oc.forEach(a),Lc.forEach(a);for(var u=0;u<Fs.length;u++){var c=Fs[u];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Fs.length&&(u=Fs[0],u.blockedOn===null);)mw(u),u.blockedOn===null&&Fs.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(c=0;c<u.length;c+=3){var p=u[c],y=u[c+1],T=p[nn]||null;if(typeof y=="function")T||gw(u);else if(T){var A=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[nn]||null)A=T.formAction;else if(Gy(p)!==null)continue}else A=T.action;typeof A=="function"?u[c+1]=A:(u.splice(c,3),c-=3),gw(u)}}}function yw(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),c||setTimeout(u,20)}function u(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Ky(r){this._internalRoot=r}Lf.prototype.render=Ky.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,c=Zn();lw(u,c,r,a,null,null)},Lf.prototype.unmount=Ky.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;lw(r.current,2,null,r,null,null),yf(),a[$i]=null}};function Lf(r){this._internalRoot=r}Lf.prototype.unstable_scheduleHydration=function(r){if(r){var a=gd();r={blockedOn:null,target:r,priority:a};for(var u=0;u<Fs.length&&a!==0&&a<Fs[u].priority;u++);Fs.splice(u,0,r),u===0&&mw(r)}};var vw=e.version;if(vw!=="19.2.0")throw Error(i(527,vw,"19.2.0"));se.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var oV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jf.isDisabled&&jf.supportsFiber)try{wi=jf.inject(oV),on=jf}catch{}}return Uc.createRoot=function(r,a){if(!s(r))throw Error(i(299));var u=!1,c="",p=x1,y=A1,T=I1;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=aw(r,1,!1,null,null,u,c,null,p,y,T,yw),r[$i]=a.current,Ry(r),new Ky(a)},Uc.hydrateRoot=function(r,a,u){if(!s(r))throw Error(i(299));var c=!1,p="",y=x1,T=A1,A=I1,j=null;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(A=u.onRecoverableError),u.formState!==void 0&&(j=u.formState)),a=aw(r,1,!0,a,u??null,c,p,j,y,T,A,yw),a.context=ow(null),u=a.current,c=Zn(),c=Na(c),p=Is(c),p.callback=null,Rs(u,p,c),u=c,a.current.lanes=u,Ca(a,u),lr(a),r[$i]=a.current,Ry(r),new Lf(a)},Uc.version="19.2.0",Uc}var Rw;function vV(){if(Rw)return Xy.exports;Rw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xy.exports=yV(),Xy.exports}var _V=vV();const bV="modulepreload",TV=function(n){return"/house-budget-pwa/"+n},Cw={},EV=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var l=f;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=h?.nonce||h?.getAttribute("nonce");s=f(t.map(g=>{if(g=TV(g),g in Cw)return;Cw[g]=!0;const v=g.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":bV,v||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((R,D)=>{S.addEventListener("load",R),S.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(h){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=h,window.dispatchEvent(d),!d.defaultPrevented)throw h}return s.then(h=>{for(const d of h||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function wV(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:s,onRegisteredSW:o,onRegisterError:l}=n;let h,d;const f=async(v=!0)=>{await d};async function g(){if("serviceWorker"in navigator){if(h=await EV(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/house-budget-pwa/sw.js",{scope:"/house-budget-pwa/",type:"classic"})).catch(v=>{l?.(v)}),!h)return;h.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),h.addEventListener("installed",v=>{v.isUpdate||i?.()}),h.register({immediate:e}).then(v=>{o?o("/house-budget-pwa/sw.js",v):s?.(v)}).catch(v=>{l?.(v)})}}return d=g(),f}var Dw="popstate";function SV(n={}){function e(s,o){let{pathname:l="/",search:h="",hash:d=""}=jo(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),L0("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let l=s.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");h=f===-1?d:d.slice(0,f)}return h+"#"+(typeof o=="string"?o:gh(o))}function i(s,o){Ei(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return AV(e,t,i,n)}function St(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ei(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xV(){return Math.random().toString(36).substring(2,10)}function Nw(n,e){return{usr:n.state,key:n.key,idx:e}}function L0(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?jo(e):e,state:t,key:e&&e.key||i||xV()}}function gh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function jo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function AV(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function v(){h="POP";let k=g(),z=k==null?null:k-f;f=k,d&&d({action:h,location:D.location,delta:z})}function _(k,z){h="PUSH";let U=L0(D.location,k,z);t&&t(U,k),f=g()+1;let P=Nw(U,f),W=D.createHref(U);try{l.pushState(P,"",W)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;s.location.assign(W)}o&&d&&d({action:h,location:D.location,delta:1})}function S(k,z){h="REPLACE";let U=L0(D.location,k,z);t&&t(U,k),f=g();let P=Nw(U,f),W=D.createHref(U);l.replaceState(P,"",W),o&&d&&d({action:h,location:D.location,delta:0})}function R(k){return IV(k)}let D={get action(){return h},get location(){return n(s,l)},listen(k){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Dw,v),d=k,()=>{s.removeEventListener(Dw,v),d=null}},createHref(k){return e(s,k)},createURL:R,encodeLocation(k){let z=R(k);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:_,replace:S,go(k){return l.go(k)}};return D}function IV(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),St(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:gh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function nI(n,e,t="/"){return RV(n,e,t,!1)}function RV(n,e,t,i){let s=typeof e=="string"?jo(e):e,o=Jr(s.pathname||"/",t);if(o==null)return null;let l=iI(n);CV(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let f=UV(o);h=jV(l[d],f,i)}return h}function iI(n,e=[],t=[],i="",s=!1){let o=(l,h,d=s,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;St(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let v=Wr([i,g.relativePath]),_=t.concat(g);l.children&&l.children.length>0&&(St(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),iI(l.children,e,_,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:OV(v,l.index),routesMeta:_})};return n.forEach((l,h)=>{if(l.path===""||!l.path?.includes("?"))o(l,h);else for(let d of rI(l.path))o(l,h,!0,d)}),e}function rI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=rI(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function CV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:LV(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var DV=/^:[\w-]+$/,NV=3,kV=2,VV=1,MV=10,PV=-2,kw=n=>n==="*";function OV(n,e){let t=n.split("/"),i=t.length;return t.some(kw)&&(i+=PV),e&&(i+=kV),t.filter(s=>!kw(s)).reduce((s,o)=>s+(DV.test(o)?NV:o===""?VV:MV),i)}function LV(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function jV(n,e,t=!1){let{routesMeta:i}=n,s={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],f=h===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=wm({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),_=d.route;if(!v&&f&&t&&!i[i.length-1].route.index&&(v=wm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Wr([o,v.pathname]),pathnameBase:GV(Wr([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=Wr([o,v.pathnameBase]))}return l}function wm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=zV(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:v},_)=>{if(g==="*"){let R=h[_]||"";l=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const S=h[_];return v&&!S?f[g]=void 0:f[g]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function zV(n,e=!1,t=!0){Ei(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function UV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ei(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Jr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var BV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FV=n=>BV.test(n);function qV(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?jo(n):n,o;if(t)if(FV(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Ei(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=Vw(t.substring(1),"/"):o=Vw(t,e)}else o=e;return{pathname:o,search:$V(i),hash:KV(s)}}function Vw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function e0(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sI(n){let e=HV(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function aI(n,e,t,i=!1){let s;typeof n=="string"?s=jo(n):(s={...n},St(!s.pathname||!s.pathname.includes("?"),e0("?","pathname","search",s)),St(!s.pathname||!s.pathname.includes("#"),e0("#","pathname","hash",s)),St(!s.search||!s.search.includes("#"),e0("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=t;else{let v=e.length-1;if(!i&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}h=v>=0?e[v]:"/"}let d=qV(s,h),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Wr=n=>n.join("/").replace(/\/\/+/g,"/"),GV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),$V=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,KV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function QV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oI=["POST","PUT","PATCH","DELETE"];new Set(oI);var YV=["GET",...oI];new Set(YV);var Eu=L.createContext(null);Eu.displayName="DataRouter";var ap=L.createContext(null);ap.displayName="DataRouterState";L.createContext(!1);var lI=L.createContext({isTransitioning:!1});lI.displayName="ViewTransition";var XV=L.createContext(new Map);XV.displayName="Fetchers";var WV=L.createContext(null);WV.displayName="Await";var wr=L.createContext(null);wr.displayName="Navigation";var Fh=L.createContext(null);Fh.displayName="Location";var Sr=L.createContext({outlet:null,matches:[],isDataRoute:!1});Sr.displayName="Route";var Wv=L.createContext(null);Wv.displayName="RouteError";function ZV(n,{relative:e}={}){St(qh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=L.useContext(wr),{hash:s,pathname:o,search:l}=Hh(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Wr([t,o])),i.createHref({pathname:h,search:l,hash:s})}function qh(){return L.useContext(Fh)!=null}function va(){return St(qh(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Fh).location}var uI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cI(n){L.useContext(wr).static||L.useLayoutEffect(n)}function zo(){let{isDataRoute:n}=L.useContext(Sr);return n?dM():JV()}function JV(){St(qh(),"useNavigate() may be used only in the context of a <Router> component.");let n=L.useContext(Eu),{basename:e,navigator:t}=L.useContext(wr),{matches:i}=L.useContext(Sr),{pathname:s}=va(),o=JSON.stringify(sI(i)),l=L.useRef(!1);return cI(()=>{l.current=!0}),L.useCallback((d,f={})=>{if(Ei(l.current,uI),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=aI(d,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Wr([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,n])}L.createContext(null);function eM(){let{matches:n}=L.useContext(Sr),e=n[n.length-1];return e?e.params:{}}function Hh(n,{relative:e}={}){let{matches:t}=L.useContext(Sr),{pathname:i}=va(),s=JSON.stringify(sI(t));return L.useMemo(()=>aI(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function tM(n,e){return hI(n,e)}function hI(n,e,t,i,s){St(qh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=L.useContext(wr),{matches:l}=L.useContext(Sr),h=l[l.length-1],d=h?h.params:{},f=h?h.pathname:"/",g=h?h.pathnameBase:"/",v=h&&h.route;{let U=v&&v.path||"";dI(f,!v||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let _=va(),S;if(e){let U=typeof e=="string"?jo(e):e;St(g==="/"||U.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${U.pathname}" was given in the \`location\` prop.`),S=U}else S=_;let R=S.pathname||"/",D=R;if(g!=="/"){let U=g.replace(/^\//,"").split("/");D="/"+R.replace(/^\//,"").split("/").slice(U.length).join("/")}let k=nI(n,{pathname:D});Ei(v||k!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Ei(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=aM(k&&k.map(U=>Object.assign({},U,{params:Object.assign({},d,U.params),pathname:Wr([g,o.encodeLocation?o.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?g:Wr([g,o.encodeLocation?o.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),l,t,i,s);return e&&z?L.createElement(Fh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},z):z}function nM(){let n=hM(),e=QV(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:o},"ErrorBoundary")," or"," ",L.createElement("code",{style:o},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:s},t):null,l)}var iM=L.createElement(nM,null),rM=class extends L.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?L.createElement(Sr.Provider,{value:this.props.routeContext},L.createElement(Wv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sM({routeContext:n,match:e,children:t}){let i=L.useContext(Eu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Sr.Provider,{value:n},t)}function aM(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let g=o.findIndex(v=>v.route.id&&l?.[v.route.id]!==void 0);St(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let v=o[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:_,errors:S}=t,R=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||R){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&i?(g,v)=>{i(g,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:v})}:void 0;return o.reduceRight((g,v,_)=>{let S,R=!1,D=null,k=null;t&&(S=l&&v.route.id?l[v.route.id]:void 0,D=v.route.errorElement||iM,h&&(d<0&&_===0?(dI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,k=null):d===_&&(R=!0,k=v.route.hydrateFallbackElement||null)));let z=e.concat(o.slice(0,_+1)),U=()=>{let P;return S?P=D:R?P=k:v.route.Component?P=L.createElement(v.route.Component,null):v.route.element?P=v.route.element:P=g,L.createElement(sM,{match:v,routeContext:{outlet:g,matches:z,isDataRoute:t!=null},children:P})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?L.createElement(rM,{location:t.location,revalidation:t.revalidation,component:D,error:S,children:U(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:f}):U()},null)}function Zv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oM(n){let e=L.useContext(Eu);return St(e,Zv(n)),e}function lM(n){let e=L.useContext(ap);return St(e,Zv(n)),e}function uM(n){let e=L.useContext(Sr);return St(e,Zv(n)),e}function Jv(n){let e=uM(n),t=e.matches[e.matches.length-1];return St(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function cM(){return Jv("useRouteId")}function hM(){let n=L.useContext(Wv),e=lM("useRouteError"),t=Jv("useRouteError");return n!==void 0?n:e.errors?.[t]}function dM(){let{router:n}=oM("useNavigate"),e=Jv("useNavigate"),t=L.useRef(!1);return cI(()=>{t.current=!0}),L.useCallback(async(s,o={})=>{Ei(t.current,uI),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Mw={};function dI(n,e,t){!e&&!Mw[n]&&(Mw[n]=!0,Ei(!1,t))}L.memo(fM);function fM({routes:n,future:e,state:t,unstable_onError:i}){return hI(n,void 0,t,i,e)}function so(n){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mM({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:o=!1}){St(!qh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),h=L.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=jo(t));let{pathname:d="/",search:f="",hash:g="",state:v=null,key:_="default"}=t,S=L.useMemo(()=>{let R=Jr(d,l);return R==null?null:{location:{pathname:R,search:f,hash:g,state:v,key:_},navigationType:i}},[l,d,f,g,v,_,i]);return Ei(S!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:L.createElement(wr.Provider,{value:h},L.createElement(Fh.Provider,{children:e,value:S}))}function pM({children:n,location:e}){return tM(j0(n),e)}function j0(n,e=[]){let t=[];return L.Children.forEach(n,(i,s)=>{if(!L.isValidElement(i))return;let o=[...e,s];if(i.type===L.Fragment){t.push.apply(t,j0(i.props.children,o));return}St(i.type===so,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=j0(i.props.children,o)),t.push(l)}),t}var Jf="get",em="application/x-www-form-urlencoded";function op(n){return n!=null&&typeof n.tagName=="string"}function gM(n){return op(n)&&n.tagName.toLowerCase()==="button"}function yM(n){return op(n)&&n.tagName.toLowerCase()==="form"}function vM(n){return op(n)&&n.tagName.toLowerCase()==="input"}function _M(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bM(n,e){return n.button===0&&(!e||e==="_self")&&!_M(n)}var Uf=null;function TM(){if(Uf===null)try{new FormData(document.createElement("form"),0),Uf=!1}catch{Uf=!0}return Uf}var EM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function t0(n){return n!=null&&!EM.has(n)?(Ei(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${em}"`),null):n}function wM(n,e){let t,i,s,o,l;if(yM(n)){let h=n.getAttribute("action");i=h?Jr(h,e):null,t=n.getAttribute("method")||Jf,s=t0(n.getAttribute("enctype"))||em,o=new FormData(n)}else if(gM(n)||vM(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(i=d?Jr(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Jf,s=t0(n.getAttribute("formenctype"))||t0(h.getAttribute("enctype"))||em,o=new FormData(h,n),!TM()){let{name:f,type:g,value:v}=n;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,v)}}else{if(op(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Jf,i=null,s=em,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function e_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function SM(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Jr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function xM(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function IM(n,e,t){let i=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await xM(o,t);return l.links?l.links():[]}return[]}));return NM(i.flat(1).filter(AM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Pw(n,e,t,i,s,o){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,h=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||h(d,f)):o==="data"?e.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function RM(n,e,{includeHydrateFallback:t}={}){return CM(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function CM(n){return[...new Set(n)]}function DM(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function NM(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let o=JSON.stringify(DM(s));return t.has(o)||(t.add(o),i.push({key:o,link:s})),i},[])}function fI(){let n=L.useContext(Eu);return e_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function kM(){let n=L.useContext(ap);return e_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var t_=L.createContext(void 0);t_.displayName="FrameworkContext";function mI(){let n=L.useContext(t_);return e_(n,"You must render this element inside a <HydratedRouter> element"),n}function VM(n,e){let t=L.useContext(t_),[i,s]=L.useState(!1),[o,l]=L.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=e,_=L.useRef(null);L.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let D=z=>{z.forEach(U=>{l(U.isIntersecting)})},k=new IntersectionObserver(D,{threshold:.5});return _.current&&k.observe(_.current),()=>{k.disconnect()}}},[n]),L.useEffect(()=>{if(i){let D=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(D)}}},[i]);let S=()=>{s(!0)},R=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:Bc(h,S),onBlur:Bc(d,R),onMouseEnter:Bc(f,S),onMouseLeave:Bc(g,R),onTouchStart:Bc(v,S)}]:[!1,_,{}]}function Bc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function MM({page:n,...e}){let{router:t}=fI(),i=L.useMemo(()=>nI(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?L.createElement(OM,{page:n,matches:i,...e}):null}function PM(n){let{manifest:e,routeModules:t}=mI(),[i,s]=L.useState([]);return L.useEffect(()=>{let o=!1;return IM(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),i}function OM({page:n,matches:e,...t}){let i=va(),{manifest:s,routeModules:o}=mI(),{basename:l}=fI(),{loaderData:h,matches:d}=kM(),f=L.useMemo(()=>Pw(n,e,d,s,i,"data"),[n,e,d,s,i]),g=L.useMemo(()=>Pw(n,e,d,s,i,"assets"),[n,e,d,s,i]),v=L.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let R=new Set,D=!1;if(e.forEach(z=>{let U=s.routes[z.route.id];!U||!U.hasLoader||(!f.some(P=>P.route.id===z.route.id)&&z.route.id in h&&o[z.route.id]?.shouldRevalidate||U.hasClientLoader?D=!0:R.add(z.route.id))}),R.size===0)return[];let k=SM(n,l,"data");return D&&R.size>0&&k.searchParams.set("_routes",e.filter(z=>R.has(z.route.id)).map(z=>z.route.id).join(",")),[k.pathname+k.search]},[l,h,i,s,f,e,n,o]),_=L.useMemo(()=>RM(g,s),[g,s]),S=PM(g);return L.createElement(L.Fragment,null,v.map(R=>L.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),_.map(R=>L.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),S.map(({key:R,link:D})=>L.createElement("link",{key:R,nonce:t.nonce,...D})))}function LM(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var pI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pI&&(window.__reactRouterVersion="7.9.6")}catch{}function jM({basename:n,children:e,window:t}){let i=L.useRef();i.current==null&&(i.current=SV({window:t,v5Compat:!0}));let s=i.current,[o,l]=L.useState({action:s.action,location:s.location}),h=L.useCallback(d=>{L.startTransition(()=>l(d))},[l]);return L.useLayoutEffect(()=>s.listen(h),[s,h]),L.createElement(mM,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var gI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yI=L.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:o,replace:l,state:h,target:d,to:f,preventScrollReset:g,viewTransition:v,..._},S){let{basename:R}=L.useContext(wr),D=typeof f=="string"&&gI.test(f),k,z=!1;if(typeof f=="string"&&D&&(k=f,pI))try{let V=new URL(window.location.href),M=f.startsWith("//")?new URL(V.protocol+f):new URL(f),N=Jr(M.pathname,R);M.origin===V.origin&&N!=null?f=N+M.search+M.hash:z=!0}catch{Ei(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=ZV(f,{relative:s}),[P,W,ne]=VM(i,_),ee=FM(f,{replace:l,state:h,target:d,preventScrollReset:g,relative:s,viewTransition:v});function x(V){e&&e(V),V.defaultPrevented||ee(V)}let I=L.createElement("a",{..._,...ne,href:k||U,onClick:z||o?e:x,ref:LM(S,W),target:d,"data-discover":!D&&t==="render"?"true":void 0});return P&&!D?L.createElement(L.Fragment,null,I,L.createElement(MM,{page:U})):I});yI.displayName="Link";var zM=L.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:o,to:l,viewTransition:h,children:d,...f},g){let v=Hh(l,{relative:f.relative}),_=va(),S=L.useContext(ap),{navigator:R,basename:D}=L.useContext(wr),k=S!=null&&KM(v)&&h===!0,z=R.encodeLocation?R.encodeLocation(v).pathname:v.pathname,U=_.pathname,P=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(U=U.toLowerCase(),P=P?P.toLowerCase():null,z=z.toLowerCase()),P&&D&&(P=Jr(P,D)||P);const W=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ne=U===z||!s&&U.startsWith(z)&&U.charAt(W)==="/",ee=P!=null&&(P===z||!s&&P.startsWith(z)&&P.charAt(z.length)==="/"),x={isActive:ne,isPending:ee,isTransitioning:k},I=ne?e:void 0,V;typeof i=="function"?V=i(x):V=[i,ne?"active":null,ee?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(x):o;return L.createElement(yI,{...f,"aria-current":I,className:V,ref:g,style:M,to:l,viewTransition:h},typeof d=="function"?d(x):d)});zM.displayName="NavLink";var UM=L.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:o,method:l=Jf,action:h,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:v,..._},S)=>{let R=GM(),D=$M(h,{relative:f}),k=l.toLowerCase()==="get"?"get":"post",z=typeof h=="string"&&gI.test(h),U=P=>{if(d&&d(P),P.defaultPrevented)return;P.preventDefault();let W=P.nativeEvent.submitter,ne=W?.getAttribute("formmethod")||l;R(W||P.currentTarget,{fetcherKey:e,method:ne,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:v})};return L.createElement("form",{ref:S,method:k,action:D,onSubmit:i?d:U,..._,"data-discover":!z&&n==="render"?"true":void 0})});UM.displayName="Form";function BM(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vI(n){let e=L.useContext(Eu);return St(e,BM(n)),e}function FM(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:l}={}){let h=zo(),d=va(),f=Hh(n,{relative:o});return L.useCallback(g=>{if(bM(g,e)){g.preventDefault();let v=t!==void 0?t:gh(d)===gh(f);h(n,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,h,f,t,i,e,n,s,o,l])}var qM=0,HM=()=>`__${String(++qM)}__`;function GM(){let{router:n}=vI("useSubmit"),{basename:e}=L.useContext(wr),t=cM();return L.useCallback(async(i,s={})=>{let{action:o,method:l,encType:h,formData:d,body:f}=wM(i,e);if(s.navigate===!1){let g=s.fetcherKey||HM();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function $M(n,{relative:e}={}){let{basename:t}=L.useContext(wr),i=L.useContext(Sr);St(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...Hh(n||".",{relative:e})},l=va();if(n==null){o.search=l.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let g=h.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Wr([t,o.pathname])),gh(o)}function KM(n,{relative:e}={}){let t=L.useContext(lI);St(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=vI("useViewTransitionState"),s=Hh(n,{relative:e});if(!t.isTransitioning)return!1;let o=Jr(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=Jr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return wm(s.pathname,l)!=null||wm(s.pathname,o)!=null}const QM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),Ow=n=>{const e=YM(n);return e.charAt(0).toUpperCase()+e.slice(1)},_I=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),XM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var WM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZM=L.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:l,...h},d)=>L.createElement("svg",{ref:d,...WM,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:_I("lucide",s),...!o&&!XM(h)&&{"aria-hidden":"true"},...h},[...l.map(([f,g])=>L.createElement(f,g)),...Array.isArray(o)?o:[o]]));const nt=(n,e)=>{const t=L.forwardRef(({className:i,...s},o)=>L.createElement(ZM,{ref:o,iconNode:e,className:_I(`lucide-${QM(Ow(n))}`,`lucide-${n}`,i),...s}));return t.displayName=Ow(n),t};const JM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bI=nt("arrow-left",JM);const e4=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],t4=nt("arrow-right-left",e4);const n4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ao=nt("chevron-right",n4);const i4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],r4=nt("circle-arrow-down",i4);const s4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],a4=nt("circle-arrow-up",s4);const o4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],l4=nt("circle-check-big",o4);const u4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Lw=nt("circle-check",u4);const c4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],h4=nt("circle-plus",c4);const d4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jw=nt("circle",d4);const f4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Sm=nt("download",f4);const m4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],p4=nt("eye-off",m4);const g4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],y4=nt("eye",g4);const v4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_4=nt("file-text",v4);const b4=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],T4=nt("folder-plus",b4);const E4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],w4=nt("funnel",E4);const S4=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],x4=nt("git-branch",S4);const A4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],I4=nt("list",A4);const R4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],C4=nt("loader",R4);const D4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],N4=nt("log-out",D4);const k4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],z0=nt("refresh-cw",k4);const V4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],M4=nt("save",V4);const P4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],O4=nt("search",P4);const L4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j4=nt("settings",L4);const z4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xm=nt("trash-2",z4);const U4=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],TI=nt("trash",U4);const B4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],F4=nt("undo-2",B4);const q4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],H4=nt("upload",q4);const G4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],$4=nt("wallet",G4);const K4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Q4=nt("wifi-off",K4);const Y4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],X4=nt("wifi",Y4);const W4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],n_=nt("x",W4),zw=n=>{let e;const t=new Set,i=(f,g)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(S=>S(e,_))}},s=()=>e,h={setState:i,getState:s,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=n(i,s,h);return h},Z4=(n=>n?zw(n):zw),J4=n=>n;function eP(n,e=J4){const t=zf.useSyncExternalStore(n.subscribe,zf.useCallback(()=>e(n.getState()),[n,e]),zf.useCallback(()=>e(n.getInitialState()),[n,e]));return zf.useDebugValue(t),t}const Uw=n=>{const e=Z4(n),t=i=>eP(e,i);return Object.assign(t,e),t},i_=(n=>n?Uw(n):Uw);var Fl=9e15,_a=1e9,U0="0123456789abcdef",Am="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Im="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",B0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Fl,maxE:Fl,crypto:!1},EI,Kr,Me=!0,lp="[DecimalError] ",ca=lp+"Invalid argument: ",wI=lp+"Precision limit exceeded",SI=lp+"crypto unavailable",xI="[object Decimal]",xn=Math.floor,Jt=Math.pow,tP=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,nP=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,iP=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,AI=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,zi=1e7,Ce=7,rP=9007199254740991,sP=Am.length-1,F0=Im.length-1,le={toStringTag:xI};le.absoluteValue=le.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Se(n)};le.ceil=function(){return Se(new this.constructor(this),this.e+1,2)};le.clampedTo=le.clamp=function(n,e){var t,i=this,s=i.constructor;if(n=new s(n),e=new s(e),!n.s||!e.s)return new s(NaN);if(n.gt(e))throw Error(ca+e);return t=i.cmp(n),t<0?n:i.cmp(e)>0?e:new s(i)};le.comparedTo=le.cmp=function(n){var e,t,i,s,o=this,l=o.d,h=(n=new o.constructor(n)).d,d=o.s,f=n.s;if(!l||!h)return!d||!f?NaN:d!==f?d:l===h?0:!l^d<0?1:-1;if(!l[0]||!h[0])return l[0]?d:h[0]?-f:0;if(d!==f)return d;if(o.e!==n.e)return o.e>n.e^d<0?1:-1;for(i=l.length,s=h.length,e=0,t=i<s?i:s;e<t;++e)if(l[e]!==h[e])return l[e]>h[e]^d<0?1:-1;return i===s?0:i>s^d<0?1:-1};le.cosine=le.cos=function(){var n,e,t=this,i=t.constructor;return t.d?t.d[0]?(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ce,i.rounding=1,t=aP(i,NI(i,t)),i.precision=n,i.rounding=e,Se(Kr==2||Kr==3?t.neg():t,n,e,!0)):new i(1):new i(NaN)};le.cubeRoot=le.cbrt=function(){var n,e,t,i,s,o,l,h,d,f,g=this,v=g.constructor;if(!g.isFinite()||g.isZero())return new v(g);for(Me=!1,o=g.s*Jt(g.s*g,1/3),!o||Math.abs(o)==1/0?(t=pn(g.d),n=g.e,(o=(n-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=Jt(t,1/3),n=xn((n+1)/3)-(n%3==(n<0?-1:2)),o==1/0?t="5e"+n:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),i=new v(t),i.s=g.s):i=new v(o.toString()),l=(n=v.precision)+3;;)if(h=i,d=h.times(h).times(h),f=d.plus(g),i=ft(f.plus(g).times(h),f.plus(d),l+2,1),pn(h.d).slice(0,l)===(t=pn(i.d)).slice(0,l))if(t=t.slice(l-3,l+1),t=="9999"||!s&&t=="4999"){if(!s&&(Se(h,n+1,0),h.times(h).times(h).eq(g))){i=h;break}l+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Se(i,n+1,1),e=!i.times(i).times(i).eq(g));break}return Me=!0,Se(i,n,v.rounding,e)};le.decimalPlaces=le.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-xn(this.e/Ce))*Ce,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};le.dividedBy=le.div=function(n){return ft(this,new this.constructor(n))};le.dividedToIntegerBy=le.divToInt=function(n){var e=this,t=e.constructor;return Se(ft(e,new t(n),0,1,1),t.precision,t.rounding)};le.equals=le.eq=function(n){return this.cmp(n)===0};le.floor=function(){return Se(new this.constructor(this),this.e+1,3)};le.greaterThan=le.gt=function(n){return this.cmp(n)>0};le.greaterThanOrEqualTo=le.gte=function(n){var e=this.cmp(n);return e==1||e===0};le.hyperbolicCosine=le.cosh=function(){var n,e,t,i,s,o=this,l=o.constructor,h=new l(1);if(!o.isFinite())return new l(o.s?1/0:NaN);if(o.isZero())return h;t=l.precision,i=l.rounding,l.precision=t+Math.max(o.e,o.sd())+4,l.rounding=1,s=o.d.length,s<32?(n=Math.ceil(s/3),e=(1/cp(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),o=eu(l,1,o.times(e),new l(1),!0);for(var d,f=n,g=new l(8);f--;)d=o.times(o),o=h.minus(d.times(g.minus(d.times(g))));return Se(o,l.precision=t,l.rounding=i,!0)};le.hyperbolicSine=le.sinh=function(){var n,e,t,i,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<3)s=eu(o,2,s,s,!0);else{n=1.4*Math.sqrt(i),n=n>16?16:n|0,s=s.times(1/cp(5,n)),s=eu(o,2,s,s,!0);for(var l,h=new o(5),d=new o(16),f=new o(20);n--;)l=s.times(s),s=s.times(h.plus(l.times(d.times(l).plus(f))))}return o.precision=e,o.rounding=t,Se(s,e,t,!0)};le.hyperbolicTangent=le.tanh=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+7,i.rounding=1,ft(t.sinh(),t.cosh(),i.precision=n,i.rounding=e)):new i(t.s)};le.inverseCosine=le.acos=function(){var n=this,e=n.constructor,t=n.abs().cmp(1),i=e.precision,s=e.rounding;return t!==-1?t===0?n.isNeg()?dr(e,i,s):new e(0):new e(NaN):n.isZero()?dr(e,i+4,s).times(.5):(e.precision=i+6,e.rounding=1,n=new e(1).minus(n).div(n.plus(1)).sqrt().atan(),e.precision=i,e.rounding=s,n.times(2))};le.inverseHyperbolicCosine=le.acosh=function(){var n,e,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(n=i.precision,e=i.rounding,i.precision=n+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,Me=!1,t=t.times(t).minus(1).sqrt().plus(t),Me=!0,i.precision=n,i.rounding=e,t.ln()):new i(t)};le.inverseHyperbolicSine=le.asinh=function(){var n,e,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,Me=!1,t=t.times(t).plus(1).sqrt().plus(t),Me=!0,i.precision=n,i.rounding=e,t.ln())};le.inverseHyperbolicTangent=le.atanh=function(){var n,e,t,i,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(n=o.precision,e=o.rounding,i=s.sd(),Math.max(i,n)<2*-s.e-1?Se(new o(s),n,e,!0):(o.precision=t=i-s.e,s=ft(s.plus(1),new o(1).minus(s),t+n,1),o.precision=n+4,o.rounding=1,s=s.ln(),o.precision=n,o.rounding=e,s.times(.5))):new o(NaN)};le.inverseSine=le.asin=function(){var n,e,t,i,s=this,o=s.constructor;return s.isZero()?new o(s):(e=s.abs().cmp(1),t=o.precision,i=o.rounding,e!==-1?e===0?(n=dr(o,t+4,i).times(.5),n.s=s.s,n):new o(NaN):(o.precision=t+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=i,s.times(2)))};le.inverseTangent=le.atan=function(){var n,e,t,i,s,o,l,h,d,f=this,g=f.constructor,v=g.precision,_=g.rounding;if(f.isFinite()){if(f.isZero())return new g(f);if(f.abs().eq(1)&&v+4<=F0)return l=dr(g,v+4,_).times(.25),l.s=f.s,l}else{if(!f.s)return new g(NaN);if(v+4<=F0)return l=dr(g,v+4,_).times(.5),l.s=f.s,l}for(g.precision=h=v+10,g.rounding=1,t=Math.min(28,h/Ce+2|0),n=t;n;--n)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Me=!1,e=Math.ceil(h/Ce),i=1,d=f.times(f),l=new g(f),s=f;n!==-1;)if(s=s.times(d),o=l.minus(s.div(i+=2)),s=s.times(d),l=o.plus(s.div(i+=2)),l.d[e]!==void 0)for(n=e;l.d[n]===o.d[n]&&n--;);return t&&(l=l.times(2<<t-1)),Me=!0,Se(l,g.precision=v,g.rounding=_,!0)};le.isFinite=function(){return!!this.d};le.isInteger=le.isInt=function(){return!!this.d&&xn(this.e/Ce)>this.d.length-2};le.isNaN=function(){return!this.s};le.isNegative=le.isNeg=function(){return this.s<0};le.isPositive=le.isPos=function(){return this.s>0};le.isZero=function(){return!!this.d&&this.d[0]===0};le.lessThan=le.lt=function(n){return this.cmp(n)<0};le.lessThanOrEqualTo=le.lte=function(n){return this.cmp(n)<1};le.logarithm=le.log=function(n){var e,t,i,s,o,l,h,d,f=this,g=f.constructor,v=g.precision,_=g.rounding,S=5;if(n==null)n=new g(10),e=!0;else{if(n=new g(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new g(NaN);e=n.eq(10)}if(t=f.d,f.s<0||!t||!t[0]||f.eq(1))return new g(t&&!t[0]?-1/0:f.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(s=t[0];s%10===0;)s/=10;o=s!==1}if(Me=!1,h=v+S,l=na(f,h),i=e?Rm(g,h+10):na(n,h),d=ft(l,i,h,1),yh(d.d,s=v,_))do if(h+=10,l=na(f,h),i=e?Rm(g,h+10):na(n,h),d=ft(l,i,h,1),!o){+pn(d.d).slice(s+1,s+15)+1==1e14&&(d=Se(d,v+1,0));break}while(yh(d.d,s+=10,_));return Me=!0,Se(d,v,_)};le.minus=le.sub=function(n){var e,t,i,s,o,l,h,d,f,g,v,_,S=this,R=S.constructor;if(n=new R(n),!S.d||!n.d)return!S.s||!n.s?n=new R(NaN):S.d?n.s=-n.s:n=new R(n.d||S.s!==n.s?S:NaN),n;if(S.s!=n.s)return n.s=-n.s,S.plus(n);if(f=S.d,_=n.d,h=R.precision,d=R.rounding,!f[0]||!_[0]){if(_[0])n.s=-n.s;else if(f[0])n=new R(S);else return new R(d===3?-0:0);return Me?Se(n,h,d):n}if(t=xn(n.e/Ce),g=xn(S.e/Ce),f=f.slice(),o=g-t,o){for(v=o<0,v?(e=f,o=-o,l=_.length):(e=_,t=g,l=f.length),i=Math.max(Math.ceil(h/Ce),l)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,l=_.length,v=i<l,v&&(l=i),i=0;i<l;i++)if(f[i]!=_[i]){v=f[i]<_[i];break}o=0}for(v&&(e=f,f=_,_=e,n.s=-n.s),l=f.length,i=_.length-l;i>0;--i)f[l++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(s=i;s&&f[--s]===0;)f[s]=zi-1;--f[s],f[i]+=zi}f[i]-=_[i]}for(;f[--l]===0;)f.pop();for(;f[0]===0;f.shift())--t;return f[0]?(n.d=f,n.e=up(f,t),Me?Se(n,h,d):n):new R(d===3?-0:0)};le.modulo=le.mod=function(n){var e,t=this,i=t.constructor;return n=new i(n),!t.d||!n.s||n.d&&!n.d[0]?new i(NaN):!n.d||t.d&&!t.d[0]?Se(new i(t),i.precision,i.rounding):(Me=!1,i.modulo==9?(e=ft(t,n.abs(),0,3,1),e.s*=n.s):e=ft(t,n,0,i.modulo,1),e=e.times(n),Me=!0,t.minus(e))};le.naturalExponential=le.exp=function(){return q0(this)};le.naturalLogarithm=le.ln=function(){return na(this)};le.negated=le.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Se(n)};le.plus=le.add=function(n){var e,t,i,s,o,l,h,d,f,g,v=this,_=v.constructor;if(n=new _(n),!v.d||!n.d)return!v.s||!n.s?n=new _(NaN):v.d||(n=new _(n.d||v.s===n.s?v:NaN)),n;if(v.s!=n.s)return n.s=-n.s,v.minus(n);if(f=v.d,g=n.d,h=_.precision,d=_.rounding,!f[0]||!g[0])return g[0]||(n=new _(v)),Me?Se(n,h,d):n;if(o=xn(v.e/Ce),i=xn(n.e/Ce),f=f.slice(),s=o-i,s){for(s<0?(t=f,s=-s,l=g.length):(t=g,i=o,l=f.length),o=Math.ceil(h/Ce),l=o>l?o+1:l+1,s>l&&(s=l,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(l=f.length,s=g.length,l-s<0&&(s=l,t=g,g=f,f=t),e=0;s;)e=(f[--s]=f[s]+g[s]+e)/zi|0,f[s]%=zi;for(e&&(f.unshift(e),++i),l=f.length;f[--l]==0;)f.pop();return n.d=f,n.e=up(f,i),Me?Se(n,h,d):n};le.precision=le.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(ca+n);return t.d?(e=II(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};le.round=function(){var n=this,e=n.constructor;return Se(new e(n),n.e+1,e.rounding)};le.sine=le.sin=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ce,i.rounding=1,t=lP(i,NI(i,t)),i.precision=n,i.rounding=e,Se(Kr>2?t.neg():t,n,e,!0)):new i(NaN)};le.squareRoot=le.sqrt=function(){var n,e,t,i,s,o,l=this,h=l.d,d=l.e,f=l.s,g=l.constructor;if(f!==1||!h||!h[0])return new g(!f||f<0&&(!h||h[0])?NaN:h?l:1/0);for(Me=!1,f=Math.sqrt(+l),f==0||f==1/0?(e=pn(h),(e.length+d)%2==0&&(e+="0"),f=Math.sqrt(e),d=xn((d+1)/2)-(d<0||d%2),f==1/0?e="5e"+d:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+d),i=new g(e)):i=new g(f.toString()),t=(d=g.precision)+3;;)if(o=i,i=o.plus(ft(l,o,t+2,1)).times(.5),pn(o.d).slice(0,t)===(e=pn(i.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!s&&e=="4999"){if(!s&&(Se(o,d+1,0),o.times(o).eq(l))){i=o;break}t+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Se(i,d+1,1),n=!i.times(i).eq(l));break}return Me=!0,Se(i,d,g.rounding,n)};le.tangent=le.tan=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+10,i.rounding=1,t=t.sin(),t.s=1,t=ft(t,new i(1).minus(t.times(t)).sqrt(),n+10,0),i.precision=n,i.rounding=e,Se(Kr==2||Kr==4?t.neg():t,n,e,!0)):new i(NaN)};le.times=le.mul=function(n){var e,t,i,s,o,l,h,d,f,g=this,v=g.constructor,_=g.d,S=(n=new v(n)).d;if(n.s*=g.s,!_||!_[0]||!S||!S[0])return new v(!n.s||_&&!_[0]&&!S||S&&!S[0]&&!_?NaN:!_||!S?n.s/0:n.s*0);for(t=xn(g.e/Ce)+xn(n.e/Ce),d=_.length,f=S.length,d<f&&(o=_,_=S,S=o,l=d,d=f,f=l),o=[],l=d+f,i=l;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,s=d+i;s>i;)h=o[s]+S[i]*_[s-i-1]+e,o[s--]=h%zi|0,e=h/zi|0;o[s]=(o[s]+e)%zi|0}for(;!o[--l];)o.pop();return e?++t:o.shift(),n.d=o,n.e=up(o,t),Me?Se(n,v.precision,v.rounding):n};le.toBinary=function(n,e){return r_(this,2,n,e)};le.toDecimalPlaces=le.toDP=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(qn(n,0,_a),e===void 0?e=i.rounding:qn(e,0,8),Se(t,n+t.e+1,e))};le.toExponential=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Tr(i,!0):(qn(n,0,_a),e===void 0?e=s.rounding:qn(e,0,8),i=Se(new s(i),n+1,e),t=Tr(i,!0,n+1)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toFixed=function(n,e){var t,i,s=this,o=s.constructor;return n===void 0?t=Tr(s):(qn(n,0,_a),e===void 0?e=o.rounding:qn(e,0,8),i=Se(new o(s),n+s.e+1,e),t=Tr(i,!1,n+i.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t};le.toFraction=function(n){var e,t,i,s,o,l,h,d,f,g,v,_,S=this,R=S.d,D=S.constructor;if(!R)return new D(S);if(f=t=new D(1),i=d=new D(0),e=new D(i),o=e.e=II(R)-S.e-1,l=o%Ce,e.d[0]=Jt(10,l<0?Ce+l:l),n==null)n=o>0?e:f;else{if(h=new D(n),!h.isInt()||h.lt(f))throw Error(ca+h);n=h.gt(e)?o>0?e:f:h}for(Me=!1,h=new D(pn(R)),g=D.precision,D.precision=o=R.length*Ce*2;v=ft(h,e,0,1,1),s=t.plus(v.times(i)),s.cmp(n)!=1;)t=i,i=s,s=f,f=d.plus(v.times(s)),d=s,s=e,e=h.minus(v.times(s)),h=s;return s=ft(n.minus(t),i,0,1,1),d=d.plus(s.times(f)),t=t.plus(s.times(i)),d.s=f.s=S.s,_=ft(f,i,o,1).minus(S).abs().cmp(ft(d,t,o,1).minus(S).abs())<1?[f,i]:[d,t],D.precision=g,Me=!0,_};le.toHexadecimal=le.toHex=function(n,e){return r_(this,16,n,e)};le.toNearest=function(n,e){var t=this,i=t.constructor;if(t=new i(t),n==null){if(!t.d)return t;n=new i(1),e=i.rounding}else{if(n=new i(n),e===void 0?e=i.rounding:qn(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Me=!1,t=ft(t,n,0,e,1).times(n),Me=!0,Se(t)):(n.s=t.s,t=n),t};le.toNumber=function(){return+this};le.toOctal=function(n,e){return r_(this,8,n,e)};le.toPower=le.pow=function(n){var e,t,i,s,o,l,h=this,d=h.constructor,f=+(n=new d(n));if(!h.d||!n.d||!h.d[0]||!n.d[0])return new d(Jt(+h,f));if(h=new d(h),h.eq(1))return h;if(i=d.precision,o=d.rounding,n.eq(1))return Se(h,i,o);if(e=xn(n.e/Ce),e>=n.d.length-1&&(t=f<0?-f:f)<=rP)return s=RI(d,h,t,i),n.s<0?new d(1).div(s):Se(s,i,o);if(l=h.s,l<0){if(e<n.d.length-1)return new d(NaN);if((n.d[e]&1)==0&&(l=1),h.e==0&&h.d[0]==1&&h.d.length==1)return h.s=l,h}return t=Jt(+h,f),e=t==0||!isFinite(t)?xn(f*(Math.log("0."+pn(h.d))/Math.LN10+h.e+1)):new d(t+"").e,e>d.maxE+1||e<d.minE-1?new d(e>0?l/0:0):(Me=!1,d.rounding=h.s=1,t=Math.min(12,(e+"").length),s=q0(n.times(na(h,i+t)),i),s.d&&(s=Se(s,i+5,1),yh(s.d,i,o)&&(e=i+10,s=Se(q0(n.times(na(h,e+t)),e),e+5,1),+pn(s.d).slice(i+1,i+15)+1==1e14&&(s=Se(s,i+1,0)))),s.s=l,Me=!0,d.rounding=o,Se(s,i,o))};le.toPrecision=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=Tr(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(qn(n,1,_a),e===void 0?e=s.rounding:qn(e,0,8),i=Se(new s(i),n,e),t=Tr(i,n<=i.e||i.e<=s.toExpNeg,n)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toSignificantDigits=le.toSD=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(qn(n,1,_a),e===void 0?e=i.rounding:qn(e,0,8)),Se(new i(t),n,e)};le.toString=function(){var n=this,e=n.constructor,t=Tr(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};le.truncated=le.trunc=function(){return Se(new this.constructor(this),this.e+1,1)};le.valueOf=le.toJSON=function(){var n=this,e=n.constructor,t=Tr(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function pn(n){var e,t,i,s=n.length-1,o="",l=n[0];if(s>0){for(o+=l,e=1;e<s;e++)i=n[e]+"",t=Ce-i.length,t&&(o+=Xs(t)),o+=i;l=n[e],i=l+"",t=Ce-i.length,t&&(o+=Xs(t))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}function qn(n,e,t){if(n!==~~n||n<e||n>t)throw Error(ca+n)}function yh(n,e,t,i){var s,o,l,h;for(o=n[0];o>=10;o/=10)--e;return--e<0?(e+=Ce,s=0):(s=Math.ceil((e+1)/Ce),e%=Ce),o=Jt(10,Ce-e),h=n[s]%o|0,i==null?e<3?(e==0?h=h/100|0:e==1&&(h=h/10|0),l=t<4&&h==99999||t>3&&h==49999||h==5e4||h==0):l=(t<4&&h+1==o||t>3&&h+1==o/2)&&(n[s+1]/o/100|0)==Jt(10,e-2)-1||(h==o/2||h==0)&&(n[s+1]/o/100|0)==0:e<4?(e==0?h=h/1e3|0:e==1?h=h/100|0:e==2&&(h=h/10|0),l=(i||t<4)&&h==9999||!i&&t>3&&h==4999):l=((i||t<4)&&h+1==o||!i&&t>3&&h+1==o/2)&&(n[s+1]/o/1e3|0)==Jt(10,e-3)-1,l}function tm(n,e,t){for(var i,s=[0],o,l=0,h=n.length;l<h;){for(o=s.length;o--;)s[o]*=e;for(s[0]+=U0.indexOf(n.charAt(l++)),i=0;i<s.length;i++)s[i]>t-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/t|0,s[i]%=t)}return s.reverse()}function aP(n,e){var t,i,s;if(e.isZero())return e;i=e.d.length,i<32?(t=Math.ceil(i/3),s=(1/cp(4,t)).toString()):(t=16,s="2.3283064365386962890625e-10"),n.precision+=t,e=eu(n,1,e.times(s),new n(1));for(var o=t;o--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return n.precision-=t,e}var ft=(function(){function n(i,s,o){var l,h=0,d=i.length;for(i=i.slice();d--;)l=i[d]*s+h,i[d]=l%o|0,h=l/o|0;return h&&i.unshift(h),i}function e(i,s,o,l){var h,d;if(o!=l)d=o>l?1:-1;else for(h=d=0;h<o;h++)if(i[h]!=s[h]){d=i[h]>s[h]?1:-1;break}return d}function t(i,s,o,l){for(var h=0;o--;)i[o]-=h,h=i[o]<s[o]?1:0,i[o]=h*l+i[o]-s[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,o,l,h,d){var f,g,v,_,S,R,D,k,z,U,P,W,ne,ee,x,I,V,M,N,H,O=i.constructor,ze=i.s==s.s?1:-1,ge=i.d,F=s.d;if(!ge||!ge[0]||!F||!F[0])return new O(!i.s||!s.s||(ge?F&&ge[0]==F[0]:!F)?NaN:ge&&ge[0]==0||!F?ze*0:ze/0);for(d?(S=1,g=i.e-s.e):(d=zi,S=Ce,g=xn(i.e/S)-xn(s.e/S)),N=F.length,V=ge.length,z=new O(ze),U=z.d=[],v=0;F[v]==(ge[v]||0);v++);if(F[v]>(ge[v]||0)&&g--,o==null?(ee=o=O.precision,l=O.rounding):h?ee=o+(i.e-s.e)+1:ee=o,ee<0)U.push(1),R=!0;else{if(ee=ee/S+2|0,v=0,N==1){for(_=0,F=F[0],ee++;(v<V||_)&&ee--;v++)x=_*d+(ge[v]||0),U[v]=x/F|0,_=x%F|0;R=_||v<V}else{for(_=d/(F[0]+1)|0,_>1&&(F=n(F,_,d),ge=n(ge,_,d),N=F.length,V=ge.length),I=N,P=ge.slice(0,N),W=P.length;W<N;)P[W++]=0;H=F.slice(),H.unshift(0),M=F[0],F[1]>=d/2&&++M;do _=0,f=e(F,P,N,W),f<0?(ne=P[0],N!=W&&(ne=ne*d+(P[1]||0)),_=ne/M|0,_>1?(_>=d&&(_=d-1),D=n(F,_,d),k=D.length,W=P.length,f=e(D,P,k,W),f==1&&(_--,t(D,N<k?H:F,k,d))):(_==0&&(f=_=1),D=F.slice()),k=D.length,k<W&&D.unshift(0),t(P,D,W,d),f==-1&&(W=P.length,f=e(F,P,N,W),f<1&&(_++,t(P,N<W?H:F,W,d))),W=P.length):f===0&&(_++,P=[0]),U[v++]=_,f&&P[0]?P[W++]=ge[I]||0:(P=[ge[I]],W=1);while((I++<V||P[0]!==void 0)&&ee--);R=P[0]!==void 0}U[0]||U.shift()}if(S==1)z.e=g,EI=R;else{for(v=1,_=U[0];_>=10;_/=10)v++;z.e=v+g*S-1,Se(z,h?o+z.e+1:o,l,R)}return z}})();function Se(n,e,t,i){var s,o,l,h,d,f,g,v,_,S=n.constructor;e:if(e!=null){if(v=n.d,!v)return n;for(s=1,h=v[0];h>=10;h/=10)s++;if(o=e-s,o<0)o+=Ce,l=e,g=v[_=0],d=g/Jt(10,s-l-1)%10|0;else if(_=Math.ceil((o+1)/Ce),h=v.length,_>=h)if(i){for(;h++<=_;)v.push(0);g=d=0,s=1,o%=Ce,l=o-Ce+1}else break e;else{for(g=h=v[_],s=1;h>=10;h/=10)s++;o%=Ce,l=o-Ce+s,d=l<0?0:g/Jt(10,s-l-1)%10|0}if(i=i||e<0||v[_+1]!==void 0||(l<0?g:g%Jt(10,s-l-1)),f=t<4?(d||i)&&(t==0||t==(n.s<0?3:2)):d>5||d==5&&(t==4||i||t==6&&(o>0?l>0?g/Jt(10,s-l):0:v[_-1])%10&1||t==(n.s<0?8:7)),e<1||!v[0])return v.length=0,f?(e-=n.e+1,v[0]=Jt(10,(Ce-e%Ce)%Ce),n.e=-e||0):v[0]=n.e=0,n;if(o==0?(v.length=_,h=1,_--):(v.length=_+1,h=Jt(10,Ce-o),v[_]=l>0?(g/Jt(10,s-l)%Jt(10,l)|0)*h:0),f)for(;;)if(_==0){for(o=1,l=v[0];l>=10;l/=10)o++;for(l=v[0]+=h,h=1;l>=10;l/=10)h++;o!=h&&(n.e++,v[0]==zi&&(v[0]=1));break}else{if(v[_]+=h,v[_]!=zi)break;v[_--]=0,h=1}for(o=v.length;v[--o]===0;)v.pop()}return Me&&(n.e>S.maxE?(n.d=null,n.e=NaN):n.e<S.minE&&(n.e=0,n.d=[0])),n}function Tr(n,e,t){if(!n.isFinite())return DI(n);var i,s=n.e,o=pn(n.d),l=o.length;return e?(t&&(i=t-l)>0?o=o.charAt(0)+"."+o.slice(1)+Xs(i):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n.e<0?"e":"e+")+n.e):s<0?(o="0."+Xs(-s-1)+o,t&&(i=t-l)>0&&(o+=Xs(i))):s>=l?(o+=Xs(s+1-l),t&&(i=t-s-1)>0&&(o=o+"."+Xs(i))):((i=s+1)<l&&(o=o.slice(0,i)+"."+o.slice(i)),t&&(i=t-l)>0&&(s+1===l&&(o+="."),o+=Xs(i))),o}function up(n,e){var t=n[0];for(e*=Ce;t>=10;t/=10)e++;return e}function Rm(n,e,t){if(e>sP)throw Me=!0,t&&(n.precision=t),Error(wI);return Se(new n(Am),e,1,!0)}function dr(n,e,t){if(e>F0)throw Error(wI);return Se(new n(Im),e,t,!0)}function II(n){var e=n.length-1,t=e*Ce+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function Xs(n){for(var e="";n--;)e+="0";return e}function RI(n,e,t,i){var s,o=new n(1),l=Math.ceil(i/Ce+4);for(Me=!1;;){if(t%2&&(o=o.times(e),Fw(o.d,l)&&(s=!0)),t=xn(t/2),t===0){t=o.d.length-1,s&&o.d[t]===0&&++o.d[t];break}e=e.times(e),Fw(e.d,l)}return Me=!0,o}function Bw(n){return n.d[n.d.length-1]&1}function CI(n,e,t){for(var i,s,o=new n(e[0]),l=0;++l<e.length;){if(s=new n(e[l]),!s.s){o=s;break}i=o.cmp(s),(i===t||i===0&&o.s===t)&&(o=s)}return o}function q0(n,e){var t,i,s,o,l,h,d,f=0,g=0,v=0,_=n.constructor,S=_.rounding,R=_.precision;if(!n.d||!n.d[0]||n.e>17)return new _(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Me=!1,d=R):d=e,h=new _(.03125);n.e>-2;)n=n.times(h),v+=5;for(i=Math.log(Jt(2,v))/Math.LN10*2+5|0,d+=i,t=o=l=new _(1),_.precision=d;;){if(o=Se(o.times(n),d,1),t=t.times(++g),h=l.plus(ft(o,t,d,1)),pn(h.d).slice(0,d)===pn(l.d).slice(0,d)){for(s=v;s--;)l=Se(l.times(l),d,1);if(e==null)if(f<3&&yh(l.d,d-i,S,f))_.precision=d+=10,t=o=h=new _(1),g=0,f++;else return Se(l,_.precision=R,S,Me=!0);else return _.precision=R,l}l=h}}function na(n,e){var t,i,s,o,l,h,d,f,g,v,_,S=1,R=10,D=n,k=D.d,z=D.constructor,U=z.rounding,P=z.precision;if(D.s<0||!k||!k[0]||!D.e&&k[0]==1&&k.length==1)return new z(k&&!k[0]?-1/0:D.s!=1?NaN:k?0:D);if(e==null?(Me=!1,g=P):g=e,z.precision=g+=R,t=pn(k),i=t.charAt(0),Math.abs(o=D.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)D=D.times(n),t=pn(D.d),i=t.charAt(0),S++;o=D.e,i>1?(D=new z("0."+t),o++):D=new z(i+"."+t.slice(1))}else return f=Rm(z,g+2,P).times(o+""),D=na(new z(i+"."+t.slice(1)),g-R).plus(f),z.precision=P,e==null?Se(D,P,U,Me=!0):D;for(v=D,d=l=D=ft(D.minus(1),D.plus(1),g,1),_=Se(D.times(D),g,1),s=3;;){if(l=Se(l.times(_),g,1),f=d.plus(ft(l,new z(s),g,1)),pn(f.d).slice(0,g)===pn(d.d).slice(0,g))if(d=d.times(2),o!==0&&(d=d.plus(Rm(z,g+2,P).times(o+""))),d=ft(d,new z(S),g,1),e==null)if(yh(d.d,g-R,U,h))z.precision=g+=R,f=l=D=ft(v.minus(1),v.plus(1),g,1),_=Se(D.times(D),g,1),s=h=1;else return Se(d,z.precision=P,U,Me=!0);else return z.precision=P,d;d=f,s+=2}}function DI(n){return String(n.s*n.s/0)}function nm(n,e){var t,i,s;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,n.e=t=t-i-1,n.d=[],i=(t+1)%Ce,t<0&&(i+=Ce),i<s){for(i&&n.d.push(+e.slice(0,i)),s-=Ce;i<s;)n.d.push(+e.slice(i,i+=Ce));e=e.slice(i),i=Ce-e.length}else i-=s;for(;i--;)e+="0";n.d.push(+e),Me&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function oP(n,e){var t,i,s,o,l,h,d,f,g;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),AI.test(e))return nm(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(nP.test(e))t=16,e=e.toLowerCase();else if(tP.test(e))t=2;else if(iP.test(e))t=8;else throw Error(ca+e);for(o=e.search(/p/i),o>0?(d=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),l=o>=0,i=n.constructor,l&&(e=e.replace(".",""),h=e.length,o=h-o,s=RI(i,new i(t),o,o*2)),f=tm(e,t,zi),g=f.length-1,o=g;f[o]===0;--o)f.pop();return o<0?new i(n.s*0):(n.e=up(f,g),n.d=f,Me=!1,l&&(n=ft(n,s,h*4)),d&&(n=n.times(Math.abs(d)<54?Jt(2,d):$r.pow(2,d))),Me=!0,n)}function lP(n,e){var t,i=e.d.length;if(i<3)return e.isZero()?e:eu(n,2,e,e);t=1.4*Math.sqrt(i),t=t>16?16:t|0,e=e.times(1/cp(5,t)),e=eu(n,2,e,e);for(var s,o=new n(5),l=new n(16),h=new n(20);t--;)s=e.times(e),e=e.times(o.plus(s.times(l.times(s).minus(h))));return e}function eu(n,e,t,i,s){var o,l,h,d,f=n.precision,g=Math.ceil(f/Ce);for(Me=!1,d=t.times(t),h=new n(i);;){if(l=ft(h.times(d),new n(e++*e++),f,1),h=s?i.plus(l):i.minus(l),i=ft(l.times(d),new n(e++*e++),f,1),l=h.plus(i),l.d[g]!==void 0){for(o=g;l.d[o]===h.d[o]&&o--;);if(o==-1)break}o=h,h=i,i=l,l=o}return Me=!0,l.d.length=g+1,l}function cp(n,e){for(var t=n;--e;)t*=n;return t}function NI(n,e){var t,i=e.s<0,s=dr(n,n.precision,1),o=s.times(.5);if(e=e.abs(),e.lte(o))return Kr=i?4:1,e;if(t=e.divToInt(s),t.isZero())Kr=i?3:2;else{if(e=e.minus(t.times(s)),e.lte(o))return Kr=Bw(t)?i?2:3:i?4:1,e;Kr=Bw(t)?i?1:4:i?3:2}return e.minus(s).abs()}function r_(n,e,t,i){var s,o,l,h,d,f,g,v,_,S=n.constructor,R=t!==void 0;if(R?(qn(t,1,_a),i===void 0?i=S.rounding:qn(i,0,8)):(t=S.precision,i=S.rounding),!n.isFinite())g=DI(n);else{for(g=Tr(n),l=g.indexOf("."),R?(s=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):s=e,l>=0&&(g=g.replace(".",""),_=new S(1),_.e=g.length-l,_.d=tm(Tr(_),10,s),_.e=_.d.length),v=tm(g,10,s),o=d=v.length;v[--d]==0;)v.pop();if(!v[0])g=R?"0p+0":"0";else{if(l<0?o--:(n=new S(n),n.d=v,n.e=o,n=ft(n,_,t,i,0,s),v=n.d,o=n.e,f=EI),l=v[t],h=s/2,f=f||v[t+1]!==void 0,f=i<4?(l!==void 0||f)&&(i===0||i===(n.s<0?3:2)):l>h||l===h&&(i===4||f||i===6&&v[t-1]&1||i===(n.s<0?8:7)),v.length=t,f)for(;++v[--t]>s-1;)v[t]=0,t||(++o,v.unshift(1));for(d=v.length;!v[d-1];--d);for(l=0,g="";l<d;l++)g+=U0.charAt(v[l]);if(R){if(d>1)if(e==16||e==8){for(l=e==16?4:3,--d;d%l;d++)g+="0";for(v=tm(g,s,e),d=v.length;!v[d-1];--d);for(l=1,g="1.";l<d;l++)g+=U0.charAt(v[l])}else g=g.charAt(0)+"."+g.slice(1);g=g+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)g="0"+g;g="0."+g}else if(++o>d)for(o-=d;o--;)g+="0";else o<d&&(g=g.slice(0,o)+"."+g.slice(o))}g=(e==16?"0x":e==2?"0b":e==8?"0o":"")+g}return n.s<0?"-"+g:g}function Fw(n,e){if(n.length>e)return n.length=e,!0}function uP(n){return new this(n).abs()}function cP(n){return new this(n).acos()}function hP(n){return new this(n).acosh()}function dP(n,e){return new this(n).plus(e)}function fP(n){return new this(n).asin()}function mP(n){return new this(n).asinh()}function pP(n){return new this(n).atan()}function gP(n){return new this(n).atanh()}function yP(n,e){n=new this(n),e=new this(e);var t,i=this.precision,s=this.rounding,o=i+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=dr(this,o,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?dr(this,i,s):new this(0),t.s=n.s):!n.d||e.isZero()?(t=dr(this,o,1).times(.5),t.s=n.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(ft(n,e,o,1)),e=dr(this,o,1),this.precision=i,this.rounding=s,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(ft(n,e,o,1)),t}function vP(n){return new this(n).cbrt()}function _P(n){return Se(n=new this(n),n.e+1,2)}function bP(n,e,t){return new this(n).clamp(e,t)}function TP(n){if(!n||typeof n!="object")throw Error(lp+"Object expected");var e,t,i,s=n.defaults===!0,o=["precision",1,_a,"rounding",0,8,"toExpNeg",-Fl,0,"toExpPos",0,Fl,"maxE",0,Fl,"minE",-Fl,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],s&&(this[t]=B0[t]),(i=n[t])!==void 0)if(xn(i)===i&&i>=o[e+1]&&i<=o[e+2])this[t]=i;else throw Error(ca+t+": "+i);if(t="crypto",s&&(this[t]=B0[t]),(i=n[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(SI);else this[t]=!1;else throw Error(ca+t+": "+i);return this}function EP(n){return new this(n).cos()}function wP(n){return new this(n).cosh()}function kI(n){var e,t,i;function s(o){var l,h,d,f=this;if(!(f instanceof s))return new s(o);if(f.constructor=s,qw(o)){f.s=o.s,Me?!o.d||o.e>s.maxE?(f.e=NaN,f.d=null):o.e<s.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(d=typeof o,d==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(l=0,h=o;h>=10;h/=10)l++;Me?l>s.maxE?(f.e=NaN,f.d=null):l<s.minE?(f.e=0,f.d=[0]):(f.e=l,f.d=[o]):(f.e=l,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return nm(f,o.toString())}if(d==="string")return(h=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(h===43&&(o=o.slice(1)),f.s=1),AI.test(o)?nm(f,o):oP(f,o);if(d==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,nm(f,o.toString());throw Error(ca+o)}if(s.prototype=le,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=TP,s.clone=kI,s.isDecimal=qw,s.abs=uP,s.acos=cP,s.acosh=hP,s.add=dP,s.asin=fP,s.asinh=mP,s.atan=pP,s.atanh=gP,s.atan2=yP,s.cbrt=vP,s.ceil=_P,s.clamp=bP,s.cos=EP,s.cosh=wP,s.div=SP,s.exp=xP,s.floor=AP,s.hypot=IP,s.ln=RP,s.log=CP,s.log10=NP,s.log2=DP,s.max=kP,s.min=VP,s.mod=MP,s.mul=PP,s.pow=OP,s.random=LP,s.round=jP,s.sign=zP,s.sin=UP,s.sinh=BP,s.sqrt=FP,s.sub=qP,s.sum=HP,s.tan=GP,s.tanh=$P,s.trunc=KP,n===void 0&&(n={}),n&&n.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return s.config(n),s}function SP(n,e){return new this(n).div(e)}function xP(n){return new this(n).exp()}function AP(n){return Se(n=new this(n),n.e+1,3)}function IP(){var n,e,t=new this(0);for(Me=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Me=!0,new this(1/0);t=e}return Me=!0,t.sqrt()}function qw(n){return n instanceof $r||n&&n.toStringTag===xI||!1}function RP(n){return new this(n).ln()}function CP(n,e){return new this(n).log(e)}function DP(n){return new this(n).log(2)}function NP(n){return new this(n).log(10)}function kP(){return CI(this,arguments,-1)}function VP(){return CI(this,arguments,1)}function MP(n,e){return new this(n).mod(e)}function PP(n,e){return new this(n).mul(e)}function OP(n,e){return new this(n).pow(e)}function LP(n){var e,t,i,s,o=0,l=new this(1),h=[];if(n===void 0?n=this.precision:qn(n,1,_a),i=Math.ceil(n/Ce),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)s=e[o],s>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:h[o++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)s=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,o):(h.push(s%1e7),o+=4);o=i/4}else throw Error(SI);else for(;o<i;)h[o++]=Math.random()*1e7|0;for(i=h[--o],n%=Ce,i&&n&&(s=Jt(10,Ce-n),h[o]=(i/s|0)*s);h[o]===0;o--)h.pop();if(o<0)t=0,h=[0];else{for(t=-1;h[0]===0;t-=Ce)h.shift();for(i=1,s=h[0];s>=10;s/=10)i++;i<Ce&&(t-=Ce-i)}return l.e=t,l.d=h,l}function jP(n){return Se(n=new this(n),n.e+1,this.rounding)}function zP(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function UP(n){return new this(n).sin()}function BP(n){return new this(n).sinh()}function FP(n){return new this(n).sqrt()}function qP(n,e){return new this(n).sub(e)}function HP(){var n=0,e=arguments,t=new this(e[n]);for(Me=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Me=!0,Se(t,this.precision,this.rounding)}function GP(n){return new this(n).tan()}function $P(n){return new this(n).tanh()}function KP(n){return Se(n=new this(n),n.e+1,1)}le[Symbol.for("nodejs.util.inspect.custom")]=le.toString;le[Symbol.toStringTag]="Decimal";var $r=le.constructor=kI(B0);Am=new $r(Am);Im=new $r(Im);const QP=()=>{};var Hw={};const VI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},YP=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},MI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,h=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,g=o>>2,v=(o&3)<<4|h>>4;let _=(h&15)<<2|f>>6,S=f&63;d||(S=64,l||(_=64)),i.push(t[g],t[v],t[_],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(VI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):YP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||f==null||v==null)throw new XP;const _=o<<2|h>>4;if(i.push(_),f!==64){const S=h<<4&240|f>>2;if(i.push(S),v!==64){const R=f<<6&192|v;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class XP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WP=function(n){const e=VI(n);return MI.encodeByteArray(e,!0)},PI=function(n){return WP(n).replace(/\./g,"")},OI=function(n){try{return MI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ZP=()=>LI().__FIREBASE_DEFAULTS__,JP=()=>{if(typeof process>"u"||typeof Hw>"u")return;const n=Hw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&OI(n[1]);return e&&JSON.parse(e)},hp=()=>{try{return QP()||ZP()||JP()||eO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tO=n=>hp()?.emulatorHosts?.[n],jI=()=>hp()?.config,zI=n=>hp()?.[`_${n}`];class nO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function wu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UI(n){return(await fetch(n,{credentials:"include"})).ok}const eh={};function iO(){const n={prod:[],emulator:[]};for(const e of Object.keys(eh))eh[e]?n.emulator.push(e):n.prod.push(e);return n}function rO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Gw=!1;function sO(n,e){if(typeof window>"u"||typeof document>"u"||!wu(window.location.host)||eh[n]===e||eh[n]||Gw)return;eh[n]=e;function t(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=iO().prod.length>0;function l(){const _=document.getElementById(i);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,S){_.setAttribute("width","24"),_.setAttribute("id",S),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Gw=!0,l()},_}function g(_,S){_.setAttribute("id",S),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=rO(i),S=t("text"),R=document.getElementById(S)||document.createElement("span"),D=t("learnmore"),k=document.getElementById(D)||document.createElement("a"),z=t("preprendIcon"),U=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const P=_.element;h(P),g(k,D);const W=f();d(U,z),P.append(U,R,k,W),document.body.appendChild(P)}o?(R.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function BI(){const n=hp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cO(){const n=en();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FI(){return!BI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qI(){return!BI()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function HI(){try{return typeof indexedDB=="object"}catch{return!1}}function hO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const dO="FirebaseError";class os extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=dO,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gh.prototype.create)}}class Gh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?fO(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new os(s,h,i)}}function fO(n,e){return n.replace(mO,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const mO=/\{\$([^}]+)}/g;function pO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Io(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],l=e[s];if($w(o)&&$w(l)){if(!Io(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function $w(n){return n!==null&&typeof n=="object"}function $h(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function gO(n,e){const t=new yO(n,e);return t.subscribe.bind(t)}class yO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");vO(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=n0),s.error===void 0&&(s.error=n0),s.complete===void 0&&(s.complete=n0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function n0(){}function An(n){return n&&n._delegate?n._delegate:n}class Ro{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oo="[DEFAULT]";class _O{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new nO;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TO(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bO(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bO(n){return n===oo?void 0:n}function TO(n){return n.instantiationMode==="EAGER"}class EO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _O(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const wO={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},SO=Ge.INFO,xO={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},AO=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=xO[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s_{constructor(e){this.name=e,this._logLevel=SO,this._logHandler=AO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const IO=(n,e)=>e.some(t=>n instanceof t);let Kw,Qw;function RO(){return Kw||(Kw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CO(){return Qw||(Qw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GI=new WeakMap,H0=new WeakMap,$I=new WeakMap,i0=new WeakMap,a_=new WeakMap;function DO(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(ra(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&GI.set(t,n)}).catch(()=>{}),a_.set(e,n),e}function NO(n){if(H0.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});H0.set(n,e)}let G0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return H0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||$I.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ra(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kO(n){G0=n(G0)}function VO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(r0(this),e,...t);return $I.set(i,e.sort?e.sort():[e]),ra(i)}:CO().includes(n)?function(...e){return n.apply(r0(this),e),ra(GI.get(this))}:function(...e){return ra(n.apply(r0(this),e))}}function MO(n){return typeof n=="function"?VO(n):(n instanceof IDBTransaction&&NO(n),IO(n,RO())?new Proxy(n,G0):n)}function ra(n){if(n instanceof IDBRequest)return DO(n);if(i0.has(n))return i0.get(n);const e=MO(n);return e!==n&&(i0.set(n,e),a_.set(e,n)),e}const r0=n=>a_.get(n);function PO(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),h=ra(l);return i&&l.addEventListener("upgradeneeded",d=>{i(ra(l.result),d.oldVersion,d.newVersion,ra(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const OO=["get","getKey","getAll","getAllKeys","count"],LO=["put","add","delete","clear"],s0=new Map;function Yw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(s0.get(e))return s0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=LO.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||OO.includes(t)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(h.shift())),(await Promise.all([f[t](...h),s&&d.done]))[0]};return s0.set(e,o),o}kO(n=>({...n,get:(e,t,i)=>Yw(e,t)||n.get(e,t,i),has:(e,t)=>!!Yw(e,t)||n.has(e,t)}));class jO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zO(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function zO(n){return n.getComponent()?.type==="VERSION"}const $0="@firebase/app",Xw="0.14.6";const es=new s_("@firebase/app"),UO="@firebase/app-compat",BO="@firebase/analytics-compat",FO="@firebase/analytics",qO="@firebase/app-check-compat",HO="@firebase/app-check",GO="@firebase/auth",$O="@firebase/auth-compat",KO="@firebase/database",QO="@firebase/data-connect",YO="@firebase/database-compat",XO="@firebase/functions",WO="@firebase/functions-compat",ZO="@firebase/installations",JO="@firebase/installations-compat",e3="@firebase/messaging",t3="@firebase/messaging-compat",n3="@firebase/performance",i3="@firebase/performance-compat",r3="@firebase/remote-config",s3="@firebase/remote-config-compat",a3="@firebase/storage",o3="@firebase/storage-compat",l3="@firebase/firestore",u3="@firebase/ai",c3="@firebase/firestore-compat",h3="firebase",d3="12.6.0";const K0="[DEFAULT]",f3={[$0]:"fire-core",[UO]:"fire-core-compat",[FO]:"fire-analytics",[BO]:"fire-analytics-compat",[HO]:"fire-app-check",[qO]:"fire-app-check-compat",[GO]:"fire-auth",[$O]:"fire-auth-compat",[KO]:"fire-rtdb",[QO]:"fire-data-connect",[YO]:"fire-rtdb-compat",[XO]:"fire-fn",[WO]:"fire-fn-compat",[ZO]:"fire-iid",[JO]:"fire-iid-compat",[e3]:"fire-fcm",[t3]:"fire-fcm-compat",[n3]:"fire-perf",[i3]:"fire-perf-compat",[r3]:"fire-rc",[s3]:"fire-rc-compat",[a3]:"fire-gcs",[o3]:"fire-gcs-compat",[l3]:"fire-fst",[c3]:"fire-fst-compat",[u3]:"fire-vertex","fire-js":"fire-js",[h3]:"fire-js-all"};const Cm=new Map,m3=new Map,Q0=new Map;function Ww(n,e){try{n.container.addComponent(e)}catch(t){es.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function tu(n){const e=n.name;if(Q0.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;Q0.set(e,n);for(const t of Cm.values())Ww(t,n);for(const t of m3.values())Ww(t,n);return!0}function o_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hr(n){return n==null?!1:n.settings!==void 0}const p3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sa=new Gh("app","Firebase",p3);class g3{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sa.create("app-deleted",{appName:this._name})}}const Su=d3;function KI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:K0,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw sa.create("bad-app-name",{appName:String(s)});if(t||(t=jI()),!t)throw sa.create("no-options");const o=Cm.get(s);if(o){if(Io(t,o.options)&&Io(i,o.config))return o;throw sa.create("duplicate-app",{appName:s})}const l=new EO(s);for(const d of Q0.values())l.addComponent(d);const h=new g3(t,i,l);return Cm.set(s,h),h}function y3(n=K0){const e=Cm.get(n);if(!e&&n===K0&&jI())return KI();if(!e)throw sa.create("no-app",{appName:n});return e}function aa(n,e,t){let i=f3[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(l.join(" "));return}tu(new Ro(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const v3="firebase-heartbeat-database",_3=1,vh="firebase-heartbeat-store";let a0=null;function QI(){return a0||(a0=PO(v3,_3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vh)}catch(t){console.warn(t)}}}}).catch(n=>{throw sa.create("idb-open",{originalErrorMessage:n.message})})),a0}async function b3(n){try{const t=(await QI()).transaction(vh),i=await t.objectStore(vh).get(YI(n));return await t.done,i}catch(e){if(e instanceof os)es.warn(e.message);else{const t=sa.create("idb-get",{originalErrorMessage:e?.message});es.warn(t.message)}}}async function Zw(n,e){try{const i=(await QI()).transaction(vh,"readwrite");await i.objectStore(vh).put(e,YI(n)),await i.done}catch(t){if(t instanceof os)es.warn(t.message);else{const i=sa.create("idb-set",{originalErrorMessage:t?.message});es.warn(i.message)}}}function YI(n){return`${n.name}!${n.options.appId}`}const T3=1024,E3=30;class w3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new x3(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Jw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>E3){const s=A3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){es.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jw(),{heartbeatsToSend:t,unsentEntries:i}=S3(this._heartbeatsCache.heartbeats),s=PI(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return es.warn(e),""}}}function Jw(){return new Date().toISOString().substring(0,10)}function S3(n,e=T3){const t=[];let i=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),eS(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),eS(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class x3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HI()?hO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await b3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function eS(n){return PI(JSON.stringify({version:2,heartbeats:n})).length}function A3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function I3(n){tu(new Ro("platform-logger",e=>new jO(e),"PRIVATE")),tu(new Ro("heartbeat",e=>new w3(e),"PRIVATE")),aa($0,Xw,n),aa($0,Xw,"esm2020"),aa("fire-js","")}I3("");var tS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oa,XI;(function(){var n;function e(x,I){function V(){}V.prototype=I.prototype,x.F=I.prototype,x.prototype=new V,x.prototype.constructor=x,x.D=function(M,N,H){for(var O=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)O[ze-2]=arguments[ze];return I.prototype[N].apply(M,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,I,V){V||(V=0);const M=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)M[N]=I.charCodeAt(V++)|I.charCodeAt(V++)<<8|I.charCodeAt(V++)<<16|I.charCodeAt(V++)<<24;else for(N=0;N<16;++N)M[N]=I[V++]|I[V++]<<8|I[V++]<<16|I[V++]<<24;I=x.g[0],V=x.g[1],N=x.g[2];let H=x.g[3],O;O=I+(H^V&(N^H))+M[0]+3614090360&4294967295,I=V+(O<<7&4294967295|O>>>25),O=H+(N^I&(V^N))+M[1]+3905402710&4294967295,H=I+(O<<12&4294967295|O>>>20),O=N+(V^H&(I^V))+M[2]+606105819&4294967295,N=H+(O<<17&4294967295|O>>>15),O=V+(I^N&(H^I))+M[3]+3250441966&4294967295,V=N+(O<<22&4294967295|O>>>10),O=I+(H^V&(N^H))+M[4]+4118548399&4294967295,I=V+(O<<7&4294967295|O>>>25),O=H+(N^I&(V^N))+M[5]+1200080426&4294967295,H=I+(O<<12&4294967295|O>>>20),O=N+(V^H&(I^V))+M[6]+2821735955&4294967295,N=H+(O<<17&4294967295|O>>>15),O=V+(I^N&(H^I))+M[7]+4249261313&4294967295,V=N+(O<<22&4294967295|O>>>10),O=I+(H^V&(N^H))+M[8]+1770035416&4294967295,I=V+(O<<7&4294967295|O>>>25),O=H+(N^I&(V^N))+M[9]+2336552879&4294967295,H=I+(O<<12&4294967295|O>>>20),O=N+(V^H&(I^V))+M[10]+4294925233&4294967295,N=H+(O<<17&4294967295|O>>>15),O=V+(I^N&(H^I))+M[11]+2304563134&4294967295,V=N+(O<<22&4294967295|O>>>10),O=I+(H^V&(N^H))+M[12]+1804603682&4294967295,I=V+(O<<7&4294967295|O>>>25),O=H+(N^I&(V^N))+M[13]+4254626195&4294967295,H=I+(O<<12&4294967295|O>>>20),O=N+(V^H&(I^V))+M[14]+2792965006&4294967295,N=H+(O<<17&4294967295|O>>>15),O=V+(I^N&(H^I))+M[15]+1236535329&4294967295,V=N+(O<<22&4294967295|O>>>10),O=I+(N^H&(V^N))+M[1]+4129170786&4294967295,I=V+(O<<5&4294967295|O>>>27),O=H+(V^N&(I^V))+M[6]+3225465664&4294967295,H=I+(O<<9&4294967295|O>>>23),O=N+(I^V&(H^I))+M[11]+643717713&4294967295,N=H+(O<<14&4294967295|O>>>18),O=V+(H^I&(N^H))+M[0]+3921069994&4294967295,V=N+(O<<20&4294967295|O>>>12),O=I+(N^H&(V^N))+M[5]+3593408605&4294967295,I=V+(O<<5&4294967295|O>>>27),O=H+(V^N&(I^V))+M[10]+38016083&4294967295,H=I+(O<<9&4294967295|O>>>23),O=N+(I^V&(H^I))+M[15]+3634488961&4294967295,N=H+(O<<14&4294967295|O>>>18),O=V+(H^I&(N^H))+M[4]+3889429448&4294967295,V=N+(O<<20&4294967295|O>>>12),O=I+(N^H&(V^N))+M[9]+568446438&4294967295,I=V+(O<<5&4294967295|O>>>27),O=H+(V^N&(I^V))+M[14]+3275163606&4294967295,H=I+(O<<9&4294967295|O>>>23),O=N+(I^V&(H^I))+M[3]+4107603335&4294967295,N=H+(O<<14&4294967295|O>>>18),O=V+(H^I&(N^H))+M[8]+1163531501&4294967295,V=N+(O<<20&4294967295|O>>>12),O=I+(N^H&(V^N))+M[13]+2850285829&4294967295,I=V+(O<<5&4294967295|O>>>27),O=H+(V^N&(I^V))+M[2]+4243563512&4294967295,H=I+(O<<9&4294967295|O>>>23),O=N+(I^V&(H^I))+M[7]+1735328473&4294967295,N=H+(O<<14&4294967295|O>>>18),O=V+(H^I&(N^H))+M[12]+2368359562&4294967295,V=N+(O<<20&4294967295|O>>>12),O=I+(V^N^H)+M[5]+4294588738&4294967295,I=V+(O<<4&4294967295|O>>>28),O=H+(I^V^N)+M[8]+2272392833&4294967295,H=I+(O<<11&4294967295|O>>>21),O=N+(H^I^V)+M[11]+1839030562&4294967295,N=H+(O<<16&4294967295|O>>>16),O=V+(N^H^I)+M[14]+4259657740&4294967295,V=N+(O<<23&4294967295|O>>>9),O=I+(V^N^H)+M[1]+2763975236&4294967295,I=V+(O<<4&4294967295|O>>>28),O=H+(I^V^N)+M[4]+1272893353&4294967295,H=I+(O<<11&4294967295|O>>>21),O=N+(H^I^V)+M[7]+4139469664&4294967295,N=H+(O<<16&4294967295|O>>>16),O=V+(N^H^I)+M[10]+3200236656&4294967295,V=N+(O<<23&4294967295|O>>>9),O=I+(V^N^H)+M[13]+681279174&4294967295,I=V+(O<<4&4294967295|O>>>28),O=H+(I^V^N)+M[0]+3936430074&4294967295,H=I+(O<<11&4294967295|O>>>21),O=N+(H^I^V)+M[3]+3572445317&4294967295,N=H+(O<<16&4294967295|O>>>16),O=V+(N^H^I)+M[6]+76029189&4294967295,V=N+(O<<23&4294967295|O>>>9),O=I+(V^N^H)+M[9]+3654602809&4294967295,I=V+(O<<4&4294967295|O>>>28),O=H+(I^V^N)+M[12]+3873151461&4294967295,H=I+(O<<11&4294967295|O>>>21),O=N+(H^I^V)+M[15]+530742520&4294967295,N=H+(O<<16&4294967295|O>>>16),O=V+(N^H^I)+M[2]+3299628645&4294967295,V=N+(O<<23&4294967295|O>>>9),O=I+(N^(V|~H))+M[0]+4096336452&4294967295,I=V+(O<<6&4294967295|O>>>26),O=H+(V^(I|~N))+M[7]+1126891415&4294967295,H=I+(O<<10&4294967295|O>>>22),O=N+(I^(H|~V))+M[14]+2878612391&4294967295,N=H+(O<<15&4294967295|O>>>17),O=V+(H^(N|~I))+M[5]+4237533241&4294967295,V=N+(O<<21&4294967295|O>>>11),O=I+(N^(V|~H))+M[12]+1700485571&4294967295,I=V+(O<<6&4294967295|O>>>26),O=H+(V^(I|~N))+M[3]+2399980690&4294967295,H=I+(O<<10&4294967295|O>>>22),O=N+(I^(H|~V))+M[10]+4293915773&4294967295,N=H+(O<<15&4294967295|O>>>17),O=V+(H^(N|~I))+M[1]+2240044497&4294967295,V=N+(O<<21&4294967295|O>>>11),O=I+(N^(V|~H))+M[8]+1873313359&4294967295,I=V+(O<<6&4294967295|O>>>26),O=H+(V^(I|~N))+M[15]+4264355552&4294967295,H=I+(O<<10&4294967295|O>>>22),O=N+(I^(H|~V))+M[6]+2734768916&4294967295,N=H+(O<<15&4294967295|O>>>17),O=V+(H^(N|~I))+M[13]+1309151649&4294967295,V=N+(O<<21&4294967295|O>>>11),O=I+(N^(V|~H))+M[4]+4149444226&4294967295,I=V+(O<<6&4294967295|O>>>26),O=H+(V^(I|~N))+M[11]+3174756917&4294967295,H=I+(O<<10&4294967295|O>>>22),O=N+(I^(H|~V))+M[2]+718787259&4294967295,N=H+(O<<15&4294967295|O>>>17),O=V+(H^(N|~I))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(N+(O<<21&4294967295|O>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+H&4294967295}i.prototype.v=function(x,I){I===void 0&&(I=x.length);const V=I-this.blockSize,M=this.C;let N=this.h,H=0;for(;H<I;){if(N==0)for(;H<=V;)s(this,x,H),H+=this.blockSize;if(typeof x=="string"){for(;H<I;)if(M[N++]=x.charCodeAt(H++),N==this.blockSize){s(this,M),N=0;break}}else for(;H<I;)if(M[N++]=x[H++],N==this.blockSize){s(this,M),N=0;break}}this.h=N,this.o+=I},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var V=x.length-8;V<x.length;++V)x[V]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,V=0;V<4;++V)for(let M=0;M<32;M+=8)x[I++]=this.g[V]>>>M&255;return x};function o(x,I){var V=h;return Object.prototype.hasOwnProperty.call(V,x)?V[x]:V[x]=I(x)}function l(x,I){this.h=I;const V=[];let M=!0;for(let N=x.length-1;N>=0;N--){const H=x[N]|0;M&&H==I||(V[N]=H,M=!1)}this.g=V}var h={};function d(x){return-128<=x&&x<128?o(x,function(I){return new l([I|0],I<0?-1:0)}):new l([x|0],x<0?-1:0)}function f(x){if(isNaN(x)||!isFinite(x))return v;if(x<0)return k(f(-x));const I=[];let V=1;for(let M=0;x>=V;M++)I[M]=x/V|0,V*=4294967296;return new l(I,0)}function g(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return k(g(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=f(Math.pow(I,8));let M=v;for(let H=0;H<x.length;H+=8){var N=Math.min(8,x.length-H);const O=parseInt(x.substring(H,H+N),I);N<8?(N=f(Math.pow(I,N)),M=M.j(N).add(f(O))):(M=M.j(V),M=M.add(f(O)))}return M}var v=d(0),_=d(1),S=d(16777216);n=l.prototype,n.m=function(){if(D(this))return-k(this).m();let x=0,I=1;for(let V=0;V<this.g.length;V++){const M=this.i(V);x+=(M>=0?M:4294967296+M)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(R(this))return"0";if(D(this))return"-"+k(this).toString(x);const I=f(Math.pow(x,6));var V=this;let M="";for(;;){const N=W(V,I).g;V=z(V,N.j(I));let H=((V.g.length>0?V.g[0]:V.h)>>>0).toString(x);if(V=N,R(V))return H+M;for(;H.length<6;)H="0"+H;M=H+M}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function R(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function D(x){return x.h==-1}n.l=function(x){return x=z(this,x),D(x)?-1:R(x)?0:1};function k(x){const I=x.g.length,V=[];for(let M=0;M<I;M++)V[M]=~x.g[M];return new l(V,~x.h).add(_)}n.abs=function(){return D(this)?k(this):this},n.add=function(x){const I=Math.max(this.g.length,x.g.length),V=[];let M=0;for(let N=0;N<=I;N++){let H=M+(this.i(N)&65535)+(x.i(N)&65535),O=(H>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);M=O>>>16,H&=65535,O&=65535,V[N]=O<<16|H}return new l(V,V[V.length-1]&-2147483648?-1:0)};function z(x,I){return x.add(k(I))}n.j=function(x){if(R(this)||R(x))return v;if(D(this))return D(x)?k(this).j(k(x)):k(k(this).j(x));if(D(x))return k(this.j(k(x)));if(this.l(S)<0&&x.l(S)<0)return f(this.m()*x.m());const I=this.g.length+x.g.length,V=[];for(var M=0;M<2*I;M++)V[M]=0;for(M=0;M<this.g.length;M++)for(let N=0;N<x.g.length;N++){const H=this.i(M)>>>16,O=this.i(M)&65535,ze=x.i(N)>>>16,ge=x.i(N)&65535;V[2*M+2*N]+=O*ge,U(V,2*M+2*N),V[2*M+2*N+1]+=H*ge,U(V,2*M+2*N+1),V[2*M+2*N+1]+=O*ze,U(V,2*M+2*N+1),V[2*M+2*N+2]+=H*ze,U(V,2*M+2*N+2)}for(x=0;x<I;x++)V[x]=V[2*x+1]<<16|V[2*x];for(x=I;x<2*I;x++)V[x]=0;return new l(V,0)};function U(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function P(x,I){this.g=x,this.h=I}function W(x,I){if(R(I))throw Error("division by zero");if(R(x))return new P(v,v);if(D(x))return I=W(k(x),I),new P(k(I.g),k(I.h));if(D(I))return I=W(x,k(I)),new P(k(I.g),I.h);if(x.g.length>30){if(D(x)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var V=_,M=I;M.l(x)<=0;)V=ne(V),M=ne(M);var N=ee(V,1),H=ee(M,1);for(M=ee(M,2),V=ee(V,2);!R(M);){var O=H.add(M);O.l(x)<=0&&(N=N.add(V),H=O),M=ee(M,1),V=ee(V,1)}return I=z(x,N.j(I)),new P(N,I)}for(N=v;x.l(I)>=0;){for(V=Math.max(1,Math.floor(x.m()/I.m())),M=Math.ceil(Math.log(V)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),H=f(V),O=H.j(I);D(O)||O.l(x)>0;)V-=M,H=f(V),O=H.j(I);R(H)&&(H=_),N=N.add(H),x=z(x,O)}return new P(N,x)}n.B=function(x){return W(this,x).h},n.and=function(x){const I=Math.max(this.g.length,x.g.length),V=[];for(let M=0;M<I;M++)V[M]=this.i(M)&x.i(M);return new l(V,this.h&x.h)},n.or=function(x){const I=Math.max(this.g.length,x.g.length),V=[];for(let M=0;M<I;M++)V[M]=this.i(M)|x.i(M);return new l(V,this.h|x.h)},n.xor=function(x){const I=Math.max(this.g.length,x.g.length),V=[];for(let M=0;M<I;M++)V[M]=this.i(M)^x.i(M);return new l(V,this.h^x.h)};function ne(x){const I=x.g.length+1,V=[];for(let M=0;M<I;M++)V[M]=x.i(M)<<1|x.i(M-1)>>>31;return new l(V,x.h)}function ee(x,I){const V=I>>5;I%=32;const M=x.g.length-V,N=[];for(let H=0;H<M;H++)N[H]=I>0?x.i(H+V)>>>I|x.i(H+V+1)<<32-I:x.i(H+V);return new l(N,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,XI=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,oa=l}).apply(typeof tS<"u"?tS:typeof self<"u"?self:typeof window<"u"?window:{});var Bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var WI,Qc,ZI,im,Y0,JI,e2,t2;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bf=="object"&&Bf];for(var b=0;b<m.length;++b){var w=m[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function s(m,b){if(b)e:{var w=i;m=m.split(".");for(var C=0;C<m.length-1;C++){var K=m[C];if(!(K in w))break e;w=w[K]}m=m[m.length-1],C=w[m],b=b(C),b!=C&&b!=null&&e(w,m,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(b){var w=[],C;for(C in b)Object.prototype.hasOwnProperty.call(b,C)&&w.push([C,b[C]]);return w}});var o=o||{},l=this||self;function h(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function d(m,b,w){return m.call.apply(m.bind,arguments)}function f(m,b,w){return f=d,f.apply(null,arguments)}function g(m,b){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),m.apply(this,C)}}function v(m,b){function w(){}w.prototype=b.prototype,m.Z=b.prototype,m.prototype=new w,m.prototype.constructor=m,m.Ob=function(C,K,Z){for(var de=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)de[Oe-2]=arguments[Oe];return b.prototype[K].apply(C,de)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function S(m){const b=m.length;if(b>0){const w=Array(b);for(let C=0;C<b;C++)w[C]=m[C];return w}return[]}function R(m,b){for(let C=1;C<arguments.length;C++){const K=arguments[C];var w=typeof K;if(w=w!="object"?w:K?Array.isArray(K)?"array":w:"null",w=="array"||w=="object"&&typeof K.length=="number"){w=m.length||0;const Z=K.length||0;m.length=w+Z;for(let de=0;de<Z;de++)m[w+de]=K[de]}else m.push(K)}}class D{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function k(m){l.setTimeout(()=>{throw m},0)}function z(){var m=x;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class U{constructor(){this.h=this.g=null}add(b,w){const C=P.get();C.set(b,w),this.h?this.h.next=C:this.g=C,this.h=C}}var P=new D(()=>new W,m=>m.reset());class W{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,ee=!1,x=new U,I=()=>{const m=Promise.resolve(void 0);ne=()=>{m.then(V)}};function V(){for(var m;m=z();){try{m.h.call(m.g)}catch(w){k(w)}var b=P;b.j(m),b.h<100&&(b.h++,m.next=b.g,b.g=m)}ee=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};l.addEventListener("test",w,b),l.removeEventListener("test",w,b)}catch{}return m})();function O(m){return/^[\s\xa0]*$/.test(m)}function ze(m,b){N.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,b)}v(ze,N),ze.prototype.init=function(m,b){const w=this.type=m.type,C=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget,b||(w=="mouseover"?b=m.fromElement:w=="mouseout"&&(b=m.toElement)),this.relatedTarget=b,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),F=0;function se(m,b,w,C,K){this.listener=m,this.proxy=null,this.src=b,this.type=w,this.capture=!!C,this.ha=K,this.key=++F,this.da=this.fa=!1}function he(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Te(m,b,w){for(const C in m)b.call(w,m[C],C,m)}function we(m,b){for(const w in m)b.call(void 0,m[w],w,m)}function B(m){const b={};for(const w in m)b[w]=m[w];return b}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(m,b){let w,C;for(let K=1;K<arguments.length;K++){C=arguments[K];for(w in C)m[w]=C[w];for(let Z=0;Z<te.length;Z++)w=te[Z],Object.prototype.hasOwnProperty.call(C,w)&&(m[w]=C[w])}}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,b,w,C,K){const Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);const de=De(m,b,C,K);return de>-1?(b=m[de],w||(b.fa=!1)):(b=new se(b,this.src,Z,!!C,K),b.fa=w,m.push(b)),b};function Ie(m,b){const w=b.type;if(w in m.g){var C=m.g[w],K=Array.prototype.indexOf.call(C,b,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(C,K,1),Z&&(he(b),m.g[w].length==0&&(delete m.g[w],m.h--))}}function De(m,b,w,C){for(let K=0;K<m.length;++K){const Z=m[K];if(!Z.da&&Z.listener==b&&Z.capture==!!w&&Z.ha==C)return K}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),Xt={};function yt(m,b,w,C,K){if(Array.isArray(b)){for(let Z=0;Z<b.length;Z++)yt(m,b[Z],w,C,K);return null}return w=Lu(w),m&&m[ge]?m.J(b,w,h(C)?!!C.capture:!1,K):xa(m,b,w,!1,C,K)}function xa(m,b,w,C,K,Z){if(!b)throw Error("Invalid event type");const de=h(K)?!!K.capture:!!K;let Oe=Aa(m);if(Oe||(m[Qe]=Oe=new me(m)),w=Oe.add(b,w,C,de,Z),w.proxy)return w;if(C=Bo(),w.proxy=C,C.src=m,C.listener=w,m.addEventListener)H||(K=de),K===void 0&&(K=!1),m.addEventListener(b.toString(),C,K);else if(m.attachEvent)m.attachEvent(Bi(b.toString()),C);else if(m.addListener&&m.removeListener)m.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Bo(){function m(w){return b.call(m.src,m.listener,w)}const b=Pu;return m}function Fo(m,b,w,C,K){if(Array.isArray(b))for(var Z=0;Z<b.length;Z++)Fo(m,b[Z],w,C,K);else C=h(C)?!!C.capture:!!C,w=Lu(w),m&&m[ge]?(m=m.i,Z=String(b).toString(),Z in m.g&&(b=m.g[Z],w=De(b,w,C,K),w>-1&&(he(b[w]),Array.prototype.splice.call(b,w,1),b.length==0&&(delete m.g[Z],m.h--)))):m&&(m=Aa(m))&&(b=m.g[b.toString()],m=-1,b&&(m=De(b,w,C,K)),(w=m>-1?b[m]:null)&&qo(w))}function qo(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[ge])Ie(b.i,m);else{var w=m.type,C=m.proxy;b.removeEventListener?b.removeEventListener(w,C,m.capture):b.detachEvent?b.detachEvent(Bi(w),C):b.addListener&&b.removeListener&&b.removeListener(C),(w=Aa(b))?(Ie(w,m),w.h==0&&(w.src=null,b[Qe]=null)):he(m)}}}function Bi(m){return m in Xt?Xt[m]:Xt[m]="on"+m}function Pu(m,b){if(m.da)m=!0;else{b=new ze(b,this);const w=m.listener,C=m.ha||m.src;m.fa&&qo(m),m=w.call(C,b)}return m}function Aa(m){return m=m[Qe],m instanceof me?m:null}var Ou="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lu(m){return typeof m=="function"?m:(m[Ou]||(m[Ou]=function(b){return m.handleEvent(b)}),m[Ou])}function jt(){M.call(this),this.i=new me(this),this.M=this,this.G=null}v(jt,M),jt.prototype[ge]=!0,jt.prototype.removeEventListener=function(m,b,w,C){Fo(this,m,b,w,C)};function Wt(m,b){var w,C=m.G;if(C)for(w=[];C;C=C.G)w.push(C);if(m=m.M,C=b.type||b,typeof b=="string")b=new N(b,m);else if(b instanceof N)b.target=b.target||m;else{var K=b;b=new N(C,m),fe(b,K)}K=!0;let Z,de;if(w)for(de=w.length-1;de>=0;de--)Z=b.g=w[de],K=hs(Z,C,!0,b)&&K;if(Z=b.g=m,K=hs(Z,C,!0,b)&&K,K=hs(Z,C,!1,b)&&K,w)for(de=0;de<w.length;de++)Z=b.g=w[de],K=hs(Z,C,!1,b)&&K}jt.prototype.N=function(){if(jt.Z.N.call(this),this.i){var m=this.i;for(const b in m.g){const w=m.g[b];for(let C=0;C<w.length;C++)he(w[C]);delete m.g[b],m.h--}}this.G=null},jt.prototype.J=function(m,b,w,C){return this.i.add(String(m),b,!1,w,C)},jt.prototype.K=function(m,b,w,C){return this.i.add(String(m),b,!0,w,C)};function hs(m,b,w,C){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();let K=!0;for(let Z=0;Z<b.length;++Z){const de=b[Z];if(de&&!de.da&&de.capture==w){const Oe=de.listener,Nt=de.ha||de.src;de.fa&&Ie(m.i,de),K=Oe.call(Nt,C)!==!1&&K}}return K&&!C.defaultPrevented}function Xp(m,b){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:l.setTimeout(m,b||0)}function ud(m){m.g=Xp(()=>{m.g=null,m.i&&(m.i=!1,ud(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class In extends M{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:ud(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ia(m){M.call(this),this.h=m,this.g={}}v(Ia,M);var ju=[];function zu(m){Te(m.g,function(b,w){this.g.hasOwnProperty(w)&&qo(b)},m),m.g={}}Ia.prototype.N=function(){Ia.Z.N.call(this),zu(this)},Ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ds=l.JSON.stringify,Wp=l.JSON.parse,cd=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function hd(){}function dd(){}var wi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function on(){N.call(this,"d")}v(on,N);function ii(){N.call(this,"c")}v(ii,N);var Dt={},fd=null;function Ho(){return fd=fd||new jt}Dt.Ia="serverreachability";function md(m){N.call(this,Dt.Ia,m)}v(md,N);function Fi(m){const b=Ho();Wt(b,new md(b))}Dt.STAT_EVENT="statevent";function Ra(m,b){N.call(this,Dt.STAT_EVENT,m),this.stat=b}v(Ra,N);function zt(m){const b=Ho();Wt(b,new Ra(b,m))}Dt.Ja="timingevent";function qi(m,b){N.call(this,Dt.Ja,m),this.size=b}v(qi,N);function Hi(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},b)}function Si(){this.g=!0}Si.prototype.ua=function(){this.g=!1};function Zp(m,b,w,C,K,Z){m.info(function(){if(m.g)if(Z){var de="",Oe=Z.split("&");for(let Je=0;Je<Oe.length;Je++){var Nt=Oe[Je].split("=");if(Nt.length>1){const vt=Nt[0];Nt=Nt[1];const oi=vt.split("_");de=oi.length>=2&&oi[1]=="type"?de+(vt+"="+Nt+"&"):de+(vt+"=redacted&")}}}else de=null;else de=Z;return"XMLHTTP REQ ("+C+") [attempt "+K+"]: "+b+`
`+w+`
`+de})}function pd(m,b,w,C,K,Z,de){m.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+K+"]: "+b+`
`+w+`
`+Z+" "+de})}function Gi(m,b,w,C){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Jp(m,w)+(C?" "+C:"")})}function Ca(m,b){m.info(function(){return"TIMEOUT: "+b})}Si.prototype.info=function(){};function Jp(m,b){if(!m.g)return b;if(!b)return null;try{const Z=JSON.parse(b);if(Z){for(m=0;m<Z.length;m++)if(Array.isArray(Z[m])){var w=Z[m];if(!(w.length<2)){var C=w[1];if(Array.isArray(C)&&!(C.length<1)){var K=C[0];if(K!="noop"&&K!="stop"&&K!="close")for(let de=1;de<C.length;de++)C[de]=""}}}}return ds(Z)}catch{return b}}var Da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Uu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bu;function Na(){}v(Na,hd),Na.prototype.g=function(){return new XMLHttpRequest},Bu=new Na;function xr(m){return encodeURIComponent(String(m))}function gd(m){var b=1;m=m.split(":");const w=[];for(;b>0&&m.length;)w.push(m.shift()),b--;return m.length&&w.push(m.join(":")),w}function xi(m,b,w,C){this.j=m,this.i=b,this.l=w,this.S=C||1,this.V=new Ia(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ai}function Ai(){this.i=null,this.g="",this.h=!1}var Ut={},nn={};function $i(m,b,w){m.M=1,m.A=ka(Ft(b)),m.u=w,m.R=!0,Go(m,null)}function Go(m,b){m.F=Date.now(),Ki(m),m.B=Ft(m.A);var w=m.B,C=m.S;Array.isArray(C)||(C=[String(C)]),Yo(w.i,"t",C),m.C=0,w=m.j.L,m.h=new Ai,m.g=Nd(m.j,w?b:null,!m.u),m.P>0&&(m.O=new In(f(m.Y,m,m.g),m.P)),b=m.V,w=m.g,C=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(ju[0]=K.toString()),K=ju);for(let Z=0;Z<K.length;Z++){const de=yt(w,K[Z],C||b.handleEvent,!1,b.h||b);if(!de)break;b.g[de.key]=de}b=m.J?B(m.J):{},m.u?(m.v||(m.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,b)):(m.v="GET",m.g.ea(m.B,m.v,null,b)),Fi(),Zp(m.i,m.v,m.B,m.l,m.S,m.u)}xi.prototype.ba=function(m){m=m.target;const b=this.O;b&&Ci(m)==3?b.j():this.Y(m)},xi.prototype.Y=function(m){try{if(m==this.g)e:{const Oe=Ci(this.g),Nt=this.g.ya(),Je=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||Oe!=4||Nt==7||(Nt==8||Je<=0?Fi(3):Fi(2)),Qi(this);var b=this.g.ca();this.X=b;var w=eg(this);if(this.o=b==200,pd(this.i,this.v,this.B,this.l,this.S,Oe,b),this.o){if(this.U&&!this.L){t:{if(this.g){var C,K=this.g;if((C=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(C)){var Z=C;break t}}Z=null}if(m=Z)Gi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yi(this,m);else{this.o=!1,this.m=3,zt(12),Hn(this),ri(this);break e}}if(this.R){m=!0;let vt;for(;!this.K&&this.C<w.length;)if(vt=vd(this,w),vt==nn){Oe==4&&(this.m=4,zt(14),m=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Ut){this.m=4,zt(15),Gi(this.i,this.l,w,"[Invalid Chunk]"),m=!1;break}else Gi(this.i,this.l,vt,null),Yi(this,vt);if(yd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||w.length!=0||this.h.h||(this.m=1,zt(16),m=!1),this.o=this.o&&m,!m)Gi(this.i,this.l,w,"[Invalid Chunked Response]"),Hn(this),ri(this);else if(w.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),nc(de),de.P=!0,zt(11))}}else Gi(this.i,this.l,w,null),Yi(this,w);Oe==4&&Hn(this),this.o&&!this.K&&(Oe==4?Id(this.j,this):(this.o=!1,Ki(this)))}else Ir(this.g),b==400&&w.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Hn(this),ri(this)}}}catch{}finally{}};function eg(m){if(!yd(m))return m.g.la();const b=ln(m.g);if(b==="")return"";let w="";const C=b.length,K=Ci(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Hn(m),ri(m),"";m.h.i=new l.TextDecoder}for(let Z=0;Z<C;Z++)m.h.h=!0,w+=m.h.i.decode(b[Z],{stream:!(K&&Z==C-1)});return b.length=0,m.h.g+=w,m.C=0,m.h.g}function yd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function vd(m,b){var w=m.C,C=b.indexOf(`
`,w);return C==-1?nn:(w=Number(b.substring(w,C)),isNaN(w)?Ut:(C+=1,C+w>b.length?nn:(b=b.slice(C,C+w),m.C=C+w,b)))}xi.prototype.cancel=function(){this.K=!0,Hn(this)};function Ki(m){m.T=Date.now()+m.H,$o(m,m.H)}function $o(m,b){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Hi(f(m.aa,m),b)}function Qi(m){m.D&&(l.clearTimeout(m.D),m.D=null)}xi.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Ca(this.i,this.B),this.M!=2&&(Fi(),zt(17)),Hn(this),this.m=2,ri(this)):$o(this,this.T-m)};function ri(m){m.j.I==0||m.K||Id(m.j,m)}function Hn(m){Qi(m);var b=m.O;b&&typeof b.dispose=="function"&&b.dispose(),m.O=null,zu(m.V),m.g&&(b=m.g,m.g=null,b.abort(),b.dispose())}function Yi(m,b){try{var w=m.j;if(w.I!=0&&(w.g==m||Wi(w.h,m))){if(!m.L&&Wi(w.h,m)&&w.I==3){try{var C=w.Ba.g.parse(b)}catch{C=null}if(Array.isArray(C)&&C.length==3){var K=C;if(K[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<m.F)el(w),bs(w);else break e;za(w),zt(18)}}else w.xa=K[1],0<w.xa-w.K&&K[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Hi(f(w.Va,w),6e3));Xi(w.h)<=1&&w.ta&&(w.ta=void 0)}else ir(w,11)}else if((m.L||w.g==m)&&el(w),!O(b))for(K=w.Ba.g.parse(b),b=0;b<K.length;b++){let Je=K[b];const vt=Je[0];if(!(vt<=w.K))if(w.K=vt,Je=Je[1],w.I==2)if(Je[0]=="c"){w.M=Je[1],w.ba=Je[2];const oi=Je[3];oi!=null&&(w.ka=oi,w.j.info("VER="+w.ka));const rr=Je[4];rr!=null&&(w.za=rr,w.j.info("SVER="+w.za));const Di=Je[5];Di!=null&&typeof Di=="number"&&Di>0&&(C=1.5*Di,w.O=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Ni=m.g;if(Ni){const Ua=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var Z=C.h;Z.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Hu(Z,Z.h),Z.h=null))}if(C.G){const tl=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(C.wa=tl,it(C.J,C.G,tl))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-m.F,w.j.info("Handshake RTT: "+w.T+"ms")),C=w;var de=m;if(C.na=Dd(C,C.L?C.ba:null,C.W),de.L){Gu(C.h,de);var Oe=de,Nt=C.O;Nt&&(Oe.H=Nt),Oe.D&&(Qi(Oe),Ki(Oe)),C.g=de}else xd(C);w.i.length>0&&nr(w)}else Je[0]!="stop"&&Je[0]!="close"||ir(w,7);else w.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?ir(w,7):ec(w):Je[0]!="noop"&&w.l&&w.l.qa(Je),w.A=0)}}Fi(4)}catch{}}var Bt=class{constructor(m,b){this.g=m,this.map=b}};function Fu(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qu(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Xi(m){return m.h?1:m.g?m.g.size:0}function Wi(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function Hu(m,b){m.g?m.g.add(b):m.h=b}function Gu(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Fu.prototype.cancel=function(){if(this.i=$u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function $u(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const w of m.g.values())b=b.concat(w.G);return b}return S(m.i)}var _d=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ko(m,b){if(m){m=m.split("&");for(let w=0;w<m.length;w++){const C=m[w].indexOf("=");let K,Z=null;C>=0?(K=m[w].substring(0,C),Z=m[w].substring(C+1)):K=m[w],b(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Gn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;m instanceof Gn?(this.l=m.l,rn(this,m.j),this.o=m.o,this.g=m.g,fs(this,m.u),this.h=m.h,Ku(this,wd(m.i)),this.m=m.m):m&&(b=String(m).match(_d))?(this.l=!1,rn(this,b[1]||"",!0),this.o=Zi(b[2]||""),this.g=Zi(b[3]||"",!0),fs(this,b[4]),this.h=Zi(b[5]||"",!0),Ku(this,b[6]||"",!0),this.m=Zi(b[7]||"")):(this.l=!1,this.i=new ps(null,this.l))}Gn.prototype.toString=function(){const m=[];var b=this.j;b&&m.push(Va(b,Qo,!0),":");var w=this.g;return(w||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Va(b,Qo,!0),"@"),m.push(xr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&m.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Va(w,w.charAt(0)=="/"?Qu:bd,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Va(w,Td)),m.join("")},Gn.prototype.resolve=function(m){const b=Ft(this);let w=!!m.j;w?rn(b,m.j):w=!!m.o,w?b.o=m.o:w=!!m.g,w?b.g=m.g:w=m.u!=null;var C=m.h;if(w)fs(b,m.u);else if(w=!!m.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var K=b.h.lastIndexOf("/");K!=-1&&(C=b.h.slice(0,K+1)+C)}if(K=C,K==".."||K==".")C="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){C=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let de=0;de<K.length;){const Oe=K[de++];Oe=="."?C&&de==K.length&&Z.push(""):Oe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),C&&de==K.length&&Z.push("")):(Z.push(Oe),C=!0)}C=Z.join("/")}else C=K}return w?b.h=C:w=m.i.toString()!=="",w?Ku(b,wd(m.i)):w=!!m.m,w&&(b.m=m.m),b};function Ft(m){return new Gn(m)}function rn(m,b,w){m.j=w?Zi(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function fs(m,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);m.u=b}else m.u=null}function Ku(m,b,w){b instanceof ps?(m.i=b,Xo(m.i,m.l)):(w||(b=Va(b,ms)),m.i=new ps(b,m.l))}function it(m,b,w){m.i.set(b,w)}function ka(m){return it(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Zi(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Va(m,b,w){return typeof m=="string"?(m=encodeURI(m).replace(b,Vn),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Vn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Qo=/[#\/\?@]/g,bd=/[#\?:]/g,Qu=/[#\?]/g,ms=/[#\?@]/g,Td=/#/g;function ps(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function Mn(m){m.g||(m.g=new Map,m.h=0,m.i&&Ko(m.i,function(b,w){m.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}n=ps.prototype,n.add=function(m,b){Mn(this),this.i=null,m=gs(this,m);let w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(b),this.h+=1,this};function Ed(m,b){Mn(m),b=gs(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Yu(m,b){return Mn(m),b=gs(m,b),m.g.has(b)}n.forEach=function(m,b){Mn(this),this.g.forEach(function(w,C){w.forEach(function(K){m.call(b,K,C,this)},this)},this)};function Xu(m,b){Mn(m);let w=[];if(typeof b=="string")Yu(m,b)&&(w=w.concat(m.g.get(gs(m,b))));else for(m=Array.from(m.g.values()),b=0;b<m.length;b++)w=w.concat(m[b]);return w}n.set=function(m,b){return Mn(this),this.i=null,m=gs(this,m),Yu(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=Xu(this,m),m.length>0?String(m[0]):b):b};function Yo(m,b,w){Ed(m,b),w.length>0&&(m.i=null,m.g.set(gs(m,b),S(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(let C=0;C<b.length;C++){var w=b[C];const K=xr(w);w=Xu(this,w);for(let Z=0;Z<w.length;Z++){let de=K;w[Z]!==""&&(de+="="+xr(w[Z])),m.push(de)}}return this.i=m.join("&")};function wd(m){const b=new ps;return b.i=m.i,m.g&&(b.g=new Map(m.g),b.h=m.h),b}function gs(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function Xo(m,b){b&&!m.j&&(Mn(m),m.i=null,m.g.forEach(function(w,C){const K=C.toLowerCase();C!=K&&(Ed(this,C),Yo(this,K,w))},m)),m.j=b}function Ii(m,b){const w=new Si;if(l.Image){const C=new Image;C.onload=g(si,w,"TestLoadImage: loaded",!0,b,C),C.onerror=g(si,w,"TestLoadImage: error",!1,b,C),C.onabort=g(si,w,"TestLoadImage: abort",!1,b,C),C.ontimeout=g(si,w,"TestLoadImage: timeout",!1,b,C),l.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=m}else b(!1)}function Wu(m,b){const w=new Si,C=new AbortController,K=setTimeout(()=>{C.abort(),si(w,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:C.signal}).then(Z=>{clearTimeout(K),Z.ok?si(w,"TestPingServer: ok",!0,b):si(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(K),si(w,"TestPingServer: error",!1,b)})}function si(m,b,w,C,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),C(w)}catch{}}function ys(){this.g=new cd}function Ji(m){this.i=m.Sb||null,this.h=m.ab||!1}v(Ji,hd),Ji.prototype.g=function(){return new Ma(this.i,this.h)};function Ma(m,b){jt.call(this),this.H=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ma,jt),n=Ma.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=b,this.readyState=1,Ri(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(b.body=m),(this.H||l).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wo(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wo(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?vs(this):Ri(this),this.readyState==3&&Wo(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,vs(this))},n.Na=function(m){this.g&&(this.response=m,vs(this))},n.ga=function(){this.g&&vs(this)};function vs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ri(m)}n.setRequestHeader=function(m,b){this.A.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=b.next();return m.join(`\r
`)};function Ri(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ai(m){let b="";return Te(m,function(w,C){b+=C,b+=":",b+=w,b+=`\r
`}),b}function Pa(m,b,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=ai(w),typeof m=="string"?w!=null&&xr(w):it(m,b,w))}function lt(m){jt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(lt,jt);var er=/^https?$/i,Zu=["POST","PUT"];n=lt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,b,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bu.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(Z){Oa(this,Z);return}if(m=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var K in C)w.set(K,C[K]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Z of C.keys())w.set(Z,C.get(Z));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(Zu,b,void 0)>=0)||C||K||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,de]of w)this.g.setRequestHeader(Z,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Z){Oa(this,Z)}};function Oa(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.o=5,Ju(m),Ar(m)}function Ju(m){m.A||(m.A=!0,Wt(m,"complete"),Wt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Wt(this,"complete"),Wt(this,"abort"),Ar(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ar(this,!0)),lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?La(this):this.Xa())},n.Xa=function(){La(this)};function La(m){if(m.h&&typeof o<"u"){if(m.v&&Ci(m)==4)setTimeout(m.Ca.bind(m),0);else if(Wt(m,"readystatechange"),Ci(m)==4){m.h=!1;try{const Z=m.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var C;if(C=Z===0){let de=String(m.D).match(_d)[1]||null;!de&&l.self&&l.self.location&&(de=l.self.location.protocol.slice(0,-1)),C=!er.test(de?de.toLowerCase():"")}w=C}if(w)Wt(m,"complete"),Wt(m,"success");else{m.o=6;try{var K=Ci(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",Ju(m)}}finally{Ar(m)}}}}function Ar(m,b){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const w=m.g;m.g=null,b||Wt(m,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ci(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Ci(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),Wp(b)}};function ln(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ir(m){const b={};m=(m.g&&Ci(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<m.length;C++){if(O(m[C]))continue;var w=gd(m[C]);const K=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=b[K]||[];b[K]=Z,Z.push(w)}we(b,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(m,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||b}function _s(m){this.za=0,this.i=[],this.j=new Si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tr("baseRetryDelayMs",5e3,m),this.Za=tr("retryDelaySeedMs",1e4,m),this.Ta=tr("forwardChannelMaxRetries",2,m),this.va=tr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Fu(m&&m.concurrentRequestLimit),this.Ba=new ys,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_s.prototype,n.ka=8,n.I=1,n.connect=function(m,b,w,C){zt(0),this.W=m,this.H=b||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.J=Dd(this,null,this.W),nr(this)};function ec(m){if(Zo(m),m.I==3){var b=m.V++,w=Ft(m.J);if(it(w,"SID",m.M),it(w,"RID",b),it(w,"TYPE","terminate"),ja(m,w),b=new xi(m,m.j,b),b.M=2,b.A=ka(Ft(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(b.A.toString(),"")}catch{}!w&&l.Image&&(new Image().src=b.A,w=!0),w||(b.g=Nd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ki(b)}Cd(m)}function bs(m){m.g&&(nc(m),m.g.cancel(),m.g=null)}function Zo(m){bs(m),m.v&&(l.clearTimeout(m.v),m.v=null),el(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function nr(m){if(!qu(m.h)&&!m.m){m.m=!0;var b=m.Ea;ne||I(),ee||(ne(),ee=!0),x.add(b,m),m.D=0}}function Jo(m,b){return Xi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=b.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Hi(f(m.Ea,m,b),Rd(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new xi(this,this.j,m);let Z=this.o;if(this.U&&(Z?(Z=B(Z),fe(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(b+=C,b>4096){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=Sd(this,K,b),w=Ft(this.J),it(w,"RID",m),it(w,"CVER",22),this.G&&it(w,"X-HTTP-Session-Id",this.G),ja(this,w),Z&&(this.R?b="headers="+xr(ai(Z))+"&"+b:this.u&&Pa(w,this.u,Z)),Hu(this.h,K),this.Ra&&it(w,"TYPE","init"),this.S?(it(w,"$req",b),it(w,"SID","null"),K.U=!0,$i(K,w,null)):$i(K,w,b),this.I=2}}else this.I==3&&(m?tc(this,m):this.i.length==0||qu(this.h)||tc(this))};function tc(m,b){var w;b?w=b.l:w=m.V++;const C=Ft(m.J);it(C,"SID",m.M),it(C,"RID",w),it(C,"AID",m.K),ja(m,C),m.u&&m.o&&Pa(C,m.u,m.o),w=new xi(m,m.j,w,m.D+1),m.u===null&&(w.J=m.o),b&&(m.i=b.G.concat(m.i)),b=Sd(m,w,1e3),w.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Hu(m.h,w),$i(w,C,b)}function ja(m,b){m.H&&Te(m.H,function(w,C){it(b,C,w)}),m.l&&Te({},function(w,C){it(b,C,w)})}function Sd(m,b,w){w=Math.min(m.i.length,w);const C=m.l?f(m.l.Ka,m.l,m):null;e:{var K=m.i;let Oe=-1;for(;;){const Nt=["count="+w];Oe==-1?w>0?(Oe=K[0].g,Nt.push("ofs="+Oe)):Oe=0:Nt.push("ofs="+Oe);let Je=!0;for(let vt=0;vt<w;vt++){var Z=K[vt].g;const oi=K[vt].map;if(Z-=Oe,Z<0)Oe=Math.max(0,K[vt].g-100),Je=!1;else try{Z="req"+Z+"_"||"";try{var de=oi instanceof Map?oi:Object.entries(oi);for(const[rr,Di]of de){let Ni=Di;h(Di)&&(Ni=ds(Di)),Nt.push(Z+rr+"="+encodeURIComponent(Ni))}}catch(rr){throw Nt.push(Z+"type="+encodeURIComponent("_badmap")),rr}}catch{C&&C(oi)}}if(Je){de=Nt.join("&");break e}}de=void 0}return m=m.i.splice(0,w),b.G=m,de}function xd(m){if(!m.g&&!m.v){m.Y=1;var b=m.Da;ne||I(),ee||(ne(),ee=!0),x.add(b,m),m.A=0}}function za(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Hi(f(m.Da,m),Rd(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Ad(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Hi(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),bs(this),Ad(this))};function nc(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Ad(m){m.g=new xi(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var b=Ft(m.na);it(b,"RID","rpc"),it(b,"SID",m.M),it(b,"AID",m.K),it(b,"CI",m.F?"0":"1"),!m.F&&m.ia&&it(b,"TO",m.ia),it(b,"TYPE","xmlhttp"),ja(m,b),m.u&&m.o&&Pa(b,m.u,m.o),m.O&&(m.g.H=m.O);var w=m.g;m=m.ba,w.M=1,w.A=ka(Ft(b)),w.u=null,w.R=!0,Go(w,m)}n.Va=function(){this.C!=null&&(this.C=null,bs(this),za(this),zt(19))};function el(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function Id(m,b){var w=null;if(m.g==b){el(m),nc(m),m.g=null;var C=2}else if(Wi(m.h,b))w=b.G,Gu(m.h,b),C=1;else return;if(m.I!=0){if(b.o)if(C==1){w=b.u?b.u.length:0,b=Date.now()-b.F;var K=m.D;C=Ho(),Wt(C,new qi(C,w)),nr(m)}else xd(m);else if(K=b.m,K==3||K==0&&b.X>0||!(C==1&&Jo(m,b)||C==2&&za(m)))switch(w&&w.length>0&&(b=m.h,b.i=b.i.concat(w)),K){case 1:ir(m,5);break;case 4:ir(m,10);break;case 3:ir(m,6);break;default:ir(m,2)}}}function Rd(m,b){let w=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(w*=2),w*b}function ir(m,b){if(m.j.info("Error code "+b),b==2){var w=f(m.bb,m),C=m.Ua;const K=!C;C=new Gn(C||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||rn(C,"https"),ka(C),K?Ii(C.toString(),w):Wu(C.toString(),w)}else zt(2);m.I=0,m.l&&m.l.pa(b),Cd(m),Zo(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Cd(m){if(m.I=0,m.ja=[],m.l){const b=$u(m.h);(b.length!=0||m.i.length!=0)&&(R(m.ja,b),R(m.ja,m.i),m.h.i.length=0,S(m.i),m.i.length=0),m.l.oa()}}function Dd(m,b,w){var C=w instanceof Gn?Ft(w):new Gn(w);if(C.g!="")b&&(C.g=b+"."+C.g),fs(C,C.u);else{var K=l.location;C=K.protocol,b=b?b+"."+K.hostname:K.hostname,K=+K.port;const Z=new Gn(null);C&&rn(Z,C),b&&(Z.g=b),K&&fs(Z,K),w&&(Z.h=w),C=Z}return w=m.G,b=m.wa,w&&b&&it(C,w,b),it(C,"VER",m.ka),ja(m,C),C}function Nd(m,b,w){if(b&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Aa&&!m.ma?new lt(new Ji({ab:w})):new lt(m.ma),b.Fa(m.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kd(){}n=kd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ts(){}Ts.prototype.g=function(m,b){return new Rn(m,b)};function Rn(m,b){jt.call(this),this.g=new _s(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(m?m["X-WebChannel-Client-Profile"]=b.sa:m={"X-WebChannel-Client-Profile":b.sa}),this.g.U=m,(m=b&&b.Qb)&&!O(m)&&(this.g.u=m),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!O(b)&&(this.g.G=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Rr(this)}v(Rn,jt),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){ec(this.g)},Rn.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.v&&(w={},w.__data__=ds(m),m=w);b.i.push(new Bt(b.Ya++,m)),b.I==3&&nr(b)},Rn.prototype.N=function(){this.g.l=null,delete this.j,ec(this.g),delete this.g,Rn.Z.N.call(this)};function Vd(m){on.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const w in b){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}v(Vd,on);function Md(){ii.call(this),this.status=1}v(Md,ii);function Rr(m){this.g=m}v(Rr,kd),Rr.prototype.ra=function(){Wt(this.g,"a")},Rr.prototype.qa=function(m){Wt(this.g,new Vd(m))},Rr.prototype.pa=function(m){Wt(this.g,new Md)},Rr.prototype.oa=function(){Wt(this.g,"b")},Ts.prototype.createWebChannel=Ts.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,t2=function(){return new Ts},e2=function(){return Ho()},JI=Dt,Y0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,im=Da,Uu.COMPLETE="complete",ZI=Uu,dd.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",jt.prototype.listen=jt.prototype.J,Qc=dd,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,WI=lt}).apply(typeof Bf<"u"?Bf:typeof self<"u"?self:typeof window<"u"?window:{});const nS="@firebase/firestore",iS="4.9.2";class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let xu="12.3.0";const Co=new s_("@firebase/firestore");function Ll(){return Co.logLevel}function ue(n,...e){if(Co.logLevel<=Ge.DEBUG){const t=e.map(l_);Co.debug(`Firestore (${xu}): ${n}`,...t)}}function Pt(n,...e){if(Co.logLevel<=Ge.ERROR){const t=e.map(l_);Co.error(`Firestore (${xu}): ${n}`,...t)}}function _h(n,...e){if(Co.logLevel<=Ge.WARN){const t=e.map(l_);Co.warn(`Firestore (${xu}): ${n}`,...t)}}function l_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ye(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,n2(n,i,t)}function n2(n,e,t){let i=`FIRESTORE (${xu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Pt(i),new Error(i)}function Ee(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||n2(e,s,i)}function _e(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends os{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class R3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vn.UNAUTHENTICATED)))}shutdown(){}}class D3{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zr,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},h=d=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zr)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ee(typeof i.accessToken=="string",31837,{l:i}),new R3(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class N3{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class k3{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new N3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);const i=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new rS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function M3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class u_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=M3(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%62))}return i}}function Ve(n,e){return n<e?-1:n>e?1:0}function X0(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return o0(s)===o0(o)?Ve(s,o):o0(s)?1:-1}return Ve(n.length,e.length)}const P3=55296,O3=57343;function o0(n){const e=n.charCodeAt(0);return e>=P3&&e<=O3}function nu(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function i2(n){return n+"\0"}const sS="__name__";class ur{constructor(e,t,i){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ye(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ur.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ur?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const o=ur.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Ve(e.length,t.length)}static compareSegments(e,t){const i=ur.isNumericId(e),s=ur.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?ur.extractNumericId(e).compare(ur.extractNumericId(t)):X0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oa.fromString(e.substring(4,e.length-2))}}class tt extends ur{construct(e,t,i){return new tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const L3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends ur{construct(e,t,i){return new Et(e,t,i)}static isValidIdentifier(e){return L3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sS}static keyField(){return new Et([sS])}static fromServerFormat(e){const t=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ce(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ce(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ce(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ce(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(t)}static emptyPath(){return new Et([])}}class pe{constructor(e){this.path=e}static fromPath(e){return new pe(tt.fromString(e))}static fromName(e){return new pe(tt.fromString(e).popFirst(5))}static empty(){return new pe(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new tt(e.slice()))}}function r2(n,e,t){if(!t)throw new ce(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function j3(n,e,t,i){if(e===!0&&i===!0)throw new ce(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aS(n){if(!pe.isDocumentKey(n))throw new ce(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oS(n){if(pe.isDocumentKey(n))throw new ce(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function s2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function dp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function Ui(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dp(n);throw new ce(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Kh(n,e){if(!s2(n))throw new ce(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new ce(re.INVALID_ARGUMENT,t);return!0}const lS=-62135596800,uS=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*uS);return new Xe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lS)throw new ce(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uS}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kh(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Yt("string",Xe._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Xe(0,0))}static max(){return new Ae(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const iu=-1;class Dm{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function W0(n){return n.fields.find((e=>e.kind===2))}function lo(n){return n.fields.filter((e=>e.kind!==2))}Dm.UNKNOWN_ID=-1;class rm{constructor(e,t){this.fieldPath=e,this.kind=t}}class bh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bh(0,ni.min())}}function a2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(i===1e9?new Xe(t+1,0):new Xe(t,i));return new ni(s,pe.empty(),e)}function o2(n){return new ni(n.readTime,n.key,iu)}class ni{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ni(Ae.min(),pe.empty(),iu)}static max(){return new ni(Ae.max(),pe.empty(),iu)}}function c_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}const l2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ba(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==l2)throw n;ue("LocalStore","Unexpectedly lost primary lease")}class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,i)=>{t(e)}))}static reject(e){return new $(((t,i)=>{i(e)}))}static waitFor(e){return new $(((t,i)=>{let s=0,o=0,l=!1;e.forEach((h=>{++s,h.next((()=>{++o,l&&o===s&&t()}),(d=>i(d)))})),l=!0,o===s&&t()}))}static or(e){let t=$.resolve(!1);for(const i of e)t=t.next((s=>s?$.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,o)=>{i.push(t.call(this,s,o))})),this.waitFor(i)}static mapArray(e,t){return new $(((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{l[f]=g,++h,h===o&&i(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new $(((i,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):i()};o()}))}}const Jn="SimpleDb";class fp{static open(e,t,i,s){try{return new fp(t,e.transaction(s,i))}catch(o){throw new th(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Zr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new th(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=h_(i.target.error);this.S.reject(new th(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ue(Jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new U3(t)}}class la{static delete(e){return ue(Jn,"Removing database:",e),ho(LI().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!HI())return!1;if(la.F())return!0;const e=en(),t=la.M(e),i=0<t&&t<10,s=c2(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,la.M(en())===12.2&&Pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ue(Jn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const l=o.target.result;t(l)},s.onblocked=()=>{i(new th(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const l=o.target.error;l.name==="VersionError"?i(new ce(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new ce(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new th(e,l))},s.onupgradeneeded=o=>{ue(Jn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,s.transaction,o.oldVersion,this.version).next((()=>{ue(Jn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const h=fp.open(this.db,e,o?"readonly":"readwrite",i),d=s(h).next((f=>(h.C(),f))).catch((f=>(h.abort(f),$.reject(f)))).toPromise();return d.catch((()=>{})),await h.D,d}catch(h){const d=h,f=d.name!=="FirebaseError"&&l<3;if(ue(Jn,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function c2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class z3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ho(this.U.delete())}}class th extends ce{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ta(n){return n.name==="IndexedDbTransactionError"}class U3{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ue(Jn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ue(Jn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ho(i)}add(e){return ue(Jn,"ADD",this.store.name,e,e),ho(this.store.add(e))}get(e){return ho(this.store.get(e)).next((t=>(t===void 0&&(t=null),ue(Jn,"GET",this.store.name,e,t),t)))}delete(e){return ue(Jn,"DELETE",this.store.name,e),ho(this.store.delete(e))}count(){return ue(Jn,"COUNT",this.store.name),ho(this.store.count())}J(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new $(((l,h)=>{o.onerror=d=>{h(d.target.error)},o.onsuccess=d=>{l(d.target.result)}}))}{const o=this.cursor(i),l=[];return this.H(o,((h,d)=>{l.push(d)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new $(((s,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{s(l.target.result)}}))}Z(e,t){ue(Jn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,((o,l,h)=>h.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}te(e){const t=this.cursor({});return new $(((i,s)=>{t.onerror=o=>{const l=h_(o.target.error);s(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((h=>{h?l.continue():i()})):i()}}))}H(e,t){const i=[];return new $(((s,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void s();const d=new z3(h),f=t(h.primaryKey,h.value,d);if(f instanceof $){const g=f.catch((v=>(d.done(),$.reject(v))));i.push(g)}d.isDone?s():d.G===null?h.continue():h.continue(d.G)}})).next((()=>$.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ho(n){return new $(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=h_(i.target.error);t(s)}}))}let cS=!1;function h_(n){const e=la.M(en());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cS||(cS=!0,setTimeout((()=>{throw i}),0)),i}}return n}const nh="IndexBackfiller";class B3{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ue(nh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ue(nh,`Documents written: ${t}`)}catch(t){Ta(t)?ue(nh,"Ignoring IndexedDB error during index backfill: ",t):await ba(t)}await this.re(6e4)}))}}class F3{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,o=!0;return $.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return ue(nh,`Processing collection: ${l}`),this.oe(e,l,s).next((h=>{s-=h,i.add(l)}));o=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(s,o))).next((h=>(ue(nh,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,o)=>{const l=o2(o);c_(l,i)>0&&(i=l)})),new ni(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Un.ce=-1;const _o=-1;function mp(n){return n==null}function Th(n){return n===0&&1/n==-1/0}function h2(n){return typeof n=="number"&&Number.isInteger(n)&&!Th(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Nm="";function Sn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hS(e)),e=q3(n.get(t),e);return hS(e)}function q3(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Nm:t+="";break;default:t+=o}}return t}function hS(n){return n+Nm+""}function fr(n){const e=n.length;if(Ee(e>=2,64408,{path:n}),e===2)return Ee(n.charAt(0)===Nm&&n.charAt(1)==="",56145,{path:n}),tt.emptyPath();const t=e-2,i=[];let s="";for(let o=0;o<e;){const l=n.indexOf(Nm,o);switch((l<0||l>t)&&ye(50515,{path:n}),n.charAt(l+1)){case"":const h=n.substring(o,l);let d;s.length===0?d=h:(s+=h,d=s,s=""),i.push(d);break;case"":s+=n.substring(o,l),s+="\0";break;case"":s+=n.substring(o,l+1);break;default:ye(61167,{path:n})}o=l+2}return new tt(i)}const uo="remoteDocuments",Qh="owner",Nl="owner",Eh="mutationQueues",H3="userId",Li="mutations",dS="batchId",go="userMutationsIndex",fS=["userId","batchId"];function sm(n,e){return[n,Sn(e)]}function d2(n,e,t){return[n,Sn(e),t]}const G3={},ru="documentMutations",km="remoteDocumentsV14",$3=["prefixPath","collectionGroup","readTime","documentId"],am="documentKeyIndex",K3=["prefixPath","collectionGroup","documentId"],f2="collectionGroupIndex",Q3=["collectionGroup","readTime","prefixPath","documentId"],wh="remoteDocumentGlobal",Z0="remoteDocumentGlobalKey",su="targets",m2="queryTargetsIndex",Y3=["canonicalId","targetId"],au="targetDocuments",X3=["targetId","path"],d_="documentTargetsIndex",W3=["path","targetId"],Vm="targetGlobalKey",bo="targetGlobal",Sh="collectionParents",Z3=["collectionId","parent"],ou="clientMetadata",J3="clientId",pp="bundles",e5="bundleId",gp="namedQueries",t5="name",f_="indexConfiguration",n5="indexId",J0="collectionGroupIndex",i5="collectionGroup",ih="indexState",r5=["indexId","uid"],p2="sequenceNumberIndex",s5=["uid","sequenceNumber"],rh="indexEntries",a5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],g2="documentKeyIndex",o5=["indexId","uid","orderedDocumentKey"],yp="documentOverlays",l5=["userId","collectionPath","documentId"],ev="collectionPathOverlayIndex",u5=["userId","collectionPath","largestBatchId"],y2="collectionGroupOverlayIndex",c5=["userId","collectionGroup","largestBatchId"],m_="globals",h5="name",v2=[Eh,Li,ru,uo,su,Qh,bo,au,ou,wh,Sh,pp,gp],d5=[...v2,yp],_2=[Eh,Li,ru,km,su,Qh,bo,au,ou,wh,Sh,pp,gp,yp],b2=_2,p_=[...b2,f_,ih,rh],f5=p_,T2=[...p_,m_],m5=T2;class tv extends u2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function tn(n,e){const t=_e(n);return la.O(t.le,e)}function mS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ea(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function E2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ff(this.root,e,this.comparator,!0)}}class Ff{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??mn.RED,this.left=s??mn.EMPTY,this.right=o??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new mn(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return mn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,i,s,o){return this}insert(e,t,i){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pS(this.data.getIterator())}getIteratorFrom(e){return new pS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ot(this.comparator);return t.data=e,t}}class pS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kl(n){return n.hasNext()?n.getNext():void 0}class Bn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new Bn([])}unionWith(e){let t=new ot(Et.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nu(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class w2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new w2("Invalid base64 string: "+o):o}})(e);return new Lt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const p5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(n){if(Ee(!!n,39018),typeof n=="string"){let e=0;const t=p5.exec(n);if(Ee(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ns(n){return typeof n=="string"?Lt.fromBase64String(n):Lt.fromUint8Array(n)}const S2="server_timestamp",x2="__type__",A2="__previous_value__",I2="__local_write_time__";function g_(n){return(n?.mapValue?.fields||{})[x2]?.stringValue===S2}function vp(n){const e=n.mapValue.fields[A2];return g_(e)?vp(e):e}function xh(n){const e=ts(n.mapValue.fields[I2].timestampValue);return new Xe(e.seconds,e.nanos)}class g5{constructor(e,t,i,s,o,l,h,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const Mm="(default)";class Do{constructor(e,t){this.projectId=e,this.database=t||Mm}static empty(){return new Do("","")}get isDefaultDatabase(){return this.database===Mm}isEqual(e){return e instanceof Do&&e.projectId===this.projectId&&e.database===this.database}}const y_="__type__",R2="__max__",ia={mapValue:{fields:{__type__:{stringValue:R2}}}},v_="__vector__",lu="value",om={nullValue:"NULL_VALUE"};function ha(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?g_(n)?4:C2(n)?9007199254740991:_p(n)?10:11:ye(28295,{value:n})}function Er(n,e){if(n===e)return!0;const t=ha(n);if(t!==ha(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xh(n).isEqual(xh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=ts(s.timestampValue),h=ts(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return ns(s.bytesValue).isEqual(ns(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return bt(s.geoPointValue.latitude)===bt(o.geoPointValue.latitude)&&bt(s.geoPointValue.longitude)===bt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return bt(s.integerValue)===bt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=bt(s.doubleValue),h=bt(o.doubleValue);return l===h?Th(l)===Th(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return nu(n.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(mS(l)!==mS(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!Er(l[d],h[d])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function Ah(n,e){return(n.values||[]).find((t=>Er(t,e)))!==void 0}function da(n,e){if(n===e)return 0;const t=ha(n),i=ha(e);if(t!==i)return Ve(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const h=bt(o.integerValue||o.doubleValue),d=bt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,e);case 3:return gS(n.timestampValue,e.timestampValue);case 4:return gS(xh(n),xh(e));case 5:return X0(n.stringValue,e.stringValue);case 6:return(function(o,l){const h=ns(o),d=ns(l);return h.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const h=o.split("/"),d=l.split("/");for(let f=0;f<h.length&&f<d.length;f++){const g=Ve(h[f],d[f]);if(g!==0)return g}return Ve(h.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const h=Ve(bt(o.latitude),bt(l.latitude));return h!==0?h:Ve(bt(o.longitude),bt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return yS(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const h=o.fields||{},d=l.fields||{},f=h[lu]?.arrayValue,g=d[lu]?.arrayValue,v=Ve(f?.values?.length||0,g?.values?.length||0);return v!==0?v:yS(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===ia.mapValue&&l===ia.mapValue)return 0;if(o===ia.mapValue)return 1;if(l===ia.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),f=l.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const _=X0(d[v],g[v]);if(_!==0)return _;const S=da(h[d[v]],f[g[v]]);if(S!==0)return S}return Ve(d.length,g.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function gS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=ts(n),i=ts(e),s=Ve(t.seconds,i.seconds);return s!==0?s:Ve(t.nanos,i.nanos)}function yS(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const o=da(t[s],i[s]);if(o)return o}return Ve(t.length,i.length)}function uu(n){return nv(n)}function nv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ts(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ns(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const o of t.values||[])s?s=!1:i+=",",i+=nv(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${nv(t.fields[l])}`;return s+"}"})(n.mapValue):ye(61005,{value:n})}function lm(n){switch(ha(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vp(n);return e?16+lm(e):16;case 5:return 2*n.stringValue.length;case 6:return ns(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+lm(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Ea(i.fields,((o,l)=>{s+=o.length+lm(l)})),s})(n.mapValue);default:throw ye(13486,{value:n})}}function Ih(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iv(n){return!!n&&"integerValue"in n}function Rh(n){return!!n&&"arrayValue"in n}function vS(n){return!!n&&"nullValue"in n}function _S(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function um(n){return!!n&&"mapValue"in n}function _p(n){return(n?.mapValue?.fields||{})[y_]?.stringValue===v_}function sh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ea(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=sh(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sh(n.arrayValue.values[t]);return e}return{...n}}function C2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===R2}const D2={mapValue:{fields:{[y_]:{stringValue:v_},[lu]:{arrayValue:{}}}}};function y5(n){return"nullValue"in n?om:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ih(Do.empty(),pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?_p(n)?D2:{mapValue:{}}:ye(35942,{value:n})}function v5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ih(Do.empty(),pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?D2:"mapValue"in n?_p(n)?{mapValue:{}}:ia:ye(61959,{value:n})}function bS(n,e){const t=da(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function TS(n,e){const t=da(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!um(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sh(t)}setAll(e){let t=Et.emptyPath(),i={},s=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,i,s),i={},s=[],t=h.popLast()}l?i[h.lastSegment()]=sh(l):s.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){const t=this.field(e.popLast());um(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];um(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Ea(t,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new bn(sh(this.value))}}function N2(n){const e=[];return Ea(n.fields,((t,i)=>{const s=new Et([t]);if(um(i)){const o=N2(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Bn(e)}class Ct{constructor(e,t,i,s,o,l,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Ct(e,0,Ae.min(),Ae.min(),Ae.min(),bn.empty(),0)}static newFoundDocument(e,t,i,s){return new Ct(e,1,t,Ae.min(),i,s,0)}static newNoDocument(e,t){return new Ct(e,2,t,Ae.min(),Ae.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new Ct(e,3,t,Ae.min(),Ae.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cu{constructor(e,t){this.position=e,this.inclusive=t}}function ES(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?i=pe.comparator(pe.fromName(l.referenceValue),t.key):i=da(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function wS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Er(n.position[t],e.position[t]))return!1;return!0}class Ch{constructor(e,t="asc"){this.field=e,this.dir=t}}function _5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class k2{}class $e extends k2{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new b5(e,t,i):t==="array-contains"?new w5(e,i):t==="in"?new j2(e,i):t==="not-in"?new S5(e,i):t==="array-contains-any"?new x5(e,i):new $e(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new T5(e,i):new E5(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(da(t,this.value)):t!==null&&ha(this.value)===ha(t)&&this.matchesComparison(da(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class at extends k2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new at(e,t)}matches(e){return hu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hu(n){return n.op==="and"}function rv(n){return n.op==="or"}function __(n){return V2(n)&&hu(n)}function V2(n){for(const e of n.filters)if(e instanceof at)return!1;return!0}function sv(n){if(n instanceof $e)return n.field.canonicalString()+n.op.toString()+uu(n.value);if(__(n))return n.filters.map((e=>sv(e))).join(",");{const e=n.filters.map((t=>sv(t))).join(",");return`${n.op}(${e})`}}function M2(n,e){return n instanceof $e?(function(i,s){return s instanceof $e&&i.op===s.op&&i.field.isEqual(s.field)&&Er(i.value,s.value)})(n,e):n instanceof at?(function(i,s){return s instanceof at&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,l,h)=>o&&M2(l,s.filters[h])),!0):!1})(n,e):void ye(19439)}function P2(n,e){const t=n.filters.concat(e);return at.create(t,n.op)}function O2(n){return n instanceof $e?(function(t){return`${t.field.canonicalString()} ${t.op} ${uu(t.value)}`})(n):n instanceof at?(function(t){return t.op.toString()+" {"+t.getFilters().map(O2).join(" ,")+"}"})(n):"Filter"}class b5 extends $e{constructor(e,t,i){super(e,t,i),this.key=pe.fromName(i.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class T5 extends $e{constructor(e,t){super(e,"in",t),this.keys=L2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class E5 extends $e{constructor(e,t){super(e,"not-in",t),this.keys=L2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function L2(n,e){return(e.arrayValue?.values||[]).map((t=>pe.fromName(t.referenceValue)))}class w5 extends $e{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rh(t)&&Ah(t.arrayValue,this.value)}}class j2 extends $e{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ah(this.value.arrayValue,t)}}class S5 extends $e{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ah(this.value.arrayValue,t)}}class x5 extends $e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ah(this.value.arrayValue,i)))}}class A5{constructor(e,t=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function av(n,e=null,t=[],i=[],s=null,o=null,l=null){return new A5(n,e,t,i,s,o,l)}function No(n){const e=_e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>sv(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),mp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>uu(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>uu(i))).join(",")),e.Te=t}return e.Te}function Yh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!M2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wS(n.startAt,e.startAt)&&wS(n.endAt,e.endAt)}function Pm(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Om(n,e){return n.filters.filter((t=>t instanceof $e&&t.field.isEqual(e)))}function SS(n,e,t){let i=om,s=!0;for(const o of Om(n,e)){let l=om,h=!0;switch(o.op){case"<":case"<=":l=y5(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,h=!1;break;case"!=":case"not-in":l=om}bS({value:i,inclusive:s},{value:l,inclusive:h})<0&&(i=l,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];bS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}function xS(n,e,t){let i=ia,s=!0;for(const o of Om(n,e)){let l=ia,h=!0;switch(o.op){case">=":case">":l=v5(o.value),h=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,h=!1;break;case"!=":case"not-in":l=ia}TS({value:i,inclusive:s},{value:l,inclusive:h})>0&&(i=l,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];TS({value:i,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}class Au{constructor(e,t=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function z2(n,e,t,i,s,o,l,h){return new Au(n,e,t,i,s,o,l,h)}function bp(n){return new Au(n)}function AS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function U2(n){return n.collectionGroup!==null}function ah(n){const e=_e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new ot(Et.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(h=h.add(f.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ch(o,i))})),t.has(Et.keyField().canonicalString())||e.Ie.push(new Ch(Et.keyField(),i))}return e.Ie}function ti(n){const e=_e(n);return e.Ee||(e.Ee=I5(e,ah(n))),e.Ee}function I5(n,e){if(n.limitType==="F")return av(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Ch(s.field,o)}));const t=n.endAt?new cu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new cu(n.startAt.position,n.startAt.inclusive):null;return av(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ov(n,e){const t=n.filters.concat([e]);return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Lm(n,e,t){return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tp(n,e){return Yh(ti(n),ti(e))&&n.limitType===e.limitType}function B2(n){return`${No(ti(n))}|lt:${n.limitType}`}function jl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>O2(s))).join(", ")}]`),mp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>uu(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>uu(s))).join(",")),`Target(${i})`})(ti(n))}; limitType=${n.limitType})`}function Xh(n,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):pe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,s){for(const o of ah(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(l,h,d){const f=ES(l,h,d);return l.inclusive?f<=0:f<0})(i.startAt,ah(i),s)||i.endAt&&!(function(l,h,d){const f=ES(l,h,d);return l.inclusive?f>=0:f>0})(i.endAt,ah(i),s))})(n,e)}function F2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function q2(n){return(e,t)=>{let i=!1;for(const s of ah(n)){const o=R5(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function R5(n,e,t){const i=n.field.isKeyField()?pe.comparator(e.key,t.key):(function(o,l,h){const d=l.data.field(o),f=h.data.field(o);return d!==null&&f!==null?da(d,f):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ye(19790,{direction:n.dir})}}class ls{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,((t,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return E2(this.inner)}size(){return this.innerSize}}const C5=new mt(pe.comparator);function ei(){return C5}const H2=new mt(pe.comparator);function Yc(...n){let e=H2;for(const t of n)e=e.insert(t.key,t);return e}function G2(n){let e=H2;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function mr(){return oh()}function $2(){return oh()}function oh(){return new ls((n=>n.toString()),((n,e)=>n.isEqual(e)))}const D5=new mt(pe.comparator),N5=new ot(pe.comparator);function Ue(...n){let e=N5;for(const t of n)e=e.add(t);return e}const k5=new ot(Ve);function b_(){return k5}function T_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(e)?"-0":e}}function K2(n){return{integerValue:""+n}}function V5(n,e){return h2(e)?K2(e):T_(n,e)}class Ep{constructor(){this._=void 0}}function M5(n,e,t){return n instanceof Dh?(function(s,o){const l={fields:{[x2]:{stringValue:S2},[I2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&g_(o)&&(o=vp(o)),o&&(l.fields[A2]=o),{mapValue:l}})(t,e):n instanceof du?Y2(n,e):n instanceof fu?X2(n,e):(function(s,o){const l=Q2(s,o),h=IS(l)+IS(s.Ae);return iv(l)&&iv(s.Ae)?K2(h):T_(s.serializer,h)})(n,e)}function P5(n,e,t){return n instanceof du?Y2(n,e):n instanceof fu?X2(n,e):t}function Q2(n,e){return n instanceof Nh?(function(i){return iv(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Dh extends Ep{}class du extends Ep{constructor(e){super(),this.elements=e}}function Y2(n,e){const t=W2(e);for(const i of n.elements)t.some((s=>Er(s,i)))||t.push(i);return{arrayValue:{values:t}}}class fu extends Ep{constructor(e){super(),this.elements=e}}function X2(n,e){let t=W2(e);for(const i of n.elements)t=t.filter((s=>!Er(s,i)));return{arrayValue:{values:t}}}class Nh extends Ep{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function IS(n){return bt(n.integerValue||n.doubleValue)}function W2(n){return Rh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class O5{constructor(e,t){this.field=e,this.transform=t}}function L5(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof du&&s instanceof du||i instanceof fu&&s instanceof fu?nu(i.elements,s.elements,Er):i instanceof Nh&&s instanceof Nh?Er(i.Ae,s.Ae):i instanceof Dh&&s instanceof Dh})(n.transform,e.transform)}class j5{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class wp{}function Z2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sp(n.key,Tn.none()):new Iu(n.key,n.data,Tn.none());{const t=n.data,i=bn.empty();let s=new ot(Et.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new us(n.key,i,new Bn(s.toArray()),Tn.none())}}function z5(n,e,t){n instanceof Iu?(function(s,o,l){const h=s.value.clone(),d=CS(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof us?(function(s,o,l){if(!cm(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=CS(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(J2(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function lh(n,e,t,i){return n instanceof Iu?(function(o,l,h,d){if(!cm(o.precondition,l))return h;const f=o.value.clone(),g=DS(o.fieldTransforms,d,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof us?(function(o,l,h,d){if(!cm(o.precondition,l))return h;const f=DS(o.fieldTransforms,d,l),g=l.data;return g.setAll(J2(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(o,l,h){return cm(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function U5(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=Q2(i.transform,s||null);o!=null&&(t===null&&(t=bn.empty()),t.set(i.field,o))}return t||null}function RS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&nu(i,s,((o,l)=>L5(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Iu extends wp{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class us extends wp{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function J2(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function CS(n,e,t){const i=new Map;Ee(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,P5(l,h,t[s]))}return i}function DS(n,e,t){const i=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);i.set(s.field,M5(o,l,e))}return i}class Sp extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eR extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class E_{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&z5(o,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=lh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=lh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=$2();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=t.has(s.key)?null:h;const d=Z2(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&nu(this.mutations,e.mutations,((t,i)=>RS(t,i)))&&nu(this.baseMutations,e.baseMutations,((t,i)=>RS(t,i)))}}class w_{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Ee(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return D5})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new w_(e,t,i,s)}}class S_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class B5{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kt,Ye;function F5(n){switch(n){case re.OK:return ye(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function tR(n){if(n===void 0)return Pt("GRPC error has no .code"),re.UNKNOWN;switch(n){case Kt.OK:return re.OK;case Kt.CANCELLED:return re.CANCELLED;case Kt.UNKNOWN:return re.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return re.INTERNAL;case Kt.UNAVAILABLE:return re.UNAVAILABLE;case Kt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Kt.NOT_FOUND:return re.NOT_FOUND;case Kt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Kt.ABORTED:return re.ABORTED;case Kt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Kt.DATA_LOSS:return re.DATA_LOSS;default:return ye(39323,{code:n})}}(Ye=Kt||(Kt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function q5(){return new TextEncoder}const H5=new oa([4294967295,4294967295],0);function NS(n){const e=q5().encode(n),t=new XI;return t.update(e),new Uint8Array(t.digest())}function kS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new oa([t,i],0),new oa([s,o],0)]}class x_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Xc(`Invalid padding: ${t}`);if(i<0)throw new Xc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Xc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Xc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=oa.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(oa.fromNumber(i)));return s.compare(H5)===1&&(s=new oa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=NS(e),[i,s]=kS(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new x_(o,s,t);return i.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=NS(e),[i,s]=kS(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wh{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Zh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Wh(Ae.min(),s,new mt(Ve),ei(),Ue())}}class Zh{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Zh(i,t,Ue(),Ue(),Ue())}}class hm{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class nR{constructor(e,t){this.targetId=e,this.Ce=t}}class iR{constructor(e,t,i=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class VS{constructor(){this.ve=0,this.Fe=MS(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),i=Ue();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ye(38017,{changeType:o})}})),new Zh(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=MS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class G5{constructor(e){this.Ge=e,this.ze=new Map,this.je=ei(),this.Je=qf(),this.He=qf(),this.Ye=new mt(Ve)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Pm(o))if(i===0){const l=new pe(o.path);this.et(t,l,Ct.newNoDocument(l,Ae.min()))}else Ee(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t;let l,h;try{l=ns(i).toUint8Array()}catch(d){if(d instanceof w2)return _h("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new x_(l,s,o)}catch(d){return _h(d instanceof Xc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Pm(h.target)){const d=new pe(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Ct.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let i=Ue();this.He.forEach(((o,l)=>{let h=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new Wh(e,t,this.Ye,this.je,i);return this.je=ei(),this.Je=qf(),this.He=qf(),this.Ye=new mt(Ve),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new VS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ot(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ot(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new VS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qf(){return new mt(pe.comparator)}function MS(){return new mt(pe.comparator)}const $5={asc:"ASCENDING",desc:"DESCENDING"},K5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q5={and:"AND",or:"OR"};class Y5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lv(n,e){return n.useProto3Json||mp(e)?e:{value:e}}function mu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function X5(n,e){return mu(n,e.toTimestamp())}function Nn(n){return Ee(!!n,49232),Ae.fromTimestamp((function(t){const i=ts(t);return new Xe(i.seconds,i.nanos)})(n))}function A_(n,e){return uv(n,e).canonicalString()}function uv(n,e){const t=(function(s){return new tt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function sR(n){const e=tt.fromString(n);return Ee(mR(e),10190,{key:e.toString()}),e}function jm(n,e){return A_(n.databaseId,e.path)}function To(n,e){const t=sR(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(lR(t))}function aR(n,e){return A_(n.databaseId,e)}function oR(n){const e=sR(n);return e.length===4?tt.emptyPath():lR(e)}function cv(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lR(n){return Ee(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function PS(n,e,t){return{name:jm(n,e),fields:t.value.mapValue.fields}}function W5(n,e,t){const i=To(n,e.name),s=Nn(e.updateTime),o=e.createTime?Nn(e.createTime):Ae.min(),l=new bn({mapValue:{fields:e.fields}}),h=Ct.newFoundDocument(i,s,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Z5(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ye(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Ee(g===void 0||typeof g=="string",58123),Lt.fromBase64String(g||"")):(Ee(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Lt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(f){const g=f.code===void 0?re.UNKNOWN:tR(f.code);return new ce(g,f.message||"")})(l);t=new iR(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=To(n,i.document.name),o=Nn(i.document.updateTime),l=i.document.createTime?Nn(i.document.createTime):Ae.min(),h=new bn({mapValue:{fields:i.document.fields}}),d=Ct.newFoundDocument(s,o,l,h),f=i.targetIds||[],g=i.removedTargetIds||[];t=new hm(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=To(n,i.document),o=i.readTime?Nn(i.readTime):Ae.min(),l=Ct.newNoDocument(s,o),h=i.removedTargetIds||[];t=new hm([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=To(n,i.document),o=i.removedTargetIds||[];t=new hm([],o,s,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new B5(s,o),h=i.targetId;t=new nR(h,l)}}return t}function zm(n,e){let t;if(e instanceof Iu)t={update:PS(n,e.key,e.value)};else if(e instanceof Sp)t={delete:jm(n,e.key)};else if(e instanceof us)t={update:PS(n,e.key,e.data),updateMask:r6(e.fieldMask)};else{if(!(e instanceof eR))return ye(16599,{Vt:e.type});t={verify:jm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const h=l.transform;if(h instanceof Dh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof du)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Nh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw ye(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:X5(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye(27497)})(n,e.precondition)),t}function hv(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Tn.updateTime(Nn(o.updateTime)):o.exists!==void 0?Tn.exists(o.exists):Tn.none()})(e.currentDocument):Tn.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(l,h){let d=null;if("setToServerValue"in h)Ee(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),d=new Dh;else if("appendMissingElements"in h){const g=h.appendMissingElements.values||[];d=new du(g)}else if("removeAllFromArray"in h){const g=h.removeAllFromArray.values||[];d=new fu(g)}else"increment"in h?d=new Nh(l,h.increment):ye(16584,{proto:h});const f=Et.fromServerFormat(h.fieldPath);return new O5(f,d)})(n,s))):[];if(e.update){e.update.name;const s=To(n,e.update.name),o=new bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(d){const f=d.fieldPaths||[];return new Bn(f.map((g=>Et.fromServerFormat(g))))})(e.updateMask);return new us(s,o,l,t,i)}return new Iu(s,o,t,i)}if(e.delete){const s=To(n,e.delete);return new Sp(s,t)}if(e.verify){const s=To(n,e.verify);return new eR(s,t)}return ye(1463,{proto:e})}function J5(n,e){return n&&n.length>0?(Ee(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?Nn(s.updateTime):Nn(o);return l.isEqual(Ae.min())&&(l=Nn(o)),new j5(l,s.transformResults||[])})(t,e)))):[]}function uR(n,e){return{documents:[aR(n,e.path)]}}function cR(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=aR(n,s);const o=(function(f){if(f.length!==0)return fR(at.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:zl(_.field),direction:t6(_.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=lv(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function hR(n){let e=oR(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Ee(i===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(v){const _=dR(v);return _ instanceof at&&__(_)?_.getFilters():[_]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((_=>(function(R){return new Ch(Ul(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(_)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let _;return _=typeof v=="object"?v.value:v,mp(_)?null:_})(t.limit));let d=null;t.startAt&&(d=(function(v){const _=!!v.before,S=v.values||[];return new cu(S,_)})(t.startAt));let f=null;return t.endAt&&(f=(function(v){const _=!v.before,S=v.values||[];return new cu(S,_)})(t.endAt)),z2(e,s,l,o,h,"F",d,f)}function e6(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ul(t.unaryFilter.field);return $e.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ul(t.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ul(t.unaryFilter.field);return $e.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ul(t.unaryFilter.field);return $e.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return $e.create(Ul(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return at.create(t.compositeFilter.filters.map((i=>dR(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function t6(n){return $5[n]}function n6(n){return K5[n]}function i6(n){return Q5[n]}function zl(n){return{fieldPath:n.canonicalString()}}function Ul(n){return Et.fromServerFormat(n.fieldPath)}function fR(n){return n instanceof $e?(function(t){if(t.op==="=="){if(_S(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NAN"}};if(vS(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_S(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NOT_NAN"}};if(vS(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(t.field),op:n6(t.op),value:t.value}}})(n):n instanceof at?(function(t){const i=t.getFilters().map((s=>fR(s)));return i.length===1?i[0]:{compositeFilter:{op:i6(t.op),filters:i}}})(n):ye(54877,{filter:n})}function r6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function mR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Qr{constructor(e,t,i,s,o=Ae.min(),l=Ae.min(),h=Lt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class pR{constructor(e){this.yt=e}}function s6(n,e){let t;if(e.document)t=W5(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=pe.fromSegments(e.noDocument.path),s=Vo(e.noDocument.readTime);t=Ct.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const i=pe.fromSegments(e.unknownDocument.path),s=Vo(e.unknownDocument.version);t=Ct.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const o=new Xe(s[0],s[1]);return Ae.fromTimestamp(o)})(e.readTime)),t}function OS(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Um(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,l){return{name:jm(o,l.key),fields:l.data.value.mapValue.fields,updateTime:mu(o,l.version.toTimestamp()),createTime:mu(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ko(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:ko(e.version)}}return i}function Um(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ko(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vo(n){const e=new Xe(n.seconds,n.nanoseconds);return Ae.fromTimestamp(e)}function fo(n,e){const t=(e.baseMutations||[]).map((o=>hv(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];l.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>hv(n.yt,o))),s=Xe.fromMillis(e.localWriteTimeMs);return new E_(e.batchId,s,t,i)}function Wc(n){const e=Vo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Vo(n.lastLimboFreeSnapshotVersion):Ae.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return Ee(l===1,1966,{count:l}),ti(bp(oR(o.documents[0])))})(n.query):(function(o){return ti(hR(o))})(n.query),new Qr(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Lt.fromBase64String(n.resumeToken))}function gR(n,e){const t=ko(e.snapshotVersion),i=ko(e.lastLimboFreeSnapshotVersion);let s;s=Pm(e.target)?uR(n.yt,e.target):cR(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:No(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function yR(n){const e=hR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Lm(e,e.limit,"L"):e}function l0(n,e){return new S_(e.largestBatchId,hv(n.yt,e.overlayMutation))}function LS(n,e){const t=e.path.lastSegment();return[n,Sn(e.path.popLast()),t]}function jS(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:ko(i.readTime),documentKey:Sn(i.documentKey.path),largestBatchId:i.largestBatchId}}class a6{getBundleMetadata(e,t){return zS(e).get(t).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:Vo(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,t){return zS(e).put((function(s){return{bundleId:s.id,createTime:ko(Nn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return US(e).get(t).next((i=>{if(i)return(function(o){return{name:o.name,query:yR(o.bundledQuery),readTime:Vo(o.readTime)}})(i)}))}saveNamedQuery(e,t){return US(e).put((function(s){return{name:s.name,readTime:ko(Nn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function zS(n){return tn(n,pp)}function US(n){return tn(n,gp)}class xp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new xp(e,i)}getOverlay(e,t){return Fc(e).get(LS(this.userId,t)).next((i=>i?l0(this.serializer,i):null))}getOverlays(e,t){const i=mr();return $.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((o,l)=>{const h=new S_(t,l);s.push(this.St(e,h))})),$.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((l=>s.add(Sn(l.getCollectionPath()))));const o=[];return s.forEach((l=>{const h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(Fc(e).Z(ev,h))})),$.waitFor(o)}getOverlaysForCollection(e,t,i){const s=mr(),o=Sn(t),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Fc(e).J(ev,l).next((h=>{for(const d of h){const f=l0(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const o=mr();let l;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Fc(e).ee({index:y2,range:h},((d,f,g)=>{const v=l0(this.serializer,f);o.size()<s||v.largestBatchId===l?(o.set(v.getKey(),v),l=v.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Fc(e).put((function(s,o,l){const[h,d,f]=LS(o,l.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:zm(s.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Fc(n){return tn(n,yp)}class o6{bt(e){return tn(e,m_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Lt.fromUint8Array(i):Lt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class mo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(bt(e.integerValue));else if("doubleValue"in e){const i=bt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Th(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=ts(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ns(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?C2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):_p(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ye(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const s=lu,o=i[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(bt(o)),this.Ot(s,t),this.Ct(i[s],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),pe.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}mo.Kt=new mo;const Vl=255;function l6(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function BS(n){const e=64-(function(i){let s=0;for(let o=0;o<8;++o){const l=l6(255&i[o]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class u6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),i=BS(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=BS(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Vl),this.sn(255)}_n(){this.an(Vl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Vl?(this.sn(Vl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Vl?(this.an(Vl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class c6{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class h6{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class qc{constructor(){this.cn=new u6,this.ln=new c6(this.cn),this.hn=new h6(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class po{constructor(e,t,i,s){this.Tn=e,this.In=t,this.En=i,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new po(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:dm(this.En),directionalValue:dm(this.dn),orderedDocumentKey:dm(t),documentKey:i.path.toArray()}}Vn(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Hs(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=FS(n.En,e.En),t!==0?t:(t=FS(n.dn,e.dn),t!==0?t:pe.comparator(n.In,e.In)))}function FS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function dm(n){return qI()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function qS(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class HS{constructor(e){this.mn=new ot(((t,i)=>Et.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Ee(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=W0(e);if(t!==void 0&&!this.wn(t))return!1;const i=lo(e);let s=new Set,o=0,l=0;for(;o<i.length&&this.wn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const d=i[o];if(!this.Sn(h,d)||!this.bn(this.fn[l++],d))return!1}++o}for(;o<i.length;++o){const h=i[o];if(l>=this.fn.length||!this.bn(this.fn[l++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new ot(Et.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new rm(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new rm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new rm(i.field,i.dir==="asc"?0:1)));return new Dm(Dm.UNKNOWN_ID,this.collectionId,t,bh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function vR(n){if(Ee(n instanceof $e||n instanceof at,20012),n instanceof $e){if(n instanceof j2){const t=n.value.arrayValue?.values?.map((i=>$e.create(n.field,"==",i)))||[];return at.create(t,"or")}return n}const e=n.filters.map((t=>vR(t)));return at.create(e,n.op)}function d6(n){if(n.getFilters().length===0)return[];const e=mv(vR(n));return Ee(_R(e),7391),dv(e)||fv(e)?[e]:e.getFilters()}function dv(n){return n instanceof $e}function fv(n){return n instanceof at&&__(n)}function _R(n){return dv(n)||fv(n)||(function(t){if(t instanceof at&&rv(t)){for(const i of t.getFilters())if(!dv(i)&&!fv(i))return!1;return!0}return!1})(n)}function mv(n){if(Ee(n instanceof $e||n instanceof at,34018),n instanceof $e)return n;if(n.filters.length===1)return mv(n.filters[0]);const e=n.filters.map((i=>mv(i)));let t=at.create(e,n.op);return t=Bm(t),_R(t)?t:(Ee(t instanceof at,64498),Ee(hu(t),40251),Ee(t.filters.length>1,57927),t.filters.reduce(((i,s)=>I_(i,s))))}function I_(n,e){let t;return Ee(n instanceof $e||n instanceof at,38388),Ee(e instanceof $e||e instanceof at,25473),t=n instanceof $e?e instanceof $e?(function(s,o){return at.create([s,o],"and")})(n,e):GS(n,e):e instanceof $e?GS(e,n):(function(s,o){if(Ee(s.filters.length>0&&o.filters.length>0,48005),hu(s)&&hu(o))return P2(s,o.getFilters());const l=rv(s)?s:o,h=rv(s)?o:s,d=l.filters.map((f=>I_(f,h)));return at.create(d,"or")})(n,e),Bm(t)}function GS(n,e){if(hu(e))return P2(e,n.getFilters());{const t=e.filters.map((i=>I_(n,i)));return at.create(t,"or")}}function Bm(n){if(Ee(n instanceof $e||n instanceof at,11850),n instanceof $e)return n;const e=n.getFilters();if(e.length===1)return Bm(e[0]);if(V2(n))return n;const t=e.map((s=>Bm(s))),i=[];return t.forEach((s=>{s instanceof $e?i.push(s):s instanceof at&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:at.create(i,n.op)}class f6{constructor(){this.Cn=new R_}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(ni.min())}updateCollectionGroup(e,t,i){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class R_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new ot(tt.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ot(tt.comparator)).toArray()}}const $S="IndexedDbIndexManager",Hf=new Uint8Array(0);class m6{constructor(e,t){this.databaseId=t,this.vn=new R_,this.Fn=new ls((i=>No(i)),((i,s)=>Yh(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:i,parent:Sn(s)};return KS(e).put(o)}return $.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[i2(t),""],!1,!0);return KS(e).J(s).next((o=>{for(const l of o){if(l.collectionId!==t)break;i.push(fr(l.parent))}return i}))}addFieldIndex(e,t){const i=Hc(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=i.add(s);if(t.indexState){const l=Pl(e);return o.next((h=>{l.put(jS(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const i=Hc(e),s=Pl(e),o=Ml(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Hc(e),i=Ml(e),s=Pl(e);return t.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return $.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const o=new HS(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const i=Ml(e);let s=!0;const o=new Map;return $.forEach(this.Mn(t),(l=>this.xn(e,l).next((h=>{s&&(s=!!h),o.set(l,h)})))).next((()=>{if(s){let l=Ue();const h=[];return $.forEach(o,((d,f)=>{ue($S,`Using index ${(function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map((W=>`${W.fieldPath}:${W.kind}`)).join(",")}`})(d)} to execute ${No(t)}`);const g=(function(P,W){const ne=W0(W);if(ne===void 0)return null;for(const ee of Om(P,ne.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null})(f,d),v=(function(P,W){const ne=new Map;for(const ee of lo(W))for(const x of Om(P,ee.fieldPath))switch(x.op){case"==":case"in":ne.set(ee.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ne.set(ee.fieldPath.canonicalString(),x.value),Array.from(ne.values())}return null})(f,d),_=(function(P,W){const ne=[];let ee=!0;for(const x of lo(W)){const I=x.kind===0?SS(P,x.fieldPath,P.startAt):xS(P,x.fieldPath,P.startAt);ne.push(I.value),ee&&(ee=I.inclusive)}return new cu(ne,ee)})(f,d),S=(function(P,W){const ne=[];let ee=!0;for(const x of lo(W)){const I=x.kind===0?xS(P,x.fieldPath,P.endAt):SS(P,x.fieldPath,P.endAt);ne.push(I.value),ee&&(ee=I.inclusive)}return new cu(ne,ee)})(f,d),R=this.On(d,f,_),D=this.On(d,f,S),k=this.Nn(d,f,v),z=this.Bn(d.indexId,g,R,_.inclusive,D,S.inclusive,k);return $.forEach(z,(U=>i.Y(U,t.limit).next((P=>{P.forEach((W=>{const ne=pe.fromSegments(W.documentKey);l.has(ne)||(l=l.add(ne),h.push(ne))}))}))))})).next((()=>h))}return $.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=d6(at.create(e.filters,"and")).map((i=>av(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,s,o,l,h){const d=(t!=null?t.length:1)*Math.max(i.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let v=0;v<d;++v){const _=t?this.Ln(t[v/f]):Hf,S=this.kn(e,_,i[v%f],s),R=this.qn(e,_,o[v%f],l),D=h.map((k=>this.kn(e,_,k,!0)));g.push(...this.createRange(S,R,D))}return g}kn(e,t,i,s){const o=new po(e,pe.empty(),t,i);return s?o:o.An()}qn(e,t,i,s){const o=new po(e,pe.empty(),t,i);return s?o.An():o}xn(e,t){const i=new HS(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let l=null;for(const h of o)i.yn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l}))}getIndexType(e,t){let i=2;const s=this.Mn(t);return $.forEach(s,(o=>this.xn(e,o).next((l=>{l?i!==0&&l.fields.length<(function(d){let f=new ot(Et.comparator),g=!1;for(const v of d.filters)for(const _ of v.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?g=!0:f=f.add(_.field));for(const v of d.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(g?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&i===2?1:i))}Qn(e,t){const i=new qc;for(const s of lo(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const l=i.Pn(s.kind);mo.Kt.Dt(o,l)}return i.un()}Ln(e){const t=new qc;return mo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new qc;return mo.Kt.Dt(Ih(this.databaseId,t),i.Pn((function(o){const l=lo(o);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let s=[];s.push(new qc);let o=0;for(const l of lo(e)){const h=i[o++];for(const d of s)if(this.Un(t,l.fieldPath)&&Rh(h))s=this.Kn(s,l,h);else{const f=d.Pn(l.kind);mo.Kt.Dt(h,f)}}return this.Wn(s)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const s=[...e],o=[];for(const l of i.arrayValue.values||[])for(const h of s){const d=new qc;d.seed(h.un()),mo.Kt.Dt(l,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((i=>i instanceof $e&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Hc(e),s=Pl(e);return(t?i.J(J0,IDBKeyRange.bound(t,t)):i.J()).next((o=>{const l=[];return $.forEach(o,(h=>s.get([h.indexId,this.uid]).next((d=>{l.push((function(g,v){const _=v?new bh(v.sequenceNumber,new ni(Vo(v.readTime),new pe(fr(v.documentKey)),v.largestBatchId)):bh.empty(),S=g.fields.map((([R,D])=>new rm(Et.fromServerFormat(R),D)));return new Dm(g.indexId,g.collectionGroup,S,_)})(h,d))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Ve(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=Hc(e),o=Pl(e);return this.Gn(e).next((l=>s.J(J0,IDBKeyRange.bound(t,t)).next((h=>$.forEach(h,(d=>o.put(jS(d.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return $.forEach(t,((s,o)=>{const l=i.get(s.collectionGroup);return(l?$.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(i.set(s.collectionGroup,h),$.forEach(h,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?$.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,i,s){return Ml(e).put(s.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,s){return Ml(e).delete(s.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const s=Ml(e);let o=new ot(Hs);return s.ee({index:g2,range:IDBKeyRange.only([i.indexId,this.uid,dm(this.$n(i,t))])},((l,h)=>{o=o.add(new po(i.indexId,t,qS(h.arrayValue),qS(h.directionalValue)))})).next((()=>o))}jn(e,t){let i=new ot(Hs);const s=this.Qn(t,e);if(s==null)return i;const o=W0(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Rh(l))for(const h of l.arrayValue.values||[])i=i.add(new po(t.indexId,e.key,this.Ln(h),s))}else i=i.add(new po(t.indexId,e.key,Hf,s));return i}Jn(e,t,i,s,o){ue($S,"Updating index entries for document '%s'",t.key);const l=[];return(function(d,f,g,v,_){const S=d.getIterator(),R=f.getIterator();let D=kl(S),k=kl(R);for(;D||k;){let z=!1,U=!1;if(D&&k){const P=g(D,k);P<0?U=!0:P>0&&(z=!0)}else D!=null?U=!0:z=!0;z?(v(k),k=kl(R)):U?(_(D),D=kl(S)):(D=kl(S),k=kl(R))}})(s,o,Hs,(h=>{l.push(this.Hn(e,t,i,h))}),(h=>{l.push(this.Yn(e,t,i,h))})),$.waitFor(l)}Gn(e){let t=1;return Pl(e).ee({index:p2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,h)=>Hs(l,h))).filter(((l,h,d)=>!h||Hs(l,d[h-1])!==0));const s=[];s.push(e);for(const l of i){const h=Hs(l,e),d=Hs(l,t);if(h===0)s[0]=e.An();else if(h>0&&d<0)s.push(l),s.push(l.An());else if(d>0)break}s.push(t);const o=[];for(let l=0;l<s.length;l+=2){if(this.Zn(s[l],s[l+1]))return[];const h=s[l].Vn(this.uid,Hf,pe.empty()),d=s[l+1].Vn(this.uid,Hf,pe.empty());o.push(IDBKeyRange.bound(h,d))}return o}Zn(e,t){return Hs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(QS)}getMinOffset(e,t){return $.mapArray(this.Mn(t),(i=>this.xn(e,i).next((s=>s||ye(44426))))).next(QS)}}function KS(n){return tn(n,Sh)}function Ml(n){return tn(n,rh)}function Hc(n){return tn(n,f_)}function Pl(n){return tn(n,ih)}function QS(n){Ee(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;c_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ni(e.readTime,e.documentKey,t)}const YS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bR=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function TR(n,e,t){const i=n.store(Li),s=n.store(ru),o=[],l=IDBKeyRange.only(t.batchId);let h=0;const d=i.ee({range:l},((g,v,_)=>(h++,_.delete())));o.push(d.next((()=>{Ee(h===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const v=d2(e,g.key.path,t.batchId);o.push(s.delete(v)),f.push(g.key)}return $.waitFor(o).next((()=>f))}function Fm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ye(14731);e=n.noDocument}return JSON.stringify(e).length}_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(bR,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);class Ap{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,t,i,s){Ee(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Ap(o,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gs(e).ee({index:go,range:i},((s,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const o=Bl(e),l=Gs(e);return l.add({}).next((h=>{Ee(typeof h=="number",49019);const d=new E_(h,t,i,s),f=(function(S,R,D){const k=D.baseMutations.map((U=>zm(S.yt,U))),z=D.mutations.map((U=>zm(S.yt,U)));return{userId:R,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:k,mutations:z}})(this.serializer,this.userId,d),g=[];let v=new ot(((_,S)=>Ve(_.canonicalString(),S.canonicalString())));for(const _ of s){const S=d2(this.userId,_.key.path,h);v=v.add(_.key.path.popLast()),g.push(l.put(f)),g.push(o.put(S,G3))}return v.forEach((_=>{g.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[h]=d.keys()})),$.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return Gs(e).get(t).next((i=>i?(Ee(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),fo(this.serializer,i)):null))}er(e,t){return this.Xn[t]?$.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Gs(e).ee({index:go,range:s},((l,h,d)=>{h.userId===this.userId&&(Ee(h.batchId>=i,47524,{tr:i}),o=fo(this.serializer,h)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=_o;return Gs(e).ee({index:go,range:t,reverse:!0},((s,o,l)=>{i=o.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,_o],[this.userId,Number.POSITIVE_INFINITY]);return Gs(e).J(go,t).next((i=>i.map((s=>fo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=sm(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=[];return Bl(e).ee({range:s},((l,h,d)=>{const[f,g,v]=l,_=fr(g);if(f===this.userId&&t.path.isEqual(_))return Gs(e).get(v).next((S=>{if(!S)throw ye(61480,{nr:l,batchId:v});Ee(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:v}),o.push(fo(this.serializer,S))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(Ve);const s=[];return t.forEach((o=>{const l=sm(this.userId,o.path),h=IDBKeyRange.lowerBound(l),d=Bl(e).ee({range:h},((f,g,v)=>{const[_,S,R]=f,D=fr(S);_===this.userId&&o.path.isEqual(D)?i=i.add(R):v.done()}));s.push(d)})),$.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,o=sm(this.userId,i),l=IDBKeyRange.lowerBound(o);let h=new ot(Ve);return Bl(e).ee({range:l},((d,f,g)=>{const[v,_,S]=d,R=fr(_);v===this.userId&&i.isPrefixOf(R)?R.length===s&&(h=h.add(S)):g.done()})).next((()=>this.rr(e,h)))}rr(e,t){const i=[],s=[];return t.forEach((o=>{s.push(Gs(e).get(o).next((l=>{if(l===null)throw ye(35274,{batchId:o});Ee(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),i.push(fo(this.serializer,l))})))})),$.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return TR(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),$.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return Bl(e).ee({range:i},((o,l,h)=>{if(o[0]===this.userId){const d=fr(o[1]);s.push(d)}else h.done()})).next((()=>{Ee(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return ER(e,this.userId,t)}_r(e){return wR(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:_o,lastStreamToken:""}))}}function ER(n,e,t){const i=sm(e,t.path),s=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return Bl(n).ee({range:o,X:!0},((h,d,f)=>{const[g,v,_]=h;g===e&&v===s&&(l=!0),f.done()})).next((()=>l))}function Gs(n){return tn(n,Li)}function Bl(n){return tn(n,ru)}function wR(n){return tn(n,Eh)}class Mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mo(0)}static cr(){return new Mo(-1)}}class p6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Mo(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ae.fromTimestamp(new Xe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ol(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(Ee(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let s=0;const o=[];return Ol(e).ee(((l,h)=>{const d=Wc(h);d.sequenceNumber<=t&&i.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>$.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Ol(e).ee(((i,s)=>{const o=Wc(s);t(o)}))}lr(e){return XS(e).get(Vm).next((t=>(Ee(t!==null,2888),t)))}hr(e,t){return XS(e).put(Vm,t)}Pr(e,t){return Ol(e).put(gR(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=No(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Ol(e).ee({range:s,index:m2},((l,h,d)=>{const f=Wc(h);Yh(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,i){const s=[],o=Ws(e);return t.forEach((l=>{const h=Sn(l.path);s.push(o.put({targetId:i,path:h})),s.push(this.referenceDelegate.addReference(e,i,l))})),$.waitFor(s)}removeMatchingKeys(e,t,i){const s=Ws(e);return $.forEach(t,(o=>{const l=Sn(o.path);return $.waitFor([s.delete([i,l]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,t){const i=Ws(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ws(e);let o=Ue();return s.ee({range:i,X:!0},((l,h,d)=>{const f=fr(l[1]),g=new pe(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const i=Sn(t.path),s=IDBKeyRange.bound([i],[i2(i)],!1,!0);let o=0;return Ws(e).ee({index:d_,X:!0,range:s},(([l,h],d,f)=>{l!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Ol(e).get(t).next((i=>i?Wc(i):null))}}function Ol(n){return tn(n,su)}function XS(n){return tn(n,bo)}function Ws(n){return tn(n,au)}const WS="LruGarbageCollector",SR=1048576;function ZS([n,e],[t,i]){const s=Ve(n,t);return s===0?Ve(e,i):s}class g6{constructor(e){this.Ir=e,this.buffer=new ot(ZS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ZS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(WS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ta(t)?ue(WS,"Ignoring IndexedDB error during garbage collection: ",t):await ba(t)}await this.Vr(3e5)}))}}class y6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Un.ce);const i=new g6(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(YS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,o,l,h,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(i=v,h=Date.now(),this.removeTargets(e,i,t)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Ll()<=Ge.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function AR(n,e){return new y6(n,e)}class v6{constructor(e,t){this.db=e,this.garbageCollector=AR(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,s)=>t(s)))}addReference(e,t,i){return Gf(e,i)}removeReference(e,t,i){return Gf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Gf(e,t)}br(e,t){return(function(s,o){let l=!1;return wR(s).te((h=>ER(s,h,o).next((d=>(d&&(l=!0),$.resolve(!d)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((l,h)=>{if(h<=t){const d=this.br(e,l).next((f=>{if(!f)return o++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Ae.min()),Ws(e).delete((function(v){return[0,Sn(v.path)]})(l)))))}));s.push(d)}})).next((()=>$.waitFor(s))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Gf(e,t)}Sr(e,t){const i=Ws(e);let s,o=Un.ce;return i.ee({index:d_},(([l,h],{path:d,sequenceNumber:f})=>{l===0?(o!==Un.ce&&t(new pe(fr(s)),o),o=f,s=d):o=Un.ce})).next((()=>{o!==Un.ce&&t(new pe(fr(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gf(n,e){return Ws(n).put((function(i,s){return{targetId:0,path:Sn(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class IR{constructor(){this.changes=new ls((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?$.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return no(e).put(i)}removeEntry(e,t,i){return no(e).delete((function(o,l){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Um(l),h[h.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Ct.newInvalidDocument(t);return no(e).ee({index:am,range:IDBKeyRange.only(Gc(t))},((s,o)=>{i=this.Cr(t,o)})).next((()=>i))}vr(e,t){let i={size:0,document:Ct.newInvalidDocument(t)};return no(e).ee({index:am,range:IDBKeyRange.only(Gc(t))},((s,o)=>{i={document:this.Cr(t,o),size:Fm(o)}})).next((()=>i))}getEntries(e,t){let i=ei();return this.Fr(e,t,((s,o)=>{const l=this.Cr(s,o);i=i.insert(s,l)})).next((()=>i))}Mr(e,t){let i=ei(),s=new mt(pe.comparator);return this.Fr(e,t,((o,l)=>{const h=this.Cr(o,l);i=i.insert(o,h),s=s.insert(o,Fm(l))})).next((()=>({documents:i,Or:s})))}Fr(e,t,i){if(t.isEmpty())return $.resolve();let s=new ot(tx);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Gc(s.first()),Gc(s.last())),l=s.getIterator();let h=l.getNext();return no(e).ee({index:am,range:o},((d,f,g)=>{const v=pe.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;h&&tx(h,v)<0;)i(h,null),h=l.getNext();h&&h.isEqual(v)&&(i(h,f),h=l.hasNext()?l.getNext():null),h?g.j(Gc(h)):g.done()})).next((()=>{for(;h;)i(h,null),h=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,o){const l=t.path,h=[l.popLast().toArray(),l.lastSegment(),Um(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return no(e).J(IDBKeyRange.bound(h,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=ei();for(const v of f){const _=this.Cr(pe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);_.isFoundDocument()&&(Xh(t,_)||s.has(_.key))&&(g=g.insert(_.key,_))}return g}))}getAllFromCollectionGroup(e,t,i,s){let o=ei();const l=ex(t,i),h=ex(t,ni.max());return no(e).ee({index:f2,range:IDBKeyRange.bound(l,h,!0)},((d,f,g)=>{const v=this.Cr(pe.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new b6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return JS(e).get(Z0).next((t=>(Ee(!!t,20021),t)))}Dr(e,t){return JS(e).put(Z0,t)}Cr(e,t){if(t){const i=s6(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ae.min())))return i}return Ct.newInvalidDocument(e)}}function RR(n){return new _6(n)}class b6 extends IR{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ls((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new ot(((o,l)=>Ve(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const h=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,h.readTime)),l.isValidDocument()){const d=OS(this.Nr.serializer,l);s=s.add(o.path.popLast());const f=Fm(d);i+=f-h.size,t.push(this.Nr.addEntry(e,o,d))}else if(i-=h.size,this.trackRemovals){const d=OS(this.Nr.serializer,l.convertToNoDocument(Ae.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,i)),$.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:s})=>(s.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:i.get(o).readTime})})),i)))}}function JS(n){return tn(n,wh)}function no(n){return tn(n,km)}function Gc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ex(n,e){const t=e.documentKey.path.toArray();return[n,Um(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tx(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(s=Ve(t[o],i[o]),s)return s;return s=Ve(t.length,i.length),s||(s=Ve(t[t.length-2],i[i.length-2]),s||Ve(t[t.length-1],i[i.length-1]))}class T6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CR{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&lh(i.mutation,s,Bn.empty(),Xe.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ue()){const s=mr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((o=>{let l=Yc();return o.forEach(((h,d)=>{l=l.insert(h,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=mr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ue())))}populateOverlays(e,t,i){const s=[];return i.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,i,s){let o=ei();const l=oh(),h=(function(){return oh()})();return t.forEach(((d,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof us)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),lh(g.mutation,f,g.mutation.getFieldMask(),Xe.now())):l.set(f.key,Bn.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>l.set(f,g))),t.forEach(((f,g)=>h.set(f,new T6(g,l.get(f)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=oh();let s=new mt(((l,h)=>l-h)),o=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=i.get(d)||Bn.empty();g=h.applyToLocalView(f,g),i.set(d,g);const v=(s.get(h.batchId)||Ue()).add(d);s=s.insert(h.batchId,v)}))})).next((()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),f=d.key,g=d.value,v=$2();g.forEach((_=>{if(!o.has(_)){const S=Z2(t.get(_),i.get(_));S!==null&&v.set(_,S),o=o.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return $.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(l){return pe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):U2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):$.resolve(mr());let h=iu,d=o;return l.next((f=>$.forEach(f,((g,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(g)?$.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{d=d.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ue()))).next((g=>({batchId:h,changes:G2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((i=>{let s=Yc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const o=t.collectionGroup;let l=Yc();return this.indexManager.getCollectionParents(e,o).next((h=>$.forEach(h,(d=>{const f=(function(v,_){return new Au(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((g=>{g.forEach(((v,_)=>{l=l.insert(v,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s)))).next((l=>{o.forEach(((d,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,Ct.newInvalidDocument(g)))}));let h=Yc();return l.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&lh(g.mutation,f,Bn.empty(),Xe.now()),Xh(t,f)&&(h=h.insert(d,f))})),h}))}}class E6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:yR(s.bundledQuery),readTime:Nn(s.readTime)}})(t)),$.resolve()}}class w6{constructor(){this.overlays=new mt(pe.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const i=mr();return $.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,o)=>{this.St(e,t,o)})),$.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),$.resolve()}getOverlaysForCollection(e,t,i){const s=mr(),o=t.length+1,l=new pe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new mt(((f,g)=>f-g));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=mr(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const h=mr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>h.set(f,g))),!(h.size()>=s)););return $.resolve(h)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new S_(t,i));let o=this.qr.get(t);o===void 0&&(o=Ue(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}class S6{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}class C_{constructor(){this.Qr=new ot(an.$r),this.Ur=new ot(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new an(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new an(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new pe(new tt([])),i=new an(t,e),s=new an(t,e+1),o=[];return this.Ur.forEachInRange([i,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new pe(new tt([])),i=new an(t,e),s=new an(t,e+1);let o=Ue();return this.Ur.forEachInRange([i,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new an(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class an{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return pe.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||pe.comparator(e.key,t.key)}}class x6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ot(an.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new E_(o,t,i,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new an(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return $.resolve(l)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),o=s<0?0:s;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?_o:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new an(t,0),s=new an(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(l=>{const h=this.Xr(l.Yr);o.push(h)})),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(Ve);return t.forEach((s=>{const o=new an(s,0),l=new an(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(h=>{i=i.add(h.Yr)}))})),$.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let o=i;pe.isDocumentKey(o)||(o=o.child(""));const l=new an(new pe(o),0);let h=new ot(Ve);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(h=h.add(d.Yr)),!0)}),l),$.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ee(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return $.forEach(t.mutations,(s=>{const o=new an(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new an(t,0),s=this.Zr.firstAfterOrEqual(i);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class A6{constructor(e){this.ri=e,this.docs=(function(){return new mt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return $.resolve(i?i.document.mutableCopy():Ct.newInvalidDocument(t))}getEntries(e,t){let i=ei();return t.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ct.newInvalidDocument(s))})),$.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=ei();const l=t.path,h=new pe(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||c_(o2(g),i)<=0||(s.has(g.key)||Xh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,i,s){ye(9500)}ii(e,t){return $.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new I6(this)}getSize(e){return $.resolve(this.size)}}class I6 extends IR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class R6{constructor(e){this.persistence=e,this.si=new ls((t=>No(t)),Yh),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new C_,this.targetCount=0,this.ai=Mo.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,i){let s=0;const o=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),$.waitFor(o).next((()=>s))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return $.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),$.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return $.resolve(i)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}}class D_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Un(0),this.li=!1,this.li=!0,this.hi=new S6,this.referenceDelegate=e(this),this.Pi=new R6(this),this.indexManager=new f6,this.remoteDocumentCache=(function(s){return new A6(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new pR(t),this.Ii=new E6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new w6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new x6(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const s=new C6(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return $.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class C6 extends u2{constructor(e){super(),this.currentSequenceNumber=e}}class Ip{constructor(e){this.persistence=e,this.Ri=new C_,this.Vi=null}static mi(e){return new Ip(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),$.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(i=>{const s=pe.fromPath(i);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class qm{constructor(e,t){this.persistence=e,this.pi=new ls((i=>Sn(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=AR(this,t)}static mi(e,t){return new qm(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return $.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?$.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((h=>{h||(i++,o.removeEntry(l,Ae.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lm(e.data.value)),t}br(e,t,i){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return $.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class D6{constructor(e){this.serializer=e}k(e,t,i,s){const o=new fp("createOrUpgrade",t);i<1&&s>=1&&((function(d){d.createObjectStore(Qh)})(e),(function(d){d.createObjectStore(Eh,{keyPath:H3}),d.createObjectStore(Li,{keyPath:dS,autoIncrement:!0}).createIndex(go,fS,{unique:!0}),d.createObjectStore(ru)})(e),nx(e),(function(d){d.createObjectStore(uo)})(e));let l=$.resolve();return i<3&&s>=3&&(i!==0&&((function(d){d.deleteObjectStore(au),d.deleteObjectStore(su),d.deleteObjectStore(bo)})(e),nx(e)),l=l.next((()=>(function(d){const f=d.store(bo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ae.min().toTimestamp(),targetCount:0};return f.put(Vm,g)})(o)))),i<4&&s>=4&&(i!==0&&(l=l.next((()=>(function(d,f){return f.store(Li).J().next((v=>{d.deleteObjectStore(Li),d.createObjectStore(Li,{keyPath:dS,autoIncrement:!0}).createIndex(go,fS,{unique:!0});const _=f.store(Li),S=v.map((R=>_.put(R)));return $.waitFor(S)}))})(e,o)))),l=l.next((()=>{(function(d){d.createObjectStore(ou,{keyPath:J3})})(e)}))),i<5&&s>=5&&(l=l.next((()=>this.yi(o)))),i<6&&s>=6&&(l=l.next((()=>((function(d){d.createObjectStore(wh)})(e),this.wi(o))))),i<7&&s>=7&&(l=l.next((()=>this.Si(o)))),i<8&&s>=8&&(l=l.next((()=>this.bi(e,o)))),i<9&&s>=9&&(l=l.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(l=l.next((()=>this.Di(o)))),i<11&&s>=11&&(l=l.next((()=>{(function(d){d.createObjectStore(pp,{keyPath:e5})})(e),(function(d){d.createObjectStore(gp,{keyPath:t5})})(e)}))),i<12&&s>=12&&(l=l.next((()=>{(function(d){const f=d.createObjectStore(yp,{keyPath:l5});f.createIndex(ev,u5,{unique:!1}),f.createIndex(y2,c5,{unique:!1})})(e)}))),i<13&&s>=13&&(l=l.next((()=>(function(d){const f=d.createObjectStore(km,{keyPath:$3});f.createIndex(am,K3),f.createIndex(f2,Q3)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(uo)))),i<14&&s>=14&&(l=l.next((()=>this.Fi(e,o)))),i<15&&s>=15&&(l=l.next((()=>(function(d){d.createObjectStore(f_,{keyPath:n5,autoIncrement:!0}).createIndex(J0,i5,{unique:!1}),d.createObjectStore(ih,{keyPath:r5}).createIndex(p2,s5,{unique:!1}),d.createObjectStore(rh,{keyPath:a5}).createIndex(g2,o5,{unique:!1})})(e)))),i<16&&s>=16&&(l=l.next((()=>{t.objectStore(ih).clear()})).next((()=>{t.objectStore(rh).clear()}))),i<17&&s>=17&&(l=l.next((()=>{(function(d){d.createObjectStore(m_,{keyPath:h5})})(e)}))),i<18&&s>=18&&qI()&&(l=l.next((()=>{t.objectStore(ih).clear()})).next((()=>{t.objectStore(rh).clear()}))),l}wi(e){let t=0;return e.store(uo).ee(((i,s)=>{t+=Fm(s)})).next((()=>{const i={byteSize:t};return e.store(wh).put(Z0,i)}))}yi(e){const t=e.store(Eh),i=e.store(Li);return t.J().next((s=>$.forEach(s,(o=>{const l=IDBKeyRange.bound([o.userId,_o],[o.userId,o.lastAcknowledgedBatchId]);return i.J(go,l).next((h=>$.forEach(h,(d=>{Ee(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=fo(this.serializer,d);return TR(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(au),i=e.store(uo);return e.store(bo).get(Vm).next((s=>{const o=[];return i.ee(((l,h)=>{const d=new tt(l),f=(function(v){return[0,Sn(v)]})(d);o.push(t.get(f).next((g=>g?$.resolve():(v=>t.put({targetId:0,path:Sn(v),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>$.waitFor(o)))}))}bi(e,t){e.createObjectStore(Sh,{keyPath:Z3});const i=t.store(Sh),s=new R_,o=l=>{if(s.add(l)){const h=l.lastSegment(),d=l.popLast();return i.put({collectionId:h,parent:Sn(d)})}};return t.store(uo).ee({X:!0},((l,h)=>{const d=new tt(l);return o(d.popLast())})).next((()=>t.store(ru).ee({X:!0},(([l,h,d],f)=>{const g=fr(h);return o(g.popLast())}))))}Di(e){const t=e.store(su);return t.ee(((i,s)=>{const o=Wc(s),l=gR(this.serializer,o);return t.put(l)}))}Ci(e,t){const i=t.store(uo),s=[];return i.ee(((o,l)=>{const h=t.store(km),d=(function(v){return v.document?new pe(tt.fromString(v.document.name).popFirst(5)):v.noDocument?pe.fromSegments(v.noDocument.path):v.unknownDocument?pe.fromSegments(v.unknownDocument.path):ye(36783)})(l).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(h.put(f))})).next((()=>$.waitFor(s)))}Fi(e,t){const i=t.store(Li),s=RR(this.serializer),o=new D_(Ip.mi,this.serializer.yt);return i.J().next((l=>{const h=new Map;return l.forEach((d=>{let f=h.get(d.userId)??Ue();fo(this.serializer,d).keys().forEach((g=>f=f.add(g))),h.set(d.userId,f)})),$.forEach(h,((d,f)=>{const g=new vn(f),v=xp.wt(this.serializer,g),_=o.getIndexManager(g),S=Ap.wt(g,this.serializer,_,o.referenceDelegate);return new CR(s,S,v,_).recalculateAndSaveOverlaysForDocumentKeys(new tv(t,Un.ce),d).next()}))}))}}function nx(n){n.createObjectStore(au,{keyPath:X3}).createIndex(d_,W3,{unique:!0}),n.createObjectStore(su,{keyPath:"targetId"}).createIndex(m2,Y3,{unique:!0}),n.createObjectStore(bo)}const $s="IndexedDbPersistence",u0=18e5,c0=5e3,h0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",N6="main";class N_{constructor(e,t,i,s,o,l,h,d,f,g,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=o,this.window=l,this.document=h,this.xi=f,this.Oi=g,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!N_.v())throw new ce(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new v6(this,s),this.$i=t+N6,this.serializer=new pR(d),this.Ui=new la(this.$i,this.Ni,new D6(this.serializer)),this.hi=new o6,this.Pi=new p6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=RR(this.serializer),this.Ii=new a6,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Pt($s,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(re.FAILED_PRECONDITION,h0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Un(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>$f(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ta(e))return ue($s,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue($s,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return $c(e).get(Nl).next((t=>$.resolve(this.es(t))))}ts(e){return $f(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,u0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=tn(t,ou);return i.J().next((s=>{const o=this.ss(s,u0),l=s.filter((h=>o.indexOf(h)===-1));return $.forEach(l,(h=>i.delete(h.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?$.resolve(!0):$c(e).get(Nl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,c0)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ce(re.FAILED_PRECONDITION,h0);return!1}}return!(!this.networkEnabled||!this.inForeground)||$f(e).J().next((i=>this.ss(i,c0).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||l&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ue($s,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Qh,ou],(e=>{const t=new tv(e,Un.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>$f(e).J().next((t=>this.ss(t,u0).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Ap.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new m6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return xp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue($s,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?m5:d===17?T2:d===16?f5:d===15?p_:d===14?b2:d===13?_2:d===12?d5:d===11?v2:void ye(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,s,o,(h=>(l=new tv(h,this.ci?this.ci.next():Un.ce),t==="readwrite-primary"?this.Hi(l).next((d=>!!d||this.Yi(l))).next((d=>{if(!d)throw Pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ce(re.FAILED_PRECONDITION,l2);return i(l)})).next((d=>this.Xi(l).next((()=>d)))):this.Is(l).next((()=>i(l)))))).then((h=>(l.raiseOnCommittedEvent(),h)))}Is(e){return $c(e).get(Nl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,c0)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(re.FAILED_PRECONDITION,h0)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $c(e).put(Nl,t)}static v(){return la.v()}Zi(e){const t=$c(e);return t.get(Nl).next((i=>this.es(i)?(ue($s,"Releasing primary lease."),t.delete(Nl)):$.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Pt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;FI()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ue($s,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Pt($s,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Pt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $c(n){return tn(n,Qh)}function $f(n){return tn(n,ou)}function DR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class k_{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=Ue(),s=Ue();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new k_(e,t.fromCache,i,s)}}class k6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class NR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return FI()?8:c2(en())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new k6;return this.Ss(e,t,l).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>o.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Ll()<=Ge.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Ll()<=Ge.DEBUG&&ue("QueryEngine","Query:",jl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Ll()<=Ge.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):$.resolve())}ys(e,t){if(AS(t))return $.resolve(null);let i=ti(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Lm(t,null,"F"),i=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=Ue(...o);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.Ds(t,h);return this.Cs(t,f,l,d.readTime)?this.ys(e,Lm(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,i,s){return AS(t)||s.isEqual(Ae.min())?$.resolve(null):this.ps.getDocuments(e,i).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,i,s)?$.resolve(null):(Ll()<=Ge.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jl(t)),this.vs(e,l,t,a2(s,iu)).next((h=>h)))}))}Ds(e,t){let i=new ot(q2(e));return t.forEach(((s,o)=>{Xh(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,i){return Ll()<=Ge.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",jl(t)),this.ps.getDocumentsMatchingQuery(e,t,ni.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}const V_="LocalStore",V6=3e8;class M6{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new mt(Ve),this.xs=new ls((o=>No(o)),Yh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function kR(n,e,t,i){return new M6(n,e,t,i)}async function VR(n,e){const t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],h=[];let d=Ue();for(const f of s){l.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){h.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(i,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:h})))}))}))}function P6(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,d,f,g){const v=f.batch,_=v.keys();let S=$.resolve();return _.forEach((R=>{S=S.next((()=>g.getEntry(d,R))).next((D=>{const k=f.docVersions.get(R);Ee(k!==null,48541),D.version.compareTo(k)<0&&(v.applyToRemoteDocument(D,f),D.isValidDocument()&&(D.setReadTime(f.commitVersion),g.addEntry(D)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(d,v)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let d=Ue();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(d=d.add(h.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function MR(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function O6(n,e){const t=_e(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((g,v)=>{const _=s.get(v);if(!_)return;h.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,v))));let S=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(Lt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),s=s.insert(v,S),(function(D,k,z){return D.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=V6?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(_,S,g)&&h.push(t.Pi.updateTargetData(o,S))}));let d=ei(),f=Ue();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),h.push(L6(o,l,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!i.isEqual(Ae.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));h.push(g)}return $.waitFor(h).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function L6(n,e,t){let i=Ue(),s=Ue();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=ei();return t.forEach(((h,d)=>{const f=o.get(h);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Ae.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ue(V_,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function j6(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=_o),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Hm(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((o=>o?(s=o,$.resolve(s)):t.Pi.allocateTargetId(i).next((l=>(s=new Qr(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function pu(n,e,t){const i=_e(n),s=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Ta(l))throw l;ue(V_,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function pv(n,e,t){const i=_e(n);let s=Ae.min(),o=Ue();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,g){const v=_e(d),_=v.xs.get(g);return _!==void 0?$.resolve(v.Ms.get(_)):v.Pi.getTargetData(f,g)})(i,l,ti(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next((d=>{o=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?s:Ae.min(),t?o:Ue()))).next((h=>(LR(i,F2(e),h),{documents:h,Qs:o})))))}function PR(n,e){const t=_e(n),i=_e(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,e).next((l=>l?l.target:null))))}function OR(n,e){const t=_e(n),i=t.Os.get(e)||Ae.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,a2(i,iu),Number.MAX_SAFE_INTEGER))).then((s=>(LR(t,e,s),s)))}function LR(n,e,t){let i=n.Os.get(e)||Ae.min();t.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}const jR="firestore_clients";function ix(n,e){return`${jR}_${n}_${e}`}const zR="firestore_mutations";function rx(n,e,t){let i=`${zR}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const UR="firestore_targets";function d0(n,e){return`${UR}_${n}_${e}`}const cr="SharedClientState";class Gm{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Ws(e,t,i){const s=JSON.parse(i);let o,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(o=new ce(s.error.code,s.error.message))),l?new Gm(e,t,s.state,o):(Pt(cr,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ce(i.error.code,i.error.message))),o?new uh(e,i.state,s):(Pt(cr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $m{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=b_();for(let l=0;s&&l<i.activeTargetIds.length;++l)s=h2(i.activeTargetIds[l]),o=o.add(i.activeTargetIds[l]);return s?new $m(e,o):(Pt(cr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class M_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new M_(t.clientId,t.onlineState):(Pt(cr,`Failed to parse online state: ${e}`),null)}}class gv{constructor(){this.activeTargetIds=b_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f0{constructor(e,t,i,s,o){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new mt(Ve),this.started=!1,this.Xs=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=ix(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new gv),this.ro=new RegExp(`^${jR}_${l}_([^_]*)$`),this.io=new RegExp(`^${zR}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${UR}_${l}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(ix(this.persistenceKey,i));if(s){const o=$m.Ws(i,s);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(d0(this.persistenceKey,e));if(s){const o=uh.Ws(e,s);o&&(i=o.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(d0(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue(cr,"READ",e,t),t}setItem(e,t){ue(cr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue(cr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ue(cr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(o){let l=Un.ce;if(o!=null)try{const h=JSON.parse(o);Ee(typeof h=="number",30636,{So:o}),l=h}catch(h){Pt(cr,"Failed to read sequence number from WebStorage",h)}return l})(t.newValue);i!==Un.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const s=new Gm(this.currentUser,e,t,i),o=rx(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Gs())}Po(e){const t=rx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const s=d0(this.persistenceKey,e),o=new uh(e,t,i);this.setItem(s,o.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return $m.Ws(i,t)}fo(e,t){const i=this.io.exec(e),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Gm.Ws(new vn(o),s,t)}yo(e,t){const i=this.so.exec(e),s=Number(i[1]);return uh.Ws(s,t)}uo(e){return M_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ue(cr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),o=this.lo(i),l=[],h=[];return o.forEach((d=>{s.has(d)||l.push(d)})),s.forEach((d=>{o.has(d)||h.push(d)})),this.syncEngine.Fo(l,h).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=b_();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class BR{constructor(){this.Mo=new gv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class z6{Oo(e){}shutdown(){}}const sx="ConnectivityMonitor";class ax{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(sx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(sx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Kf=null;function yv(){return Kf===null?Kf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kf++,"0x"+Kf.toString(16)}const m0="RestConnection",U6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class B6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Mm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,o){const l=yv(),h=this.zo(e,t.toUriEncodedString());ue(m0,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(h),g=wu(f);return this.Jo(e,h,d,i,g).then((v=>(ue(m0,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw _h(m0,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",i),v}))}Ho(e,t,i,s,o,l){return this.Go(e,t,i,s,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const i=U6[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class F6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const yn="WebChannelConnection";class q6 extends B6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,o){const l=yv();return new Promise(((h,d)=>{const f=new WI;f.setWithCredentials(!0),f.listenOnce(ZI.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case im.NO_ERROR:const v=f.getResponseJson();ue(yn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case im.TIMEOUT:ue(yn,`RPC '${e}' ${l} timed out`),d(new ce(re.DEADLINE_EXCEEDED,"Request time out"));break;case im.HTTP_ERROR:const _=f.getStatus();if(ue(yn,`RPC '${e}' ${l} failed with status:`,_,"response text:",f.getResponseText()),_>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const D=(function(z){const U=z.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(U)>=0?U:re.UNKNOWN})(R.status);d(new ce(D,R.message))}else d(new ce(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ce(re.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ue(yn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);ue(yn,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",g,i,15)}))}T_(e,t,i){const s=yv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=t2(),h=e2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=o.join("");ue(yn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=l.createWebChannel(g,d);this.I_(v);let _=!1,S=!1;const R=new F6({Yo:k=>{S?ue(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(_||(ue(yn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),ue(yn,`RPC '${e}' stream ${s} sending:`,k),v.send(k))},Zo:()=>v.close()}),D=(k,z,U)=>{k.listen(z,(P=>{try{U(P)}catch(W){setTimeout((()=>{throw W}),0)}}))};return D(v,Qc.EventType.OPEN,(()=>{S||(ue(yn,`RPC '${e}' stream ${s} transport opened.`),R.o_())})),D(v,Qc.EventType.CLOSE,(()=>{S||(S=!0,ue(yn,`RPC '${e}' stream ${s} transport closed`),R.a_(),this.E_(v))})),D(v,Qc.EventType.ERROR,(k=>{S||(S=!0,_h(yn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),R.a_(new ce(re.UNAVAILABLE,"The operation could not be completed")))})),D(v,Qc.EventType.MESSAGE,(k=>{if(!S){const z=k.data[0];Ee(!!z,16349);const U=z,P=U?.error||U[0]?.error;if(P){ue(yn,`RPC '${e}' stream ${s} received error:`,P);const W=P.status;let ne=(function(I){const V=Kt[I];if(V!==void 0)return tR(V)})(W),ee=P.message;ne===void 0&&(ne=re.INTERNAL,ee="Unknown error status: "+W+" with message "+P.message),S=!0,R.a_(new ce(ne,ee)),v.close()}else ue(yn,`RPC '${e}' stream ${s} received:`,z),R.u_(z)}})),D(h,JI.STAT_EVENT,(k=>{k.stat===Y0.PROXY?ue(yn,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Y0.NOPROXY&&ue(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function FR(){return typeof window<"u"?window:null}function fm(){return typeof document<"u"?document:null}function Rp(n){return new Y5(n,!0)}class qR{constructor(e,t,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ox="PersistentStream";class HR{constructor(e,t,i,s,o,l,h,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qR(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Pt(t.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new ce(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(ox,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(ox,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class H6 extends HR{constructor(e,t,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Z5(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Ae.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ae.min():l.readTime?Nn(l.readTime):Ae.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=cv(this.serializer),t.addTarget=(function(o,l){let h;const d=l.target;if(h=Pm(d)?{documents:uR(o,d)}:{query:cR(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=rR(o,l.resumeToken);const f=lv(o,l.expectedCount);f!==null&&(h.expectedCount=f)}else if(l.snapshotVersion.compareTo(Ae.min())>0){h.readTime=mu(o,l.snapshotVersion.toTimestamp());const f=lv(o,l.expectedCount);f!==null&&(h.expectedCount=f)}return h})(this.serializer,e);const i=e6(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=cv(this.serializer),t.removeTarget=e,this.q_(t)}}class G6 extends HR{constructor(e,t,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=J5(e.writeResults,e.commitTime),i=Nn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=cv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>zm(this.serializer,i)))};this.q_(t)}}class $6{}class K6 extends $6{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ce(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,uv(t,i),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(re.UNKNOWN,o.toString())}))}Ho(e,t,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,uv(t,i),s,l,h,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(re.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Q6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pt(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Po="RemoteStore";class Y6{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{Uo(this)&&(ue(Po,"Restarting streams for network reachability change."),await(async function(d){const f=_e(d);f.Ea.add(4),await Jh(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Cp(f)})(this))}))})),this.Ra=new Q6(i,s)}}async function Cp(n){if(Uo(n))for(const e of n.da)await e(!0)}async function Jh(n){for(const e of n.da)await e(!1)}function Dp(n,e){const t=_e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),L_(t)?O_(t):Cu(t).O_()&&P_(t,e))}function gu(n,e){const t=_e(n),i=Cu(t);t.Ia.delete(e),i.O_()&&GR(t,e),t.Ia.size===0&&(i.O_()?i.L_():Uo(t)&&t.Ra.set("Unknown"))}function P_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cu(n).Y_(e)}function GR(n,e){n.Va.Ue(e),Cu(n).Z_(e)}function O_(n){n.Va=new G5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Cu(n).start(),n.Ra.ua()}function L_(n){return Uo(n)&&!Cu(n).x_()&&n.Ia.size>0}function Uo(n){return _e(n).Ea.size===0}function $R(n){n.Va=void 0}async function X6(n){n.Ra.set("Online")}async function W6(n){n.Ia.forEach(((e,t)=>{P_(n,e)}))}async function Z6(n,e){$R(n),L_(n)?(n.Ra.ha(e),O_(n)):n.Ra.set("Unknown")}async function J6(n,e,t){if(n.Ra.set("Online"),e instanceof iR&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(i){ue(Po,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Km(n,i)}else if(e instanceof hm?n.Va.Ze(e):e instanceof nR?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ae.min()))try{const i=await MR(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const h=o.Va.Tt(l);return h.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,l))}})),h.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(Lt.EMPTY_BYTE_STRING,g.snapshotVersion)),GR(o,d);const v=new Qr(g.target,d,f,g.sequenceNumber);P_(o,v)})),o.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){ue(Po,"Failed to raise snapshot:",i),await Km(n,i)}}async function Km(n,e,t){if(!Ta(e))throw e;n.Ea.add(1),await Jh(n),n.Ra.set("Offline"),t||(t=()=>MR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(Po,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Cp(n)}))}function KR(n,e){return e().catch((t=>Km(n,t,e)))}async function Ru(n){const e=_e(n),t=fa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_o;for(;e9(e);)try{const s=await j6(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,t9(e,s)}catch(s){await Km(e,s)}QR(e)&&YR(e)}function e9(n){return Uo(n)&&n.Ta.length<10}function t9(n,e){n.Ta.push(e);const t=fa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function QR(n){return Uo(n)&&!fa(n).x_()&&n.Ta.length>0}function YR(n){fa(n).start()}async function n9(n){fa(n).ra()}async function i9(n){const e=fa(n);for(const t of n.Ta)e.ea(t.mutations)}async function r9(n,e,t){const i=n.Ta.shift(),s=w_.from(i,e,t);await KR(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Ru(n)}async function s9(n,e){e&&fa(n).X_&&await(async function(i,s){if((function(l){return F5(l)&&l!==re.ABORTED})(s.code)){const o=i.Ta.shift();fa(i).B_(),await KR(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Ru(i)}})(n,e),QR(n)&&YR(n)}async function lx(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),ue(Po,"RemoteStore received new credentials");const i=Uo(t);t.Ea.add(3),await Jh(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cp(t)}async function vv(n,e){const t=_e(n);e?(t.Ea.delete(2),await Cp(t)):e||(t.Ea.add(2),await Jh(t),t.Ra.set("Unknown"))}function Cu(n){return n.ma||(n.ma=(function(t,i,s){const o=_e(t);return o.sa(),new H6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:X6.bind(null,n),t_:W6.bind(null,n),r_:Z6.bind(null,n),H_:J6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),L_(n)?O_(n):n.Ra.set("Unknown")):(await n.ma.stop(),$R(n))}))),n.ma}function fa(n){return n.fa||(n.fa=(function(t,i,s){const o=_e(t);return o.sa(),new G6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:n9.bind(null,n),r_:s9.bind(null,n),ta:i9.bind(null,n),na:r9.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ru(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(Po,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class j_{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){const l=Date.now()+i,h=new j_(e,t,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z_(n,e){if(Pt("AsyncQueue",`${e}: ${n}`),Ta(n))return new ce(re.UNAVAILABLE,`${e}: ${n}`);throw n}class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||pe.comparator(t.key,i.key):(t,i)=>pe.comparator(t.key,i.key),this.keyedMap=Yc(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class ux{constructor(){this.ga=new mt(pe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class yu{constructor(e,t,i,s,o,l,h,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,s,o){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new yu(e,t,Yl.emptySet(t),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class a9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class o9{constructor(){this.queries=cx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=_e(t),o=s.queries;s.queries=cx(),o.forEach(((l,h)=>{for(const d of h.Sa)d.onError(i)}))})(this,new ce(re.ABORTED,"Firestore shutting down"))}}function cx(){return new ls((n=>B2(n)),Tp)}async function XR(n,e){const t=_e(n);let i=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new a9,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const h=z_(l,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&U_(t)}async function WR(n,e){const t=_e(n),i=e.query;let s=3;const o=t.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function l9(n,e){const t=_e(n);let i=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const h of l.Sa)h.Fa(s)&&(i=!0);l.wa=s}}i&&U_(t)}function u9(n,e,t){const i=_e(n),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);i.queries.delete(e)}function U_(n){n.Ca.forEach((e=>{e.next()}))}var _v,hx;(hx=_v||(_v={})).Ma="default",hx.Cache="cache";class ZR{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new yu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_v.Cache}}class JR{constructor(e){this.key=e}}class eC{constructor(e){this.key=e}}class c9{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=q2(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new ux,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const _=s.get(g),S=Xh(this.query,v)?v:null,R=!!_&&this.mutatedKeys.has(_.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let k=!1;_&&S?_.data.isEqual(S.data)?R!==D&&(i.track({type:3,doc:S}),k=!0):this.su(_,S)||(i.track({type:2,doc:S}),k=!0,(d&&this.eu(S,d)>0||f&&this.eu(S,f)<0)&&(h=!0)):!_&&S?(i.track({type:0,doc:S}),k=!0):_&&!S&&(i.track({type:1,doc:_}),k=!0,(d||f)&&(h=!0)),k&&(S?(l=l.add(S),o=D?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:l,iu:i,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(S,R){const D=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:k})}};return D(S)-D(R)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(i),s=s??!1;const h=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new yu(this.query,e.tu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ux,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new eC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new JR(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Du="SyncEngine";class h9{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class d9{constructor(e){this.key=e,this.hu=!1}}class f9{constructor(e,t,i,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ls((h=>B2(h)),Tp),this.Iu=new Map,this.Eu=new Set,this.du=new mt(pe.comparator),this.Au=new Map,this.Ru=new C_,this.Vu={},this.mu=new Map,this.fu=Mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function m9(n,e,t=!0){const i=Np(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await tC(i,e,t,!0),s}async function p9(n,e){const t=Np(n);await tC(t,e,!0,!1)}async function tC(n,e,t,i){const s=await Hm(n.localStore,ti(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await B_(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&Dp(n.remoteStore,s),h}async function B_(n,e,t,i,s){n.pu=(v,_,S)=>(async function(D,k,z,U){let P=k.view.ru(z);P.Cs&&(P=await pv(D.localStore,k.query,!1).then((({documents:x})=>k.view.ru(x,P))));const W=U&&U.targetChanges.get(k.targetId),ne=U&&U.targetMismatches.get(k.targetId)!=null,ee=k.view.applyChanges(P,D.isPrimaryClient,W,ne);return bv(D,k.targetId,ee.au),ee.snapshot})(n,v,_,S);const o=await pv(n.localStore,e,!0),l=new c9(e,o.Qs),h=l.ru(o.documents),d=Zh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),f=l.applyChanges(h,n.isPrimaryClient,d);bv(n,t,f.au);const g=new h9(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function g9(n,e,t){const i=_e(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((l=>!Tp(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await pu(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&gu(i.remoteStore,s.targetId),vu(i,s.targetId)})).catch(ba)):(vu(i,s.targetId),await pu(i.localStore,s.targetId,!0))}async function y9(n,e){const t=_e(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),gu(t.remoteStore,i.targetId))}async function v9(n,e,t){const i=G_(n);try{const s=await(function(l,h){const d=_e(l),f=Xe.now(),g=h.reduce(((S,R)=>S.add(R.key)),Ue());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let R=ei(),D=Ue();return d.Ns.getEntries(S,g).next((k=>{R=k,R.forEach(((z,U)=>{U.isValidDocument()||(D=D.add(z))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,R))).next((k=>{v=k;const z=[];for(const U of h){const P=U5(U,v.get(U.key).overlayedDocument);P!=null&&z.push(new us(U.key,P,N2(P.value.mapValue),Tn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,z,h)})).next((k=>{_=k;const z=k.applyToLocalDocumentSet(v,D);return d.documentOverlayCache.saveOverlays(S,k.batchId,z)}))})).then((()=>({batchId:_.batchId,changes:G2(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,h,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new mt(Ve)),f=f.insert(h,d),l.Vu[l.currentUser.toKey()]=f})(i,s.batchId,t),await wa(i,s.changes),await Ru(i.remoteStore)}catch(s){const o=z_(s,"Failed to persist write");t.reject(o)}}async function nC(n,e){const t=_e(n);try{const i=await O6(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Ee(l.hu,14607):s.removedDocuments.size>0&&(Ee(l.hu,42227),l.hu=!1))})),await wa(t,i,e)}catch(i){await ba(i)}}function dx(n,e,t){const i=_e(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(l,h){const d=_e(l);d.onlineState=h;let f=!1;d.queries.forEach(((g,v)=>{for(const _ of v.Sa)_.va(h)&&(f=!0)})),f&&U_(d)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _9(n,e,t){const i=_e(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new mt(pe.comparator);l=l.insert(o,Ct.newNoDocument(o,Ae.min()));const h=Ue().add(o),d=new Wh(Ae.min(),new Map,new mt(Ve),l,h);await nC(i,d),i.du=i.du.remove(o),i.Au.delete(e),H_(i)}else await pu(i.localStore,e,!1).then((()=>vu(i,e,t))).catch(ba)}async function b9(n,e){const t=_e(n),i=e.batch.batchId;try{const s=await P6(t.localStore,e);q_(t,i,null),F_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await wa(t,s)}catch(s){await ba(s)}}async function T9(n,e,t){const i=_e(n);try{const s=await(function(l,h){const d=_e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,h).next((v=>(Ee(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(i.localStore,e);q_(i,e,t),F_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await wa(i,s)}catch(s){await ba(s)}}function F_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function q_(n,e,t){const i=_e(n);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function vu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||iC(n,i)}))}function iC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(gu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),H_(n))}function bv(n,e,t){for(const i of t)i instanceof JR?(n.Ru.addReference(i.key,e),E9(n,i)):i instanceof eC?(ue(Du,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||iC(n,i.key)):ye(19791,{wu:i})}function E9(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ue(Du,"New document in limbo: "+t),n.Eu.add(i),H_(n))}function H_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new pe(tt.fromString(e)),i=n.fu.next();n.Au.set(i,new d9(t)),n.du=n.du.insert(t,i),Dp(n.remoteStore,new Qr(ti(bp(t.path)),i,"TargetPurposeLimboResolution",Un.ce))}}async function wa(n,e,t){const i=_e(n),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,d)=>{l.push(i.pu(d,e,t).then((f=>{if((f||t)&&i.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=k_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(l),i.Pu.H_(s),await(async function(d,f){const g=_e(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>$.forEach(f,(_=>$.forEach(_.Es,(S=>g.persistence.referenceDelegate.addReference(v,_.targetId,S))).next((()=>$.forEach(_.ds,(S=>g.persistence.referenceDelegate.removeReference(v,_.targetId,S)))))))))}catch(v){if(!Ta(v))throw v;ue(V_,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const S=g.Ms.get(_),R=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(R);g.Ms=g.Ms.insert(_,D)}}})(i.localStore,o))}async function w9(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){ue(Du,"User change. New user:",e.toKey());const i=await VR(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((h=>{h.forEach((d=>{d.reject(new ce(re.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await wa(t,i.Ls)}}function S9(n,e){const t=_e(n),i=t.Au.get(e);if(i&&i.hu)return Ue().add(i.key);{let s=Ue();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const h=t.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}async function x9(n,e){const t=_e(n),i=await pv(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&bv(t,e.targetId,s.au),s}async function A9(n,e){const t=_e(n);return OR(t.localStore,e).then((i=>wa(t,i)))}async function I9(n,e,t,i){const s=_e(n),o=await(function(h,d){const f=_e(h),g=_e(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(v=>g.er(v,d).next((_=>_?f.localDocuments.getDocuments(v,_):$.resolve(null)))))})(s.localStore,e);o!==null?(t==="pending"?await Ru(s.remoteStore):t==="acknowledged"||t==="rejected"?(q_(s,e,i||null),F_(s,e),(function(h,d){_e(_e(h).mutationQueue).ir(d)})(s.localStore,e)):ye(6720,"Unknown batchState",{Su:t}),await wa(s,o)):ue(Du,"Cannot apply mutation batch with id: "+e)}async function R9(n,e){const t=_e(n);if(Np(t),G_(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await fx(t,i.toArray());t.gu=!0,await vv(t.remoteStore,!0);for(const o of s)Dp(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):s=s.then((()=>(vu(t,l),pu(t.localStore,l,!0)))),gu(t.remoteStore,l)})),await s,await fx(t,i),(function(l){const h=_e(l);h.Au.forEach(((d,f)=>{gu(h.remoteStore,f)})),h.Ru.Jr(),h.Au=new Map,h.du=new mt(pe.comparator)})(t),t.gu=!1,await vv(t.remoteStore,!1)}}async function fx(n,e,t){const i=_e(n),s=[],o=[];for(const l of e){let h;const d=i.Iu.get(l);if(d&&d.length!==0){h=await Hm(i.localStore,ti(d[0]));for(const f of d){const g=i.Tu.get(f),v=await x9(i,g);v.snapshot&&o.push(v.snapshot)}}else{const f=await PR(i.localStore,l);h=await Hm(i.localStore,f),await B_(i,rC(f),l,!1,h.resumeToken)}s.push(h)}return i.Pu.H_(o),s}function rC(n){return z2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function C9(n){return(function(t){return _e(_e(t).persistence).Ts()})(_e(n).localStore)}async function D9(n,e,t,i){const s=_e(n);if(s.gu)return void ue(Du,"Ignoring unexpected query state notification.");const o=s.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await OR(s.localStore,F2(o[0])),h=Wh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Lt.EMPTY_BYTE_STRING);await wa(s,l,h);break}case"rejected":await pu(s.localStore,e,!0),vu(s,e,i);break;default:ye(64155,t)}}async function N9(n,e,t){const i=Np(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){ue(Du,"Adding an already active target "+s);continue}const o=await PR(i.localStore,s),l=await Hm(i.localStore,o);await B_(i,rC(o),l.targetId,!1,l.resumeToken),Dp(i.remoteStore,l)}for(const s of t)i.Iu.has(s)&&await pu(i.localStore,s,!1).then((()=>{gu(i.remoteStore,s),vu(i,s)})).catch(ba)}}function Np(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_9.bind(null,e),e.Pu.H_=l9.bind(null,e.eventManager),e.Pu.yu=u9.bind(null,e.eventManager),e}function G_(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T9.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kR(this.persistence,new NR,e.initialUser,this.serializer)}Cu(e){return new D_(Ip.mi,this.serializer)}Du(e){return new BR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class k9 extends kh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ee(this.persistence.referenceDelegate instanceof qm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new xR(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new D_((i=>qm.mi(i,t)),this.serializer)}}class sC extends kh{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await G_(this.xu.syncEngine),await Ru(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return kR(this.persistence,new NR,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new xR(i,e.asyncQueue,t)}Mu(e,t){const i=new F3(t,this.persistence);return new B3(e.asyncQueue,i)}Cu(e){const t=DR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new N_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,FR(),fm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new BR}}class V9 extends sC{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof f0&&(this.sharedClientState.syncEngine={Co:I9.bind(null,t),vo:D9.bind(null,t),Fo:N9.bind(null,t),Ts:C9.bind(null,t),Do:A9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await R9(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=FR();if(!f0.v(t))throw new ce(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=DR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new f0(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Vh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=w9.bind(null,this.syncEngine),await vv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new o9})()}createDatastore(e){const t=Rp(e.databaseInfo.databaseId),i=(function(o){return new q6(o)})(e.databaseInfo);return(function(o,l,h,d){return new K6(o,l,h,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,o,l,h){return new Y6(i,s,o,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>dx(this.syncEngine,t,0)),(function(){return ax.v()?new ax:new z6})())}createSyncEngine(e,t){return(function(s,o,l,h,d,f,g){const v=new f9(s,o,l,h,d,f);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=_e(t);ue(Po,"RemoteStore shutting down."),i.Ea.add(5),await Jh(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vh.provider={build:()=>new Vh};class aC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ma="FirestoreClient";class M9{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=u_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{ue(ma,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(ue(ma,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=z_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function p0(n,e){n.asyncQueue.verifyOperationInProgress(),ue(ma,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await VR(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function mx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await P9(n);ue(ma,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>lx(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>lx(e.remoteStore,s))),n._onlineComponents=e}async function P9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(ma,"Using user provided OfflineComponentProvider");try{await p0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;_h("Error using user provided cache. Falling back to memory cache: "+t),await p0(n,new kh)}}else ue(ma,"Using default OfflineComponentProvider"),await p0(n,new k9(void 0));return n._offlineComponents}async function oC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(ma,"Using user provided OnlineComponentProvider"),await mx(n,n._uninitializedComponentsProvider._online)):(ue(ma,"Using default OnlineComponentProvider"),await mx(n,new Vh))),n._onlineComponents}function O9(n){return oC(n).then((e=>e.syncEngine))}async function Tv(n){const e=await oC(n),t=e.eventManager;return t.onListen=m9.bind(null,e.syncEngine),t.onUnlisten=g9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=p9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=y9.bind(null,e.syncEngine),t}function L9(n,e,t={}){const i=new Zr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,h,d,f){const g=new aC({next:_=>{g.Nu(),l.enqueueAndForget((()=>WR(o,v))),_.fromCache&&d.source==="server"?f.reject(new ce(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new ZR(h,g,{includeMetadataChanges:!0,qa:!0});return XR(o,v)})(await Tv(n),n.asyncQueue,e,t,i))),i.promise}function lC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const px=new Map;const j9="firestore.googleapis.com",gx=!0;class yx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=j9,this.ssl=gx}else this.host=e.host,this.ssl=e.ssl??gx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SR)throw new ce(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}j3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ce(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ce(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ce(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $_{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new C3;switch(i.type){case"firstParty":return new k3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=px.get(t);i&&(ue("ComponentProvider","Removing Datastore"),px.delete(t),i.terminate())})(this),Promise.resolve()}}class cs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class Ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Kh(t,Ot._jsonSchema))return new Ot(e,i||null,new pe(tt.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Yt("string",Ot._jsonSchemaVersion),referencePath:Yt("string")};class ua extends cs{constructor(e,t,i){super(e,t,bp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new pe(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function kp(n,e,...t){if(n=An(n),r2("collection","path",e),n instanceof $_){const i=tt.fromString(e,...t);return oS(i),new ua(n,null,i)}{if(!(n instanceof Ot||n instanceof ua))throw new ce(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return oS(i),new ua(n.firestore,null,i)}}function bi(n,e,...t){if(n=An(n),arguments.length===1&&(e=u_.newId()),r2("doc","path",e),n instanceof $_){const i=tt.fromString(e,...t);return aS(i),new Ot(n,null,new pe(i))}{if(!(n instanceof Ot||n instanceof ua))throw new ce(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return aS(i),new Ot(n.firestore,n instanceof ua?n.converter:null,new pe(i))}}const vx="AsyncQueue";class _x{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qR(this,"async_queue_retry"),this._c=()=>{const i=fm();i&&ue(vx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=fm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=fm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ta(e))throw e;ue(vx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Pt("INTERNAL UNHANDLED ERROR: ",bx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=j_.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&ye(47125,{Pc:bx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function bx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Tx(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class pa extends $_{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new _x,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _x(e),this._firestoreClient=void 0,await e}}}function z9(n,e,t){t||(t=Mm);const i=o_(n,"firestore");if(i.isInitialized(t)){const s=i.getImmediate({identifier:t}),o=i.getOptions(t);if(Io(o,e))return s;throw new ce(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ce(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SR)throw new ce(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&wu(e.host)&&UI(e.host),i.initialize({options:e,instanceIdentifier:t})}function K_(n){if(n._terminated)throw new ce(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||U9(n),n._firestoreClient}function U9(n){const e=n._freezeSettings(),t=(function(s,o,l,h){return new g5(s,o,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,lC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new M9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}class vi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vi(Lt.fromBase64String(e))}catch(t){throw new ce(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vi(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kh(e,vi._jsonSchema))return vi.fromBase64String(e.bytes)}}vi._jsonSchemaVersion="firestore/bytes/1.0",vi._jsonSchema={type:Yt("string",vi._jsonSchemaVersion),bytes:Yt("string")};class Vp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Q_{constructor(e){this._methodName=e}}class pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(Kh(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:Yt("string",pr._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};class gr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kh(e,gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new gr(e.vectorValues);throw new ce(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gr._jsonSchemaVersion="firestore/vectorValue/1.0",gr._jsonSchema={type:Yt("string",gr._jsonSchemaVersion),vectorValues:Yt("object")};const B9=/^__.*__$/;class F9{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iu(e,this.data,t,this.fieldTransforms)}}class uC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:n})}}class Y_{constructor(e,t,i,s,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Y_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(cC(this.Ac)&&B9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class q9{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Rp(e)}Cc(e,t,i,s=!1){return new Y_({Ac:e,methodName:t,Dc:i,path:Et.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mp(n){const e=n._freezeSettings(),t=Rp(n._databaseId);return new q9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hC(n,e,t,i,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);X_("Data must be an object, but it was:",l,i);const h=dC(i,l);let d,f;if(o.merge)d=new Bn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const _=Ev(e,v,t);if(!l.contains(_))throw new ce(re.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);mC(g,_)||g.push(_)}d=new Bn(g),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new F9(new bn(h),d,f)}class Pp extends Q_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pp}}function H9(n,e,t,i){const s=n.Cc(1,e,t);X_("Data must be an object, but it was:",s,i);const o=[],l=bn.empty();Ea(i,((d,f)=>{const g=W_(e,d,t);f=An(f);const v=s.yc(g);if(f instanceof Pp)o.push(g);else{const _=ed(f,v);_!=null&&(o.push(g),l.set(g,_))}}));const h=new Bn(o);return new uC(l,h,s.fieldTransforms)}function G9(n,e,t,i,s,o){const l=n.Cc(1,e,t),h=[Ev(e,i,t)],d=[s];if(o.length%2!=0)throw new ce(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)h.push(Ev(e,o[_])),d.push(o[_+1]);const f=[],g=bn.empty();for(let _=h.length-1;_>=0;--_)if(!mC(f,h[_])){const S=h[_];let R=d[_];R=An(R);const D=l.yc(S);if(R instanceof Pp)f.push(S);else{const k=ed(R,D);k!=null&&(f.push(S),g.set(S,k))}}const v=new Bn(f);return new uC(g,v,l.fieldTransforms)}function $9(n,e,t,i=!1){return ed(t,n.Cc(i?4:3,e))}function ed(n,e){if(fC(n=An(n)))return X_("Unsupported field value:",e,n),dC(n,e);if(n instanceof Q_)return(function(i,s){if(!cC(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let l=0;for(const h of i){let d=ed(h,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,s){if((i=An(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return V5(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Xe.fromDate(i);return{timestampValue:mu(s.serializer,o)}}if(i instanceof Xe){const o=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mu(s.serializer,o)}}if(i instanceof pr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vi)return{bytesValue:rR(s.serializer,i._byteString)};if(i instanceof Ot){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:A_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof gr)return(function(l,h){return{mapValue:{fields:{[y_]:{stringValue:v_},[lu]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return T_(h.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${dp(i)}`)})(n,e)}function dC(n,e){const t={};return E2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ea(n,((i,s)=>{const o=ed(s,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function fC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof pr||n instanceof vi||n instanceof Ot||n instanceof Q_||n instanceof gr)}function X_(n,e,t){if(!fC(t)||!s2(t)){const i=dp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Ev(n,e,t){if((e=An(e))instanceof Vp)return e._internalPath;if(typeof e=="string")return W_(n,e);throw Qm("Field path arguments must be of type string or ",n,!1,void 0,t)}const K9=new RegExp("[~\\*/\\[\\]]");function W_(n,e,t){if(e.search(K9)>=0)throw Qm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vp(...e.split("."))._internalPath}catch{throw Qm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qm(n,e,t,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new ce(re.INVALID_ARGUMENT,h+n+d)}function mC(n,e){return n.some((t=>t.isEqual(e)))}class pC{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Z_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Q9 extends pC{data(){return super.data()}}function Z_(n,e){return typeof e=="string"?W_(n,e):e instanceof Vp?e._internalPath:e._delegate._internalPath}function gC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class J_{}class eb extends J_{}function Oo(n,e,...t){let i=[];e instanceof J_&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((d=>d instanceof nb)).length,h=o.filter((d=>d instanceof tb)).length;if(l>1||l>0&&h>0)throw new ce(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class tb extends eb{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new tb(e,t,i)}_apply(e){const t=this._parse(e);return yC(e._query,t),new cs(e.firestore,e.converter,ov(e._query,t))}_parse(e){const t=Mp(e.firestore);return(function(o,l,h,d,f,g,v){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ce(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Sx(v,g);const R=[];for(const D of v)R.push(wx(d,o,D));_={arrayValue:{values:R}}}else _=wx(d,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Sx(v,g),_=$9(h,l,v,g==="in"||g==="not-in");return $e.create(f,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class nb extends J_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nb(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:at.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)yC(l,d),l=ov(l,d)})(e._query,t),new cs(e.firestore,e.converter,ov(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ib extends eb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ib(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new ce(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ch(o,l)})(e._query,this._field,this._direction);return new cs(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new Au(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Mh(n,e="asc"){const t=e,i=Z_("orderBy",n);return ib._create(i,t)}class rb extends eb{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new rb(e,t,i)}_apply(e){return new cs(e.firestore,e.converter,Lm(e._query,this._limit,this._limitType))}}function Ex(n){return rb._create("limit",n,"F")}function wx(n,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new ce(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U2(e)&&t.indexOf("/")!==-1)throw new ce(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(tt.fromString(t));if(!pe.isDocumentKey(i))throw new ce(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ih(n,new pe(i))}if(t instanceof Ot)return Ih(n,t._key);throw new ce(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dp(t)}.`)}function Sx(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yC(n,e){const t=(function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Y9{convertValue(e,t="none"){switch(ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ea(e,((s,o)=>{i[s]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[lu].arrayValue?.values?.map((i=>bt(i.doubleValue)));return new gr(t)}convertGeoPoint(e){return new pr(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=vp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(xh(e));default:return null}}convertTimestamp(e){const t=ts(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tt.fromString(e);Ee(mR(i),9688,{name:e});const s=new Do(i.get(1),i.get(3)),o=new pe(i.popFirst(5));return s.isEqual(t)||Pt(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function vC(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eo extends pC{constructor(e,t,i,s,o,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Z_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Eo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Eo._jsonSchema={type:Yt("string",Eo._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class mm extends Eo{data(e={}){return super.data(e)}}class wo{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Zc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new mm(this._firestore,this._userDataWriter,i.key,i,new Zc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((h=>{const d=new mm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Zc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const d=new mm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Zc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return h.type!==0&&(f=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:X9(h.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=u_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function X9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}wo._jsonSchemaVersion="firestore/querySnapshot/1.0",wo._jsonSchema={type:Yt("string",wo._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class sb extends Y9{constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function Op(n){n=Ui(n,cs);const e=Ui(n.firestore,pa),t=K_(e),i=new sb(e);return gC(n._query),L9(t,n._query).then((s=>new wo(e,i,n,s)))}function ab(n,e,t){n=Ui(n,Ot);const i=Ui(n.firestore,pa),s=vC(n.converter,e,t);return Bp(i,[hC(Mp(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Tn.none())])}function Lp(n,e,t,...i){n=Ui(n,Ot);const s=Ui(n.firestore,pa),o=Mp(s);let l;return l=typeof(e=An(e))=="string"||e instanceof Vp?G9(o,"updateDoc",n._key,e,t,i):H9(o,"updateDoc",n._key,e),Bp(s,[l.toMutation(n._key,Tn.exists(!0))])}function jp(n){return Bp(Ui(n.firestore,pa),[new Sp(n._key,Tn.none())])}function zp(n,e){const t=Ui(n.firestore,pa),i=bi(n),s=vC(n.converter,e);return Bp(t,[hC(Mp(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Tn.exists(!1))]).then((()=>i))}function Up(n,...e){n=An(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Tx(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Tx(e[i])){const d=e[i];e[i]=d.next?.bind(d),e[i+1]=d.error?.bind(d),e[i+2]=d.complete?.bind(d)}let o,l,h;if(n instanceof Ot)l=Ui(n.firestore,pa),h=bp(n._key.path),o={next:d=>{e[i]&&e[i](W9(l,n,d))},error:e[i+1],complete:e[i+2]};else{const d=Ui(n,cs);l=Ui(d.firestore,pa),h=d._query;const f=new sb(l);o={next:g=>{e[i]&&e[i](new wo(l,f,d,g))},error:e[i+1],complete:e[i+2]},gC(n._query)}return(function(f,g,v,_){const S=new aC(_),R=new ZR(g,S,v);return f.asyncQueue.enqueueAndForget((async()=>XR(await Tv(f),R))),()=>{S.Nu(),f.asyncQueue.enqueueAndForget((async()=>WR(await Tv(f),R)))}})(K_(l),h,s,o)}function Bp(n,e){return(function(i,s){const o=new Zr;return i.asyncQueue.enqueueAndForget((async()=>v9(await O9(i),s,o))),o.promise})(K_(n),e)}function W9(n,e,t){const i=t.docs.get(e._key),s=new sb(n);return new Eo(n,s,e._key,i,new Zc(t.hasPendingWrites,t.fromCache),e.converter)}class Z9{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=nL(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function J9(n){return new Z9(n)}class eL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vh.provider,this._offlineComponentProvider={build:t=>new sC(t,e?.cacheSizeBytes,this.forceOwnership)}}}class tL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vh.provider,this._offlineComponentProvider={build:t=>new V9(t,e?.cacheSizeBytes)}}}function nL(n){return new eL(n?.forceOwnership)}function iL(){return new tL}(function(e,t=!0){(function(s){xu=s})(Su),tu(new Ro("firestore",((i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new pa(new D3(i.getProvider("auth-internal")),new V3(l,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ce(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Do(f.options.projectId,g)})(l,s),l);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),aa(nS,iS,e),aa(nS,iS,"esm2020")})();var rL="firebase",sL="12.6.0";aa(rL,sL,"app");function _C(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aL=_C,bC=new Gh("auth","Firebase",_C());const Ym=new s_("@firebase/auth");function oL(n,...e){Ym.logLevel<=Ge.WARN&&Ym.warn(`Auth (${Su}): ${n}`,...e)}function pm(n,...e){Ym.logLevel<=Ge.ERROR&&Ym.error(`Auth (${Su}): ${n}`,...e)}function is(n,...e){throw ob(n,...e)}function yr(n,...e){return ob(n,...e)}function TC(n,e,t){const i={...aL(),[e]:t};return new Gh("auth","Firebase",i).create(e,{appName:n.name})}function So(n){return TC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ob(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return bC.create(n,...e)}function ke(n,e,...t){if(!n)throw ob(e,...t)}function Yr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pm(e),new Error(e)}function rs(n,e){n||Yr(e)}function wv(){return typeof self<"u"&&self.location?.href||""}function lL(){return xx()==="http:"||xx()==="https:"}function xx(){return typeof self<"u"&&self.location?.protocol||null}function uL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lL()||lO()||"connection"in navigator)?navigator.onLine:!0}function cL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class td{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=aO()||uO()}get(){return uL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lb(n,e){rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class EC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const dL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fL=new td(3e4,6e4);function ub(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Nu(n,e,t,i,s={}){return wC(n,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=$h({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...o};return oO()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&wu(n.emulatorConfig.host)&&(f.credentials="include"),EC.fetch()(await SC(n,n.config.apiHost,t,h),f)})}async function wC(n,e,t){n._canInitEmulator=!1;const i={...hL,...e};try{const s=new pL(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Qf(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,f]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qf(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Qf(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Qf(n,"user-disabled",l);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw TC(n,g,f);is(n,g)}}catch(s){if(s instanceof os)throw s;is(n,"network-request-failed",{message:String(s)})}}async function mL(n,e,t,i,s={}){const o=await Nu(n,e,t,i,s);return"mfaPendingCredential"in o&&is(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function SC(n,e,t,i){const s=`${e}${t}?${i}`,o=n,l=o.config.emulator?lb(n.config,s):`${n.config.apiScheme}://${s}`;return dL.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class pL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yr(this.auth,"network-request-failed")),fL.get())})}}function Qf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=yr(n,e,i);return s.customData._tokenResponse=t,s}async function gL(n,e){return Nu(n,"POST","/v1/accounts:delete",e)}async function Xm(n,e){return Nu(n,"POST","/v1/accounts:lookup",e)}function ch(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yL(n,e=!1){const t=An(n),i=await t.getIdToken(e),s=cb(i);ke(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:i,authTime:ch(g0(s.auth_time)),issuedAtTime:ch(g0(s.iat)),expirationTime:ch(g0(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function g0(n){return Number(n)*1e3}function cb(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return pm("JWT malformed, contained fewer than 3 sections"),null;try{const s=OI(t);return s?JSON.parse(s):(pm("Failed to decode base64 JWT payload"),null)}catch(s){return pm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Ax(n){const e=cb(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ph(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof os&&vL(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function vL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class _L{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Sv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ch(this.lastLoginAt),this.creationTime=ch(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Wm(n){const e=n.auth,t=await n.getIdToken(),i=await Ph(n,Xm(e,{idToken:t}));ke(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?xC(s.providerUserInfo):[],l=TL(n.providerData,o),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,f=h?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Sv(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function bL(n){const e=An(n);await Wm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TL(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function xC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function EL(n,e){const t=await wC(n,{},async()=>{const i=$h({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await SC(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&wu(n.emulatorConfig.host)&&(d.credentials="include"),EC.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wL(n,e){return Nu(n,"POST","/v2/accounts:revokeToken",ub(n,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ax(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Ax(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:o}=await EL(e,t);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:o}=t,l=new Xl;return i&&(ke(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ke(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ke(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return Yr("not implemented")}}function Ks(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ji{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new _L(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ph(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yL(this,e)}reload(){return bL(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ji({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Wm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(So(this.auth));const e=await this.getIdToken();return await Ph(this,gL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:S,providerData:R,stsTokenManager:D}=t;ke(v&&D,e,"internal-error");const k=Xl.fromJSON(this.name,D);ke(typeof v=="string",e,"internal-error"),Ks(i,e.name),Ks(s,e.name),ke(typeof _=="boolean",e,"internal-error"),ke(typeof S=="boolean",e,"internal-error"),Ks(o,e.name),Ks(l,e.name),Ks(h,e.name),Ks(d,e.name),Ks(f,e.name),Ks(g,e.name);const z=new ji({uid:v,auth:e,email:s,emailVerified:_,displayName:i,isAnonymous:S,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:k,createdAt:f,lastLoginAt:g});return R&&Array.isArray(R)&&(z.providerData=R.map(U=>({...U}))),d&&(z._redirectEventId=d),z}static async _fromIdTokenResponse(e,t,i=!1){const s=new Xl;s.updateFromServerResponse(t);const o=new ji({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Wm(o),o}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];ke(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?xC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,h=new Xl;h.updateFromIdToken(i);const d=new ji({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Sv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const Ix=new Map;function Xr(n){rs(n instanceof Function,"Expected a class definition");let e=Ix.get(n);return e?(rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ix.set(n,e),e)}class AC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AC.type="NONE";const Rx=AC;function gm(n,e,t){return`firebase:${n}:${e}:${t}`}class Wl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=gm(this.userKey,s.apiKey,o),this.fullPersistenceKey=gm("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xm(this.auth,{idToken:e}).catch(()=>{});return t?ji._fromGetAccountInfoResponse(this.auth,t,e):null}return ji._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Wl(Xr(Rx),e,i);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Xr(Rx);const l=gm(i,e.config.apiKey,e.name);let h=null;for(const f of t)try{const g=await f._get(l);if(g){let v;if(typeof g=="string"){const _=await Xm(e,{idToken:g}).catch(()=>{});if(!_)break;v=await ji._fromGetAccountInfoResponse(e,_,g)}else v=ji._fromJSON(e,g);f!==o&&(h=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Wl(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Wl(o,e,i))}}function Cx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kC(e))return"Blackberry";if(VC(e))return"Webos";if(RC(e))return"Safari";if((e.includes("chrome/")||CC(e))&&!e.includes("edge/"))return"Chrome";if(NC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function IC(n=en()){return/firefox\//i.test(n)}function RC(n=en()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CC(n=en()){return/crios\//i.test(n)}function DC(n=en()){return/iemobile/i.test(n)}function NC(n=en()){return/android/i.test(n)}function kC(n=en()){return/blackberry/i.test(n)}function VC(n=en()){return/webos/i.test(n)}function hb(n=en()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function SL(n=en()){return hb(n)&&!!window.navigator?.standalone}function xL(){return cO()&&document.documentMode===10}function MC(n=en()){return hb(n)||NC(n)||VC(n)||kC(n)||/windows phone/i.test(n)||DC(n)}function PC(n,e=[]){let t;switch(n){case"Browser":t=Cx(en());break;case"Worker":t=`${Cx(en())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Su}/${i}`}class AL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function IL(n,e={}){return Nu(n,"GET","/v2/passwordPolicy",ub(n,e))}const RL=6;class CL{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??RL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class DL{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dx(this),this.idTokenSubscription=new Dx(this),this.beforeStateQueue=new AL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xm(this,{idToken:e}),i=await ji._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===l)&&h?.user&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(So(this));const t=e?An(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(So(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(So(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IL(this),t=new CL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await wL(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&oL(`Error while retrieving App Check token: ${e.error}`),e?.token}}function db(n){return An(n)}class Dx{constructor(e){this.auth=e,this.observer=null,this.addObserver=gO(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NL(n){fb=n}function kL(n){return fb.loadJS(n)}function VL(){return fb.gapiScript}function ML(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function PL(n,e){const t=o_(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Io(o,e??{}))return s;is(s,"already-initialized")}return t.initialize({options:e})}function OL(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Xr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function LL(n,e,t){const i=db(n);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=OC(e),{host:l,port:h}=jL(e),d=h===null?"":`:${h}`,f={url:`${o}//${l}${d}/`},g=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(Io(f,i.config.emulator)&&Io(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,wu(l)?(UI(`${o}//${l}${d}`),sO("Auth",!0)):zL()}function OC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function jL(n){const e=OC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Nx(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Nx(l)}}}function Nx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function zL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class LC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,t){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}async function Zl(n,e){return mL(n,"POST","/v1/accounts:signInWithIdp",ub(n,e))}const UL="http://localhost";class Lo extends LC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):is("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=t;if(!i||!s)return null;const l=new Lo(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Zl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:UL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$h(t)}return e}}class jC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class nd extends jC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zs extends nd{constructor(){super("facebook.com")}static credential(e){return Lo._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zs.PROVIDER_ID="facebook.com";class Js extends nd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Lo._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Js.credential(t,i)}catch{return null}}}Js.GOOGLE_SIGN_IN_METHOD="google.com";Js.PROVIDER_ID="google.com";class ea extends nd{constructor(){super("github.com")}static credential(e){return Lo._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.GITHUB_SIGN_IN_METHOD="github.com";ea.PROVIDER_ID="github.com";class ta extends nd{constructor(){super("twitter.com")}static credential(e,t){return Lo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ta.credential(t,i)}catch{return null}}}ta.TWITTER_SIGN_IN_METHOD="twitter.com";ta.PROVIDER_ID="twitter.com";class _u{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const o=await ji._fromIdTokenResponse(e,i,s),l=kx(i);return new _u({user:o,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=kx(i);return new _u({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function kx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Zm extends os{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Zm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Zm(e,t,i,s)}}function zC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Zm._fromErrorAndOperation(n,o,e,i):o})}async function BL(n,e,t=!1){const i=await Ph(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _u._forOperation(n,"link",i)}async function FL(n,e,t=!1){const{auth:i}=n;if(hr(i.app))return Promise.reject(So(i));const s="reauthenticate";try{const o=await Ph(n,zC(i,s,e,n),t);ke(o.idToken,i,"internal-error");const l=cb(o.idToken);ke(l,i,"internal-error");const{sub:h}=l;return ke(n.uid===h,i,"user-mismatch"),_u._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&is(i,"user-mismatch"),o}}async function qL(n,e,t=!1){if(hr(n.app))return Promise.reject(So(n));const i="signIn",s=await zC(n,i,e),o=await _u._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(o.user),o}function HL(n,e,t,i){return An(n).onIdTokenChanged(e,t,i)}function GL(n,e,t){return An(n).beforeAuthStateChanged(e,t)}const Jm="__sak";class UC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jm,"1"),this.storage.removeItem(Jm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const $L=1e3,KL=10;class BC extends UC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);xL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,KL):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},$L)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BC.type="LOCAL";const QL=BC;class FC extends UC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}FC.type="SESSION";const qC=FC;function YL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Fp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Fp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async f=>f(t.origin,o)),d=await YL(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fp.receivers=[];function mb(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class XL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const f=mb("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(_.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function vr(){return window}function WL(n){vr().location.href=n}function HC(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function ZL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JL(){return navigator?.serviceWorker?.controller||null}function ej(){return HC()?self:null}const GC="firebaseLocalStorageDb",tj=1,ep="firebaseLocalStorage",$C="fbase_key";class id{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qp(n,e){return n.transaction([ep],e?"readwrite":"readonly").objectStore(ep)}function nj(){const n=indexedDB.deleteDatabase(GC);return new id(n).toPromise()}function xv(){const n=indexedDB.open(GC,tj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ep,{keyPath:$C})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ep)?e(i):(i.close(),await nj(),e(await xv()))})})}async function Vx(n,e,t){const i=qp(n,!0).put({[$C]:e,value:t});return new id(i).toPromise()}async function ij(n,e){const t=qp(n,!1).get(e),i=await new id(t).toPromise();return i===void 0?null:i.value}function Mx(n,e){const t=qp(n,!0).delete(e);return new id(t).toPromise()}const rj=800,sj=3;class KC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>sj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fp._getInstance(ej()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ZL(),!this.activeServiceWorker)return;this.sender=new XL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xv();return await Vx(e,Jm,"1"),await Mx(e,Jm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Vx(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>ij(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Mx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=qp(s,!1).getAll();return new id(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KC.type="LOCAL";const aj=KC;new td(3e4,6e4);function oj(n,e){return e?Xr(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class pb extends LC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lj(n){return qL(n.auth,new pb(n),n.bypassAuthState)}function uj(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),FL(t,new pb(n),n.bypassAuthState)}async function cj(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),BL(t,new pb(n),n.bypassAuthState)}class QC{constructor(e,t,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lj;case"linkViaPopup":case"linkViaRedirect":return cj;case"reauthViaPopup":case"reauthViaRedirect":return uj;default:is(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hj=new td(2e3,1e4);class ql extends QC{constructor(e,t,i,s,o){super(e,t,s,o),this.provider=i,this.authWindow=null,this.pollId=null,ql.currentPopupAction&&ql.currentPopupAction.cancel(),ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=mb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hj.get())};e()}}ql.currentPopupAction=null;const dj="pendingRedirect",ym=new Map;class fj extends QC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ym.get(this.auth._key());if(!e){try{const i=await mj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ym.set(this.auth._key(),e)}return this.bypassAuthState||ym.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mj(n,e){const t=yj(e),i=gj(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function pj(n,e){ym.set(n._key(),e)}function gj(n){return Xr(n._redirectPersistence)}function yj(n){return gm(dj,n.config.apiKey,n.name)}async function vj(n,e,t=!1){if(hr(n.app))return Promise.reject(So(n));const i=db(n),s=oj(i,e),l=await new fj(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}const _j=600*1e3;class bj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Tj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!YC(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_j&&this.cachedEventUids.clear(),this.cachedEventUids.has(Px(e))}saveEventToCache(e){this.cachedEventUids.add(Px(e)),this.lastProcessedEventTime=Date.now()}}function Px(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Tj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YC(n);default:return!1}}async function Ej(n,e={}){return Nu(n,"GET","/v1/projects",e)}const wj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sj=/^https?/;async function xj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Ej(n);for(const t of e)try{if(Aj(t))return}catch{}is(n,"unauthorized-domain")}function Aj(n){const e=wv(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!Sj.test(t))return!1;if(wj.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const Ij=new td(3e4,6e4);function Ox(){const n=vr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Rj(n){return new Promise((e,t)=>{function i(){Ox(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ox(),t(yr(n,"network-request-failed"))},timeout:Ij.get()})}if(vr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vr().gapi?.load)i();else{const s=ML("iframefcb");return vr()[s]=()=>{gapi.load?i():t(yr(n,"network-request-failed"))},kL(`${VL()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw vm=null,e})}let vm=null;function Cj(n){return vm=vm||Rj(n),vm}const Dj=new td(5e3,15e3),Nj="__/auth/iframe",kj="emulator/auth/iframe",Vj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pj(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?lb(e,kj):`https://${n.config.authDomain}/${Nj}`,i={apiKey:e.apiKey,appName:n.name,v:Su},s=Mj.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${$h(i).slice(1)}`}async function Oj(n){const e=await Cj(n),t=vr().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:Pj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vj,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=yr(n,"network-request-failed"),h=vr().setTimeout(()=>{o(l)},Dj.get());function d(){vr().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}const Lj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jj=500,zj=600,Uj="_blank",Bj="http://localhost";class Lx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fj(n,e,t,i=jj,s=zj){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...Lj,width:i.toString(),height:s.toString(),top:o,left:l},f=en().toLowerCase();t&&(h=CC(f)?Uj:t),IC(f)&&(e=e||Bj,d.scrollbars="yes");const g=Object.entries(d).reduce((_,[S,R])=>`${_}${S}=${R},`,"");if(SL(f)&&h!=="_self")return qj(e||"",h),new Lx(null);const v=window.open(e||"",h,g);ke(v,n,"popup-blocked");try{v.focus()}catch{}return new Lx(v)}function qj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const Hj="__/auth/handler",Gj="emulator/auth/handler",$j=encodeURIComponent("fac");async function jx(n,e,t,i,s,o){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Su,eventId:s};if(e instanceof jC){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",pO(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof nd){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await n._getAppCheckToken(),f=d?`#${$j}=${encodeURIComponent(d)}`:"";return`${Kj(n)}?${$h(h).slice(1)}${f}`}function Kj({config:n}){return n.emulator?lb(n,Gj):`https://${n.authDomain}/${Hj}`}const y0="webStorageSupport";class Qj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qC,this._completeRedirectFn=vj,this._overrideRedirectResult=pj}async _openPopup(e,t,i,s){rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await jx(e,t,i,wv(),s);return Fj(e,o,mb())}async _openRedirect(e,t,i,s){await this._originValidation(e);const o=await jx(e,t,i,wv(),s);return WL(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(rs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Oj(e),i=new bj(e);return t.register("authEvent",s=>(ke(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(y0,{type:y0},s=>{const o=s?.[0]?.[y0];o!==void 0&&t(!!o),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return MC()||RC()||hb()}}const Yj=Qj;var zx="@firebase/auth",Ux="1.11.1";class Xj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Wj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Zj(n){tu(new Ro("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;ke(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PC(n)},f=new DL(i,s,o,d);return OL(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),tu(new Ro("auth-internal",e=>{const t=db(e.getProvider("auth").getImmediate());return(i=>new Xj(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(zx,Ux,Wj(n)),aa(zx,Ux,"esm2020")}const Jj=300,ez=zI("authIdTokenMaxAge")||Jj;let Bx=null;const tz=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ez)return;const s=t?.token;Bx!==s&&(Bx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function nz(n=y3()){const e=o_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=PL(n,{popupRedirectResolver:Yj,persistence:[aj,QL,qC]}),i=zI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=tz(o.toString());GL(t,l,()=>l(t.currentUser)),HL(t,h=>l(h))}}const s=tO("auth");return s&&LL(t,`http://${s}`),t}function iz(){return document.getElementsByTagName("head")?.[0]??document}NL({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=yr("internal-error");o.customData=s,t(o)},i.type="text/javascript",i.charset="UTF-8",iz().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Zj("Browser");const rz={apiKey:"AIzaSyAQ5FdR_OjZvMkTOYy9auXDctOQXGtZPgg",authDomain:"house-budget-pwa.firebaseapp.com",projectId:"house-budget-pwa",storageBucket:"house-budget-pwa.firebasestorage.app",messagingSenderId:"7591891522",appId:"1:7591891522:web:ebf15777f6c206129753db",measurementId:"G-6QDXEYXPTE"},XC=KI(rz),kn=z9(XC,{localCache:J9({tabManager:iL()})});nz(XC);const v0=n=>kp(kn,"users",n,"transactions"),Hr={subscribeToTransactions:(n,e)=>{const t=Oo(v0(n),Mh("date","desc"));return Up(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllTransactions:async n=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${n}`);const e=Oo(v0(n),Mh("date","desc")),i=(await Op(e)).docs.map(s=>({id:s.id,...s.data()}));return console.log(` Fetched ${i.length} transactions:`,i.map(s=>({id:s.id,description:s.description}))),i},addTransaction:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${t}`);try{console.log(" About to call addDoc with:",i);const s=await zp(v0(e),i);console.log(" addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`),console.log(` Document path: ${s.path}`);const o={id:s.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(s){throw console.error(" addDoc failed:",s),console.error("Error message:",s.message),s}},updateTransaction:async(n,e,t)=>{const i=bi(kn,"users",n,"transactions",e);return await Lp(i,t)},deleteTransaction:async(n,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${n}`);try{const t=bi(kn,"users",n,"transactions",e);console.log(` Deleting document at path: ${t.path}`),await jp(t),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(t){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,t),console.error("Error message:",t.message),t}}},_0=n=>kp(kn,"users",n,"envelopes"),io={subscribeToEnvelopes:(n,e)=>{const t=Oo(_0(n),Mh("orderIndex","asc"));return Up(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllEnvelopes:async n=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",n);const e=_0(n),s=(await Op(e)).docs.map((o,l)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??l})).sort((o,l)=>{const h=o.orderIndex??0,d=l.orderIndex??0;return h-d});return console.log(" Fetched envelopes:",s.length),s}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create envelope");console.log(` EnvelopeService.createEnvelope: Adding envelope for user ${e}:`,i),console.log(` Original envelope had temp ID: ${t}`);try{const s=await zp(_0(e),i);console.log(" Envelope addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`);const o={id:s.id,...i,userId:e};return console.log(" Final envelope result object:",o),o}catch(s){throw console.error(" Envelope addDoc failed:",s),s}},saveEnvelope:async(n,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const t=bi(kn,"users",n,"envelopes",e.id);return await ab(t,e,{merge:!0})},updateBalance:async(n,e,t)=>{const i=bi(kn,"users",n,"envelopes",e);return await Lp(i,{currentBalance:t,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(n,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${n}`);const t=bi(kn,"users",n,"envelopes",e);await jp(t),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},b0=n=>kp(kn,"users",n,"distributionTemplates"),Pi={subscribeToDistributionTemplates:(n,e)=>{const t=Oo(b0(n),Mh("lastUsed","desc"));return Up(t,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})},getAllDistributionTemplates:async n=>{const e=Oo(b0(n),Mh("lastUsed","desc"));return(await Op(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const s=await zp(b0(e),i);console.log(" Template addDoc succeeded, docRef:",s);const o={id:s.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(s){throw console.error(" Template addDoc failed:",s),s}},saveDistributionTemplate:async(n,e)=>{const t=bi(kn,"users",n,"distributionTemplates",e.id);return await ab(t,e,{merge:!0})},updateDistributionTemplate:async(n,e,t)=>{const i=bi(kn,"users",n,"distributionTemplates",e);return await Lp(i,t)},deleteDistributionTemplate:async(n,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${n}`);const t=bi(kn,"users",n,"distributionTemplates",e);await jp(t),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},T0=n=>kp(kn,"users",n,"appSettings"),Qs={subscribeToAppSettings:(n,e)=>{const t=Oo(T0(n),Ex(1));return Up(t,s=>{if(s.empty){e(null);return}const o=s.docs.map(l=>({id:l.id,...l.data()}))[0];e(o)})},getAppSettings:async n=>{const e=Oo(T0(n),Ex(1)),t=await Op(e);if(t.empty)return null;const i=t.docs[0];return{id:i.id,...i.data()}},createAppSettings:async n=>{const{userId:e,...t}=n;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,t);try{const i=await zp(T0(e),t);console.log(" Settings addDoc succeeded, docRef:",i);const s={id:i.id,...t,userId:e};return console.log(" Final settings result object:",s),s}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(n,e)=>{const t=bi(kn,"users",n,"appSettings",e.id);return await ab(t,e,{merge:!0})},updateAppSettings:async(n,e,t)=>{const i=bi(kn,"users",n,"appSettings",e);return await Lp(i,t)},deleteAppSettings:async(n,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${n}`);const t=bi(kn,"users",n,"appSettings",e);await jp(t),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}};function sz(n,e){let t;try{t=n()}catch{return}return{getItem:s=>{var o;const l=d=>d===null?null:JSON.parse(d,void 0),h=(o=t.getItem(s))!=null?o:null;return h instanceof Promise?h.then(l):l(h)},setItem:(s,o)=>t.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>t.removeItem(s)}}const Av=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(i){return Av(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return Av(i)(t)}}}},az=(n,e)=>(t,i,s)=>{let o={storage:sz(()=>localStorage),partialize:D=>D,version:0,merge:(D,k)=>({...k,...D}),...e},l=!1;const h=new Set,d=new Set;let f=o.storage;if(!f)return n((...D)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...D)},i,s);const g=()=>{const D=o.partialize({...i()});return f.setItem(o.name,{state:D,version:o.version})},v=s.setState;s.setState=(D,k)=>(v(D,k),g());const _=n((...D)=>(t(...D),g()),i,s);s.getInitialState=()=>_;let S;const R=()=>{var D,k;if(!f)return;l=!1,h.forEach(U=>{var P;return U((P=i())!=null?P:_)});const z=((k=o.onRehydrateStorage)==null?void 0:k.call(o,(D=i())!=null?D:_))||void 0;return Av(f.getItem.bind(f))(o.name).then(U=>{if(U)if(typeof U.version=="number"&&U.version!==o.version){if(o.migrate){const P=o.migrate(U.state,U.version);return P instanceof Promise?P.then(W=>[!0,W]):[!0,P]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,U.state];return[!1,void 0]}).then(U=>{var P;const[W,ne]=U;if(S=o.merge(ne,(P=i())!=null?P:_),t(S,!0),W)return g()}).then(()=>{z?.(S,void 0),S=i(),l=!0,d.forEach(U=>U(S))}).catch(U=>{z?.(void 0,U)})};return s.persist={setOptions:D=>{o={...o,...D},D.storage&&(f=D.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>R(),hasHydrated:()=>l,onHydrate:D=>(h.add(D),()=>{h.delete(D)}),onFinishHydration:D=>(d.add(D),()=>{d.delete(D)})},o.skipHydration||R(),S||_},oz=az,Iv=n=>{let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);e=(e<<5)-e+i,e=e&e}return e.toString()},lz=[{id:"user-frank",username:"frank",displayName:"Frank",passwordHash:Iv("password123")},{id:"user-brother",username:"brother",displayName:"Brother",passwordHash:Iv("password123")}],uz=n=>lz.find(e=>e.username===n),cz=(n,e)=>{const t=uz(n);return t&&Iv(e)===t.passwordHash?t:null},rd=i_()(oz(n=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,login:async(e,t)=>{n({isLoading:!0,loginError:null});try{await new Promise(s=>setTimeout(s,500));const i=cz(e,t);return i?(n({currentUser:i,isAuthenticated:!0,isLoading:!1,loginError:null}),console.log(` User logged in: ${i.displayName} (${i.username})`),!0):(n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Invalid username or password"}),!1)}catch(i){return console.error("Login error:",i),n({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Login failed. Please try again."}),!1}},logout:()=>{console.log(" User logged out"),n({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1})},clearError:()=>{n({loginError:null})}}),{name:"auth-storage",partialize:n=>({currentUser:n.currentUser,isAuthenticated:n.isAuthenticated})})),hz=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const n=await fetch("/HouseBudget_Backup_2025-11-25.json");if(n.ok){const e=await n.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(n){console.log(" Could not load fallback data:",n)}return null},It=()=>{const{currentUser:n}=rd.getState();if(!n)throw new Error("No authenticated user found");return n.id},WC=()=>{console.log(" Clearing user data on logout"),En.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},dz=async()=>{if(typeof navigator>"u"||!navigator.onLine)return!1;try{const n=new AbortController,e=setTimeout(()=>n.abort(),3e3);return await fetch("https://www.google.com/favicon.ico",{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:n.signal}),clearTimeout(e),!0}catch{return!1}},Gr=n=>{const e=n?.code?.toLowerCase()||"",t=n?.message?.toLowerCase()||"",i=n?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||t.includes("network")||t.includes("offline")||t.includes("disconnected")||t.includes("connection")||t.includes("fetch")||t.includes("timeout")||t.includes("err_internet_disconnected")||t.includes("err_network_changed")||t.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&t==="undefined")},En=i_((n,e)=>({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,fetchData:async()=>{const t=e(),i=It();if(t.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",i),n({isLoading:!0,error:null});try{console.log(" fetchData: Making Firebase calls...");let s,o,l,h;[s,o,l,h]=await Promise.all([io.getAllEnvelopes(i).catch(g=>(console.error(" Failed to fetch envelopes:",g),[])),Hr.getAllTransactions(i).catch(g=>(console.error(" Failed to fetch transactions:",g),[])),Pi.getAllDistributionTemplates(i).catch(g=>(console.error(" Failed to fetch templates:",g),[])),Qs.getAppSettings(i).catch(g=>(console.error(" Failed to fetch settings:",g),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:s?.length||0,transactions:o?.length||0,templates:l?.length||0,settings:h?"found":"null"});const d=(s?.length||0)>0||(o?.length||0)>0||(l?.length||0)>0;let f=null;d||(console.log(" No data from Firebase, loading fallback data..."),f=await hz(),f&&(console.log(" Using fallback data for initialization"),s=f.envelopes||[],o=f.transactions||[],l=f.distributionTemplates||[],h=f.appSettings||null)),n(g=>{const v=x=>x.map(I=>({...I,date:I.date&&typeof I.date=="object"&&I.date.toDate?I.date.toDate().toISOString():I.date,type:I.type==="income"?"Income":I.type==="expense"?"Expense":I.type==="transfer"?"Transfer":I.type,amount:typeof I.amount=="string"?parseFloat(I.amount):I.amount})),_=x=>({id:x.id,name:x.name,currentBalance:x.currentBalance||0,lastUpdated:x.lastUpdated,isActive:x.isActive??!0,orderIndex:x.orderIndex??0}),S=s.filter(x=>!("orderIndex"in x));S.length>0&&(console.log(` Migrating ${S.length} envelopes to add orderIndex...`),S.forEach((x,I)=>{const V=I,M=It();io.saveEnvelope(M,{...x,orderIndex:V}).then(()=>console.log(` Migrated envelope ${x.name} with orderIndex ${V}`)).catch(N=>console.warn(`Failed to migrate envelope ${x.id}:`,N))}));const R=s.map(_),D=new Set([...g.envelopes.map(x=>x.id),...s.map(x=>x.id)]),k=g.envelopes.filter(x=>x.id&&!s.some(I=>I.id===x.id)&&!x.id.startsWith("temp-")),z=g.transactions.filter(x=>x.id&&!o.some(I=>I.id===x.id)&&(!x.id.startsWith("temp-")||D.has(x.envelopeId)));let U,P=[];navigator.onLine?(U=l,console.log(` Online mode: Using Firebase templates only (${U.length} templates)`)):(P=g.distributionTemplates.filter(x=>x.id&&!l.some(I=>I.id===x.id)),U=l.concat(P),console.log(` Offline mode: Merged ${l.length} Firebase + ${P.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",g.envelopes.map(x=>({id:x.id,name:x.name}))),console.log("  Firebase envelopes:",s.map(x=>({id:x.id,name:x.name}))),console.log("  Store transactions:",g.transactions.map(x=>({id:x.id,envelopeId:x.envelopeId,description:x.description}))),console.log("  Firebase transactions:",o.map(x=>({id:x.id,envelopeId:x.envelopeId,description:x.description}))),console.log("  Store templates:",g.distributionTemplates.map(x=>({id:x.id,name:x.name}))),console.log("  Firebase templates:",l.map(x=>({id:x.id,name:x.name}))),console.log("  Local-only envelopes:",k.map(x=>({id:x.id,name:x.name}))),console.log("  Local-only transactions:",z.map(x=>({id:x.id,envelopeId:x.envelopeId,description:x.description}))),console.log("  Local-only templates:",P.map(x=>({id:x.id,name:x.name}))),console.log("  Total merged templates:",U.length,U.map(x=>({id:x.id,name:x.name})));const W=R.concat(k),ne=v(o).concat(z);console.log("  Local-only envelopes:",k.map(x=>({id:x.id,name:x.name}))),console.log("  Merged envelopes will be:",W.length,W.map(x=>({id:x.id,name:x.name})));let ee=h;if(h&&"isDarkMode"in h&&!("theme"in h)){const x=h;if(ee={...x,theme:x.isDarkMode?"dark":"light"},delete ee.isDarkMode,ee&&ee.id){const I=It();Qs.updateAppSettings(I,ee.id,{theme:ee.theme}).catch(V=>console.warn("Failed to migrate app settings:",V))}}return{envelopes:W,transactions:ne,distributionTemplates:U,appSettings:ee,isLoading:!1,pendingSync:!1}})}catch(s){console.error("Sync Failed:",s),Gr(s)?n({isLoading:!1,pendingSync:!0}):n({error:s.message,isLoading:!1})}},addTransaction:async t=>{const i=`temp-${Date.now()}-${Math.random()}`,s=It(),o={...t,id:i,userId:s};if(n(l=>({transactions:[...l.transactions,o],isLoading:!0})),t.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${t.envelopeId}`),n({isLoading:!1,pendingSync:!0});else try{const l={...o,amount:o.amount.toString(),type:o.type.toLowerCase(),date:Xe.fromDate(new Date(o.date))},h=await Hr.addTransaction(l);console.log(` Replacing temp transaction ${i} with Firebase transaction:`,h);const d=fz(h);n(f=>({transactions:f.transactions.map(g=>g.id===i?d:g),isLoading:!1,pendingSync:!1}))}catch(l){console.error("Add Transaction Failed:",l),Gr(l)?n({isLoading:!1,pendingSync:!0,error:null}):n(h=>({transactions:h.transactions.filter(d=>d.id!==i),error:l.message,isLoading:!1}))}},createEnvelope:async t=>{const i=t.currentBalance&&t.currentBalance>0,s=i?{...t,currentBalance:0,orderIndex:t.orderIndex??0}:{...t,orderIndex:t.orderIndex??0},o=`temp-${Date.now()}-${Math.random()}`,l={...s,id:o};if(n(h=>({envelopes:[...h.envelopes,l],isLoading:!0})),i){console.log(` Creating initial deposit transaction locally first: ${l.name} (tempId: ${o})`);try{await e().addTransaction({description:"Initial Deposit",amount:t.currentBalance,envelopeId:o,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const h=e().getEnvelopeBalance(o);console.log(` Test balance for temp envelope ${o}: $${h.toNumber()}`)}catch(h){console.error(" Failed to create initial deposit transaction locally:",h)}}try{console.log(" Attempting Firebase envelope creation...");const h=It(),d={...s,id:"",userId:h},f=await io.createEnvelope(d);console.log(" Firebase envelope creation successful:",f);const g={id:f.id,name:f.name,currentBalance:f.currentBalance,lastUpdated:f.lastUpdated,isActive:f.isActive??!0,orderIndex:f.orderIndex??0,userId:f.userId};if(n(v=>({envelopes:v.envelopes.map(_=>_.id===o?g:_),isLoading:!1,pendingSync:!1})),i){console.log(` Updating transactions from temp envelope ID ${o} to real ID ${f.id}`),console.log(" Transactions before update:",e().transactions.map(_=>({id:_.id,envelopeId:_.envelopeId,description:_.description}))),n(_=>({transactions:_.transactions.map(S=>S.envelopeId===o?{...S,envelopeId:f.id}:S)})),console.log(" Transactions after envelopeId update:",e().transactions.map(_=>({id:_.id,envelopeId:_.envelopeId,description:_.description})));const v=e().transactions.filter(_=>_.envelopeId===f.id&&_.id&&_.id.startsWith("temp-"));console.log(` Found ${v.length} transactions to sync for envelope ${f.id}:`,v.map(_=>({id:_.id,envelopeId:_.envelopeId})));for(const _ of v)try{console.log(" Syncing transaction:",_);const S={..._,amount:_.amount.toString(),type:_.type.toLowerCase(),date:Xe.fromDate(new Date(_.date))},R=await Hr.addTransaction(S);console.log(" Transaction synced:",R);const D={...R,amount:typeof R.amount=="string"?parseFloat(R.amount):R.amount,type:R.type==="income"?"Income":R.type==="expense"?"Expense":R.type==="transfer"?"Transfer":R.type,date:R.date&&typeof R.date=="object"&&R.date.toDate?R.date.toDate().toISOString():R.date};console.log(` Replacing temp transaction ${_.id} with Firebase transaction ${R.id}`),n(k=>({transactions:k.transactions.map(z=>z.id===_.id?D:z)}))}catch(S){console.error(` Failed to sync transaction ${_.id}:`,S)}console.log(" Final transactions after sync:",e().transactions.map(_=>({id:_.id,envelopeId:_.envelopeId,description:_.description}))),n({pendingSync:!1}),console.log(` All transactions synced for envelope ${f.id}`)}}catch(h){console.error("Create Envelope Failed:",h),console.log("Error details:",{code:h?.code,message:h?.message,name:h?.name,isNetworkError:Gr(h)}),Gr(h)?(console.log(" Treating as offline scenario - keeping temp envelope and transactions"),n({isLoading:!1,pendingSync:!0,error:null})):(console.log(" Real error - removing temp envelope"),n(d=>({envelopes:d.envelopes.filter(f=>f.id!==o),transactions:d.transactions.filter(f=>f.envelopeId!==o),error:h.message,isLoading:!1})))}},syncData:async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),n({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(i){console.error("Firebase reset during sync failed:",i)}return}n({pendingSync:!0});try{await e().fetchData()}catch(i){console.error("Manual sync failed:",i)}},updateOnlineStatus:async()=>{const t=await dz();n({isOnline:t})},handleUserLogout:()=>{WC()},addToEnvelope:async(t,i,s,o)=>{const l=o?typeof o=="string"?o:o.toISOString():new Date().toISOString();await e().addTransaction({description:s,amount:i,envelopeId:t,date:l,type:"Income",reconciled:!1})},spendFromEnvelope:async(t,i,s,o)=>{const l=o?typeof o=="string"?o:o.toISOString():new Date().toISOString();await e().addTransaction({description:s,amount:i,envelopeId:t,date:l,type:"Expense",reconciled:!1})},transferFunds:async(t,i,s,o,l)=>{console.log(`Transferring ${s} from ${t} to ${i} with note: ${o}`);const h=l?typeof l=="string"?l:l.toISOString():new Date().toISOString(),d=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(f=>f.id===i)?.name||"envelope"}`,amount:s,envelopeId:t,date:h,type:"Expense",transferId:d,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(f=>f.id===t)?.name||"envelope"}`,amount:s,envelopeId:i,date:h,type:"Income",transferId:d,reconciled:!1})},deleteEnvelope:async t=>{const i=e().transactions.filter(s=>s.envelopeId===t);n(s=>({envelopes:s.envelopes.filter(o=>o.id!==t),transactions:s.transactions.filter(o=>o.envelopeId!==t),isLoading:!0}));try{const s=It();await io.deleteEnvelope(s,t);for(const o of i)o.id&&!o.id.startsWith("temp-")&&await Hr.deleteTransaction(s,o.id);await e().removeEnvelopeFromTemplates(t),n({isLoading:!1})}catch(s){if(console.error("Delete Envelope Failed:",s),Gr(s))n({isLoading:!1,pendingSync:!0,error:null});else{const o=e().envelopes.find(l=>l.id===t);n(o?l=>({envelopes:[...l.envelopes,o],transactions:[...l.transactions,...i],error:s.message,isLoading:!1}):{error:s.message,isLoading:!1})}}},deleteTransaction:async t=>{const i=e().transactions.find(o=>o.id===t);if(!i)return;const s=[t];if(i.transferId){const o=e().transactions.find(l=>l.transferId===i.transferId&&l.id!==t);o&&o.id&&s.push(o.id)}n(o=>({transactions:o.transactions.filter(l=>l.id&&!s.includes(l.id)),isLoading:!0}));try{const o=It(),l=s.filter(h=>!h.startsWith("temp-"));for(const h of l)console.log(` About to delete transaction ID: ${h}`),await Hr.deleteTransaction(o,h),console.log(` Deleted transaction ID: ${h}`);console.log(" All transaction deletions completed"),n({isLoading:!1})}catch(o){if(console.error("Delete Transaction Failed:",o),Gr(o))n({isLoading:!1,pendingSync:!0,error:null});else{const l=s.map(h=>e().transactions.find(d=>d.id===h)||i).filter(Boolean);n(h=>({transactions:[...h.transactions,...l],error:o.message,isLoading:!1}))}}},updateTransaction:async t=>{console.log(" updateTransaction called:",t),n(i=>({transactions:i.transactions.map(s=>s.id===t.id?t:s),isLoading:!0}));try{const i=It(),s=Hr.updateTransaction(i,t.id,{description:t.description,amount:t.amount.toString(),envelopeId:t.envelopeId,date:Xe.fromDate(new Date(t.date)),type:t.type.toLowerCase()}),o=new Promise((l,h)=>setTimeout(()=>h(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([s,o]),console.log(" Transaction updated in Firebase"),n({isLoading:!1})}catch(i){console.error("Update Transaction Failed:",i),console.log(" Error details:",{name:i?.name||"Unknown",message:i?.message||"Unknown",code:i?.code||"Unknown",isNetworkError:Gr(i)}),Gr(i)?(console.log(" Treating as offline scenario - keeping local transaction update"),n({isLoading:!1,pendingSync:!0,error:null})):n({error:i.message,isLoading:!1})}},restoreTransaction:async t=>{n(i=>({transactions:[...i.transactions,t],isLoading:!0}));try{n({isLoading:!1})}catch(i){console.error("Restore Transaction Failed:",i),n({error:i.message,isLoading:!1})}},importData:async t=>{try{if(!t.envelopes||!t.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const i=It();console.log(` Importing data for user: ${i}`);const s=t.envelopes.map(g=>({id:g.id||`imported-${Date.now()}-${Math.random()}`,name:g.name,currentBalance:g.currentBalance||g.budget||0,lastUpdated:new Date().toISOString(),isActive:g.isActive??!0,orderIndex:g.orderIndex??0,userId:i})),o=t.transactions.map(g=>({...g,id:g.id||`imported-${Date.now()}-${Math.random()}`,userId:i,date:g.date,amount:typeof g.amount=="number"?g.amount:parseFloat(g.amount)||0,type:g.type,reconciled:g.reconciled??!1})),l=(t.distributionTemplates||[]).map(g=>({...g,id:g.id||`imported-${Date.now()}-${Math.random()}`,userId:i})),h=t.appSettings?{...t.appSettings,id:t.appSettings.id||`settings-${i}`,userId:i}:null;console.log(` Importing: ${s.length} envelopes, ${o.length} transactions, ${l.length} templates`),n({envelopes:s,transactions:o,distributionTemplates:l,appSettings:h,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const g of s)try{await io.saveEnvelope(i,g),console.log(` Synced envelope: ${g.name}`)}catch(v){console.error(` Failed to sync envelope ${g.name}:`,v)}for(const g of o)try{const v={...g,amount:g.amount.toString(),type:g.type.toLowerCase(),date:Xe.fromDate(new Date(g.date))};await Hr.addTransaction(v),console.log(` Synced transaction: ${g.description}`)}catch(v){console.error(` Failed to sync transaction ${g.description}:`,v)}for(const g of l)try{await Pi.createDistributionTemplate(g),console.log(` Synced template: ${g.name}`)}catch(v){console.error(` Failed to sync template ${g.name}:`,v)}if(h)try{await Qs.createAppSettings(h),console.log(" Synced app settings")}catch(g){console.error(" Failed to sync app settings:",g)}console.log(" All imported data synced to Firebase"),n({pendingSync:!1})}catch(g){console.error(" Error syncing to Firebase:",g),n({pendingSync:!0})}const d=l.length,f=h?"Settings imported.":"";return{success:!0,message:`Imported and synced ${s.length} envelopes, ${o.length} transactions${d>0?`, ${d} templates`:""} to Firebase.${f?` ${f}`:""}`}}catch(i){return console.error("Import failed:",i),{success:!1,message:"Failed to import data. Check file format."}}},performFirebaseReset:async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),n({isLoading:!0});try{const t=It();console.log(" Querying Firebase for all data to delete...");const[i,s,o,l]=await Promise.all([io.getAllEnvelopes(t).catch(g=>(console.error(" Failed to fetch envelopes for reset:",g),[])),Hr.getAllTransactions(t).catch(g=>(console.error(" Failed to fetch transactions for reset:",g),[])),Pi.getAllDistributionTemplates(t).catch(g=>(console.error(" Failed to fetch templates for reset:",g),[])),Qs.getAppSettings(t).catch(g=>(console.error(" Failed to fetch settings for reset:",g),null))]);console.log(` Found in Firebase: ${i.length} envelopes, ${s.length} transactions, ${o.length} templates`);let h=0;for(const g of i)if(g.id)try{await io.deleteEnvelope(t,g.id),h++,console.log(` Deleted envelope: ${g.name||g.id}`)}catch(v){console.error(` Failed to delete envelope ${g.id}:`,v)}let d=0;for(const g of s)if(g.id)try{await Hr.deleteTransaction(t,g.id),d++,console.log(` Deleted transaction: ${g.id}`)}catch(v){console.error(` Failed to delete transaction ${g.id}:`,v)}let f=0;for(const g of o)if(g.id)try{await Pi.deleteDistributionTemplate(t,g.id),f++,console.log(` Deleted template: ${g.name||g.id}`)}catch(v){console.error(` Failed to delete template ${g.id}:`,v)}if(l?.id)try{await Qs.deleteAppSettings(t,l.id),console.log(" Deleted app settings")}catch(g){console.error(" Failed to delete app settings:",g)}console.log(` Firebase reset complete: Deleted ${h} envelopes, ${d} transactions, ${f} templates`),n({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(t){throw console.error(" Error during Firebase reset:",t),n({isLoading:!1,pendingSync:!0}),t}},resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),n({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(i){console.error(" Firebase reset failed, will retry on next sync:",i),n({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),n({isLoading:!1,pendingSync:!0})},renameEnvelope:async(t,i)=>{n(s=>({envelopes:s.envelopes.map(o=>o.id===t?{...o,name:i}:o),isLoading:!0}));try{n({isLoading:!1})}catch(s){console.error("Rename Envelope Failed:",s),n({error:s.message,isLoading:!1})}},saveTemplate:async(t,i,s)=>{console.log(" saveTemplate called with:",{name:t,distributions:i,note:s});try{const o=It(),l={id:`temp-${Date.now()}`,userId:o,name:t,note:s,lastUsed:new Date().toISOString(),distributions:i};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const h=Pi.createDistributionTemplate(l),d=new Promise((g,v)=>setTimeout(()=>v(new Error("Firebase timeout - likely offline")),5e3)),f=await Promise.race([h,d]);console.log(" Firebase template save succeeded (online mode):",f),n(g=>{const v=[...g.distributionTemplates,f];return console.log(" Updating store - old templates:",g.distributionTemplates.length,"new templates:",v.length),{distributionTemplates:v}}),console.log(" Template saved to Firebase:",f),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(h){throw console.log(" Firebase template save failed or timed out:",h.message),h}}catch(o){console.error(" Failed to save template to Firebase, saving locally:",o),console.log(" Error details:",{name:o?.name||"Unknown",message:o?.message||"Unknown",code:o?.code||"Unknown",isNetworkError:Gr(o)});const l=It(),h={id:`local-${Date.now()}`,userId:l,name:t,note:s,lastUsed:new Date().toISOString(),distributions:i};console.log(" Saving template locally (offline):",h),n(d=>({distributionTemplates:[...d.distributionTemplates,h],pendingSync:!0})),console.log(" Template saved locally as fallback:",h),console.log(" Store now has templates:",e().distributionTemplates.length)}},deleteTemplate:async t=>{try{const i=It();await Pi.deleteDistributionTemplate(i,t),n(s=>({distributionTemplates:s.distributionTemplates.filter(o=>o.id!==t)})),console.log(" Template deleted from Firebase:",t)}catch(i){throw console.error(" Failed to delete template from Firebase:",i),i}},updateAppSettings:async t=>{const i=e();if(!i.appSettings){try{await i.initializeAppSettings();const s=e();if(s.appSettings){const o={...s.appSettings,...t};n({appSettings:o});const l=It();await Qs.updateAppSettings(l,s.appSettings.id,t),console.log(" App settings updated successfully")}}catch(s){console.error(" Failed to initialize/update settings:",s)}return}try{n(o=>({appSettings:{...o.appSettings,...t}}));const s=It();await Qs.updateAppSettings(s,i.appSettings.id,t),console.log(" App settings updated successfully")}catch(s){throw console.error(" Failed to update app settings:",s),n(o=>({appSettings:o.appSettings})),s}},initializeAppSettings:async()=>{try{const i={userId:It(),theme:"system"},s=await Qs.createAppSettings(i);n({appSettings:s}),console.log(" App settings initialized successfully")}catch(t){console.error(" Failed to initialize app settings:",t);const i=It();n({appSettings:{id:"local-settings",userId:i,theme:"system"}})}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const t=e().distributionTemplates,i=e().envelopes,s=new Set(i.map(l=>l.id));let o=0;for(const l of t){const h={...l.distributions},d={};for(const[f,g]of Object.entries(l.distributions))s.has(f)&&(d[f]=g);if(Object.keys(d).length===0){console.log(` Deleting orphaned template: ${l.name}`);const f=It();await Pi.deleteDistributionTemplate(f,l.id),o++}else if(JSON.stringify(d)!==JSON.stringify(h)){console.log(` Updating template ${l.name} - removed orphaned envelope references`);const f=It();await Pi.updateDistributionTemplate(f,l.id,{distributions:d}),o++}}o>0?console.log(` Cleaned up ${o} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(t,i)=>{console.log(` Updating template references: ${t}  ${i}`);const s=e().distributionTemplates;let o=0;for(const l of s)if(l.distributions[t]!==void 0){const h={...l.distributions};h[i]=h[t],delete h[t],console.log(` Updating template: ${l.name}`);const d=It();await Pi.updateDistributionTemplate(d,l.id,{distributions:h}),o++}o>0&&console.log(` Updated ${o} templates with new envelope reference`)},removeEnvelopeFromTemplates:async t=>{console.log(` Removing envelope ${t} from all templates`);const i=e().distributionTemplates;let s=0,o=0;for(const l of i)if(l.distributions[t]!==void 0){const h={...l.distributions};if(delete h[t],Object.keys(h).length===0){console.log(` Deleting template ${l.name} - no envelopes left`);const d=It();await Pi.deleteDistributionTemplate(d,l.id),o++}else{console.log(` Removing envelope from template: ${l.name}`);const d=It();await Pi.updateDistributionTemplate(d,l.id,{distributions:h}),s++}}(s>0||o>0)&&console.log(` Updated ${s} templates, deleted ${o} empty templates`)},getEnvelopeBalance:t=>{const i=e();if(!i.envelopes.find(v=>v.id===t))return console.log(` getEnvelopeBalance: Envelope ${t} not found`),new $r(0);const o=i.transactions.filter(v=>v.envelopeId===t),l=o.filter(v=>v.type==="Expense"),h=o.filter(v=>v.type==="Income"),d=l.reduce((v,_)=>v.plus(new $r(_.amount||0)),new $r(0));return h.reduce((v,_)=>v.plus(new $r(_.amount||0)),new $r(0)).minus(d)}})),fz=n=>({id:n.id,date:n.date?.toDate?.()?n.date.toDate().toISOString():n.date,amount:parseFloat(n.amount)||0,description:n.description||"",envelopeId:n.envelopeId||"",reconciled:n.reconciled||!1,type:n.type==="income"?"Income":n.type==="expense"?"Expense":"Transfer",transferId:n.transferId||void 0,userId:n.userId||void 0});typeof window<"u"&&(window.addEventListener("online",async()=>{await En.getState().updateOnlineStatus();const n=En.getState();n.isOnline&&(n.pendingSync||n.resetPending)&&(console.log(" Auto-syncing pending operations..."),n.syncData())}),window.addEventListener("offline",()=>{En.setState({isOnline:!1})}),setTimeout(()=>{En.getState().updateOnlineStatus()},1e3),rd.subscribe(n=>{!n.isAuthenticated&&!n.isLoading&&(console.log(" User logged out, clearing data"),WC())}));const mz=({isOpen:n,onClose:e})=>{const{envelopes:t,addToEnvelope:i,distributionTemplates:s,saveTemplate:o,deleteTemplate:l,getEnvelopeBalance:h}=En(),[d,f]=L.useState(""),[g,v]=L.useState({}),[_,S]=L.useState(""),[R,D]=L.useState(!1),[k,z]=L.useState(!1),[U,P]=L.useState(""),W=L.useMemo(()=>t.sort((ge,F)=>ge.name.localeCompare(F.name)),[t]),ne=parseFloat(d)||0,ee=L.useMemo(()=>Object.values(g).reduce((ge,F)=>ge+F,0),[g]),x=ne-ee,I=Math.abs(x)<.01,V=ne>0&&I,M=ee>0&&I,N=(ge,F)=>{const se=parseFloat(F);v(he=>({...he,[ge]:isNaN(se)?0:se}))},H=()=>{V&&(Object.entries(g).forEach(([ge,F])=>{F>0&&i(ge,F,_||"Deposit",new Date)}),f(""),v({}),S(""),e())},O=()=>{U.trim()&&(o(U,g,_),D(!1),P(""))},ze=ge=>{const F=Object.fromEntries(Object.entries(ge.distributions).filter(([he])=>W.some(Te=>Te.id===he)));v(F);const se=Object.values(F).reduce((he,Te)=>he+Te,0);f(se.toFixed(2)),S(ge.note||""),z(!1)};return n?E.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-gray-50 dark:bg-black sm:bg-gray-100 dark:sm:bg-black",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 flex items-center justify-between shadow-sm shrink-0",children:[E.jsx("button",{onClick:e,className:"text-blue-600 dark:text-blue-400 font-medium text-base",children:"Cancel"}),E.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:"Distribute Funds"}),E.jsx("button",{onClick:H,disabled:!V,className:`font-bold text-base ${V?"text-blue-600 dark:text-blue-400":"text-gray-300 dark:text-zinc-600"}`,children:"Apply"})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 relative",children:[E.jsxs("div",{className:"sticky top-0 z-10 bg-gray-50/95 dark:bg-black/95 backdrop-blur-sm border-b border-gray-200 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[E.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[E.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-zinc-400 mb-1",children:"Deposit Amount"}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mr-2",children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",value:d,onChange:ge=>f(ge.target.value),placeholder:"0.00",className:"text-3xl font-bold text-black dark:text-white w-full focus:outline-none bg-white dark:bg-zinc-900 placeholder-gray-300 dark:placeholder-zinc-600 appearance-none",autoFocus:!0})]})]}),E.jsxs("div",{className:"flex justify-between items-center text-sm font-medium px-1",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Distributed"}),E.jsxs("span",{className:"text-gray-900 dark:text-white",children:["$",ee.toFixed(2)]})]}),E.jsxs("div",{className:"flex flex-col items-end",children:[E.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Remaining"}),E.jsxs("span",{className:`text-lg ${x===0?"text-green-600 dark:text-green-400":x<0?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:["$",x.toFixed(2)]})]})]}),!I&&ne>0&&E.jsx("div",{className:"text-center text-sm font-medium text-red-500 dark:text-red-400",children:x>0?`You still have $${x.toFixed(2)} to distribute`:`You have over-allocated by $${Math.abs(x).toFixed(2)}`}),E.jsx("div",{className:"pt-2",children:M?E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("button",{onClick:()=>z(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[E.jsx(Sm,{size:16}),"Load Template"]}),E.jsxs("button",{onClick:()=>D(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 text-green-400 rounded-lg font-medium text-sm hover:bg-gray-700 transition-colors",children:[E.jsx(M4,{size:16}),"Save Template"]})]}):E.jsxs("div",{className:"flex flex-col gap-3",children:[E.jsxs("button",{onClick:()=>z(!0),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[E.jsx(Sm,{size:16}),"Load Template"]}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center px-2 leading-relaxed",children:"You can save this as a template once the Deposit Amount and Total Distributed are equal (Remaining = $0)."})]})}),E.jsx("input",{type:"text",placeholder:"Distribution Note (Optional)",value:_,onChange:ge=>S(ge.target.value),className:"w-full p-3 text-sm bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:outline-none text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600"})]}),E.jsx("div",{className:"p-4 space-y-3",children:W.filter(ge=>ge.id).map(ge=>{const F=ge.id,se=g[F]||0,he=ee>0?Math.round(se/ee*100):0;return E.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex items-center justify-between",children:[E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:ge.name}),se>0&&E.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:[he,"%"]})]}),E.jsxs("div",{className:"text-xs text-gray-400 dark:text-zinc-400",children:["Balance: $",h(ge.id).toNumber().toFixed(2)]})]}),E.jsxs("div",{className:"w-32 relative",children:[E.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",value:g[F]===0?"":g[F],onChange:Te=>N(F,Te.target.value),placeholder:"0",className:"w-full pl-6 pr-6 py-2 text-right bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 outline-none font-mono text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600 appearance-none"})]})]},F)})})]}),R&&E.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-gray-200 dark:border-zinc-700",children:[E.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Save Template"}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Name your template to easily recall this distribution later."}),E.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g. Payday Split",value:U,onChange:ge=>P(ge.target.value),className:"w-full p-3 bg-gray-100 dark:bg-black rounded-xl mb-4 text-gray-900 dark:text-white border border-transparent focus:border-blue-500 outline-none"}),E.jsxs("div",{className:"flex gap-3",children:[E.jsx("button",{onClick:()=>D(!1),className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-semibold",children:"Cancel"}),E.jsx("button",{onClick:O,disabled:!U.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold disabled:opacity-50",children:"Save"})]})]})}),k&&E.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-end sm:items-center justify-center sm:p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-t-2xl sm:rounded-2xl shadow-2xl border-t sm:border border-gray-200 dark:border-zinc-700 max-h-[80vh] flex flex-col",children:[E.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-zinc-800 flex justify-between items-center",children:[E.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Load Template"}),E.jsx("button",{onClick:()=>z(!1),className:"p-1 rounded-full bg-gray-100 dark:bg-zinc-800 text-gray-500",children:E.jsx(n_,{size:20})})]}),E.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:s.length===0?E.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No templates saved yet."}):s.map(ge=>E.jsxs("div",{className:"flex items-center gap-2 p-3 hover:bg-gray-50 dark:hover:bg-zinc-800/50 rounded-xl group transition-colors",children:[E.jsxs("button",{onClick:()=>ze(ge),className:"flex-1 text-left",children:[E.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:ge.name}),E.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: $",Object.values(ge.distributions).reduce((F,se)=>F+se,0).toFixed(2),ge.note&&E.jsxs("span",{className:"ml-2 opacity-75",children:[" ",ge.note]})]})]}),E.jsx("button",{onClick:F=>{F.stopPropagation(),confirm("Delete this template?")&&l(ge.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:E.jsx(xm,{size:18})})]},ge.id))})]})})]}):null},pz=()=>{const{envelopes:n,transactions:e,fetchData:t,isOnline:i,pendingSync:s,syncData:o,isLoading:l,getEnvelopeBalance:h}=En(),[d,f]=L.useState(!1),g=zo();L.useEffect(()=>{n.length===0&&t()},[]);const v=[...n].sort((S,R)=>S.name.localeCompare(R.name));console.log(" EnvelopeListView render - calculating balances"),console.log(" Current envelopes:",n.length),console.log(" Current transactions:",e.length);const _=n.reduce((S,R)=>{const D=h(R.id);return console.log(` Envelope ${R.name} (${R.id}): $${D.toNumber().toFixed(2)}`),S+D.toNumber()},0);return console.log(" Total balance:",_),E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-10",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("div",{className:"flex items-center gap-2",children:i?l?E.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[E.jsx(z0,{size:16,className:"animate-spin"}),E.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):s?E.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[E.jsx(z0,{size:16}),E.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):E.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[E.jsx(X4,{size:16}),E.jsx("span",{className:"text-sm font-medium",children:"Synced"})]}):E.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[E.jsx(Q4,{size:16}),E.jsx("span",{className:"text-sm font-medium",children:l?"Offline (Saving...)":"Offline"})]})}),E.jsxs("div",{className:"flex gap-4 text-blue-500",children:[E.jsx("button",{onClick:()=>g("/transactions"),children:E.jsx(I4,{size:22})}),E.jsx("button",{onClick:()=>g("/settings"),children:E.jsx(j4,{size:22})})]})]}),E.jsx("div",{className:"mt-4",children:E.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"House Expenses"})})]}),E.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[E.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 space-y-4",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("span",{className:"text-gray-600 dark:text-zinc-400 font-medium",children:"Total Balance"}),E.jsxs("span",{className:`text-2xl font-bold ${_>=0?"text-green-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[_<0?"-":"","$",Math.abs(_).toFixed(2)]})]}),E.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-50 dark:bg-blue-900/40 text-blue-600 dark:text-blue-300 py-3 rounded-xl font-semibold active:bg-blue-100 dark:active:bg-blue-900/60 transition-colors",children:[E.jsx(x4,{size:20,className:"rotate-90"}),"Distribute Funds"]})]}),E.jsx("section",{children:v.length===0?E.jsxs("div",{className:"text-center py-10 space-y-3",children:[E.jsx($4,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto"}),E.jsx("h3",{className:"text-gray-500 dark:text-zinc-400 font-medium",children:"No envelopes yet"}),E.jsx("button",{onClick:()=>g("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium",children:"Create First Envelope"})]}):E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{className:"flex justify-between items-end px-1",children:[E.jsx("h2",{className:"text-sm font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-wider",children:"My Envelopes"}),E.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-300 font-medium",onClick:()=>g("/add-envelope"),children:"+ New Envelope"})]}),v.map(S=>E.jsxs("div",{onClick:()=>g(`/envelope/${S.id}`),className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex justify-between items-center active:scale-[0.99] transition-transform cursor-pointer",children:[E.jsx("div",{className:"flex flex-col",children:E.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:S.name})}),E.jsxs("span",{className:`font-bold ${h(S.id).toNumber()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-emerald-400"}`,children:[h(S.id).toNumber()<0?"-":"","$",Math.abs(h(S.id).toNumber()).toFixed(2)]})]},S.id))]})})]}),E.jsx("button",{onClick:()=>g("/add-transaction"),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",children:E.jsx(h4,{size:28})}),E.jsx(mz,{isOpen:d,onClose:()=>f(!1)})]})},gb=i_((n,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(t,i="neutral",s)=>{n({message:t,type:i,isVisible:!0,undoAction:s}),setTimeout(()=>{e().hideToast()},4e3)},hideToast:()=>{n({isVisible:!1})}})),ZC=({isVisible:n,onClose:e,mode:t,currentEnvelope:i,initialTransaction:s})=>{const{addToEnvelope:o,spendFromEnvelope:l,updateTransaction:h,deleteTransaction:d}=En(),[f,g]=L.useState(""),[v,_]=L.useState(""),[S,R]=L.useState(new Date().toISOString().split("T")[0]);if(L.useEffect(()=>{if(!n)return;const P=window.setTimeout(()=>{if(t==="edit"&&s){g(s.amount.toString()),_(s.description);try{const W=new Date(s.date);isNaN(W.getTime())?(console.warn("Invalid date in transaction:",s.date),R(new Date().toISOString().split("T")[0])):R(W.toISOString().split("T")[0])}catch(W){console.error("Error parsing transaction date:",W),R(new Date().toISOString().split("T")[0])}}else g(""),_(""),R(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(P)},[n,t,s]),!n)return null;const D=P=>{P.preventDefault();const W=parseFloat(f);isNaN(W)||W<=0||(t==="add"?o(i.id,W,v,new Date(S)):t==="spend"?l(i.id,W,v,new Date(S)):t==="edit"&&s&&h({...s,amount:W,description:v,date:new Date(S).toISOString()}),e())},k=()=>{!s||!s.id||window.confirm("Are you sure you want to delete this transaction?")&&(d(s.id),e())},z=t==="add"?"Add Money":t==="spend"?"Spend Money":"Edit Transaction",U=t==="add"?"text-green-500":"text-red-500";return E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[E.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[E.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),E.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:z}),E.jsx("button",{onClick:D,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0,children:"Save"})]}),E.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),E.jsxs("div",{className:"relative inline-block",children:[E.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${U}`,children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:f,onChange:P=>{const W=P.target.value;(W===""||!isNaN(parseFloat(W))&&parseFloat(W)>=0)&&g(W)},onKeyDown:P=>{(P.key==="e"||P.key==="E"||P.key==="+"||P.key==="-")&&P.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${U} placeholder-gray-700`})]})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),E.jsx("input",{type:"text",value:v,onChange:P=>_(P.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),E.jsx("input",{type:"date",value:S,onChange:P=>{console.log("Date changed to:",P.target.value),R(P.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),t==="edit"&&E.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:E.jsxs("button",{type:"button",onClick:k,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[E.jsx(TI,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},gz=({isVisible:n,onClose:e,sourceEnvelope:t})=>{const{envelopes:i,transferFunds:s}=En(),[o,l]=L.useState(""),[h,d]=L.useState(""),[f,g]=L.useState(""),[v,_]=L.useState(new Date().toISOString().split("T")[0]),S=i.filter(k=>k.id!==t.id);if(L.useEffect(()=>{if(!n)return;const k=window.setTimeout(()=>{l(""),d(""),g(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(k)},[n]),!n)return null;const R=k=>{k.preventDefault();const z=parseFloat(h);isNaN(z)||z<=0||!o||(s(t.id,o,z,f,new Date(v)),e())},D=i.find(k=>k.id===o);return E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[E.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[E.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),E.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),E.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!h||parseFloat(h)<=0||!o,children:"Transfer"})]}),E.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),E.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.name})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),E.jsxs("select",{value:o,onChange:k=>l(k.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[E.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),S.map(k=>E.jsx("option",{value:k.id,className:"bg-white dark:bg-zinc-900",children:k.name},k.id))]})]}),E.jsxs("div",{className:"text-center",children:[E.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),E.jsxs("div",{className:"relative inline-block",children:[E.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),E.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:h,onChange:k=>d(k.target.value),onKeyDown:k=>{(k.key==="e"||k.key==="E"||k.key==="+"||k.key==="-")&&k.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),E.jsx("input",{type:"text",value:f,onChange:k=>g(k.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[E.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),E.jsx("input",{type:"date",value:v,onChange:k=>_(k.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),D&&h&&parseFloat(h)>0&&E.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",E.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(h).toFixed(2)]})," from"," ",E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t.name})," to"," ",E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:D.name})]})]})]})})},yz=n=>{if(!n)return"No Date";try{let e;return n&&typeof n=="object"&&n.toDate&&typeof n.toDate=="function"?e=n.toDate():typeof n=="number"?n<1e10?e=new Date((n+978307200)*1e3):e=new Date(n):e=new Date(n),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},vz=n=>{const e=typeof n=="string"?parseFloat(n):n;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},JC=({transaction:n,envelopeName:e,onReconcile:t,onEdit:i})=>{if(!n)return null;const s=n.type==="Income",o=n.type==="Expense";let l="text-gray-900 dark:text-white";return s&&(l="text-green-600 dark:text-green-400"),o&&(l="text-red-600 dark:text-red-400"),E.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[E.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:n.description||"No Description"}),n.reconciled&&E.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),E.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[E.jsx("span",{children:yz(n.date)}),e&&E.jsxs(E.Fragment,{children:[E.jsx("span",{children:""}),E.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${l}`,children:[o?"-":s?"+":"",vz(n.amount)]}),t?E.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),t()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":n.reconciled?"Mark as unreconciled":"Mark as reconciled",children:n.reconciled?E.jsx(Lw,{className:"text-green-500",size:20}):E.jsx(jw,{className:"text-gray-400",size:20})}):E.jsx("span",{children:n.reconciled?E.jsx(Lw,{className:"text-green-500",size:20}):E.jsx(jw,{className:"text-gray-400",size:20})})]})]})},yb=L.createContext({});function Hp(n){const e=L.useRef(null);return e.current===null&&(e.current=n()),e.current}const vb=typeof window<"u",_b=vb?L.useLayoutEffect:L.useEffect,Gp=L.createContext(null);function bb(n,e){n.indexOf(e)===-1&&n.push(e)}function Tb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ss=(n,e,t)=>t>e?e:t<n?n:t;let Eb=()=>{};const as={},eD=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function tD(n){return typeof n=="object"&&n!==null}const nD=n=>/^0[^.\s]+$/u.test(n);function wb(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ti=n=>n,_z=(n,e)=>t=>e(n(t)),sd=(...n)=>n.reduce(_z),Oh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class Sb{constructor(){this.subscriptions=[]}add(e){return bb(this.subscriptions,e),()=>Tb(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _r=n=>n*1e3,_i=n=>n/1e3;function iD(n,e){return e?n*(1e3/e):0}const rD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,bz=1e-7,Tz=12;function Ez(n,e,t,i,s){let o,l,h=0;do l=e+(t-e)/2,o=rD(l,i,s)-n,o>0?t=l:e=l;while(Math.abs(o)>bz&&++h<Tz);return l}function ad(n,e,t,i){if(n===e&&t===i)return Ti;const s=o=>Ez(o,0,1,n,t);return o=>o===0||o===1?o:rD(s(o),e,i)}const sD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,aD=n=>e=>1-n(1-e),oD=ad(.33,1.53,.69,.99),xb=aD(oD),lD=sD(xb),uD=n=>(n*=2)<1?.5*xb(n):.5*(2-Math.pow(2,-10*(n-1))),Ab=n=>1-Math.sin(Math.acos(n)),cD=aD(Ab),hD=sD(Ab),wz=ad(.42,0,1,1),Sz=ad(0,0,.58,1),dD=ad(.42,0,.58,1),xz=n=>Array.isArray(n)&&typeof n[0]!="number",fD=n=>Array.isArray(n)&&typeof n[0]=="number",Az={linear:Ti,easeIn:wz,easeInOut:dD,easeOut:Sz,circIn:Ab,circInOut:hD,circOut:cD,backIn:xb,backInOut:lD,backOut:oD,anticipate:uD},Iz=n=>typeof n=="string",Fx=n=>{if(fD(n)){Eb(n.length===4);const[e,t,i,s]=n;return ad(e,t,i,s)}else if(Iz(n))return Az[n];return n},Yf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Rz(n,e){let t=new Set,i=new Set,s=!1,o=!1;const l=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(f.schedule(g),n()),g(h)}const f={schedule:(g,v=!1,_=!1)=>{const R=_&&s?t:i;return v&&l.add(g),R.has(g)||R.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(h=g,s){o=!0;return}s=!0,[t,i]=[i,t],t.forEach(d),t.clear(),s=!1,o&&(o=!1,f.process(g))}};return f}const Cz=40;function mD(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=Yf.reduce((P,W)=>(P[W]=Rz(o),P),{}),{setup:h,read:d,resolveKeyframes:f,preUpdate:g,update:v,preRender:_,render:S,postRender:R}=l,D=()=>{const P=as.useManualTiming?s.timestamp:performance.now();t=!1,as.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(P-s.timestamp,Cz),1)),s.timestamp=P,s.isProcessing=!0,h.process(s),d.process(s),f.process(s),g.process(s),v.process(s),_.process(s),S.process(s),R.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(D))},k=()=>{t=!0,i=!0,s.isProcessing||n(D)};return{schedule:Yf.reduce((P,W)=>{const ne=l[W];return P[W]=(ee,x=!1,I=!1)=>(t||k(),ne.schedule(ee,x,I)),P},{}),cancel:P=>{for(let W=0;W<Yf.length;W++)l[Yf[W]].cancel(P)},state:s,steps:l}}const{schedule:Tt,cancel:ga,state:fn,steps:E0}=mD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ti,!0);let _m;function Dz(){_m=void 0}const Fn={now:()=>(_m===void 0&&Fn.set(fn.isProcessing||as.useManualTiming?fn.timestamp:performance.now()),_m),set:n=>{_m=n,queueMicrotask(Dz)}},pD=n=>e=>typeof e=="string"&&e.startsWith(n),Ib=pD("--"),Nz=pD("var(--"),Rb=n=>Nz(n)?kz.test(n.split("/*")[0].trim()):!1,kz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ku={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Lh={...ku,transform:n=>ss(0,1,n)},Xf={...ku,default:1},hh=n=>Math.round(n*1e5)/1e5,Cb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Vz(n){return n==null}const Mz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Db=(n,e)=>t=>!!(typeof t=="string"&&Mz.test(t)&&t.startsWith(n)||e&&!Vz(t)&&Object.prototype.hasOwnProperty.call(t,e)),gD=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,o,l,h]=i.match(Cb);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:h!==void 0?parseFloat(h):1}},Pz=n=>ss(0,255,n),w0={...ku,transform:n=>Math.round(Pz(n))},yo={test:Db("rgb","red"),parse:gD("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+w0.transform(n)+", "+w0.transform(e)+", "+w0.transform(t)+", "+hh(Lh.transform(i))+")"};function Oz(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Rv={test:Db("#"),parse:Oz,transform:yo.transform},od=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ys=od("deg"),br=od("%"),Ne=od("px"),Lz=od("vh"),jz=od("vw"),qx={...br,parse:n=>br.parse(n)/100,transform:n=>br.transform(n*100)},Hl={test:Db("hsl","hue"),parse:gD("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+br.transform(hh(e))+", "+br.transform(hh(t))+", "+hh(Lh.transform(i))+")"},Qt={test:n=>yo.test(n)||Rv.test(n)||Hl.test(n),parse:n=>yo.test(n)?yo.parse(n):Hl.test(n)?Hl.parse(n):Rv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?yo.transform(n):Hl.transform(n),getAnimatableNone:n=>{const e=Qt.parse(n);return e.alpha=0,Qt.transform(e)}},zz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Uz(n){return isNaN(n)&&typeof n=="string"&&(n.match(Cb)?.length||0)+(n.match(zz)?.length||0)>0}const yD="number",vD="color",Bz="var",Fz="var(",Hx="${}",qz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let o=0;const h=e.replace(qz,d=>(Qt.test(d)?(i.color.push(o),s.push(vD),t.push(Qt.parse(d))):d.startsWith(Fz)?(i.var.push(o),s.push(Bz),t.push(d)):(i.number.push(o),s.push(yD),t.push(parseFloat(d))),++o,Hx)).split(Hx);return{values:t,split:h,indexes:i,types:s}}function _D(n){return jh(n).values}function bD(n){const{split:e,types:t}=jh(n),i=e.length;return s=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],s[l]!==void 0){const h=t[l];h===yD?o+=hh(s[l]):h===vD?o+=Qt.transform(s[l]):o+=s[l]}return o}}const Hz=n=>typeof n=="number"?0:Qt.test(n)?Qt.getAnimatableNone(n):n;function Gz(n){const e=_D(n);return bD(n)(e.map(Hz))}const ya={test:Uz,parse:_D,createTransformer:bD,getAnimatableNone:Gz};function S0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function $z({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const h=t<.5?t*(1+e):t+e-t*e,d=2*t-h;s=S0(d,h,n+1/3),o=S0(d,h,n),l=S0(d,h,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function tp(n,e){return t=>t>0?e:n}const wt=(n,e,t)=>n+(e-n)*t,x0=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},Kz=[Rv,yo,Hl],Qz=n=>Kz.find(e=>e.test(n));function Gx(n){const e=Qz(n);if(!e)return!1;let t=e.parse(n);return e===Hl&&(t=$z(t)),t}const $x=(n,e)=>{const t=Gx(n),i=Gx(e);if(!t||!i)return tp(n,e);const s={...t};return o=>(s.red=x0(t.red,i.red,o),s.green=x0(t.green,i.green,o),s.blue=x0(t.blue,i.blue,o),s.alpha=wt(t.alpha,i.alpha,o),yo.transform(s))},Cv=new Set(["none","hidden"]);function Yz(n,e){return Cv.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Xz(n,e){return t=>wt(n,e,t)}function Nb(n){return typeof n=="number"?Xz:typeof n=="string"?Rb(n)?tp:Qt.test(n)?$x:Jz:Array.isArray(n)?TD:typeof n=="object"?Qt.test(n)?$x:Wz:tp}function TD(n,e){const t=[...n],i=t.length,s=n.map((o,l)=>Nb(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)t[l]=s[l](o);return t}}function Wz(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=Nb(n[s])(n[s],e[s]));return s=>{for(const o in i)t[o]=i[o](s);return t}}function Zz(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][i[o]],h=n.values[l]??0;t[s]=h,i[o]++}return t}const Jz=(n,e)=>{const t=ya.createTransformer(e),i=jh(n),s=jh(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Cv.has(n)&&!s.values.length||Cv.has(e)&&!i.values.length?Yz(n,e):sd(TD(Zz(i,s),s.values),t):tp(n,e)};function ED(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?wt(n,e,t):Nb(n)(n,e)}const eU=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Tt.update(e,t),stop:()=>ga(e),now:()=>fn.isProcessing?fn.timestamp:Fn.now()}},wD=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)i+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},np=2e4;function kb(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<np;)e+=t,i=n.next(e);return e>=np?1/0:e}function tU(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(kb(i),np);return{type:"keyframes",ease:o=>i.next(s*o).value/e,duration:_i(s)}}const nU=5;function SD(n,e,t){const i=Math.max(e-nU,0);return iD(t-n(i),e-i)}const Rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},A0=.001;function iU({duration:n=Rt.duration,bounce:e=Rt.bounce,velocity:t=Rt.velocity,mass:i=Rt.mass}){let s,o,l=1-e;l=ss(Rt.minDamping,Rt.maxDamping,l),n=ss(Rt.minDuration,Rt.maxDuration,_i(n)),l<1?(s=f=>{const g=f*l,v=g*n,_=g-t,S=Dv(f,l),R=Math.exp(-v);return A0-_/S*R},o=f=>{const v=f*l*n,_=v*t+t,S=Math.pow(l,2)*Math.pow(f,2)*n,R=Math.exp(-v),D=Dv(Math.pow(f,2),l);return(-s(f)+A0>0?-1:1)*((_-S)*R)/D}):(s=f=>{const g=Math.exp(-f*n),v=(f-t)*n+1;return-A0+g*v},o=f=>{const g=Math.exp(-f*n),v=(t-f)*(n*n);return g*v});const h=5/n,d=sU(s,o,h);if(n=_r(n),isNaN(d))return{stiffness:Rt.stiffness,damping:Rt.damping,duration:n};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:n}}}const rU=12;function sU(n,e,t){let i=t;for(let s=1;s<rU;s++)i=i-n(i)/e(i);return i}function Dv(n,e){return n*Math.sqrt(1-e*e)}const aU=["duration","bounce"],oU=["stiffness","damping","mass"];function Kx(n,e){return e.some(t=>n[t]!==void 0)}function lU(n){let e={velocity:Rt.velocity,stiffness:Rt.stiffness,damping:Rt.damping,mass:Rt.mass,isResolvedFromDuration:!1,...n};if(!Kx(n,oU)&&Kx(n,aU))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,o=2*ss(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Rt.mass,stiffness:s,damping:o}}else{const t=iU(n);e={...e,...t,mass:Rt.mass},e.isResolvedFromDuration=!0}return e}function ip(n=Rt.visualDuration,e=Rt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],h={done:!1,value:o},{stiffness:d,damping:f,mass:g,duration:v,velocity:_,isResolvedFromDuration:S}=lU({...t,velocity:-_i(t.velocity||0)}),R=_||0,D=f/(2*Math.sqrt(d*g)),k=l-o,z=_i(Math.sqrt(d/g)),U=Math.abs(k)<5;i||(i=U?Rt.restSpeed.granular:Rt.restSpeed.default),s||(s=U?Rt.restDelta.granular:Rt.restDelta.default);let P;if(D<1){const ne=Dv(z,D);P=ee=>{const x=Math.exp(-D*z*ee);return l-x*((R+D*z*k)/ne*Math.sin(ne*ee)+k*Math.cos(ne*ee))}}else if(D===1)P=ne=>l-Math.exp(-z*ne)*(k+(R+z*k)*ne);else{const ne=z*Math.sqrt(D*D-1);P=ee=>{const x=Math.exp(-D*z*ee),I=Math.min(ne*ee,300);return l-x*((R+D*z*k)*Math.sinh(I)+ne*k*Math.cosh(I))/ne}}const W={calculatedDuration:S&&v||null,next:ne=>{const ee=P(ne);if(S)h.done=ne>=v;else{let x=ne===0?R:0;D<1&&(x=ne===0?_r(R):SD(P,ne,ee));const I=Math.abs(x)<=i,V=Math.abs(l-ee)<=s;h.done=I&&V}return h.value=h.done?l:ee,h},toString:()=>{const ne=Math.min(kb(W),np),ee=wD(x=>W.next(ne*x).value,ne,30);return ne+"ms "+ee},toTransition:()=>{}};return W}ip.applyToOptions=n=>{const e=tU(n,100,ip);return n.ease=e.ease,n.duration=_r(e.duration),n.type="keyframes",n};function Nv({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:h,max:d,restDelta:f=.5,restSpeed:g}){const v=n[0],_={done:!1,value:v},S=I=>h!==void 0&&I<h||d!==void 0&&I>d,R=I=>h===void 0?d:d===void 0||Math.abs(h-I)<Math.abs(d-I)?h:d;let D=t*e;const k=v+D,z=l===void 0?k:l(k);z!==k&&(D=z-v);const U=I=>-D*Math.exp(-I/i),P=I=>z+U(I),W=I=>{const V=U(I),M=P(I);_.done=Math.abs(V)<=f,_.value=_.done?z:M};let ne,ee;const x=I=>{S(_.value)&&(ne=I,ee=ip({keyframes:[_.value,R(_.value)],velocity:SD(P,I,_.value),damping:s,stiffness:o,restDelta:f,restSpeed:g}))};return x(0),{calculatedDuration:null,next:I=>{let V=!1;return!ee&&ne===void 0&&(V=!0,W(I),x(I)),ne!==void 0&&I>=ne?ee.next(I-ne):(!V&&W(I),_)}}}function uU(n,e,t){const i=[],s=t||as.mix||ED,o=n.length-1;for(let l=0;l<o;l++){let h=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Ti:e;h=sd(d,h)}i.push(h)}return i}function cU(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const o=n.length;if(Eb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=uU(e,i,s),d=h.length,f=g=>{if(l&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const _=Oh(n[v],n[v+1],g);return h[v](_)};return t?g=>f(ss(n[0],n[o-1],g)):f}function hU(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=Oh(0,e,i);n.push(wt(t,1,s))}}function dU(n){const e=[0];return hU(e,n.length-1),e}function fU(n,e){return n.map(t=>t*e)}function mU(n,e){return n.map(()=>e||dD).splice(0,n.length-1)}function dh({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=xz(i)?i.map(Fx):Fx(i),o={done:!1,value:e[0]},l=fU(t&&t.length===e.length?t:dU(e),n),h=cU(l,e,{ease:Array.isArray(s)?s:mU(e,s)});return{calculatedDuration:n,next:d=>(o.value=h(d),o.done=d>=n,o)}}const pU=n=>n!==null;function Vb(n,{repeat:e,repeatType:t="loop"},i,s=1){const o=n.filter(pU),h=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!h||i===void 0?o[h]:i}const gU={decay:Nv,inertia:Nv,tween:dh,keyframes:dh,spring:ip};function xD(n){typeof n.type=="string"&&(n.type=gU[n.type])}class Mb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const yU=n=>n/100;class Pb extends Mb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Fn.now()&&this.tick(Fn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;xD(e);const{type:t=dh,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:h}=e;const d=t||dh;d!==dh&&typeof h[0]!="number"&&(this.mixKeyframes=sd(yU,ED(h[0],h[1])),h=[0,100]);const f=d({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=kb(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:v,repeatType:_,repeatDelay:S,type:R,onUpdate:D,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const z=this.currentTime-f*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?z<0:z>s;this.currentTime=Math.max(z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let P=this.currentTime,W=i;if(v){const I=Math.min(this.currentTime,s)/h;let V=Math.floor(I),M=I%1;!M&&I>=1&&(M=1),M===1&&V--,V=Math.min(V,v+1),!!(V%2)&&(_==="reverse"?(M=1-M,S&&(M-=S/h)):_==="mirror"&&(W=l)),P=ss(0,1,M)*h}const ne=U?{done:!1,value:g[0]}:W.next(P);o&&(ne.value=o(ne.value));let{done:ee}=ne;!U&&d!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return x&&R!==Nv&&(ne.value=Vb(g,this.options,k,this.speed)),D&&D(ne.value),x&&this.finish(),ne}then(e,t){return this.finished.then(e,t)}get duration(){return _i(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_i(e)}get time(){return _i(this.currentTime)}set time(e){e=_r(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Fn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=_i(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=eU,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function vU(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const vo=n=>n*180/Math.PI,kv=n=>{const e=vo(Math.atan2(n[1],n[0]));return Vv(e)},_U={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:kv,rotateZ:kv,skewX:n=>vo(Math.atan(n[1])),skewY:n=>vo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Vv=n=>(n=n%360,n<0&&(n+=360),n),Qx=kv,Yx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Xx=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),bU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Yx,scaleY:Xx,scale:n=>(Yx(n)+Xx(n))/2,rotateX:n=>Vv(vo(Math.atan2(n[6],n[5]))),rotateY:n=>Vv(vo(Math.atan2(-n[2],n[0]))),rotateZ:Qx,rotate:Qx,skewX:n=>vo(Math.atan(n[4])),skewY:n=>vo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Mv(n){return n.includes("scale")?1:0}function Pv(n,e){if(!n||n==="none")return Mv(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=bU,s=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=_U,s=h}if(!s)return Mv(e);const o=i[e],l=s[1].split(",").map(EU);return typeof o=="function"?o(l):l[o]}const TU=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Pv(t,e)};function EU(n){return parseFloat(n.trim())}const Vu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mu=new Set(Vu),Wx=n=>n===ku||n===Ne,wU=new Set(["x","y","z"]),SU=Vu.filter(n=>!wU.has(n));function xU(n){const e=[];return SU.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const xo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Pv(e,"x"),y:(n,{transform:e})=>Pv(e,"y")};xo.translateX=xo.x;xo.translateY=xo.y;const Ao=new Set;let Ov=!1,Lv=!1,jv=!1;function AD(){if(Lv){const n=Array.from(Ao).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=xU(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([o,l])=>{i.getValue(o)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Lv=!1,Ov=!1,Ao.forEach(n=>n.complete(jv)),Ao.clear()}function ID(){Ao.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Lv=!0)})}function AU(){jv=!0,ID(),AD(),jv=!1}class Ob{constructor(e,t,i,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Ao.add(this),Ov||(Ov=!0,Tt.read(ID),Tt.resolveKeyframes(AD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const h=i.readValue(t,l);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}vU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ao.delete(this)}cancel(){this.state==="scheduled"&&(Ao.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const IU=n=>n.startsWith("--");function RU(n,e,t){IU(e)?n.style.setProperty(e,t):n.style[e]=t}const CU=wb(()=>window.ScrollTimeline!==void 0),DU={};function NU(n,e){const t=wb(n);return()=>DU[e]??t()}const RD=NU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Jc=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Zx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jc([0,.65,.55,1]),circOut:Jc([.55,0,1,.45]),backIn:Jc([.31,.01,.66,-.59]),backOut:Jc([.33,1.53,.69,.99])};function CD(n,e){if(n)return typeof n=="function"?RD()?wD(n,e):"ease-out":fD(n)?Jc(n):Array.isArray(n)?n.map(t=>CD(t,e)||Zx.easeOut):Zx[n]}function kU(n,e,t,{delay:i=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:h="easeOut",times:d}={},f=void 0){const g={[e]:t};d&&(g.offset=d);const v=CD(h,s);Array.isArray(v)&&(g.easing=v);const _={delay:i,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),n.animate(g,_)}function DD(n){return typeof n=="function"&&"applyToOptions"in n}function VU({type:n,...e}){return DD(n)&&RD()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class MU extends Mb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,Eb(typeof e.type!="string");const f=VU(e);this.animation=kU(t,i,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Vb(s,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):RU(t,i,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return _i(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_i(e)}get time(){return _i(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=_r(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&CU()?(this.animation.timeline=e,Ti):t(this)}}const ND={anticipate:uD,backInOut:lD,circInOut:hD};function PU(n){return n in ND}function OU(n){typeof n.ease=="string"&&PU(n.ease)&&(n.ease=ND[n.ease])}const Jx=10;class LU extends MU{constructor(e){OU(e),xD(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new Pb({...l,autoplay:!1}),d=_r(this.finishedTime??this.time);t.setWithVelocity(h.sample(d-Jx).value,h.sample(d).value,Jx),h.stop()}}const eA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ya.test(n)||n==="0")&&!n.startsWith("url("));function jU(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function zU(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=eA(s,e),h=eA(o,e);return!l||!h?!1:jU(n)||(t==="spring"||DD(t))&&i}function zv(n){n.duration=0,n.type="keyframes"}const UU=new Set(["opacity","clipPath","filter","transform"]),BU=wb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function FU(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:o,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return BU()&&t&&UU.has(t)&&(t!=="transform"||!f)&&!d&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}const qU=40;class HU extends Mb{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:h,name:d,motionValue:f,element:g,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Fn.now();const _={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:o,repeatType:l,name:d,motionValue:f,element:g,...v},S=g?.KeyframeResolver||Ob;this.keyframeResolver=new S(h,(R,D,k)=>this.onKeyframesResolved(R,D,_,!k),d,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:h,delay:d,isHandoff:f,onUpdate:g}=i;this.resolvedAt=Fn.now(),zU(e,o,l,h)||((as.instantAnimations||!d)&&g?.(Vb(e,i,t)),e[0]=e[e.length-1],zv(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>qU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},S=!f&&FU(_)?new LU({..._,element:_.motionValue.owner.current}):new Pb(_);S.finished.then(()=>this.notifyFinished()).catch(Ti),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),AU()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const GU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $U(n){const e=GU.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function kD(n,e,t=1){const[i,s]=$U(n);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return eD(l)?parseFloat(l):l}return Rb(s)?kD(s,e,t+1):s}function Lb(n,e){return n?.[e]??n?.default??n}const VD=new Set(["width","height","top","left","right","bottom",...Vu]),KU={test:n=>n==="auto",parse:n=>n},MD=n=>e=>e.test(n),PD=[ku,Ne,br,Ys,jz,Lz,KU],tA=n=>PD.find(MD(n));function QU(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||nD(n):!0}const YU=new Set(["brightness","contrast","saturate","opacity"]);function XU(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Cb)||[];if(!i)return n;const s=t.replace(i,"");let o=YU.has(e)?1:0;return i!==t&&(o*=100),e+"("+o+s+")"}const WU=/\b([a-z-]*)\(.*?\)/gu,Uv={...ya,getAnimatableNone:n=>{const e=n.match(WU);return e?e.map(XU).join(" "):n}},nA={...ku,transform:Math.round},ZU={rotate:Ys,rotateX:Ys,rotateY:Ys,rotateZ:Ys,scale:Xf,scaleX:Xf,scaleY:Xf,scaleZ:Xf,skew:Ys,skewX:Ys,skewY:Ys,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:Lh,originX:qx,originY:qx,originZ:Ne},jb={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,radius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,...ZU,zIndex:nA,fillOpacity:Lh,strokeOpacity:Lh,numOctaves:nA},JU={...jb,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:Uv,WebkitFilter:Uv},OD=n=>JU[n];function LD(n,e){let t=OD(n);return t!==Uv&&(t=ya),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const e8=new Set(["auto","none","0"]);function t8(n,e,t){let i=0,s;for(;i<n.length&&!s;){const o=n[i];typeof o=="string"&&!e8.has(o)&&jh(o).values.length&&(s=n[i]),i++}if(s&&t)for(const o of e)n[o]=LD(t,s)}class n8 extends Ob{constructor(e,t,i,s,o){super(e,t,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),Rb(f))){const g=kD(f,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!VD.has(i)||e.length!==2)return;const[s,o]=e,l=tA(s),h=tA(o);if(l!==h)if(Wx(l)&&Wx(h))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else xo[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||QU(e[s]))&&i.push(s);i.length&&t8(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xo[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=xo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,d])=>{e.getValue(h).set(d)}),this.resolveNoneKeyframes()}}function i8(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=t?.[n]??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const jD=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function zD(n){return tD(n)&&"offsetHeight"in n}const iA=30,r8=n=>!isNaN(parseFloat(n));class s8{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=Fn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Fn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=r8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Sb);const i=this.events[e].add(t);return e==="change"?()=>{i(),Tt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>iA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,iA);return iD(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bu(n,e){return new s8(n,e)}const{schedule:zb}=mD(queueMicrotask,!1),Oi={x:!1,y:!1};function UD(){return Oi.x||Oi.y}function a8(n){return n==="x"||n==="y"?Oi[n]?null:(Oi[n]=!0,()=>{Oi[n]=!1}):Oi.x||Oi.y?null:(Oi.x=Oi.y=!0,()=>{Oi.x=Oi.y=!1})}function BD(n,e){const t=i8(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function rA(n){return!(n.pointerType==="touch"||UD())}function o8(n,e,t={}){const[i,s,o]=BD(n,t),l=h=>{if(!rA(h))return;const{target:d}=h,f=e(d,h);if(typeof f!="function"||!d)return;const g=v=>{rA(v)&&(f(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return i.forEach(h=>{h.addEventListener("pointerenter",l,s)}),o}const FD=(n,e)=>e?n===e?!0:FD(n,e.parentElement):!1,Ub=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,l8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function u8(n){return l8.has(n.tagName)||n.tabIndex!==-1}const bm=new WeakSet;function sA(n){return e=>{e.key==="Enter"&&n(e)}}function I0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const c8=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=sA(()=>{if(bm.has(t))return;I0(t,"down");const s=sA(()=>{I0(t,"up")}),o=()=>I0(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function aA(n){return Ub(n)&&!UD()}function h8(n,e,t={}){const[i,s,o]=BD(n,t),l=h=>{const d=h.currentTarget;if(!aA(h))return;bm.add(d);const f=e(d,h),g=(S,R)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),bm.has(d)&&bm.delete(d),aA(S)&&typeof f=="function"&&f(S,{success:R})},v=S=>{g(S,d===window||d===document||t.useGlobalTarget||FD(d,S.target))},_=S=>{g(S,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return i.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",l,s),zD(h)&&(h.addEventListener("focus",f=>c8(f,s)),!u8(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function qD(n){return tD(n)&&"ownerSVGElement"in n}function d8(n){return qD(n)&&n.tagName==="svg"}const wn=n=>!!(n&&n.getVelocity),f8=[...PD,Qt,ya],m8=n=>f8.find(MD(n)),Bb=L.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function oA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function p8(...n){return e=>{let t=!1;const i=n.map(s=>{const o=oA(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():oA(n[s],null)}}}}function g8(...n){return L.useCallback(p8(...n),n)}class y8 extends L.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=zD(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function v8({children:n,isPresent:e,anchorX:t,root:i}){const s=L.useId(),o=L.useRef(null),l=L.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=L.useContext(Bb),d=g8(o,n?.ref);return L.useInsertionEffect(()=>{const{width:f,height:g,top:v,left:_,right:S}=l.current;if(e||!o.current||!f||!g)return;const R=t==="left"?`left: ${_}`:`right: ${S}`;o.current.dataset.motionPopId=s;const D=document.createElement("style");h&&(D.nonce=h);const k=i??document.head;return k.appendChild(D),D.sheet&&D.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${R}px !important;
            top: ${v}px !important;
          }
        `),()=>{k.contains(D)&&k.removeChild(D)}},[e]),E.jsx(y8,{isPresent:e,childRef:o,sizeRef:l,children:L.cloneElement(n,{ref:d})})}const _8=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:l,anchorX:h,root:d})=>{const f=Hp(b8),g=L.useId();let v=!0,_=L.useMemo(()=>(v=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:S=>{f.set(S,!0);for(const R of f.values())if(!R)return;i&&i()},register:S=>(f.set(S,!1),()=>f.delete(S))}),[t,f,i]);return o&&v&&(_={..._}),L.useMemo(()=>{f.forEach((S,R)=>f.set(R,!1))},[t]),L.useEffect(()=>{!t&&!f.size&&i&&i()},[t]),l==="popLayout"&&(n=E.jsx(v8,{isPresent:t,anchorX:h,root:d,children:n})),E.jsx(Gp.Provider,{value:_,children:n})};function b8(){return new Map}function HD(n=!0){const e=L.useContext(Gp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,o=L.useId();L.useEffect(()=>{if(n)return s(o)},[n]);const l=L.useCallback(()=>n&&i&&i(o),[o,i,n]);return!t&&i?[!1,l]:[!0]}const Wf=n=>n.key||"";function lA(n){const e=[];return L.Children.forEach(n,t=>{L.isValidElement(t)&&e.push(t)}),e}const Fb=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:h="left",root:d})=>{const[f,g]=HD(l),v=L.useMemo(()=>lA(n),[n]),_=l&&!f?[]:v.map(Wf),S=L.useRef(!0),R=L.useRef(v),D=Hp(()=>new Map),[k,z]=L.useState(v),[U,P]=L.useState(v);_b(()=>{S.current=!1,R.current=v;for(let ee=0;ee<U.length;ee++){const x=Wf(U[ee]);_.includes(x)?D.delete(x):D.get(x)!==!0&&D.set(x,!1)}},[U,_.length,_.join("-")]);const W=[];if(v!==k){let ee=[...v];for(let x=0;x<U.length;x++){const I=U[x],V=Wf(I);_.includes(V)||(ee.splice(x,0,I),W.push(I))}return o==="wait"&&W.length&&(ee=W),P(lA(ee)),z(v),null}const{forceRender:ne}=L.useContext(yb);return E.jsx(E.Fragment,{children:U.map(ee=>{const x=Wf(ee),I=l&&!f?!1:v===U||_.includes(x),V=()=>{if(D.has(x))D.set(x,!0);else return;let M=!0;D.forEach(N=>{N||(M=!1)}),M&&(ne?.(),P(R.current),l&&g?.(),i&&i())};return E.jsx(_8,{isPresent:I,initial:!S.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:I?void 0:V,anchorX:h,children:ee},x)})})},GD=L.createContext({strict:!1}),uA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Tu={};for(const n in uA)Tu[n]={isEnabled:e=>uA[n].some(t=>!!e[t])};function T8(n){for(const e in n)Tu[e]={...Tu[e],...n[e]}}const E8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||E8.has(n)}let $D=n=>!rp(n);function w8(n){typeof n=="function"&&($D=e=>e.startsWith("on")?!rp(e):n(e))}try{w8(require("@emotion/is-prop-valid").default)}catch{}function S8(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||($D(s)||t===!0&&rp(s)||!e&&!rp(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const $p=L.createContext({});function Kp(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function zh(n){return typeof n=="string"||Array.isArray(n)}const qb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Hb=["initial",...qb];function Qp(n){return Kp(n.animate)||Hb.some(e=>zh(n[e]))}function KD(n){return!!(Qp(n)||n.variants)}function x8(n,e){if(Qp(n)){const{initial:t,animate:i}=n;return{initial:t===!1||zh(t)?t:void 0,animate:zh(i)?i:void 0}}return n.inherit!==!1?e:{}}function A8(n){const{initial:e,animate:t}=x8(n,L.useContext($p));return L.useMemo(()=>({initial:e,animate:t}),[cA(e),cA(t)])}function cA(n){return Array.isArray(n)?n.join(" "):n}const Uh={};function I8(n){for(const e in n)Uh[e]=n[e],Ib(e)&&(Uh[e].isCSSVariable=!0)}function QD(n,{layout:e,layoutId:t}){return Mu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Uh[n]||n==="opacity")}const R8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},C8=Vu.length;function D8(n,e,t){let i="",s=!0;for(let o=0;o<C8;o++){const l=Vu[o],h=n[l];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(l.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||t){const f=jD(h,jb[l]);if(!d){s=!1;const g=R8[l]||l;i+=`${g}(${f}) `}t&&(e[l]=f)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function Gb(n,e,t){const{style:i,vars:s,transformOrigin:o}=n;let l=!1,h=!1;for(const d in e){const f=e[d];if(Mu.has(d)){l=!0;continue}else if(Ib(d)){s[d]=f;continue}else{const g=jD(f,jb[d]);d.startsWith("origin")?(h=!0,o[d]=g):i[d]=g}}if(e.transform||(l||t?i.transform=D8(e,n.transform,t):i.transform&&(i.transform="none")),h){const{originX:d="50%",originY:f="50%",originZ:g=0}=o;i.transformOrigin=`${d} ${f} ${g}`}}const $b=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function YD(n,e,t){for(const i in e)!wn(e[i])&&!QD(i,t)&&(n[i]=e[i])}function N8({transformTemplate:n},e){return L.useMemo(()=>{const t=$b();return Gb(t,e,n),Object.assign({},t.vars,t.style)},[e])}function k8(n,e){const t=n.style||{},i={};return YD(i,t,n),Object.assign(i,N8(n,e)),i}function V8(n,e){const t={},i=k8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const M8={offset:"stroke-dashoffset",array:"stroke-dasharray"},P8={offset:"strokeDashoffset",array:"strokeDasharray"};function O8(n,e,t=1,i=0,s=!0){n.pathLength=1;const o=s?M8:P8;n[o.offset]=Ne.transform(-i);const l=Ne.transform(e),h=Ne.transform(t);n[o.array]=`${l} ${h}`}function XD(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...h},d,f,g){if(Gb(n,h,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_}=n;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),s!==void 0&&O8(v,s,o,l,!1)}const WD=()=>({...$b(),attrs:{}}),ZD=n=>typeof n=="string"&&n.toLowerCase()==="svg";function L8(n,e,t,i){const s=L.useMemo(()=>{const o=WD();return XD(o,e,ZD(i),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};YD(o,n.style,n),s.style={...o,...s.style}}return s}const j8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Kb(n){return typeof n!="string"||n.includes("-")?!1:!!(j8.indexOf(n)>-1||/[A-Z]/u.test(n))}function z8(n,e,t,{latestValues:i},s,o=!1){const h=(Kb(n)?L8:V8)(e,i,s,n),d=S8(e,typeof n=="string",o),f=n!==L.Fragment?{...d,...h,ref:t}:{},{children:g}=e,v=L.useMemo(()=>wn(g)?g.get():g,[g]);return L.createElement(n,{...f,children:v})}function hA(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Qb(n,e,t,i){if(typeof e=="function"){const[s,o]=hA(i);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=hA(i);e=e(t!==void 0?t:n.custom,s,o)}return e}function Tm(n){return wn(n)?n.get():n}function U8({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:B8(t,i,s,n),renderState:e()}}function B8(n,e,t,i){const s={},o=i(n,{});for(const _ in o)s[_]=Tm(o[_]);let{initial:l,animate:h}=n;const d=Qp(n),f=KD(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),h===void 0&&(h=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?h:l;if(v&&typeof v!="boolean"&&!Kp(v)){const _=Array.isArray(v)?v:[v];for(let S=0;S<_.length;S++){const R=Qb(n,_[S]);if(R){const{transitionEnd:D,transition:k,...z}=R;for(const U in z){let P=z[U];if(Array.isArray(P)){const W=g?P.length-1:0;P=P[W]}P!==null&&(s[U]=P)}for(const U in D)s[U]=D[U]}}}return s}const JD=n=>(e,t)=>{const i=L.useContext($p),s=L.useContext(Gp),o=()=>U8(n,e,i,s);return t?o():Hp(o)};function Yb(n,e,t){const{style:i}=n,s={};for(const o in i)(wn(i[o])||e.style&&wn(e.style[o])||QD(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const F8=JD({scrapeMotionValuesFromProps:Yb,createRenderState:$b});function eN(n,e,t){const i=Yb(n,e,t);for(const s in n)if(wn(n[s])||wn(e[s])){const o=Vu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=n[s]}return i}const q8=JD({scrapeMotionValuesFromProps:eN,createRenderState:WD}),H8=Symbol.for("motionComponentSymbol");function Gl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function G8(n,e,t){return L.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Gl(t)&&(t.current=i))},[e])}const Xb=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$8="framerAppearId",tN="data-"+Xb($8),nN=L.createContext({});function K8(n,e,t,i,s){const{visualElement:o}=L.useContext($p),l=L.useContext(GD),h=L.useContext(Gp),d=L.useContext(Bb).reducedMotion,f=L.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:o,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,v=L.useContext(nN);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&Q8(f.current,t,s,v);const _=L.useRef(!1);L.useInsertionEffect(()=>{g&&_.current&&g.update(t,h)});const S=t[tN],R=L.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return _b(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),R.current&&g.animationState&&g.animationState.animateChanges())}),L.useEffect(()=>{g&&(!R.current&&g.animationState&&g.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),R.current=!1),g.enteringChildren=void 0)}),g}function Q8(n,e,t,i){const{layoutId:s,layout:o,drag:l,dragConstraints:h,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:iN(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||h&&Gl(h),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:d,layoutRoot:f})}function iN(n){if(n)return n.options.allowProjection!==!1?n.projection:iN(n.parent)}function R0(n,{forwardMotionProps:e=!1}={},t,i){t&&T8(t);const s=Kb(n)?q8:F8;function o(h,d){let f;const g={...L.useContext(Bb),...h,layoutId:Y8(h)},{isStatic:v}=g,_=A8(h),S=s(h,v);if(!v&&vb){X8();const R=W8(g);f=R.MeasureLayout,_.visualElement=K8(n,S,g,i,R.ProjectionNode)}return E.jsxs($p.Provider,{value:_,children:[f&&_.visualElement?E.jsx(f,{visualElement:_.visualElement,...g}):null,z8(n,h,G8(S,_.visualElement,d),S,v,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=L.forwardRef(o);return l[H8]=n,l}function Y8({layoutId:n}){const e=L.useContext(yb).id;return e&&n!==void 0?e+"-"+n:n}function X8(n,e){L.useContext(GD).strict}function W8(n){const{drag:e,layout:t}=Tu;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Z8(n,e){if(typeof Proxy>"u")return R0;const t=new Map,i=(o,l)=>R0(o,l,n,e),s=(o,l)=>i(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?i:(t.has(l)||t.set(l,R0(l,void 0,n,e)),t.get(l))})}function rN({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function J8({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function eB(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function C0(n){return n===void 0||n===1}function Bv({scale:n,scaleX:e,scaleY:t}){return!C0(n)||!C0(e)||!C0(t)}function co(n){return Bv(n)||sN(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function sN(n){return dA(n.x)||dA(n.y)}function dA(n){return n&&n!=="0%"}function sp(n,e,t){const i=n-t,s=e*i;return t+s}function fA(n,e,t,i,s){return s!==void 0&&(n=sp(n,s,i)),sp(n,t,i)+e}function Fv(n,e=0,t=1,i,s){n.min=fA(n.min,e,t,i,s),n.max=fA(n.max,e,t,i,s)}function aN(n,{x:e,y:t}){Fv(n.x,e.translate,e.scale,e.originPoint),Fv(n.y,t.translate,t.scale,t.originPoint)}const mA=.999999999999,pA=1.0000000000001;function tB(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let h=0;h<s;h++){o=t[h],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Kl(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,aN(n,l)),i&&co(o.latestValues)&&Kl(n,o.latestValues))}e.x<pA&&e.x>mA&&(e.x=1),e.y<pA&&e.y>mA&&(e.y=1)}function $l(n,e){n.min=n.min+e,n.max=n.max+e}function gA(n,e,t,i,s=.5){const o=wt(n.min,n.max,s);Fv(n,e,t,o,i)}function Kl(n,e){gA(n.x,e.x,e.scaleX,e.scale,e.originX),gA(n.y,e.y,e.scaleY,e.scale,e.originY)}function oN(n,e){return rN(eB(n.getBoundingClientRect(),e))}function nB(n,e,t){const i=oN(n,t),{scroll:s}=e;return s&&($l(i.x,s.offset.x),$l(i.y,s.offset.y)),i}const yA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ql=()=>({x:yA(),y:yA()}),vA=()=>({min:0,max:0}),Mt=()=>({x:vA(),y:vA()}),qv={current:null},lN={current:!1};function iB(){if(lN.current=!0,!!vb)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>qv.current=n.matches;n.addEventListener("change",e),e()}else qv.current=!1}const rB=new WeakMap;function sB(n,e,t){for(const i in e){const s=e[i],o=t[i];if(wn(s))n.addValue(i,s);else if(wn(o))n.addValue(i,bu(s,{owner:n}));else if(o!==s)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,bu(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const _A=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class aB{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ob,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Fn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Tt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=Qp(t),this.isVariantNode=KD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const S=v[_];d[_]!==void 0&&wn(S)&&S.set(d[_])}}mount(e){this.current=e,rB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),lN.current||iB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ga(this.notifyUpdate),ga(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Mu.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Tt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Tu){const t=Tu[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<_A.length;i++){const s=_A[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=sB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=bu(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(eD(i)||nD(i))?i=parseFloat(i):!m8(i)&&ya.test(t)&&(i=LD(e,t)),this.setBaseTarget(e,wn(i)?i.get():i)),wn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const o=Qb(this.props,t,this.presenceContext?.custom);o&&(i=o[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!wn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Sb),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){zb.render(this.render)}}class uN extends aB{constructor(){super(...arguments),this.KeyframeResolver=n8}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function cN(n,{style:e,vars:t},i,s){const o=n.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,i);for(l in t)o.setProperty(l,t[l])}function oB(n){return window.getComputedStyle(n)}class lB extends uN{constructor(){super(...arguments),this.type="html",this.renderInstance=cN}readValueFromInstance(e,t){if(Mu.has(t))return this.projection?.isProjecting?Mv(t):TU(e,t);{const i=oB(e),s=(Ib(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return oN(e,t)}build(e,t,i){Gb(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Yb(e,t,i)}}const hN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uB(n,e,t,i){cN(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(hN.has(s)?s:Xb(s),e.attrs[s])}class cB extends uN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Mu.has(t)){const i=OD(t);return i&&i.default||0}return t=hN.has(t)?t:Xb(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return eN(e,t,i)}build(e,t,i){XD(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){uB(e,t,i,s)}mount(e){this.isSVGTag=ZD(e.tagName),super.mount(e)}}const hB=(n,e)=>Kb(n)?new cB(e):new lB(e,{allowProjection:n!==L.Fragment});function Jl(n,e,t){const i=n.getProps();return Qb(i,e,t!==void 0?t:i.custom,n)}const Hv=n=>Array.isArray(n);function dB(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,bu(t))}function fB(n){return Hv(n)?n[n.length-1]||0:n}function Wb(n,e){const t=Jl(n,e);let{transitionEnd:i={},transition:s={},...o}=t||{};o={...o,...i};for(const l in o){const h=fB(o[l]);dB(n,l,h)}}function mB(n){return!!(wn(n)&&n.add)}function Gv(n,e){const t=n.getValue("willChange");if(mB(t))return t.add(e);if(!t&&as.WillChange){const i=new as.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function dN(n){return n.props[tN]}const pB=n=>n!==null;function gB(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(pB),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}const yB={type:"spring",stiffness:500,damping:25,restSpeed:10},vB=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),_B={type:"keyframes",duration:.8},bB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TB=(n,{keyframes:e})=>e.length>2?_B:Mu.has(n)?n.startsWith("scale")?vB(e[1]):yB:bB;function EB({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:h,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const Zb=(n,e,t,i={},s,o)=>l=>{const h=Lb(i,n)||{},d=h.delay||i.delay||0;let{elapsed:f=0}=i;f=f-_r(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-f,onUpdate:_=>{e.set(_),h.onUpdate&&h.onUpdate(_)},onComplete:()=>{l(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:o?void 0:s};EB(h)||Object.assign(g,TB(n,g)),g.duration&&(g.duration=_r(g.duration)),g.repeatDelay&&(g.repeatDelay=_r(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(zv(g),g.delay===0&&(v=!0)),(as.instantAnimations||as.skipAnimations)&&(v=!0,zv(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,v&&!o&&e.get()!==void 0){const _=gB(g.keyframes,h);if(_!==void 0){Tt.update(()=>{g.onUpdate(_),g.onComplete()});return}}return h.isSync?new Pb(g):new HU(g)};function wB({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function fN(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...h}=e;i&&(o=i);const d=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const g in h){const v=n.getValue(g,n.latestValues[g]??null),_=h[g];if(_===void 0||f&&wB(f,g))continue;const S={delay:t,...Lb(o||{},g)},R=v.get();if(R!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===R&&!S.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const z=dN(n);if(z){const U=window.MotionHandoffAnimation(z,g,Tt);U!==null&&(S.startTime=U,D=!0)}}Gv(n,g),v.start(Zb(g,v,_,n.shouldReduceMotion&&VD.has(g)?{type:!1}:S,n,D));const k=v.animation;k&&d.push(k)}return l&&Promise.all(d).then(()=>{Tt.update(()=>{l&&Wb(n,l)})}),d}function mN(n,e,t,i=0,s=1){const o=Array.from(n).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),l=n.size,h=(l-1)*i;return typeof t=="function"?t(o,l):s===1?o*i:h-o*i}function $v(n,e,t={}){const i=Jl(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(fN(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:v}=s;return SB(n,e,d,f,g,v,t)}:()=>Promise.resolve(),{when:h}=s;if(h){const[d,f]=h==="beforeChildren"?[o,l]:[l,o];return d().then(()=>f())}else return Promise.all([o(),l(t.delay)])}function SB(n,e,t=0,i=0,s=0,o=1,l){const h=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),h.push($v(d,e,{...l,delay:t+(typeof i=="function"?0:i)+mN(n.variantChildren,d,i,s,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function pN(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(o=>$v(n,o,t));i=Promise.all(s)}else if(typeof e=="string")i=$v(n,e,t);else{const s=typeof e=="function"?Jl(n,e,t.custom):e;i=Promise.all(fN(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function gN(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const xB=Hb.length;function yN(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?yN(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<xB;t++){const i=Hb[t],s=n.props[i];(zh(s)||s===!1)&&(e[i]=s)}return e}const AB=[...qb].reverse(),IB=qb.length;function RB(n){return e=>Promise.all(e.map(({animation:t,options:i})=>pN(n,t,i)))}function CB(n){let e=RB(n),t=bA(),i=!0;const s=d=>(f,g)=>{const v=Jl(n,g,d==="exit"?n.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:S,...R}=v;f={...f,...R,...S}}return f};function o(d){e=d(n)}function l(d){const{props:f}=n,g=yN(n.parent)||{},v=[],_=new Set;let S={},R=1/0;for(let k=0;k<IB;k++){const z=AB[k],U=t[z],P=f[z]!==void 0?f[z]:g[z],W=zh(P),ne=z===d?U.isActive:null;ne===!1&&(R=k);let ee=P===g[z]&&P!==f[z]&&W;if(ee&&i&&n.manuallyAnimateOnMount&&(ee=!1),U.protectedKeys={...S},!U.isActive&&ne===null||!P&&!U.prevProp||Kp(P)||typeof P=="boolean")continue;const x=DB(U.prevProp,P);let I=x||z===d&&U.isActive&&!ee&&W||k>R&&W,V=!1;const M=Array.isArray(P)?P:[P];let N=M.reduce(s(z),{});ne===!1&&(N={});const{prevResolvedValues:H={}}=U,O={...H,...N},ze=se=>{I=!0,_.has(se)&&(V=!0,_.delete(se)),U.needsAnimating[se]=!0;const he=n.getValue(se);he&&(he.liveStyle=!1)};for(const se in O){const he=N[se],Te=H[se];if(S.hasOwnProperty(se))continue;let we=!1;Hv(he)&&Hv(Te)?we=!gN(he,Te):we=he!==Te,we?he!=null?ze(se):_.add(se):he!==void 0&&_.has(se)?ze(se):U.protectedKeys[se]=!0}U.prevProp=P,U.prevResolvedValues=N,U.isActive&&(S={...S,...N}),i&&n.blockInitialAnimation&&(I=!1);const ge=ee&&x;I&&(!ge||V)&&v.push(...M.map(se=>{const he={type:z};if(typeof se=="string"&&i&&!ge&&n.manuallyAnimateOnMount&&n.parent){const{parent:Te}=n,we=Jl(Te,se);if(Te.enteringChildren&&we){const{delayChildren:B}=we.transition||{};he.delay=mN(Te.enteringChildren,n,B)}}return{animation:se,options:he}}))}if(_.size){const k={};if(typeof f.initial!="boolean"){const z=Jl(n,Array.isArray(f.initial)?f.initial[0]:f.initial);z&&z.transition&&(k.transition=z.transition)}_.forEach(z=>{const U=n.getBaseTarget(z),P=n.getValue(z);P&&(P.liveStyle=!0),k[z]=U??null}),v.push({animation:k})}let D=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(D=!1),i=!1,D?e(v):Promise.resolve()}function h(d,f){if(t[d].isActive===f)return Promise.resolve();n.variantChildren?.forEach(v=>v.animationState?.setActive(d,f)),t[d].isActive=f;const g=l(d);for(const v in t)t[v].protectedKeys={};return g}return{animateChanges:l,setActive:h,setAnimateFunction:o,getState:()=>t,reset:()=>{t=bA()}}}function DB(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!gN(e,n):!1}function ro(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bA(){return{animate:ro(!0),whileInView:ro(),whileHover:ro(),whileTap:ro(),whileDrag:ro(),whileFocus:ro(),exit:ro()}}class Sa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class NB extends Sa{constructor(e){super(e),e.animationState||(e.animationState=CB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Kp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let kB=0;class VB extends Sa{constructor(){super(...arguments),this.id=kB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const MB={animation:{Feature:NB},exit:{Feature:VB}};function Bh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function ld(n){return{point:{x:n.pageX,y:n.pageY}}}const PB=n=>e=>Ub(e)&&n(e,ld(e));function fh(n,e,t,i){return Bh(n,e,PB(t),i)}const vN=1e-4,OB=1-vN,LB=1+vN,_N=.01,jB=0-_N,zB=0+_N;function Dn(n){return n.max-n.min}function UB(n,e,t){return Math.abs(n-e)<=t}function TA(n,e,t,i=.5){n.origin=i,n.originPoint=wt(e.min,e.max,n.origin),n.scale=Dn(t)/Dn(e),n.translate=wt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=OB&&n.scale<=LB||isNaN(n.scale))&&(n.scale=1),(n.translate>=jB&&n.translate<=zB||isNaN(n.translate))&&(n.translate=0)}function mh(n,e,t,i){TA(n.x,e.x,t.x,i?i.originX:void 0),TA(n.y,e.y,t.y,i?i.originY:void 0)}function EA(n,e,t){n.min=t.min+e.min,n.max=n.min+Dn(e)}function BB(n,e,t){EA(n.x,e.x,t.x),EA(n.y,e.y,t.y)}function wA(n,e,t){n.min=e.min-t.min,n.max=n.min+Dn(e)}function ph(n,e,t){wA(n.x,e.x,t.x),wA(n.y,e.y,t.y)}function yi(n){return[n("x"),n("y")]}const bN=({current:n})=>n?n.ownerDocument.defaultView:null,SA=(n,e)=>Math.abs(n-e);function FB(n,e){const t=SA(n.x,e.x),i=SA(n.y,e.y);return Math.sqrt(t**2+i**2)}class TN{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=N0(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,R=FB(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!R)return;const{point:D}=_,{timestamp:k}=fn;this.history.push({...D,timestamp:k});const{onStart:z,onMove:U}=this.handlers;S||(z&&z(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,_)},this.handlePointerMove=(_,S)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=D0(S,this.transformPagePoint),Tt.update(this.updatePoint,!0)},this.handlePointerUp=(_,S)=>{this.end();const{onEnd:R,onSessionEnd:D,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=N0(_.type==="pointercancel"?this.lastMoveEventInfo:D0(S,this.transformPagePoint),this.history);this.startEvent&&R&&R(_,z),D&&D(_,z)},!Ub(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=s||window;const h=ld(e),d=D0(h,this.transformPagePoint),{point:f}=d,{timestamp:g}=fn;this.history=[{...f,timestamp:g}];const{onSessionStart:v}=t;v&&v(e,N0(d,this.history)),this.removeListeners=sd(fh(this.contextWindow,"pointermove",this.handlePointerMove),fh(this.contextWindow,"pointerup",this.handlePointerUp),fh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ga(this.updatePoint)}}function D0(n,e){return e?{point:e(n.point)}:n}function xA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function N0({point:n},e){return{point:n,delta:xA(n,EN(e)),offset:xA(n,qB(e)),velocity:HB(e,.1)}}function qB(n){return n[0]}function EN(n){return n[n.length-1]}function HB(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=EN(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>_r(e)));)t--;if(!i)return{x:0,y:0};const o=_i(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function GB(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?wt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?wt(t,n,i.max):Math.min(n,t)),n}function AA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function $B(n,{top:e,left:t,bottom:i,right:s}){return{x:AA(n.x,t,s),y:AA(n.y,e,i)}}function IA(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function KB(n,e){return{x:IA(n.x,e.x),y:IA(n.y,e.y)}}function QB(n,e){let t=.5;const i=Dn(n),s=Dn(e);return s>i?t=Oh(e.min,e.max-i,n.min):i>s&&(t=Oh(n.min,n.max-s,e.min)),ss(0,1,t)}function YB(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Kv=.35;function XB(n=Kv){return n===!1?n=0:n===!0&&(n=Kv),{x:RA(n,"left","right"),y:RA(n,"top","bottom")}}function RA(n,e,t){return{min:CA(n,e),max:CA(n,t)}}function CA(n,e){return typeof n=="number"?n:n[e]||0}const WB=new WeakMap;class ZB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ld(v).point)},l=(v,_)=>{const{drag:S,dragPropagation:R,onDragStart:D}=this.getProps();if(S&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=a8(S),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yi(z=>{let U=this.getAxisMotionValue(z).get()||0;if(br.test(U)){const{projection:P}=this.visualElement;if(P&&P.layout){const W=P.layout.layoutBox[z];W&&(U=Dn(W)*(parseFloat(U)/100))}}this.originPoint[z]=U}),D&&Tt.postRender(()=>D(v,_)),Gv(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},h=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:S,dragDirectionLock:R,onDirectionLock:D,onDrag:k}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:z}=_;if(R&&this.currentDirection===null){this.currentDirection=JB(z),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",_.point,z),this.updateAxis("y",_.point,z),this.visualElement.render(),k&&k(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>yi(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new TN(e,{onSessionStart:o,onStart:l,onMove:h,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:bN(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:h}=this.getProps();h&&Tt.postRender(()=>h(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!Zf(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=GB(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Gl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=$B(i.layoutBox,e):this.constraints=!1,this.elastic=XB(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&yi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=YB(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Gl(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=nB(i,s.root,this.visualElement.getTransformPagePoint());let l=KB(s.layout.layoutBox,o);if(t){const h=t(J8(l));this.hasMutatedConstraints=!!h,h&&(l=rN(h))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},f=yi(g=>{if(!Zf(g,t,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const _=s?200:1e6,S=s?40:1e7,R={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,R)});return Promise.all(f).then(h)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Gv(this.visualElement,e),i.start(Zb(e,i,0,t,this.visualElement,!1))}stopAnimation(){yi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){yi(t=>{const{drag:i}=this.getProps();if(!Zf(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:h}=s.layout.layoutBox[t];o.set(e[t]-wt(l,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Gl(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};yi(l=>{const h=this.getAxisMotionValue(l);if(h&&this.constraints!==!1){const d=h.get();s[l]=QB({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),yi(l=>{if(!Zf(l,e,null))return;const h=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];h.set(wt(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;WB.set(this.visualElement,this);const e=this.visualElement.current,t=fh(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Gl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Tt.read(i);const l=Bh(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(yi(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Kv,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:h}}}function Zf(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function JB(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class e7 extends Sa{constructor(e){super(e),this.removeGroupControls=Ti,this.removeListeners=Ti,this.controls=new ZB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ti}unmount(){this.removeGroupControls(),this.removeListeners()}}const DA=n=>(e,t)=>{n&&Tt.postRender(()=>n(e,t))};class t7 extends Sa{constructor(){super(...arguments),this.removePointerDownListener=Ti}onPointerDown(e){this.session=new TN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:DA(e),onStart:DA(t),onMove:i,onEnd:(o,l)=>{delete this.session,s&&Tt.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=fh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Em={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function NA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Kc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ne.test(n))n=parseFloat(n);else return n;const t=NA(n,e.target.x),i=NA(n,e.target.y);return`${t}% ${i}%`}},n7={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=ya.parse(n);if(s.length>5)return i;const o=ya.createTransformer(n),l=typeof s[0]!="number"?1:0,h=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=h,s[1+l]/=d;const f=wt(h,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),o(s)}};let k0=!1;class i7 extends L.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=e;I8(r7),o&&(t.group&&t.group.add(o),i&&i.register&&s&&i.register(o),k0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Em.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:o}=this.props,{projection:l}=i;return l&&(l.isPresent=o,k0=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Tt.postRender(()=>{const h=l.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),zb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;k0=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wN(n){const[e,t]=HD(),i=L.useContext(yb);return E.jsx(i7,{...n,layoutGroup:i,switchLayoutGroup:L.useContext(nN),isPresent:e,safeToRemove:t})}const r7={borderRadius:{...Kc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kc,borderTopRightRadius:Kc,borderBottomLeftRadius:Kc,borderBottomRightRadius:Kc,boxShadow:n7};function s7(n,e,t){const i=wn(n)?n:bu(n);return i.start(Zb("",i,e,t)),i.animation}const a7=(n,e)=>n.depth-e.depth;class o7{constructor(){this.children=[],this.isDirty=!1}add(e){bb(this.children,e),this.isDirty=!0}remove(e){Tb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(a7),this.isDirty=!1,this.children.forEach(e)}}function l7(n,e){const t=Fn.now(),i=({timestamp:s})=>{const o=s-t;o>=e&&(ga(i),n(o-e))};return Tt.setup(i,!0),()=>ga(i)}const SN=["TopLeft","TopRight","BottomLeft","BottomRight"],u7=SN.length,kA=n=>typeof n=="string"?parseFloat(n):n,VA=n=>typeof n=="number"||Ne.test(n);function c7(n,e,t,i,s,o){s?(n.opacity=wt(0,t.opacity??1,h7(i)),n.opacityExit=wt(e.opacity??1,0,d7(i))):o&&(n.opacity=wt(e.opacity??1,t.opacity??1,i));for(let l=0;l<u7;l++){const h=`border${SN[l]}Radius`;let d=MA(e,h),f=MA(t,h);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||VA(d)===VA(f)?(n[h]=Math.max(wt(kA(d),kA(f),i),0),(br.test(f)||br.test(d))&&(n[h]+="%")):n[h]=f}(e.rotate||t.rotate)&&(n.rotate=wt(e.rotate||0,t.rotate||0,i))}function MA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const h7=xN(0,.5,cD),d7=xN(.5,.95,Ti);function xN(n,e,t){return i=>i<n?0:i>e?1:t(Oh(n,e,i))}function PA(n,e){n.min=e.min,n.max=e.max}function gi(n,e){PA(n.x,e.x),PA(n.y,e.y)}function OA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function LA(n,e,t,i,s){return n-=e,n=sp(n,1/t,i),s!==void 0&&(n=sp(n,1/s,i)),n}function f7(n,e=0,t=1,i=.5,s,o=n,l=n){if(br.test(e)&&(e=parseFloat(e),e=wt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let h=wt(o.min,o.max,i);n===o&&(h-=e),n.min=LA(n.min,e,t,h,s),n.max=LA(n.max,e,t,h,s)}function jA(n,e,[t,i,s],o,l){f7(n,e[t],e[i],e[s],e.scale,o,l)}const m7=["x","scaleX","originX"],p7=["y","scaleY","originY"];function zA(n,e,t,i){jA(n.x,e,m7,t?t.x:void 0,i?i.x:void 0),jA(n.y,e,p7,t?t.y:void 0,i?i.y:void 0)}function UA(n){return n.translate===0&&n.scale===1}function AN(n){return UA(n.x)&&UA(n.y)}function BA(n,e){return n.min===e.min&&n.max===e.max}function g7(n,e){return BA(n.x,e.x)&&BA(n.y,e.y)}function FA(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function IN(n,e){return FA(n.x,e.x)&&FA(n.y,e.y)}function qA(n){return Dn(n.x)/Dn(n.y)}function HA(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class y7{constructor(){this.members=[]}add(e){bb(this.members,e),e.scheduleRender()}remove(e){if(Tb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function v7(n,e,t){let i="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=t?.z||0;if((s||o||l)&&(i=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:v,rotateY:_,skewX:S,skewY:R}=t;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),v&&(i+=`rotateX(${v}deg) `),_&&(i+=`rotateY(${_}deg) `),S&&(i+=`skewX(${S}deg) `),R&&(i+=`skewY(${R}deg) `)}const h=n.x.scale*e.x,d=n.y.scale*e.y;return(h!==1||d!==1)&&(i+=`scale(${h}, ${d})`),i||"none"}const V0=["","X","Y","Z"],_7=1e3;let b7=0;function M0(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function RN(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=dN(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Tt,!(s||o))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&RN(i)}function CN({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},h=e?.()){this.id=b7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(w7),this.nodes.forEach(I7),this.nodes.forEach(R7),this.nodes.forEach(S7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new o7)}addEventListener(l,h){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Sb),this.eventHandlers.get(l).add(h)}notifyListeners(l,...h){const d=this.eventHandlers.get(l);d&&d.notify(...h)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=qD(l)&&!d8(l),this.instance=l;const{layoutId:h,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),n){let g,v=0;const _=()=>this.root.updateBlockedByResize=!1;Tt.read(()=>{v=window.innerWidth}),n(l,()=>{const S=window.innerWidth;S!==v&&(v=S,this.root.updateBlockedByResize=!0,g&&g(),g=l7(_,250),Em.hasAnimatedSinceResize&&(Em.hasAnimatedSinceResize=!1,this.nodes.forEach(KA)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&f&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||f.getDefaultTransition()||V7,{onLayoutAnimationStart:D,onLayoutAnimationComplete:k}=f.getProps(),z=!this.targetLayout||!IN(this.targetLayout,S),U=!v&&_;if(this.options.layoutRoot||this.resumeFrom||U||v&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...Lb(R,"layout"),onPlay:D,onComplete:k};(f.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(g,U)}else v||KA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ga(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(C7),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&RN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(GA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach($A);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(A7),this.nodes.forEach(T7),this.nodes.forEach(E7)):this.nodes.forEach($A),this.clearAllSnapshots();const h=Fn.now();fn.delta=ss(0,1e3/60,h-fn.timestamp),fn.timestamp=h,fn.isProcessing=!0,E0.update.process(fn),E0.preRender.process(fn),E0.render.process(fn),fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(x7),this.sharedNodes.forEach(D7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(h=!1),h&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!AN(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;l&&this.instance&&(h||co(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return l&&(d=this.removeTransform(d)),M7(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Mt();const h=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(P7))){const{scroll:f}=this.root;f&&($l(h.x,f.offset.x),$l(h.y,f.offset.y))}return h}removeElementScroll(l){const h=Mt();if(gi(h,l),this.scroll?.wasRoot)return h;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:g,options:v}=f;f!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&gi(h,l),$l(h.x,g.offset.x),$l(h.y,g.offset.y))}return h}applyTransform(l,h=!1){const d=Mt();gi(d,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Kl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),co(g.latestValues)&&Kl(d,g.latestValues)}return co(this.latestValues)&&Kl(d,this.latestValues),d}removeTransform(l){const h=Mt();gi(h,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!co(f.latestValues))continue;Bv(f.latestValues)&&f.updateSnapshot();const g=Mt(),v=f.measurePageBox();gi(g,v),zA(h,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return co(this.latestValues)&&zA(h,this.latestValues),h}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=fn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),ph(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mt(),this.targetWithTransforms=Mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),BB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gi(this.target,this.layout.layoutBox),aN(this.target,this.targetDelta)):gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),ph(this.relativeTargetOrigin,this.target,_.target),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Bv(this.parent.latestValues)||sN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),h=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===fn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;gi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;tB(this.layoutCorrected,this.treeScale,this.path,h),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Mt());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OA(this.prevProjectionDelta.x,this.projectionDelta.x),OA(this.prevProjectionDelta.y,this.projectionDelta.y)),mh(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!HA(this.projectionDelta.x,this.prevProjectionDelta.x)||!HA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ql(),this.projectionDelta=Ql(),this.projectionDeltaWithTransform=Ql()}setAnimationOrigin(l,h=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},v=Ql();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const _=Mt(),S=d?d.source:void 0,R=this.layout?this.layout.source:void 0,D=S!==R,k=this.getStack(),z=!k||k.members.length<=1,U=!!(D&&!z&&this.options.crossfade===!0&&!this.path.some(k7));this.animationProgress=0;let P;this.mixTargetDelta=W=>{const ne=W/1e3;QA(v.x,l.x,ne),QA(v.y,l.y,ne),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ph(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),N7(this.relativeTarget,this.relativeTargetOrigin,_,ne),P&&g7(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=Mt()),gi(P,this.relativeTarget)),D&&(this.animationValues=g,c7(g,f,this.latestValues,ne,U,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ne},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ga(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tt.update(()=>{Em.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bu(0)),this.currentAnimation=s7(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),l.onUpdate&&l.onUpdate(h)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:h,target:d,layout:f,latestValues:g}=l;if(!(!h||!d||!f)){if(this!==l&&this.layout&&f&&DN(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Mt();const v=Dn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const _=Dn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}gi(h,d),Kl(h,g),mh(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(l,h){this.sharedNodes.has(l)||this.sharedNodes.set(l,new y7),this.sharedNodes.get(l).add(h);const f=h.options.initialPromotionConfig;h.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(h):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:h,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let h=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const f={};d.z&&M0("z",l,f,this.animationValues);for(let g=0;g<V0.length;g++)M0(`rotate${V0[g]}`,l,f,this.animationValues),M0(`skew${V0[g]}`,l,f,this.animationValues);l.render();for(const g in f)l.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);l.scheduleRender()}applyProjectionStyles(l,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Tm(h?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Tm(h?.pointerEvents)||""),this.hasProjected&&!co(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=v7(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),l.transform=v;const{x:_,y:S}=this.projectionDelta;l.transformOrigin=`${_.origin*100}% ${S.origin*100}% 0`,f.animationValues?l.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const R in Uh){if(g[R]===void 0)continue;const{correct:D,applyTo:k,isCSSVariable:z}=Uh[R],U=v==="none"?g[R]:D(g[R],f);if(k){const P=k.length;for(let W=0;W<P;W++)l[k[W]]=U}else z?this.options.visualElement.renderState.vars[R]=U:l[R]=U}this.options.layoutId&&(l.pointerEvents=f===this?Tm(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(GA),this.root.sharedNodes.clear()}}}function T7(n){n.updateLayout()}function E7(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?yi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Dn(v);v.min=t[g].min,v.max=v.min+_}):DN(s,e.layoutBox,t)&&yi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Dn(t[g]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+_)});const l=Ql();mh(l,t,e.layoutBox);const h=Ql();o?mh(h,n.applyTransform(i,!0),e.measuredBox):mh(h,t,e.layoutBox);const d=!AN(l);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:_}=g;if(v&&_){const S=Mt();ph(S,e.layoutBox,v.layoutBox);const R=Mt();ph(R,t,_.layoutBox),IN(S,R)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=R,n.relativeTargetOrigin=S,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:h,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function w7(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function S7(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function x7(n){n.clearSnapshot()}function GA(n){n.clearMeasurements()}function $A(n){n.isLayoutDirty=!1}function A7(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function KA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function I7(n){n.resolveTargetDelta()}function R7(n){n.calcProjection()}function C7(n){n.resetSkewAndRotation()}function D7(n){n.removeLeadSnapshot()}function QA(n,e,t){n.translate=wt(e.translate,0,t),n.scale=wt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function YA(n,e,t,i){n.min=wt(e.min,t.min,i),n.max=wt(e.max,t.max,i)}function N7(n,e,t,i){YA(n.x,e.x,t.x,i),YA(n.y,e.y,t.y,i)}function k7(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const V7={duration:.45,ease:[.4,0,.1,1]},XA=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),WA=XA("applewebkit/")&&!XA("chrome/")?Math.round:Ti;function ZA(n){n.min=WA(n.min),n.max=WA(n.max)}function M7(n){ZA(n.x),ZA(n.y)}function DN(n,e,t){return n==="position"||n==="preserve-aspect"&&!UB(qA(e),qA(t),.2)}function P7(n){return n!==n.root&&n.scroll?.wasRoot}const O7=CN({attachResizeListener:(n,e)=>Bh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),P0={current:void 0},NN=CN({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!P0.current){const n=new O7({});n.mount(window),n.setOptions({layoutScroll:!0}),P0.current=n}return P0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),L7={pan:{Feature:t7},drag:{Feature:e7,ProjectionNode:NN,MeasureLayout:wN}};function JA(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=i[s];o&&Tt.postRender(()=>o(e,ld(e)))}class j7 extends Sa{mount(){const{current:e}=this.node;e&&(this.unmount=o8(e,(t,i)=>(JA(this.node,i,"Start"),s=>JA(this.node,s,"End"))))}unmount(){}}class z7 extends Sa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sd(Bh(this.node.current,"focus",()=>this.onFocus()),Bh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function eI(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=i[s];o&&Tt.postRender(()=>o(e,ld(e)))}class U7 extends Sa{mount(){const{current:e}=this.node;e&&(this.unmount=h8(e,(t,i)=>(eI(this.node,i,"Start"),(s,{success:o})=>eI(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qv=new WeakMap,O0=new WeakMap,B7=n=>{const e=Qv.get(n.target);e&&e(n)},F7=n=>{n.forEach(B7)};function q7({root:n,...e}){const t=n||document;O0.has(t)||O0.set(t,{});const i=O0.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(F7,{root:n,...e})),i[s]}function H7(n,e,t){const i=q7(e);return Qv.set(n,t),i.observe(n),()=>{Qv.delete(n),i.unobserve(n)}}const G7={some:0,all:1};class $7 extends Sa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:G7[s]},h=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=f?g:v;_&&_(d)};return H7(this.node.current,l,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(K7(e,t))&&this.startObserver()}unmount(){}}function K7({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Q7={inView:{Feature:$7},tap:{Feature:U7},focus:{Feature:z7},hover:{Feature:j7}},Y7={layout:{ProjectionNode:NN,MeasureLayout:wN}},X7={...MB,...Q7,...L7,...Y7},Yp=Z8(X7,hB);function W7(n){n.values.forEach(e=>e.stop())}function Yv(n,e){[...e].reverse().forEach(i=>{const s=n.getVariant(i);s&&Wb(n,s),n.variantChildren&&n.variantChildren.forEach(o=>{Yv(o,e)})})}function Z7(n,e){if(Array.isArray(e))return Yv(n,e);if(typeof e=="string")return Yv(n,[e]);Wb(n,e)}function J7(){const n=new Set,e={subscribe(t){return n.add(t),()=>void n.delete(t)},start(t,i){const s=[];return n.forEach(o=>{s.push(pN(o,t,{transitionOverride:i}))}),Promise.all(s)},set(t){return n.forEach(i=>{Z7(i,t)})},stop(){n.forEach(t=>{W7(t)})},mount(){return()=>{e.stop()}}};return e}function eF(){const n=Hp(J7);return _b(n.mount,[]),n}const tF=eF,kN=({children:n,onDelete:e,threshold:t=-100})=>{const i=tF(),[s,o]=L.useState(!1),l=L.useRef(0),h=()=>{o(!0),l.current=Date.now()},d=async(f,g)=>{const v=g.offset.x,_=g.velocity.x;setTimeout(()=>o(!1),100),v<t||v<-50&&_<-500?e():i.start({x:0})};return E.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[E.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:E.jsx(xm,{className:"text-white w-6 h-6"})}),E.jsx(Yp.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:h,onDragEnd:d,animate:i,className:"relative bg-white dark:bg-zinc-900 z-10 rounded-xl",style:{touchAction:"pan-y",pointerEvents:s?"none":"auto"},children:n})]})},tI=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),nF=()=>{const{id:n}=eM(),{envelopes:e,transactions:t,fetchData:i,isLoading:s,deleteEnvelope:o,renameEnvelope:l,updateTransaction:h,deleteTransaction:d,restoreTransaction:f,getEnvelopeBalance:g}=En(),{showToast:v}=gb(),_=zo(),S=va(),[R,D]=L.useState(!1),[k,z]=L.useState(!1),[U,P]=L.useState(!1),[W,ne]=L.useState(null);L.useEffect(()=>{e.length===0&&i()},[]);const ee=e.find(N=>N.id===n);if(!ee)return s?E.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:E.jsx("p",{children:"Loading envelope..."})}):E.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:E.jsx("p",{children:"Envelope not found."})});const x=t.filter(N=>N.envelopeId===ee.id).sort((N,H)=>new Date(H.date).getTime()-new Date(N.date).getTime()),I=()=>{S.state?.fromGlobalFAB?_("/"):_(-1)},V=()=>{n&&(o(n),_(-1))},M=N=>{const H={...N,reconciled:!N.reconciled};h(H)};return E.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4",children:[E.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[E.jsx("button",{onClick:()=>{const N=prompt("Rename envelope:",ee.name);N&&N.trim()&&n&&l(n,N)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),E.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.name}),E.jsx("button",{onClick:I,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),E.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const N=g(ee.id).toNumber();return console.log(`Debug: Envelope ${ee.name} Balance:`,N),E.jsx("span",{className:`text-xl font-bold ${N<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:tI(N)})})()]}),E.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-zinc-400",children:[E.jsx("span",{children:"Budget"}),E.jsx("span",{children:tI(ee.currentBalance||0)})]})]}),E.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[E.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>D(!0),children:[E.jsx(a4,{className:"w-5 h-5 mr-3"}),"Add Money"]}),E.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>z(!0),children:[E.jsx(r4,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),E.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>P(!0),children:[E.jsx(t4,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),E.jsxs("section",{className:"mt-6",children:[E.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),E.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:x.length===0?E.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):E.jsx(Fb,{initial:!1,mode:"popLayout",children:x.map(N=>E.jsx(Yp.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:E.jsx(kN,{onDelete:()=>{if(!N.id)return;const H={...N};d(N.id),v("Transaction deleted","neutral",()=>f(H))},children:E.jsx(JC,{transaction:N,onReconcile:()=>M(N),onEdit:()=>ne(N)})})},N.id))})})]}),E.jsx("div",{className:"mt-8",children:E.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${ee.name}"? This will delete all transactions.`)&&V()},children:[E.jsx(TI,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(R||k||W)&&E.jsx(ZC,{isVisible:R||k||!!W,onClose:()=>{D(!1),z(!1),ne(null)},mode:R?"add":k?"spend":"edit",currentEnvelope:ee,initialTransaction:W}),U&&E.jsx(gz,{isVisible:U,onClose:()=>P(!1),sourceEnvelope:ee})]})},iF=()=>{const n=zo(),e=L.useRef(null),{envelopes:t,transactions:i,distributionTemplates:s,resetData:o,importData:l,getEnvelopeBalance:h,appSettings:d,updateAppSettings:f,initializeAppSettings:g,cleanupOrphanedTemplates:v,handleUserLogout:_}=En(),{logout:S,currentUser:R}=rd(),[D,k]=L.useState(null),[z,U]=L.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[P,W]=L.useState(!1),ne=978307200,ee=d?.theme??"system";L.useEffect(()=>{d||g().catch(F=>{console.error("Failed to initialize app settings:",F)})},[d,g]);const x=(F,se)=>{k({type:F,text:se}),setTimeout(()=>k(null),3500)},I=L.useMemo(()=>{const F=t.length,se=i.length,he=s.length,Te=t.reduce((fe,me)=>fe+h(me.id).toNumber(),0),we=0,B=i.reduce((fe,me)=>{let Ie=0;if(typeof me.date=="string"){const De=Date.parse(me.date);Ie=Number.isNaN(De)?0:De}else typeof me.date=="number"&&(Ie=me.date<2e9?(me.date+ne)*1e3:me.date);return Math.max(fe,Ie)},0),te=we||B?new Date(Math.max(we,B)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:F,transactionCount:se,templateCount:he,totalBalance:Te,lastUpdated:te}},[t,i,s]),V=()=>{try{const F={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:d||{theme:"system"},envelopes:t.map(B=>({...B,currentBalance:h(B.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:s},se=new Blob([JSON.stringify(F,null,2)],{type:"application/json"}),he=URL.createObjectURL(se),Te=document.createElement("a");Te.href=he,Te.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Te),Te.click(),document.body.removeChild(Te),URL.revokeObjectURL(he);const we=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",we),U(we),x("success","Backup downloaded successfully.")}catch(F){console.error(F),x("error","Failed to create backup file.")}},M=()=>{try{const F=["Date","Description","Amount","Type","Envelope","Reconciled"],se=i.map(te=>{const fe=t.find(De=>De.id===te.envelopeId)?.name||"Unknown",me=(te.description||"").replace(/"/g,'""');let Ie="Invalid Date";if(te.date){if(typeof te.date=="string")Ie=te.date.split("T")[0];else if(typeof te.date=="number"){const De=te.date<2e9?(te.date+ne)*1e3:te.date;Ie=new Date(De).toISOString().split("T")[0]}}return[Ie,`"${me}"`,te.amount.toFixed(2),te.type,`"${fe}"`,te.reconciled?"Yes":"No"].join(",")}),he=[F.join(","),...se].join(`
`),Te=new Blob([he],{type:"text/csv;charset=utf-8;"}),we=URL.createObjectURL(Te),B=document.createElement("a");B.href=we,B.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(we),x("success","CSV export ready to open in Excel/Numbers.")}catch(F){console.error(F),x("error","Failed to export CSV.")}},N=()=>{e.current?.click()},H=F=>{const se=F.target.files?.[0];if(!se)return;const he=new FileReader;he.onload=async Te=>{try{const we=JSON.parse(Te.target?.result),B=await l(we);if(!B.success){x("error",B.message);return}if(we.appSettings?.theme)try{await f({theme:we.appSettings.theme})}catch(te){console.error("Failed to update imported settings:",te)}else if(we.appSettings?.isDarkMode!==void 0)try{const te=we.appSettings.isDarkMode?"dark":"light";await f({theme:te})}catch(te){console.error("Failed to update imported settings:",te)}x("success",`Loaded ${we.envelopes?.length??0} envelopes, ${we.transactions?.length??0} transactions, and ${we.distributionTemplates?.length??0} templates.`)}catch(we){console.error(we),x("error","Invalid backup file. Please verify the JSON.")}},he.readAsText(se),F.target.value=""},O=async()=>{W(!0);try{x("success","Scanning templates for orphaned references..."),await v(),x("success","Orphaned templates have been cleaned up successfully.")}catch(F){console.error("Template cleanup failed:",F),x("error","Failed to clean up orphaned templates. Check console for details.")}finally{W(!1)}},ze=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{_(),S(),n("/"),x("success","You have been logged out successfully.")}catch(F){console.error("Logout failed:",F),x("error","Failed to log out properly.")}},ge=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),x("success","All data has been permanently deleted."),n("/")}catch(F){console.error("Reset failed:",F),x("error","Failed to delete all data. Some data may remain.")}};return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[E.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:E.jsxs("div",{className:"flex items-center",children:[E.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),E.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),E.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[D&&E.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${D.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[D.type==="success"?E.jsx(l4,{size:18}):E.jsx(xm,{size:18}),D.text]}),E.jsx("section",{children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Sm,{className:"text-blue-500",size:22}),E.jsxs("div",{children:[E.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),E.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),E.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:I.envelopeCount})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),E.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:I.transactionCount})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),E.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:I.templateCount})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),E.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:I.lastUpdated})]})]})]})}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[ee==="light"&&E.jsx("span",{className:"text-orange-500 text-lg",children:""}),ee==="dark"&&E.jsx("span",{className:"text-purple-500 text-lg",children:""}),ee==="system"&&E.jsx("span",{className:"text-gray-500 text-lg",children:""}),E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),E.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:ee})]}),E.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),E.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(F=>E.jsx("button",{onClick:async()=>{try{await f({theme:F.value})}catch(se){console.error("Failed to update theme setting:",se)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${ee===F.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:F.label},F.value))})]})]}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[E.jsxs("button",{onClick:V,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Sm,{className:"text-blue-500",size:20}),E.jsxs("div",{className:"flex flex-col items-start",children:[E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),E.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",z]})]})]}),E.jsx(ao,{className:"text-gray-400",size:18})]}),E.jsxs("button",{onClick:N,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(H4,{className:"text-blue-500",size:20}),E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),E.jsx(ao,{className:"text-gray-400",size:18})]}),E.jsxs("button",{onClick:M,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(_4,{className:"text-blue-500",size:20}),E.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),E.jsx(ao,{className:"text-gray-400",size:18})]}),E.jsxs("button",{onClick:O,disabled:P,className:`w-full p-4 flex items-center justify-between transition-colors ${P?"bg-gray-50 dark:bg-zinc-800/50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[E.jsxs("div",{className:"flex items-center gap-3",children:[P?E.jsx(C4,{className:"text-blue-500 animate-spin",size:20}):E.jsx(z0,{className:"text-blue-500",size:20}),E.jsx("span",{className:`font-medium ${P?"text-gray-500 dark:text-zinc-400":"text-gray-900 dark:text-white"}`,children:P?"Cleaning Templates...":"Clean Up Orphaned Templates"})]}),P?E.jsx("div",{className:"text-gray-400 text-sm",children:"Working..."}):E.jsx(ao,{className:"text-gray-400",size:18})]}),E.jsx("input",{type:"file",ref:e,onChange:H,accept:".json",className:"hidden"})]})]}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[E.jsx("p",{children:"Create regular backups before major changes."}),E.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),E.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),E.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Account"}),E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[E.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-zinc-800",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:R?.displayName?.charAt(0)?.toUpperCase()||R?.username?.charAt(0)?.toUpperCase()||"U"}),E.jsxs("div",{children:[E.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:R?.displayName||R?.username}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:R?.username})]})]})}),E.jsxs("button",{onClick:ze,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(N4,{className:"text-red-500 group-hover:text-red-600",size:20}),E.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Log Out"})]}),E.jsx(ao,{className:"text-gray-400",size:18})]})]})]}),E.jsxs("section",{children:[E.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),E.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:E.jsxs("button",{onClick:ge,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(xm,{className:"text-red-500 group-hover:text-red-600",size:20}),E.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),E.jsx(ao,{className:"text-gray-400",size:18})]})}),E.jsx("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500",children:"This clears every envelope, transaction, and template. Use with caution."})]}),E.jsx("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:"House Budget PWA  App Version 2.0.1"})]})]})},rF=()=>{const n=zo(),{createEnvelope:e}=En(),[t,i]=L.useState(""),[s,o]=L.useState(""),l=h=>{if(h.preventDefault(),!t.trim())return;const d=parseFloat(s),f=isNaN(d)?0:d,g=En.getState().envelopes,_=(g.length>0?Math.max(...g.map(S=>S.orderIndex??0)):-1)+1;e({name:t,currentBalance:f,lastUpdated:new Date().toISOString(),isActive:!0,orderIndex:_}),n("/")};return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[E.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:E.jsx(bI,{size:24})}),E.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Envelope"})]}),E.jsx("div",{className:"p-4 max-w-md mx-auto",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[E.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:E.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:E.jsx(T4,{size:40})})}),E.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Envelope Name"}),E.jsx("input",{type:"text",id:"name",value:t,onChange:h=>i(h.target.value),placeholder:"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),E.jsxs("div",{className:"relative",children:[E.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),E.jsx("input",{type:"number",id:"balance",value:s,onChange:h=>o(h.target.value),onKeyDown:h=>{(h.key==="e"||h.key==="E"||h.key==="+"||h.key==="-")&&h.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later via the "Distribute Funds" screen.'})]}),E.jsxs("div",{className:"pt-4 flex gap-3",children:[E.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),E.jsx("button",{type:"submit",disabled:!t.trim(),className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${t.trim()?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:"Create Envelope"})]})]})]})})]})},sF=()=>{const n=zo(),{envelopes:e}=En(),t=[...e].sort((i,s)=>i.name.localeCompare(s.name));return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[E.jsx("button",{onClick:()=>n(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),E.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),E.jsx("div",{className:"w-12"})," "]}),E.jsx("div",{className:"p-4 max-w-md mx-auto",children:E.jsx("section",{className:"mb-6",children:E.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[E.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:E.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:"SELECT ENVELOPE"})}),t.length===0?E.jsx("div",{className:"px-4 py-8 text-center text-gray-500 dark:text-zinc-400",children:E.jsx("p",{children:"No envelopes available"})}):E.jsx("div",{className:"divide-y divide-gray-200 dark:divide-zinc-700",children:t.map(i=>E.jsxs("button",{onClick:()=>n(`/envelope/${i.id}`,{state:{fromGlobalFAB:!0}}),className:"w-full px-4 py-4 text-left flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700 transition-colors",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.name}),E.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Balance calculation not available here"})]}),E.jsx(ao,{size:20,className:"text-gray-400 dark:text-zinc-500"})]},i.id))})]})})})]})},aF=()=>{const n=zo(),{transactions:e,envelopes:t,updateTransaction:i,deleteTransaction:s,restoreTransaction:o}=En(),{showToast:l}=gb(),[h,d]=L.useState(!1),[f,g]=L.useState(""),[v,_]=L.useState("all"),[S,R]=L.useState("All"),[D,k]=L.useState(!1),[z,U]=L.useState(()=>{const M=new Date;return M.setMonth(M.getMonth()-1),M.toISOString().split("T")[0]}),[P,W]=L.useState(()=>new Date().toISOString().split("T")[0]),[ne,ee]=L.useState(null),x=L.useMemo(()=>e.map(N=>{if(!N)return null;let H=N.date;if(typeof N.date=="number"){const ze=(N.date+978307200)*1e3;H=new Date(ze).toISOString()}else if(!N.date||typeof N.date!="string")return null;return{...N,date:H}}).filter(Boolean).filter(N=>{if(f){const O=f.toLowerCase(),ze=t.find(se=>se.id===N.envelopeId)?.name.toLowerCase()||"",ge=N.amount.toFixed(2);if(!(N.description.toLowerCase().includes(O)||ze.includes(O)||ge.includes(O)))return!1}if(v!=="all"&&N.envelopeId!==v||S!=="All"&&N.type!==S||!N.date||typeof N.date!="string")return!1;const H=N.date.split("T")[0];return!(H<z||H>P||D&&!N.reconciled)}).sort((N,H)=>new Date(H.date).getTime()-new Date(N.date).getTime()),[e,t,f,v,S,z,P,D]),I=ne?t.find(M=>M.id===ne.envelopeId):null,V=M=>{const N={...M,reconciled:!M.reconciled};i(N)};return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[E.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:E.jsx(bI,{size:24})}),E.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),E.jsx("button",{onClick:()=>d(!h),className:`p-2 rounded-full transition-colors ${h?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:E.jsx(w4,{size:20,className:h?"fill-current":""})})]}),E.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${h?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:E.jsxs("div",{className:"p-4 space-y-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx(O4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),E.jsx("input",{type:"text",placeholder:"Search transactions...",value:f,onChange:M=>g(M.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),f&&E.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:E.jsx(n_,{size:16})})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),E.jsxs("select",{value:v,onChange:M=>_(M.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[E.jsx("option",{value:"all",children:"All Envelopes"}),t.sort((M,N)=>M.name.localeCompare(N.name)).map(M=>E.jsx("option",{value:M.id,children:M.name},M.id))]})]}),E.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(M=>E.jsx("button",{onClick:()=>R(M),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${S===M?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:M},M))}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),E.jsx("div",{className:"relative",children:E.jsx("input",{type:"date",value:z,onChange:M=>U(M.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),E.jsx("div",{className:"relative",children:E.jsx("input",{type:"date",value:P,onChange:M=>W(M.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),E.jsxs("div",{className:"flex items-center justify-between pt-2",children:[E.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),E.jsx("button",{onClick:()=>k(!D),className:`w-11 h-6 rounded-full transition-colors relative ${D?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:E.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${D?"translate-x-5":"translate-x-0"}`})})]})]})}),E.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:E.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:x.length===0?E.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):E.jsx(Fb,{initial:!1,mode:"popLayout",children:x.map(M=>{const N=t.find(H=>H.id===M.envelopeId);return E.jsx(Yp.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:E.jsx(kN,{onDelete:()=>{if(!M.id)return;const H={...M};s(M.id),l("Transaction deleted","neutral",()=>o(H))},children:E.jsx(JC,{transaction:M,envelopeName:N?.name||"Unknown Envelope",onReconcile:()=>V(M),onEdit:()=>{N?ee(M):alert("Cannot edit: Envelope deleted.")}})})},M.id)})})})}),ne&&I&&E.jsx(ZC,{isVisible:!!ne,onClose:()=>ee(null),mode:"edit",currentEnvelope:I,initialTransaction:ne})]})},oF=()=>{const[n,e]=L.useState(""),[t,i]=L.useState(""),[s,o]=L.useState(!1),{login:l,isLoading:h,loginError:d,clearError:f}=rd(),g=async v=>{v.preventDefault(),n.trim()&&t.trim()&&await l(n.trim(),t)};return L.useEffect(()=>{d&&f()},[n,t,d,f]),E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:E.jsxs("div",{className:"max-w-md w-full space-y-8",children:[E.jsxs("div",{className:"text-center",children:[E.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[E.jsx("img",{src:"/house-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),E.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]}),E.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for your household"})]}),E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:[E.jsxs("form",{onSubmit:g,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),E.jsx("input",{id:"username",type:"text",value:n,onChange:v=>e(v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your username",required:!0,disabled:h})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{id:"password",type:s?"text":"password",value:t,onChange:v=>i(v.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",required:!0,disabled:h}),E.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none focus:text-gray-600 dark:focus:text-gray-300",disabled:h,children:s?E.jsx(p4,{className:"h-5 w-5"}):E.jsx(y4,{className:"h-5 w-5"})})]})]}),d&&E.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:d}),E.jsx("button",{type:"submit",disabled:h||!n.trim()||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:h?"Signing in...":"Sign In"})]}),E.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[E.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center mb-3",children:"Demo Credentials:"}),E.jsxs("div",{className:"space-y-2 text-xs text-gray-500 dark:text-gray-400",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Frank:"}),E.jsx("span",{children:"frank / password123"})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Brother:"}),E.jsx("span",{children:"brother / password123"})]})]})]})]})]})})},lF=()=>{const{message:n,type:e,isVisible:t,undoAction:i,hideToast:s}=gb(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return E.jsx(Fb,{children:t&&E.jsx(Yp.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:E.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[E.jsx("div",{className:"flex items-center flex-1 min-w-0",children:E.jsx("span",{className:"text-sm font-medium truncate pr-2",children:n})}),E.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&E.jsxs("button",{onClick:()=>{i(),s()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[E.jsx(F4,{size:14,className:"inline mr-1"}),"Undo"]}),E.jsx("button",{onClick:s,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:E.jsx(n_,{size:16})})]})]})})})};function uF(){const[n,e]=L.useState(!0),{appSettings:t}=En(),{isAuthenticated:i}=rd();return L.useEffect(()=>{const s=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(s)},[]),L.useEffect(()=>{const s=document.documentElement,o=window.matchMedia("(prefers-color-scheme: dark)"),l=()=>{const h=t?.theme??"system",d=o.matches;h==="dark"||h==="system"&&d?s.classList.add("dark"):s.classList.remove("dark")};if(l(),t?.theme==="system")return o.addEventListener("change",l),()=>o.removeEventListener("change",l)},[t]),n?E.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-blue-600 text-white dark:bg-black",children:E.jsx("div",{className:"text-3xl font-bold animate-pulse",children:"House Budget"})}):i?E.jsxs(E.Fragment,{children:[E.jsx(jM,{children:E.jsxs(pM,{children:[E.jsx(so,{path:"/",element:E.jsx(pz,{})}),E.jsx(so,{path:"/envelope/:id",element:E.jsx(nF,{})}),E.jsx(so,{path:"/add-envelope",element:E.jsx(rF,{})}),E.jsx(so,{path:"/add-transaction",element:E.jsx(sF,{})}),E.jsx(so,{path:"/transactions",element:E.jsx(aF,{})}),E.jsx(so,{path:"/settings",element:E.jsx(iF,{})})]})}),E.jsx(lF,{})]}):E.jsx(oF,{})}wV({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});_V.createRoot(document.getElementById("root")).render(E.jsx(L.StrictMode,{children:E.jsx(uF,{})}));
