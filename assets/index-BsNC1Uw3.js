(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function sV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $y={exports:{}},Lc={};var mw;function aV(){if(mw)return Lc;mw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:u,ref:s!==void 0?s:null,props:o}}return Lc.Fragment=e,Lc.jsx=t,Lc.jsxs=t,Lc}var pw;function oV(){return pw||(pw=1,$y.exports=aV()),$y.exports}var w=oV(),Qy={exports:{}},Me={};var gw;function lV(){if(gw)return Me;gw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function S(q){return q===null||typeof q!="object"?null:(q=_&&q[_]||q["@@iterator"],typeof q=="function"?q:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,V={};function j(q,oe,pe){this.props=q,this.context=oe,this.refs=V,this.updater=pe||R}j.prototype.isReactComponent={},j.prototype.setState=function(q,oe){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,oe,"setState")},j.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function M(){}M.prototype=j.prototype;function L(q,oe,pe){this.props=q,this.context=oe,this.refs=V,this.updater=pe||R}var J=L.prototype=new M;J.constructor=L,k(J,j.prototype),J.isPureReactComponent=!0;var ie=Array.isArray;function ne(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(q,oe,pe){var ge=pe.ref;return{$$typeof:n,type:q,key:oe,ref:ge!==void 0?ge:null,props:pe}}function P(q,oe){return N(q.type,oe,q.props)}function D(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function B(q){var oe={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(pe){return oe[pe]})}var O=/\/+/g;function Ee(q,oe){return typeof q=="object"&&q!==null&&q.key!=null?B(""+q.key):oe.toString(36)}function fe(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ne,ne):(q.status="pending",q.then(function(oe){q.status==="pending"&&(q.status="fulfilled",q.value=oe)},function(oe){q.status==="pending"&&(q.status="rejected",q.reason=oe)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function H(q,oe,pe,ge,Ne){var Le=typeof q;(Le==="undefined"||Le==="boolean")&&(q=null);var Qe=!1;if(q===null)Qe=!0;else switch(Le){case"bigint":case"string":case"number":Qe=!0;break;case"object":switch(q.$$typeof){case n:case e:Qe=!0;break;case g:return Qe=q._init,H(Qe(q._payload),oe,pe,ge,Ne)}}if(Qe)return Ne=Ne(q),Qe=ge===""?"."+Ee(q,0):ge,ie(Ne)?(pe="",Qe!=null&&(pe=Qe.replace(O,"$&/")+"/"),H(Ne,oe,pe,"",function(wa){return wa})):Ne!=null&&(D(Ne)&&(Ne=P(Ne,pe+(Ne.key==null||q&&q.key===Ne.key?"":(""+Ne.key).replace(O,"$&/")+"/")+Qe)),oe.push(Ne)),1;Qe=0;var Xt=ge===""?".":ge+":";if(ie(q))for(var yt=0;yt<q.length;yt++)ge=q[yt],Le=Xt+Ee(ge,yt),Qe+=H(ge,oe,pe,Le,Ne);else if(yt=S(q),typeof yt=="function")for(q=yt.call(q),yt=0;!(ge=q.next()).done;)ge=ge.value,Le=Xt+Ee(ge,yt++),Qe+=H(ge,oe,pe,Le,Ne);else if(Le==="object"){if(typeof q.then=="function")return H(fe(q),oe,pe,ge,Ne);throw oe=String(q),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Qe}function ae(q,oe,pe){if(q==null)return q;var ge=[],Ne=0;return H(q,ge,"","",function(Le){return oe.call(pe,Le,Ne++)}),ge}function de(q){if(q._status===-1){var oe=q._result;oe=oe(),oe.then(function(pe){(q._status===0||q._status===-1)&&(q._status=1,q._result=pe)},function(pe){(q._status===0||q._status===-1)&&(q._status=2,q._result=pe)}),q._status===-1&&(q._status=0,q._result=oe)}if(q._status===1)return q._result.default;throw q._result}var Ce=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Fe={map:ae,forEach:function(q,oe,pe){ae(q,function(){oe.apply(this,arguments)},pe)},count:function(q){var oe=0;return ae(q,function(){oe++}),oe},toArray:function(q){return ae(q,function(oe){return oe})||[]},only:function(q){if(!D(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Me.Activity=v,Me.Children=Fe,Me.Component=j,Me.Fragment=t,Me.Profiler=s,Me.PureComponent=L,Me.StrictMode=i,Me.Suspense=d,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Me.__COMPILER_RUNTIME={__proto__:null,c:function(q){return C.H.useMemoCache(q)}},Me.cache=function(q){return function(){return q.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(q,oe,pe){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ge=k({},q.props),Ne=q.key;if(oe!=null)for(Le in oe.key!==void 0&&(Ne=""+oe.key),oe)!A.call(oe,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&oe.ref===void 0||(ge[Le]=oe[Le]);var Le=arguments.length-2;if(Le===1)ge.children=pe;else if(1<Le){for(var Qe=Array(Le),Xt=0;Xt<Le;Xt++)Qe[Xt]=arguments[Xt+2];ge.children=Qe}return N(q.type,Ne,ge)},Me.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:o,_context:q},q},Me.createElement=function(q,oe,pe){var ge,Ne={},Le=null;if(oe!=null)for(ge in oe.key!==void 0&&(Le=""+oe.key),oe)A.call(oe,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Ne[ge]=oe[ge]);var Qe=arguments.length-2;if(Qe===1)Ne.children=pe;else if(1<Qe){for(var Xt=Array(Qe),yt=0;yt<Qe;yt++)Xt[yt]=arguments[yt+2];Ne.children=Xt}if(q&&q.defaultProps)for(ge in Qe=q.defaultProps,Qe)Ne[ge]===void 0&&(Ne[ge]=Qe[ge]);return N(q,Le,Ne)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(q){return{$$typeof:h,render:q}},Me.isValidElement=D,Me.lazy=function(q){return{$$typeof:g,_payload:{_status:-1,_result:q},_init:de}},Me.memo=function(q,oe){return{$$typeof:f,type:q,compare:oe===void 0?null:oe}},Me.startTransition=function(q){var oe=C.T,pe={};C.T=pe;try{var ge=q(),Ne=C.S;Ne!==null&&Ne(pe,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(ne,Ce)}catch(Le){Ce(Le)}finally{oe!==null&&pe.types!==null&&(oe.types=pe.types),C.T=oe}},Me.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Me.use=function(q){return C.H.use(q)},Me.useActionState=function(q,oe,pe){return C.H.useActionState(q,oe,pe)},Me.useCallback=function(q,oe){return C.H.useCallback(q,oe)},Me.useContext=function(q){return C.H.useContext(q)},Me.useDebugValue=function(){},Me.useDeferredValue=function(q,oe){return C.H.useDeferredValue(q,oe)},Me.useEffect=function(q,oe){return C.H.useEffect(q,oe)},Me.useEffectEvent=function(q){return C.H.useEffectEvent(q)},Me.useId=function(){return C.H.useId()},Me.useImperativeHandle=function(q,oe,pe){return C.H.useImperativeHandle(q,oe,pe)},Me.useInsertionEffect=function(q,oe){return C.H.useInsertionEffect(q,oe)},Me.useLayoutEffect=function(q,oe){return C.H.useLayoutEffect(q,oe)},Me.useMemo=function(q,oe){return C.H.useMemo(q,oe)},Me.useOptimistic=function(q,oe){return C.H.useOptimistic(q,oe)},Me.useReducer=function(q,oe,pe){return C.H.useReducer(q,oe,pe)},Me.useRef=function(q){return C.H.useRef(q)},Me.useState=function(q){return C.H.useState(q)},Me.useSyncExternalStore=function(q,oe,pe){return C.H.useSyncExternalStore(q,oe,pe)},Me.useTransition=function(){return C.H.useTransition()},Me.version="19.2.0",Me}var yw;function Kv(){return yw||(yw=1,Qy.exports=lV()),Qy.exports}var U=Kv();const Of=sV(U);var Yy={exports:{}},jc={},Xy={exports:{}},Wy={};var vw;function uV(){return vw||(vw=1,(function(n){function e(H,ae){var de=H.length;H.push(ae);e:for(;0<de;){var Ce=de-1>>>1,Fe=H[Ce];if(0<s(Fe,ae))H[Ce]=ae,H[de]=Fe,de=Ce;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ae=H[0],de=H.pop();if(de!==ae){H[0]=de;e:for(var Ce=0,Fe=H.length,q=Fe>>>1;Ce<q;){var oe=2*(Ce+1)-1,pe=H[oe],ge=oe+1,Ne=H[ge];if(0>s(pe,de))ge<Fe&&0>s(Ne,pe)?(H[Ce]=Ne,H[ge]=de,Ce=ge):(H[Ce]=pe,H[oe]=de,Ce=oe);else if(ge<Fe&&0>s(Ne,de))H[Ce]=Ne,H[ge]=de,Ce=ge;else break e}}return ae}function s(H,ae){var de=H.sortIndex-ae.sortIndex;return de!==0?de:H.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],f=[],g=1,v=null,_=3,S=!1,R=!1,k=!1,V=!1,j=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function J(H){for(var ae=t(f);ae!==null;){if(ae.callback===null)i(f);else if(ae.startTime<=H)i(f),ae.sortIndex=ae.expirationTime,e(d,ae);else break;ae=t(f)}}function ie(H){if(k=!1,J(H),!R)if(t(d)!==null)R=!0,ne||(ne=!0,B());else{var ae=t(f);ae!==null&&fe(ie,ae.startTime-H)}}var ne=!1,C=-1,A=5,N=-1;function P(){return V?!0:!(n.unstable_now()-N<A)}function D(){if(V=!1,ne){var H=n.unstable_now();N=H;var ae=!0;try{e:{R=!1,k&&(k=!1,M(C),C=-1),S=!0;var de=_;try{t:{for(J(H),v=t(d);v!==null&&!(v.expirationTime>H&&P());){var Ce=v.callback;if(typeof Ce=="function"){v.callback=null,_=v.priorityLevel;var Fe=Ce(v.expirationTime<=H);if(H=n.unstable_now(),typeof Fe=="function"){v.callback=Fe,J(H),ae=!0;break t}v===t(d)&&i(d),J(H)}else i(d);v=t(d)}if(v!==null)ae=!0;else{var q=t(f);q!==null&&fe(ie,q.startTime-H),ae=!1}}break e}finally{v=null,_=de,S=!1}ae=void 0}}finally{ae?B():ne=!1}}}var B;if(typeof L=="function")B=function(){L(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ee=O.port2;O.port1.onmessage=D,B=function(){Ee.postMessage(null)}}else B=function(){j(D,0)};function fe(H,ae){C=j(function(){H(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(H){switch(_){case 1:case 2:case 3:var ae=3;break;default:ae=_}var de=_;_=ae;try{return H()}finally{_=de}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var de=_;_=H;try{return ae()}finally{_=de}},n.unstable_scheduleCallback=function(H,ae,de){var Ce=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ce+de:Ce):de=Ce,H){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=de+Fe,H={id:g++,callback:ae,priorityLevel:H,startTime:de,expirationTime:Fe,sortIndex:-1},de>Ce?(H.sortIndex=de,e(f,H),t(d)===null&&H===t(f)&&(k?(M(C),C=-1):k=!0,fe(ie,de-Ce))):(H.sortIndex=Fe,e(d,H),R||S||(R=!0,ne||(ne=!0,B()))),H},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(H){var ae=_;return function(){var de=_;_=ae;try{return H.apply(this,arguments)}finally{_=de}}}})(Wy)),Wy}var _w;function cV(){return _w||(_w=1,Xy.exports=uV()),Xy.exports}var Zy={exports:{}},gn={};var bw;function hV(){if(bw)return gn;bw=1;var n=Kv();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:f,implementation:g}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,gn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},gn.flushSync=function(d){var f=u.T,g=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=f,i.p=g,i.d.f()}},gn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},gn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},gn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,v=h(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:S}):g==="script"&&i.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},gn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},gn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=h(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},gn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},gn.requestFormReset=function(d){i.d.r(d)},gn.unstable_batchedUpdates=function(d,f){return d(f)},gn.useFormState=function(d,f,g){return u.H.useFormState(d,f,g)},gn.useFormStatus=function(){return u.H.useHostTransitionStatus()},gn.version="19.2.0",gn}var Tw;function dV(){if(Tw)return Zy.exports;Tw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zy.exports=hV(),Zy.exports}var Ew;function fV(){if(Ew)return jc;Ew=1;var n=cV(),e=Kv(),t=dV();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function u(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function h(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var l=r,c=a;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return d(p),r;if(y===c)return d(p),a;y=y.sibling}throw Error(i(188))}if(l.return!==c.return)l=p,c=y;else{for(var T=!1,x=p.child;x;){if(x===l){T=!0,l=p,c=y;break}if(x===c){T=!0,c=p,l=y;break}x=x.sibling}if(!T){for(x=y.child;x;){if(x===l){T=!0,l=y,c=p;break}if(x===c){T=!0,c=y,l=p;break}x=x.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:a}function g(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=g(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),L=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=D&&r[D]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function Ee(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case j:return"Profiler";case V:return"StrictMode";case ie:return"Suspense";case ne:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case R:return"Portal";case L:return r.displayName||"Context";case M:return(r._context.displayName||"Context")+".Consumer";case J:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case C:return a=r.displayName||null,a!==null?a:Ee(r.type)||"Memo";case A:a=r._payload,r=r._init;try{return Ee(r(a))}catch{}}return null}var fe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Ce=[],Fe=-1;function q(r){return{current:r}}function oe(r){0>Fe||(r.current=Ce[Fe],Ce[Fe]=null,Fe--)}function pe(r,a){Fe++,Ce[Fe]=r.current,r.current=a}var ge=q(null),Ne=q(null),Le=q(null),Qe=q(null);function Xt(r,a){switch(pe(Le,a),pe(Ne,r),pe(ge,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?LE(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=LE(a),r=jE(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}oe(ge),pe(ge,r)}function yt(){oe(ge),oe(Ne),oe(Le)}function wa(r){r.memoizedState!==null&&pe(Qe,r);var a=ge.current,l=jE(a,r.type);a!==l&&(pe(Ne,r),pe(ge,l))}function Lo(r){Ne.current===r&&(oe(ge),oe(Ne)),Qe.current===r&&(oe(Qe),Vc._currentValue=de)}var jo,zo;function Ui(r){if(jo===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);jo=a&&a[1]||"",zo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jo+r+zo}var Vu=!1;function Sa(r,a){if(!r||Vu)return"";Vu=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Z){var X=Z}Reflect.construct(r,[],se)}else{try{se.call()}catch(Z){X=Z}r.call(se.prototype)}}else{try{throw Error()}catch(Z){X=Z}(se=r())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Z){if(Z&&X&&typeof Z.stack=="string")return[Z.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),T=y[0],x=y[1];if(T&&x){var z=T.split(`
`),Y=x.split(`
`);for(p=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;if(c===z.length||p===Y.length)for(c=z.length-1,p=Y.length-1;1<=c&&0<=p&&z[c]!==Y[p];)p--;for(;1<=c&&0<=p;c--,p--)if(z[c]!==Y[p]){if(c!==1||p!==1)do if(c--,p--,0>p||z[c]!==Y[p]){var ee=`
`+z[c].replace(" at new "," at ");return r.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",r.displayName)),ee}while(1<=c&&0<=p);break}}}finally{Vu=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Ui(l):""}function Mu(r,a){switch(r.tag){case 26:case 27:case 5:return Ui(r.type);case 16:return Ui("Lazy");case 13:return r.child!==a&&a!==null?Ui("Suspense Fallback"):Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 15:return Sa(r.type,!1);case 11:return Sa(r.type.render,!1);case 1:return Sa(r.type,!0);case 31:return Ui("Activity");default:return""}}function Pu(r){try{var a="",l=null;do a+=Mu(r,l),l=r,r=r.return;while(r);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var jt=Object.prototype.hasOwnProperty,Wt=n.unstable_scheduleCallback,us=n.unstable_cancelCallback,Yp=n.unstable_shouldYield,ad=n.unstable_requestPaint,An=n.unstable_now,xa=n.unstable_getCurrentPriorityLevel,Ou=n.unstable_ImmediatePriority,Lu=n.unstable_UserBlockingPriority,cs=n.unstable_NormalPriority,Xp=n.unstable_LowPriority,od=n.unstable_IdlePriority,ld=n.log,ud=n.unstable_setDisableYieldValue,wi=null,on=null;function ii(r){if(typeof ld=="function"&&ud(r),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(wi,r)}catch{}}var Dt=Math.clz32?Math.clz32:hd,cd=Math.log,Uo=Math.LN2;function hd(r){return r>>>=0,r===0?32:31-(cd(r)/Uo|0)|0}var Bi=256,Aa=262144,zt=4194304;function Fi(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function qi(r,a,l){var c=r.pendingLanes;if(c===0)return 0;var p=0,y=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var x=c&134217727;return x!==0?(c=x&~y,c!==0?p=Fi(c):(T&=x,T!==0?p=Fi(T):l||(l=x&~r,l!==0&&(p=Fi(l))))):(x=c&~y,x!==0?p=Fi(x):T!==0?p=Fi(T):l||(l=c&~r,l!==0&&(p=Fi(l)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:p}function Si(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Wp(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dd(){var r=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),r}function Hi(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function Ia(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Zp(r,a,l,c,p,y){var T=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var x=r.entanglements,z=r.expirationTimes,Y=r.hiddenUpdates;for(l=T&~l;0<l;){var ee=31-Dt(l),se=1<<ee;x[ee]=0,z[ee]=-1;var X=Y[ee];if(X!==null)for(Y[ee]=null,ee=0;ee<X.length;ee++){var Z=X[ee];Z!==null&&(Z.lane&=-536870913)}l&=~se}c!==0&&Ra(r,c,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(T&~a))}function Ra(r,a,l){r.pendingLanes|=a,r.suspendedLanes&=~a;var c=31-Dt(a);r.entangledLanes|=a,r.entanglements[c]=r.entanglements[c]|1073741824|l&261930}function ju(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var c=31-Dt(l),p=1<<c;p&a|r[c]&a&&(r[c]|=a),l&=~p}}function zu(r,a){var l=a&-a;return l=(l&42)!==0?1:Ca(l),(l&(r.suspendedLanes|a))!==0?0:l}function Ca(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Sr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function fd(){var r=ae.p;return r!==0?r:(r=window.event,r===void 0?32:ow(r.type))}function xi(r,a){var l=ae.p;try{return ae.p=r,a()}finally{ae.p=l}}var Ai=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Ai,nn="__reactProps$"+Ai,Gi="__reactContainer$"+Ai,Bo="__reactEvents$"+Ai,Jp="__reactListeners$"+Ai,md="__reactHandles$"+Ai,pd="__reactResources$"+Ai,Ki="__reactMarker$"+Ai;function Fo(r){delete r[Ut],delete r[nn],delete r[Bo],delete r[Jp],delete r[md]}function $i(r){var a=r[Ut];if(a)return a;for(var l=r.parentNode;l;){if(a=l[Gi]||l[Ut]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=GE(r);r!==null;){if(l=r[Ut])return l;r=GE(r)}return a}r=l,l=r.parentNode}return null}function ri(r){if(r=r[Ut]||r[Gi]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Hn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Qi(r){var a=r[pd];return a||(a=r[pd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Bt(r){r[Ki]=!0}var Uu=new Set,Bu={};function Yi(r,a){Xi(r,a),Xi(r+"Capture",a)}function Xi(r,a){for(Bu[r]=a,r=0;r<a.length;r++)Uu.add(a[r])}var Fu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qu={},Hu={};function gd(r){return jt.call(Hu,r)?!0:jt.call(qu,r)?!1:Fu.test(r)?Hu[r]=!0:(qu[r]=!0,!1)}function qo(r,a,l){if(gd(a))if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+l)}}function Gn(r,a,l){if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+l)}}function Ft(r,a,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(a,l,""+c)}}function rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function hs(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Gu(r,a,l){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return p.call(this)},set:function(T){l=""+T,y.call(this,T)}}),Object.defineProperty(r,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function nt(r){if(!r._valueTracker){var a=hs(r)?"checked":"value";r._valueTracker=Gu(r,a,""+r[a])}}function Da(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return r&&(c=hs(r)?r.checked?"true":"false":r.value),r=c,r!==l?(a.setValue(r),!0):!1}function Wi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Na=/[\n"\\]/g;function kn(r){return r.replace(Na,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ho(r,a,l,c,p,y,T,x){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),a!=null?T==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+rn(a)):r.value!==""+rn(a)&&(r.value=""+rn(a)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),a!=null?Ku(r,T,rn(a)):l!=null?Ku(r,T,rn(l)):c!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.name=""+rn(x):r.removeAttribute("name")}function yd(r,a,l,c,p,y,T,x){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){nt(r);return}l=l!=null?""+rn(l):"",a=a!=null?""+rn(a):l,x||a===r.value||(r.value=a),r.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=x?r.checked:!!c,r.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),nt(r)}function Ku(r,a,l){a==="number"&&Wi(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function ds(r,a,l,c){if(r=r.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=a.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&c&&(r[l].defaultSelected=!0)}else{for(l=""+rn(l),a=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,c&&(r[p].defaultSelected=!0);return}a!==null||r[p].disabled||(a=r[p])}a!==null&&(a.selected=!0)}}function vd(r,a,l){if(a!=null&&(a=""+rn(a),a!==r.value&&(r.value=a),l==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=l!=null?""+rn(l):""}function fs(r,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(i(92));if(fe(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=rn(a),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c),nt(r)}function Vn(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var _d=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $u(r,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":c?r.setProperty(a,l):typeof l!="number"||l===0||_d.has(a)?a==="float"?r.cssFloat=l:r[a]=(""+l).trim():r[a]=l+"px"}function Qu(r,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&l[p]!==c&&$u(r,p,c)}else for(var y in a)a.hasOwnProperty(y)&&$u(r,y,a[y])}function Go(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ms=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(r){return ms.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ii(){}var Yu=null;function si(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ps=null,Zi=null;function ka(r){var a=ri(r);if(a&&(r=a.stateNode)){var l=r[nn]||null;e:switch(r=a.stateNode,a.type){case"input":if(Ho(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+kn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==r&&c.form===r.form){var p=c[nn]||null;if(!p)throw Error(i(90));Ho(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===r.form&&Da(c)}break e;case"textarea":vd(r,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ds(r,!!l.multiple,a,!1)}}}var $o=!1;function gs(r,a,l){if($o)return r(a,l);$o=!0;try{var c=r(a);return c}finally{if($o=!1,(ps!==null||Zi!==null)&&(mf(),ps&&(a=ps,r=Zi,Zi=ps=null,ka(a),r)))for(a=0;a<r.length;a++)ka(r[a])}}function Ri(r,a){var l=r.stateNode;if(l===null)return null;var c=l[nn]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=!1;if(ai)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){Va=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{Va=!1}var Ji=null,Xu=null,Ma=null;function Wu(){if(Ma)return Ma;var r,a=Xu,l=a.length,c,p="value"in Ji?Ji.value:Ji.textContent,y=p.length;for(r=0;r<l&&a[r]===p[r];r++);var T=l-r;for(c=1;c<=T&&a[l-c]===p[y-c];c++);return Ma=p.slice(r,1<c?1-c:void 0)}function Pa(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function xr(){return!0}function Ci(){return!1}function ln(r){function a(l,c,p,y,T){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var x in r)r.hasOwnProperty(x)&&(l=r[x],this[x]=l?l(y):y[x]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?xr:Ci,this.isPropagationStopped=Ci,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),a}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},er=ln(Ar),ys=v({},Ar,{view:0,detail:0}),Zu=ln(ys),vs,Qo,tr,Yo=v({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_s,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==tr&&(tr&&r.type==="mousemove"?(vs=r.screenX-tr.screenX,Qo=r.screenY-tr.screenY):Qo=vs=0,tr=r),vs)},movementY:function(r){return"movementY"in r?r.movementY:Qo}}),Ju=ln(Yo),Oa=v({},Yo,{dataTransfer:0}),Td=ln(Oa),Ed=v({},ys,{relatedTarget:0}),La=ln(Ed),ec=v({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),wd=ln(ec),Xo=v({},Ar,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Sd=ln(Xo),xd=v({},Ar,{data:0}),nr=ln(xd),Ad={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Id={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cd(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Rd[r])?!!a[r]:!1}function _s(){return Cd}var In=v({},ys,{key:function(r){if(r.key){var a=Ad[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Pa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Id[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_s,charCode:function(r){return r.type==="keypress"?Pa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Pa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Dd=ln(In),Nd=v({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ir=ln(Nd),m=v({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_s}),b=ln(m),E=v({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=ln(E),$=v({},Yo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),W=ln($),he=v({},Ar,{newState:0,oldState:0}),Pe=ln(he),Nt=[9,13,27,32],Je=ai&&"CompositionEvent"in window,vt=null;ai&&"documentMode"in document&&(vt=document.documentMode);var oi=ai&&"TextEvent"in window&&!vt,ir=ai&&(!Je||vt&&8<vt&&11>=vt),Di=" ",Ni=!1;function ja(r,a){switch(r){case"keyup":return Nt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zo=!1;function CN(r,a){switch(r){case"compositionend":return Wo(a);case"keypress":return a.which!==32?null:(Ni=!0,Di);case"textInput":return r=a.data,r===Di&&Ni?null:r;default:return null}}function DN(r,a){if(Zo)return r==="compositionend"||!Je&&ja(r,a)?(r=Wu(),Ma=Xu=Ji=null,Zo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ir&&a.locale!=="ko"?null:a.data;default:return null}}var NN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qb(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!NN[r.type]:a==="textarea"}function Yb(r,a,l,c){ps?Zi?Zi.push(c):Zi=[c]:ps=c,a=Tf(a,"onChange"),0<a.length&&(l=new er("onChange","change",null,l,c),r.push({event:l,listeners:a}))}var tc=null,nc=null;function kN(r){NE(r,0)}function kd(r){var a=Hn(r);if(Da(a))return r}function Xb(r,a){if(r==="change")return a}var Wb=!1;if(ai){var eg;if(ai){var tg="oninput"in document;if(!tg){var Zb=document.createElement("div");Zb.setAttribute("oninput","return;"),tg=typeof Zb.oninput=="function"}eg=tg}else eg=!1;Wb=eg&&(!document.documentMode||9<document.documentMode)}function Jb(){tc&&(tc.detachEvent("onpropertychange",eT),nc=tc=null)}function eT(r){if(r.propertyName==="value"&&kd(nc)){var a=[];Yb(a,nc,r,si(r)),gs(kN,a)}}function VN(r,a,l){r==="focusin"?(Jb(),tc=a,nc=l,tc.attachEvent("onpropertychange",eT)):r==="focusout"&&Jb()}function MN(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return kd(nc)}function PN(r,a){if(r==="click")return kd(a)}function ON(r,a){if(r==="input"||r==="change")return kd(a)}function LN(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Kn=typeof Object.is=="function"?Object.is:LN;function ic(r,a){if(Kn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!jt.call(a,p)||!Kn(r[p],a[p]))return!1}return!0}function tT(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function nT(r,a){var l=tT(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=a&&c>=a)return{node:l,offset:a-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=tT(l)}}function iT(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?iT(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function rT(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Wi(r.document);a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=Wi(r.document)}return a}function ng(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var jN=ai&&"documentMode"in document&&11>=document.documentMode,Jo=null,ig=null,rc=null,rg=!1;function sT(r,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;rg||Jo==null||Jo!==Wi(c)||(c=Jo,"selectionStart"in c&&ng(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),rc&&ic(rc,c)||(rc=c,c=Tf(ig,"onSelect"),0<c.length&&(a=new er("onSelect","select",null,a,l),r.push({event:a,listeners:c}),a.target=Jo)))}function za(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var el={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionrun:za("Transition","TransitionRun"),transitionstart:za("Transition","TransitionStart"),transitioncancel:za("Transition","TransitionCancel"),transitionend:za("Transition","TransitionEnd")},sg={},aT={};ai&&(aT=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function Ua(r){if(sg[r])return sg[r];if(!el[r])return r;var a=el[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in aT)return sg[r]=a[l];return r}var oT=Ua("animationend"),lT=Ua("animationiteration"),uT=Ua("animationstart"),zN=Ua("transitionrun"),UN=Ua("transitionstart"),BN=Ua("transitioncancel"),cT=Ua("transitionend"),hT=new Map,ag="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ag.push("scrollEnd");function ki(r,a){hT.set(r,a),Yi(a,[r])}var Vd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},li=[],tl=0,og=0;function Md(){for(var r=tl,a=og=tl=0;a<r;){var l=li[a];li[a++]=null;var c=li[a];li[a++]=null;var p=li[a];li[a++]=null;var y=li[a];if(li[a++]=null,c!==null&&p!==null){var T=c.pending;T===null?p.next=p:(p.next=T.next,T.next=p),c.pending=p}y!==0&&dT(l,p,y)}}function Pd(r,a,l,c){li[tl++]=r,li[tl++]=a,li[tl++]=l,li[tl++]=c,og|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function lg(r,a,l,c){return Pd(r,a,l,c),Od(r)}function Ba(r,a){return Pd(r,null,null,a),Od(r)}function dT(r,a,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var p=!1,y=r.return;y!==null;)y.childLanes|=l,c=y.alternate,c!==null&&(c.childLanes|=l),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&a!==null&&(p=31-Dt(l),r=y.hiddenUpdates,c=r[p],c===null?r[p]=[a]:c.push(a),a.lane=l|536870912),y):null}function Od(r){if(50<Ac)throw Ac=0,yy=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var nl={};function FN(r,a,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(r,a,l,c){return new FN(r,a,l,c)}function ug(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Rr(r,a){var l=r.alternate;return l===null?(l=$n(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function fT(r,a){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,a=l.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Ld(r,a,l,c,p,y){var T=0;if(c=r,typeof r=="function")ug(r)&&(T=1);else if(typeof r=="string")T=$k(r,l,ge.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=$n(31,l,a,p),r.elementType=N,r.lanes=y,r;case k:return Fa(l.children,p,y,a);case V:T=8,p|=24;break;case j:return r=$n(12,l,a,p|2),r.elementType=j,r.lanes=y,r;case ie:return r=$n(13,l,a,p),r.elementType=ie,r.lanes=y,r;case ne:return r=$n(19,l,a,p),r.elementType=ne,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:T=10;break e;case M:T=9;break e;case J:T=11;break e;case C:T=14;break e;case A:T=16,c=null;break e}T=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return a=$n(T,l,a,p),a.elementType=r,a.type=c,a.lanes=y,a}function Fa(r,a,l,c){return r=$n(7,r,c,a),r.lanes=l,r}function cg(r,a,l){return r=$n(6,r,null,a),r.lanes=l,r}function mT(r){var a=$n(18,null,null,0);return a.stateNode=r,a}function hg(r,a,l){return a=$n(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var pT=new WeakMap;function ui(r,a){if(typeof r=="object"&&r!==null){var l=pT.get(r);return l!==void 0?l:(a={value:r,source:a,stack:Pu(a)},pT.set(r,a),a)}return{value:r,source:a,stack:Pu(a)}}var il=[],rl=0,jd=null,sc=0,ci=[],hi=0,bs=null,rr=1,sr="";function Cr(r,a){il[rl++]=sc,il[rl++]=jd,jd=r,sc=a}function gT(r,a,l){ci[hi++]=rr,ci[hi++]=sr,ci[hi++]=bs,bs=r;var c=rr;r=sr;var p=32-Dt(c)-1;c&=~(1<<p),l+=1;var y=32-Dt(a)+p;if(30<y){var T=p-p%5;y=(c&(1<<T)-1).toString(32),c>>=T,p-=T,rr=1<<32-Dt(a)+p|l<<p|c,sr=y+r}else rr=1<<y|l<<p|c,sr=r}function dg(r){r.return!==null&&(Cr(r,1),gT(r,1,0))}function fg(r){for(;r===jd;)jd=il[--rl],il[rl]=null,sc=il[--rl],il[rl]=null;for(;r===bs;)bs=ci[--hi],ci[hi]=null,sr=ci[--hi],ci[hi]=null,rr=ci[--hi],ci[hi]=null}function yT(r,a){ci[hi++]=rr,ci[hi++]=sr,ci[hi++]=bs,rr=a.id,sr=a.overflow,bs=r}var un=null,pt=null,$e=!1,Ts=null,di=!1,mg=Error(i(519));function Es(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ac(ui(a,r)),mg}function vT(r){var a=r.stateNode,l=r.type,c=r.memoizedProps;switch(a[Ut]=r,a[nn]=c,l){case"dialog":Be("cancel",a),Be("close",a);break;case"iframe":case"object":case"embed":Be("load",a);break;case"video":case"audio":for(l=0;l<Rc.length;l++)Be(Rc[l],a);break;case"source":Be("error",a);break;case"img":case"image":case"link":Be("error",a),Be("load",a);break;case"details":Be("toggle",a);break;case"input":Be("invalid",a),yd(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Be("invalid",a);break;case"textarea":Be("invalid",a),fs(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||PE(a.textContent,l)?(c.popover!=null&&(Be("beforetoggle",a),Be("toggle",a)),c.onScroll!=null&&Be("scroll",a),c.onScrollEnd!=null&&Be("scrollend",a),c.onClick!=null&&(a.onclick=Ii),a=!0):a=!1,a||Es(r,!0)}function _T(r){for(un=r.return;un;)switch(un.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:un=un.return}}function sl(r){if(r!==un)return!1;if(!$e)return _T(r),$e=!0,!1;var a=r.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||ky(r.type,r.memoizedProps)),l=!l),l&&pt&&Es(r),_T(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));pt=HE(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));pt=HE(r)}else a===27?(a=pt,Os(r.type)?(r=Ly,Ly=null,pt=r):pt=a):pt=un?mi(r.stateNode.nextSibling):null;return!0}function qa(){pt=un=null,$e=!1}function pg(){var r=Ts;return r!==null&&(Ln===null?Ln=r:Ln.push.apply(Ln,r),Ts=null),r}function ac(r){Ts===null?Ts=[r]:Ts.push(r)}var gg=q(null),Ha=null,Dr=null;function ws(r,a,l){pe(gg,a._currentValue),a._currentValue=l}function Nr(r){r._currentValue=gg.current,oe(gg)}function yg(r,a,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),r===l)break;r=r.return}}function vg(r,a,l,c){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var x=y;y=p;for(var z=0;z<a.length;z++)if(x.context===a[z]){y.lanes|=l,x=y.alternate,x!==null&&(x.lanes|=l),yg(y.return,l,r),c||(T=null);break e}y=x.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(i(341));T.lanes|=l,y=T.alternate,y!==null&&(y.lanes|=l),yg(T,l,r),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===r){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function al(r,a,l,c){r=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var x=p.type;Kn(p.pendingProps.value,T.value)||(r!==null?r.push(x):r=[x])}}else if(p===Qe.current){if(T=p.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Vc):r=[Vc])}p=p.return}r!==null&&vg(a,r,l,c),a.flags|=262144}function zd(r){for(r=r.firstContext;r!==null;){if(!Kn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ga(r){Ha=r,Dr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function cn(r){return bT(Ha,r)}function Ud(r,a){return Ha===null&&Ga(r),bT(r,a)}function bT(r,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Dr===null){if(r===null)throw Error(i(308));Dr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Dr=Dr.next=a;return l}var qN=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){a.aborted=!0,r.forEach(function(l){return l()})}},HN=n.unstable_scheduleCallback,GN=n.unstable_NormalPriority,qt={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _g(){return{controller:new qN,data:new Map,refCount:0}}function oc(r){r.refCount--,r.refCount===0&&HN(GN,function(){r.controller.abort()})}var lc=null,bg=0,ol=0,ll=null;function KN(r,a){if(lc===null){var l=lc=[];bg=0,ol=wy(),ll={status:"pending",value:void 0,then:function(c){l.push(c)}}}return bg++,a.then(TT,TT),a}function TT(){if(--bg===0&&lc!==null){ll!==null&&(ll.status="fulfilled");var r=lc;lc=null,ol=0,ll=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function $N(r,a){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return r.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var ET=H.S;H.S=function(r,a){sE=An(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&KN(r,a),ET!==null&&ET(r,a)};var Ka=q(null);function Tg(){var r=Ka.current;return r!==null?r:ht.pooledCache}function Bd(r,a){a===null?pe(Ka,Ka.current):pe(Ka,a.pool)}function wT(){var r=Tg();return r===null?null:{parent:qt._currentValue,pool:r}}var ul=Error(i(460)),Eg=Error(i(474)),Fd=Error(i(542)),qd={then:function(){}};function ST(r){return r=r.status,r==="fulfilled"||r==="rejected"}function xT(r,a,l){switch(l=r[l],l===void 0?r.push(a):l!==a&&(a.then(Ii,Ii),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,IT(r),r;default:if(typeof a.status=="string")a.then(Ii,Ii);else{if(r=ht,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,IT(r),r}throw Qa=a,ul}}function $a(r){try{var a=r._init;return a(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Qa=l,ul):l}}var Qa=null;function AT(){if(Qa===null)throw Error(i(459));var r=Qa;return Qa=null,r}function IT(r){if(r===ul||r===Fd)throw Error(i(483))}var cl=null,uc=0;function Hd(r){var a=uc;return uc+=1,cl===null&&(cl=[]),xT(cl,r,a)}function cc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Gd(r,a){throw a.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function RT(r){function a(G,F){if(r){var Q=G.deletions;Q===null?(G.deletions=[F],G.flags|=16):Q.push(F)}}function l(G,F){if(!r)return null;for(;F!==null;)a(G,F),F=F.sibling;return null}function c(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function p(G,F){return G=Rr(G,F),G.index=0,G.sibling=null,G}function y(G,F,Q){return G.index=Q,r?(Q=G.alternate,Q!==null?(Q=Q.index,Q<F?(G.flags|=67108866,F):Q):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function T(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function x(G,F,Q,re){return F===null||F.tag!==6?(F=cg(Q,G.mode,re),F.return=G,F):(F=p(F,Q),F.return=G,F)}function z(G,F,Q,re){var Se=Q.type;return Se===k?ee(G,F,Q.props.children,re,Q.key):F!==null&&(F.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===A&&$a(Se)===F.type)?(F=p(F,Q.props),cc(F,Q),F.return=G,F):(F=Ld(Q.type,Q.key,Q.props,null,G.mode,re),cc(F,Q),F.return=G,F)}function Y(G,F,Q,re){return F===null||F.tag!==4||F.stateNode.containerInfo!==Q.containerInfo||F.stateNode.implementation!==Q.implementation?(F=hg(Q,G.mode,re),F.return=G,F):(F=p(F,Q.children||[]),F.return=G,F)}function ee(G,F,Q,re,Se){return F===null||F.tag!==7?(F=Fa(Q,G.mode,re,Se),F.return=G,F):(F=p(F,Q),F.return=G,F)}function se(G,F,Q){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=cg(""+F,G.mode,Q),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return Q=Ld(F.type,F.key,F.props,null,G.mode,Q),cc(Q,F),Q.return=G,Q;case R:return F=hg(F,G.mode,Q),F.return=G,F;case A:return F=$a(F),se(G,F,Q)}if(fe(F)||B(F))return F=Fa(F,G.mode,Q,null),F.return=G,F;if(typeof F.then=="function")return se(G,Hd(F),Q);if(F.$$typeof===L)return se(G,Ud(G,F),Q);Gd(G,F)}return null}function X(G,F,Q,re){var Se=F!==null?F.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Se!==null?null:x(G,F,""+Q,re);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:return Q.key===Se?z(G,F,Q,re):null;case R:return Q.key===Se?Y(G,F,Q,re):null;case A:return Q=$a(Q),X(G,F,Q,re)}if(fe(Q)||B(Q))return Se!==null?null:ee(G,F,Q,re,null);if(typeof Q.then=="function")return X(G,F,Hd(Q),re);if(Q.$$typeof===L)return X(G,F,Ud(G,Q),re);Gd(G,Q)}return null}function Z(G,F,Q,re,Se){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return G=G.get(Q)||null,x(F,G,""+re,Se);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case S:return G=G.get(re.key===null?Q:re.key)||null,z(F,G,re,Se);case R:return G=G.get(re.key===null?Q:re.key)||null,Y(F,G,re,Se);case A:return re=$a(re),Z(G,F,Q,re,Se)}if(fe(re)||B(re))return G=G.get(Q)||null,ee(F,G,re,Se,null);if(typeof re.then=="function")return Z(G,F,Q,Hd(re),Se);if(re.$$typeof===L)return Z(G,F,Q,Ud(F,re),Se);Gd(F,re)}return null}function ve(G,F,Q,re){for(var Se=null,Xe=null,be=F,je=F=0,He=null;be!==null&&je<Q.length;je++){be.index>je?(He=be,be=null):He=be.sibling;var We=X(G,be,Q[je],re);if(We===null){be===null&&(be=He);break}r&&be&&We.alternate===null&&a(G,be),F=y(We,F,je),Xe===null?Se=We:Xe.sibling=We,Xe=We,be=He}if(je===Q.length)return l(G,be),$e&&Cr(G,je),Se;if(be===null){for(;je<Q.length;je++)be=se(G,Q[je],re),be!==null&&(F=y(be,F,je),Xe===null?Se=be:Xe.sibling=be,Xe=be);return $e&&Cr(G,je),Se}for(be=c(be);je<Q.length;je++)He=Z(be,G,je,Q[je],re),He!==null&&(r&&He.alternate!==null&&be.delete(He.key===null?je:He.key),F=y(He,F,je),Xe===null?Se=He:Xe.sibling=He,Xe=He);return r&&be.forEach(function(Bs){return a(G,Bs)}),$e&&Cr(G,je),Se}function Ae(G,F,Q,re){if(Q==null)throw Error(i(151));for(var Se=null,Xe=null,be=F,je=F=0,He=null,We=Q.next();be!==null&&!We.done;je++,We=Q.next()){be.index>je?(He=be,be=null):He=be.sibling;var Bs=X(G,be,We.value,re);if(Bs===null){be===null&&(be=He);break}r&&be&&Bs.alternate===null&&a(G,be),F=y(Bs,F,je),Xe===null?Se=Bs:Xe.sibling=Bs,Xe=Bs,be=He}if(We.done)return l(G,be),$e&&Cr(G,je),Se;if(be===null){for(;!We.done;je++,We=Q.next())We=se(G,We.value,re),We!==null&&(F=y(We,F,je),Xe===null?Se=We:Xe.sibling=We,Xe=We);return $e&&Cr(G,je),Se}for(be=c(be);!We.done;je++,We=Q.next())We=Z(be,G,je,We.value,re),We!==null&&(r&&We.alternate!==null&&be.delete(We.key===null?je:We.key),F=y(We,F,je),Xe===null?Se=We:Xe.sibling=We,Xe=We);return r&&be.forEach(function(rV){return a(G,rV)}),$e&&Cr(G,je),Se}function ct(G,F,Q,re){if(typeof Q=="object"&&Q!==null&&Q.type===k&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:e:{for(var Se=Q.key;F!==null;){if(F.key===Se){if(Se=Q.type,Se===k){if(F.tag===7){l(G,F.sibling),re=p(F,Q.props.children),re.return=G,G=re;break e}}else if(F.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===A&&$a(Se)===F.type){l(G,F.sibling),re=p(F,Q.props),cc(re,Q),re.return=G,G=re;break e}l(G,F);break}else a(G,F);F=F.sibling}Q.type===k?(re=Fa(Q.props.children,G.mode,re,Q.key),re.return=G,G=re):(re=Ld(Q.type,Q.key,Q.props,null,G.mode,re),cc(re,Q),re.return=G,G=re)}return T(G);case R:e:{for(Se=Q.key;F!==null;){if(F.key===Se)if(F.tag===4&&F.stateNode.containerInfo===Q.containerInfo&&F.stateNode.implementation===Q.implementation){l(G,F.sibling),re=p(F,Q.children||[]),re.return=G,G=re;break e}else{l(G,F);break}else a(G,F);F=F.sibling}re=hg(Q,G.mode,re),re.return=G,G=re}return T(G);case A:return Q=$a(Q),ct(G,F,Q,re)}if(fe(Q))return ve(G,F,Q,re);if(B(Q)){if(Se=B(Q),typeof Se!="function")throw Error(i(150));return Q=Se.call(Q),Ae(G,F,Q,re)}if(typeof Q.then=="function")return ct(G,F,Hd(Q),re);if(Q.$$typeof===L)return ct(G,F,Ud(G,Q),re);Gd(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,F!==null&&F.tag===6?(l(G,F.sibling),re=p(F,Q),re.return=G,G=re):(l(G,F),re=cg(Q,G.mode,re),re.return=G,G=re),T(G)):l(G,F)}return function(G,F,Q,re){try{uc=0;var Se=ct(G,F,Q,re);return cl=null,Se}catch(be){if(be===ul||be===Fd)throw be;var Xe=$n(29,be,null,G.mode);return Xe.lanes=re,Xe.return=G,Xe}finally{}}}var Ya=RT(!0),CT=RT(!1),Ss=!1;function wg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sg(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function xs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function As(r,a,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(et&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=Od(r),dT(r,null,l),a}return Pd(r,c,a,l),Od(r)}function hc(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=r.pendingLanes,l|=c,a.lanes=l,ju(r,l)}}function xg(r,a){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=a:y=y.next=a}else p=y=a;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}var Ag=!1;function dc(){if(Ag){var r=ll;if(r!==null)throw r}}function fc(r,a,l,c){Ag=!1;var p=r.updateQueue;Ss=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,x=p.shared.pending;if(x!==null){p.shared.pending=null;var z=x,Y=z.next;z.next=null,T===null?y=Y:T.next=Y,T=z;var ee=r.alternate;ee!==null&&(ee=ee.updateQueue,x=ee.lastBaseUpdate,x!==T&&(x===null?ee.firstBaseUpdate=Y:x.next=Y,ee.lastBaseUpdate=z))}if(y!==null){var se=p.baseState;T=0,ee=Y=z=null,x=y;do{var X=x.lane&-536870913,Z=X!==x.lane;if(Z?(qe&X)===X:(c&X)===X){X!==0&&X===ol&&(Ag=!0),ee!==null&&(ee=ee.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ve=r,Ae=x;X=a;var ct=l;switch(Ae.tag){case 1:if(ve=Ae.payload,typeof ve=="function"){se=ve.call(ct,se,X);break e}se=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ae.payload,X=typeof ve=="function"?ve.call(ct,se,X):ve,X==null)break e;se=v({},se,X);break e;case 2:Ss=!0}}X=x.callback,X!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=p.callbacks,Z===null?p.callbacks=[X]:Z.push(X))}else Z={lane:X,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ee===null?(Y=ee=Z,z=se):ee=ee.next=Z,T|=X;if(x=x.next,x===null){if(x=p.shared.pending,x===null)break;Z=x,x=Z.next,Z.next=null,p.lastBaseUpdate=Z,p.shared.pending=null}}while(!0);ee===null&&(z=se),p.baseState=z,p.firstBaseUpdate=Y,p.lastBaseUpdate=ee,y===null&&(p.shared.lanes=0),Ns|=T,r.lanes=T,r.memoizedState=se}}function DT(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function NT(r,a){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)DT(l[r],a)}var hl=q(null),Kd=q(0);function kT(r,a){r=Ur,pe(Kd,r),pe(hl,a),Ur=r|a.baseLanes}function Ig(){pe(Kd,Ur),pe(hl,hl.current)}function Rg(){Ur=Kd.current,oe(hl),oe(Kd)}var Qn=q(null),fi=null;function Is(r){var a=r.alternate;pe(kt,kt.current&1),pe(Qn,r),fi===null&&(a===null||hl.current!==null||a.memoizedState!==null)&&(fi=r)}function Cg(r){pe(kt,kt.current),pe(Qn,r),fi===null&&(fi=r)}function VT(r){r.tag===22?(pe(kt,kt.current),pe(Qn,r),fi===null&&(fi=r)):Rs()}function Rs(){pe(kt,kt.current),pe(Qn,Qn.current)}function Yn(r){oe(Qn),fi===r&&(fi=null),oe(kt)}var kt=q(0);function $d(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Py(l)||Oy(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var kr=0,Oe=null,lt=null,Ht=null,Qd=!1,dl=!1,Xa=!1,Yd=0,mc=0,fl=null,QN=0;function xt(){throw Error(i(321))}function Dg(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!Kn(r[l],a[l]))return!1;return!0}function Ng(r,a,l,c,p,y){return kr=y,Oe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=r===null||r.memoizedState===null?g1:Kg,Xa=!1,y=l(c,p),Xa=!1,dl&&(y=PT(a,l,c,p)),MT(r),y}function MT(r){H.H=yc;var a=lt!==null&&lt.next!==null;if(kr=0,Ht=lt=Oe=null,Qd=!1,mc=0,fl=null,a)throw Error(i(300));r===null||Gt||(r=r.dependencies,r!==null&&zd(r)&&(Gt=!0))}function PT(r,a,l,c){Oe=r;var p=0;do{if(dl&&(fl=null),mc=0,dl=!1,25<=p)throw Error(i(301));if(p+=1,Ht=lt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=y1,y=a(l,c)}while(dl);return y}function YN(){var r=H.H,a=r.useState()[0];return a=typeof a.then=="function"?pc(a):a,r=r.useState()[0],(lt!==null?lt.memoizedState:null)!==r&&(Oe.flags|=1024),a}function kg(){var r=Yd!==0;return Yd=0,r}function Vg(r,a,l){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~l}function Mg(r){if(Qd){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Qd=!1}kr=0,Ht=lt=Oe=null,dl=!1,mc=Yd=0,fl=null}function Rn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Oe.memoizedState=Ht=r:Ht=Ht.next=r,Ht}function Vt(){if(lt===null){var r=Oe.alternate;r=r!==null?r.memoizedState:null}else r=lt.next;var a=Ht===null?Oe.memoizedState:Ht.next;if(a!==null)Ht=a,lt=r;else{if(r===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));lt=r,r={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Ht===null?Oe.memoizedState=Ht=r:Ht=Ht.next=r}return Ht}function Xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(r){var a=mc;return mc+=1,fl===null&&(fl=[]),r=xT(fl,r,a),a=Oe,(Ht===null?a.memoizedState:Ht.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?g1:Kg),r}function Wd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return pc(r);if(r.$$typeof===L)return cn(r)}throw Error(i(438,String(r)))}function Pg(r){var a=null,l=Oe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=Oe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Xd(),Oe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(r),c=0;c<r;c++)l[c]=P;return a.index++,l}function Vr(r,a){return typeof a=="function"?a(r):a}function Zd(r){var a=Vt();return Og(a,lt,r)}function Og(r,a,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var p=r.baseQueue,y=c.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}a.baseQueue=p=y,c.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{a=p.next;var x=T=null,z=null,Y=a,ee=!1;do{var se=Y.lane&-536870913;if(se!==Y.lane?(qe&se)===se:(kr&se)===se){var X=Y.revertLane;if(X===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),se===ol&&(ee=!0);else if((kr&X)===X){Y=Y.next,X===ol&&(ee=!0);continue}else se={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},z===null?(x=z=se,T=y):z=z.next=se,Oe.lanes|=X,Ns|=X;se=Y.action,Xa&&l(y,se),y=Y.hasEagerState?Y.eagerState:l(y,se)}else X={lane:se,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},z===null?(x=z=X,T=y):z=z.next=X,Oe.lanes|=se,Ns|=se;Y=Y.next}while(Y!==null&&Y!==a);if(z===null?T=y:z.next=x,!Kn(y,r.memoizedState)&&(Gt=!0,ee&&(l=ll,l!==null)))throw l;r.memoizedState=y,r.baseState=T,r.baseQueue=z,c.lastRenderedState=y}return p===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Lg(r){var a=Vt(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,p=l.pending,y=a.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=r(y,T.action),T=T.next;while(T!==p);Kn(y,a.memoizedState)||(Gt=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,c]}function OT(r,a,l){var c=Oe,p=Vt(),y=$e;if(y){if(l===void 0)throw Error(i(407));l=l()}else l=a();var T=!Kn((lt||p).memoizedState,l);if(T&&(p.memoizedState=l,Gt=!0),p=p.queue,Ug(zT.bind(null,c,p,r),[r]),p.getSnapshot!==a||T||Ht!==null&&Ht.memoizedState.tag&1){if(c.flags|=2048,ml(9,{destroy:void 0},jT.bind(null,c,p,l,a),null),ht===null)throw Error(i(349));y||(kr&127)!==0||LT(c,a,l)}return l}function LT(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=Oe.updateQueue,a===null?(a=Xd(),Oe.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function jT(r,a,l,c){a.value=l,a.getSnapshot=c,UT(a)&&BT(r)}function zT(r,a,l){return l(function(){UT(a)&&BT(r)})}function UT(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!Kn(r,l)}catch{return!0}}function BT(r){var a=Ba(r,2);a!==null&&jn(a,r,2)}function jg(r){var a=Rn();if(typeof r=="function"){var l=r;if(r=l(),Xa){ii(!0);try{l()}finally{ii(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:r},a}function FT(r,a,l,c){return r.baseState=l,Og(r,lt,typeof c=="function"?c:Vr)}function XN(r,a,l,c,p){if(tf(r))throw Error(i(485));if(r=a.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};H.T!==null?l(!0):y.isTransition=!1,c(y),l=a.pending,l===null?(y.next=a.pending=y,qT(a,y)):(y.next=l.next,a.pending=l.next=y)}}function qT(r,a){var l=a.action,c=a.payload,p=r.state;if(a.isTransition){var y=H.T,T={};H.T=T;try{var x=l(p,c),z=H.S;z!==null&&z(T,x),HT(r,a,x)}catch(Y){zg(r,a,Y)}finally{y!==null&&T.types!==null&&(y.types=T.types),H.T=y}}else try{y=l(p,c),HT(r,a,y)}catch(Y){zg(r,a,Y)}}function HT(r,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){GT(r,a,c)},function(c){return zg(r,a,c)}):GT(r,a,l)}function GT(r,a,l){a.status="fulfilled",a.value=l,KT(a),r.state=l,a=r.pending,a!==null&&(l=a.next,l===a?r.pending=null:(l=l.next,a.next=l,qT(r,l)))}function zg(r,a,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,KT(a),a=a.next;while(a!==c)}r.action=null}function KT(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function $T(r,a){return a}function QT(r,a){if($e){var l=ht.formState;if(l!==null){e:{var c=Oe;if($e){if(pt){t:{for(var p=pt,y=di;p.nodeType!==8;){if(!y){p=null;break t}if(p=mi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){pt=mi(p.nextSibling),c=p.data==="F!";break e}}Es(c)}c=!1}c&&(a=l[0])}}return l=Rn(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$T,lastRenderedState:a},l.queue=c,l=f1.bind(null,Oe,c),c.dispatch=l,c=jg(!1),y=Gg.bind(null,Oe,!1,c.queue),c=Rn(),p={state:a,dispatch:null,action:r,pending:null},c.queue=p,l=XN.bind(null,Oe,p,y,l),p.dispatch=l,c.memoizedState=r,[a,l,!1]}function YT(r){var a=Vt();return XT(a,lt,r)}function XT(r,a,l){if(a=Og(r,a,$T)[0],r=Zd(Vr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=pc(a)}catch(T){throw T===ul?Fd:T}else c=a;a=Vt();var p=a.queue,y=p.dispatch;return l!==a.memoizedState&&(Oe.flags|=2048,ml(9,{destroy:void 0},WN.bind(null,p,l),null)),[c,y,r]}function WN(r,a){r.action=a}function WT(r){var a=Vt(),l=lt;if(l!==null)return XT(a,l,r);Vt(),a=a.memoizedState,l=Vt();var c=l.queue.dispatch;return l.memoizedState=r,[a,c,!1]}function ml(r,a,l,c){return r={tag:r,create:l,deps:c,inst:a,next:null},a=Oe.updateQueue,a===null&&(a=Xd(),Oe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,a.lastEffect=r),r}function ZT(){return Vt().memoizedState}function Jd(r,a,l,c){var p=Rn();Oe.flags|=r,p.memoizedState=ml(1|a,{destroy:void 0},l,c===void 0?null:c)}function ef(r,a,l,c){var p=Vt();c=c===void 0?null:c;var y=p.memoizedState.inst;lt!==null&&c!==null&&Dg(c,lt.memoizedState.deps)?p.memoizedState=ml(a,y,l,c):(Oe.flags|=r,p.memoizedState=ml(1|a,y,l,c))}function JT(r,a){Jd(8390656,8,r,a)}function Ug(r,a){ef(2048,8,r,a)}function ZN(r){Oe.flags|=4;var a=Oe.updateQueue;if(a===null)a=Xd(),Oe.updateQueue=a,a.events=[r];else{var l=a.events;l===null?a.events=[r]:l.push(r)}}function e1(r){var a=Vt().memoizedState;return ZN({ref:a,nextImpl:r}),function(){if((et&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function t1(r,a){return ef(4,2,r,a)}function n1(r,a){return ef(4,4,r,a)}function i1(r,a){if(typeof a=="function"){r=r();var l=a(r);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function r1(r,a,l){l=l!=null?l.concat([r]):null,ef(4,4,i1.bind(null,a,r),l)}function Bg(){}function s1(r,a){var l=Vt();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&Dg(a,c[1])?c[0]:(l.memoizedState=[r,a],r)}function a1(r,a){var l=Vt();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&Dg(a,c[1]))return c[0];if(c=r(),Xa){ii(!0);try{r()}finally{ii(!1)}}return l.memoizedState=[c,a],c}function Fg(r,a,l){return l===void 0||(kr&1073741824)!==0&&(qe&261930)===0?r.memoizedState=a:(r.memoizedState=l,r=oE(),Oe.lanes|=r,Ns|=r,l)}function o1(r,a,l,c){return Kn(l,a)?l:hl.current!==null?(r=Fg(r,l,c),Kn(r,a)||(Gt=!0),r):(kr&42)===0||(kr&1073741824)!==0&&(qe&261930)===0?(Gt=!0,r.memoizedState=l):(r=oE(),Oe.lanes|=r,Ns|=r,a)}function l1(r,a,l,c,p){var y=ae.p;ae.p=y!==0&&8>y?y:8;var T=H.T,x={};H.T=x,Gg(r,!1,a,l);try{var z=p(),Y=H.S;if(Y!==null&&Y(x,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ee=$N(z,c);gc(r,a,ee,Zn(r))}else gc(r,a,c,Zn(r))}catch(se){gc(r,a,{then:function(){},status:"rejected",reason:se},Zn())}finally{ae.p=y,T!==null&&x.types!==null&&(T.types=x.types),H.T=T}}function JN(){}function qg(r,a,l,c){if(r.tag!==5)throw Error(i(476));var p=u1(r).queue;l1(r,p,a,de,l===null?JN:function(){return c1(r),l(c)})}function u1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:de},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:l},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function c1(r){var a=u1(r);a.next===null&&(a=r.alternate.memoizedState),gc(r,a.next.queue,{},Zn())}function Hg(){return cn(Vc)}function h1(){return Vt().memoizedState}function d1(){return Vt().memoizedState}function ek(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var l=Zn();r=xs(l);var c=As(a,r,l);c!==null&&(jn(c,a,l),hc(c,a,l)),a={cache:_g()},r.payload=a;return}a=a.return}}function tk(r,a,l){var c=Zn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},tf(r)?m1(a,l):(l=lg(r,a,l,c),l!==null&&(jn(l,r,c),p1(l,a,c)))}function f1(r,a,l){var c=Zn();gc(r,a,l,c)}function gc(r,a,l,c){var p={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(tf(r))m1(a,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,x=y(T,l);if(p.hasEagerState=!0,p.eagerState=x,Kn(x,T))return Pd(r,a,p,0),ht===null&&Md(),!1}catch{}finally{}if(l=lg(r,a,p,c),l!==null)return jn(l,r,c),p1(l,a,c),!0}return!1}function Gg(r,a,l,c){if(c={lane:2,revertLane:wy(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},tf(r)){if(a)throw Error(i(479))}else a=lg(r,l,c,2),a!==null&&jn(a,r,2)}function tf(r){var a=r.alternate;return r===Oe||a!==null&&a===Oe}function m1(r,a){dl=Qd=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function p1(r,a,l){if((l&4194048)!==0){var c=a.lanes;c&=r.pendingLanes,l|=c,a.lanes=l,ju(r,l)}}var yc={readContext:cn,use:Wd,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};yc.useEffectEvent=xt;var g1={readContext:cn,use:Wd,useCallback:function(r,a){return Rn().memoizedState=[r,a===void 0?null:a],r},useContext:cn,useEffect:JT,useImperativeHandle:function(r,a,l){l=l!=null?l.concat([r]):null,Jd(4194308,4,i1.bind(null,a,r),l)},useLayoutEffect:function(r,a){return Jd(4194308,4,r,a)},useInsertionEffect:function(r,a){Jd(4,2,r,a)},useMemo:function(r,a){var l=Rn();a=a===void 0?null:a;var c=r();if(Xa){ii(!0);try{r()}finally{ii(!1)}}return l.memoizedState=[c,a],c},useReducer:function(r,a,l){var c=Rn();if(l!==void 0){var p=l(a);if(Xa){ii(!0);try{l(a)}finally{ii(!1)}}}else p=a;return c.memoizedState=c.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},c.queue=r,r=r.dispatch=tk.bind(null,Oe,r),[c.memoizedState,r]},useRef:function(r){var a=Rn();return r={current:r},a.memoizedState=r},useState:function(r){r=jg(r);var a=r.queue,l=f1.bind(null,Oe,a);return a.dispatch=l,[r.memoizedState,l]},useDebugValue:Bg,useDeferredValue:function(r,a){var l=Rn();return Fg(l,r,a)},useTransition:function(){var r=jg(!1);return r=l1.bind(null,Oe,r.queue,!0,!1),Rn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,l){var c=Oe,p=Rn();if($e){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),ht===null)throw Error(i(349));(qe&127)!==0||LT(c,a,l)}p.memoizedState=l;var y={value:l,getSnapshot:a};return p.queue=y,JT(zT.bind(null,c,y,r),[r]),c.flags|=2048,ml(9,{destroy:void 0},jT.bind(null,c,y,l,a),null),l},useId:function(){var r=Rn(),a=ht.identifierPrefix;if($e){var l=sr,c=rr;l=(c&~(1<<32-Dt(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Yd++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=QN++,a="_"+a+"r_"+l.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:Hg,useFormState:QT,useActionState:QT,useOptimistic:function(r){var a=Rn();a.memoizedState=a.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Gg.bind(null,Oe,!0,l),l.dispatch=a,[r,a]},useMemoCache:Pg,useCacheRefresh:function(){return Rn().memoizedState=ek.bind(null,Oe)},useEffectEvent:function(r){var a=Rn(),l={impl:r};return a.memoizedState=l,function(){if((et&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Kg={readContext:cn,use:Wd,useCallback:s1,useContext:cn,useEffect:Ug,useImperativeHandle:r1,useInsertionEffect:t1,useLayoutEffect:n1,useMemo:a1,useReducer:Zd,useRef:ZT,useState:function(){return Zd(Vr)},useDebugValue:Bg,useDeferredValue:function(r,a){var l=Vt();return o1(l,lt.memoizedState,r,a)},useTransition:function(){var r=Zd(Vr)[0],a=Vt().memoizedState;return[typeof r=="boolean"?r:pc(r),a]},useSyncExternalStore:OT,useId:h1,useHostTransitionStatus:Hg,useFormState:YT,useActionState:YT,useOptimistic:function(r,a){var l=Vt();return FT(l,lt,r,a)},useMemoCache:Pg,useCacheRefresh:d1};Kg.useEffectEvent=e1;var y1={readContext:cn,use:Wd,useCallback:s1,useContext:cn,useEffect:Ug,useImperativeHandle:r1,useInsertionEffect:t1,useLayoutEffect:n1,useMemo:a1,useReducer:Lg,useRef:ZT,useState:function(){return Lg(Vr)},useDebugValue:Bg,useDeferredValue:function(r,a){var l=Vt();return lt===null?Fg(l,r,a):o1(l,lt.memoizedState,r,a)},useTransition:function(){var r=Lg(Vr)[0],a=Vt().memoizedState;return[typeof r=="boolean"?r:pc(r),a]},useSyncExternalStore:OT,useId:h1,useHostTransitionStatus:Hg,useFormState:WT,useActionState:WT,useOptimistic:function(r,a){var l=Vt();return lt!==null?FT(l,lt,r,a):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Pg,useCacheRefresh:d1};y1.useEffectEvent=e1;function $g(r,a,l,c){a=r.memoizedState,l=l(c,a),l=l==null?a:v({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Qg={enqueueSetState:function(r,a,l){r=r._reactInternals;var c=Zn(),p=xs(c);p.payload=a,l!=null&&(p.callback=l),a=As(r,p,c),a!==null&&(jn(a,r,c),hc(a,r,c))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var c=Zn(),p=xs(c);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=As(r,p,c),a!==null&&(jn(a,r,c),hc(a,r,c))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=Zn(),c=xs(l);c.tag=2,a!=null&&(c.callback=a),a=As(r,c,l),a!==null&&(jn(a,r,l),hc(a,r,l))}};function v1(r,a,l,c,p,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,y,T):a.prototype&&a.prototype.isPureReactComponent?!ic(l,c)||!ic(p,y):!0}function _1(r,a,l,c){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==r&&Qg.enqueueReplaceState(a,a.state,null)}function Wa(r,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(r=r.defaultProps){l===a&&(l=v({},l));for(var p in r)l[p]===void 0&&(l[p]=r[p])}return l}function b1(r){Vd(r)}function T1(r){console.error(r)}function E1(r){Vd(r)}function nf(r,a){try{var l=r.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function w1(r,a,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Yg(r,a,l){return l=xs(l),l.tag=3,l.payload={element:null},l.callback=function(){nf(r,a)},l}function S1(r){return r=xs(r),r.tag=3,r}function x1(r,a,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;r.payload=function(){return p(y)},r.callback=function(){w1(a,l,c)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){w1(a,l,c),typeof p!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function nk(r,a,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&al(a,l,p,!0),l=Qn.current,l!==null){switch(l.tag){case 31:case 13:return fi===null?pf():l.alternate===null&&At===0&&(At=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===qd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),by(r,c,p)),!1;case 22:return l.flags|=65536,c===qd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),by(r,c,p)),!1}throw Error(i(435,l.tag))}return by(r,c,p),pf(),!1}if($e)return a=Qn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==mg&&(r=Error(i(422),{cause:c}),ac(ui(r,l)))):(c!==mg&&(a=Error(i(423),{cause:c}),ac(ui(a,l))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,c=ui(c,l),p=Yg(r.stateNode,c,p),xg(r,p),At!==4&&(At=2)),!1;var y=Error(i(520),{cause:c});if(y=ui(y,l),xc===null?xc=[y]:xc.push(y),At!==4&&(At=2),a===null)return!0;c=ui(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,r=p&-p,l.lanes|=r,r=Yg(l.stateNode,c,r),xg(l,r),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ks===null||!ks.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=S1(p),x1(p,r,l,c),xg(l,p),!1}l=l.return}while(l!==null);return!1}var Xg=Error(i(461)),Gt=!1;function hn(r,a,l,c){a.child=r===null?CT(a,null,l,c):Ya(a,r.child,l,c)}function A1(r,a,l,c,p){l=l.render;var y=a.ref;if("ref"in c){var T={};for(var x in c)x!=="ref"&&(T[x]=c[x])}else T=c;return Ga(a),c=Ng(r,a,l,T,y,p),x=kg(),r!==null&&!Gt?(Vg(r,a,p),Mr(r,a,p)):($e&&x&&dg(a),a.flags|=1,hn(r,a,c,p),a.child)}function I1(r,a,l,c,p){if(r===null){var y=l.type;return typeof y=="function"&&!ug(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,R1(r,a,y,c,p)):(r=Ld(l.type,null,c,a,a.mode,p),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!ry(r,p)){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:ic,l(T,c)&&r.ref===a.ref)return Mr(r,a,p)}return a.flags|=1,r=Rr(y,c),r.ref=a.ref,r.return=a,a.child=r}function R1(r,a,l,c,p){if(r!==null){var y=r.memoizedProps;if(ic(y,c)&&r.ref===a.ref)if(Gt=!1,a.pendingProps=c=y,ry(r,p))(r.flags&131072)!==0&&(Gt=!0);else return a.lanes=r.lanes,Mr(r,a,p)}return Wg(r,a,l,c,p)}function C1(r,a,l,c){var p=c.children,y=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,r!==null){for(c=a.child=r.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~y}else c=0,a.child=null;return D1(r,a,y,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Bd(a,y!==null?y.cachePool:null),y!==null?kT(a,y):Ig(),VT(a);else return c=a.lanes=536870912,D1(r,a,y!==null?y.baseLanes|l:l,l,c)}else y!==null?(Bd(a,y.cachePool),kT(a,y),Rs(),a.memoizedState=null):(r!==null&&Bd(a,null),Ig(),Rs());return hn(r,a,p,l),a.child}function vc(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function D1(r,a,l,c,p){var y=Tg();return y=y===null?null:{parent:qt._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},r!==null&&Bd(a,null),Ig(),VT(a),r!==null&&al(r,a,c,!0),a.childLanes=p,null}function rf(r,a){return a=af({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function N1(r,a,l){return Ya(a,r.child,null,l),r=rf(a,a.pendingProps),r.flags|=2,Yn(a),a.memoizedState=null,r}function ik(r,a,l){var c=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,r===null){if($e){if(c.mode==="hidden")return r=rf(a,c),a.lanes=536870912,vc(null,r);if(Cg(a),(r=pt)?(r=qE(r,di),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:bs!==null?{id:rr,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},l=mT(r),l.return=a,a.child=l,un=a,pt=null)):r=null,r===null)throw Es(a);return a.lanes=536870912,null}return rf(a,c)}var y=r.memoizedState;if(y!==null){var T=y.dehydrated;if(Cg(a),p)if(a.flags&256)a.flags&=-257,a=N1(r,a,l);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(Gt||al(r,a,l,!1),p=(l&r.childLanes)!==0,Gt||p){if(c=ht,c!==null&&(T=zu(c,l),T!==0&&T!==y.retryLane))throw y.retryLane=T,Ba(r,T),jn(c,r,T),Xg;pf(),a=N1(r,a,l)}else r=y.treeContext,pt=mi(T.nextSibling),un=a,$e=!0,Ts=null,di=!1,r!==null&&yT(a,r),a=rf(a,c),a.flags|=4096;return a}return r=Rr(r.child,{mode:c.mode,children:c.children}),r.ref=a.ref,a.child=r,r.return=a,r}function sf(r,a){var l=a.ref;if(l===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(a.flags|=4194816)}}function Wg(r,a,l,c,p){return Ga(a),l=Ng(r,a,l,c,void 0,p),c=kg(),r!==null&&!Gt?(Vg(r,a,p),Mr(r,a,p)):($e&&c&&dg(a),a.flags|=1,hn(r,a,l,p),a.child)}function k1(r,a,l,c,p,y){return Ga(a),a.updateQueue=null,l=PT(a,c,l,p),MT(r),c=kg(),r!==null&&!Gt?(Vg(r,a,y),Mr(r,a,y)):($e&&c&&dg(a),a.flags|=1,hn(r,a,l,y),a.child)}function V1(r,a,l,c,p){if(Ga(a),a.stateNode===null){var y=nl,T=l.contextType;typeof T=="object"&&T!==null&&(y=cn(T)),y=new l(c,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Qg,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=c,y.state=a.memoizedState,y.refs={},wg(a),T=l.contextType,y.context=typeof T=="object"&&T!==null?cn(T):nl,y.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&($g(a,l,T,c),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Qg.enqueueReplaceState(y,y.state,null),fc(a,c,y,p),dc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(r===null){y=a.stateNode;var x=a.memoizedProps,z=Wa(l,x);y.props=z;var Y=y.context,ee=l.contextType;T=nl,typeof ee=="object"&&ee!==null&&(T=cn(ee));var se=l.getDerivedStateFromProps;ee=typeof se=="function"||typeof y.getSnapshotBeforeUpdate=="function",x=a.pendingProps!==x,ee||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x||Y!==T)&&_1(a,y,c,T),Ss=!1;var X=a.memoizedState;y.state=X,fc(a,c,y,p),dc(),Y=a.memoizedState,x||X!==Y||Ss?(typeof se=="function"&&($g(a,l,se,c),Y=a.memoizedState),(z=Ss||v1(a,l,z,c,X,Y,T))?(ee||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=Y),y.props=c,y.state=Y,y.context=T,c=z):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{y=a.stateNode,Sg(r,a),T=a.memoizedProps,ee=Wa(l,T),y.props=ee,se=a.pendingProps,X=y.context,Y=l.contextType,z=nl,typeof Y=="object"&&Y!==null&&(z=cn(Y)),x=l.getDerivedStateFromProps,(Y=typeof x=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==se||X!==z)&&_1(a,y,c,z),Ss=!1,X=a.memoizedState,y.state=X,fc(a,c,y,p),dc();var Z=a.memoizedState;T!==se||X!==Z||Ss||r!==null&&r.dependencies!==null&&zd(r.dependencies)?(typeof x=="function"&&($g(a,l,x,c),Z=a.memoizedState),(ee=Ss||v1(a,l,ee,c,X,Z,z)||r!==null&&r.dependencies!==null&&zd(r.dependencies))?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,Z,z),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,Z,z)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=Z),y.props=c,y.state=Z,y.context=z,c=ee):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(a.flags|=1024),c=!1)}return y=c,sf(r,a),c=(a.flags&128)!==0,y||c?(y=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&c?(a.child=Ya(a,r.child,null,p),a.child=Ya(a,null,l,p)):hn(r,a,l,p),a.memoizedState=y.state,r=a.child):r=Mr(r,a,p),r}function M1(r,a,l,c){return qa(),a.flags|=256,hn(r,a,l,c),a.child}var Zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jg(r){return{baseLanes:r,cachePool:wT()}}function ey(r,a,l){return r=r!==null?r.childLanes&~l:0,a&&(r|=Wn),r}function P1(r,a,l){var c=a.pendingProps,p=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=r!==null&&r.memoizedState===null?!1:(kt.current&2)!==0),T&&(p=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,r===null){if($e){if(p?Is(a):Rs(),(r=pt)?(r=qE(r,di),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:bs!==null?{id:rr,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},l=mT(r),l.return=a,a.child=l,un=a,pt=null)):r=null,r===null)throw Es(a);return Oy(r)?a.lanes=32:a.lanes=536870912,null}var x=c.children;return c=c.fallback,p?(Rs(),p=a.mode,x=af({mode:"hidden",children:x},p),c=Fa(c,p,l,null),x.return=a,c.return=a,x.sibling=c,a.child=x,c=a.child,c.memoizedState=Jg(l),c.childLanes=ey(r,T,l),a.memoizedState=Zg,vc(null,c)):(Is(a),ty(a,x))}var z=r.memoizedState;if(z!==null&&(x=z.dehydrated,x!==null)){if(y)a.flags&256?(Is(a),a.flags&=-257,a=ny(r,a,l)):a.memoizedState!==null?(Rs(),a.child=r.child,a.flags|=128,a=null):(Rs(),x=c.fallback,p=a.mode,c=af({mode:"visible",children:c.children},p),x=Fa(x,p,l,null),x.flags|=2,c.return=a,x.return=a,c.sibling=x,a.child=c,Ya(a,r.child,null,l),c=a.child,c.memoizedState=Jg(l),c.childLanes=ey(r,T,l),a.memoizedState=Zg,a=vc(null,c));else if(Is(a),Oy(x)){if(T=x.nextSibling&&x.nextSibling.dataset,T)var Y=T.dgst;T=Y,c=Error(i(419)),c.stack="",c.digest=T,ac({value:c,source:null,stack:null}),a=ny(r,a,l)}else if(Gt||al(r,a,l,!1),T=(l&r.childLanes)!==0,Gt||T){if(T=ht,T!==null&&(c=zu(T,l),c!==0&&c!==z.retryLane))throw z.retryLane=c,Ba(r,c),jn(T,r,c),Xg;Py(x)||pf(),a=ny(r,a,l)}else Py(x)?(a.flags|=192,a.child=r.child,a=null):(r=z.treeContext,pt=mi(x.nextSibling),un=a,$e=!0,Ts=null,di=!1,r!==null&&yT(a,r),a=ty(a,c.children),a.flags|=4096);return a}return p?(Rs(),x=c.fallback,p=a.mode,z=r.child,Y=z.sibling,c=Rr(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,Y!==null?x=Rr(Y,x):(x=Fa(x,p,l,null),x.flags|=2),x.return=a,c.return=a,c.sibling=x,a.child=c,vc(null,c),c=a.child,x=r.child.memoizedState,x===null?x=Jg(l):(p=x.cachePool,p!==null?(z=qt._currentValue,p=p.parent!==z?{parent:z,pool:z}:p):p=wT(),x={baseLanes:x.baseLanes|l,cachePool:p}),c.memoizedState=x,c.childLanes=ey(r,T,l),a.memoizedState=Zg,vc(r.child,c)):(Is(a),l=r.child,r=l.sibling,l=Rr(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,r!==null&&(T=a.deletions,T===null?(a.deletions=[r],a.flags|=16):T.push(r)),a.child=l,a.memoizedState=null,l)}function ty(r,a){return a=af({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function af(r,a){return r=$n(22,r,null,a),r.lanes=0,r}function ny(r,a,l){return Ya(a,r.child,null,l),r=ty(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function O1(r,a,l){r.lanes|=a;var c=r.alternate;c!==null&&(c.lanes|=a),yg(r.return,a,l)}function iy(r,a,l,c,p,y){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=l,T.tailMode=p,T.treeForkCount=y)}function L1(r,a,l){var c=a.pendingProps,p=c.revealOrder,y=c.tail;c=c.children;var T=kt.current,x=(T&2)!==0;if(x?(T=T&1|2,a.flags|=128):T&=1,pe(kt,T),hn(r,a,c,l),c=$e?sc:0,!x&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&O1(r,l,a);else if(r.tag===19)O1(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)r=l.alternate,r!==null&&$d(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),iy(a,!1,p,l,y,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(r=p.alternate,r!==null&&$d(r)===null){a.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}iy(a,!0,l,null,y,c);break;case"together":iy(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function Mr(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),Ns|=a.lanes,(l&a.childLanes)===0)if(r!==null){if(al(r,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,l=Rr(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=Rr(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function ry(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&zd(r)))}function rk(r,a,l){switch(a.tag){case 3:Xt(a,a.stateNode.containerInfo),ws(a,qt,r.memoizedState.cache),qa();break;case 27:case 5:wa(a);break;case 4:Xt(a,a.stateNode.containerInfo);break;case 10:ws(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Cg(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Is(a),a.flags|=128,null):(l&a.child.childLanes)!==0?P1(r,a,l):(Is(a),r=Mr(r,a,l),r!==null?r.sibling:null);Is(a);break;case 19:var p=(r.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(al(r,a,l,!1),c=(l&a.childLanes)!==0),p){if(c)return L1(r,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),pe(kt,kt.current),c)break;return null;case 22:return a.lanes=0,C1(r,a,l,a.pendingProps);case 24:ws(a,qt,r.memoizedState.cache)}return Mr(r,a,l)}function j1(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps)Gt=!0;else{if(!ry(r,l)&&(a.flags&128)===0)return Gt=!1,rk(r,a,l);Gt=(r.flags&131072)!==0}else Gt=!1,$e&&(a.flags&1048576)!==0&&gT(a,sc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(r=$a(a.elementType),a.type=r,typeof r=="function")ug(r)?(c=Wa(r,c),a.tag=1,a=V1(null,a,r,c,l)):(a.tag=0,a=Wg(null,a,r,c,l));else{if(r!=null){var p=r.$$typeof;if(p===J){a.tag=11,a=A1(null,a,r,c,l);break e}else if(p===C){a.tag=14,a=I1(null,a,r,c,l);break e}}throw a=Ee(r)||r,Error(i(306,a,""))}}return a;case 0:return Wg(r,a,a.type,a.pendingProps,l);case 1:return c=a.type,p=Wa(c,a.pendingProps),V1(r,a,c,p,l);case 3:e:{if(Xt(a,a.stateNode.containerInfo),r===null)throw Error(i(387));c=a.pendingProps;var y=a.memoizedState;p=y.element,Sg(r,a),fc(a,c,null,l);var T=a.memoizedState;if(c=T.cache,ws(a,qt,c),c!==y.cache&&vg(a,[qt],l,!0),dc(),c=T.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=M1(r,a,c,l);break e}else if(c!==p){p=ui(Error(i(424)),a),ac(p),a=M1(r,a,c,l);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(pt=mi(r.firstChild),un=a,$e=!0,Ts=null,di=!0,l=CT(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(qa(),c===p){a=Mr(r,a,l);break e}hn(r,a,c,l)}a=a.child}return a;case 26:return sf(r,a),r===null?(l=YE(a.type,null,a.pendingProps,null))?a.memoizedState=l:$e||(l=a.type,r=a.pendingProps,c=Ef(Le.current).createElement(l),c[Ut]=a,c[nn]=r,dn(c,l,r),Bt(c),a.stateNode=c):a.memoizedState=YE(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return wa(a),r===null&&$e&&(c=a.stateNode=KE(a.type,a.pendingProps,Le.current),un=a,di=!0,p=pt,Os(a.type)?(Ly=p,pt=mi(c.firstChild)):pt=p),hn(r,a,a.pendingProps.children,l),sf(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&$e&&((p=c=pt)&&(c=Mk(c,a.type,a.pendingProps,di),c!==null?(a.stateNode=c,un=a,pt=mi(c.firstChild),di=!1,p=!0):p=!1),p||Es(a)),wa(a),p=a.type,y=a.pendingProps,T=r!==null?r.memoizedProps:null,c=y.children,ky(p,y)?c=null:T!==null&&ky(p,T)&&(a.flags|=32),a.memoizedState!==null&&(p=Ng(r,a,YN,null,null,l),Vc._currentValue=p),sf(r,a),hn(r,a,c,l),a.child;case 6:return r===null&&$e&&((r=l=pt)&&(l=Pk(l,a.pendingProps,di),l!==null?(a.stateNode=l,un=a,pt=null,r=!0):r=!1),r||Es(a)),null;case 13:return P1(r,a,l);case 4:return Xt(a,a.stateNode.containerInfo),c=a.pendingProps,r===null?a.child=Ya(a,null,c,l):hn(r,a,c,l),a.child;case 11:return A1(r,a,a.type,a.pendingProps,l);case 7:return hn(r,a,a.pendingProps,l),a.child;case 8:return hn(r,a,a.pendingProps.children,l),a.child;case 12:return hn(r,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,ws(a,a.type,c.value),hn(r,a,c.children,l),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,Ga(a),p=cn(p),c=c(p),a.flags|=1,hn(r,a,c,l),a.child;case 14:return I1(r,a,a.type,a.pendingProps,l);case 15:return R1(r,a,a.type,a.pendingProps,l);case 19:return L1(r,a,l);case 31:return ik(r,a,l);case 22:return C1(r,a,l,a.pendingProps);case 24:return Ga(a),c=cn(qt),r===null?(p=Tg(),p===null&&(p=ht,y=_g(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),a.memoizedState={parent:c,cache:p},wg(a),ws(a,qt,p)):((r.lanes&l)!==0&&(Sg(r,a),fc(a,null,null,l),dc()),p=r.memoizedState,y=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),ws(a,qt,c)):(c=y.cache,ws(a,qt,c),c!==p.cache&&vg(a,[qt],l,!0))),hn(r,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Pr(r){r.flags|=4}function sy(r,a,l,c,p){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(hE())r.flags|=8192;else throw Qa=qd,Eg}else r.flags&=-16777217}function z1(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!ew(a))if(hE())r.flags|=8192;else throw Qa=qd,Eg}function of(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?dd():536870912,r.lanes|=a,vl|=a)}function _c(r,a){if(!$e)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function gt(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(a)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=c,r.childLanes=l,a}function sk(r,a,l){var c=a.pendingProps;switch(fg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(a),null;case 1:return gt(a),null;case 3:return l=a.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Nr(qt),yt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(sl(a)?Pr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,pg())),gt(a),null;case 26:var p=a.type,y=a.memoizedState;return r===null?(Pr(a),y!==null?(gt(a),z1(a,y)):(gt(a),sy(a,p,null,c,l))):y?y!==r.memoizedState?(Pr(a),gt(a),z1(a,y)):(gt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==c&&Pr(a),gt(a),sy(a,p,r,c,l)),null;case 27:if(Lo(a),l=Le.current,p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==c&&Pr(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return gt(a),null}r=ge.current,sl(a)?vT(a):(r=KE(p,c,l),a.stateNode=r,Pr(a))}return gt(a),null;case 5:if(Lo(a),p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==c&&Pr(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return gt(a),null}if(y=ge.current,sl(a))vT(a);else{var T=Ef(Le.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?T.createElement(p,{is:c.is}):T.createElement(p)}}y[Ut]=a,y[nn]=c;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;e:switch(dn(y,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Pr(a)}}return gt(a),sy(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,l),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==c&&Pr(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(i(166));if(r=Le.current,sl(a)){if(r=a.stateNode,l=a.memoizedProps,c=null,p=un,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}r[Ut]=a,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||PE(r.nodeValue,l)),r||Es(a,!0)}else r=Ef(r).createTextNode(c),r[Ut]=a,a.stateNode=r}return gt(a),null;case 31:if(l=a.memoizedState,r===null||r.memoizedState!==null){if(c=sl(a),l!==null){if(r===null){if(!c)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Ut]=a}else qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gt(a),r=!1}else l=pg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return a.flags&256?(Yn(a),a):(Yn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return gt(a),null;case 13:if(c=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=sl(a),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Ut]=a}else qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gt(a),p=!1}else p=pg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Yn(a),a):(Yn(a),null)}return Yn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,r=r!==null&&r.memoizedState!==null,l&&(c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)),l!==r&&l&&(a.child.flags|=8192),of(a,a.updateQueue),gt(a),null);case 4:return yt(),r===null&&Iy(a.stateNode.containerInfo),gt(a),null;case 10:return Nr(a.type),gt(a),null;case 19:if(oe(kt),c=a.memoizedState,c===null)return gt(a),null;if(p=(a.flags&128)!==0,y=c.rendering,y===null)if(p)_c(c,!1);else{if(At!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=$d(r),y!==null){for(a.flags|=128,_c(c,!1),r=y.updateQueue,a.updateQueue=r,of(a,r),a.subtreeFlags=0,r=l,l=a.child;l!==null;)fT(l,r),l=l.sibling;return pe(kt,kt.current&1|2),$e&&Cr(a,c.treeForkCount),a.child}r=r.sibling}c.tail!==null&&An()>df&&(a.flags|=128,p=!0,_c(c,!1),a.lanes=4194304)}else{if(!p)if(r=$d(y),r!==null){if(a.flags|=128,p=!0,r=r.updateQueue,a.updateQueue=r,of(a,r),_c(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!$e)return gt(a),null}else 2*An()-c.renderingStartTime>df&&l!==536870912&&(a.flags|=128,p=!0,_c(c,!1),a.lanes=4194304);c.isBackwards?(y.sibling=a.child,a.child=y):(r=c.last,r!==null?r.sibling=y:a.child=y,c.last=y)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=An(),r.sibling=null,l=kt.current,pe(kt,p?l&1|2:l&1),$e&&Cr(a,c.treeForkCount),r):(gt(a),null);case 22:case 23:return Yn(a),Rg(),c=a.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(gt(a),a.subtreeFlags&6&&(a.flags|=8192)):gt(a),l=a.updateQueue,l!==null&&of(a,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),r!==null&&oe(Ka),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Nr(qt),gt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function ak(r,a){switch(fg(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Nr(qt),yt(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Lo(a),null;case 31:if(a.memoizedState!==null){if(Yn(a),a.alternate===null)throw Error(i(340));qa()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Yn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));qa()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return oe(kt),null;case 4:return yt(),null;case 10:return Nr(a.type),null;case 22:case 23:return Yn(a),Rg(),r!==null&&oe(Ka),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Nr(qt),null;case 25:return null;default:return null}}function U1(r,a){switch(fg(a),a.tag){case 3:Nr(qt),yt();break;case 26:case 27:case 5:Lo(a);break;case 4:yt();break;case 31:a.memoizedState!==null&&Yn(a);break;case 13:Yn(a);break;case 19:oe(kt);break;case 10:Nr(a.type);break;case 22:case 23:Yn(a),Rg(),r!==null&&oe(Ka);break;case 24:Nr(qt)}}function bc(r,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&r)===r){c=void 0;var y=l.create,T=l.inst;c=y(),T.destroy=c}l=l.next}while(l!==p)}}catch(x){rt(a,a.return,x)}}function Cs(r,a,l){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&r)===r){var T=c.inst,x=T.destroy;if(x!==void 0){T.destroy=void 0,p=a;var z=l,Y=x;try{Y()}catch(ee){rt(p,z,ee)}}}c=c.next}while(c!==y)}}catch(ee){rt(a,a.return,ee)}}function B1(r){var a=r.updateQueue;if(a!==null){var l=r.stateNode;try{NT(a,l)}catch(c){rt(r,r.return,c)}}}function F1(r,a,l){l.props=Wa(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){rt(r,a,c)}}function Tc(r,a){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof l=="function"?r.refCleanup=l(c):l.current=c}}catch(p){rt(r,a,p)}}function ar(r,a){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){rt(r,a,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){rt(r,a,p)}else l.current=null}function q1(r){var a=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){rt(r,r.return,p)}}function ay(r,a,l){try{var c=r.stateNode;Rk(c,r.type,l,a),c[nn]=a}catch(p){rt(r,r.return,p)}}function H1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Os(r.type)||r.tag===4}function oy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||H1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Os(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ly(r,a,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(r),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Ii));else if(c!==4&&(c===27&&Os(r.type)&&(l=r.stateNode,a=null),r=r.child,r!==null))for(ly(r,a,l),r=r.sibling;r!==null;)ly(r,a,l),r=r.sibling}function lf(r,a,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(c!==4&&(c===27&&Os(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(lf(r,a,l),r=r.sibling;r!==null;)lf(r,a,l),r=r.sibling}function G1(r){var a=r.stateNode,l=r.memoizedProps;try{for(var c=r.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);dn(a,c,l),a[Ut]=r,a[nn]=l}catch(y){rt(r,r.return,y)}}var Or=!1,Kt=!1,uy=!1,K1=typeof WeakSet=="function"?WeakSet:Set,sn=null;function ok(r,a){if(r=r.containerInfo,Dy=Cf,r=rT(r),ng(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,x=-1,z=-1,Y=0,ee=0,se=r,X=null;t:for(;;){for(var Z;se!==l||p!==0&&se.nodeType!==3||(x=T+p),se!==y||c!==0&&se.nodeType!==3||(z=T+c),se.nodeType===3&&(T+=se.nodeValue.length),(Z=se.firstChild)!==null;)X=se,se=Z;for(;;){if(se===r)break t;if(X===l&&++Y===p&&(x=T),X===y&&++ee===c&&(z=T),(Z=se.nextSibling)!==null)break;se=X,X=se.parentNode}se=Z}l=x===-1||z===-1?null:{start:x,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ny={focusedElem:r,selectionRange:l},Cf=!1,sn=a;sn!==null;)if(a=sn,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,sn=r;else for(;sn!==null;){switch(a=sn,y=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)p=r[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,l=a,p=y.memoizedProps,y=y.memoizedState,c=l.stateNode;try{var ve=Wa(l.type,p);r=c.getSnapshotBeforeUpdate(ve,y),c.__reactInternalSnapshotBeforeUpdate=r}catch(Ae){rt(l,l.return,Ae)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,l=r.nodeType,l===9)My(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":My(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,sn=r;break}sn=a.return}}function $1(r,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:jr(r,l),c&4&&bc(5,l);break;case 1:if(jr(r,l),c&4)if(r=l.stateNode,a===null)try{r.componentDidMount()}catch(T){rt(l,l.return,T)}else{var p=Wa(l.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(p,a,r.__reactInternalSnapshotBeforeUpdate)}catch(T){rt(l,l.return,T)}}c&64&&B1(l),c&512&&Tc(l,l.return);break;case 3:if(jr(r,l),c&64&&(r=l.updateQueue,r!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{NT(r,a)}catch(T){rt(l,l.return,T)}}break;case 27:a===null&&c&4&&G1(l);case 26:case 5:jr(r,l),a===null&&c&4&&q1(l),c&512&&Tc(l,l.return);break;case 12:jr(r,l);break;case 31:jr(r,l),c&4&&X1(r,l);break;case 13:jr(r,l),c&4&&W1(r,l),c&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=gk.bind(null,l),Ok(r,l))));break;case 22:if(c=l.memoizedState!==null||Or,!c){a=a!==null&&a.memoizedState!==null||Kt,p=Or;var y=Kt;Or=c,(Kt=a)&&!y?zr(r,l,(l.subtreeFlags&8772)!==0):jr(r,l),Or=p,Kt=y}break;case 30:break;default:jr(r,l)}}function Q1(r){var a=r.alternate;a!==null&&(r.alternate=null,Q1(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Fo(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var _t=null,Mn=!1;function Lr(r,a,l){for(l=l.child;l!==null;)Y1(r,a,l),l=l.sibling}function Y1(r,a,l){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(wi,l)}catch{}switch(l.tag){case 26:Kt||ar(l,a),Lr(r,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Kt||ar(l,a);var c=_t,p=Mn;Os(l.type)&&(_t=l.stateNode,Mn=!1),Lr(r,a,l),Dc(l.stateNode),_t=c,Mn=p;break;case 5:Kt||ar(l,a);case 6:if(c=_t,p=Mn,_t=null,Lr(r,a,l),_t=c,Mn=p,_t!==null)if(Mn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(l.stateNode)}catch(y){rt(l,a,y)}else try{_t.removeChild(l.stateNode)}catch(y){rt(l,a,y)}break;case 18:_t!==null&&(Mn?(r=_t,BE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Al(r)):BE(_t,l.stateNode));break;case 4:c=_t,p=Mn,_t=l.stateNode.containerInfo,Mn=!0,Lr(r,a,l),_t=c,Mn=p;break;case 0:case 11:case 14:case 15:Cs(2,l,a),Kt||Cs(4,l,a),Lr(r,a,l);break;case 1:Kt||(ar(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&F1(l,a,c)),Lr(r,a,l);break;case 21:Lr(r,a,l);break;case 22:Kt=(c=Kt)||l.memoizedState!==null,Lr(r,a,l),Kt=c;break;default:Lr(r,a,l)}}function X1(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Al(r)}catch(l){rt(a,a.return,l)}}}function W1(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Al(r)}catch(l){rt(a,a.return,l)}}function lk(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new K1),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new K1),a;default:throw Error(i(435,r.tag))}}function uf(r,a){var l=lk(r);a.forEach(function(c){if(!l.has(c)){l.add(c);var p=yk.bind(null,r,c);c.then(p,p)}})}function Pn(r,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],y=r,T=a,x=T;e:for(;x!==null;){switch(x.tag){case 27:if(Os(x.type)){_t=x.stateNode,Mn=!1;break e}break;case 5:_t=x.stateNode,Mn=!1;break e;case 3:case 4:_t=x.stateNode.containerInfo,Mn=!0;break e}x=x.return}if(_t===null)throw Error(i(160));Y1(y,T,p),_t=null,Mn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Z1(a,r),a=a.sibling}var Vi=null;function Z1(r,a){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Pn(a,r),On(r),c&4&&(Cs(3,r,r.return),bc(3,r),Cs(5,r,r.return));break;case 1:Pn(a,r),On(r),c&512&&(Kt||l===null||ar(l,l.return)),c&64&&Or&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=Vi;if(Pn(a,r),On(r),c&512&&(Kt||l===null||ar(l,l.return)),c&4){var y=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Ki]||y[Ut]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),dn(y,c,l),y[Ut]=r,Bt(y),c=y;break e;case"link":var T=ZE("link","href",p).get(c+(l.href||""));if(T){for(var x=0;x<T.length;x++)if(y=T[x],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(x,1);break t}}y=p.createElement(c),dn(y,c,l),p.head.appendChild(y);break;case"meta":if(T=ZE("meta","content",p).get(c+(l.content||""))){for(x=0;x<T.length;x++)if(y=T[x],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(x,1);break t}}y=p.createElement(c),dn(y,c,l),p.head.appendChild(y);break;default:throw Error(i(468,c))}y[Ut]=r,Bt(y),c=y}r.stateNode=c}else JE(p,r.type,r.stateNode);else r.stateNode=WE(p,c,r.memoizedProps);else y!==c?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,c===null?JE(p,r.type,r.stateNode):WE(p,c,r.memoizedProps)):c===null&&r.stateNode!==null&&ay(r,r.memoizedProps,l.memoizedProps)}break;case 27:Pn(a,r),On(r),c&512&&(Kt||l===null||ar(l,l.return)),l!==null&&c&4&&ay(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Pn(a,r),On(r),c&512&&(Kt||l===null||ar(l,l.return)),r.flags&32){p=r.stateNode;try{Vn(p,"")}catch(ve){rt(r,r.return,ve)}}c&4&&r.stateNode!=null&&(p=r.memoizedProps,ay(r,p,l!==null?l.memoizedProps:p)),c&1024&&(uy=!0);break;case 6:if(Pn(a,r),On(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(ve){rt(r,r.return,ve)}}break;case 3:if(xf=null,p=Vi,Vi=wf(a.containerInfo),Pn(a,r),Vi=p,On(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Al(a.containerInfo)}catch(ve){rt(r,r.return,ve)}uy&&(uy=!1,J1(r));break;case 4:c=Vi,Vi=wf(r.stateNode.containerInfo),Pn(a,r),On(r),Vi=c;break;case 12:Pn(a,r),On(r);break;case 31:Pn(a,r),On(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,uf(r,c)));break;case 13:Pn(a,r),On(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(hf=An()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,uf(r,c)));break;case 22:p=r.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,Y=Or,ee=Kt;if(Or=Y||p,Kt=ee||z,Pn(a,r),Kt=ee,Or=Y,On(r),c&8192)e:for(a=r.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||z||Or||Kt||Za(r)),l=null,a=r;;){if(a.tag===5||a.tag===26){if(l===null){z=l=a;try{if(y=z.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{x=z.stateNode;var se=z.memoizedProps.style,X=se!=null&&se.hasOwnProperty("display")?se.display:null;x.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ve){rt(z,z.return,ve)}}}else if(a.tag===6){if(l===null){z=a;try{z.stateNode.nodeValue=p?"":z.memoizedProps}catch(ve){rt(z,z.return,ve)}}}else if(a.tag===18){if(l===null){z=a;try{var Z=z.stateNode;p?FE(Z,!0):FE(z.stateNode,!1)}catch(ve){rt(z,z.return,ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,uf(r,l))));break;case 19:Pn(a,r),On(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,uf(r,c)));break;case 30:break;case 21:break;default:Pn(a,r),On(r)}}function On(r){var a=r.flags;if(a&2){try{for(var l,c=r.return;c!==null;){if(H1(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var p=l.stateNode,y=oy(r);lf(r,y,p);break;case 5:var T=l.stateNode;l.flags&32&&(Vn(T,""),l.flags&=-33);var x=oy(r);lf(r,x,T);break;case 3:case 4:var z=l.stateNode.containerInfo,Y=oy(r);ly(r,Y,z);break;default:throw Error(i(161))}}catch(ee){rt(r,r.return,ee)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function J1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;J1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function jr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)$1(r,a.alternate,a),a=a.sibling}function Za(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Cs(4,a,a.return),Za(a);break;case 1:ar(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&F1(a,a.return,l),Za(a);break;case 27:Dc(a.stateNode);case 26:case 5:ar(a,a.return),Za(a);break;case 22:a.memoizedState===null&&Za(a);break;case 30:Za(a);break;default:Za(a)}r=r.sibling}}function zr(r,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=r,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:zr(p,y,l),bc(4,y);break;case 1:if(zr(p,y,l),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Y){rt(c,c.return,Y)}if(c=y,p=c.updateQueue,p!==null){var x=c.stateNode;try{var z=p.shared.hiddenCallbacks;if(z!==null)for(p.shared.hiddenCallbacks=null,p=0;p<z.length;p++)DT(z[p],x)}catch(Y){rt(c,c.return,Y)}}l&&T&64&&B1(y),Tc(y,y.return);break;case 27:G1(y);case 26:case 5:zr(p,y,l),l&&c===null&&T&4&&q1(y),Tc(y,y.return);break;case 12:zr(p,y,l);break;case 31:zr(p,y,l),l&&T&4&&X1(p,y);break;case 13:zr(p,y,l),l&&T&4&&W1(p,y);break;case 22:y.memoizedState===null&&zr(p,y,l),Tc(y,y.return);break;case 30:break;default:zr(p,y,l)}a=a.sibling}}function cy(r,a){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&oc(l))}function hy(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&oc(r))}function Mi(r,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)eE(r,a,l,c),a=a.sibling}function eE(r,a,l,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(r,a,l,c),p&2048&&bc(9,a);break;case 1:Mi(r,a,l,c);break;case 3:Mi(r,a,l,c),p&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&oc(r)));break;case 12:if(p&2048){Mi(r,a,l,c),r=a.stateNode;try{var y=a.memoizedProps,T=y.id,x=y.onPostCommit;typeof x=="function"&&x(T,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(z){rt(a,a.return,z)}}else Mi(r,a,l,c);break;case 31:Mi(r,a,l,c);break;case 13:Mi(r,a,l,c);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?Mi(r,a,l,c):Ec(r,a):y._visibility&2?Mi(r,a,l,c):(y._visibility|=2,pl(r,a,l,c,(a.subtreeFlags&10256)!==0||!1)),p&2048&&cy(T,a);break;case 24:Mi(r,a,l,c),p&2048&&hy(a.alternate,a);break;default:Mi(r,a,l,c)}}function pl(r,a,l,c,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=r,T=a,x=l,z=c,Y=T.flags;switch(T.tag){case 0:case 11:case 15:pl(y,T,x,z,p),bc(8,T);break;case 23:break;case 22:var ee=T.stateNode;T.memoizedState!==null?ee._visibility&2?pl(y,T,x,z,p):Ec(y,T):(ee._visibility|=2,pl(y,T,x,z,p)),p&&Y&2048&&cy(T.alternate,T);break;case 24:pl(y,T,x,z,p),p&&Y&2048&&hy(T.alternate,T);break;default:pl(y,T,x,z,p)}a=a.sibling}}function Ec(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=r,c=a,p=c.flags;switch(c.tag){case 22:Ec(l,c),p&2048&&cy(c.alternate,c);break;case 24:Ec(l,c),p&2048&&hy(c.alternate,c);break;default:Ec(l,c)}a=a.sibling}}var wc=8192;function gl(r,a,l){if(r.subtreeFlags&wc)for(r=r.child;r!==null;)tE(r,a,l),r=r.sibling}function tE(r,a,l){switch(r.tag){case 26:gl(r,a,l),r.flags&wc&&r.memoizedState!==null&&Qk(l,Vi,r.memoizedState,r.memoizedProps);break;case 5:gl(r,a,l);break;case 3:case 4:var c=Vi;Vi=wf(r.stateNode.containerInfo),gl(r,a,l),Vi=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=wc,wc=16777216,gl(r,a,l),wc=c):gl(r,a,l));break;default:gl(r,a,l)}}function nE(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Sc(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];sn=c,rE(c,r)}nE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)iE(r),r=r.sibling}function iE(r){switch(r.tag){case 0:case 11:case 15:Sc(r),r.flags&2048&&Cs(9,r,r.return);break;case 3:Sc(r);break;case 12:Sc(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,cf(r)):Sc(r);break;default:Sc(r)}}function cf(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];sn=c,rE(c,r)}nE(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Cs(8,a,a.return),cf(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,cf(a));break;default:cf(a)}r=r.sibling}}function rE(r,a){for(;sn!==null;){var l=sn;switch(l.tag){case 0:case 11:case 15:Cs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:oc(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,sn=c;else e:for(l=r;sn!==null;){c=sn;var p=c.sibling,y=c.return;if(Q1(c),c===l){sn=null;break e}if(p!==null){p.return=y,sn=p;break e}sn=y}}}var uk={getCacheForType:function(r){var a=cn(qt),l=a.data.get(r);return l===void 0&&(l=r(),a.data.set(r,l)),l},cacheSignal:function(){return cn(qt).controller.signal}},ck=typeof WeakMap=="function"?WeakMap:Map,et=0,ht=null,Ue=null,qe=0,it=0,Xn=null,Ds=!1,yl=!1,dy=!1,Ur=0,At=0,Ns=0,Ja=0,fy=0,Wn=0,vl=0,xc=null,Ln=null,my=!1,hf=0,sE=0,df=1/0,ff=null,ks=null,Zt=0,Vs=null,_l=null,Br=0,py=0,gy=null,aE=null,Ac=0,yy=null;function Zn(){return(et&2)!==0&&qe!==0?qe&-qe:H.T!==null?wy():fd()}function oE(){if(Wn===0)if((qe&536870912)===0||$e){var r=Aa;Aa<<=1,(Aa&3932160)===0&&(Aa=262144),Wn=r}else Wn=536870912;return r=Qn.current,r!==null&&(r.flags|=32),Wn}function jn(r,a,l){(r===ht&&(it===2||it===9)||r.cancelPendingCommit!==null)&&(bl(r,0),Ms(r,qe,Wn,!1)),Ia(r,l),((et&2)===0||r!==ht)&&(r===ht&&((et&2)===0&&(Ja|=l),At===4&&Ms(r,qe,Wn,!1)),or(r))}function lE(r,a,l){if((et&6)!==0)throw Error(i(327));var c=!l&&(a&127)===0&&(a&r.expiredLanes)===0||Si(r,a),p=c?fk(r,a):_y(r,a,!0),y=c;do{if(p===0){yl&&!c&&Ms(r,a,0,!1);break}else{if(l=r.current.alternate,y&&!hk(l)){p=_y(r,a,!1),y=!1;continue}if(p===2){if(y=a,r.errorRecoveryDisabledLanes&y)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var x=r;p=xc;var z=x.current.memoizedState.isDehydrated;if(z&&(bl(x,T).flags|=256),T=_y(x,T,!1),T!==2){if(dy&&!z){x.errorRecoveryDisabledLanes|=y,Ja|=y,p=4;break e}y=Ln,Ln=p,y!==null&&(Ln===null?Ln=y:Ln.push.apply(Ln,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){bl(r,0),Ms(r,a,0,!0);break}e:{switch(c=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ms(c,a,Wn,!Ds);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=hf+300-An(),10<p)){if(Ms(c,a,Wn,!Ds),qi(c,0,!0)!==0)break e;Br=a,c.timeoutHandle=zE(uE.bind(null,c,l,Ln,ff,my,a,Wn,Ja,vl,Ds,y,"Throttled",-0,0),p);break e}uE(c,l,Ln,ff,my,a,Wn,Ja,vl,Ds,y,null,-0,0)}}break}while(!0);or(r)}function uE(r,a,l,c,p,y,T,x,z,Y,ee,se,X,Z){if(r.timeoutHandle=-1,se=a.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ii},tE(a,y,se);var ve=(y&62914560)===y?hf-An():(y&4194048)===y?sE-An():0;if(ve=Yk(se,ve),ve!==null){Br=y,r.cancelPendingCommit=ve(yE.bind(null,r,a,y,l,c,p,T,x,z,ee,se,null,X,Z)),Ms(r,y,T,!Y);return}}yE(r,a,y,l,c,p,T,x,z)}function hk(r){for(var a=r;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],y=p.getSnapshot;p=p.value;try{if(!Kn(y(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ms(r,a,l,c){a&=~fy,a&=~Ja,r.suspendedLanes|=a,r.pingedLanes&=~a,c&&(r.warmLanes|=a),c=r.expirationTimes;for(var p=a;0<p;){var y=31-Dt(p),T=1<<y;c[y]=-1,p&=~T}l!==0&&Ra(r,l,a)}function mf(){return(et&6)===0?(Ic(0),!1):!0}function vy(){if(Ue!==null){if(it===0)var r=Ue.return;else r=Ue,Dr=Ha=null,Mg(r),cl=null,uc=0,r=Ue;for(;r!==null;)U1(r.alternate,r),r=r.return;Ue=null}}function bl(r,a){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,Nk(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Br=0,vy(),ht=r,Ue=l=Rr(r.current,null),qe=a,it=0,Xn=null,Ds=!1,yl=Si(r,a),dy=!1,vl=Wn=fy=Ja=Ns=At=0,Ln=xc=null,my=!1,(a&8)!==0&&(a|=a&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=a;0<c;){var p=31-Dt(c),y=1<<p;a|=r[p],c&=~y}return Ur=a,Md(),l}function cE(r,a){Oe=null,H.H=yc,a===ul||a===Fd?(a=AT(),it=3):a===Eg?(a=AT(),it=4):it=a===Xg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Xn=a,Ue===null&&(At=1,nf(r,ui(a,r.current)))}function hE(){var r=Qn.current;return r===null?!0:(qe&4194048)===qe?fi===null:(qe&62914560)===qe||(qe&536870912)!==0?r===fi:!1}function dE(){var r=H.H;return H.H=yc,r===null?yc:r}function fE(){var r=H.A;return H.A=uk,r}function pf(){At=4,Ds||(qe&4194048)!==qe&&Qn.current!==null||(yl=!0),(Ns&134217727)===0&&(Ja&134217727)===0||ht===null||Ms(ht,qe,Wn,!1)}function _y(r,a,l){var c=et;et|=2;var p=dE(),y=fE();(ht!==r||qe!==a)&&(ff=null,bl(r,a)),a=!1;var T=At;e:do try{if(it!==0&&Ue!==null){var x=Ue,z=Xn;switch(it){case 8:vy(),T=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(a=!0);var Y=it;if(it=0,Xn=null,Tl(r,x,z,Y),l&&yl){T=0;break e}break;default:Y=it,it=0,Xn=null,Tl(r,x,z,Y)}}dk(),T=At;break}catch(ee){cE(r,ee)}while(!0);return a&&r.shellSuspendCounter++,Dr=Ha=null,et=c,H.H=p,H.A=y,Ue===null&&(ht=null,qe=0,Md()),T}function dk(){for(;Ue!==null;)mE(Ue)}function fk(r,a){var l=et;et|=2;var c=dE(),p=fE();ht!==r||qe!==a?(ff=null,df=An()+500,bl(r,a)):yl=Si(r,a);e:do try{if(it!==0&&Ue!==null){a=Ue;var y=Xn;t:switch(it){case 1:it=0,Xn=null,Tl(r,a,y,1);break;case 2:case 9:if(ST(y)){it=0,Xn=null,pE(a);break}a=function(){it!==2&&it!==9||ht!==r||(it=7),or(r)},y.then(a,a);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:ST(y)?(it=0,Xn=null,pE(a)):(it=0,Xn=null,Tl(r,a,y,7));break;case 5:var T=null;switch(Ue.tag){case 26:T=Ue.memoizedState;case 5:case 27:var x=Ue;if(T?ew(T):x.stateNode.complete){it=0,Xn=null;var z=x.sibling;if(z!==null)Ue=z;else{var Y=x.return;Y!==null?(Ue=Y,gf(Y)):Ue=null}break t}}it=0,Xn=null,Tl(r,a,y,5);break;case 6:it=0,Xn=null,Tl(r,a,y,6);break;case 8:vy(),At=6;break e;default:throw Error(i(462))}}mk();break}catch(ee){cE(r,ee)}while(!0);return Dr=Ha=null,H.H=c,H.A=p,et=l,Ue!==null?0:(ht=null,qe=0,Md(),At)}function mk(){for(;Ue!==null&&!Yp();)mE(Ue)}function mE(r){var a=j1(r.alternate,r,Ur);r.memoizedProps=r.pendingProps,a===null?gf(r):Ue=a}function pE(r){var a=r,l=a.alternate;switch(a.tag){case 15:case 0:a=k1(l,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=k1(l,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:Mg(a);default:U1(l,a),a=Ue=fT(a,Ur),a=j1(l,a,Ur)}r.memoizedProps=r.pendingProps,a===null?gf(r):Ue=a}function Tl(r,a,l,c){Dr=Ha=null,Mg(a),cl=null,uc=0;var p=a.return;try{if(nk(r,p,a,l,qe)){At=1,nf(r,ui(l,r.current)),Ue=null;return}}catch(y){if(p!==null)throw Ue=p,y;At=1,nf(r,ui(l,r.current)),Ue=null;return}a.flags&32768?($e||c===1?r=!0:yl||(qe&536870912)!==0?r=!1:(Ds=r=!0,(c===2||c===9||c===3||c===6)&&(c=Qn.current,c!==null&&c.tag===13&&(c.flags|=16384))),gE(a,r)):gf(a)}function gf(r){var a=r;do{if((a.flags&32768)!==0){gE(a,Ds);return}r=a.return;var l=sk(a.alternate,a,Ur);if(l!==null){Ue=l;return}if(a=a.sibling,a!==null){Ue=a;return}Ue=a=r}while(a!==null);At===0&&(At=5)}function gE(r,a){do{var l=ak(r.alternate,r);if(l!==null){l.flags&=32767,Ue=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(r=r.sibling,r!==null)){Ue=r;return}Ue=r=l}while(r!==null);At=6,Ue=null}function yE(r,a,l,c,p,y,T,x,z){r.cancelPendingCommit=null;do yf();while(Zt!==0);if((et&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=og,Zp(r,l,y,T,x,z),r===ht&&(Ue=ht=null,qe=0),_l=a,Vs=r,Br=l,py=y,gy=p,aE=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,vk(cs,function(){return EE(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,p=ae.p,ae.p=2,T=et,et|=4;try{ok(r,a,l)}finally{et=T,ae.p=p,H.T=c}}Zt=1,vE(),_E(),bE()}}function vE(){if(Zt===1){Zt=0;var r=Vs,a=_l,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var c=ae.p;ae.p=2;var p=et;et|=4;try{Z1(a,r);var y=Ny,T=rT(r.containerInfo),x=y.focusedElem,z=y.selectionRange;if(T!==x&&x&&x.ownerDocument&&iT(x.ownerDocument.documentElement,x)){if(z!==null&&ng(x)){var Y=z.start,ee=z.end;if(ee===void 0&&(ee=Y),"selectionStart"in x)x.selectionStart=Y,x.selectionEnd=Math.min(ee,x.value.length);else{var se=x.ownerDocument||document,X=se&&se.defaultView||window;if(X.getSelection){var Z=X.getSelection(),ve=x.textContent.length,Ae=Math.min(z.start,ve),ct=z.end===void 0?Ae:Math.min(z.end,ve);!Z.extend&&Ae>ct&&(T=ct,ct=Ae,Ae=T);var G=nT(x,Ae),F=nT(x,ct);if(G&&F&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==F.node||Z.focusOffset!==F.offset)){var Q=se.createRange();Q.setStart(G.node,G.offset),Z.removeAllRanges(),Ae>ct?(Z.addRange(Q),Z.extend(F.node,F.offset)):(Q.setEnd(F.node,F.offset),Z.addRange(Q))}}}}for(se=[],Z=x;Z=Z.parentNode;)Z.nodeType===1&&se.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<se.length;x++){var re=se[x];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Cf=!!Dy,Ny=Dy=null}finally{et=p,ae.p=c,H.T=l}}r.current=a,Zt=2}}function _E(){if(Zt===2){Zt=0;var r=Vs,a=_l,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var c=ae.p;ae.p=2;var p=et;et|=4;try{$1(r,a.alternate,a)}finally{et=p,ae.p=c,H.T=l}}Zt=3}}function bE(){if(Zt===4||Zt===3){Zt=0,ad();var r=Vs,a=_l,l=Br,c=aE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Zt=5:(Zt=0,_l=Vs=null,TE(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(ks=null),Sr(l),a=a.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(wi,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=H.T,p=ae.p,ae.p=2,H.T=null;try{for(var y=r.onRecoverableError,T=0;T<c.length;T++){var x=c[T];y(x.value,{componentStack:x.stack})}}finally{H.T=a,ae.p=p}}(Br&3)!==0&&yf(),or(r),p=r.pendingLanes,(l&261930)!==0&&(p&42)!==0?r===yy?Ac++:(Ac=0,yy=r):Ac=0,Ic(0)}}function TE(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,oc(a)))}function yf(){return vE(),_E(),bE(),EE()}function EE(){if(Zt!==5)return!1;var r=Vs,a=py;py=0;var l=Sr(Br),c=H.T,p=ae.p;try{ae.p=32>l?32:l,H.T=null,l=gy,gy=null;var y=Vs,T=Br;if(Zt=0,_l=Vs=null,Br=0,(et&6)!==0)throw Error(i(331));var x=et;if(et|=4,iE(y.current),eE(y,y.current,T,l),et=x,Ic(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(wi,y)}catch{}return!0}finally{ae.p=p,H.T=c,TE(r,a)}}function wE(r,a,l){a=ui(l,a),a=Yg(r.stateNode,a,2),r=As(r,a,2),r!==null&&(Ia(r,2),or(r))}function rt(r,a,l){if(r.tag===3)wE(r,r,l);else for(;a!==null;){if(a.tag===3){wE(a,r,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ks===null||!ks.has(c))){r=ui(l,r),l=S1(2),c=As(a,l,2),c!==null&&(x1(l,c,a,r),Ia(c,2),or(c));break}}a=a.return}}function by(r,a,l){var c=r.pingCache;if(c===null){c=r.pingCache=new ck;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(l)||(dy=!0,p.add(l),r=pk.bind(null,r,a,l),a.then(r,r))}function pk(r,a,l){var c=r.pingCache;c!==null&&c.delete(a),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,ht===r&&(qe&l)===l&&(At===4||At===3&&(qe&62914560)===qe&&300>An()-hf?(et&2)===0&&bl(r,0):fy|=l,vl===qe&&(vl=0)),or(r)}function SE(r,a){a===0&&(a=dd()),r=Ba(r,a),r!==null&&(Ia(r,a),or(r))}function gk(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),SE(r,l)}function yk(r,a){var l=0;switch(r.tag){case 31:case 13:var c=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(a),SE(r,l)}function vk(r,a){return Wt(r,a)}var vf=null,El=null,Ty=!1,_f=!1,Ey=!1,Ps=0;function or(r){r!==El&&r.next===null&&(El===null?vf=El=r:El=El.next=r),_f=!0,Ty||(Ty=!0,bk())}function Ic(r,a){if(!Ey&&_f){Ey=!0;do for(var l=!1,c=vf;c!==null;){if(r!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var T=c.suspendedLanes,x=c.pingedLanes;y=(1<<31-Dt(42|r)+1)-1,y&=p&~(T&~x),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,RE(c,y))}else y=qe,y=qi(c,c===ht?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Si(c,y)||(l=!0,RE(c,y));c=c.next}while(l);Ey=!1}}function _k(){xE()}function xE(){_f=Ty=!1;var r=0;Ps!==0&&Dk()&&(r=Ps);for(var a=An(),l=null,c=vf;c!==null;){var p=c.next,y=AE(c,a);y===0?(c.next=null,l===null?vf=p:l.next=p,p===null&&(El=l)):(l=c,(r!==0||(y&3)!==0)&&(_f=!0)),c=p}Zt!==0&&Zt!==5||Ic(r),Ps!==0&&(Ps=0)}function AE(r,a){for(var l=r.suspendedLanes,c=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var T=31-Dt(y),x=1<<T,z=p[T];z===-1?((x&l)===0||(x&c)!==0)&&(p[T]=Wp(x,a)):z<=a&&(r.expiredLanes|=x),y&=~x}if(a=ht,l=qe,l=qi(r,r===a?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,l===0||r===a&&(it===2||it===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&us(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Si(r,l)){if(a=l&-l,a===r.callbackPriority)return a;switch(c!==null&&us(c),Sr(l)){case 2:case 8:l=Lu;break;case 32:l=cs;break;case 268435456:l=od;break;default:l=cs}return c=IE.bind(null,r),l=Wt(l,c),r.callbackPriority=a,r.callbackNode=l,a}return c!==null&&c!==null&&us(c),r.callbackPriority=2,r.callbackNode=null,2}function IE(r,a){if(Zt!==0&&Zt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(yf()&&r.callbackNode!==l)return null;var c=qe;return c=qi(r,r===ht?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(lE(r,c,a),AE(r,An()),r.callbackNode!=null&&r.callbackNode===l?IE.bind(null,r):null)}function RE(r,a){if(yf())return null;lE(r,a,!0)}function bk(){kk(function(){(et&6)!==0?Wt(Ou,_k):xE()})}function wy(){if(Ps===0){var r=ol;r===0&&(r=Bi,Bi<<=1,(Bi&261888)===0&&(Bi=256)),Ps=r}return Ps}function CE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ko(""+r)}function DE(r,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,r.id&&l.setAttribute("form",r.id),a.parentNode.insertBefore(l,a),r=new FormData(r),l.parentNode.removeChild(l),r}function Tk(r,a,l,c,p){if(a==="submit"&&l&&l.stateNode===p){var y=CE((p[nn]||null).action),T=c.submitter;T&&(a=(a=T[nn]||null)?CE(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var x=new er("action","action",null,c,p);r.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ps!==0){var z=T?DE(p,T):new FormData(p);qg(l,{pending:!0,data:z,method:p.method,action:y},null,z)}}else typeof y=="function"&&(x.preventDefault(),z=T?DE(p,T):new FormData(p),qg(l,{pending:!0,data:z,method:p.method,action:y},y,z))},currentTarget:p}]})}}for(var Sy=0;Sy<ag.length;Sy++){var xy=ag[Sy],Ek=xy.toLowerCase(),wk=xy[0].toUpperCase()+xy.slice(1);ki(Ek,"on"+wk)}ki(oT,"onAnimationEnd"),ki(lT,"onAnimationIteration"),ki(uT,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(zN,"onTransitionRun"),ki(UN,"onTransitionStart"),ki(BN,"onTransitionCancel"),ki(cT,"onTransitionEnd"),Xi("onMouseEnter",["mouseout","mouseover"]),Xi("onMouseLeave",["mouseout","mouseover"]),Xi("onPointerEnter",["pointerout","pointerover"]),Xi("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rc));function NE(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],p=c.event;c=c.listeners;e:{var y=void 0;if(a)for(var T=c.length-1;0<=T;T--){var x=c[T],z=x.instance,Y=x.currentTarget;if(x=x.listener,z!==y&&p.isPropagationStopped())break e;y=x,p.currentTarget=Y;try{y(p)}catch(ee){Vd(ee)}p.currentTarget=null,y=z}else for(T=0;T<c.length;T++){if(x=c[T],z=x.instance,Y=x.currentTarget,x=x.listener,z!==y&&p.isPropagationStopped())break e;y=x,p.currentTarget=Y;try{y(p)}catch(ee){Vd(ee)}p.currentTarget=null,y=z}}}}function Be(r,a){var l=a[Bo];l===void 0&&(l=a[Bo]=new Set);var c=r+"__bubble";l.has(c)||(kE(a,r,2,!1),l.add(c))}function Ay(r,a,l){var c=0;a&&(c|=4),kE(l,r,c,a)}var bf="_reactListening"+Math.random().toString(36).slice(2);function Iy(r){if(!r[bf]){r[bf]=!0,Uu.forEach(function(l){l!=="selectionchange"&&(Sk.has(l)||Ay(l,!1,r),Ay(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[bf]||(a[bf]=!0,Ay("selectionchange",!1,a))}}function kE(r,a,l,c){switch(ow(a)){case 2:var p=Zk;break;case 8:p=Jk;break;default:p=Fy}l=p.bind(null,a,l,r),p=void 0,!Va||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?r.addEventListener(a,l,{capture:!0,passive:p}):r.addEventListener(a,l,!0):p!==void 0?r.addEventListener(a,l,{passive:p}):r.addEventListener(a,l,!1)}function Ry(r,a,l,c,p){var y=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var x=c.stateNode.containerInfo;if(x===p)break;if(T===4)for(T=c.return;T!==null;){var z=T.tag;if((z===3||z===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;x!==null;){if(T=$i(x),T===null)return;if(z=T.tag,z===5||z===6||z===26||z===27){c=y=T;continue e}x=x.parentNode}}c=c.return}gs(function(){var Y=y,ee=si(l),se=[];e:{var X=hT.get(r);if(X!==void 0){var Z=er,ve=r;switch(r){case"keypress":if(Pa(l)===0)break e;case"keydown":case"keyup":Z=Dd;break;case"focusin":ve="focus",Z=La;break;case"focusout":ve="blur",Z=La;break;case"beforeblur":case"afterblur":Z=La;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Td;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=b;break;case oT:case lT:case uT:Z=wd;break;case cT:Z=I;break;case"scroll":case"scrollend":Z=Zu;break;case"wheel":Z=W;break;case"copy":case"cut":case"paste":Z=Sd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Ir;break;case"toggle":case"beforetoggle":Z=Pe}var Ae=(a&4)!==0,ct=!Ae&&(r==="scroll"||r==="scrollend"),G=Ae?X!==null?X+"Capture":null:X;Ae=[];for(var F=Y,Q;F!==null;){var re=F;if(Q=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Q===null||G===null||(re=Ri(F,G),re!=null&&Ae.push(Cc(F,re,Q))),ct)break;F=F.return}0<Ae.length&&(X=new Z(X,ve,null,l,ee),se.push({event:X,listeners:Ae}))}}if((a&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",X&&l!==Yu&&(ve=l.relatedTarget||l.fromElement)&&($i(ve)||ve[Gi]))break e;if((Z||X)&&(X=ee.window===ee?ee:(X=ee.ownerDocument)?X.defaultView||X.parentWindow:window,Z?(ve=l.relatedTarget||l.toElement,Z=Y,ve=ve?$i(ve):null,ve!==null&&(ct=o(ve),Ae=ve.tag,ve!==ct||Ae!==5&&Ae!==27&&Ae!==6)&&(ve=null)):(Z=null,ve=Y),Z!==ve)){if(Ae=Ju,re="onMouseLeave",G="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Ae=Ir,re="onPointerLeave",G="onPointerEnter",F="pointer"),ct=Z==null?X:Hn(Z),Q=ve==null?X:Hn(ve),X=new Ae(re,F+"leave",Z,l,ee),X.target=ct,X.relatedTarget=Q,re=null,$i(ee)===Y&&(Ae=new Ae(G,F+"enter",ve,l,ee),Ae.target=Q,Ae.relatedTarget=ct,re=Ae),ct=re,Z&&ve)t:{for(Ae=xk,G=Z,F=ve,Q=0,re=G;re;re=Ae(re))Q++;re=0;for(var Se=F;Se;Se=Ae(Se))re++;for(;0<Q-re;)G=Ae(G),Q--;for(;0<re-Q;)F=Ae(F),re--;for(;Q--;){if(G===F||F!==null&&G===F.alternate){Ae=G;break t}G=Ae(G),F=Ae(F)}Ae=null}else Ae=null;Z!==null&&VE(se,X,Z,Ae,!1),ve!==null&&ct!==null&&VE(se,ct,ve,Ae,!0)}}e:{if(X=Y?Hn(Y):window,Z=X.nodeName&&X.nodeName.toLowerCase(),Z==="select"||Z==="input"&&X.type==="file")var Xe=Xb;else if(Qb(X))if(Wb)Xe=ON;else{Xe=MN;var be=VN}else Z=X.nodeName,!Z||Z.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Y&&Go(Y.elementType)&&(Xe=Xb):Xe=PN;if(Xe&&(Xe=Xe(r,Y))){Yb(se,Xe,l,ee);break e}be&&be(r,X,Y),r==="focusout"&&Y&&X.type==="number"&&Y.memoizedProps.value!=null&&Ku(X,"number",X.value)}switch(be=Y?Hn(Y):window,r){case"focusin":(Qb(be)||be.contentEditable==="true")&&(Jo=be,ig=Y,rc=null);break;case"focusout":rc=ig=Jo=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":rg=!1,sT(se,l,ee);break;case"selectionchange":if(jN)break;case"keydown":case"keyup":sT(se,l,ee)}var je;if(Je)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Zo?ja(r,l)&&(He="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(He="onCompositionStart");He&&(ir&&l.locale!=="ko"&&(Zo||He!=="onCompositionStart"?He==="onCompositionEnd"&&Zo&&(je=Wu()):(Ji=ee,Xu="value"in Ji?Ji.value:Ji.textContent,Zo=!0)),be=Tf(Y,He),0<be.length&&(He=new nr(He,r,null,l,ee),se.push({event:He,listeners:be}),je?He.data=je:(je=Wo(l),je!==null&&(He.data=je)))),(je=oi?CN(r,l):DN(r,l))&&(He=Tf(Y,"onBeforeInput"),0<He.length&&(be=new nr("onBeforeInput","beforeinput",null,l,ee),se.push({event:be,listeners:He}),be.data=je)),Tk(se,r,Y,l,ee)}NE(se,a)})}function Cc(r,a,l){return{instance:r,listener:a,currentTarget:l}}function Tf(r,a){for(var l=a+"Capture",c=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Ri(r,l),p!=null&&c.unshift(Cc(r,p,y)),p=Ri(r,a),p!=null&&c.push(Cc(r,p,y))),r.tag===3)return c;r=r.return}return[]}function xk(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function VE(r,a,l,c,p){for(var y=a._reactName,T=[];l!==null&&l!==c;){var x=l,z=x.alternate,Y=x.stateNode;if(x=x.tag,z!==null&&z===c)break;x!==5&&x!==26&&x!==27||Y===null||(z=Y,p?(Y=Ri(l,y),Y!=null&&T.unshift(Cc(l,Y,z))):p||(Y=Ri(l,y),Y!=null&&T.push(Cc(l,Y,z)))),l=l.return}T.length!==0&&r.push({event:a,listeners:T})}var Ak=/\r\n?/g,Ik=/\u0000|\uFFFD/g;function ME(r){return(typeof r=="string"?r:""+r).replace(Ak,`
`).replace(Ik,"")}function PE(r,a){return a=ME(a),ME(r)===a}function ut(r,a,l,c,p,y){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Vn(r,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Vn(r,""+c);break;case"className":Gn(r,"class",c);break;case"tabIndex":Gn(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Gn(r,l,c);break;case"style":Qu(r,c,y);break;case"data":if(a!=="object"){Gn(r,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Ko(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&ut(r,a,"name",p.name,p,null),ut(r,a,"formEncType",p.formEncType,p,null),ut(r,a,"formMethod",p.formMethod,p,null),ut(r,a,"formTarget",p.formTarget,p,null)):(ut(r,a,"encType",p.encType,p,null),ut(r,a,"method",p.method,p,null),ut(r,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Ko(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=Ii);break;case"onScroll":c!=null&&Be("scroll",r);break;case"onScrollEnd":c!=null&&Be("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=Ko(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":Be("beforetoggle",r),Be("toggle",r),qo(r,"popover",c);break;case"xlinkActuate":Ft(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ft(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ft(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ft(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ft(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ft(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":qo(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=bd.get(l)||l,qo(r,l,c))}}function Cy(r,a,l,c,p,y){switch(l){case"style":Qu(r,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?Vn(r,c):(typeof c=="number"||typeof c=="bigint")&&Vn(r,""+c);break;case"onScroll":c!=null&&Be("scroll",r);break;case"onScrollEnd":c!=null&&Be("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bu.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),y=r[nn]||null,y=y!=null?y[l]:null,typeof y=="function"&&r.removeEventListener(a,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(a,c,p);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):qo(r,l,c)}}}function dn(r,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",r),Be("load",r);var c=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var T=l[y];if(T!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ut(r,a,y,T,l,null)}}p&&ut(r,a,"srcSet",l.srcSet,l,null),c&&ut(r,a,"src",l.src,l,null);return;case"input":Be("invalid",r);var x=y=T=p=null,z=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var ee=l[c];if(ee!=null)switch(c){case"name":p=ee;break;case"type":T=ee;break;case"checked":z=ee;break;case"defaultChecked":Y=ee;break;case"value":y=ee;break;case"defaultValue":x=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,a));break;default:ut(r,a,c,ee,l,null)}}yd(r,y,x,z,Y,T,p,!1);return;case"select":Be("invalid",r),c=T=y=null;for(p in l)if(l.hasOwnProperty(p)&&(x=l[p],x!=null))switch(p){case"value":y=x;break;case"defaultValue":T=x;break;case"multiple":c=x;default:ut(r,a,p,x,l,null)}a=y,l=T,r.multiple=!!c,a!=null?ds(r,!!c,a,!1):l!=null&&ds(r,!!c,l,!0);return;case"textarea":Be("invalid",r),y=p=c=null;for(T in l)if(l.hasOwnProperty(T)&&(x=l[T],x!=null))switch(T){case"value":c=x;break;case"defaultValue":p=x;break;case"children":y=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:ut(r,a,T,x,l,null)}fs(r,c,p,y);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(c=l[z],c!=null))switch(z){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ut(r,a,z,c,l,null)}return;case"dialog":Be("beforetoggle",r),Be("toggle",r),Be("cancel",r),Be("close",r);break;case"iframe":case"object":Be("load",r);break;case"video":case"audio":for(c=0;c<Rc.length;c++)Be(Rc[c],r);break;case"image":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"embed":case"source":case"link":Be("error",r),Be("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ut(r,a,Y,c,l,null)}return;default:if(Go(a)){for(ee in l)l.hasOwnProperty(ee)&&(c=l[ee],c!==void 0&&Cy(r,a,ee,c,l,void 0));return}}for(x in l)l.hasOwnProperty(x)&&(c=l[x],c!=null&&ut(r,a,x,c,l,null))}function Rk(r,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,x=null,z=null,Y=null,ee=null;for(Z in l){var se=l[Z];if(l.hasOwnProperty(Z)&&se!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":z=se;default:c.hasOwnProperty(Z)||ut(r,a,Z,null,c,se)}}for(var X in c){var Z=c[X];if(se=l[X],c.hasOwnProperty(X)&&(Z!=null||se!=null))switch(X){case"type":y=Z;break;case"name":p=Z;break;case"checked":Y=Z;break;case"defaultChecked":ee=Z;break;case"value":T=Z;break;case"defaultValue":x=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:Z!==se&&ut(r,a,X,Z,c,se)}}Ho(r,T,x,z,Y,ee,y,p);return;case"select":Z=T=x=X=null;for(y in l)if(z=l[y],l.hasOwnProperty(y)&&z!=null)switch(y){case"value":break;case"multiple":Z=z;default:c.hasOwnProperty(y)||ut(r,a,y,null,c,z)}for(p in c)if(y=c[p],z=l[p],c.hasOwnProperty(p)&&(y!=null||z!=null))switch(p){case"value":X=y;break;case"defaultValue":x=y;break;case"multiple":T=y;default:y!==z&&ut(r,a,p,y,c,z)}a=x,l=T,c=Z,X!=null?ds(r,!!l,X,!1):!!c!=!!l&&(a!=null?ds(r,!!l,a,!0):ds(r,!!l,l?[]:"",!1));return;case"textarea":Z=X=null;for(x in l)if(p=l[x],l.hasOwnProperty(x)&&p!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:ut(r,a,x,null,c,p)}for(T in c)if(p=c[T],y=l[T],c.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":X=p;break;case"defaultValue":Z=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ut(r,a,T,p,c,y)}vd(r,X,Z);return;case"option":for(var ve in l)if(X=l[ve],l.hasOwnProperty(ve)&&X!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":r.selected=!1;break;default:ut(r,a,ve,null,c,X)}for(z in c)if(X=c[z],Z=l[z],c.hasOwnProperty(z)&&X!==Z&&(X!=null||Z!=null))switch(z){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ut(r,a,z,X,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in l)X=l[Ae],l.hasOwnProperty(Ae)&&X!=null&&!c.hasOwnProperty(Ae)&&ut(r,a,Ae,null,c,X);for(Y in c)if(X=c[Y],Z=l[Y],c.hasOwnProperty(Y)&&X!==Z&&(X!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,a));break;default:ut(r,a,Y,X,c,Z)}return;default:if(Go(a)){for(var ct in l)X=l[ct],l.hasOwnProperty(ct)&&X!==void 0&&!c.hasOwnProperty(ct)&&Cy(r,a,ct,void 0,c,X);for(ee in c)X=c[ee],Z=l[ee],!c.hasOwnProperty(ee)||X===Z||X===void 0&&Z===void 0||Cy(r,a,ee,X,c,Z);return}}for(var G in l)X=l[G],l.hasOwnProperty(G)&&X!=null&&!c.hasOwnProperty(G)&&ut(r,a,G,null,c,X);for(se in c)X=c[se],Z=l[se],!c.hasOwnProperty(se)||X===Z||X==null&&Z==null||ut(r,a,se,X,c,Z)}function OE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ck(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var p=l[c],y=p.transferSize,T=p.initiatorType,x=p.duration;if(y&&x&&OE(T)){for(T=0,x=p.responseEnd,c+=1;c<l.length;c++){var z=l[c],Y=z.startTime;if(Y>x)break;var ee=z.transferSize,se=z.initiatorType;ee&&OE(se)&&(z=z.responseEnd,T+=ee*(z<x?1:(x-Y)/(z-Y)))}if(--c,a+=8*(y+T)/(p.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Dy=null,Ny=null;function Ef(r){return r.nodeType===9?r:r.ownerDocument}function LE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jE(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function ky(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Vy=null;function Dk(){var r=window.event;return r&&r.type==="popstate"?r===Vy?!1:(Vy=r,!0):(Vy=null,!1)}var zE=typeof setTimeout=="function"?setTimeout:void 0,Nk=typeof clearTimeout=="function"?clearTimeout:void 0,UE=typeof Promise=="function"?Promise:void 0,kk=typeof queueMicrotask=="function"?queueMicrotask:typeof UE<"u"?function(r){return UE.resolve(null).then(r).catch(Vk)}:zE;function Vk(r){setTimeout(function(){throw r})}function Os(r){return r==="head"}function BE(r,a){var l=a,c=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(c===0){r.removeChild(p),Al(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Dc(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Dc(l);for(var y=l.firstChild;y;){var T=y.nextSibling,x=y.nodeName;y[Ki]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=T}}else l==="body"&&Dc(r.ownerDocument.body);l=p}while(l);Al(a)}function FE(r,a){var l=r;r=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=c}while(l)}function My(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":My(l),Fo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function Mk(r,a,l,c){for(;r.nodeType===1;){var p=l;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Ki])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=mi(r.nextSibling),r===null)break}return null}function Pk(r,a,l){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=mi(r.nextSibling),r===null))return null;return r}function qE(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=mi(r.nextSibling),r===null))return null;return r}function Py(r){return r.data==="$?"||r.data==="$~"}function Oy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function Ok(r,a){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function mi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Ly=null;function HE(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(a===0)return mi(r.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}r=r.nextSibling}return null}function GE(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return r;a--}else l!=="/$"&&l!=="/&"||a++}r=r.previousSibling}return null}function KE(r,a,l){switch(a=Ef(l),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Dc(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Fo(r)}var pi=new Map,$E=new Set;function wf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Fr=ae.d;ae.d={f:Lk,r:jk,D:zk,C:Uk,L:Bk,m:Fk,X:Hk,S:qk,M:Gk};function Lk(){var r=Fr.f(),a=mf();return r||a}function jk(r){var a=ri(r);a!==null&&a.tag===5&&a.type==="form"?c1(a):Fr.r(r)}var wl=typeof document>"u"?null:document;function QE(r,a,l){var c=wl;if(c&&typeof a=="string"&&a){var p=kn(a);p='link[rel="'+r+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),$E.has(p)||($E.add(p),r={rel:r,crossOrigin:l,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),dn(a,"link",r),Bt(a),c.head.appendChild(a)))}}function zk(r){Fr.D(r),QE("dns-prefetch",r,null)}function Uk(r,a){Fr.C(r,a),QE("preconnect",r,a)}function Bk(r,a,l){Fr.L(r,a,l);var c=wl;if(c&&r&&a){var p='link[rel="preload"][as="'+kn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+kn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+kn(l.imageSizes)+'"]')):p+='[href="'+kn(r)+'"]';var y=p;switch(a){case"style":y=Sl(r);break;case"script":y=xl(r)}pi.has(y)||(r=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:r,as:a},l),pi.set(y,r),c.querySelector(p)!==null||a==="style"&&c.querySelector(Nc(y))||a==="script"&&c.querySelector(kc(y))||(a=c.createElement("link"),dn(a,"link",r),Bt(a),c.head.appendChild(a)))}}function Fk(r,a){Fr.m(r,a);var l=wl;if(l&&r){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+kn(c)+'"][href="'+kn(r)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=xl(r)}if(!pi.has(y)&&(r=v({rel:"modulepreload",href:r},a),pi.set(y,r),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(kc(y)))return}c=l.createElement("link"),dn(c,"link",r),Bt(c),l.head.appendChild(c)}}}function qk(r,a,l){Fr.S(r,a,l);var c=wl;if(c&&r){var p=Qi(c).hoistableStyles,y=Sl(r);a=a||"default";var T=p.get(y);if(!T){var x={loading:0,preload:null};if(T=c.querySelector(Nc(y)))x.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},l),(l=pi.get(y))&&jy(r,l);var z=T=c.createElement("link");Bt(z),dn(z,"link",r),z._p=new Promise(function(Y,ee){z.onload=Y,z.onerror=ee}),z.addEventListener("load",function(){x.loading|=1}),z.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Sf(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:x},p.set(y,T)}}}function Hk(r,a){Fr.X(r,a);var l=wl;if(l&&r){var c=Qi(l).hoistableScripts,p=xl(r),y=c.get(p);y||(y=l.querySelector(kc(p)),y||(r=v({src:r,async:!0},a),(a=pi.get(p))&&zy(r,a),y=l.createElement("script"),Bt(y),dn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function Gk(r,a){Fr.M(r,a);var l=wl;if(l&&r){var c=Qi(l).hoistableScripts,p=xl(r),y=c.get(p);y||(y=l.querySelector(kc(p)),y||(r=v({src:r,async:!0,type:"module"},a),(a=pi.get(p))&&zy(r,a),y=l.createElement("script"),Bt(y),dn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function YE(r,a,l,c){var p=(p=Le.current)?wf(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Sl(l.href),l=Qi(p).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Sl(l.href);var y=Qi(p).hoistableStyles,T=y.get(r);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,T),(y=p.querySelector(Nc(r)))&&!y._p&&(T.instance=y,T.state.loading=5),pi.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},pi.set(r,l),y||Kk(p,r,l,T.state))),a&&c===null)throw Error(i(528,""));return T}if(a&&c!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=xl(l),l=Qi(p).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Sl(r){return'href="'+kn(r)+'"'}function Nc(r){return'link[rel="stylesheet"]['+r+"]"}function XE(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function Kk(r,a,l,c){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=r.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),dn(a,"link",l),Bt(a),r.head.appendChild(a))}function xl(r){return'[src="'+kn(r)+'"]'}function kc(r){return"script[async]"+r}function WE(r,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=r.querySelector('style[data-href~="'+kn(l.href)+'"]');if(c)return a.instance=c,Bt(c),c;var p=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Bt(c),dn(c,"style",p),Sf(c,l.precedence,r),a.instance=c;case"stylesheet":p=Sl(l.href);var y=r.querySelector(Nc(p));if(y)return a.state.loading|=4,a.instance=y,Bt(y),y;c=XE(l),(p=pi.get(p))&&jy(c,p),y=(r.ownerDocument||r).createElement("link"),Bt(y);var T=y;return T._p=new Promise(function(x,z){T.onload=x,T.onerror=z}),dn(y,"link",c),a.state.loading|=4,Sf(y,l.precedence,r),a.instance=y;case"script":return y=xl(l.src),(p=r.querySelector(kc(y)))?(a.instance=p,Bt(p),p):(c=l,(p=pi.get(y))&&(c=v({},l),zy(c,p)),r=r.ownerDocument||r,p=r.createElement("script"),Bt(p),dn(p,"link",c),r.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Sf(c,l.precedence,r));return a.instance}function Sf(r,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,T=0;T<c.length;T++){var x=c[T];if(x.dataset.precedence===a)y=x;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(r,a.firstChild))}function jy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function zy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var xf=null;function ZE(r,a,l){if(xf===null){var c=new Map,p=xf=new Map;p.set(l,c)}else p=xf,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),p=0;p<l.length;p++){var y=l[p];if(!(y[Ki]||y[Ut]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=r+T;var x=c.get(T);x?x.push(y):c.set(T,[y])}}return c}function JE(r,a,l){r=r.ownerDocument||r,r.head.insertBefore(l,a==="title"?r.querySelector("head > title"):null)}function $k(r,a,l){if(l===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ew(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Qk(r,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Sl(c.href),y=a.querySelector(Nc(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Af.bind(r),a.then(r,r)),l.state.loading|=4,l.instance=y,Bt(y);return}y=a.ownerDocument||a,c=XE(c),(p=pi.get(p))&&jy(c,p),y=y.createElement("link"),Bt(y);var T=y;T._p=new Promise(function(x,z){T.onload=x,T.onerror=z}),dn(y,"link",c),l.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Af.bind(r),a.addEventListener("load",l),a.addEventListener("error",l))}}var Uy=0;function Yk(r,a){return r.stylesheets&&r.count===0&&Rf(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var c=setTimeout(function(){if(r.stylesheets&&Rf(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+a);0<r.imgBytes&&Uy===0&&(Uy=62500*Ck());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Rf(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Uy?50:800)+a);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Af(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var If=null;function Rf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,If=new Map,a.forEach(Xk,r),If=null,Af.call(r))}function Xk(r,a){if(!(a.state.loading&4)){var l=If.get(r);if(l)var c=l.get(null);else{l=new Map,If.set(r,l);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),c=T)}c&&l.set(null,c)}p=a.instance,T=p.getAttribute("data-precedence"),y=l.get(T)||c,y===c&&l.set(null,p),l.set(T,p),this.count++,c=Af.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),a.state.loading|=4}}var Vc={$$typeof:L,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function Wk(r,a,l,c,p,y,T,x,z){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.hiddenUpdates=Hi(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function tw(r,a,l,c,p,y,T,x,z,Y,ee,se){return r=new Wk(r,a,l,T,z,Y,ee,se,x),a=1,y===!0&&(a|=24),y=$n(3,null,null,a),r.current=y,y.stateNode=r,a=_g(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:c,isDehydrated:l,cache:a},wg(y),r}function nw(r){return r?(r=nl,r):nl}function iw(r,a,l,c,p,y){p=nw(p),c.context===null?c.context=p:c.pendingContext=p,c=xs(a),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=As(r,c,a),l!==null&&(jn(l,r,a),hc(l,r,a))}function rw(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function By(r,a){rw(r,a),(r=r.alternate)&&rw(r,a)}function sw(r){if(r.tag===13||r.tag===31){var a=Ba(r,67108864);a!==null&&jn(a,r,67108864),By(r,67108864)}}function aw(r){if(r.tag===13||r.tag===31){var a=Zn();a=Ca(a);var l=Ba(r,a);l!==null&&jn(l,r,a),By(r,a)}}var Cf=!0;function Zk(r,a,l,c){var p=H.T;H.T=null;var y=ae.p;try{ae.p=2,Fy(r,a,l,c)}finally{ae.p=y,H.T=p}}function Jk(r,a,l,c){var p=H.T;H.T=null;var y=ae.p;try{ae.p=8,Fy(r,a,l,c)}finally{ae.p=y,H.T=p}}function Fy(r,a,l,c){if(Cf){var p=qy(c);if(p===null)Ry(r,a,c,Df,l),lw(r,c);else if(tV(p,r,a,l,c))c.stopPropagation();else if(lw(r,c),a&4&&-1<eV.indexOf(r)){for(;p!==null;){var y=ri(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Fi(y.pendingLanes);if(T!==0){var x=y;for(x.pendingLanes|=2,x.entangledLanes|=2;T;){var z=1<<31-Dt(T);x.entanglements[1]|=z,T&=~z}or(y),(et&6)===0&&(df=An()+500,Ic(0))}}break;case 31:case 13:x=Ba(y,2),x!==null&&jn(x,y,2),mf(),By(y,2)}if(y=qy(c),y===null&&Ry(r,a,c,Df,l),y===p)break;p=y}p!==null&&c.stopPropagation()}else Ry(r,a,c,null,l)}}function qy(r){return r=si(r),Hy(r)}var Df=null;function Hy(r){if(Df=null,r=$i(r),r!==null){var a=o(r);if(a===null)r=null;else{var l=a.tag;if(l===13){if(r=u(a),r!==null)return r;r=null}else if(l===31){if(r=h(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Df=r,null}function ow(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xa()){case Ou:return 2;case Lu:return 8;case cs:case Xp:return 32;case od:return 268435456;default:return 32}default:return 32}}var Gy=!1,Ls=null,js=null,zs=null,Mc=new Map,Pc=new Map,Us=[],eV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lw(r,a){switch(r){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Mc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(a.pointerId)}}function Oc(r,a,l,c,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},a!==null&&(a=ri(a),a!==null&&sw(a)),r):(r.eventSystemFlags|=c,a=r.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),r)}function tV(r,a,l,c,p){switch(a){case"focusin":return Ls=Oc(Ls,r,a,l,c,p),!0;case"dragenter":return js=Oc(js,r,a,l,c,p),!0;case"mouseover":return zs=Oc(zs,r,a,l,c,p),!0;case"pointerover":var y=p.pointerId;return Mc.set(y,Oc(Mc.get(y)||null,r,a,l,c,p)),!0;case"gotpointercapture":return y=p.pointerId,Pc.set(y,Oc(Pc.get(y)||null,r,a,l,c,p)),!0}return!1}function uw(r){var a=$i(r.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){r.blockedOn=a,xi(r.priority,function(){aw(l)});return}}else if(a===31){if(a=h(l),a!==null){r.blockedOn=a,xi(r.priority,function(){aw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Nf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=qy(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);Yu=c,l.target.dispatchEvent(c),Yu=null}else return a=ri(l),a!==null&&sw(a),r.blockedOn=l,!1;a.shift()}return!0}function cw(r,a,l){Nf(r)&&l.delete(a)}function nV(){Gy=!1,Ls!==null&&Nf(Ls)&&(Ls=null),js!==null&&Nf(js)&&(js=null),zs!==null&&Nf(zs)&&(zs=null),Mc.forEach(cw),Pc.forEach(cw)}function kf(r,a){r.blockedOn===a&&(r.blockedOn=null,Gy||(Gy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nV)))}var Vf=null;function hw(r){Vf!==r&&(Vf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Vf===r&&(Vf=null);for(var a=0;a<r.length;a+=3){var l=r[a],c=r[a+1],p=r[a+2];if(typeof c!="function"){if(Hy(c||l)===null)continue;break}var y=ri(l);y!==null&&(r.splice(a,3),a-=3,qg(y,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function Al(r){function a(z){return kf(z,r)}Ls!==null&&kf(Ls,r),js!==null&&kf(js,r),zs!==null&&kf(zs,r),Mc.forEach(a),Pc.forEach(a);for(var l=0;l<Us.length;l++){var c=Us[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Us.length&&(l=Us[0],l.blockedOn===null);)uw(l),l.blockedOn===null&&Us.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],y=l[c+1],T=p[nn]||null;if(typeof y=="function")T||hw(l);else if(T){var x=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[nn]||null)x=T.formAction;else if(Hy(p)!==null)continue}else x=T.action;typeof x=="function"?l[c+1]=x:(l.splice(c,3),c-=3),hw(l)}}}function dw(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Ky(r){this._internalRoot=r}Mf.prototype.render=Ky.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,c=Zn();iw(l,c,r,a,null,null)},Mf.prototype.unmount=Ky.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;iw(r.current,2,null,r,null,null),mf(),a[Gi]=null}};function Mf(r){this._internalRoot=r}Mf.prototype.unstable_scheduleHydration=function(r){if(r){var a=fd();r={blockedOn:null,target:r,priority:a};for(var l=0;l<Us.length&&a!==0&&a<Us[l].priority;l++);Us.splice(l,0,r),l===0&&uw(r)}};var fw=e.version;if(fw!=="19.2.0")throw Error(i(527,fw,"19.2.0"));ae.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var iV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pf.isDisabled&&Pf.supportsFiber)try{wi=Pf.inject(iV),on=Pf}catch{}}return jc.createRoot=function(r,a){if(!s(r))throw Error(i(299));var l=!1,c="",p=b1,y=T1,T=E1;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=tw(r,1,!1,null,null,l,c,null,p,y,T,dw),r[Gi]=a.current,Iy(r),new Ky(a)},jc.hydrateRoot=function(r,a,l){if(!s(r))throw Error(i(299));var c=!1,p="",y=b1,T=T1,x=E1,z=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),a=tw(r,1,!0,a,l??null,c,p,z,y,T,x,dw),a.context=nw(null),l=a.current,c=Zn(),c=Ca(c),p=xs(c),p.callback=null,As(l,p,c),l=c,a.current.lanes=l,Ia(a,l),or(a),r[Gi]=a.current,Iy(r),new Mf(a)},jc.version="19.2.0",jc}var ww;function mV(){if(ww)return Yy.exports;ww=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yy.exports=fV(),Yy.exports}var pV=mV();const gV="modulepreload",yV=function(n){return"/house-budget-pwa/"+n},Sw={},vV=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var u=f;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=h?.nonce||h?.getAttribute("nonce");s=f(t.map(g=>{if(g=yV(g),g in Sw)return;Sw[g]=!0;const v=g.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":gV,v||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((R,k)=>{S.addEventListener("load",R),S.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(h){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=h,window.dispatchEvent(d),!d.defaultPrevented)throw h}return s.then(h=>{for(const d of h||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function _V(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:s,onRegisteredSW:o,onRegisterError:u}=n;let h,d;const f=async(v=!0)=>{await d};async function g(){if("serviceWorker"in navigator){if(h=await vV(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/house-budget-pwa/sw.js",{scope:"/house-budget-pwa/",type:"classic"})).catch(v=>{u?.(v)}),!h)return;h.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),h.addEventListener("installed",v=>{v.isUpdate||i?.()}),h.register({immediate:e}).then(v=>{o?o("/house-budget-pwa/sw.js",v):s?.(v)}).catch(v=>{u?.(v)})}}return d=g(),f}var xw="popstate";function bV(n={}){function e(s,o){let{pathname:u="/",search:h="",hash:d=""}=Mo(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),O0("",{pathname:u,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let u=s.document.querySelector("base"),h="";if(u&&u.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");h=f===-1?d:d.slice(0,f)}return h+"#"+(typeof o=="string"?o:ph(o))}function i(s,o){Ei(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return EV(e,t,i,n)}function St(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ei(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TV(){return Math.random().toString(36).substring(2,10)}function Aw(n,e){return{usr:n.state,key:n.key,idx:e}}function O0(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Mo(e):e,state:t,key:e&&e.key||i||TV()}}function ph({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Mo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function EV(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,u=s.history,h="POP",d=null,f=g();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function g(){return(u.state||{idx:null}).idx}function v(){h="POP";let V=g(),j=V==null?null:V-f;f=V,d&&d({action:h,location:k.location,delta:j})}function _(V,j){h="PUSH";let M=O0(k.location,V,j);t&&t(M,V),f=g()+1;let L=Aw(M,f),J=k.createHref(M);try{u.pushState(L,"",J)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;s.location.assign(J)}o&&d&&d({action:h,location:k.location,delta:1})}function S(V,j){h="REPLACE";let M=O0(k.location,V,j);t&&t(M,V),f=g();let L=Aw(M,f),J=k.createHref(M);u.replaceState(L,"",J),o&&d&&d({action:h,location:k.location,delta:0})}function R(V){return wV(V)}let k={get action(){return h},get location(){return n(s,u)},listen(V){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(xw,v),d=V,()=>{s.removeEventListener(xw,v),d=null}},createHref(V){return e(s,V)},createURL:R,encodeLocation(V){let j=R(V);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:_,replace:S,go(V){return u.go(V)}};return k}function wV(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),St(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:ph(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function ZA(n,e,t="/"){return SV(n,e,t,!1)}function SV(n,e,t,i){let s=typeof e=="string"?Mo(e):e,o=Wr(s.pathname||"/",t);if(o==null)return null;let u=JA(n);xV(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let f=OV(o);h=MV(u[d],f,i)}return h}function JA(n,e=[],t=[],i="",s=!1){let o=(u,h,d=s,f)=>{let g={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;St(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let v=Yr([i,g.relativePath]),_=t.concat(g);u.children&&u.children.length>0&&(St(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),JA(u.children,e,_,v,d)),!(u.path==null&&!u.index)&&e.push({path:v,score:kV(v,u.index),routesMeta:_})};return n.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))o(u,h);else for(let d of eI(u.path))o(u,h,!0,d)}),e}function eI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let u=eI(i.join("/")),h=[];return h.push(...u.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...u),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function xV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:VV(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var AV=/^:[\w-]+$/,IV=3,RV=2,CV=1,DV=10,NV=-2,Iw=n=>n==="*";function kV(n,e){let t=n.split("/"),i=t.length;return t.some(Iw)&&(i+=NV),e&&(i+=RV),t.filter(s=>!Iw(s)).reduce((s,o)=>s+(AV.test(o)?IV:o===""?CV:DV),i)}function VV(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function MV(n,e,t=!1){let{routesMeta:i}=n,s={},o="/",u=[];for(let h=0;h<i.length;++h){let d=i[h],f=h===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Em({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),_=d.route;if(!v&&f&&t&&!i[i.length-1].route.index&&(v=Em({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),u.push({params:s,pathname:Yr([o,v.pathname]),pathnameBase:BV(Yr([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=Yr([o,v.pathnameBase]))}return u}function Em(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=PV(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:v},_)=>{if(g==="*"){let R=h[_]||"";u=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const S=h[_];return v&&!S?f[g]=void 0:f[g]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:u,pattern:n}}function PV(n,e=!1,t=!0){Ei(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function OV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ei(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Wr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var LV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jV=n=>LV.test(n);function zV(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Mo(n):n,o;if(t)if(jV(t))o=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),Ei(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?o=Rw(t.substring(1),"/"):o=Rw(t,e)}else o=e;return{pathname:o,search:FV(i),hash:qV(s)}}function Rw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Jy(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function UV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function tI(n){let e=UV(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function nI(n,e,t,i=!1){let s;typeof n=="string"?s=Mo(n):(s={...n},St(!s.pathname||!s.pathname.includes("?"),Jy("?","pathname","search",s)),St(!s.pathname||!s.pathname.includes("#"),Jy("#","pathname","hash",s)),St(!s.search||!s.search.includes("#"),Jy("#","search","hash",s)));let o=n===""||s.pathname==="",u=o?"/":s.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!i&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}h=v>=0?e[v]:"/"}let d=zV(s,h),f=u&&u!=="/"&&u.endsWith("/"),g=(o||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Yr=n=>n.join("/").replace(/\/\/+/g,"/"),BV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,qV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function HV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var iI=["POST","PUT","PATCH","DELETE"];new Set(iI);var GV=["GET",...iI];new Set(GV);var bu=U.createContext(null);bu.displayName="DataRouter";var sp=U.createContext(null);sp.displayName="DataRouterState";U.createContext(!1);var rI=U.createContext({isTransitioning:!1});rI.displayName="ViewTransition";var KV=U.createContext(new Map);KV.displayName="Fetchers";var $V=U.createContext(null);$V.displayName="Await";var Er=U.createContext(null);Er.displayName="Navigation";var Uh=U.createContext(null);Uh.displayName="Location";var wr=U.createContext({outlet:null,matches:[],isDataRoute:!1});wr.displayName="Route";var $v=U.createContext(null);$v.displayName="RouteError";function QV(n,{relative:e}={}){St(Bh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=U.useContext(Er),{hash:s,pathname:o,search:u}=Fh(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Yr([t,o])),i.createHref({pathname:h,search:u,hash:s})}function Bh(){return U.useContext(Uh)!=null}function ga(){return St(Bh(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Uh).location}var sI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aI(n){U.useContext(Er).static||U.useLayoutEffect(n)}function Po(){let{isDataRoute:n}=U.useContext(wr);return n?lM():YV()}function YV(){St(Bh(),"useNavigate() may be used only in the context of a <Router> component.");let n=U.useContext(bu),{basename:e,navigator:t}=U.useContext(Er),{matches:i}=U.useContext(wr),{pathname:s}=ga(),o=JSON.stringify(tI(i)),u=U.useRef(!1);return aI(()=>{u.current=!0}),U.useCallback((d,f={})=>{if(Ei(u.current,sI),!u.current)return;if(typeof d=="number"){t.go(d);return}let g=nI(d,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Yr([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,n])}U.createContext(null);function XV(){let{matches:n}=U.useContext(wr),e=n[n.length-1];return e?e.params:{}}function Fh(n,{relative:e}={}){let{matches:t}=U.useContext(wr),{pathname:i}=ga(),s=JSON.stringify(tI(t));return U.useMemo(()=>nI(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function WV(n,e){return oI(n,e)}function oI(n,e,t,i,s){St(Bh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=U.useContext(Er),{matches:u}=U.useContext(wr),h=u[u.length-1],d=h?h.params:{},f=h?h.pathname:"/",g=h?h.pathnameBase:"/",v=h&&h.route;{let M=v&&v.path||"";lI(f,!v||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let _=ga(),S;if(e){let M=typeof e=="string"?Mo(e):e;St(g==="/"||M.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${M.pathname}" was given in the \`location\` prop.`),S=M}else S=_;let R=S.pathname||"/",k=R;if(g!=="/"){let M=g.replace(/^\//,"").split("/");k="/"+R.replace(/^\//,"").split("/").slice(M.length).join("/")}let V=ZA(n,{pathname:k});Ei(v||V!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Ei(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=nM(V&&V.map(M=>Object.assign({},M,{params:Object.assign({},d,M.params),pathname:Yr([g,o.encodeLocation?o.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:Yr([g,o.encodeLocation?o.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),u,t,i,s);return e&&j?U.createElement(Uh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},j):j}function ZV(){let n=oM(),e=HV(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:o},"ErrorBoundary")," or"," ",U.createElement("code",{style:o},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:s},t):null,u)}var JV=U.createElement(ZV,null),eM=class extends U.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?U.createElement(wr.Provider,{value:this.props.routeContext},U.createElement($v.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tM({routeContext:n,match:e,children:t}){let i=U.useContext(bu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(wr.Provider,{value:n},t)}function nM(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,u=t?.errors;if(u!=null){let g=o.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);St(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let v=o[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:_,errors:S}=t,R=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||R){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&i?(g,v)=>{i(g,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:v})}:void 0;return o.reduceRight((g,v,_)=>{let S,R=!1,k=null,V=null;t&&(S=u&&v.route.id?u[v.route.id]:void 0,k=v.route.errorElement||JV,h&&(d<0&&_===0?(lI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,V=null):d===_&&(R=!0,V=v.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,_+1)),M=()=>{let L;return S?L=k:R?L=V:v.route.Component?L=U.createElement(v.route.Component,null):v.route.element?L=v.route.element:L=g,U.createElement(tM,{match:v,routeContext:{outlet:g,matches:j,isDataRoute:t!=null},children:L})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?U.createElement(eM,{location:t.location,revalidation:t.revalidation,component:k,error:S,children:M(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:f}):M()},null)}function Qv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iM(n){let e=U.useContext(bu);return St(e,Qv(n)),e}function rM(n){let e=U.useContext(sp);return St(e,Qv(n)),e}function sM(n){let e=U.useContext(wr);return St(e,Qv(n)),e}function Yv(n){let e=sM(n),t=e.matches[e.matches.length-1];return St(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function aM(){return Yv("useRouteId")}function oM(){let n=U.useContext($v),e=rM("useRouteError"),t=Yv("useRouteError");return n!==void 0?n:e.errors?.[t]}function lM(){let{router:n}=iM("useNavigate"),e=Yv("useNavigate"),t=U.useRef(!1);return aI(()=>{t.current=!0}),U.useCallback(async(s,o={})=>{Ei(t.current,sI),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Cw={};function lI(n,e,t){!e&&!Cw[n]&&(Cw[n]=!0,Ei(!1,t))}U.memo(uM);function uM({routes:n,future:e,state:t,unstable_onError:i}){return oI(n,void 0,t,i,e)}function io(n){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cM({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:o=!1}){St(!Bh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=U.useMemo(()=>({basename:u,navigator:s,static:o,future:{}}),[u,s,o]);typeof t=="string"&&(t=Mo(t));let{pathname:d="/",search:f="",hash:g="",state:v=null,key:_="default"}=t,S=U.useMemo(()=>{let R=Wr(d,u);return R==null?null:{location:{pathname:R,search:f,hash:g,state:v,key:_},navigationType:i}},[u,d,f,g,v,_,i]);return Ei(S!=null,`<Router basename="${u}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:U.createElement(Er.Provider,{value:h},U.createElement(Uh.Provider,{children:e,value:S}))}function hM({children:n,location:e}){return WV(L0(n),e)}function L0(n,e=[]){let t=[];return U.Children.forEach(n,(i,s)=>{if(!U.isValidElement(i))return;let o=[...e,s];if(i.type===U.Fragment){t.push.apply(t,L0(i.props.children,o));return}St(i.type===io,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=L0(i.props.children,o)),t.push(u)}),t}var Zf="get",Jf="application/x-www-form-urlencoded";function ap(n){return n!=null&&typeof n.tagName=="string"}function dM(n){return ap(n)&&n.tagName.toLowerCase()==="button"}function fM(n){return ap(n)&&n.tagName.toLowerCase()==="form"}function mM(n){return ap(n)&&n.tagName.toLowerCase()==="input"}function pM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function gM(n,e){return n.button===0&&(!e||e==="_self")&&!pM(n)}var Lf=null;function yM(){if(Lf===null)try{new FormData(document.createElement("form"),0),Lf=!1}catch{Lf=!0}return Lf}var vM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function e0(n){return n!=null&&!vM.has(n)?(Ei(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jf}"`),null):n}function _M(n,e){let t,i,s,o,u;if(fM(n)){let h=n.getAttribute("action");i=h?Wr(h,e):null,t=n.getAttribute("method")||Zf,s=e0(n.getAttribute("enctype"))||Jf,o=new FormData(n)}else if(dM(n)||mM(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(i=d?Wr(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Zf,s=e0(n.getAttribute("formenctype"))||e0(h.getAttribute("enctype"))||Jf,o=new FormData(h,n),!yM()){let{name:f,type:g,value:v}=n;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,v)}}else{if(ap(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zf,i=null,s=Jf,u=n}return o&&s==="text/plain"&&(u=o,o=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bM(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Wr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function TM(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function EM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function wM(n,e,t){let i=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let u=await TM(o,t);return u.links?u.links():[]}return[]}));return IM(i.flat(1).filter(EM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Dw(n,e,t,i,s,o){let u=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,h=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>u(d,f)||h(d,f)):o==="data"?e.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(u(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function SM(n,e,{includeHydrateFallback:t}={}){return xM(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function xM(n){return[...new Set(n)]}function AM(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function IM(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let o=JSON.stringify(AM(s));return t.has(o)||(t.add(o),i.push({key:o,link:s})),i},[])}function uI(){let n=U.useContext(bu);return Xv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function RM(){let n=U.useContext(sp);return Xv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Wv=U.createContext(void 0);Wv.displayName="FrameworkContext";function cI(){let n=U.useContext(Wv);return Xv(n,"You must render this element inside a <HydratedRouter> element"),n}function CM(n,e){let t=U.useContext(Wv),[i,s]=U.useState(!1),[o,u]=U.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=e,_=U.useRef(null);U.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let k=j=>{j.forEach(M=>{u(M.isIntersecting)})},V=new IntersectionObserver(k,{threshold:.5});return _.current&&V.observe(_.current),()=>{V.disconnect()}}},[n]),U.useEffect(()=>{if(i){let k=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(k)}}},[i]);let S=()=>{s(!0)},R=()=>{s(!1),u(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:zc(h,S),onBlur:zc(d,R),onMouseEnter:zc(f,S),onMouseLeave:zc(g,R),onTouchStart:zc(v,S)}]:[!1,_,{}]}function zc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function DM({page:n,...e}){let{router:t}=uI(),i=U.useMemo(()=>ZA(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?U.createElement(kM,{page:n,matches:i,...e}):null}function NM(n){let{manifest:e,routeModules:t}=cI(),[i,s]=U.useState([]);return U.useEffect(()=>{let o=!1;return wM(n,e,t).then(u=>{o||s(u)}),()=>{o=!0}},[n,e,t]),i}function kM({page:n,matches:e,...t}){let i=ga(),{manifest:s,routeModules:o}=cI(),{basename:u}=uI(),{loaderData:h,matches:d}=RM(),f=U.useMemo(()=>Dw(n,e,d,s,i,"data"),[n,e,d,s,i]),g=U.useMemo(()=>Dw(n,e,d,s,i,"assets"),[n,e,d,s,i]),v=U.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let R=new Set,k=!1;if(e.forEach(j=>{let M=s.routes[j.route.id];!M||!M.hasLoader||(!f.some(L=>L.route.id===j.route.id)&&j.route.id in h&&o[j.route.id]?.shouldRevalidate||M.hasClientLoader?k=!0:R.add(j.route.id))}),R.size===0)return[];let V=bM(n,u,"data");return k&&R.size>0&&V.searchParams.set("_routes",e.filter(j=>R.has(j.route.id)).map(j=>j.route.id).join(",")),[V.pathname+V.search]},[u,h,i,s,f,e,n,o]),_=U.useMemo(()=>SM(g,s),[g,s]),S=NM(g);return U.createElement(U.Fragment,null,v.map(R=>U.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),_.map(R=>U.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),S.map(({key:R,link:k})=>U.createElement("link",{key:R,nonce:t.nonce,...k})))}function VM(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var hI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hI&&(window.__reactRouterVersion="7.9.6")}catch{}function MM({basename:n,children:e,window:t}){let i=U.useRef();i.current==null&&(i.current=bV({window:t,v5Compat:!0}));let s=i.current,[o,u]=U.useState({action:s.action,location:s.location}),h=U.useCallback(d=>{U.startTransition(()=>u(d))},[u]);return U.useLayoutEffect(()=>s.listen(h),[s,h]),U.createElement(cM,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var dI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fI=U.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:o,replace:u,state:h,target:d,to:f,preventScrollReset:g,viewTransition:v,..._},S){let{basename:R}=U.useContext(Er),k=typeof f=="string"&&dI.test(f),V,j=!1;if(typeof f=="string"&&k&&(V=f,hI))try{let N=new URL(window.location.href),P=f.startsWith("//")?new URL(N.protocol+f):new URL(f),D=Wr(P.pathname,R);P.origin===N.origin&&D!=null?f=D+P.search+P.hash:j=!0}catch{Ei(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=QV(f,{relative:s}),[L,J,ie]=CM(i,_),ne=jM(f,{replace:u,state:h,target:d,preventScrollReset:g,relative:s,viewTransition:v});function C(N){e&&e(N),N.defaultPrevented||ne(N)}let A=U.createElement("a",{..._,...ie,href:V||M,onClick:j||o?e:C,ref:VM(S,J),target:d,"data-discover":!k&&t==="render"?"true":void 0});return L&&!k?U.createElement(U.Fragment,null,A,U.createElement(DM,{page:M})):A});fI.displayName="Link";var PM=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:o,to:u,viewTransition:h,children:d,...f},g){let v=Fh(u,{relative:f.relative}),_=ga(),S=U.useContext(sp),{navigator:R,basename:k}=U.useContext(Er),V=S!=null&&qM(v)&&h===!0,j=R.encodeLocation?R.encodeLocation(v).pathname:v.pathname,M=_.pathname,L=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(M=M.toLowerCase(),L=L?L.toLowerCase():null,j=j.toLowerCase()),L&&k&&(L=Wr(L,k)||L);const J=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let ie=M===j||!s&&M.startsWith(j)&&M.charAt(J)==="/",ne=L!=null&&(L===j||!s&&L.startsWith(j)&&L.charAt(j.length)==="/"),C={isActive:ie,isPending:ne,isTransitioning:V},A=ie?e:void 0,N;typeof i=="function"?N=i(C):N=[i,ie?"active":null,ne?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(C):o;return U.createElement(fI,{...f,"aria-current":A,className:N,ref:g,style:P,to:u,viewTransition:h},typeof d=="function"?d(C):d)});PM.displayName="NavLink";var OM=U.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:o,method:u=Zf,action:h,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:v,..._},S)=>{let R=BM(),k=FM(h,{relative:f}),V=u.toLowerCase()==="get"?"get":"post",j=typeof h=="string"&&dI.test(h),M=L=>{if(d&&d(L),L.defaultPrevented)return;L.preventDefault();let J=L.nativeEvent.submitter,ie=J?.getAttribute("formmethod")||u;R(J||L.currentTarget,{fetcherKey:e,method:ie,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:v})};return U.createElement("form",{ref:S,method:V,action:k,onSubmit:i?d:M,..._,"data-discover":!j&&n==="render"?"true":void 0})});OM.displayName="Form";function LM(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mI(n){let e=U.useContext(bu);return St(e,LM(n)),e}function jM(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:u}={}){let h=Po(),d=ga(),f=Fh(n,{relative:o});return U.useCallback(g=>{if(gM(g,e)){g.preventDefault();let v=t!==void 0?t:ph(d)===ph(f);h(n,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:u})}},[d,h,f,t,i,e,n,s,o,u])}var zM=0,UM=()=>`__${String(++zM)}__`;function BM(){let{router:n}=mI("useSubmit"),{basename:e}=U.useContext(Er),t=aM();return U.useCallback(async(i,s={})=>{let{action:o,method:u,encType:h,formData:d,body:f}=_M(i,e);if(s.navigate===!1){let g=s.fetcherKey||UM();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||u,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||u,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function FM(n,{relative:e}={}){let{basename:t}=U.useContext(Er),i=U.useContext(wr);St(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...Fh(n||".",{relative:e})},u=ga();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let g=h.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Yr([t,o.pathname])),ph(o)}function qM(n,{relative:e}={}){let t=U.useContext(rI);St(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=mI("useViewTransitionState"),s=Fh(n,{relative:e});if(!t.isTransitioning)return!1;let o=Wr(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Wr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Em(s.pathname,u)!=null||Em(s.pathname,o)!=null}const HM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),Nw=n=>{const e=GM(n);return e.charAt(0).toUpperCase()+e.slice(1)},pI=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),KM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var $M={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const QM=U.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:u,...h},d)=>U.createElement("svg",{ref:d,...$M,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:pI("lucide",s),...!o&&!KM(h)&&{"aria-hidden":"true"},...h},[...u.map(([f,g])=>U.createElement(f,g)),...Array.isArray(o)?o:[o]]));const ft=(n,e)=>{const t=U.forwardRef(({className:i,...s},o)=>U.createElement(QM,{ref:o,iconNode:e,className:pI(`lucide-${HM(Nw(n))}`,`lucide-${n}`,i),...s}));return t.displayName=Nw(n),t};const YM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gI=ft("arrow-left",YM);const XM=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],WM=ft("arrow-right-left",XM);const ZM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Kc=ft("chevron-right",ZM);const JM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],e4=ft("circle-arrow-down",JM);const t4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],n4=ft("circle-arrow-up",t4);const i4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],r4=ft("circle-check-big",i4);const s4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],kw=ft("circle-check",s4);const a4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],o4=ft("circle-plus",a4);const l4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vw=ft("circle",l4);const u4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wm=ft("download",u4);const c4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],h4=ft("file-text",c4);const d4=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],f4=ft("folder-plus",d4);const m4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],p4=ft("funnel",m4);const g4=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],y4=ft("git-branch",g4);const v4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],_4=ft("list",v4);const b4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Mw=ft("refresh-cw",b4);const T4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],E4=ft("save",T4);const w4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],S4=ft("search",w4);const x4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],A4=ft("settings",x4);const I4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sm=ft("trash-2",I4);const R4=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yI=ft("trash",R4);const C4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],D4=ft("undo-2",C4);const N4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],k4=ft("upload",N4);const V4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],M4=ft("wallet",V4);const P4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],O4=ft("wifi-off",P4);const L4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],j4=ft("wifi",L4);const z4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zv=ft("x",z4),Pw=n=>{let e;const t=new Set,i=(f,g)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(S=>S(e,_))}},s=()=>e,h={setState:i,getState:s,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=n(i,s,h);return h},U4=(n=>n?Pw(n):Pw),B4=n=>n;function F4(n,e=B4){const t=Of.useSyncExternalStore(n.subscribe,Of.useCallback(()=>e(n.getState()),[n,e]),Of.useCallback(()=>e(n.getInitialState()),[n,e]));return Of.useDebugValue(t),t}const Ow=n=>{const e=U4(n),t=i=>F4(e,i);return Object.assign(t,e),t},vI=(n=>n?Ow(n):Ow);var zl=9e15,ya=1e9,j0="0123456789abcdef",xm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Am="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",z0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-zl,maxE:zl,crypto:!1},_I,Gr,Ve=!0,op="[DecimalError] ",oa=op+"Invalid argument: ",bI=op+"Precision limit exceeded",TI=op+"crypto unavailable",EI="[object Decimal]",Sn=Math.floor,Jt=Math.pow,q4=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,H4=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,G4=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,wI=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ji=1e7,Ie=7,K4=9007199254740991,$4=xm.length-1,U0=Am.length-1,le={toStringTag:EI};le.absoluteValue=le.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),we(n)};le.ceil=function(){return we(new this.constructor(this),this.e+1,2)};le.clampedTo=le.clamp=function(n,e){var t,i=this,s=i.constructor;if(n=new s(n),e=new s(e),!n.s||!e.s)return new s(NaN);if(n.gt(e))throw Error(oa+e);return t=i.cmp(n),t<0?n:i.cmp(e)>0?e:new s(i)};le.comparedTo=le.cmp=function(n){var e,t,i,s,o=this,u=o.d,h=(n=new o.constructor(n)).d,d=o.s,f=n.s;if(!u||!h)return!d||!f?NaN:d!==f?d:u===h?0:!u^d<0?1:-1;if(!u[0]||!h[0])return u[0]?d:h[0]?-f:0;if(d!==f)return d;if(o.e!==n.e)return o.e>n.e^d<0?1:-1;for(i=u.length,s=h.length,e=0,t=i<s?i:s;e<t;++e)if(u[e]!==h[e])return u[e]>h[e]^d<0?1:-1;return i===s?0:i>s^d<0?1:-1};le.cosine=le.cos=function(){var n,e,t=this,i=t.constructor;return t.d?t.d[0]?(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ie,i.rounding=1,t=Q4(i,RI(i,t)),i.precision=n,i.rounding=e,we(Gr==2||Gr==3?t.neg():t,n,e,!0)):new i(1):new i(NaN)};le.cubeRoot=le.cbrt=function(){var n,e,t,i,s,o,u,h,d,f,g=this,v=g.constructor;if(!g.isFinite()||g.isZero())return new v(g);for(Ve=!1,o=g.s*Jt(g.s*g,1/3),!o||Math.abs(o)==1/0?(t=pn(g.d),n=g.e,(o=(n-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=Jt(t,1/3),n=Sn((n+1)/3)-(n%3==(n<0?-1:2)),o==1/0?t="5e"+n:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),i=new v(t),i.s=g.s):i=new v(o.toString()),u=(n=v.precision)+3;;)if(h=i,d=h.times(h).times(h),f=d.plus(g),i=dt(f.plus(g).times(h),f.plus(d),u+2,1),pn(h.d).slice(0,u)===(t=pn(i.d)).slice(0,u))if(t=t.slice(u-3,u+1),t=="9999"||!s&&t=="4999"){if(!s&&(we(h,n+1,0),h.times(h).times(h).eq(g))){i=h;break}u+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(we(i,n+1,1),e=!i.times(i).times(i).eq(g));break}return Ve=!0,we(i,n,v.rounding,e)};le.decimalPlaces=le.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-Sn(this.e/Ie))*Ie,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};le.dividedBy=le.div=function(n){return dt(this,new this.constructor(n))};le.dividedToIntegerBy=le.divToInt=function(n){var e=this,t=e.constructor;return we(dt(e,new t(n),0,1,1),t.precision,t.rounding)};le.equals=le.eq=function(n){return this.cmp(n)===0};le.floor=function(){return we(new this.constructor(this),this.e+1,3)};le.greaterThan=le.gt=function(n){return this.cmp(n)>0};le.greaterThanOrEqualTo=le.gte=function(n){var e=this.cmp(n);return e==1||e===0};le.hyperbolicCosine=le.cosh=function(){var n,e,t,i,s,o=this,u=o.constructor,h=new u(1);if(!o.isFinite())return new u(o.s?1/0:NaN);if(o.isZero())return h;t=u.precision,i=u.rounding,u.precision=t+Math.max(o.e,o.sd())+4,u.rounding=1,s=o.d.length,s<32?(n=Math.ceil(s/3),e=(1/up(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),o=Wl(u,1,o.times(e),new u(1),!0);for(var d,f=n,g=new u(8);f--;)d=o.times(o),o=h.minus(d.times(g.minus(d.times(g))));return we(o,u.precision=t,u.rounding=i,!0)};le.hyperbolicSine=le.sinh=function(){var n,e,t,i,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<3)s=Wl(o,2,s,s,!0);else{n=1.4*Math.sqrt(i),n=n>16?16:n|0,s=s.times(1/up(5,n)),s=Wl(o,2,s,s,!0);for(var u,h=new o(5),d=new o(16),f=new o(20);n--;)u=s.times(s),s=s.times(h.plus(u.times(d.times(u).plus(f))))}return o.precision=e,o.rounding=t,we(s,e,t,!0)};le.hyperbolicTangent=le.tanh=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+7,i.rounding=1,dt(t.sinh(),t.cosh(),i.precision=n,i.rounding=e)):new i(t.s)};le.inverseCosine=le.acos=function(){var n=this,e=n.constructor,t=n.abs().cmp(1),i=e.precision,s=e.rounding;return t!==-1?t===0?n.isNeg()?hr(e,i,s):new e(0):new e(NaN):n.isZero()?hr(e,i+4,s).times(.5):(e.precision=i+6,e.rounding=1,n=new e(1).minus(n).div(n.plus(1)).sqrt().atan(),e.precision=i,e.rounding=s,n.times(2))};le.inverseHyperbolicCosine=le.acosh=function(){var n,e,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(n=i.precision,e=i.rounding,i.precision=n+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,Ve=!1,t=t.times(t).minus(1).sqrt().plus(t),Ve=!0,i.precision=n,i.rounding=e,t.ln()):new i(t)};le.inverseHyperbolicSine=le.asinh=function(){var n,e,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,Ve=!1,t=t.times(t).plus(1).sqrt().plus(t),Ve=!0,i.precision=n,i.rounding=e,t.ln())};le.inverseHyperbolicTangent=le.atanh=function(){var n,e,t,i,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(n=o.precision,e=o.rounding,i=s.sd(),Math.max(i,n)<2*-s.e-1?we(new o(s),n,e,!0):(o.precision=t=i-s.e,s=dt(s.plus(1),new o(1).minus(s),t+n,1),o.precision=n+4,o.rounding=1,s=s.ln(),o.precision=n,o.rounding=e,s.times(.5))):new o(NaN)};le.inverseSine=le.asin=function(){var n,e,t,i,s=this,o=s.constructor;return s.isZero()?new o(s):(e=s.abs().cmp(1),t=o.precision,i=o.rounding,e!==-1?e===0?(n=hr(o,t+4,i).times(.5),n.s=s.s,n):new o(NaN):(o.precision=t+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=i,s.times(2)))};le.inverseTangent=le.atan=function(){var n,e,t,i,s,o,u,h,d,f=this,g=f.constructor,v=g.precision,_=g.rounding;if(f.isFinite()){if(f.isZero())return new g(f);if(f.abs().eq(1)&&v+4<=U0)return u=hr(g,v+4,_).times(.25),u.s=f.s,u}else{if(!f.s)return new g(NaN);if(v+4<=U0)return u=hr(g,v+4,_).times(.5),u.s=f.s,u}for(g.precision=h=v+10,g.rounding=1,t=Math.min(28,h/Ie+2|0),n=t;n;--n)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Ve=!1,e=Math.ceil(h/Ie),i=1,d=f.times(f),u=new g(f),s=f;n!==-1;)if(s=s.times(d),o=u.minus(s.div(i+=2)),s=s.times(d),u=o.plus(s.div(i+=2)),u.d[e]!==void 0)for(n=e;u.d[n]===o.d[n]&&n--;);return t&&(u=u.times(2<<t-1)),Ve=!0,we(u,g.precision=v,g.rounding=_,!0)};le.isFinite=function(){return!!this.d};le.isInteger=le.isInt=function(){return!!this.d&&Sn(this.e/Ie)>this.d.length-2};le.isNaN=function(){return!this.s};le.isNegative=le.isNeg=function(){return this.s<0};le.isPositive=le.isPos=function(){return this.s>0};le.isZero=function(){return!!this.d&&this.d[0]===0};le.lessThan=le.lt=function(n){return this.cmp(n)<0};le.lessThanOrEqualTo=le.lte=function(n){return this.cmp(n)<1};le.logarithm=le.log=function(n){var e,t,i,s,o,u,h,d,f=this,g=f.constructor,v=g.precision,_=g.rounding,S=5;if(n==null)n=new g(10),e=!0;else{if(n=new g(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new g(NaN);e=n.eq(10)}if(t=f.d,f.s<0||!t||!t[0]||f.eq(1))return new g(t&&!t[0]?-1/0:f.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(s=t[0];s%10===0;)s/=10;o=s!==1}if(Ve=!1,h=v+S,u=Js(f,h),i=e?Im(g,h+10):Js(n,h),d=dt(u,i,h,1),gh(d.d,s=v,_))do if(h+=10,u=Js(f,h),i=e?Im(g,h+10):Js(n,h),d=dt(u,i,h,1),!o){+pn(d.d).slice(s+1,s+15)+1==1e14&&(d=we(d,v+1,0));break}while(gh(d.d,s+=10,_));return Ve=!0,we(d,v,_)};le.minus=le.sub=function(n){var e,t,i,s,o,u,h,d,f,g,v,_,S=this,R=S.constructor;if(n=new R(n),!S.d||!n.d)return!S.s||!n.s?n=new R(NaN):S.d?n.s=-n.s:n=new R(n.d||S.s!==n.s?S:NaN),n;if(S.s!=n.s)return n.s=-n.s,S.plus(n);if(f=S.d,_=n.d,h=R.precision,d=R.rounding,!f[0]||!_[0]){if(_[0])n.s=-n.s;else if(f[0])n=new R(S);else return new R(d===3?-0:0);return Ve?we(n,h,d):n}if(t=Sn(n.e/Ie),g=Sn(S.e/Ie),f=f.slice(),o=g-t,o){for(v=o<0,v?(e=f,o=-o,u=_.length):(e=_,t=g,u=f.length),i=Math.max(Math.ceil(h/Ie),u)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,u=_.length,v=i<u,v&&(u=i),i=0;i<u;i++)if(f[i]!=_[i]){v=f[i]<_[i];break}o=0}for(v&&(e=f,f=_,_=e,n.s=-n.s),u=f.length,i=_.length-u;i>0;--i)f[u++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(s=i;s&&f[--s]===0;)f[s]=ji-1;--f[s],f[i]+=ji}f[i]-=_[i]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--t;return f[0]?(n.d=f,n.e=lp(f,t),Ve?we(n,h,d):n):new R(d===3?-0:0)};le.modulo=le.mod=function(n){var e,t=this,i=t.constructor;return n=new i(n),!t.d||!n.s||n.d&&!n.d[0]?new i(NaN):!n.d||t.d&&!t.d[0]?we(new i(t),i.precision,i.rounding):(Ve=!1,i.modulo==9?(e=dt(t,n.abs(),0,3,1),e.s*=n.s):e=dt(t,n,0,i.modulo,1),e=e.times(n),Ve=!0,t.minus(e))};le.naturalExponential=le.exp=function(){return B0(this)};le.naturalLogarithm=le.ln=function(){return Js(this)};le.negated=le.neg=function(){var n=new this.constructor(this);return n.s=-n.s,we(n)};le.plus=le.add=function(n){var e,t,i,s,o,u,h,d,f,g,v=this,_=v.constructor;if(n=new _(n),!v.d||!n.d)return!v.s||!n.s?n=new _(NaN):v.d||(n=new _(n.d||v.s===n.s?v:NaN)),n;if(v.s!=n.s)return n.s=-n.s,v.minus(n);if(f=v.d,g=n.d,h=_.precision,d=_.rounding,!f[0]||!g[0])return g[0]||(n=new _(v)),Ve?we(n,h,d):n;if(o=Sn(v.e/Ie),i=Sn(n.e/Ie),f=f.slice(),s=o-i,s){for(s<0?(t=f,s=-s,u=g.length):(t=g,i=o,u=f.length),o=Math.ceil(h/Ie),u=o>u?o+1:u+1,s>u&&(s=u,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(u=f.length,s=g.length,u-s<0&&(s=u,t=g,g=f,f=t),e=0;s;)e=(f[--s]=f[s]+g[s]+e)/ji|0,f[s]%=ji;for(e&&(f.unshift(e),++i),u=f.length;f[--u]==0;)f.pop();return n.d=f,n.e=lp(f,i),Ve?we(n,h,d):n};le.precision=le.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(oa+n);return t.d?(e=SI(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};le.round=function(){var n=this,e=n.constructor;return we(new e(n),n.e+1,e.rounding)};le.sine=le.sin=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ie,i.rounding=1,t=X4(i,RI(i,t)),i.precision=n,i.rounding=e,we(Gr>2?t.neg():t,n,e,!0)):new i(NaN)};le.squareRoot=le.sqrt=function(){var n,e,t,i,s,o,u=this,h=u.d,d=u.e,f=u.s,g=u.constructor;if(f!==1||!h||!h[0])return new g(!f||f<0&&(!h||h[0])?NaN:h?u:1/0);for(Ve=!1,f=Math.sqrt(+u),f==0||f==1/0?(e=pn(h),(e.length+d)%2==0&&(e+="0"),f=Math.sqrt(e),d=Sn((d+1)/2)-(d<0||d%2),f==1/0?e="5e"+d:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+d),i=new g(e)):i=new g(f.toString()),t=(d=g.precision)+3;;)if(o=i,i=o.plus(dt(u,o,t+2,1)).times(.5),pn(o.d).slice(0,t)===(e=pn(i.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!s&&e=="4999"){if(!s&&(we(o,d+1,0),o.times(o).eq(u))){i=o;break}t+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(we(i,d+1,1),n=!i.times(i).eq(u));break}return Ve=!0,we(i,d,g.rounding,n)};le.tangent=le.tan=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+10,i.rounding=1,t=t.sin(),t.s=1,t=dt(t,new i(1).minus(t.times(t)).sqrt(),n+10,0),i.precision=n,i.rounding=e,we(Gr==2||Gr==4?t.neg():t,n,e,!0)):new i(NaN)};le.times=le.mul=function(n){var e,t,i,s,o,u,h,d,f,g=this,v=g.constructor,_=g.d,S=(n=new v(n)).d;if(n.s*=g.s,!_||!_[0]||!S||!S[0])return new v(!n.s||_&&!_[0]&&!S||S&&!S[0]&&!_?NaN:!_||!S?n.s/0:n.s*0);for(t=Sn(g.e/Ie)+Sn(n.e/Ie),d=_.length,f=S.length,d<f&&(o=_,_=S,S=o,u=d,d=f,f=u),o=[],u=d+f,i=u;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,s=d+i;s>i;)h=o[s]+S[i]*_[s-i-1]+e,o[s--]=h%ji|0,e=h/ji|0;o[s]=(o[s]+e)%ji|0}for(;!o[--u];)o.pop();return e?++t:o.shift(),n.d=o,n.e=lp(o,t),Ve?we(n,v.precision,v.rounding):n};le.toBinary=function(n,e){return Jv(this,2,n,e)};le.toDecimalPlaces=le.toDP=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(qn(n,0,ya),e===void 0?e=i.rounding:qn(e,0,8),we(t,n+t.e+1,e))};le.toExponential=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=br(i,!0):(qn(n,0,ya),e===void 0?e=s.rounding:qn(e,0,8),i=we(new s(i),n+1,e),t=br(i,!0,n+1)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toFixed=function(n,e){var t,i,s=this,o=s.constructor;return n===void 0?t=br(s):(qn(n,0,ya),e===void 0?e=o.rounding:qn(e,0,8),i=we(new o(s),n+s.e+1,e),t=br(i,!1,n+i.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t};le.toFraction=function(n){var e,t,i,s,o,u,h,d,f,g,v,_,S=this,R=S.d,k=S.constructor;if(!R)return new k(S);if(f=t=new k(1),i=d=new k(0),e=new k(i),o=e.e=SI(R)-S.e-1,u=o%Ie,e.d[0]=Jt(10,u<0?Ie+u:u),n==null)n=o>0?e:f;else{if(h=new k(n),!h.isInt()||h.lt(f))throw Error(oa+h);n=h.gt(e)?o>0?e:f:h}for(Ve=!1,h=new k(pn(R)),g=k.precision,k.precision=o=R.length*Ie*2;v=dt(h,e,0,1,1),s=t.plus(v.times(i)),s.cmp(n)!=1;)t=i,i=s,s=f,f=d.plus(v.times(s)),d=s,s=e,e=h.minus(v.times(s)),h=s;return s=dt(n.minus(t),i,0,1,1),d=d.plus(s.times(f)),t=t.plus(s.times(i)),d.s=f.s=S.s,_=dt(f,i,o,1).minus(S).abs().cmp(dt(d,t,o,1).minus(S).abs())<1?[f,i]:[d,t],k.precision=g,Ve=!0,_};le.toHexadecimal=le.toHex=function(n,e){return Jv(this,16,n,e)};le.toNearest=function(n,e){var t=this,i=t.constructor;if(t=new i(t),n==null){if(!t.d)return t;n=new i(1),e=i.rounding}else{if(n=new i(n),e===void 0?e=i.rounding:qn(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Ve=!1,t=dt(t,n,0,e,1).times(n),Ve=!0,we(t)):(n.s=t.s,t=n),t};le.toNumber=function(){return+this};le.toOctal=function(n,e){return Jv(this,8,n,e)};le.toPower=le.pow=function(n){var e,t,i,s,o,u,h=this,d=h.constructor,f=+(n=new d(n));if(!h.d||!n.d||!h.d[0]||!n.d[0])return new d(Jt(+h,f));if(h=new d(h),h.eq(1))return h;if(i=d.precision,o=d.rounding,n.eq(1))return we(h,i,o);if(e=Sn(n.e/Ie),e>=n.d.length-1&&(t=f<0?-f:f)<=K4)return s=xI(d,h,t,i),n.s<0?new d(1).div(s):we(s,i,o);if(u=h.s,u<0){if(e<n.d.length-1)return new d(NaN);if((n.d[e]&1)==0&&(u=1),h.e==0&&h.d[0]==1&&h.d.length==1)return h.s=u,h}return t=Jt(+h,f),e=t==0||!isFinite(t)?Sn(f*(Math.log("0."+pn(h.d))/Math.LN10+h.e+1)):new d(t+"").e,e>d.maxE+1||e<d.minE-1?new d(e>0?u/0:0):(Ve=!1,d.rounding=h.s=1,t=Math.min(12,(e+"").length),s=B0(n.times(Js(h,i+t)),i),s.d&&(s=we(s,i+5,1),gh(s.d,i,o)&&(e=i+10,s=we(B0(n.times(Js(h,e+t)),e),e+5,1),+pn(s.d).slice(i+1,i+15)+1==1e14&&(s=we(s,i+1,0)))),s.s=u,Ve=!0,d.rounding=o,we(s,i,o))};le.toPrecision=function(n,e){var t,i=this,s=i.constructor;return n===void 0?t=br(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(qn(n,1,ya),e===void 0?e=s.rounding:qn(e,0,8),i=we(new s(i),n,e),t=br(i,n<=i.e||i.e<=s.toExpNeg,n)),i.isNeg()&&!i.isZero()?"-"+t:t};le.toSignificantDigits=le.toSD=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(qn(n,1,ya),e===void 0?e=i.rounding:qn(e,0,8)),we(new i(t),n,e)};le.toString=function(){var n=this,e=n.constructor,t=br(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};le.truncated=le.trunc=function(){return we(new this.constructor(this),this.e+1,1)};le.valueOf=le.toJSON=function(){var n=this,e=n.constructor,t=br(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function pn(n){var e,t,i,s=n.length-1,o="",u=n[0];if(s>0){for(o+=u,e=1;e<s;e++)i=n[e]+"",t=Ie-i.length,t&&(o+=$s(t)),o+=i;u=n[e],i=u+"",t=Ie-i.length,t&&(o+=$s(t))}else if(u===0)return"0";for(;u%10===0;)u/=10;return o+u}function qn(n,e,t){if(n!==~~n||n<e||n>t)throw Error(oa+n)}function gh(n,e,t,i){var s,o,u,h;for(o=n[0];o>=10;o/=10)--e;return--e<0?(e+=Ie,s=0):(s=Math.ceil((e+1)/Ie),e%=Ie),o=Jt(10,Ie-e),h=n[s]%o|0,i==null?e<3?(e==0?h=h/100|0:e==1&&(h=h/10|0),u=t<4&&h==99999||t>3&&h==49999||h==5e4||h==0):u=(t<4&&h+1==o||t>3&&h+1==o/2)&&(n[s+1]/o/100|0)==Jt(10,e-2)-1||(h==o/2||h==0)&&(n[s+1]/o/100|0)==0:e<4?(e==0?h=h/1e3|0:e==1?h=h/100|0:e==2&&(h=h/10|0),u=(i||t<4)&&h==9999||!i&&t>3&&h==4999):u=((i||t<4)&&h+1==o||!i&&t>3&&h+1==o/2)&&(n[s+1]/o/1e3|0)==Jt(10,e-3)-1,u}function em(n,e,t){for(var i,s=[0],o,u=0,h=n.length;u<h;){for(o=s.length;o--;)s[o]*=e;for(s[0]+=j0.indexOf(n.charAt(u++)),i=0;i<s.length;i++)s[i]>t-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/t|0,s[i]%=t)}return s.reverse()}function Q4(n,e){var t,i,s;if(e.isZero())return e;i=e.d.length,i<32?(t=Math.ceil(i/3),s=(1/up(4,t)).toString()):(t=16,s="2.3283064365386962890625e-10"),n.precision+=t,e=Wl(n,1,e.times(s),new n(1));for(var o=t;o--;){var u=e.times(e);e=u.times(u).minus(u).times(8).plus(1)}return n.precision-=t,e}var dt=(function(){function n(i,s,o){var u,h=0,d=i.length;for(i=i.slice();d--;)u=i[d]*s+h,i[d]=u%o|0,h=u/o|0;return h&&i.unshift(h),i}function e(i,s,o,u){var h,d;if(o!=u)d=o>u?1:-1;else for(h=d=0;h<o;h++)if(i[h]!=s[h]){d=i[h]>s[h]?1:-1;break}return d}function t(i,s,o,u){for(var h=0;o--;)i[o]-=h,h=i[o]<s[o]?1:0,i[o]=h*u+i[o]-s[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,o,u,h,d){var f,g,v,_,S,R,k,V,j,M,L,J,ie,ne,C,A,N,P,D,B,O=i.constructor,Ee=i.s==s.s?1:-1,fe=i.d,H=s.d;if(!fe||!fe[0]||!H||!H[0])return new O(!i.s||!s.s||(fe?H&&fe[0]==H[0]:!H)?NaN:fe&&fe[0]==0||!H?Ee*0:Ee/0);for(d?(S=1,g=i.e-s.e):(d=ji,S=Ie,g=Sn(i.e/S)-Sn(s.e/S)),D=H.length,N=fe.length,j=new O(Ee),M=j.d=[],v=0;H[v]==(fe[v]||0);v++);if(H[v]>(fe[v]||0)&&g--,o==null?(ne=o=O.precision,u=O.rounding):h?ne=o+(i.e-s.e)+1:ne=o,ne<0)M.push(1),R=!0;else{if(ne=ne/S+2|0,v=0,D==1){for(_=0,H=H[0],ne++;(v<N||_)&&ne--;v++)C=_*d+(fe[v]||0),M[v]=C/H|0,_=C%H|0;R=_||v<N}else{for(_=d/(H[0]+1)|0,_>1&&(H=n(H,_,d),fe=n(fe,_,d),D=H.length,N=fe.length),A=D,L=fe.slice(0,D),J=L.length;J<D;)L[J++]=0;B=H.slice(),B.unshift(0),P=H[0],H[1]>=d/2&&++P;do _=0,f=e(H,L,D,J),f<0?(ie=L[0],D!=J&&(ie=ie*d+(L[1]||0)),_=ie/P|0,_>1?(_>=d&&(_=d-1),k=n(H,_,d),V=k.length,J=L.length,f=e(k,L,V,J),f==1&&(_--,t(k,D<V?B:H,V,d))):(_==0&&(f=_=1),k=H.slice()),V=k.length,V<J&&k.unshift(0),t(L,k,J,d),f==-1&&(J=L.length,f=e(H,L,D,J),f<1&&(_++,t(L,D<J?B:H,J,d))),J=L.length):f===0&&(_++,L=[0]),M[v++]=_,f&&L[0]?L[J++]=fe[A]||0:(L=[fe[A]],J=1);while((A++<N||L[0]!==void 0)&&ne--);R=L[0]!==void 0}M[0]||M.shift()}if(S==1)j.e=g,_I=R;else{for(v=1,_=M[0];_>=10;_/=10)v++;j.e=v+g*S-1,we(j,h?o+j.e+1:o,u,R)}return j}})();function we(n,e,t,i){var s,o,u,h,d,f,g,v,_,S=n.constructor;e:if(e!=null){if(v=n.d,!v)return n;for(s=1,h=v[0];h>=10;h/=10)s++;if(o=e-s,o<0)o+=Ie,u=e,g=v[_=0],d=g/Jt(10,s-u-1)%10|0;else if(_=Math.ceil((o+1)/Ie),h=v.length,_>=h)if(i){for(;h++<=_;)v.push(0);g=d=0,s=1,o%=Ie,u=o-Ie+1}else break e;else{for(g=h=v[_],s=1;h>=10;h/=10)s++;o%=Ie,u=o-Ie+s,d=u<0?0:g/Jt(10,s-u-1)%10|0}if(i=i||e<0||v[_+1]!==void 0||(u<0?g:g%Jt(10,s-u-1)),f=t<4?(d||i)&&(t==0||t==(n.s<0?3:2)):d>5||d==5&&(t==4||i||t==6&&(o>0?u>0?g/Jt(10,s-u):0:v[_-1])%10&1||t==(n.s<0?8:7)),e<1||!v[0])return v.length=0,f?(e-=n.e+1,v[0]=Jt(10,(Ie-e%Ie)%Ie),n.e=-e||0):v[0]=n.e=0,n;if(o==0?(v.length=_,h=1,_--):(v.length=_+1,h=Jt(10,Ie-o),v[_]=u>0?(g/Jt(10,s-u)%Jt(10,u)|0)*h:0),f)for(;;)if(_==0){for(o=1,u=v[0];u>=10;u/=10)o++;for(u=v[0]+=h,h=1;u>=10;u/=10)h++;o!=h&&(n.e++,v[0]==ji&&(v[0]=1));break}else{if(v[_]+=h,v[_]!=ji)break;v[_--]=0,h=1}for(o=v.length;v[--o]===0;)v.pop()}return Ve&&(n.e>S.maxE?(n.d=null,n.e=NaN):n.e<S.minE&&(n.e=0,n.d=[0])),n}function br(n,e,t){if(!n.isFinite())return II(n);var i,s=n.e,o=pn(n.d),u=o.length;return e?(t&&(i=t-u)>0?o=o.charAt(0)+"."+o.slice(1)+$s(i):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n.e<0?"e":"e+")+n.e):s<0?(o="0."+$s(-s-1)+o,t&&(i=t-u)>0&&(o+=$s(i))):s>=u?(o+=$s(s+1-u),t&&(i=t-s-1)>0&&(o=o+"."+$s(i))):((i=s+1)<u&&(o=o.slice(0,i)+"."+o.slice(i)),t&&(i=t-u)>0&&(s+1===u&&(o+="."),o+=$s(i))),o}function lp(n,e){var t=n[0];for(e*=Ie;t>=10;t/=10)e++;return e}function Im(n,e,t){if(e>$4)throw Ve=!0,t&&(n.precision=t),Error(bI);return we(new n(xm),e,1,!0)}function hr(n,e,t){if(e>U0)throw Error(bI);return we(new n(Am),e,t,!0)}function SI(n){var e=n.length-1,t=e*Ie+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function $s(n){for(var e="";n--;)e+="0";return e}function xI(n,e,t,i){var s,o=new n(1),u=Math.ceil(i/Ie+4);for(Ve=!1;;){if(t%2&&(o=o.times(e),jw(o.d,u)&&(s=!0)),t=Sn(t/2),t===0){t=o.d.length-1,s&&o.d[t]===0&&++o.d[t];break}e=e.times(e),jw(e.d,u)}return Ve=!0,o}function Lw(n){return n.d[n.d.length-1]&1}function AI(n,e,t){for(var i,s,o=new n(e[0]),u=0;++u<e.length;){if(s=new n(e[u]),!s.s){o=s;break}i=o.cmp(s),(i===t||i===0&&o.s===t)&&(o=s)}return o}function B0(n,e){var t,i,s,o,u,h,d,f=0,g=0,v=0,_=n.constructor,S=_.rounding,R=_.precision;if(!n.d||!n.d[0]||n.e>17)return new _(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Ve=!1,d=R):d=e,h=new _(.03125);n.e>-2;)n=n.times(h),v+=5;for(i=Math.log(Jt(2,v))/Math.LN10*2+5|0,d+=i,t=o=u=new _(1),_.precision=d;;){if(o=we(o.times(n),d,1),t=t.times(++g),h=u.plus(dt(o,t,d,1)),pn(h.d).slice(0,d)===pn(u.d).slice(0,d)){for(s=v;s--;)u=we(u.times(u),d,1);if(e==null)if(f<3&&gh(u.d,d-i,S,f))_.precision=d+=10,t=o=h=new _(1),g=0,f++;else return we(u,_.precision=R,S,Ve=!0);else return _.precision=R,u}u=h}}function Js(n,e){var t,i,s,o,u,h,d,f,g,v,_,S=1,R=10,k=n,V=k.d,j=k.constructor,M=j.rounding,L=j.precision;if(k.s<0||!V||!V[0]||!k.e&&V[0]==1&&V.length==1)return new j(V&&!V[0]?-1/0:k.s!=1?NaN:V?0:k);if(e==null?(Ve=!1,g=L):g=e,j.precision=g+=R,t=pn(V),i=t.charAt(0),Math.abs(o=k.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)k=k.times(n),t=pn(k.d),i=t.charAt(0),S++;o=k.e,i>1?(k=new j("0."+t),o++):k=new j(i+"."+t.slice(1))}else return f=Im(j,g+2,L).times(o+""),k=Js(new j(i+"."+t.slice(1)),g-R).plus(f),j.precision=L,e==null?we(k,L,M,Ve=!0):k;for(v=k,d=u=k=dt(k.minus(1),k.plus(1),g,1),_=we(k.times(k),g,1),s=3;;){if(u=we(u.times(_),g,1),f=d.plus(dt(u,new j(s),g,1)),pn(f.d).slice(0,g)===pn(d.d).slice(0,g))if(d=d.times(2),o!==0&&(d=d.plus(Im(j,g+2,L).times(o+""))),d=dt(d,new j(S),g,1),e==null)if(gh(d.d,g-R,M,h))j.precision=g+=R,f=u=k=dt(v.minus(1),v.plus(1),g,1),_=we(k.times(k),g,1),s=h=1;else return we(d,j.precision=L,M,Ve=!0);else return j.precision=L,d;d=f,s+=2}}function II(n){return String(n.s*n.s/0)}function tm(n,e){var t,i,s;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,n.e=t=t-i-1,n.d=[],i=(t+1)%Ie,t<0&&(i+=Ie),i<s){for(i&&n.d.push(+e.slice(0,i)),s-=Ie;i<s;)n.d.push(+e.slice(i,i+=Ie));e=e.slice(i),i=Ie-e.length}else i-=s;for(;i--;)e+="0";n.d.push(+e),Ve&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function Y4(n,e){var t,i,s,o,u,h,d,f,g;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),wI.test(e))return tm(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(H4.test(e))t=16,e=e.toLowerCase();else if(q4.test(e))t=2;else if(G4.test(e))t=8;else throw Error(oa+e);for(o=e.search(/p/i),o>0?(d=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),u=o>=0,i=n.constructor,u&&(e=e.replace(".",""),h=e.length,o=h-o,s=xI(i,new i(t),o,o*2)),f=em(e,t,ji),g=f.length-1,o=g;f[o]===0;--o)f.pop();return o<0?new i(n.s*0):(n.e=lp(f,g),n.d=f,Ve=!1,u&&(n=dt(n,s,h*4)),d&&(n=n.times(Math.abs(d)<54?Jt(2,d):Hr.pow(2,d))),Ve=!0,n)}function X4(n,e){var t,i=e.d.length;if(i<3)return e.isZero()?e:Wl(n,2,e,e);t=1.4*Math.sqrt(i),t=t>16?16:t|0,e=e.times(1/up(5,t)),e=Wl(n,2,e,e);for(var s,o=new n(5),u=new n(16),h=new n(20);t--;)s=e.times(e),e=e.times(o.plus(s.times(u.times(s).minus(h))));return e}function Wl(n,e,t,i,s){var o,u,h,d,f=n.precision,g=Math.ceil(f/Ie);for(Ve=!1,d=t.times(t),h=new n(i);;){if(u=dt(h.times(d),new n(e++*e++),f,1),h=s?i.plus(u):i.minus(u),i=dt(u.times(d),new n(e++*e++),f,1),u=h.plus(i),u.d[g]!==void 0){for(o=g;u.d[o]===h.d[o]&&o--;);if(o==-1)break}o=h,h=i,i=u,u=o}return Ve=!0,u.d.length=g+1,u}function up(n,e){for(var t=n;--e;)t*=n;return t}function RI(n,e){var t,i=e.s<0,s=hr(n,n.precision,1),o=s.times(.5);if(e=e.abs(),e.lte(o))return Gr=i?4:1,e;if(t=e.divToInt(s),t.isZero())Gr=i?3:2;else{if(e=e.minus(t.times(s)),e.lte(o))return Gr=Lw(t)?i?2:3:i?4:1,e;Gr=Lw(t)?i?1:4:i?3:2}return e.minus(s).abs()}function Jv(n,e,t,i){var s,o,u,h,d,f,g,v,_,S=n.constructor,R=t!==void 0;if(R?(qn(t,1,ya),i===void 0?i=S.rounding:qn(i,0,8)):(t=S.precision,i=S.rounding),!n.isFinite())g=II(n);else{for(g=br(n),u=g.indexOf("."),R?(s=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):s=e,u>=0&&(g=g.replace(".",""),_=new S(1),_.e=g.length-u,_.d=em(br(_),10,s),_.e=_.d.length),v=em(g,10,s),o=d=v.length;v[--d]==0;)v.pop();if(!v[0])g=R?"0p+0":"0";else{if(u<0?o--:(n=new S(n),n.d=v,n.e=o,n=dt(n,_,t,i,0,s),v=n.d,o=n.e,f=_I),u=v[t],h=s/2,f=f||v[t+1]!==void 0,f=i<4?(u!==void 0||f)&&(i===0||i===(n.s<0?3:2)):u>h||u===h&&(i===4||f||i===6&&v[t-1]&1||i===(n.s<0?8:7)),v.length=t,f)for(;++v[--t]>s-1;)v[t]=0,t||(++o,v.unshift(1));for(d=v.length;!v[d-1];--d);for(u=0,g="";u<d;u++)g+=j0.charAt(v[u]);if(R){if(d>1)if(e==16||e==8){for(u=e==16?4:3,--d;d%u;d++)g+="0";for(v=em(g,s,e),d=v.length;!v[d-1];--d);for(u=1,g="1.";u<d;u++)g+=j0.charAt(v[u])}else g=g.charAt(0)+"."+g.slice(1);g=g+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)g="0"+g;g="0."+g}else if(++o>d)for(o-=d;o--;)g+="0";else o<d&&(g=g.slice(0,o)+"."+g.slice(o))}g=(e==16?"0x":e==2?"0b":e==8?"0o":"")+g}return n.s<0?"-"+g:g}function jw(n,e){if(n.length>e)return n.length=e,!0}function W4(n){return new this(n).abs()}function Z4(n){return new this(n).acos()}function J4(n){return new this(n).acosh()}function eP(n,e){return new this(n).plus(e)}function tP(n){return new this(n).asin()}function nP(n){return new this(n).asinh()}function iP(n){return new this(n).atan()}function rP(n){return new this(n).atanh()}function sP(n,e){n=new this(n),e=new this(e);var t,i=this.precision,s=this.rounding,o=i+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=hr(this,o,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?hr(this,i,s):new this(0),t.s=n.s):!n.d||e.isZero()?(t=hr(this,o,1).times(.5),t.s=n.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(dt(n,e,o,1)),e=hr(this,o,1),this.precision=i,this.rounding=s,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(dt(n,e,o,1)),t}function aP(n){return new this(n).cbrt()}function oP(n){return we(n=new this(n),n.e+1,2)}function lP(n,e,t){return new this(n).clamp(e,t)}function uP(n){if(!n||typeof n!="object")throw Error(op+"Object expected");var e,t,i,s=n.defaults===!0,o=["precision",1,ya,"rounding",0,8,"toExpNeg",-zl,0,"toExpPos",0,zl,"maxE",0,zl,"minE",-zl,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],s&&(this[t]=z0[t]),(i=n[t])!==void 0)if(Sn(i)===i&&i>=o[e+1]&&i<=o[e+2])this[t]=i;else throw Error(oa+t+": "+i);if(t="crypto",s&&(this[t]=z0[t]),(i=n[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(TI);else this[t]=!1;else throw Error(oa+t+": "+i);return this}function cP(n){return new this(n).cos()}function hP(n){return new this(n).cosh()}function CI(n){var e,t,i;function s(o){var u,h,d,f=this;if(!(f instanceof s))return new s(o);if(f.constructor=s,zw(o)){f.s=o.s,Ve?!o.d||o.e>s.maxE?(f.e=NaN,f.d=null):o.e<s.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(d=typeof o,d==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(u=0,h=o;h>=10;h/=10)u++;Ve?u>s.maxE?(f.e=NaN,f.d=null):u<s.minE?(f.e=0,f.d=[0]):(f.e=u,f.d=[o]):(f.e=u,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return tm(f,o.toString())}if(d==="string")return(h=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(h===43&&(o=o.slice(1)),f.s=1),wI.test(o)?tm(f,o):Y4(f,o);if(d==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,tm(f,o.toString());throw Error(oa+o)}if(s.prototype=le,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=uP,s.clone=CI,s.isDecimal=zw,s.abs=W4,s.acos=Z4,s.acosh=J4,s.add=eP,s.asin=tP,s.asinh=nP,s.atan=iP,s.atanh=rP,s.atan2=sP,s.cbrt=aP,s.ceil=oP,s.clamp=lP,s.cos=cP,s.cosh=hP,s.div=dP,s.exp=fP,s.floor=mP,s.hypot=pP,s.ln=gP,s.log=yP,s.log10=_P,s.log2=vP,s.max=bP,s.min=TP,s.mod=EP,s.mul=wP,s.pow=SP,s.random=xP,s.round=AP,s.sign=IP,s.sin=RP,s.sinh=CP,s.sqrt=DP,s.sub=NP,s.sum=kP,s.tan=VP,s.tanh=MP,s.trunc=PP,n===void 0&&(n={}),n&&n.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return s.config(n),s}function dP(n,e){return new this(n).div(e)}function fP(n){return new this(n).exp()}function mP(n){return we(n=new this(n),n.e+1,3)}function pP(){var n,e,t=new this(0);for(Ve=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Ve=!0,new this(1/0);t=e}return Ve=!0,t.sqrt()}function zw(n){return n instanceof Hr||n&&n.toStringTag===EI||!1}function gP(n){return new this(n).ln()}function yP(n,e){return new this(n).log(e)}function vP(n){return new this(n).log(2)}function _P(n){return new this(n).log(10)}function bP(){return AI(this,arguments,-1)}function TP(){return AI(this,arguments,1)}function EP(n,e){return new this(n).mod(e)}function wP(n,e){return new this(n).mul(e)}function SP(n,e){return new this(n).pow(e)}function xP(n){var e,t,i,s,o=0,u=new this(1),h=[];if(n===void 0?n=this.precision:qn(n,1,ya),i=Math.ceil(n/Ie),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)s=e[o],s>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:h[o++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)s=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,o):(h.push(s%1e7),o+=4);o=i/4}else throw Error(TI);else for(;o<i;)h[o++]=Math.random()*1e7|0;for(i=h[--o],n%=Ie,i&&n&&(s=Jt(10,Ie-n),h[o]=(i/s|0)*s);h[o]===0;o--)h.pop();if(o<0)t=0,h=[0];else{for(t=-1;h[0]===0;t-=Ie)h.shift();for(i=1,s=h[0];s>=10;s/=10)i++;i<Ie&&(t-=Ie-i)}return u.e=t,u.d=h,u}function AP(n){return we(n=new this(n),n.e+1,this.rounding)}function IP(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function RP(n){return new this(n).sin()}function CP(n){return new this(n).sinh()}function DP(n){return new this(n).sqrt()}function NP(n,e){return new this(n).sub(e)}function kP(){var n=0,e=arguments,t=new this(e[n]);for(Ve=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Ve=!0,we(t,this.precision,this.rounding)}function VP(n){return new this(n).tan()}function MP(n){return new this(n).tanh()}function PP(n){return we(n=new this(n),n.e+1,1)}le[Symbol.for("nodejs.util.inspect.custom")]=le.toString;le[Symbol.toStringTag]="Decimal";var Hr=le.constructor=CI(z0);xm=new Hr(xm);Am=new Hr(Am);const OP=()=>{};var Uw={};const DI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},LP=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],u=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],u=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},NI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],u=s+1<n.length,h=u?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,g=o>>2,v=(o&3)<<4|h>>4;let _=(h&15)<<2|f>>6,S=f&63;d||(S=64,u||(_=64)),i.push(t[g],t[v],t[_],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||f==null||v==null)throw new jP;const _=o<<2|h>>4;if(i.push(_),f!==64){const S=h<<4&240|f>>2;if(i.push(S),v!==64){const R=f<<6&192|v;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class jP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zP=function(n){const e=DI(n);return NI.encodeByteArray(e,!0)},kI=function(n){return zP(n).replace(/\./g,"")},VI=function(n){try{return NI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function MI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const UP=()=>MI().__FIREBASE_DEFAULTS__,BP=()=>{if(typeof process>"u"||typeof Uw>"u")return;const n=Uw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&VI(n[1]);return e&&JSON.parse(e)},cp=()=>{try{return OP()||UP()||BP()||FP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},qP=n=>cp()?.emulatorHosts?.[n],PI=()=>cp()?.config,OI=n=>cp()?.[`_${n}`];class HP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Tu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LI(n){return(await fetch(n,{credentials:"include"})).ok}const Jc={};function GP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Jc))Jc[e]?n.emulator.push(e):n.prod.push(e);return n}function KP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Bw=!1;function $P(n,e){if(typeof window>"u"||typeof document>"u"||!Tu(window.location.host)||Jc[n]===e||Jc[n]||Bw)return;Jc[n]=e;function t(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=GP().prod.length>0;function u(){const _=document.getElementById(i);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,S){_.setAttribute("width","24"),_.setAttribute("id",S),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Bw=!0,u()},_}function g(_,S){_.setAttribute("id",S),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=KP(i),S=t("text"),R=document.getElementById(S)||document.createElement("span"),k=t("learnmore"),V=document.getElementById(k)||document.createElement("a"),j=t("preprendIcon"),M=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const L=_.element;h(L),g(V,k);const J=f();d(M,j),L.append(M,R,V,J),document.body.appendChild(L)}o?(R.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function jI(){const n=cp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function WP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZP(){const n=en();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function zI(){return!jI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UI(){return!jI()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function BI(){try{return typeof indexedDB=="object"}catch{return!1}}function JP(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const eO="FirebaseError";class ss extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=eO,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qh.prototype.create)}}class qh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?tO(o,i):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new ss(s,h,i)}}function tO(n,e){return n.replace(nO,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const nO=/\{\$([^}]+)}/g;function iO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function So(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],u=e[s];if(Fw(o)&&Fw(u)){if(!So(o,u))return!1}else if(o!==u)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Fw(n){return n!==null&&typeof n=="object"}function Hh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rO(n,e){const t=new sO(n,e);return t.subscribe.bind(t)}class sO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");aO(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=t0),s.error===void 0&&(s.error=t0),s.complete===void 0&&(s.complete=t0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function t0(){}function xn(n){return n&&n._delegate?n._delegate:n}class xo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ro="[DEFAULT]";class oO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new HP;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uO(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&u.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lO(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lO(n){return n===ro?void 0:n}function uO(n){return n.instantiationMode==="EAGER"}class cO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new oO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const hO={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},dO=Ge.INFO,fO={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},mO=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=fO[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e_{constructor(e){this.name=e,this._logLevel=dO,this._logHandler=mO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const pO=(n,e)=>e.some(t=>n instanceof t);let qw,Hw;function gO(){return qw||(qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yO(){return Hw||(Hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FI=new WeakMap,F0=new WeakMap,qI=new WeakMap,n0=new WeakMap,t_=new WeakMap;function vO(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(ta(n.result)),s()},u=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&FI.set(t,n)}).catch(()=>{}),t_.set(e,n),e}function _O(n){if(F0.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),s()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});F0.set(n,e)}let q0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return F0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ta(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bO(n){q0=n(q0)}function TO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(i0(this),e,...t);return qI.set(i,e.sort?e.sort():[e]),ta(i)}:yO().includes(n)?function(...e){return n.apply(i0(this),e),ta(FI.get(this))}:function(...e){return ta(n.apply(i0(this),e))}}function EO(n){return typeof n=="function"?TO(n):(n instanceof IDBTransaction&&_O(n),pO(n,gO())?new Proxy(n,q0):n)}function ta(n){if(n instanceof IDBRequest)return vO(n);if(n0.has(n))return n0.get(n);const e=EO(n);return e!==n&&(n0.set(n,e),t_.set(e,n)),e}const i0=n=>t_.get(n);function wO(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const u=indexedDB.open(n,e),h=ta(u);return i&&u.addEventListener("upgradeneeded",d=>{i(ta(u.result),d.oldVersion,d.newVersion,ta(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const SO=["get","getKey","getAll","getAllKeys","count"],xO=["put","add","delete","clear"],r0=new Map;function Gw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(r0.get(e))return r0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=xO.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||SO.includes(t)))return;const o=async function(u,...h){const d=this.transaction(u,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(h.shift())),(await Promise.all([f[t](...h),s&&d.done]))[0]};return r0.set(e,o),o}bO(n=>({...n,get:(e,t,i)=>Gw(e,t)||n.get(e,t,i),has:(e,t)=>!!Gw(e,t)||n.has(e,t)}));class AO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IO(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function IO(n){return n.getComponent()?.type==="VERSION"}const H0="@firebase/app",Kw="0.14.6";const Zr=new e_("@firebase/app"),RO="@firebase/app-compat",CO="@firebase/analytics-compat",DO="@firebase/analytics",NO="@firebase/app-check-compat",kO="@firebase/app-check",VO="@firebase/auth",MO="@firebase/auth-compat",PO="@firebase/database",OO="@firebase/data-connect",LO="@firebase/database-compat",jO="@firebase/functions",zO="@firebase/functions-compat",UO="@firebase/installations",BO="@firebase/installations-compat",FO="@firebase/messaging",qO="@firebase/messaging-compat",HO="@firebase/performance",GO="@firebase/performance-compat",KO="@firebase/remote-config",$O="@firebase/remote-config-compat",QO="@firebase/storage",YO="@firebase/storage-compat",XO="@firebase/firestore",WO="@firebase/ai",ZO="@firebase/firestore-compat",JO="firebase",e3="12.6.0";const G0="[DEFAULT]",t3={[H0]:"fire-core",[RO]:"fire-core-compat",[DO]:"fire-analytics",[CO]:"fire-analytics-compat",[kO]:"fire-app-check",[NO]:"fire-app-check-compat",[VO]:"fire-auth",[MO]:"fire-auth-compat",[PO]:"fire-rtdb",[OO]:"fire-data-connect",[LO]:"fire-rtdb-compat",[jO]:"fire-fn",[zO]:"fire-fn-compat",[UO]:"fire-iid",[BO]:"fire-iid-compat",[FO]:"fire-fcm",[qO]:"fire-fcm-compat",[HO]:"fire-perf",[GO]:"fire-perf-compat",[KO]:"fire-rc",[$O]:"fire-rc-compat",[QO]:"fire-gcs",[YO]:"fire-gcs-compat",[XO]:"fire-fst",[ZO]:"fire-fst-compat",[WO]:"fire-vertex","fire-js":"fire-js",[JO]:"fire-js-all"};const Rm=new Map,n3=new Map,K0=new Map;function $w(n,e){try{n.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zl(n){const e=n.name;if(K0.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;K0.set(e,n);for(const t of Rm.values())$w(t,n);for(const t of n3.values())$w(t,n);return!0}function n_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function cr(n){return n==null?!1:n.settings!==void 0}const i3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},na=new qh("app","Firebase",i3);class r3{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw na.create("app-deleted",{appName:this._name})}}const Eu=e3;function HI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:G0,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw na.create("bad-app-name",{appName:String(s)});if(t||(t=PI()),!t)throw na.create("no-options");const o=Rm.get(s);if(o){if(So(t,o.options)&&So(i,o.config))return o;throw na.create("duplicate-app",{appName:s})}const u=new cO(s);for(const d of K0.values())u.addComponent(d);const h=new r3(t,i,u);return Rm.set(s,h),h}function s3(n=G0){const e=Rm.get(n);if(!e&&n===G0&&PI())return HI();if(!e)throw na.create("no-app",{appName:n});return e}function ia(n,e,t){let i=t3[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(u.join(" "));return}Zl(new xo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const a3="firebase-heartbeat-database",o3=1,yh="firebase-heartbeat-store";let s0=null;function GI(){return s0||(s0=wO(a3,o3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yh)}catch(t){console.warn(t)}}}}).catch(n=>{throw na.create("idb-open",{originalErrorMessage:n.message})})),s0}async function l3(n){try{const t=(await GI()).transaction(yh),i=await t.objectStore(yh).get(KI(n));return await t.done,i}catch(e){if(e instanceof ss)Zr.warn(e.message);else{const t=na.create("idb-get",{originalErrorMessage:e?.message});Zr.warn(t.message)}}}async function Qw(n,e){try{const i=(await GI()).transaction(yh,"readwrite");await i.objectStore(yh).put(e,KI(n)),await i.done}catch(t){if(t instanceof ss)Zr.warn(t.message);else{const i=na.create("idb-set",{originalErrorMessage:t?.message});Zr.warn(i.message)}}}function KI(n){return`${n.name}!${n.options.appId}`}const u3=1024,c3=30;class h3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new f3(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>c3){const s=m3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Yw(),{heartbeatsToSend:t,unsentEntries:i}=d3(this._heartbeatsCache.heartbeats),s=kI(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Zr.warn(e),""}}}function Yw(){return new Date().toISOString().substring(0,10)}function d3(n,e=u3){const t=[];let i=n.slice();for(const s of n){const o=t.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),Xw(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Xw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class f3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BI()?JP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Qw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Qw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xw(n){return kI(JSON.stringify({version:2,heartbeats:n})).length}function m3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function p3(n){Zl(new xo("platform-logger",e=>new AO(e),"PRIVATE")),Zl(new xo("heartbeat",e=>new h3(e),"PRIVATE")),ia(H0,Kw,n),ia(H0,Kw,"esm2020"),ia("fire-js","")}p3("");var Ww=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ra,$I;(function(){var n;function e(C,A){function N(){}N.prototype=A.prototype,C.F=A.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(P,D,B){for(var O=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)O[Ee-2]=arguments[Ee];return A.prototype[D].apply(P,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,A,N){N||(N=0);const P=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)P[D]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(D=0;D<16;++D)P[D]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=C.g[0],N=C.g[1],D=C.g[2];let B=C.g[3],O;O=A+(B^N&(D^B))+P[0]+3614090360&4294967295,A=N+(O<<7&4294967295|O>>>25),O=B+(D^A&(N^D))+P[1]+3905402710&4294967295,B=A+(O<<12&4294967295|O>>>20),O=D+(N^B&(A^N))+P[2]+606105819&4294967295,D=B+(O<<17&4294967295|O>>>15),O=N+(A^D&(B^A))+P[3]+3250441966&4294967295,N=D+(O<<22&4294967295|O>>>10),O=A+(B^N&(D^B))+P[4]+4118548399&4294967295,A=N+(O<<7&4294967295|O>>>25),O=B+(D^A&(N^D))+P[5]+1200080426&4294967295,B=A+(O<<12&4294967295|O>>>20),O=D+(N^B&(A^N))+P[6]+2821735955&4294967295,D=B+(O<<17&4294967295|O>>>15),O=N+(A^D&(B^A))+P[7]+4249261313&4294967295,N=D+(O<<22&4294967295|O>>>10),O=A+(B^N&(D^B))+P[8]+1770035416&4294967295,A=N+(O<<7&4294967295|O>>>25),O=B+(D^A&(N^D))+P[9]+2336552879&4294967295,B=A+(O<<12&4294967295|O>>>20),O=D+(N^B&(A^N))+P[10]+4294925233&4294967295,D=B+(O<<17&4294967295|O>>>15),O=N+(A^D&(B^A))+P[11]+2304563134&4294967295,N=D+(O<<22&4294967295|O>>>10),O=A+(B^N&(D^B))+P[12]+1804603682&4294967295,A=N+(O<<7&4294967295|O>>>25),O=B+(D^A&(N^D))+P[13]+4254626195&4294967295,B=A+(O<<12&4294967295|O>>>20),O=D+(N^B&(A^N))+P[14]+2792965006&4294967295,D=B+(O<<17&4294967295|O>>>15),O=N+(A^D&(B^A))+P[15]+1236535329&4294967295,N=D+(O<<22&4294967295|O>>>10),O=A+(D^B&(N^D))+P[1]+4129170786&4294967295,A=N+(O<<5&4294967295|O>>>27),O=B+(N^D&(A^N))+P[6]+3225465664&4294967295,B=A+(O<<9&4294967295|O>>>23),O=D+(A^N&(B^A))+P[11]+643717713&4294967295,D=B+(O<<14&4294967295|O>>>18),O=N+(B^A&(D^B))+P[0]+3921069994&4294967295,N=D+(O<<20&4294967295|O>>>12),O=A+(D^B&(N^D))+P[5]+3593408605&4294967295,A=N+(O<<5&4294967295|O>>>27),O=B+(N^D&(A^N))+P[10]+38016083&4294967295,B=A+(O<<9&4294967295|O>>>23),O=D+(A^N&(B^A))+P[15]+3634488961&4294967295,D=B+(O<<14&4294967295|O>>>18),O=N+(B^A&(D^B))+P[4]+3889429448&4294967295,N=D+(O<<20&4294967295|O>>>12),O=A+(D^B&(N^D))+P[9]+568446438&4294967295,A=N+(O<<5&4294967295|O>>>27),O=B+(N^D&(A^N))+P[14]+3275163606&4294967295,B=A+(O<<9&4294967295|O>>>23),O=D+(A^N&(B^A))+P[3]+4107603335&4294967295,D=B+(O<<14&4294967295|O>>>18),O=N+(B^A&(D^B))+P[8]+1163531501&4294967295,N=D+(O<<20&4294967295|O>>>12),O=A+(D^B&(N^D))+P[13]+2850285829&4294967295,A=N+(O<<5&4294967295|O>>>27),O=B+(N^D&(A^N))+P[2]+4243563512&4294967295,B=A+(O<<9&4294967295|O>>>23),O=D+(A^N&(B^A))+P[7]+1735328473&4294967295,D=B+(O<<14&4294967295|O>>>18),O=N+(B^A&(D^B))+P[12]+2368359562&4294967295,N=D+(O<<20&4294967295|O>>>12),O=A+(N^D^B)+P[5]+4294588738&4294967295,A=N+(O<<4&4294967295|O>>>28),O=B+(A^N^D)+P[8]+2272392833&4294967295,B=A+(O<<11&4294967295|O>>>21),O=D+(B^A^N)+P[11]+1839030562&4294967295,D=B+(O<<16&4294967295|O>>>16),O=N+(D^B^A)+P[14]+4259657740&4294967295,N=D+(O<<23&4294967295|O>>>9),O=A+(N^D^B)+P[1]+2763975236&4294967295,A=N+(O<<4&4294967295|O>>>28),O=B+(A^N^D)+P[4]+1272893353&4294967295,B=A+(O<<11&4294967295|O>>>21),O=D+(B^A^N)+P[7]+4139469664&4294967295,D=B+(O<<16&4294967295|O>>>16),O=N+(D^B^A)+P[10]+3200236656&4294967295,N=D+(O<<23&4294967295|O>>>9),O=A+(N^D^B)+P[13]+681279174&4294967295,A=N+(O<<4&4294967295|O>>>28),O=B+(A^N^D)+P[0]+3936430074&4294967295,B=A+(O<<11&4294967295|O>>>21),O=D+(B^A^N)+P[3]+3572445317&4294967295,D=B+(O<<16&4294967295|O>>>16),O=N+(D^B^A)+P[6]+76029189&4294967295,N=D+(O<<23&4294967295|O>>>9),O=A+(N^D^B)+P[9]+3654602809&4294967295,A=N+(O<<4&4294967295|O>>>28),O=B+(A^N^D)+P[12]+3873151461&4294967295,B=A+(O<<11&4294967295|O>>>21),O=D+(B^A^N)+P[15]+530742520&4294967295,D=B+(O<<16&4294967295|O>>>16),O=N+(D^B^A)+P[2]+3299628645&4294967295,N=D+(O<<23&4294967295|O>>>9),O=A+(D^(N|~B))+P[0]+4096336452&4294967295,A=N+(O<<6&4294967295|O>>>26),O=B+(N^(A|~D))+P[7]+1126891415&4294967295,B=A+(O<<10&4294967295|O>>>22),O=D+(A^(B|~N))+P[14]+2878612391&4294967295,D=B+(O<<15&4294967295|O>>>17),O=N+(B^(D|~A))+P[5]+4237533241&4294967295,N=D+(O<<21&4294967295|O>>>11),O=A+(D^(N|~B))+P[12]+1700485571&4294967295,A=N+(O<<6&4294967295|O>>>26),O=B+(N^(A|~D))+P[3]+2399980690&4294967295,B=A+(O<<10&4294967295|O>>>22),O=D+(A^(B|~N))+P[10]+4293915773&4294967295,D=B+(O<<15&4294967295|O>>>17),O=N+(B^(D|~A))+P[1]+2240044497&4294967295,N=D+(O<<21&4294967295|O>>>11),O=A+(D^(N|~B))+P[8]+1873313359&4294967295,A=N+(O<<6&4294967295|O>>>26),O=B+(N^(A|~D))+P[15]+4264355552&4294967295,B=A+(O<<10&4294967295|O>>>22),O=D+(A^(B|~N))+P[6]+2734768916&4294967295,D=B+(O<<15&4294967295|O>>>17),O=N+(B^(D|~A))+P[13]+1309151649&4294967295,N=D+(O<<21&4294967295|O>>>11),O=A+(D^(N|~B))+P[4]+4149444226&4294967295,A=N+(O<<6&4294967295|O>>>26),O=B+(N^(A|~D))+P[11]+3174756917&4294967295,B=A+(O<<10&4294967295|O>>>22),O=D+(A^(B|~N))+P[2]+718787259&4294967295,D=B+(O<<15&4294967295|O>>>17),O=N+(B^(D|~A))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+B&4294967295}i.prototype.v=function(C,A){A===void 0&&(A=C.length);const N=A-this.blockSize,P=this.C;let D=this.h,B=0;for(;B<A;){if(D==0)for(;B<=N;)s(this,C,B),B+=this.blockSize;if(typeof C=="string"){for(;B<A;)if(P[D++]=C.charCodeAt(B++),D==this.blockSize){s(this,P),D=0;break}}else for(;B<A;)if(P[D++]=C[B++],D==this.blockSize){s(this,P),D=0;break}}this.h=D,this.o+=A},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)C[A++]=this.g[N]>>>P&255;return C};function o(C,A){var N=h;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=A(C)}function u(C,A){this.h=A;const N=[];let P=!0;for(let D=C.length-1;D>=0;D--){const B=C[D]|0;P&&B==A||(N[D]=B,P=!1)}this.g=N}var h={};function d(C){return-128<=C&&C<128?o(C,function(A){return new u([A|0],A<0?-1:0)}):new u([C|0],C<0?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return v;if(C<0)return V(f(-C));const A=[];let N=1;for(let P=0;C>=N;P++)A[P]=C/N|0,N*=4294967296;return new u(A,0)}function g(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return V(g(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(A,8));let P=v;for(let B=0;B<C.length;B+=8){var D=Math.min(8,C.length-B);const O=parseInt(C.substring(B,B+D),A);D<8?(D=f(Math.pow(A,D)),P=P.j(D).add(f(O))):(P=P.j(N),P=P.add(f(O)))}return P}var v=d(0),_=d(1),S=d(16777216);n=u.prototype,n.m=function(){if(k(this))return-V(this).m();let C=0,A=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);C+=(P>=0?P:4294967296+P)*A,A*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(R(this))return"0";if(k(this))return"-"+V(this).toString(C);const A=f(Math.pow(C,6));var N=this;let P="";for(;;){const D=J(N,A).g;N=j(N,D.j(A));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=D,R(N))return B+P;for(;B.length<6;)B="0"+B;P=B+P}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function R(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function k(C){return C.h==-1}n.l=function(C){return C=j(this,C),k(C)?-1:R(C)?0:1};function V(C){const A=C.g.length,N=[];for(let P=0;P<A;P++)N[P]=~C.g[P];return new u(N,~C.h).add(_)}n.abs=function(){return k(this)?V(this):this},n.add=function(C){const A=Math.max(this.g.length,C.g.length),N=[];let P=0;for(let D=0;D<=A;D++){let B=P+(this.i(D)&65535)+(C.i(D)&65535),O=(B>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);P=O>>>16,B&=65535,O&=65535,N[D]=O<<16|B}return new u(N,N[N.length-1]&-2147483648?-1:0)};function j(C,A){return C.add(V(A))}n.j=function(C){if(R(this)||R(C))return v;if(k(this))return k(C)?V(this).j(V(C)):V(V(this).j(C));if(k(C))return V(this.j(V(C)));if(this.l(S)<0&&C.l(S)<0)return f(this.m()*C.m());const A=this.g.length+C.g.length,N=[];for(var P=0;P<2*A;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<C.g.length;D++){const B=this.i(P)>>>16,O=this.i(P)&65535,Ee=C.i(D)>>>16,fe=C.i(D)&65535;N[2*P+2*D]+=O*fe,M(N,2*P+2*D),N[2*P+2*D+1]+=B*fe,M(N,2*P+2*D+1),N[2*P+2*D+1]+=O*Ee,M(N,2*P+2*D+1),N[2*P+2*D+2]+=B*Ee,M(N,2*P+2*D+2)}for(C=0;C<A;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=A;C<2*A;C++)N[C]=0;return new u(N,0)};function M(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function L(C,A){this.g=C,this.h=A}function J(C,A){if(R(A))throw Error("division by zero");if(R(C))return new L(v,v);if(k(C))return A=J(V(C),A),new L(V(A.g),V(A.h));if(k(A))return A=J(C,V(A)),new L(V(A.g),A.h);if(C.g.length>30){if(k(C)||k(A))throw Error("slowDivide_ only works with positive integers.");for(var N=_,P=A;P.l(C)<=0;)N=ie(N),P=ie(P);var D=ne(N,1),B=ne(P,1);for(P=ne(P,2),N=ne(N,2);!R(P);){var O=B.add(P);O.l(C)<=0&&(D=D.add(N),B=O),P=ne(P,1),N=ne(N,1)}return A=j(C,D.j(A)),new L(D,A)}for(D=v;C.l(A)>=0;){for(N=Math.max(1,Math.floor(C.m()/A.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),B=f(N),O=B.j(A);k(O)||O.l(C)>0;)N-=P,B=f(N),O=B.j(A);R(B)&&(B=_),D=D.add(B),C=j(C,O)}return new L(D,C)}n.B=function(C){return J(this,C).h},n.and=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<A;P++)N[P]=this.i(P)&C.i(P);return new u(N,this.h&C.h)},n.or=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<A;P++)N[P]=this.i(P)|C.i(P);return new u(N,this.h|C.h)},n.xor=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<A;P++)N[P]=this.i(P)^C.i(P);return new u(N,this.h^C.h)};function ie(C){const A=C.g.length+1,N=[];for(let P=0;P<A;P++)N[P]=C.i(P)<<1|C.i(P-1)>>>31;return new u(N,C.h)}function ne(C,A){const N=A>>5;A%=32;const P=C.g.length-N,D=[];for(let B=0;B<P;B++)D[B]=A>0?C.i(B+N)>>>A|C.i(B+N+1)<<32-A:C.i(B+N);return new u(D,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,$I=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=g,ra=u}).apply(typeof Ww<"u"?Ww:typeof self<"u"?self:typeof window<"u"?window:{});var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var QI,$c,YI,nm,$0,XI,WI,ZI;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof jf=="object"&&jf];for(var b=0;b<m.length;++b){var E=m[b];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function s(m,b){if(b)e:{var E=i;m=m.split(".");for(var I=0;I<m.length-1;I++){var $=m[I];if(!($ in E))break e;E=E[$]}m=m[m.length-1],I=E[m],b=b(I),b!=I&&b!=null&&e(E,m,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(b){var E=[],I;for(I in b)Object.prototype.hasOwnProperty.call(b,I)&&E.push([I,b[I]]);return E}});var o=o||{},u=this||self;function h(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function d(m,b,E){return m.call.apply(m.bind,arguments)}function f(m,b,E){return f=d,f.apply(null,arguments)}function g(m,b){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),m.apply(this,I)}}function v(m,b){function E(){}E.prototype=b.prototype,m.Z=b.prototype,m.prototype=new E,m.prototype.constructor=m,m.Ob=function(I,$,W){for(var he=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)he[Pe-2]=arguments[Pe];return b.prototype[$].apply(I,he)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function S(m){const b=m.length;if(b>0){const E=Array(b);for(let I=0;I<b;I++)E[I]=m[I];return E}return[]}function R(m,b){for(let I=1;I<arguments.length;I++){const $=arguments[I];var E=typeof $;if(E=E!="object"?E:$?Array.isArray($)?"array":E:"null",E=="array"||E=="object"&&typeof $.length=="number"){E=m.length||0;const W=$.length||0;m.length=E+W;for(let he=0;he<W;he++)m[E+he]=$[he]}else m.push($)}}class k{constructor(b,E){this.i=b,this.j=E,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function V(m){u.setTimeout(()=>{throw m},0)}function j(){var m=C;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class M{constructor(){this.h=this.g=null}add(b,E){const I=L.get();I.set(b,E),this.h?this.h.next=I:this.g=I,this.h=I}}var L=new k(()=>new J,m=>m.reset());class J{constructor(){this.next=this.g=this.h=null}set(b,E){this.h=b,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ne=!1,C=new M,A=()=>{const m=Promise.resolve(void 0);ie=()=>{m.then(N)}};function N(){for(var m;m=j();){try{m.h.call(m.g)}catch(E){V(E)}var b=L;b.j(m),b.h<100&&(b.h++,m.next=b.g,b.g=m)}ne=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const E=()=>{};u.addEventListener("test",E,b),u.removeEventListener("test",E,b)}catch{}return m})();function O(m){return/^[\s\xa0]*$/.test(m)}function Ee(m,b){D.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,b)}v(Ee,D),Ee.prototype.init=function(m,b){const E=this.type=m.type,I=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget,b||(E=="mouseover"?b=m.fromElement:E=="mouseout"&&(b=m.toElement)),this.relatedTarget=b,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),H=0;function ae(m,b,E,I,$){this.listener=m,this.proxy=null,this.src=b,this.type=E,this.capture=!!I,this.ha=$,this.key=++H,this.da=this.fa=!1}function de(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ce(m,b,E){for(const I in m)b.call(E,m[I],I,m)}function Fe(m,b){for(const E in m)b.call(void 0,m[E],E,m)}function q(m){const b={};for(const E in m)b[E]=m[E];return b}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(m,b){let E,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(E in I)m[E]=I[E];for(let W=0;W<oe.length;W++)E=oe[W],Object.prototype.hasOwnProperty.call(I,E)&&(m[E]=I[E])}}function ge(m){this.src=m,this.g={},this.h=0}ge.prototype.add=function(m,b,E,I,$){const W=m.toString();m=this.g[W],m||(m=this.g[W]=[],this.h++);const he=Le(m,b,I,$);return he>-1?(b=m[he],E||(b.fa=!1)):(b=new ae(b,this.src,W,!!I,$),b.fa=E,m.push(b)),b};function Ne(m,b){const E=b.type;if(E in m.g){var I=m.g[E],$=Array.prototype.indexOf.call(I,b,void 0),W;(W=$>=0)&&Array.prototype.splice.call(I,$,1),W&&(de(b),m.g[E].length==0&&(delete m.g[E],m.h--))}}function Le(m,b,E,I){for(let $=0;$<m.length;++$){const W=m[$];if(!W.da&&W.listener==b&&W.capture==!!E&&W.ha==I)return $}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),Xt={};function yt(m,b,E,I,$){if(Array.isArray(b)){for(let W=0;W<b.length;W++)yt(m,b[W],E,I,$);return null}return E=Pu(E),m&&m[fe]?m.J(b,E,h(I)?!!I.capture:!1,$):wa(m,b,E,!1,I,$)}function wa(m,b,E,I,$,W){if(!b)throw Error("Invalid event type");const he=h($)?!!$.capture:!!$;let Pe=Sa(m);if(Pe||(m[Qe]=Pe=new ge(m)),E=Pe.add(b,E,I,he,W),E.proxy)return E;if(I=Lo(),E.proxy=I,I.src=m,I.listener=E,m.addEventListener)B||($=he),$===void 0&&($=!1),m.addEventListener(b.toString(),I,$);else if(m.attachEvent)m.attachEvent(Ui(b.toString()),I);else if(m.addListener&&m.removeListener)m.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Lo(){function m(E){return b.call(m.src,m.listener,E)}const b=Vu;return m}function jo(m,b,E,I,$){if(Array.isArray(b))for(var W=0;W<b.length;W++)jo(m,b[W],E,I,$);else I=h(I)?!!I.capture:!!I,E=Pu(E),m&&m[fe]?(m=m.i,W=String(b).toString(),W in m.g&&(b=m.g[W],E=Le(b,E,I,$),E>-1&&(de(b[E]),Array.prototype.splice.call(b,E,1),b.length==0&&(delete m.g[W],m.h--)))):m&&(m=Sa(m))&&(b=m.g[b.toString()],m=-1,b&&(m=Le(b,E,I,$)),(E=m>-1?b[m]:null)&&zo(E))}function zo(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[fe])Ne(b.i,m);else{var E=m.type,I=m.proxy;b.removeEventListener?b.removeEventListener(E,I,m.capture):b.detachEvent?b.detachEvent(Ui(E),I):b.addListener&&b.removeListener&&b.removeListener(I),(E=Sa(b))?(Ne(E,m),E.h==0&&(E.src=null,b[Qe]=null)):de(m)}}}function Ui(m){return m in Xt?Xt[m]:Xt[m]="on"+m}function Vu(m,b){if(m.da)m=!0;else{b=new Ee(b,this);const E=m.listener,I=m.ha||m.src;m.fa&&zo(m),m=E.call(I,b)}return m}function Sa(m){return m=m[Qe],m instanceof ge?m:null}var Mu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pu(m){return typeof m=="function"?m:(m[Mu]||(m[Mu]=function(b){return m.handleEvent(b)}),m[Mu])}function jt(){P.call(this),this.i=new ge(this),this.M=this,this.G=null}v(jt,P),jt.prototype[fe]=!0,jt.prototype.removeEventListener=function(m,b,E,I){jo(this,m,b,E,I)};function Wt(m,b){var E,I=m.G;if(I)for(E=[];I;I=I.G)E.push(I);if(m=m.M,I=b.type||b,typeof b=="string")b=new D(b,m);else if(b instanceof D)b.target=b.target||m;else{var $=b;b=new D(I,m),pe(b,$)}$=!0;let W,he;if(E)for(he=E.length-1;he>=0;he--)W=b.g=E[he],$=us(W,I,!0,b)&&$;if(W=b.g=m,$=us(W,I,!0,b)&&$,$=us(W,I,!1,b)&&$,E)for(he=0;he<E.length;he++)W=b.g=E[he],$=us(W,I,!1,b)&&$}jt.prototype.N=function(){if(jt.Z.N.call(this),this.i){var m=this.i;for(const b in m.g){const E=m.g[b];for(let I=0;I<E.length;I++)de(E[I]);delete m.g[b],m.h--}}this.G=null},jt.prototype.J=function(m,b,E,I){return this.i.add(String(m),b,!1,E,I)},jt.prototype.K=function(m,b,E,I){return this.i.add(String(m),b,!0,E,I)};function us(m,b,E,I){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();let $=!0;for(let W=0;W<b.length;++W){const he=b[W];if(he&&!he.da&&he.capture==E){const Pe=he.listener,Nt=he.ha||he.src;he.fa&&Ne(m.i,he),$=Pe.call(Nt,I)!==!1&&$}}return $&&!I.defaultPrevented}function Yp(m,b){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(m,b||0)}function ad(m){m.g=Yp(()=>{m.g=null,m.i&&(m.i=!1,ad(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class An extends P{constructor(b,E){super(),this.m=b,this.l=E,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:ad(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xa(m){P.call(this),this.h=m,this.g={}}v(xa,P);var Ou=[];function Lu(m){Ce(m.g,function(b,E){this.g.hasOwnProperty(E)&&zo(b)},m),m.g={}}xa.prototype.N=function(){xa.Z.N.call(this),Lu(this)},xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cs=u.JSON.stringify,Xp=u.JSON.parse,od=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ld(){}function ud(){}var wi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function on(){D.call(this,"d")}v(on,D);function ii(){D.call(this,"c")}v(ii,D);var Dt={},cd=null;function Uo(){return cd=cd||new jt}Dt.Ia="serverreachability";function hd(m){D.call(this,Dt.Ia,m)}v(hd,D);function Bi(m){const b=Uo();Wt(b,new hd(b))}Dt.STAT_EVENT="statevent";function Aa(m,b){D.call(this,Dt.STAT_EVENT,m),this.stat=b}v(Aa,D);function zt(m){const b=Uo();Wt(b,new Aa(b,m))}Dt.Ja="timingevent";function Fi(m,b){D.call(this,Dt.Ja,m),this.size=b}v(Fi,D);function qi(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},b)}function Si(){this.g=!0}Si.prototype.ua=function(){this.g=!1};function Wp(m,b,E,I,$,W){m.info(function(){if(m.g)if(W){var he="",Pe=W.split("&");for(let Je=0;Je<Pe.length;Je++){var Nt=Pe[Je].split("=");if(Nt.length>1){const vt=Nt[0];Nt=Nt[1];const oi=vt.split("_");he=oi.length>=2&&oi[1]=="type"?he+(vt+"="+Nt+"&"):he+(vt+"=redacted&")}}}else he=null;else he=W;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+b+`
`+E+`
`+he})}function dd(m,b,E,I,$,W,he){m.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+b+`
`+E+`
`+W+" "+he})}function Hi(m,b,E,I){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Zp(m,E)+(I?" "+I:"")})}function Ia(m,b){m.info(function(){return"TIMEOUT: "+b})}Si.prototype.info=function(){};function Zp(m,b){if(!m.g)return b;if(!b)return null;try{const W=JSON.parse(b);if(W){for(m=0;m<W.length;m++)if(Array.isArray(W[m])){var E=W[m];if(!(E.length<2)){var I=E[1];if(Array.isArray(I)&&!(I.length<1)){var $=I[0];if($!="noop"&&$!="stop"&&$!="close")for(let he=1;he<I.length;he++)I[he]=""}}}}return cs(W)}catch{return b}}var Ra={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ju={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zu;function Ca(){}v(Ca,ld),Ca.prototype.g=function(){return new XMLHttpRequest},zu=new Ca;function Sr(m){return encodeURIComponent(String(m))}function fd(m){var b=1;m=m.split(":");const E=[];for(;b>0&&m.length;)E.push(m.shift()),b--;return m.length&&E.push(m.join(":")),E}function xi(m,b,E,I){this.j=m,this.i=b,this.l=E,this.S=I||1,this.V=new xa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ai}function Ai(){this.i=null,this.g="",this.h=!1}var Ut={},nn={};function Gi(m,b,E){m.M=1,m.A=Da(Ft(b)),m.u=E,m.R=!0,Bo(m,null)}function Bo(m,b){m.F=Date.now(),Ki(m),m.B=Ft(m.A);var E=m.B,I=m.S;Array.isArray(I)||(I=[String(I)]),Go(E.i,"t",I),m.C=0,E=m.j.L,m.h=new Ai,m.g=Rd(m.j,E?b:null,!m.u),m.P>0&&(m.O=new An(f(m.Y,m,m.g),m.P)),b=m.V,E=m.g,I=m.ba;var $="readystatechange";Array.isArray($)||($&&(Ou[0]=$.toString()),$=Ou);for(let W=0;W<$.length;W++){const he=yt(E,$[W],I||b.handleEvent,!1,b.h||b);if(!he)break;b.g[he.key]=he}b=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,b)):(m.v="GET",m.g.ea(m.B,m.v,null,b)),Bi(),Wp(m.i,m.v,m.B,m.l,m.S,m.u)}xi.prototype.ba=function(m){m=m.target;const b=this.O;b&&Ci(m)==3?b.j():this.Y(m)},xi.prototype.Y=function(m){try{if(m==this.g)e:{const Pe=Ci(this.g),Nt=this.g.ya(),Je=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||Pe!=4||Nt==7||(Nt==8||Je<=0?Bi(3):Bi(2)),$i(this);var b=this.g.ca();this.X=b;var E=Jp(this);if(this.o=b==200,dd(this.i,this.v,this.B,this.l,this.S,Pe,b),this.o){if(this.U&&!this.L){t:{if(this.g){var I,$=this.g;if((I=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(I)){var W=I;break t}}W=null}if(m=W)Hi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qi(this,m);else{this.o=!1,this.m=3,zt(12),Hn(this),ri(this);break e}}if(this.R){m=!0;let vt;for(;!this.K&&this.C<E.length;)if(vt=pd(this,E),vt==nn){Pe==4&&(this.m=4,zt(14),m=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Ut){this.m=4,zt(15),Hi(this.i,this.l,E,"[Invalid Chunk]"),m=!1;break}else Hi(this.i,this.l,vt,null),Qi(this,vt);if(md(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||E.length!=0||this.h.h||(this.m=1,zt(16),m=!1),this.o=this.o&&m,!m)Hi(this.i,this.l,E,"[Invalid Chunked Response]"),Hn(this),ri(this);else if(E.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),ec(he),he.P=!0,zt(11))}}else Hi(this.i,this.l,E,null),Qi(this,E);Pe==4&&Hn(this),this.o&&!this.K&&(Pe==4?Sd(this.j,this):(this.o=!1,Ki(this)))}else Ar(this.g),b==400&&E.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Hn(this),ri(this)}}}catch{}finally{}};function Jp(m){if(!md(m))return m.g.la();const b=ln(m.g);if(b==="")return"";let E="";const I=b.length,$=Ci(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Hn(m),ri(m),"";m.h.i=new u.TextDecoder}for(let W=0;W<I;W++)m.h.h=!0,E+=m.h.i.decode(b[W],{stream:!($&&W==I-1)});return b.length=0,m.h.g+=E,m.C=0,m.h.g}function md(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function pd(m,b){var E=m.C,I=b.indexOf(`
`,E);return I==-1?nn:(E=Number(b.substring(E,I)),isNaN(E)?Ut:(I+=1,I+E>b.length?nn:(b=b.slice(I,I+E),m.C=I+E,b)))}xi.prototype.cancel=function(){this.K=!0,Hn(this)};function Ki(m){m.T=Date.now()+m.H,Fo(m,m.H)}function Fo(m,b){if(m.D!=null)throw Error("WatchDog timer not null");m.D=qi(f(m.aa,m),b)}function $i(m){m.D&&(u.clearTimeout(m.D),m.D=null)}xi.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Ia(this.i,this.B),this.M!=2&&(Bi(),zt(17)),Hn(this),this.m=2,ri(this)):Fo(this,this.T-m)};function ri(m){m.j.I==0||m.K||Sd(m.j,m)}function Hn(m){$i(m);var b=m.O;b&&typeof b.dispose=="function"&&b.dispose(),m.O=null,Lu(m.V),m.g&&(b=m.g,m.g=null,b.abort(),b.dispose())}function Qi(m,b){try{var E=m.j;if(E.I!=0&&(E.g==m||Xi(E.h,m))){if(!m.L&&Xi(E.h,m)&&E.I==3){try{var I=E.Ba.g.parse(b)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<m.F)Xo(E),vs(E);else break e;La(E),zt(18)}}else E.xa=$[1],0<E.xa-E.K&&$[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=qi(f(E.Va,E),6e3));Yi(E.h)<=1&&E.ta&&(E.ta=void 0)}else nr(E,11)}else if((m.L||E.g==m)&&Xo(E),!O(b))for($=E.Ba.g.parse(b),b=0;b<$.length;b++){let Je=$[b];const vt=Je[0];if(!(vt<=E.K))if(E.K=vt,Je=Je[1],E.I==2)if(Je[0]=="c"){E.M=Je[1],E.ba=Je[2];const oi=Je[3];oi!=null&&(E.ka=oi,E.j.info("VER="+E.ka));const ir=Je[4];ir!=null&&(E.za=ir,E.j.info("SVER="+E.za));const Di=Je[5];Di!=null&&typeof Di=="number"&&Di>0&&(I=1.5*Di,E.O=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const Ni=m.g;if(Ni){const ja=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var W=I.h;W.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Fu(W,W.h),W.h=null))}if(I.G){const Wo=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(I.wa=Wo,nt(I.J,I.G,Wo))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-m.F,E.j.info("Handshake RTT: "+E.T+"ms")),I=E;var he=m;if(I.na=Id(I,I.L?I.ba:null,I.W),he.L){qu(I.h,he);var Pe=he,Nt=I.O;Nt&&(Pe.H=Nt),Pe.D&&($i(Pe),Ki(Pe)),I.g=he}else Ed(I);E.i.length>0&&tr(E)}else Je[0]!="stop"&&Je[0]!="close"||nr(E,7);else E.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?nr(E,7):Zu(E):Je[0]!="noop"&&E.l&&E.l.qa(Je),E.A=0)}}Bi(4)}catch{}}var Bt=class{constructor(m,b){this.g=m,this.map=b}};function Uu(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bu(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Yi(m){return m.h?1:m.g?m.g.size:0}function Xi(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function Fu(m,b){m.g?m.g.add(b):m.h=b}function qu(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Uu.prototype.cancel=function(){if(this.i=Hu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Hu(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const E of m.g.values())b=b.concat(E.G);return b}return S(m.i)}var gd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qo(m,b){if(m){m=m.split("&");for(let E=0;E<m.length;E++){const I=m[E].indexOf("=");let $,W=null;I>=0?($=m[E].substring(0,I),W=m[E].substring(I+1)):$=m[E],b($,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Gn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;m instanceof Gn?(this.l=m.l,rn(this,m.j),this.o=m.o,this.g=m.g,hs(this,m.u),this.h=m.h,Gu(this,bd(m.i)),this.m=m.m):m&&(b=String(m).match(gd))?(this.l=!1,rn(this,b[1]||"",!0),this.o=Wi(b[2]||""),this.g=Wi(b[3]||"",!0),hs(this,b[4]),this.h=Wi(b[5]||"",!0),Gu(this,b[6]||"",!0),this.m=Wi(b[7]||"")):(this.l=!1,this.i=new fs(null,this.l))}Gn.prototype.toString=function(){const m=[];var b=this.j;b&&m.push(Na(b,Ho,!0),":");var E=this.g;return(E||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Na(b,Ho,!0),"@"),m.push(Sr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&m.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&m.push("/"),m.push(Na(E,E.charAt(0)=="/"?Ku:yd,!0))),(E=this.i.toString())&&m.push("?",E),(E=this.m)&&m.push("#",Na(E,vd)),m.join("")},Gn.prototype.resolve=function(m){const b=Ft(this);let E=!!m.j;E?rn(b,m.j):E=!!m.o,E?b.o=m.o:E=!!m.g,E?b.g=m.g:E=m.u!=null;var I=m.h;if(E)hs(b,m.u);else if(E=!!m.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var $=b.h.lastIndexOf("/");$!=-1&&(I=b.h.slice(0,$+1)+I)}if($=I,$==".."||$==".")I="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){I=$.lastIndexOf("/",0)==0,$=$.split("/");const W=[];for(let he=0;he<$.length;){const Pe=$[he++];Pe=="."?I&&he==$.length&&W.push(""):Pe==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),I&&he==$.length&&W.push("")):(W.push(Pe),I=!0)}I=W.join("/")}else I=$}return E?b.h=I:E=m.i.toString()!=="",E?Gu(b,bd(m.i)):E=!!m.m,E&&(b.m=m.m),b};function Ft(m){return new Gn(m)}function rn(m,b,E){m.j=E?Wi(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function hs(m,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);m.u=b}else m.u=null}function Gu(m,b,E){b instanceof fs?(m.i=b,Ko(m.i,m.l)):(E||(b=Na(b,ds)),m.i=new fs(b,m.l))}function nt(m,b,E){m.i.set(b,E)}function Da(m){return nt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Wi(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Na(m,b,E){return typeof m=="string"?(m=encodeURI(m).replace(b,kn),E&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function kn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ho=/[#\/\?@]/g,yd=/[#\?:]/g,Ku=/[#\?]/g,ds=/[#\?@]/g,vd=/#/g;function fs(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function Vn(m){m.g||(m.g=new Map,m.h=0,m.i&&qo(m.i,function(b,E){m.add(decodeURIComponent(b.replace(/\+/g," ")),E)}))}n=fs.prototype,n.add=function(m,b){Vn(this),this.i=null,m=ms(this,m);let E=this.g.get(m);return E||this.g.set(m,E=[]),E.push(b),this.h+=1,this};function _d(m,b){Vn(m),b=ms(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function $u(m,b){return Vn(m),b=ms(m,b),m.g.has(b)}n.forEach=function(m,b){Vn(this),this.g.forEach(function(E,I){E.forEach(function($){m.call(b,$,I,this)},this)},this)};function Qu(m,b){Vn(m);let E=[];if(typeof b=="string")$u(m,b)&&(E=E.concat(m.g.get(ms(m,b))));else for(m=Array.from(m.g.values()),b=0;b<m.length;b++)E=E.concat(m[b]);return E}n.set=function(m,b){return Vn(this),this.i=null,m=ms(this,m),$u(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=Qu(this,m),m.length>0?String(m[0]):b):b};function Go(m,b,E){_d(m,b),E.length>0&&(m.i=null,m.g.set(ms(m,b),S(E)),m.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(let I=0;I<b.length;I++){var E=b[I];const $=Sr(E);E=Qu(this,E);for(let W=0;W<E.length;W++){let he=$;E[W]!==""&&(he+="="+Sr(E[W])),m.push(he)}}return this.i=m.join("&")};function bd(m){const b=new fs;return b.i=m.i,m.g&&(b.g=new Map(m.g),b.h=m.h),b}function ms(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function Ko(m,b){b&&!m.j&&(Vn(m),m.i=null,m.g.forEach(function(E,I){const $=I.toLowerCase();I!=$&&(_d(this,I),Go(this,$,E))},m)),m.j=b}function Ii(m,b){const E=new Si;if(u.Image){const I=new Image;I.onload=g(si,E,"TestLoadImage: loaded",!0,b,I),I.onerror=g(si,E,"TestLoadImage: error",!1,b,I),I.onabort=g(si,E,"TestLoadImage: abort",!1,b,I),I.ontimeout=g(si,E,"TestLoadImage: timeout",!1,b,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=m}else b(!1)}function Yu(m,b){const E=new Si,I=new AbortController,$=setTimeout(()=>{I.abort(),si(E,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:I.signal}).then(W=>{clearTimeout($),W.ok?si(E,"TestPingServer: ok",!0,b):si(E,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout($),si(E,"TestPingServer: error",!1,b)})}function si(m,b,E,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(E)}catch{}}function ps(){this.g=new od}function Zi(m){this.i=m.Sb||null,this.h=m.ab||!1}v(Zi,ld),Zi.prototype.g=function(){return new ka(this.i,this.h)};function ka(m,b){jt.call(this),this.H=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(ka,jt),n=ka.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=b,this.readyState=1,Ri(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(b.body=m),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$o(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function $o(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?gs(this):Ri(this),this.readyState==3&&$o(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,gs(this))},n.Na=function(m){this.g&&(this.response=m,gs(this))},n.ga=function(){this.g&&gs(this)};function gs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ri(m)}n.setRequestHeader=function(m,b){this.A.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var E=b.next();!E.done;)E=E.value,m.push(E[0]+": "+E[1]),E=b.next();return m.join(`\r
`)};function Ri(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ai(m){let b="";return Ce(m,function(E,I){b+=I,b+=":",b+=E,b+=`\r
`}),b}function Va(m,b,E){e:{for(I in E){var I=!1;break e}I=!0}I||(E=ai(E),typeof m=="string"?E!=null&&Sr(E):nt(m,b,E))}function ot(m){jt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ot,jt);var Ji=/^https?$/i,Xu=["POST","PUT"];n=ot.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,b,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zu.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(W){Ma(this,W);return}if(m=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)E.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())E.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),$=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(Xu,b,void 0)>=0)||I||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,he]of E)this.g.setRequestHeader(W,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(W){Ma(this,W)}};function Ma(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.o=5,Wu(m),xr(m)}function Wu(m){m.A||(m.A=!0,Wt(m,"complete"),Wt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Wt(this,"complete"),Wt(this,"abort"),xr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Pa(this):this.Xa())},n.Xa=function(){Pa(this)};function Pa(m){if(m.h&&typeof o<"u"){if(m.v&&Ci(m)==4)setTimeout(m.Ca.bind(m),0);else if(Wt(m,"readystatechange"),Ci(m)==4){m.h=!1;try{const W=m.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var E;if(!(E=b)){var I;if(I=W===0){let he=String(m.D).match(gd)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),I=!Ji.test(he?he.toLowerCase():"")}E=I}if(E)Wt(m,"complete"),Wt(m,"success");else{m.o=6;try{var $=Ci(m)>2?m.g.statusText:""}catch{$=""}m.l=$+" ["+m.ca()+"]",Wu(m)}}finally{xr(m)}}}}function xr(m,b){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const E=m.g;m.g=null,b||Wt(m,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ci(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Ci(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),Xp(b)}};function ln(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ar(m){const b={};m=(m.g&&Ci(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<m.length;I++){if(O(m[I]))continue;var E=fd(m[I]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=b[$]||[];b[$]=W,W.push(E)}Fe(b,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function er(m,b,E){return E&&E.internalChannelParams&&E.internalChannelParams[m]||b}function ys(m){this.za=0,this.i=[],this.j=new Si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=er("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=er("baseRetryDelayMs",5e3,m),this.Za=er("retryDelaySeedMs",1e4,m),this.Ta=er("forwardChannelMaxRetries",2,m),this.va=er("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Uu(m&&m.concurrentRequestLimit),this.Ba=new ps,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ys.prototype,n.ka=8,n.I=1,n.connect=function(m,b,E,I){zt(0),this.W=m,this.H=b||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.J=Id(this,null,this.W),tr(this)};function Zu(m){if(Qo(m),m.I==3){var b=m.V++,E=Ft(m.J);if(nt(E,"SID",m.M),nt(E,"RID",b),nt(E,"TYPE","terminate"),Oa(m,E),b=new xi(m,m.j,b),b.M=2,b.A=Da(Ft(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=b.A,E=!0),E||(b.g=Rd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ki(b)}Ad(m)}function vs(m){m.g&&(ec(m),m.g.cancel(),m.g=null)}function Qo(m){vs(m),m.v&&(u.clearTimeout(m.v),m.v=null),Xo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function tr(m){if(!Bu(m.h)&&!m.m){m.m=!0;var b=m.Ea;ie||A(),ne||(ie(),ne=!0),C.add(b,m),m.D=0}}function Yo(m,b){return Yi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=b.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=qi(f(m.Ea,m,b),xd(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const $=new xi(this,this.j,m);let W=this.o;if(this.U&&(W?(W=q(W),pe(W,this.U)):W=this.U),this.u!==null||this.R||($.J=W,W=null),this.S)e:{for(var b=0,E=0;E<this.i.length;E++){t:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(b+=I,b>4096){b=E;break e}if(b===4096||E===this.i.length-1){b=E+1;break e}}b=1e3}else b=1e3;b=Td(this,$,b),E=Ft(this.J),nt(E,"RID",m),nt(E,"CVER",22),this.G&&nt(E,"X-HTTP-Session-Id",this.G),Oa(this,E),W&&(this.R?b="headers="+Sr(ai(W))+"&"+b:this.u&&Va(E,this.u,W)),Fu(this.h,$),this.Ra&&nt(E,"TYPE","init"),this.S?(nt(E,"$req",b),nt(E,"SID","null"),$.U=!0,Gi($,E,null)):Gi($,E,b),this.I=2}}else this.I==3&&(m?Ju(this,m):this.i.length==0||Bu(this.h)||Ju(this))};function Ju(m,b){var E;b?E=b.l:E=m.V++;const I=Ft(m.J);nt(I,"SID",m.M),nt(I,"RID",E),nt(I,"AID",m.K),Oa(m,I),m.u&&m.o&&Va(I,m.u,m.o),E=new xi(m,m.j,E,m.D+1),m.u===null&&(E.J=m.o),b&&(m.i=b.G.concat(m.i)),b=Td(m,E,1e3),E.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Fu(m.h,E),Gi(E,I,b)}function Oa(m,b){m.H&&Ce(m.H,function(E,I){nt(b,I,E)}),m.l&&Ce({},function(E,I){nt(b,I,E)})}function Td(m,b,E){E=Math.min(m.i.length,E);const I=m.l?f(m.l.Ka,m.l,m):null;e:{var $=m.i;let Pe=-1;for(;;){const Nt=["count="+E];Pe==-1?E>0?(Pe=$[0].g,Nt.push("ofs="+Pe)):Pe=0:Nt.push("ofs="+Pe);let Je=!0;for(let vt=0;vt<E;vt++){var W=$[vt].g;const oi=$[vt].map;if(W-=Pe,W<0)Pe=Math.max(0,$[vt].g-100),Je=!1;else try{W="req"+W+"_"||"";try{var he=oi instanceof Map?oi:Object.entries(oi);for(const[ir,Di]of he){let Ni=Di;h(Di)&&(Ni=cs(Di)),Nt.push(W+ir+"="+encodeURIComponent(Ni))}}catch(ir){throw Nt.push(W+"type="+encodeURIComponent("_badmap")),ir}}catch{I&&I(oi)}}if(Je){he=Nt.join("&");break e}}he=void 0}return m=m.i.splice(0,E),b.G=m,he}function Ed(m){if(!m.g&&!m.v){m.Y=1;var b=m.Da;ie||A(),ne||(ie(),ne=!0),C.add(b,m),m.A=0}}function La(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=qi(f(m.Da,m),xd(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,wd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=qi(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),vs(this),wd(this))};function ec(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function wd(m){m.g=new xi(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var b=Ft(m.na);nt(b,"RID","rpc"),nt(b,"SID",m.M),nt(b,"AID",m.K),nt(b,"CI",m.F?"0":"1"),!m.F&&m.ia&&nt(b,"TO",m.ia),nt(b,"TYPE","xmlhttp"),Oa(m,b),m.u&&m.o&&Va(b,m.u,m.o),m.O&&(m.g.H=m.O);var E=m.g;m=m.ba,E.M=1,E.A=Da(Ft(b)),E.u=null,E.R=!0,Bo(E,m)}n.Va=function(){this.C!=null&&(this.C=null,vs(this),La(this),zt(19))};function Xo(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Sd(m,b){var E=null;if(m.g==b){Xo(m),ec(m),m.g=null;var I=2}else if(Xi(m.h,b))E=b.G,qu(m.h,b),I=1;else return;if(m.I!=0){if(b.o)if(I==1){E=b.u?b.u.length:0,b=Date.now()-b.F;var $=m.D;I=Uo(),Wt(I,new Fi(I,E)),tr(m)}else Ed(m);else if($=b.m,$==3||$==0&&b.X>0||!(I==1&&Yo(m,b)||I==2&&La(m)))switch(E&&E.length>0&&(b=m.h,b.i=b.i.concat(E)),$){case 1:nr(m,5);break;case 4:nr(m,10);break;case 3:nr(m,6);break;default:nr(m,2)}}}function xd(m,b){let E=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(E*=2),E*b}function nr(m,b){if(m.j.info("Error code "+b),b==2){var E=f(m.bb,m),I=m.Ua;const $=!I;I=new Gn(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||rn(I,"https"),Da(I),$?Ii(I.toString(),E):Yu(I.toString(),E)}else zt(2);m.I=0,m.l&&m.l.pa(b),Ad(m),Qo(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Ad(m){if(m.I=0,m.ja=[],m.l){const b=Hu(m.h);(b.length!=0||m.i.length!=0)&&(R(m.ja,b),R(m.ja,m.i),m.h.i.length=0,S(m.i),m.i.length=0),m.l.oa()}}function Id(m,b,E){var I=E instanceof Gn?Ft(E):new Gn(E);if(I.g!="")b&&(I.g=b+"."+I.g),hs(I,I.u);else{var $=u.location;I=$.protocol,b=b?b+"."+$.hostname:$.hostname,$=+$.port;const W=new Gn(null);I&&rn(W,I),b&&(W.g=b),$&&hs(W,$),E&&(W.h=E),I=W}return E=m.G,b=m.wa,E&&b&&nt(I,E,b),nt(I,"VER",m.ka),Oa(m,I),I}function Rd(m,b,E){if(b&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Aa&&!m.ma?new ot(new Zi({ab:E})):new ot(m.ma),b.Fa(m.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cd(){}n=Cd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function _s(){}_s.prototype.g=function(m,b){return new In(m,b)};function In(m,b){jt.call(this),this.g=new ys(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(m?m["X-WebChannel-Client-Profile"]=b.sa:m={"X-WebChannel-Client-Profile":b.sa}),this.g.U=m,(m=b&&b.Qb)&&!O(m)&&(this.g.u=m),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!O(b)&&(this.g.G=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Ir(this)}v(In,jt),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Zu(this.g)},In.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var E={};E.__data__=m,m=E}else this.v&&(E={},E.__data__=cs(m),m=E);b.i.push(new Bt(b.Ya++,m)),b.I==3&&tr(b)},In.prototype.N=function(){this.g.l=null,delete this.j,Zu(this.g),delete this.g,In.Z.N.call(this)};function Dd(m){on.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const E in b){m=E;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}v(Dd,on);function Nd(){ii.call(this),this.status=1}v(Nd,ii);function Ir(m){this.g=m}v(Ir,Cd),Ir.prototype.ra=function(){Wt(this.g,"a")},Ir.prototype.qa=function(m){Wt(this.g,new Dd(m))},Ir.prototype.pa=function(m){Wt(this.g,new Nd)},Ir.prototype.oa=function(){Wt(this.g,"b")},_s.prototype.createWebChannel=_s.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,ZI=function(){return new _s},WI=function(){return Uo()},XI=Dt,$0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ra.NO_ERROR=0,Ra.TIMEOUT=8,Ra.HTTP_ERROR=6,nm=Ra,ju.COMPLETE="complete",YI=ju,ud.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",jt.prototype.listen=jt.prototype.J,$c=ud,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,QI=ot}).apply(typeof jf<"u"?jf:typeof self<"u"?self:typeof window<"u"?window:{});const Zw="@firebase/firestore",Jw="4.9.2";class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let wu="12.3.0";const Ao=new e_("@firebase/firestore");function Ml(){return Ao.logLevel}function ue(n,...e){if(Ao.logLevel<=Ge.DEBUG){const t=e.map(i_);Ao.debug(`Firestore (${wu}): ${n}`,...t)}}function Pt(n,...e){if(Ao.logLevel<=Ge.ERROR){const t=e.map(i_);Ao.error(`Firestore (${wu}): ${n}`,...t)}}function vh(n,...e){if(Ao.logLevel<=Ge.WARN){const t=e.map(i_);Ao.warn(`Firestore (${wu}): ${n}`,...t)}}function i_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ye(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,JI(n,i,t)}function JI(n,e,t){let i=`FIRESTORE (${wu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Pt(i),new Error(i)}function Te(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||JI(e,s,i)}function _e(n,e){return n}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class g3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vn.UNAUTHENTICATED)))}shutdown(){}}class v3{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xr,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},h=d=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Te(typeof i.accessToken=="string",31837,{l:i}),new g3(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class _3{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b3{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new _3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);const i=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new eS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function E3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class r_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=E3(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%62))}return i}}function ke(n,e){return n<e?-1:n>e?1:0}function Q0(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return a0(s)===a0(o)?ke(s,o):a0(s)?1:-1}return ke(n.length,e.length)}const w3=55296,S3=57343;function a0(n){const e=n.charCodeAt(0);return e>=w3&&e<=S3}function Jl(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function eR(n){return n+"\0"}const tS="__name__";class lr{constructor(e,t,i){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ye(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const o=lr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return ke(e.length,t.length)}static compareSegments(e,t){const i=lr.isNumericId(e),s=lr.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?lr.extractNumericId(e).compare(lr.extractNumericId(t)):Q0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ra.fromString(e.substring(4,e.length-2))}}class tt extends lr{construct(e,t,i){return new tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const x3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends lr{construct(e,t,i){return new Et(e,t,i)}static isValidIdentifier(e){return x3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tS}static keyField(){return new Et([tS])}static fromServerFormat(e){const t=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ce(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ce(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ce(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(i+=h,s++):(o(),s++)}if(o(),u)throw new ce(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(t)}static emptyPath(){return new Et([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(tt.fromString(e))}static fromName(e){return new me(tt.fromString(e).popFirst(5))}static empty(){return new me(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new tt(e.slice()))}}function tR(n,e,t){if(!t)throw new ce(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function A3(n,e,t,i){if(e===!0&&i===!0)throw new ce(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nS(n){if(!me.isDocumentKey(n))throw new ce(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iS(n){if(me.isDocumentKey(n))throw new ce(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function hp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function zi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hp(n);throw new ce(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Gh(n,e){if(!nR(n))throw new ce(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(s&&typeof u!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&u!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new ce(te.INVALID_ARGUMENT,t);return!0}const rS=-62135596800,sS=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*sS);return new Ze(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rS)throw new ce(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sS}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gh(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Yt("string",Ze._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Ze(0,0))}static max(){return new xe(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const eu=-1;class Cm{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function Y0(n){return n.fields.find((e=>e.kind===2))}function so(n){return n.fields.filter((e=>e.kind!==2))}Cm.UNKNOWN_ID=-1;class im{constructor(e,t){this.fieldPath=e,this.kind=t}}class _h{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _h(0,ni.min())}}function iR(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(i===1e9?new Ze(t+1,0):new Ze(t,i));return new ni(s,me.empty(),e)}function rR(n){return new ni(n.readTime,n.key,eu)}class ni{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ni(xe.min(),me.empty(),eu)}static max(){return new ni(xe.max(),me.empty(),eu)}}function s_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}const sR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function va(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==sR)throw n;ue("LocalStore","Unexpectedly lost primary lease")}class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,i)=>{t(e)}))}static reject(e){return new K(((t,i)=>{i(e)}))}static waitFor(e){return new K(((t,i)=>{let s=0,o=0,u=!1;e.forEach((h=>{++s,h.next((()=>{++o,u&&o===s&&t()}),(d=>i(d)))})),u=!0,o===s&&t()}))}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next((s=>s?K.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,o)=>{i.push(t.call(this,s,o))})),this.waitFor(i)}static mapArray(e,t){return new K(((i,s)=>{const o=e.length,u=new Array(o);let h=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{u[f]=g,++h,h===o&&i(u)}),(g=>s(g)))}}))}static doWhile(e,t){return new K(((i,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):i()};o()}))}}const Jn="SimpleDb";class dp{static open(e,t,i,s){try{return new dp(t,e.transaction(s,i))}catch(o){throw new eh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Xr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new eh(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=a_(i.target.error);this.S.reject(new eh(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ue(Jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new R3(t)}}class sa{static delete(e){return ue(Jn,"Removing database:",e),lo(MI().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!BI())return!1;if(sa.F())return!0;const e=en(),t=sa.M(e),i=0<t&&t<10,s=oR(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,sa.M(en())===12.2&&Pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ue(Jn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const u=o.target.result;t(u)},s.onblocked=()=>{i(new eh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const u=o.target.error;u.name==="VersionError"?i(new ce(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?i(new ce(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):i(new eh(e,u))},s.onupgradeneeded=o=>{ue(Jn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const u=o.target.result;this.N.k(u,s.transaction,o.oldVersion,this.version).next((()=>{ue(Jn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const o=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const h=dp.open(this.db,e,o?"readonly":"readwrite",i),d=s(h).next((f=>(h.C(),f))).catch((f=>(h.abort(f),K.reject(f)))).toPromise();return d.catch((()=>{})),await h.D,d}catch(h){const d=h,f=d.name!=="FirebaseError"&&u<3;if(ue(Jn,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class I3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return lo(this.U.delete())}}class eh extends ce{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _a(n){return n.name==="IndexedDbTransactionError"}class R3{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ue(Jn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ue(Jn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),lo(i)}add(e){return ue(Jn,"ADD",this.store.name,e,e),lo(this.store.add(e))}get(e){return lo(this.store.get(e)).next((t=>(t===void 0&&(t=null),ue(Jn,"GET",this.store.name,e,t),t)))}delete(e){return ue(Jn,"DELETE",this.store.name,e),lo(this.store.delete(e))}count(){return ue(Jn,"COUNT",this.store.name),lo(this.store.count())}J(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new K(((u,h)=>{o.onerror=d=>{h(d.target.error)},o.onsuccess=d=>{u(d.target.result)}}))}{const o=this.cursor(i),u=[];return this.H(o,((h,d)=>{u.push(d)})).next((()=>u))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new K(((s,o)=>{i.onerror=u=>{o(u.target.error)},i.onsuccess=u=>{s(u.target.result)}}))}Z(e,t){ue(Jn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,((o,u,h)=>h.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}te(e){const t=this.cursor({});return new K(((i,s)=>{t.onerror=o=>{const u=a_(o.target.error);s(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next((h=>{h?u.continue():i()})):i()}}))}H(e,t){const i=[];return new K(((s,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const d=new I3(h),f=t(h.primaryKey,h.value,d);if(f instanceof K){const g=f.catch((v=>(d.done(),K.reject(v))));i.push(g)}d.isDone?s():d.G===null?h.continue():h.continue(d.G)}})).next((()=>K.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lo(n){return new K(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=a_(i.target.error);t(s)}}))}let aS=!1;function a_(n){const e=sa.M(en());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aS||(aS=!0,setTimeout((()=>{throw i}),0)),i}}return n}const th="IndexBackfiller";class C3{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ue(th,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ue(th,`Documents written: ${t}`)}catch(t){_a(t)?ue(th,"Ignoring IndexedDB error during index backfill: ",t):await va(t)}await this.re(6e4)}))}}class D3{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,o=!0;return K.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!i.has(u))return ue(th,`Processing collection: ${u}`),this.oe(e,u,s).next((h=>{s-=h,i.add(u)}));o=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(s,o))).next((h=>(ue(th,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>u.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,o)=>{const u=rR(o);s_(u,i)>0&&(i=u)})),new ni(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class zn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zn.ce=-1;const go=-1;function fp(n){return n==null}function bh(n){return n===0&&1/n==-1/0}function lR(n){return typeof n=="number"&&Number.isInteger(n)&&!bh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Dm="";function wn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oS(e)),e=N3(n.get(t),e);return oS(e)}function N3(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Dm:t+="";break;default:t+=o}}return t}function oS(n){return n+Dm+""}function dr(n){const e=n.length;if(Te(e>=2,64408,{path:n}),e===2)return Te(n.charAt(0)===Dm&&n.charAt(1)==="",56145,{path:n}),tt.emptyPath();const t=e-2,i=[];let s="";for(let o=0;o<e;){const u=n.indexOf(Dm,o);switch((u<0||u>t)&&ye(50515,{path:n}),n.charAt(u+1)){case"":const h=n.substring(o,u);let d;s.length===0?d=h:(s+=h,d=s,s=""),i.push(d);break;case"":s+=n.substring(o,u),s+="\0";break;case"":s+=n.substring(o,u+1);break;default:ye(61167,{path:n})}o=u+2}return new tt(i)}const ao="remoteDocuments",Kh="owner",Il="owner",Th="mutationQueues",k3="userId",Oi="mutations",lS="batchId",fo="userMutationsIndex",uS=["userId","batchId"];function rm(n,e){return[n,wn(e)]}function uR(n,e,t){return[n,wn(e),t]}const V3={},tu="documentMutations",Nm="remoteDocumentsV14",M3=["prefixPath","collectionGroup","readTime","documentId"],sm="documentKeyIndex",P3=["prefixPath","collectionGroup","documentId"],cR="collectionGroupIndex",O3=["collectionGroup","readTime","prefixPath","documentId"],Eh="remoteDocumentGlobal",X0="remoteDocumentGlobalKey",nu="targets",hR="queryTargetsIndex",L3=["canonicalId","targetId"],iu="targetDocuments",j3=["targetId","path"],o_="documentTargetsIndex",z3=["path","targetId"],km="targetGlobalKey",yo="targetGlobal",wh="collectionParents",U3=["collectionId","parent"],ru="clientMetadata",B3="clientId",mp="bundles",F3="bundleId",pp="namedQueries",q3="name",l_="indexConfiguration",H3="indexId",W0="collectionGroupIndex",G3="collectionGroup",nh="indexState",K3=["indexId","uid"],dR="sequenceNumberIndex",$3=["uid","sequenceNumber"],ih="indexEntries",Q3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fR="documentKeyIndex",Y3=["indexId","uid","orderedDocumentKey"],gp="documentOverlays",X3=["userId","collectionPath","documentId"],Z0="collectionPathOverlayIndex",W3=["userId","collectionPath","largestBatchId"],mR="collectionGroupOverlayIndex",Z3=["userId","collectionGroup","largestBatchId"],u_="globals",J3="name",pR=[Th,Oi,tu,ao,nu,Kh,yo,iu,ru,Eh,wh,mp,pp],e5=[...pR,gp],gR=[Th,Oi,tu,Nm,nu,Kh,yo,iu,ru,Eh,wh,mp,pp,gp],yR=gR,c_=[...yR,l_,nh,ih],t5=c_,vR=[...c_,u_],n5=vR;class J0 extends aR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function tn(n,e){const t=_e(n);return sa.O(t.le,e)}function cS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ba(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _R(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zf(this.root,e,this.comparator,!0)}}class zf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??mn.RED,this.left=s??mn.EMPTY,this.right=o??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new mn(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return mn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,i,s,o){return this}insert(e,t,i){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class at{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hS(this.data.getIterator())}getIteratorFrom(e){return new hS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class hS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rl(n){return n.hasNext()?n.getNext():void 0}class Un{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new Un([])}unionWith(e){let t=new at(Et.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class bR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new bR("Invalid base64 string: "+o):o}})(e);return new Lt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o})(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const i5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(n){if(Te(!!n,39018),typeof n=="string"){let e=0;const t=i5.exec(n);if(Te(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function es(n){return typeof n=="string"?Lt.fromBase64String(n):Lt.fromUint8Array(n)}const TR="server_timestamp",ER="__type__",wR="__previous_value__",SR="__local_write_time__";function h_(n){return(n?.mapValue?.fields||{})[ER]?.stringValue===TR}function yp(n){const e=n.mapValue.fields[wR];return h_(e)?yp(e):e}function Sh(n){const e=Jr(n.mapValue.fields[SR].timestampValue);return new Ze(e.seconds,e.nanos)}class r5{constructor(e,t,i,s,o,u,h,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const Vm="(default)";class Io{constructor(e,t){this.projectId=e,this.database=t||Vm}static empty(){return new Io("","")}get isDefaultDatabase(){return this.database===Vm}isEqual(e){return e instanceof Io&&e.projectId===this.projectId&&e.database===this.database}}const d_="__type__",xR="__max__",ea={mapValue:{fields:{__type__:{stringValue:xR}}}},f_="__vector__",su="value",am={nullValue:"NULL_VALUE"};function la(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?h_(n)?4:AR(n)?9007199254740991:vp(n)?10:11:ye(28295,{value:n})}function Tr(n,e){if(n===e)return!0;const t=la(n);if(t!==la(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sh(n).isEqual(Sh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=Jr(s.timestampValue),h=Jr(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return es(s.bytesValue).isEqual(es(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return bt(s.geoPointValue.latitude)===bt(o.geoPointValue.latitude)&&bt(s.geoPointValue.longitude)===bt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return bt(s.integerValue)===bt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=bt(s.doubleValue),h=bt(o.doubleValue);return u===h?bh(u)===bh(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return Jl(n.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return(function(s,o){const u=s.mapValue.fields||{},h=o.mapValue.fields||{};if(cS(u)!==cS(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!Tr(u[d],h[d])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function xh(n,e){return(n.values||[]).find((t=>Tr(t,e)))!==void 0}function ua(n,e){if(n===e)return 0;const t=la(n),i=la(e);if(t!==i)return ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return(function(o,u){const h=bt(o.integerValue||o.doubleValue),d=bt(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,e);case 3:return dS(n.timestampValue,e.timestampValue);case 4:return dS(Sh(n),Sh(e));case 5:return Q0(n.stringValue,e.stringValue);case 6:return(function(o,u){const h=es(o),d=es(u);return h.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,u){const h=o.split("/"),d=u.split("/");for(let f=0;f<h.length&&f<d.length;f++){const g=ke(h[f],d[f]);if(g!==0)return g}return ke(h.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,u){const h=ke(bt(o.latitude),bt(u.latitude));return h!==0?h:ke(bt(o.longitude),bt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return fS(n.arrayValue,e.arrayValue);case 10:return(function(o,u){const h=o.fields||{},d=u.fields||{},f=h[su]?.arrayValue,g=d[su]?.arrayValue,v=ke(f?.values?.length||0,g?.values?.length||0);return v!==0?v:fS(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,u){if(o===ea.mapValue&&u===ea.mapValue)return 0;if(o===ea.mapValue)return 1;if(u===ea.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),f=u.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const _=Q0(d[v],g[v]);if(_!==0)return _;const S=ua(h[d[v]],f[g[v]]);if(S!==0)return S}return ke(d.length,g.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function dS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=Jr(n),i=Jr(e),s=ke(t.seconds,i.seconds);return s!==0?s:ke(t.nanos,i.nanos)}function fS(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const o=ua(t[s],i[s]);if(o)return o}return ke(t.length,i.length)}function au(n){return ev(n)}function ev(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Jr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return es(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const o of t.values||[])s?s=!1:i+=",",i+=ev(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const u of i)o?o=!1:s+=",",s+=`${u}:${ev(t.fields[u])}`;return s+"}"})(n.mapValue):ye(61005,{value:n})}function om(n){switch(la(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yp(n);return e?16+om(e):16;case 5:return 2*n.stringValue.length;case 6:return es(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+om(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return ba(i.fields,((o,u)=>{s+=o.length+om(u)})),s})(n.mapValue);default:throw ye(13486,{value:n})}}function Ah(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tv(n){return!!n&&"integerValue"in n}function Ih(n){return!!n&&"arrayValue"in n}function mS(n){return!!n&&"nullValue"in n}function pS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lm(n){return!!n&&"mapValue"in n}function vp(n){return(n?.mapValue?.fields||{})[d_]?.stringValue===f_}function rh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ba(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=rh(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rh(n.arrayValue.values[t]);return e}return{...n}}function AR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xR}const IR={mapValue:{fields:{[d_]:{stringValue:f_},[su]:{arrayValue:{}}}}};function s5(n){return"nullValue"in n?am:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ah(Io.empty(),me.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?vp(n)?IR:{mapValue:{}}:ye(35942,{value:n})}function a5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ah(Io.empty(),me.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?IR:"mapValue"in n?vp(n)?{mapValue:{}}:ea:ye(61959,{value:n})}function gS(n,e){const t=ua(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yS(n,e){const t=ua(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!lm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rh(t)}setAll(e){let t=Et.emptyPath(),i={},s=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,i,s),i={},s=[],t=h.popLast()}u?i[h.lastSegment()]=rh(u):s.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){const t=this.field(e.popLast());lm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];lm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){ba(t,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new bn(rh(this.value))}}function RR(n){const e=[];return ba(n.fields,((t,i)=>{const s=new Et([t]);if(lm(i)){const o=RR(i.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)})),new Un(e)}class Ct{constructor(e,t,i,s,o,u,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Ct(e,0,xe.min(),xe.min(),xe.min(),bn.empty(),0)}static newFoundDocument(e,t,i,s){return new Ct(e,1,t,xe.min(),i,s,0)}static newNoDocument(e,t){return new Ct(e,2,t,xe.min(),xe.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new Ct(e,3,t,xe.min(),xe.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ou{constructor(e,t){this.position=e,this.inclusive=t}}function vS(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],u=n.position[s];if(o.field.isKeyField()?i=me.comparator(me.fromName(u.referenceValue),t.key):i=ua(u,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function _S(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tr(n.position[t],e.position[t]))return!1;return!0}class Rh{constructor(e,t="asc"){this.field=e,this.dir=t}}function o5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class CR{}class Ke extends CR{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new l5(e,t,i):t==="array-contains"?new h5(e,i):t==="in"?new PR(e,i):t==="not-in"?new d5(e,i):t==="array-contains-any"?new f5(e,i):new Ke(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new u5(e,i):new c5(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ua(t,this.value)):t!==null&&la(this.value)===la(t)&&this.matchesComparison(ua(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class st extends CR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new st(e,t)}matches(e){return lu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lu(n){return n.op==="and"}function nv(n){return n.op==="or"}function m_(n){return DR(n)&&lu(n)}function DR(n){for(const e of n.filters)if(e instanceof st)return!1;return!0}function iv(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+au(n.value);if(m_(n))return n.filters.map((e=>iv(e))).join(",");{const e=n.filters.map((t=>iv(t))).join(",");return`${n.op}(${e})`}}function NR(n,e){return n instanceof Ke?(function(i,s){return s instanceof Ke&&i.op===s.op&&i.field.isEqual(s.field)&&Tr(i.value,s.value)})(n,e):n instanceof st?(function(i,s){return s instanceof st&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,u,h)=>o&&NR(u,s.filters[h])),!0):!1})(n,e):void ye(19439)}function kR(n,e){const t=n.filters.concat(e);return st.create(t,n.op)}function VR(n){return n instanceof Ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${au(t.value)}`})(n):n instanceof st?(function(t){return t.op.toString()+" {"+t.getFilters().map(VR).join(" ,")+"}"})(n):"Filter"}class l5 extends Ke{constructor(e,t,i){super(e,t,i),this.key=me.fromName(i.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class u5 extends Ke{constructor(e,t){super(e,"in",t),this.keys=MR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class c5 extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=MR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function MR(n,e){return(e.arrayValue?.values||[]).map((t=>me.fromName(t.referenceValue)))}class h5 extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ih(t)&&xh(t.arrayValue,this.value)}}class PR extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xh(this.value.arrayValue,t)}}class d5 extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(xh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xh(this.value.arrayValue,t)}}class f5 extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ih(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>xh(this.value.arrayValue,i)))}}class m5{constructor(e,t=null,i=[],s=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=u,this.endAt=h,this.Te=null}}function rv(n,e=null,t=[],i=[],s=null,o=null,u=null){return new m5(n,e,t,i,s,o,u)}function Ro(n){const e=_e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>iv(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>au(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>au(i))).join(",")),e.Te=t}return e.Te}function $h(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!o5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_S(n.startAt,e.startAt)&&_S(n.endAt,e.endAt)}function Mm(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Pm(n,e){return n.filters.filter((t=>t instanceof Ke&&t.field.isEqual(e)))}function bS(n,e,t){let i=am,s=!0;for(const o of Pm(n,e)){let u=am,h=!0;switch(o.op){case"<":case"<=":u=s5(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=am}gS({value:i,inclusive:s},{value:u,inclusive:h})<0&&(i=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];gS({value:i,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(i=u,s=t.inclusive);break}}return{value:i,inclusive:s}}function TS(n,e,t){let i=ea,s=!0;for(const o of Pm(n,e)){let u=ea,h=!0;switch(o.op){case">=":case">":u=a5(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=ea}yS({value:i,inclusive:s},{value:u,inclusive:h})>0&&(i=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];yS({value:i,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(i=u,s=t.inclusive);break}}return{value:i,inclusive:s}}class Su{constructor(e,t=null,i=[],s=[],o=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OR(n,e,t,i,s,o,u,h){return new Su(n,e,t,i,s,o,u,h)}function _p(n){return new Su(n)}function ES(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function LR(n){return n.collectionGroup!==null}function sh(n){const e=_e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new at(Et.comparator);return u.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(h=h.add(f.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Rh(o,i))})),t.has(Et.keyField().canonicalString())||e.Ie.push(new Rh(Et.keyField(),i))}return e.Ie}function ti(n){const e=_e(n);return e.Ee||(e.Ee=p5(e,sh(n))),e.Ee}function p5(n,e){if(n.limitType==="F")return rv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Rh(s.field,o)}));const t=n.endAt?new ou(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ou(n.startAt.position,n.startAt.inclusive):null;return rv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function sv(n,e){const t=n.filters.concat([e]);return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Om(n,e,t){return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bp(n,e){return $h(ti(n),ti(e))&&n.limitType===e.limitType}function jR(n){return`${Ro(ti(n))}|lt:${n.limitType}`}function Pl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>VR(s))).join(", ")}]`),fp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>au(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>au(s))).join(",")),`Target(${i})`})(ti(n))}; limitType=${n.limitType})`}function Qh(n,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,s){for(const o of sh(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(u,h,d){const f=vS(u,h,d);return u.inclusive?f<=0:f<0})(i.startAt,sh(i),s)||i.endAt&&!(function(u,h,d){const f=vS(u,h,d);return u.inclusive?f>=0:f>0})(i.endAt,sh(i),s))})(n,e)}function zR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UR(n){return(e,t)=>{let i=!1;for(const s of sh(n)){const o=g5(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function g5(n,e,t){const i=n.field.isKeyField()?me.comparator(e.key,t.key):(function(o,u,h){const d=u.data.field(o),f=h.data.field(o);return d!==null&&f!==null?ua(d,f):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ye(19790,{direction:n.dir})}}class as{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,((t,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return _R(this.inner)}size(){return this.innerSize}}const y5=new mt(me.comparator);function ei(){return y5}const BR=new mt(me.comparator);function Qc(...n){let e=BR;for(const t of n)e=e.insert(t.key,t);return e}function FR(n){let e=BR;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function fr(){return ah()}function qR(){return ah()}function ah(){return new as((n=>n.toString()),((n,e)=>n.isEqual(e)))}const v5=new mt(me.comparator),_5=new at(me.comparator);function ze(...n){let e=_5;for(const t of n)e=e.add(t);return e}const b5=new at(ke);function p_(){return b5}function g_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bh(e)?"-0":e}}function HR(n){return{integerValue:""+n}}function T5(n,e){return lR(e)?HR(e):g_(n,e)}class Tp{constructor(){this._=void 0}}function E5(n,e,t){return n instanceof Ch?(function(s,o){const u={fields:{[ER]:{stringValue:TR},[SR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&h_(o)&&(o=yp(o)),o&&(u.fields[wR]=o),{mapValue:u}})(t,e):n instanceof uu?KR(n,e):n instanceof cu?$R(n,e):(function(s,o){const u=GR(s,o),h=wS(u)+wS(s.Ae);return tv(u)&&tv(s.Ae)?HR(h):g_(s.serializer,h)})(n,e)}function w5(n,e,t){return n instanceof uu?KR(n,e):n instanceof cu?$R(n,e):t}function GR(n,e){return n instanceof Dh?(function(i){return tv(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Ch extends Tp{}class uu extends Tp{constructor(e){super(),this.elements=e}}function KR(n,e){const t=QR(e);for(const i of n.elements)t.some((s=>Tr(s,i)))||t.push(i);return{arrayValue:{values:t}}}class cu extends Tp{constructor(e){super(),this.elements=e}}function $R(n,e){let t=QR(e);for(const i of n.elements)t=t.filter((s=>!Tr(s,i)));return{arrayValue:{values:t}}}class Dh extends Tp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function wS(n){return bt(n.integerValue||n.doubleValue)}function QR(n){return Ih(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class S5{constructor(e,t){this.field=e,this.transform=t}}function x5(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof uu&&s instanceof uu||i instanceof cu&&s instanceof cu?Jl(i.elements,s.elements,Tr):i instanceof Dh&&s instanceof Dh?Tr(i.Ae,s.Ae):i instanceof Ch&&s instanceof Ch})(n.transform,e.transform)}class A5{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function um(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ep{}function YR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wp(n.key,Tn.none()):new xu(n.key,n.data,Tn.none());{const t=n.data,i=bn.empty();let s=new at(Et.comparator);for(let o of e.fields)if(!s.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?i.delete(o):i.set(o,u),s=s.add(o)}return new os(n.key,i,new Un(s.toArray()),Tn.none())}}function I5(n,e,t){n instanceof xu?(function(s,o,u){const h=s.value.clone(),d=xS(s.fieldTransforms,o,u.transformResults);h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof os?(function(s,o,u){if(!um(s.precondition,o))return void o.convertToUnknownDocument(u.version);const h=xS(s.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(XR(s)),d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function oh(n,e,t,i){return n instanceof xu?(function(o,u,h,d){if(!um(o.precondition,u))return h;const f=o.value.clone(),g=AS(o.fieldTransforms,d,u);return f.setAll(g),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof os?(function(o,u,h,d){if(!um(o.precondition,u))return h;const f=AS(o.fieldTransforms,d,u),g=u.data;return g.setAll(XR(o)),g.setAll(f),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(o,u,h){return um(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function R5(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=GR(i.transform,s||null);o!=null&&(t===null&&(t=bn.empty()),t.set(i.field,o))}return t||null}function SS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Jl(i,s,((o,u)=>x5(o,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xu extends Ep{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class os extends Ep{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function XR(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function xS(n,e,t){const i=new Map;Te(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],u=o.transform,h=e.data.field(o.field);i.set(o.field,w5(u,h,t[s]))}return i}function AS(n,e,t){const i=new Map;for(const s of n){const o=s.transform,u=t.data.field(s.field);i.set(s.field,E5(o,u,e))}return i}class wp extends Ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WR extends Ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class y_{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&I5(o,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=oh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=oh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=qR();return this.mutations.forEach((s=>{const o=e.get(s.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(s.key)?null:h;const d=YR(u,h);d!==null&&i.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(xe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((t,i)=>SS(t,i)))&&Jl(this.baseMutations,e.baseMutations,((t,i)=>SS(t,i)))}}class v_{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Te(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return v5})();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,i[u].version);return new v_(e,t,i,s)}}class __{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class C5{constructor(e,t){this.count=e,this.unchangedNames=t}}var $t,Ye;function D5(n){switch(n){case te.OK:return ye(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function ZR(n){if(n===void 0)return Pt("GRPC error has no .code"),te.UNKNOWN;switch(n){case $t.OK:return te.OK;case $t.CANCELLED:return te.CANCELLED;case $t.UNKNOWN:return te.UNKNOWN;case $t.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case $t.INTERNAL:return te.INTERNAL;case $t.UNAVAILABLE:return te.UNAVAILABLE;case $t.UNAUTHENTICATED:return te.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case $t.NOT_FOUND:return te.NOT_FOUND;case $t.ALREADY_EXISTS:return te.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return te.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case $t.ABORTED:return te.ABORTED;case $t.OUT_OF_RANGE:return te.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return te.UNIMPLEMENTED;case $t.DATA_LOSS:return te.DATA_LOSS;default:return ye(39323,{code:n})}}(Ye=$t||($t={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function N5(){return new TextEncoder}const k5=new ra([4294967295,4294967295],0);function IS(n){const e=N5().encode(n),t=new $I;return t.update(e),new Uint8Array(t.digest())}function RS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ra([t,i],0),new ra([s,o],0)]}class b_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Yc(`Invalid padding: ${t}`);if(i<0)throw new Yc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Yc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ra.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(ra.fromNumber(i)));return s.compare(k5)===1&&(s=new ra([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=IS(e),[i,s]=RS(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(i,s,o);if(!this.we(u))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new b_(o,s,t);return i.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=IS(e),[i,s]=RS(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(i,s,o);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yh{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Xh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Yh(xe.min(),s,new mt(ke),ei(),ze())}}class Xh{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Xh(i,t,ze(),ze(),ze())}}class cm{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class JR{constructor(e,t){this.targetId=e,this.Ce=t}}class e2{constructor(e,t,i=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class CS{constructor(){this.ve=0,this.Fe=DS(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),i=ze();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ye(38017,{changeType:o})}})),new Xh(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=DS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class V5{constructor(e){this.Ge=e,this.ze=new Map,this.je=ei(),this.Je=Uf(),this.He=Uf(),this.Ye=new mt(ke)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Mm(o))if(i===0){const u=new me(o.path);this.et(t,u,Ct.newNoDocument(u,xe.min()))}else Te(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const h=this.ut(e),d=h?this.ct(h,e,u):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t;let u,h;try{u=es(i).toUint8Array()}catch(d){if(d instanceof bR)return vh("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new b_(u,s,o)}catch(d){return vh(d instanceof Yc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((o=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,u)=>{const h=this.ot(u);if(h){if(o.current&&Mm(h.target)){const d=new me(h.target.path);this.It(d).has(u)||this.Et(u,d)||this.et(u,d,Ct.newNoDocument(d,e))}o.Be&&(t.set(u,o.ke()),o.qe())}}));let i=ze();this.He.forEach(((o,u)=>{let h=!0;u.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const s=new Yh(e,t,this.Ye,this.je,i);return this.je=ei(),this.Je=Uf(),this.He=Uf(),this.Ye=new mt(ke),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new CS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new at(ke),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new at(ke),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new CS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Uf(){return new mt(me.comparator)}function DS(){return new mt(me.comparator)}const M5={asc:"ASCENDING",desc:"DESCENDING"},P5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O5={and:"AND",or:"OR"};class L5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function av(n,e){return n.useProto3Json||fp(e)?e:{value:e}}function hu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function j5(n,e){return hu(n,e.toTimestamp())}function Dn(n){return Te(!!n,49232),xe.fromTimestamp((function(t){const i=Jr(t);return new Ze(i.seconds,i.nanos)})(n))}function T_(n,e){return ov(n,e).canonicalString()}function ov(n,e){const t=(function(s){return new tt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function n2(n){const e=tt.fromString(n);return Te(h2(e),10190,{key:e.toString()}),e}function Lm(n,e){return T_(n.databaseId,e.path)}function vo(n,e){const t=n2(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(s2(t))}function i2(n,e){return T_(n.databaseId,e)}function r2(n){const e=n2(n);return e.length===4?tt.emptyPath():s2(e)}function lv(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function s2(n){return Te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function NS(n,e,t){return{name:Lm(n,e),fields:t.value.mapValue.fields}}function z5(n,e,t){const i=vo(n,e.name),s=Dn(e.updateTime),o=e.createTime?Dn(e.createTime):xe.min(),u=new bn({mapValue:{fields:e.fields}}),h=Ct.newFoundDocument(i,s,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function U5(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ye(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Te(g===void 0||typeof g=="string",58123),Lt.fromBase64String(g||"")):(Te(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Lt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(f){const g=f.code===void 0?te.UNKNOWN:ZR(f.code);return new ce(g,f.message||"")})(u);t=new e2(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=vo(n,i.document.name),o=Dn(i.document.updateTime),u=i.document.createTime?Dn(i.document.createTime):xe.min(),h=new bn({mapValue:{fields:i.document.fields}}),d=Ct.newFoundDocument(s,o,u,h),f=i.targetIds||[],g=i.removedTargetIds||[];t=new cm(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=vo(n,i.document),o=i.readTime?Dn(i.readTime):xe.min(),u=Ct.newNoDocument(s,o),h=i.removedTargetIds||[];t=new cm([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=vo(n,i.document),o=i.removedTargetIds||[];t=new cm([],o,s,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,u=new C5(s,o),h=i.targetId;t=new JR(h,u)}}return t}function jm(n,e){let t;if(e instanceof xu)t={update:NS(n,e.key,e.value)};else if(e instanceof wp)t={delete:Lm(n,e.key)};else if(e instanceof os)t={update:NS(n,e.key,e.data),updateMask:K5(e.fieldMask)};else{if(!(e instanceof WR))return ye(16599,{Vt:e.type});t={verify:Lm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,u){const h=u.transform;if(h instanceof Ch)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof uu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof cu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Dh)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw ye(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:j5(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye(27497)})(n,e.precondition)),t}function uv(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Tn.updateTime(Dn(o.updateTime)):o.exists!==void 0?Tn.exists(o.exists):Tn.none()})(e.currentDocument):Tn.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(u,h){let d=null;if("setToServerValue"in h)Te(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),d=new Ch;else if("appendMissingElements"in h){const g=h.appendMissingElements.values||[];d=new uu(g)}else if("removeAllFromArray"in h){const g=h.removeAllFromArray.values||[];d=new cu(g)}else"increment"in h?d=new Dh(u,h.increment):ye(16584,{proto:h});const f=Et.fromServerFormat(h.fieldPath);return new S5(f,d)})(n,s))):[];if(e.update){e.update.name;const s=vo(n,e.update.name),o=new bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(d){const f=d.fieldPaths||[];return new Un(f.map((g=>Et.fromServerFormat(g))))})(e.updateMask);return new os(s,o,u,t,i)}return new xu(s,o,t,i)}if(e.delete){const s=vo(n,e.delete);return new wp(s,t)}if(e.verify){const s=vo(n,e.verify);return new WR(s,t)}return ye(1463,{proto:e})}function B5(n,e){return n&&n.length>0?(Te(e!==void 0,14353),n.map((t=>(function(s,o){let u=s.updateTime?Dn(s.updateTime):Dn(o);return u.isEqual(xe.min())&&(u=Dn(o)),new A5(u,s.transformResults||[])})(t,e)))):[]}function a2(n,e){return{documents:[i2(n,e.path)]}}function o2(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=i2(n,s);const o=(function(f){if(f.length!==0)return c2(st.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const u=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:Ol(_.field),direction:q5(_.dir)}})(g)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=av(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function l2(n){let e=r2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Te(i===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(v){const _=u2(v);return _ instanceof st&&m_(_)?_.getFilters():[_]})(t.where));let u=[];t.orderBy&&(u=(function(v){return v.map((_=>(function(R){return new Rh(Ll(R.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(_)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let _;return _=typeof v=="object"?v.value:v,fp(_)?null:_})(t.limit));let d=null;t.startAt&&(d=(function(v){const _=!!v.before,S=v.values||[];return new ou(S,_)})(t.startAt));let f=null;return t.endAt&&(f=(function(v){const _=!v.before,S=v.values||[];return new ou(S,_)})(t.endAt)),OR(e,s,u,o,h,"F",d,f)}function F5(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function u2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ll(t.unaryFilter.field);return Ke.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ll(t.unaryFilter.field);return Ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ll(t.unaryFilter.field);return Ke.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ll(t.unaryFilter.field);return Ke.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ke.create(Ll(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return st.create(t.compositeFilter.filters.map((i=>u2(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function q5(n){return M5[n]}function H5(n){return P5[n]}function G5(n){return O5[n]}function Ol(n){return{fieldPath:n.canonicalString()}}function Ll(n){return Et.fromServerFormat(n.fieldPath)}function c2(n){return n instanceof Ke?(function(t){if(t.op==="=="){if(pS(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NAN"}};if(mS(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pS(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NOT_NAN"}};if(mS(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ol(t.field),op:H5(t.op),value:t.value}}})(n):n instanceof st?(function(t){const i=t.getFilters().map((s=>c2(s)));return i.length===1?i[0]:{compositeFilter:{op:G5(t.op),filters:i}}})(n):ye(54877,{filter:n})}function K5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function h2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Kr{constructor(e,t,i,s,o=xe.min(),u=xe.min(),h=Lt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class d2{constructor(e){this.yt=e}}function $5(n,e){let t;if(e.document)t=z5(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=me.fromSegments(e.noDocument.path),s=Do(e.noDocument.readTime);t=Ct.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const i=me.fromSegments(e.unknownDocument.path),s=Do(e.unknownDocument.version);t=Ct.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const o=new Ze(s[0],s[1]);return xe.fromTimestamp(o)})(e.readTime)),t}function kS(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:zm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,u){return{name:Lm(o,u.key),fields:u.data.value.mapValue.fields,updateTime:hu(o,u.version.toTimestamp()),createTime:hu(o,u.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Co(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Co(e.version)}}return i}function zm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Co(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Do(n){const e=new Ze(n.seconds,n.nanoseconds);return xe.fromTimestamp(e)}function uo(n,e){const t=(e.baseMutations||[]).map((o=>uv(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>uv(n.yt,o))),s=Ze.fromMillis(e.localWriteTimeMs);return new y_(e.batchId,s,t,i)}function Xc(n){const e=Do(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Do(n.lastLimboFreeSnapshotVersion):xe.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const u=o.documents.length;return Te(u===1,1966,{count:u}),ti(_p(r2(o.documents[0])))})(n.query):(function(o){return ti(l2(o))})(n.query),new Kr(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Lt.fromBase64String(n.resumeToken))}function f2(n,e){const t=Co(e.snapshotVersion),i=Co(e.lastLimboFreeSnapshotVersion);let s;s=Mm(e.target)?a2(n.yt,e.target):o2(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ro(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function m2(n){const e=l2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Om(e,e.limit,"L"):e}function o0(n,e){return new __(e.largestBatchId,uv(n.yt,e.overlayMutation))}function VS(n,e){const t=e.path.lastSegment();return[n,wn(e.path.popLast()),t]}function MS(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Co(i.readTime),documentKey:wn(i.documentKey.path),largestBatchId:i.largestBatchId}}class Q5{getBundleMetadata(e,t){return PS(e).get(t).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:Do(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,t){return PS(e).put((function(s){return{bundleId:s.id,createTime:Co(Dn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return OS(e).get(t).next((i=>{if(i)return(function(o){return{name:o.name,query:m2(o.bundledQuery),readTime:Do(o.readTime)}})(i)}))}saveNamedQuery(e,t){return OS(e).put((function(s){return{name:s.name,readTime:Co(Dn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function PS(n){return tn(n,mp)}function OS(n){return tn(n,pp)}class Sp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Sp(e,i)}getOverlay(e,t){return Uc(e).get(VS(this.userId,t)).next((i=>i?o0(this.serializer,i):null))}getOverlays(e,t){const i=fr();return K.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((o,u)=>{const h=new __(t,u);s.push(this.St(e,h))})),K.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((u=>s.add(wn(u.getCollectionPath()))));const o=[];return s.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);o.push(Uc(e).Z(Z0,h))})),K.waitFor(o)}getOverlaysForCollection(e,t,i){const s=fr(),o=wn(t),u=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Uc(e).J(Z0,u).next((h=>{for(const d of h){const f=o0(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const o=fr();let u;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Uc(e).ee({index:mR,range:h},((d,f,g)=>{const v=o0(this.serializer,f);o.size()<s||v.largestBatchId===u?(o.set(v.getKey(),v),u=v.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Uc(e).put((function(s,o,u){const[h,d,f]=VS(o,u.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:jm(s.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Uc(n){return tn(n,gp)}class Y5{bt(e){return tn(e,u_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Lt.fromUint8Array(i):Lt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class co{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(bt(e.integerValue));else if("doubleValue"in e){const i=bt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),bh(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Jr(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(es(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?AR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):vp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ye(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const s=su,o=i[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(bt(o)),this.Ot(s,t),this.Ct(i[s],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),me.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}co.Kt=new co;const Cl=255;function X5(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function LS(n){const e=64-(function(i){let s=0;for(let o=0;o<8;++o){const u=X5(255&i[o]);if(s+=u,u!==8)break}return s})(n);return Math.ceil(e/8)}class W5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),i=LS(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=LS(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Cl),this.sn(255)}_n(){this.an(Cl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Cl?(this.sn(Cl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Cl?(this.an(Cl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class Z5{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class J5{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Bc{constructor(){this.cn=new W5,this.ln=new Z5(this.cn),this.hn=new J5(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ho{constructor(e,t,i,s){this.Tn=e,this.In=t,this.En=i,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new ho(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:hm(this.En),directionalValue:hm(this.dn),orderedDocumentKey:hm(t),documentKey:i.path.toArray()}}Vn(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Fs(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=jS(n.En,e.En),t!==0?t:(t=jS(n.dn,e.dn),t!==0?t:me.comparator(n.In,e.In)))}function jS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function hm(n){return UI()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function zS(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class US{constructor(e){this.mn=new at(((t,i)=>Et.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Te(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Y0(e);if(t!==void 0&&!this.wn(t))return!1;const i=so(e);let s=new Set,o=0,u=0;for(;o<i.length&&this.wn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const d=i[o];if(!this.Sn(h,d)||!this.bn(this.fn[u++],d))return!1}++o}for(;o<i.length;++o){const h=i[o];if(u>=this.fn.length||!this.bn(this.fn[u++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new at(Et.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new im(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new im(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new im(i.field,i.dir==="asc"?0:1)));return new Cm(Cm.UNKNOWN_ID,this.collectionId,t,_h.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function p2(n){if(Te(n instanceof Ke||n instanceof st,20012),n instanceof Ke){if(n instanceof PR){const t=n.value.arrayValue?.values?.map((i=>Ke.create(n.field,"==",i)))||[];return st.create(t,"or")}return n}const e=n.filters.map((t=>p2(t)));return st.create(e,n.op)}function e6(n){if(n.getFilters().length===0)return[];const e=dv(p2(n));return Te(g2(e),7391),cv(e)||hv(e)?[e]:e.getFilters()}function cv(n){return n instanceof Ke}function hv(n){return n instanceof st&&m_(n)}function g2(n){return cv(n)||hv(n)||(function(t){if(t instanceof st&&nv(t)){for(const i of t.getFilters())if(!cv(i)&&!hv(i))return!1;return!0}return!1})(n)}function dv(n){if(Te(n instanceof Ke||n instanceof st,34018),n instanceof Ke)return n;if(n.filters.length===1)return dv(n.filters[0]);const e=n.filters.map((i=>dv(i)));let t=st.create(e,n.op);return t=Um(t),g2(t)?t:(Te(t instanceof st,64498),Te(lu(t),40251),Te(t.filters.length>1,57927),t.filters.reduce(((i,s)=>E_(i,s))))}function E_(n,e){let t;return Te(n instanceof Ke||n instanceof st,38388),Te(e instanceof Ke||e instanceof st,25473),t=n instanceof Ke?e instanceof Ke?(function(s,o){return st.create([s,o],"and")})(n,e):BS(n,e):e instanceof Ke?BS(e,n):(function(s,o){if(Te(s.filters.length>0&&o.filters.length>0,48005),lu(s)&&lu(o))return kR(s,o.getFilters());const u=nv(s)?s:o,h=nv(s)?o:s,d=u.filters.map((f=>E_(f,h)));return st.create(d,"or")})(n,e),Um(t)}function BS(n,e){if(lu(e))return kR(e,n.getFilters());{const t=e.filters.map((i=>E_(n,i)));return st.create(t,"or")}}function Um(n){if(Te(n instanceof Ke||n instanceof st,11850),n instanceof Ke)return n;const e=n.getFilters();if(e.length===1)return Um(e[0]);if(DR(n))return n;const t=e.map((s=>Um(s))),i=[];return t.forEach((s=>{s instanceof Ke?i.push(s):s instanceof st&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:st.create(i,n.op)}class t6{constructor(){this.Cn=new w_}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ni.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class w_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new at(tt.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new at(tt.comparator)).toArray()}}const FS="IndexedDbIndexManager",Bf=new Uint8Array(0);class n6{constructor(e,t){this.databaseId=t,this.vn=new w_,this.Fn=new as((i=>Ro(i)),((i,s)=>$h(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:i,parent:wn(s)};return qS(e).put(o)}return K.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[eR(t),""],!1,!0);return qS(e).J(s).next((o=>{for(const u of o){if(u.collectionId!==t)break;i.push(dr(u.parent))}return i}))}addFieldIndex(e,t){const i=Fc(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=i.add(s);if(t.indexState){const u=Nl(e);return o.next((h=>{u.put(MS(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const i=Fc(e),s=Nl(e),o=Dl(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Fc(e),i=Dl(e),s=Nl(e);return t.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return K.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const o=new US(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const i=Dl(e);let s=!0;const o=new Map;return K.forEach(this.Mn(t),(u=>this.xn(e,u).next((h=>{s&&(s=!!h),o.set(u,h)})))).next((()=>{if(s){let u=ze();const h=[];return K.forEach(o,((d,f)=>{ue(FS,`Using index ${(function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map((J=>`${J.fieldPath}:${J.kind}`)).join(",")}`})(d)} to execute ${Ro(t)}`);const g=(function(L,J){const ie=Y0(J);if(ie===void 0)return null;for(const ne of Pm(L,ie.fieldPath))switch(ne.op){case"array-contains-any":return ne.value.arrayValue.values||[];case"array-contains":return[ne.value]}return null})(f,d),v=(function(L,J){const ie=new Map;for(const ne of so(J))for(const C of Pm(L,ne.fieldPath))switch(C.op){case"==":case"in":ie.set(ne.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return ie.set(ne.fieldPath.canonicalString(),C.value),Array.from(ie.values())}return null})(f,d),_=(function(L,J){const ie=[];let ne=!0;for(const C of so(J)){const A=C.kind===0?bS(L,C.fieldPath,L.startAt):TS(L,C.fieldPath,L.startAt);ie.push(A.value),ne&&(ne=A.inclusive)}return new ou(ie,ne)})(f,d),S=(function(L,J){const ie=[];let ne=!0;for(const C of so(J)){const A=C.kind===0?TS(L,C.fieldPath,L.endAt):bS(L,C.fieldPath,L.endAt);ie.push(A.value),ne&&(ne=A.inclusive)}return new ou(ie,ne)})(f,d),R=this.On(d,f,_),k=this.On(d,f,S),V=this.Nn(d,f,v),j=this.Bn(d.indexId,g,R,_.inclusive,k,S.inclusive,V);return K.forEach(j,(M=>i.Y(M,t.limit).next((L=>{L.forEach((J=>{const ie=me.fromSegments(J.documentKey);u.has(ie)||(u=u.add(ie),h.push(ie))}))}))))})).next((()=>h))}return K.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=e6(st.create(e.filters,"and")).map((i=>rv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,s,o,u,h){const d=(t!=null?t.length:1)*Math.max(i.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let v=0;v<d;++v){const _=t?this.Ln(t[v/f]):Bf,S=this.kn(e,_,i[v%f],s),R=this.qn(e,_,o[v%f],u),k=h.map((V=>this.kn(e,_,V,!0)));g.push(...this.createRange(S,R,k))}return g}kn(e,t,i,s){const o=new ho(e,me.empty(),t,i);return s?o:o.An()}qn(e,t,i,s){const o=new ho(e,me.empty(),t,i);return s?o.An():o}xn(e,t){const i=new US(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let u=null;for(const h of o)i.yn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(e,t){let i=2;const s=this.Mn(t);return K.forEach(s,(o=>this.xn(e,o).next((u=>{u?i!==0&&u.fields.length<(function(d){let f=new at(Et.comparator),g=!1;for(const v of d.filters)for(const _ of v.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?g=!0:f=f.add(_.field));for(const v of d.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(g?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(u){return u.limit!==null})(t)&&s.length>1&&i===2?1:i))}Qn(e,t){const i=new Bc;for(const s of so(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const u=i.Pn(s.kind);co.Kt.Dt(o,u)}return i.un()}Ln(e){const t=new Bc;return co.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Bc;return co.Kt.Dt(Ah(this.databaseId,t),i.Pn((function(o){const u=so(o);return u.length===0?0:u[u.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let s=[];s.push(new Bc);let o=0;for(const u of so(e)){const h=i[o++];for(const d of s)if(this.Un(t,u.fieldPath)&&Ih(h))s=this.Kn(s,u,h);else{const f=d.Pn(u.kind);co.Kt.Dt(h,f)}}return this.Wn(s)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const s=[...e],o=[];for(const u of i.arrayValue.values||[])for(const h of s){const d=new Bc;d.seed(h.un()),co.Kt.Dt(u,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((i=>i instanceof Ke&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Fc(e),s=Nl(e);return(t?i.J(W0,IDBKeyRange.bound(t,t)):i.J()).next((o=>{const u=[];return K.forEach(o,(h=>s.get([h.indexId,this.uid]).next((d=>{u.push((function(g,v){const _=v?new _h(v.sequenceNumber,new ni(Do(v.readTime),new me(dr(v.documentKey)),v.largestBatchId)):_h.empty(),S=g.fields.map((([R,k])=>new im(Et.fromServerFormat(R),k)));return new Cm(g.indexId,g.collectionGroup,S,_)})(h,d))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:ke(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=Fc(e),o=Nl(e);return this.Gn(e).next((u=>s.J(W0,IDBKeyRange.bound(t,t)).next((h=>K.forEach(h,(d=>o.put(MS(d.indexId,this.uid,u,i))))))))}updateIndexEntries(e,t){const i=new Map;return K.forEach(t,((s,o)=>{const u=i.get(s.collectionGroup);return(u?K.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(i.set(s.collectionGroup,h),K.forEach(h,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?K.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,i,s){return Dl(e).put(s.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,s){return Dl(e).delete(s.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const s=Dl(e);let o=new at(Fs);return s.ee({index:fR,range:IDBKeyRange.only([i.indexId,this.uid,hm(this.$n(i,t))])},((u,h)=>{o=o.add(new ho(i.indexId,t,zS(h.arrayValue),zS(h.directionalValue)))})).next((()=>o))}jn(e,t){let i=new at(Fs);const s=this.Qn(t,e);if(s==null)return i;const o=Y0(t);if(o!=null){const u=e.data.field(o.fieldPath);if(Ih(u))for(const h of u.arrayValue.values||[])i=i.add(new ho(t.indexId,e.key,this.Ln(h),s))}else i=i.add(new ho(t.indexId,e.key,Bf,s));return i}Jn(e,t,i,s,o){ue(FS,"Updating index entries for document '%s'",t.key);const u=[];return(function(d,f,g,v,_){const S=d.getIterator(),R=f.getIterator();let k=Rl(S),V=Rl(R);for(;k||V;){let j=!1,M=!1;if(k&&V){const L=g(k,V);L<0?M=!0:L>0&&(j=!0)}else k!=null?M=!0:j=!0;j?(v(V),V=Rl(R)):M?(_(k),k=Rl(S)):(k=Rl(S),V=Rl(R))}})(s,o,Fs,(h=>{u.push(this.Hn(e,t,i,h))}),(h=>{u.push(this.Yn(e,t,i,h))})),K.waitFor(u)}Gn(e){let t=1;return Nl(e).ee({index:dR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((u,h)=>Fs(u,h))).filter(((u,h,d)=>!h||Fs(u,d[h-1])!==0));const s=[];s.push(e);for(const u of i){const h=Fs(u,e),d=Fs(u,t);if(h===0)s[0]=e.An();else if(h>0&&d<0)s.push(u),s.push(u.An());else if(d>0)break}s.push(t);const o=[];for(let u=0;u<s.length;u+=2){if(this.Zn(s[u],s[u+1]))return[];const h=s[u].Vn(this.uid,Bf,me.empty()),d=s[u+1].Vn(this.uid,Bf,me.empty());o.push(IDBKeyRange.bound(h,d))}return o}Zn(e,t){return Fs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(HS)}getMinOffset(e,t){return K.mapArray(this.Mn(t),(i=>this.xn(e,i).next((s=>s||ye(44426))))).next(HS)}}function qS(n){return tn(n,wh)}function Dl(n){return tn(n,ih)}function Fc(n){return tn(n,l_)}function Nl(n){return tn(n,nh)}function HS(n){Te(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;s_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ni(e.readTime,e.documentKey,t)}const GS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},y2=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function v2(n,e,t){const i=n.store(Oi),s=n.store(tu),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const d=i.ee({range:u},((g,v,_)=>(h++,_.delete())));o.push(d.next((()=>{Te(h===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const v=uR(e,g.key.path,t.batchId);o.push(s.delete(v)),f.push(g.key)}return K.waitFor(o).next((()=>f))}function Bm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ye(14731);e=n.noDocument}return JSON.stringify(e).length}_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(y2,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);class xp{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,t,i,s){Te(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new xp(o,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qs(e).ee({index:fo,range:i},((s,o,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const o=jl(e),u=qs(e);return u.add({}).next((h=>{Te(typeof h=="number",49019);const d=new y_(h,t,i,s),f=(function(S,R,k){const V=k.baseMutations.map((M=>jm(S.yt,M))),j=k.mutations.map((M=>jm(S.yt,M)));return{userId:R,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:V,mutations:j}})(this.serializer,this.userId,d),g=[];let v=new at(((_,S)=>ke(_.canonicalString(),S.canonicalString())));for(const _ of s){const S=uR(this.userId,_.key.path,h);v=v.add(_.key.path.popLast()),g.push(u.put(f)),g.push(o.put(S,V3))}return v.forEach((_=>{g.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[h]=d.keys()})),K.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return qs(e).get(t).next((i=>i?(Te(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),uo(this.serializer,i)):null))}er(e,t){return this.Xn[t]?K.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return qs(e).ee({index:fo,range:s},((u,h,d)=>{h.userId===this.userId&&(Te(h.batchId>=i,47524,{tr:i}),o=uo(this.serializer,h)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=go;return qs(e).ee({index:fo,range:t,reverse:!0},((s,o,u)=>{i=o.batchId,u.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,go],[this.userId,Number.POSITIVE_INFINITY]);return qs(e).J(fo,t).next((i=>i.map((s=>uo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=rm(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=[];return jl(e).ee({range:s},((u,h,d)=>{const[f,g,v]=u,_=dr(g);if(f===this.userId&&t.path.isEqual(_))return qs(e).get(v).next((S=>{if(!S)throw ye(61480,{nr:u,batchId:v});Te(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:v}),o.push(uo(this.serializer,S))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(ke);const s=[];return t.forEach((o=>{const u=rm(this.userId,o.path),h=IDBKeyRange.lowerBound(u),d=jl(e).ee({range:h},((f,g,v)=>{const[_,S,R]=f,k=dr(S);_===this.userId&&o.path.isEqual(k)?i=i.add(R):v.done()}));s.push(d)})),K.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,o=rm(this.userId,i),u=IDBKeyRange.lowerBound(o);let h=new at(ke);return jl(e).ee({range:u},((d,f,g)=>{const[v,_,S]=d,R=dr(_);v===this.userId&&i.isPrefixOf(R)?R.length===s&&(h=h.add(S)):g.done()})).next((()=>this.rr(e,h)))}rr(e,t){const i=[],s=[];return t.forEach((o=>{s.push(qs(e).get(o).next((u=>{if(u===null)throw ye(35274,{batchId:o});Te(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:o}),i.push(uo(this.serializer,u))})))})),K.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return v2(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),K.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return K.resolve();const i=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),s=[];return jl(e).ee({range:i},((o,u,h)=>{if(o[0]===this.userId){const d=dr(o[1]);s.push(d)}else h.done()})).next((()=>{Te(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return _2(e,this.userId,t)}_r(e){return b2(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:go,lastStreamToken:""}))}}function _2(n,e,t){const i=rm(e,t.path),s=i[1],o=IDBKeyRange.lowerBound(i);let u=!1;return jl(n).ee({range:o,X:!0},((h,d,f)=>{const[g,v,_]=h;g===e&&v===s&&(u=!0),f.done()})).next((()=>u))}function qs(n){return tn(n,Oi)}function jl(n){return tn(n,tu)}function b2(n){return tn(n,Th)}class No{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new No(0)}static cr(){return new No(-1)}}class i6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new No(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>xe.fromTimestamp(new Ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>kl(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(Te(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let s=0;const o=[];return kl(e).ee(((u,h)=>{const d=Xc(h);d.sequenceNumber<=t&&i.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>K.waitFor(o))).next((()=>s))}forEachTarget(e,t){return kl(e).ee(((i,s)=>{const o=Xc(s);t(o)}))}lr(e){return KS(e).get(km).next((t=>(Te(t!==null,2888),t)))}hr(e,t){return KS(e).put(km,t)}Pr(e,t){return kl(e).put(f2(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Ro(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return kl(e).ee({range:s,index:hR},((u,h,d)=>{const f=Xc(h);$h(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,i){const s=[],o=Qs(e);return t.forEach((u=>{const h=wn(u.path);s.push(o.put({targetId:i,path:h})),s.push(this.referenceDelegate.addReference(e,i,u))})),K.waitFor(s)}removeMatchingKeys(e,t,i){const s=Qs(e);return K.forEach(t,(o=>{const u=wn(o.path);return K.waitFor([s.delete([i,u]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,t){const i=Qs(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=Qs(e);let o=ze();return s.ee({range:i,X:!0},((u,h,d)=>{const f=dr(u[1]),g=new me(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const i=wn(t.path),s=IDBKeyRange.bound([i],[eR(i)],!1,!0);let o=0;return Qs(e).ee({index:o_,X:!0,range:s},(([u,h],d,f)=>{u!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return kl(e).get(t).next((i=>i?Xc(i):null))}}function kl(n){return tn(n,nu)}function KS(n){return tn(n,yo)}function Qs(n){return tn(n,iu)}const $S="LruGarbageCollector",T2=1048576;function QS([n,e],[t,i]){const s=ke(n,t);return s===0?ke(e,i):s}class r6{constructor(e){this.Ir=e,this.buffer=new at(QS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();QS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class E2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue($S,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_a(t)?ue($S,"Ignoring IndexedDB error during garbage collection: ",t):await va(t)}await this.Vr(3e5)}))}}class s6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(zn.ce);const i=new r6(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(GS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,o,u,h,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,u=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(i=v,h=Date.now(),this.removeTargets(e,i,t)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Ml()<=Ge.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function w2(n,e){return new s6(n,e)}class a6{constructor(e,t){this.db=e,this.garbageCollector=w2(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,s)=>t(s)))}addReference(e,t,i){return Ff(e,i)}removeReference(e,t,i){return Ff(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Ff(e,t)}br(e,t){return(function(s,o){let u=!1;return b2(s).te((h=>_2(s,h,o).next((d=>(d&&(u=!0),K.resolve(!d)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((u,h)=>{if(h<=t){const d=this.br(e,u).next((f=>{if(!f)return o++,i.getEntry(e,u).next((()=>(i.removeEntry(u,xe.min()),Qs(e).delete((function(v){return[0,wn(v.path)]})(u)))))}));s.push(d)}})).next((()=>K.waitFor(s))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Ff(e,t)}Sr(e,t){const i=Qs(e);let s,o=zn.ce;return i.ee({index:o_},(([u,h],{path:d,sequenceNumber:f})=>{u===0?(o!==zn.ce&&t(new me(dr(s)),o),o=f,s=d):o=zn.ce})).next((()=>{o!==zn.ce&&t(new me(dr(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ff(n,e){return Qs(n).put((function(i,s){return{targetId:0,path:wn(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class S2{constructor(){this.changes=new as((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class o6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return eo(e).put(i)}removeEntry(e,t,i){return eo(e).delete((function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],zm(u),h[h.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Ct.newInvalidDocument(t);return eo(e).ee({index:sm,range:IDBKeyRange.only(qc(t))},((s,o)=>{i=this.Cr(t,o)})).next((()=>i))}vr(e,t){let i={size:0,document:Ct.newInvalidDocument(t)};return eo(e).ee({index:sm,range:IDBKeyRange.only(qc(t))},((s,o)=>{i={document:this.Cr(t,o),size:Bm(o)}})).next((()=>i))}getEntries(e,t){let i=ei();return this.Fr(e,t,((s,o)=>{const u=this.Cr(s,o);i=i.insert(s,u)})).next((()=>i))}Mr(e,t){let i=ei(),s=new mt(me.comparator);return this.Fr(e,t,((o,u)=>{const h=this.Cr(o,u);i=i.insert(o,h),s=s.insert(o,Bm(u))})).next((()=>({documents:i,Or:s})))}Fr(e,t,i){if(t.isEmpty())return K.resolve();let s=new at(WS);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(qc(s.first()),qc(s.last())),u=s.getIterator();let h=u.getNext();return eo(e).ee({index:sm,range:o},((d,f,g)=>{const v=me.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;h&&WS(h,v)<0;)i(h,null),h=u.getNext();h&&h.isEqual(v)&&(i(h,f),h=u.hasNext()?u.getNext():null),h?g.j(qc(h)):g.done()})).next((()=>{for(;h;)i(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,o){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),zm(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return eo(e).J(IDBKeyRange.bound(h,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=ei();for(const v of f){const _=this.Cr(me.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);_.isFoundDocument()&&(Qh(t,_)||s.has(_.key))&&(g=g.insert(_.key,_))}return g}))}getAllFromCollectionGroup(e,t,i,s){let o=ei();const u=XS(t,i),h=XS(t,ni.max());return eo(e).ee({index:cR,range:IDBKeyRange.bound(u,h,!0)},((d,f,g)=>{const v=this.Cr(me.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new l6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return YS(e).get(X0).next((t=>(Te(!!t,20021),t)))}Dr(e,t){return YS(e).put(X0,t)}Cr(e,t){if(t){const i=$5(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(xe.min())))return i}return Ct.newInvalidDocument(e)}}function x2(n){return new o6(n)}class l6 extends S2{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new as((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new at(((o,u)=>ke(o.canonicalString(),u.canonicalString())));return this.changes.forEach(((o,u)=>{const h=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,h.readTime)),u.isValidDocument()){const d=kS(this.Nr.serializer,u);s=s.add(o.path.popLast());const f=Bm(d);i+=f-h.size,t.push(this.Nr.addEntry(e,o,d))}else if(i-=h.size,this.trackRemovals){const d=kS(this.Nr.serializer,u.convertToNoDocument(xe.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,i)),K.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:s})=>(s.forEach(((o,u)=>{this.Br.set(o,{size:u,readTime:i.get(o).readTime})})),i)))}}function YS(n){return tn(n,Eh)}function eo(n){return tn(n,Nm)}function qc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XS(n,e){const t=e.documentKey.path.toArray();return[n,zm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WS(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(s=ke(t[o],i[o]),s)return s;return s=ke(t.length,i.length),s||(s=ke(t[t.length-2],i[i.length-2]),s||ke(t[t.length-1],i[i.length-1]))}class u6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class A2{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&oh(i.mutation,s,Un.empty(),Ze.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const s=fr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((o=>{let u=Qc();return o.forEach(((h,d)=>{u=u.insert(h,d.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=fr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const s=[];return i.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,i,s){let o=ei();const u=ah(),h=(function(){return ah()})();return t.forEach(((d,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof os)?o=o.insert(f.key,f):g!==void 0?(u.set(f.key,g.mutation.getFieldMask()),oh(g.mutation,f,g.mutation.getFieldMask(),Ze.now())):u.set(f.key,Un.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>u.set(f,g))),t.forEach(((f,g)=>h.set(f,new u6(g,u.get(f)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=ah();let s=new mt(((u,h)=>u-h)),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=i.get(d)||Un.empty();g=h.applyToLocalView(f,g),i.set(d,g);const v=(s.get(h.batchId)||ze()).add(d);s=s.insert(h.batchId,v)}))})).next((()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),f=d.key,g=d.value,v=qR();g.forEach((_=>{if(!o.has(_)){const S=YR(t.get(_),i.get(_));S!==null&&v.set(_,S),o=o.add(_)}})),u.push(this.documentOverlayCache.saveOverlays(e,f,v))}return K.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(u){return me.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):LR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):K.resolve(fr());let h=eu,d=o;return u.next((f=>K.forEach(f,((g,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(g)?K.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{d=d.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,ze()))).next((g=>({batchId:h,changes:FR(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((i=>{let s=Qc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const o=t.collectionGroup;let u=Qc();return this.indexManager.getCollectionParents(e,o).next((h=>K.forEach(h,(d=>{const f=(function(v,_){return new Su(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((g=>{g.forEach(((v,_)=>{u=u.insert(v,_)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s)))).next((u=>{o.forEach(((d,f)=>{const g=f.getKey();u.get(g)===null&&(u=u.insert(g,Ct.newInvalidDocument(g)))}));let h=Qc();return u.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&oh(g.mutation,f,Un.empty(),Ze.now()),Qh(t,f)&&(h=h.insert(d,f))})),h}))}}class c6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Dn(s.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:m2(s.bundledQuery),readTime:Dn(s.readTime)}})(t)),K.resolve()}}class h6{constructor(){this.overlays=new mt(me.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fr();return K.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,o)=>{this.St(e,t,o)})),K.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const s=fr(),o=t.length+1,u=new me(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return K.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new mt(((f,g)=>f-g));const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=fr(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const h=fr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>h.set(f,g))),!(h.size()>=s)););return K.resolve(h)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const u=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new __(t,i));let o=this.qr.get(t);o===void 0&&(o=ze(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}class d6{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}class S_{constructor(){this.Qr=new at(an.$r),this.Ur=new at(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new an(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new an(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new me(new tt([])),i=new an(t,e),s=new an(t,e+1),o=[];return this.Ur.forEachInRange([i,s],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new me(new tt([])),i=new an(t,e),s=new an(t,e+1);let o=ze();return this.Ur.forEachInRange([i,s],(u=>{o=o.add(u.key)})),o}containsKey(e){const t=new an(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class an{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return me.comparator(e.key,t.key)||ke(e.Yr,t.Yr)}static Kr(e,t){return ke(e.Yr,t.Yr)||me.comparator(e.key,t.key)}}class f6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new at(an.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new y_(o,t,i,s);this.mutationQueue.push(u);for(const h of s)this.Zr=this.Zr.add(new an(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(u)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),o=s<0?0:s;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?go:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new an(t,0),s=new an(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(u=>{const h=this.Xr(u.Yr);o.push(h)})),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(ke);return t.forEach((s=>{const o=new an(s,0),u=new an(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(h=>{i=i.add(h.Yr)}))})),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let o=i;me.isDocumentKey(o)||(o=o.child(""));const u=new an(new me(o),0);let h=new at(ke);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(h=h.add(d.Yr)),!0)}),u),K.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Te(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(t.mutations,(s=>{const o=new an(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new an(t,0),s=this.Zr.firstAfterOrEqual(i);return K.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class m6{constructor(e){this.ri=e,this.docs=(function(){return new mt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),o=s?s.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Ct.newInvalidDocument(t))}getEntries(e,t){let i=ei();return t.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ct.newInvalidDocument(s))})),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=ei();const u=t.path,h=new me(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||s_(rR(g),i)<=0||(s.has(g.key)||Qh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,t,i,s){ye(9500)}ii(e,t){return K.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new p6(this)}getSize(e){return K.resolve(this.size)}}class p6 extends S2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class g6{constructor(e){this.persistence=e,this.si=new as((t=>Ro(t)),$h),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new S_,this.targetCount=0,this.ai=No.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new No(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let s=0;const o=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),K.waitFor(o).next((()=>s))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((u=>{o.push(s.markPotentiallyOrphaned(e,u))})),K.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}class x_{constructor(e,t){this.ui={},this.overlays={},this.ci=new zn(0),this.li=!1,this.li=!0,this.hi=new d6,this.referenceDelegate=e(this),this.Pi=new g6(this),this.indexManager=new t6,this.remoteDocumentCache=(function(s){return new m6(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new d2(t),this.Ii=new c6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new h6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new f6(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const s=new y6(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return K.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class y6 extends aR{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Ri=new S_,this.Vi=null}static mi(e){return new Ap(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(i=>{const s=me.fromPath(i);return this.gi(e,s).next((o=>{o||t.removeEntry(s,xe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Fm{constructor(e,t){this.persistence=e,this.pi=new as((i=>wn(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=w2(this,t)}static mi(e,t){return new Fm(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?K.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(u=>this.br(e,u,t).next((h=>{h||(i++,o.removeEntry(u,xe.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=om(e.data.value)),t}br(e,t,i){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return K.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class v6{constructor(e){this.serializer=e}k(e,t,i,s){const o=new dp("createOrUpgrade",t);i<1&&s>=1&&((function(d){d.createObjectStore(Kh)})(e),(function(d){d.createObjectStore(Th,{keyPath:k3}),d.createObjectStore(Oi,{keyPath:lS,autoIncrement:!0}).createIndex(fo,uS,{unique:!0}),d.createObjectStore(tu)})(e),ZS(e),(function(d){d.createObjectStore(ao)})(e));let u=K.resolve();return i<3&&s>=3&&(i!==0&&((function(d){d.deleteObjectStore(iu),d.deleteObjectStore(nu),d.deleteObjectStore(yo)})(e),ZS(e)),u=u.next((()=>(function(d){const f=d.store(yo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return f.put(km,g)})(o)))),i<4&&s>=4&&(i!==0&&(u=u.next((()=>(function(d,f){return f.store(Oi).J().next((v=>{d.deleteObjectStore(Oi),d.createObjectStore(Oi,{keyPath:lS,autoIncrement:!0}).createIndex(fo,uS,{unique:!0});const _=f.store(Oi),S=v.map((R=>_.put(R)));return K.waitFor(S)}))})(e,o)))),u=u.next((()=>{(function(d){d.createObjectStore(ru,{keyPath:B3})})(e)}))),i<5&&s>=5&&(u=u.next((()=>this.yi(o)))),i<6&&s>=6&&(u=u.next((()=>((function(d){d.createObjectStore(Eh)})(e),this.wi(o))))),i<7&&s>=7&&(u=u.next((()=>this.Si(o)))),i<8&&s>=8&&(u=u.next((()=>this.bi(e,o)))),i<9&&s>=9&&(u=u.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(u=u.next((()=>this.Di(o)))),i<11&&s>=11&&(u=u.next((()=>{(function(d){d.createObjectStore(mp,{keyPath:F3})})(e),(function(d){d.createObjectStore(pp,{keyPath:q3})})(e)}))),i<12&&s>=12&&(u=u.next((()=>{(function(d){const f=d.createObjectStore(gp,{keyPath:X3});f.createIndex(Z0,W3,{unique:!1}),f.createIndex(mR,Z3,{unique:!1})})(e)}))),i<13&&s>=13&&(u=u.next((()=>(function(d){const f=d.createObjectStore(Nm,{keyPath:M3});f.createIndex(sm,P3),f.createIndex(cR,O3)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(ao)))),i<14&&s>=14&&(u=u.next((()=>this.Fi(e,o)))),i<15&&s>=15&&(u=u.next((()=>(function(d){d.createObjectStore(l_,{keyPath:H3,autoIncrement:!0}).createIndex(W0,G3,{unique:!1}),d.createObjectStore(nh,{keyPath:K3}).createIndex(dR,$3,{unique:!1}),d.createObjectStore(ih,{keyPath:Q3}).createIndex(fR,Y3,{unique:!1})})(e)))),i<16&&s>=16&&(u=u.next((()=>{t.objectStore(nh).clear()})).next((()=>{t.objectStore(ih).clear()}))),i<17&&s>=17&&(u=u.next((()=>{(function(d){d.createObjectStore(u_,{keyPath:J3})})(e)}))),i<18&&s>=18&&UI()&&(u=u.next((()=>{t.objectStore(nh).clear()})).next((()=>{t.objectStore(ih).clear()}))),u}wi(e){let t=0;return e.store(ao).ee(((i,s)=>{t+=Bm(s)})).next((()=>{const i={byteSize:t};return e.store(Eh).put(X0,i)}))}yi(e){const t=e.store(Th),i=e.store(Oi);return t.J().next((s=>K.forEach(s,(o=>{const u=IDBKeyRange.bound([o.userId,go],[o.userId,o.lastAcknowledgedBatchId]);return i.J(fo,u).next((h=>K.forEach(h,(d=>{Te(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=uo(this.serializer,d);return v2(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(iu),i=e.store(ao);return e.store(yo).get(km).next((s=>{const o=[];return i.ee(((u,h)=>{const d=new tt(u),f=(function(v){return[0,wn(v)]})(d);o.push(t.get(f).next((g=>g?K.resolve():(v=>t.put({targetId:0,path:wn(v),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>K.waitFor(o)))}))}bi(e,t){e.createObjectStore(wh,{keyPath:U3});const i=t.store(wh),s=new w_,o=u=>{if(s.add(u)){const h=u.lastSegment(),d=u.popLast();return i.put({collectionId:h,parent:wn(d)})}};return t.store(ao).ee({X:!0},((u,h)=>{const d=new tt(u);return o(d.popLast())})).next((()=>t.store(tu).ee({X:!0},(([u,h,d],f)=>{const g=dr(h);return o(g.popLast())}))))}Di(e){const t=e.store(nu);return t.ee(((i,s)=>{const o=Xc(s),u=f2(this.serializer,o);return t.put(u)}))}Ci(e,t){const i=t.store(ao),s=[];return i.ee(((o,u)=>{const h=t.store(Nm),d=(function(v){return v.document?new me(tt.fromString(v.document.name).popFirst(5)):v.noDocument?me.fromSegments(v.noDocument.path):v.unknownDocument?me.fromSegments(v.unknownDocument.path):ye(36783)})(u).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(f))})).next((()=>K.waitFor(s)))}Fi(e,t){const i=t.store(Oi),s=x2(this.serializer),o=new x_(Ap.mi,this.serializer.yt);return i.J().next((u=>{const h=new Map;return u.forEach((d=>{let f=h.get(d.userId)??ze();uo(this.serializer,d).keys().forEach((g=>f=f.add(g))),h.set(d.userId,f)})),K.forEach(h,((d,f)=>{const g=new vn(f),v=Sp.wt(this.serializer,g),_=o.getIndexManager(g),S=xp.wt(g,this.serializer,_,o.referenceDelegate);return new A2(s,S,v,_).recalculateAndSaveOverlaysForDocumentKeys(new J0(t,zn.ce),d).next()}))}))}}function ZS(n){n.createObjectStore(iu,{keyPath:j3}).createIndex(o_,z3,{unique:!0}),n.createObjectStore(nu,{keyPath:"targetId"}).createIndex(hR,L3,{unique:!0}),n.createObjectStore(yo)}const Hs="IndexedDbPersistence",l0=18e5,u0=5e3,c0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_6="main";class A_{constructor(e,t,i,s,o,u,h,d,f,g,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=o,this.window=u,this.document=h,this.xi=f,this.Oi=g,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!A_.v())throw new ce(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new a6(this,s),this.$i=t+_6,this.serializer=new d2(d),this.Ui=new sa(this.$i,this.Ni,new v6(this.serializer)),this.hi=new Y5,this.Pi=new i6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=x2(this.serializer),this.Ii=new Q5,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Pt(Hs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(te.FAILED_PRECONDITION,c0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new zn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>qf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(_a(e))return ue(Hs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue(Hs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Hc(e).get(Il).next((t=>K.resolve(this.es(t))))}ts(e){return qf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,l0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=tn(t,ru);return i.J().next((s=>{const o=this.ss(s,l0),u=s.filter((h=>o.indexOf(h)===-1));return K.forEach(u,(h=>i.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?K.resolve(!0):Hc(e).get(Il).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,u0)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ce(te.FAILED_PRECONDITION,c0);return!1}}return!(!this.networkEnabled||!this.inForeground)||qf(e).J().next((i=>this.ss(i,u0).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||u&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ue(Hs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Kh,ru],(e=>{const t=new J0(e,zn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>qf(e).J().next((t=>this.ss(t,l0).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return xp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new n6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Sp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue(Hs,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?n5:d===17?vR:d===16?t5:d===15?c_:d===14?yR:d===13?gR:d===12?e5:d===11?pR:void ye(60245)})(this.Ni);let u;return this.Ui.runTransaction(e,s,o,(h=>(u=new J0(h,this.ci?this.ci.next():zn.ce),t==="readwrite-primary"?this.Hi(u).next((d=>!!d||this.Yi(u))).next((d=>{if(!d)throw Pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ce(te.FAILED_PRECONDITION,sR);return i(u)})).next((d=>this.Xi(u).next((()=>d)))):this.Is(u).next((()=>i(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Is(e){return Hc(e).get(Il).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,u0)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(te.FAILED_PRECONDITION,c0)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hc(e).put(Il,t)}static v(){return sa.v()}Zi(e){const t=Hc(e);return t.get(Il).next((i=>this.es(i)?(ue(Hs,"Releasing primary lease."),t.delete(Il)):K.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Pt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;zI()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ue(Hs,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Pt(Hs,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Pt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hc(n){return tn(n,Kh)}function qf(n){return tn(n,ru)}function I2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class I_{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=ze(),s=ze();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new I_(e,t.fromCache,i,s)}}class b6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class R2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return zI()?8:oR(en())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const o={result:null};return this.ys(e,t).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,t,s,i).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new b6;return this.Ss(e,t,u).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>o.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Ml()<=Ge.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Ml()<=Ge.DEBUG&&ue("QueryEngine","Query:",Pl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Ml()<=Ge.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):K.resolve())}ys(e,t){if(ES(t))return K.resolve(null);let i=ti(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Om(t,null,"F"),i=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const u=ze(...o);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.Ds(t,h);return this.Cs(t,f,u,d.readTime)?this.ys(e,Om(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,i,s){return ES(t)||s.isEqual(xe.min())?K.resolve(null):this.ps.getDocuments(e,i).next((o=>{const u=this.Ds(t,o);return this.Cs(t,u,i,s)?K.resolve(null):(Ml()<=Ge.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pl(t)),this.vs(e,u,t,iR(s,eu)).next((h=>h)))}))}Ds(e,t){let i=new at(UR(e));return t.forEach(((s,o)=>{Qh(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,i){return Ml()<=Ge.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Pl(t)),this.ps.getDocumentsMatchingQuery(e,t,ni.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(t.forEach((u=>{o=o.insert(u.key,u)})),o)))}}const R_="LocalStore",T6=3e8;class E6{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new mt(ke),this.xs=new as((o=>Ro(o)),$h),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function C2(n,e,t,i){return new E6(n,e,t,i)}async function D2(n,e){const t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const u=[],h=[];let d=ze();for(const f of s){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){h.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(i,d).next((f=>({Ls:f,removedBatchIds:u,addedBatchIds:h})))}))}))}function w6(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,d,f,g){const v=f.batch,_=v.keys();let S=K.resolve();return _.forEach((R=>{S=S.next((()=>g.getEntry(d,R))).next((k=>{const V=f.docVersions.get(R);Te(V!==null,48541),k.version.compareTo(V)<0&&(v.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),g.addEntry(k)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(d,v)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let d=ze();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(d=d.add(h.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function N2(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function S6(n,e){const t=_e(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((g,v)=>{const _=s.get(v);if(!_)return;h.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,v))));let S=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(Lt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),s=s.insert(v,S),(function(k,V,j){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=T6?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(_,S,g)&&h.push(t.Pi.updateTargetData(o,S))}));let d=ei(),f=ze();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),h.push(x6(o,u,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!i.isEqual(xe.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));h.push(g)}return K.waitFor(h).next((()=>u.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function x6(n,e,t){let i=ze(),s=ze();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let u=ei();return t.forEach(((h,d)=>{const f=o.get(h);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(xe.min())?(e.removeEntry(h,d.readTime),u=u.insert(h,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),u=u.insert(h,d)):ue(R_,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",d.version)})),{ks:u,qs:s}}))}function A6(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=go),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function qm(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((o=>o?(s=o,K.resolve(s)):t.Pi.allocateTargetId(i).next((u=>(s=new Kr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function du(n,e,t){const i=_e(n),s=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(u=>i.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!_a(u))throw u;ue(R_,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function fv(n,e,t){const i=_e(n);let s=xe.min(),o=ze();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,f,g){const v=_e(d),_=v.xs.get(g);return _!==void 0?K.resolve(v.Ms.get(_)):v.Pi.getTargetData(f,g)})(i,u,ti(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,h.targetId).next((d=>{o=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?s:xe.min(),t?o:ze()))).next((h=>(M2(i,zR(e),h),{documents:h,Qs:o})))))}function k2(n,e){const t=_e(n),i=_e(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,e).next((u=>u?u.target:null))))}function V2(n,e){const t=_e(n),i=t.Os.get(e)||xe.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,iR(i,eu),Number.MAX_SAFE_INTEGER))).then((s=>(M2(t,e,s),s)))}function M2(n,e,t){let i=n.Os.get(e)||xe.min();t.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}const P2="firestore_clients";function JS(n,e){return`${P2}_${n}_${e}`}const O2="firestore_mutations";function ex(n,e,t){let i=`${O2}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const L2="firestore_targets";function h0(n,e){return`${L2}_${n}_${e}`}const ur="SharedClientState";class Hm{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Ws(e,t,i){const s=JSON.parse(i);let o,u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(o=new ce(s.error.code,s.error.message))),u?new Hm(e,t,s.state,o):(Pt(ur,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ce(i.error.code,i.error.message))),o?new lh(e,i.state,s):(Pt(ur,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=p_();for(let u=0;s&&u<i.activeTargetIds.length;++u)s=lR(i.activeTargetIds[u]),o=o.add(i.activeTargetIds[u]);return s?new Gm(e,o):(Pt(ur,`Failed to parse client data for instance '${e}': ${t}`),null)}}class C_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new C_(t.clientId,t.onlineState):(Pt(ur,`Failed to parse online state: ${e}`),null)}}class mv{constructor(){this.activeTargetIds=p_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class d0{constructor(e,t,i,s,o){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new mt(ke),this.started=!1,this.Xs=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=JS(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new mv),this.ro=new RegExp(`^${P2}_${u}_([^_]*)$`),this.io=new RegExp(`^${O2}_${u}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${L2}_${u}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(JS(this.persistenceKey,i));if(s){const o=Gm.Ws(i,s);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(h0(this.persistenceKey,e));if(s){const o=lh.Ws(e,s);o&&(i=o.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(h0(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue(ur,"READ",e,t),t}setItem(e,t){ue(ur,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue(ur,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ue(ur,"EVENT",t.key,t.newValue),t.key===this.eo)return void Pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(o){let u=zn.ce;if(o!=null)try{const h=JSON.parse(o);Te(typeof h=="number",30636,{So:o}),u=h}catch(h){Pt(ur,"Failed to read sequence number from WebStorage",h)}return u})(t.newValue);i!==zn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const s=new Hm(this.currentUser,e,t,i),o=ex(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Gs())}Po(e){const t=ex(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const s=h0(this.persistenceKey,e),o=new lh(e,t,i);this.setItem(s,o.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return Gm.Ws(i,t)}fo(e,t){const i=this.io.exec(e),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Hm.Ws(new vn(o),s,t)}yo(e,t){const i=this.so.exec(e),s=Number(i[1]);return lh.Ws(s,t)}uo(e){return C_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ue(ur,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),o=this.lo(i),u=[],h=[];return o.forEach((d=>{s.has(d)||u.push(d)})),s.forEach((d=>{o.has(d)||h.push(d)})),this.syncEngine.Fo(u,h).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=p_();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class j2{constructor(){this.Mo=new mv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new mv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class I6{Oo(e){}shutdown(){}}const tx="ConnectivityMonitor";class nx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(tx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(tx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hf=null;function pv(){return Hf===null?Hf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hf++,"0x"+Hf.toString(16)}const f0="RestConnection",R6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class C6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Vm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,o){const u=pv(),h=this.zo(e,t.toUriEncodedString());ue(f0,`Sending RPC '${e}' ${u}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(h),g=Tu(f);return this.Jo(e,h,d,i,g).then((v=>(ue(f0,`Received RPC '${e}' ${u}: `,v),v)),(v=>{throw vh(f0,`RPC '${e}' ${u} failed with error: `,v,"url: ",h,"request:",i),v}))}Ho(e,t,i,s,o,u){return this.Go(e,t,i,s,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const i=R6[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class D6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const yn="WebChannelConnection";class N6 extends C6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,o){const u=pv();return new Promise(((h,d)=>{const f=new QI;f.setWithCredentials(!0),f.listenOnce(YI.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case nm.NO_ERROR:const v=f.getResponseJson();ue(yn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),h(v);break;case nm.TIMEOUT:ue(yn,`RPC '${e}' ${u} timed out`),d(new ce(te.DEADLINE_EXCEEDED,"Request time out"));break;case nm.HTTP_ERROR:const _=f.getStatus();if(ue(yn,`RPC '${e}' ${u} failed with status:`,_,"response text:",f.getResponseText()),_>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const k=(function(j){const M=j.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(M)>=0?M:te.UNKNOWN})(R.status);d(new ce(k,R.message))}else d(new ce(te.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ce(te.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:u,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ue(yn,`RPC '${e}' ${u} completed.`)}}));const g=JSON.stringify(s);ue(yn,`RPC '${e}' ${u} sending request:`,s),f.send(t,"POST",g,i,15)}))}T_(e,t,i){const s=pv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ZI(),h=WI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=o.join("");ue(yn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=u.createWebChannel(g,d);this.I_(v);let _=!1,S=!1;const R=new D6({Yo:V=>{S?ue(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(_||(ue(yn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),ue(yn,`RPC '${e}' stream ${s} sending:`,V),v.send(V))},Zo:()=>v.close()}),k=(V,j,M)=>{V.listen(j,(L=>{try{M(L)}catch(J){setTimeout((()=>{throw J}),0)}}))};return k(v,$c.EventType.OPEN,(()=>{S||(ue(yn,`RPC '${e}' stream ${s} transport opened.`),R.o_())})),k(v,$c.EventType.CLOSE,(()=>{S||(S=!0,ue(yn,`RPC '${e}' stream ${s} transport closed`),R.a_(),this.E_(v))})),k(v,$c.EventType.ERROR,(V=>{S||(S=!0,vh(yn,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),R.a_(new ce(te.UNAVAILABLE,"The operation could not be completed")))})),k(v,$c.EventType.MESSAGE,(V=>{if(!S){const j=V.data[0];Te(!!j,16349);const M=j,L=M?.error||M[0]?.error;if(L){ue(yn,`RPC '${e}' stream ${s} received error:`,L);const J=L.status;let ie=(function(A){const N=$t[A];if(N!==void 0)return ZR(N)})(J),ne=L.message;ie===void 0&&(ie=te.INTERNAL,ne="Unknown error status: "+J+" with message "+L.message),S=!0,R.a_(new ce(ie,ne)),v.close()}else ue(yn,`RPC '${e}' stream ${s} received:`,j),R.u_(j)}})),k(h,XI.STAT_EVENT,(V=>{V.stat===$0.PROXY?ue(yn,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===$0.NOPROXY&&ue(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function z2(){return typeof window<"u"?window:null}function dm(){return typeof document<"u"?document:null}function Ip(n){return new L5(n,!0)}class U2{constructor(e,t,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ix="PersistentStream";class B2{constructor(e,t,i,s,o,u,h,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new U2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Pt(t.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new ce(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(ix,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(ix,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class k6 extends B2{constructor(e,t,i,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,u),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=U5(this.serializer,e),i=(function(o){if(!("targetChange"in o))return xe.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?xe.min():u.readTime?Dn(u.readTime):xe.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=lv(this.serializer),t.addTarget=(function(o,u){let h;const d=u.target;if(h=Mm(d)?{documents:a2(o,d)}:{query:o2(o,d).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=t2(o,u.resumeToken);const f=av(o,u.expectedCount);f!==null&&(h.expectedCount=f)}else if(u.snapshotVersion.compareTo(xe.min())>0){h.readTime=hu(o,u.snapshotVersion.toTimestamp());const f=av(o,u.expectedCount);f!==null&&(h.expectedCount=f)}return h})(this.serializer,e);const i=F5(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=lv(this.serializer),t.removeTarget=e,this.q_(t)}}class V6 extends B2{constructor(e,t,i,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=B5(e.writeResults,e.commitTime),i=Dn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=lv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>jm(this.serializer,i)))};this.q_(t)}}class M6{}class P6 extends M6{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ce(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,ov(t,i),s,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(te.UNKNOWN,o.toString())}))}Ho(e,t,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,ov(t,i),s,u,h,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(te.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class O6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pt(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ko="RemoteStore";class L6{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Oo(this)&&(ue(ko,"Restarting streams for network reachability change."),await(async function(d){const f=_e(d);f.Ea.add(4),await Wh(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Rp(f)})(this))}))})),this.Ra=new O6(i,s)}}async function Rp(n){if(Oo(n))for(const e of n.da)await e(!0)}async function Wh(n){for(const e of n.da)await e(!1)}function Cp(n,e){const t=_e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),k_(t)?N_(t):Iu(t).O_()&&D_(t,e))}function fu(n,e){const t=_e(n),i=Iu(t);t.Ia.delete(e),i.O_()&&F2(t,e),t.Ia.size===0&&(i.O_()?i.L_():Oo(t)&&t.Ra.set("Unknown"))}function D_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Iu(n).Y_(e)}function F2(n,e){n.Va.Ue(e),Iu(n).Z_(e)}function N_(n){n.Va=new V5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Iu(n).start(),n.Ra.ua()}function k_(n){return Oo(n)&&!Iu(n).x_()&&n.Ia.size>0}function Oo(n){return _e(n).Ea.size===0}function q2(n){n.Va=void 0}async function j6(n){n.Ra.set("Online")}async function z6(n){n.Ia.forEach(((e,t)=>{D_(n,e)}))}async function U6(n,e){q2(n),k_(n)?(n.Ra.ha(e),N_(n)):n.Ra.set("Unknown")}async function B6(n,e,t){if(n.Ra.set("Online"),e instanceof e2&&e.state===2&&e.cause)try{await(async function(s,o){const u=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(i){ue(ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Km(n,i)}else if(e instanceof cm?n.Va.Ze(e):e instanceof JR?n.Va.st(e):n.Va.tt(e),!t.isEqual(xe.min()))try{const i=await N2(n.localStore);t.compareTo(i)>=0&&await(function(o,u){const h=o.Va.Tt(u);return h.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,u))}})),h.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(Lt.EMPTY_BYTE_STRING,g.snapshotVersion)),F2(o,d);const v=new Kr(g.target,d,f,g.sequenceNumber);D_(o,v)})),o.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){ue(ko,"Failed to raise snapshot:",i),await Km(n,i)}}async function Km(n,e,t){if(!_a(e))throw e;n.Ea.add(1),await Wh(n),n.Ra.set("Offline"),t||(t=()=>N2(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(ko,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Rp(n)}))}function H2(n,e){return e().catch((t=>Km(n,t,e)))}async function Au(n){const e=_e(n),t=ca(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:go;for(;F6(e);)try{const s=await A6(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,q6(e,s)}catch(s){await Km(e,s)}G2(e)&&K2(e)}function F6(n){return Oo(n)&&n.Ta.length<10}function q6(n,e){n.Ta.push(e);const t=ca(n);t.O_()&&t.X_&&t.ea(e.mutations)}function G2(n){return Oo(n)&&!ca(n).x_()&&n.Ta.length>0}function K2(n){ca(n).start()}async function H6(n){ca(n).ra()}async function G6(n){const e=ca(n);for(const t of n.Ta)e.ea(t.mutations)}async function K6(n,e,t){const i=n.Ta.shift(),s=v_.from(i,e,t);await H2(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Au(n)}async function $6(n,e){e&&ca(n).X_&&await(async function(i,s){if((function(u){return D5(u)&&u!==te.ABORTED})(s.code)){const o=i.Ta.shift();ca(i).B_(),await H2(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Au(i)}})(n,e),G2(n)&&K2(n)}async function rx(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),ue(ko,"RemoteStore received new credentials");const i=Oo(t);t.Ea.add(3),await Wh(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Rp(t)}async function gv(n,e){const t=_e(n);e?(t.Ea.delete(2),await Rp(t)):e||(t.Ea.add(2),await Wh(t),t.Ra.set("Unknown"))}function Iu(n){return n.ma||(n.ma=(function(t,i,s){const o=_e(t);return o.sa(),new k6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:j6.bind(null,n),t_:z6.bind(null,n),r_:U6.bind(null,n),H_:B6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),k_(n)?N_(n):n.Ra.set("Unknown")):(await n.ma.stop(),q2(n))}))),n.ma}function ca(n){return n.fa||(n.fa=(function(t,i,s){const o=_e(t);return o.sa(),new V6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:H6.bind(null,n),r_:$6.bind(null,n),ta:G6.bind(null,n),na:K6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Au(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(ko,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class V_{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){const u=Date.now()+i,h=new V_(e,t,u,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function M_(n,e){if(Pt("AsyncQueue",`${e}: ${n}`),_a(n))return new ce(te.UNAVAILABLE,`${e}: ${n}`);throw n}class Kl{static emptySet(e){return new Kl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||me.comparator(t.key,i.key):(t,i)=>me.comparator(t.key,i.key),this.keyedMap=Qc(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Kl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class sx{constructor(){this.ga=new mt(me.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class mu{constructor(e,t,i,s,o,u,h,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,s,o){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new mu(e,t,Kl.emptySet(t),u,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class Q6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Y6{constructor(){this.queries=ax(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=_e(t),o=s.queries;s.queries=ax(),o.forEach(((u,h)=>{for(const d of h.Sa)d.onError(i)}))})(this,new ce(te.ABORTED,"Firestore shutting down"))}}function ax(){return new as((n=>jR(n)),bp)}async function $2(n,e){const t=_e(n);let i=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new Q6,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=M_(u,`Initialization of query '${Pl(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&P_(t)}async function Q2(n,e){const t=_e(n),i=e.query;let s=3;const o=t.queries.get(i);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function X6(n,e){const t=_e(n);let i=!1;for(const s of e){const o=s.query,u=t.queries.get(o);if(u){for(const h of u.Sa)h.Fa(s)&&(i=!0);u.wa=s}}i&&P_(t)}function W6(n,e,t){const i=_e(n),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);i.queries.delete(e)}function P_(n){n.Ca.forEach((e=>{e.next()}))}var yv,ox;(ox=yv||(yv={})).Ma="default",ox.Cache="cache";class Y2{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new mu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yv.Cache}}class X2{constructor(e){this.key=e}}class W2{constructor(e){this.key=e}}class Z6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=UR(e),this.tu=new Kl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new sx,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const _=s.get(g),S=Qh(this.query,v)?v:null,R=!!_&&this.mutatedKeys.has(_.key),k=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let V=!1;_&&S?_.data.isEqual(S.data)?R!==k&&(i.track({type:3,doc:S}),V=!0):this.su(_,S)||(i.track({type:2,doc:S}),V=!0,(d&&this.eu(S,d)>0||f&&this.eu(S,f)<0)&&(h=!0)):!_&&S?(i.track({type:0,doc:S}),V=!0):_&&!S&&(i.track({type:1,doc:_}),V=!0,(d||f)&&(h=!0)),V&&(S?(u=u.add(S),o=k?o.add(g):o.delete(g)):(u=u.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:u,iu:i,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((g,v)=>(function(S,R){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:V})}};return k(S)-k(R)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(i),s=s??!1;const h=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,u.length!==0||f?{snapshot:new mu(this.query,e.tu,o,u,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new W2(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new X2(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return mu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ru="SyncEngine";class J6{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class e9{constructor(e){this.key=e,this.hu=!1}}class t9{constructor(e,t,i,s,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new as((h=>jR(h)),bp),this.Iu=new Map,this.Eu=new Set,this.du=new mt(me.comparator),this.Au=new Map,this.Ru=new S_,this.Vu={},this.mu=new Map,this.fu=No.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function n9(n,e,t=!0){const i=Dp(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await Z2(i,e,t,!0),s}async function i9(n,e){const t=Dp(n);await Z2(t,e,!0,!1)}async function Z2(n,e,t,i){const s=await qm(n.localStore,ti(e)),o=s.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await O_(n,e,o,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&Cp(n.remoteStore,s),h}async function O_(n,e,t,i,s){n.pu=(v,_,S)=>(async function(k,V,j,M){let L=V.view.ru(j);L.Cs&&(L=await fv(k.localStore,V.query,!1).then((({documents:C})=>V.view.ru(C,L))));const J=M&&M.targetChanges.get(V.targetId),ie=M&&M.targetMismatches.get(V.targetId)!=null,ne=V.view.applyChanges(L,k.isPrimaryClient,J,ie);return vv(k,V.targetId,ne.au),ne.snapshot})(n,v,_,S);const o=await fv(n.localStore,e,!0),u=new Z6(e,o.Qs),h=u.ru(o.documents),d=Xh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),f=u.applyChanges(h,n.isPrimaryClient,d);vv(n,t,f.au);const g=new J6(e,t,u);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function r9(n,e,t){const i=_e(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((u=>!bp(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await du(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&fu(i.remoteStore,s.targetId),pu(i,s.targetId)})).catch(va)):(pu(i,s.targetId),await du(i.localStore,s.targetId,!0))}async function s9(n,e){const t=_e(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),fu(t.remoteStore,i.targetId))}async function a9(n,e,t){const i=U_(n);try{const s=await(function(u,h){const d=_e(u),f=Ze.now(),g=h.reduce(((S,R)=>S.add(R.key)),ze());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let R=ei(),k=ze();return d.Ns.getEntries(S,g).next((V=>{R=V,R.forEach(((j,M)=>{M.isValidDocument()||(k=k.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,R))).next((V=>{v=V;const j=[];for(const M of h){const L=R5(M,v.get(M.key).overlayedDocument);L!=null&&j.push(new os(M.key,L,RR(L.value.mapValue),Tn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,j,h)})).next((V=>{_=V;const j=V.applyToLocalDocumentSet(v,k);return d.documentOverlayCache.saveOverlays(S,V.batchId,j)}))})).then((()=>({batchId:_.batchId,changes:FR(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(u,h,d){let f=u.Vu[u.currentUser.toKey()];f||(f=new mt(ke)),f=f.insert(h,d),u.Vu[u.currentUser.toKey()]=f})(i,s.batchId,t),await Ta(i,s.changes),await Au(i.remoteStore)}catch(s){const o=M_(s,"Failed to persist write");t.reject(o)}}async function J2(n,e){const t=_e(n);try{const i=await S6(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const u=t.Au.get(o);u&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.hu=!0:s.modifiedDocuments.size>0?Te(u.hu,14607):s.removedDocuments.size>0&&(Te(u.hu,42227),u.hu=!1))})),await Ta(t,i,e)}catch(i){await va(i)}}function lx(n,e,t){const i=_e(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((o,u)=>{const h=u.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(u,h){const d=_e(u);d.onlineState=h;let f=!1;d.queries.forEach(((g,v)=>{for(const _ of v.Sa)_.va(h)&&(f=!0)})),f&&P_(d)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function o9(n,e,t){const i=_e(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),o=s&&s.key;if(o){let u=new mt(me.comparator);u=u.insert(o,Ct.newNoDocument(o,xe.min()));const h=ze().add(o),d=new Yh(xe.min(),new Map,new mt(ke),u,h);await J2(i,d),i.du=i.du.remove(o),i.Au.delete(e),z_(i)}else await du(i.localStore,e,!1).then((()=>pu(i,e,t))).catch(va)}async function l9(n,e){const t=_e(n),i=e.batch.batchId;try{const s=await w6(t.localStore,e);j_(t,i,null),L_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ta(t,s)}catch(s){await va(s)}}async function u9(n,e,t){const i=_e(n);try{const s=await(function(u,h){const d=_e(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,h).next((v=>(Te(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(i.localStore,e);j_(i,e,t),L_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ta(i,s)}catch(s){await va(s)}}function L_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function j_(n,e,t){const i=_e(n);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function pu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||eC(n,i)}))}function eC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(fu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),z_(n))}function vv(n,e,t){for(const i of t)i instanceof X2?(n.Ru.addReference(i.key,e),c9(n,i)):i instanceof W2?(ue(Ru,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||eC(n,i.key)):ye(19791,{wu:i})}function c9(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ue(Ru,"New document in limbo: "+t),n.Eu.add(i),z_(n))}function z_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new me(tt.fromString(e)),i=n.fu.next();n.Au.set(i,new e9(t)),n.du=n.du.insert(t,i),Cp(n.remoteStore,new Kr(ti(_p(t.path)),i,"TargetPurposeLimboResolution",zn.ce))}}async function Ta(n,e,t){const i=_e(n),s=[],o=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,d)=>{u.push(i.pu(d,e,t).then((f=>{if((f||t)&&i.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=I_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(u),i.Pu.H_(s),await(async function(d,f){const g=_e(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>K.forEach(f,(_=>K.forEach(_.Es,(S=>g.persistence.referenceDelegate.addReference(v,_.targetId,S))).next((()=>K.forEach(_.ds,(S=>g.persistence.referenceDelegate.removeReference(v,_.targetId,S)))))))))}catch(v){if(!_a(v))throw v;ue(R_,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const S=g.Ms.get(_),R=S.snapshotVersion,k=S.withLastLimboFreeSnapshotVersion(R);g.Ms=g.Ms.insert(_,k)}}})(i.localStore,o))}async function h9(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){ue(Ru,"User change. New user:",e.toKey());const i=await D2(t.localStore,e);t.currentUser=e,(function(o,u){o.mu.forEach((h=>{h.forEach((d=>{d.reject(new ce(te.CANCELLED,u))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ta(t,i.Ls)}}function d9(n,e){const t=_e(n),i=t.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let s=ze();const o=t.Iu.get(e);if(!o)return s;for(const u of o){const h=t.Tu.get(u);s=s.unionWith(h.view.nu)}return s}}async function f9(n,e){const t=_e(n),i=await fv(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&vv(t,e.targetId,s.au),s}async function m9(n,e){const t=_e(n);return V2(t.localStore,e).then((i=>Ta(t,i)))}async function p9(n,e,t,i){const s=_e(n),o=await(function(h,d){const f=_e(h),g=_e(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(v=>g.er(v,d).next((_=>_?f.localDocuments.getDocuments(v,_):K.resolve(null)))))})(s.localStore,e);o!==null?(t==="pending"?await Au(s.remoteStore):t==="acknowledged"||t==="rejected"?(j_(s,e,i||null),L_(s,e),(function(h,d){_e(_e(h).mutationQueue).ir(d)})(s.localStore,e)):ye(6720,"Unknown batchState",{Su:t}),await Ta(s,o)):ue(Ru,"Cannot apply mutation batch with id: "+e)}async function g9(n,e){const t=_e(n);if(Dp(t),U_(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await ux(t,i.toArray());t.gu=!0,await gv(t.remoteStore,!0);for(const o of s)Cp(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?i.push(u):s=s.then((()=>(pu(t,u),du(t.localStore,u,!0)))),fu(t.remoteStore,u)})),await s,await ux(t,i),(function(u){const h=_e(u);h.Au.forEach(((d,f)=>{fu(h.remoteStore,f)})),h.Ru.Jr(),h.Au=new Map,h.du=new mt(me.comparator)})(t),t.gu=!1,await gv(t.remoteStore,!1)}}async function ux(n,e,t){const i=_e(n),s=[],o=[];for(const u of e){let h;const d=i.Iu.get(u);if(d&&d.length!==0){h=await qm(i.localStore,ti(d[0]));for(const f of d){const g=i.Tu.get(f),v=await f9(i,g);v.snapshot&&o.push(v.snapshot)}}else{const f=await k2(i.localStore,u);h=await qm(i.localStore,f),await O_(i,tC(f),u,!1,h.resumeToken)}s.push(h)}return i.Pu.H_(o),s}function tC(n){return OR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function y9(n){return(function(t){return _e(_e(t).persistence).Ts()})(_e(n).localStore)}async function v9(n,e,t,i){const s=_e(n);if(s.gu)return void ue(Ru,"Ignoring unexpected query state notification.");const o=s.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=await V2(s.localStore,zR(o[0])),h=Yh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Lt.EMPTY_BYTE_STRING);await Ta(s,u,h);break}case"rejected":await du(s.localStore,e,!0),pu(s,e,i);break;default:ye(64155,t)}}async function _9(n,e,t){const i=Dp(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){ue(Ru,"Adding an already active target "+s);continue}const o=await k2(i.localStore,s),u=await qm(i.localStore,o);await O_(i,tC(o),u.targetId,!1,u.resumeToken),Cp(i.remoteStore,u)}for(const s of t)i.Iu.has(s)&&await du(i.localStore,s,!1).then((()=>{fu(i.remoteStore,s),pu(i,s)})).catch(va)}}function Dp(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=J2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o9.bind(null,e),e.Pu.H_=X6.bind(null,e.eventManager),e.Pu.yu=W6.bind(null,e.eventManager),e}function U_(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u9.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ip(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return C2(this.persistence,new R2,e.initialUser,this.serializer)}Cu(e){return new x_(Ap.mi,this.serializer)}Du(e){return new j2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class b9 extends Nh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Te(this.persistence.referenceDelegate instanceof Fm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new E2(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new x_((i=>Fm.mi(i,t)),this.serializer)}}class nC extends Nh{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await U_(this.xu.syncEngine),await Au(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return C2(this.persistence,new R2,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new E2(i,e.asyncQueue,t)}Mu(e,t){const i=new D3(t,this.persistence);return new C3(e.asyncQueue,i)}Cu(e){const t=I2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new A_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,z2(),dm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new j2}}class T9 extends nC{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof d0&&(this.sharedClientState.syncEngine={Co:p9.bind(null,t),vo:v9.bind(null,t),Fo:_9.bind(null,t),Ts:y9.bind(null,t),Do:m9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await g9(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=z2();if(!d0.v(t))throw new ce(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=I2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new d0(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class kh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=h9.bind(null,this.syncEngine),await gv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Y6})()}createDatastore(e){const t=Ip(e.databaseInfo.databaseId),i=(function(o){return new N6(o)})(e.databaseInfo);return(function(o,u,h,d){return new P6(o,u,h,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,o,u,h){return new L6(i,s,o,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>lx(this.syncEngine,t,0)),(function(){return nx.v()?new nx:new I6})())}createSyncEngine(e,t){return(function(s,o,u,h,d,f,g){const v=new t9(s,o,u,h,d,f);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=_e(t);ue(ko,"RemoteStore shutting down."),i.Ea.add(5),await Wh(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kh.provider={build:()=>new kh};class iC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ha="FirestoreClient";class E9{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=r_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async u=>{ue(ha,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ue(ha,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=M_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function m0(n,e){n.asyncQueue.verifyOperationInProgress(),ue(ha,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await D2(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function cx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await w9(n);ue(ha,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>rx(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>rx(e.remoteStore,s))),n._onlineComponents=e}async function w9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(ha,"Using user provided OfflineComponentProvider");try{await m0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;vh("Error using user provided cache. Falling back to memory cache: "+t),await m0(n,new Nh)}}else ue(ha,"Using default OfflineComponentProvider"),await m0(n,new b9(void 0));return n._offlineComponents}async function rC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(ha,"Using user provided OnlineComponentProvider"),await cx(n,n._uninitializedComponentsProvider._online)):(ue(ha,"Using default OnlineComponentProvider"),await cx(n,new kh))),n._onlineComponents}function S9(n){return rC(n).then((e=>e.syncEngine))}async function _v(n){const e=await rC(n),t=e.eventManager;return t.onListen=n9.bind(null,e.syncEngine),t.onUnlisten=r9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=i9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=s9.bind(null,e.syncEngine),t}function x9(n,e,t={}){const i=new Xr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,d,f){const g=new iC({next:_=>{g.Nu(),u.enqueueAndForget((()=>Q2(o,v))),_.fromCache&&d.source==="server"?f.reject(new ce(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new Y2(h,g,{includeMetadataChanges:!0,qa:!0});return $2(o,v)})(await _v(n),n.asyncQueue,e,t,i))),i.promise}function sC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const hx=new Map;const A9="firestore.googleapis.com",dx=!0;class fx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=A9,this.ssl=dx}else this.host=e.host,this.ssl=e.ssl??dx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=y2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T2)throw new ce(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class B_{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new y3;switch(i.type){case"firstParty":return new b3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=hx.get(t);i&&(ue("ComponentProvider","Removing Datastore"),hx.delete(t),i.terminate())})(this),Promise.resolve()}}class ls{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ls(this.firestore,e,this._query)}}class Ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Gh(t,Ot._jsonSchema))return new Ot(e,i||null,new me(tt.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Yt("string",Ot._jsonSchemaVersion),referencePath:Yt("string")};class aa extends ls{constructor(e,t,i){super(e,t,_p(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new me(e))}withConverter(e){return new aa(this.firestore,e,this._path)}}function Np(n,e,...t){if(n=xn(n),tR("collection","path",e),n instanceof B_){const i=tt.fromString(e,...t);return iS(i),new aa(n,null,i)}{if(!(n instanceof Ot||n instanceof aa))throw new ce(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return iS(i),new aa(n.firestore,null,i)}}function bi(n,e,...t){if(n=xn(n),arguments.length===1&&(e=r_.newId()),tR("doc","path",e),n instanceof B_){const i=tt.fromString(e,...t);return nS(i),new Ot(n,null,new me(i))}{if(!(n instanceof Ot||n instanceof aa))throw new ce(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return nS(i),new Ot(n.firestore,n instanceof aa?n.converter:null,new me(i))}}const mx="AsyncQueue";class px{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new U2(this,"async_queue_retry"),this._c=()=>{const i=dm();i&&ue(mx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=dm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_a(e))throw e;ue(mx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Pt("INTERNAL UNHANDLED ERROR: ",gx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=V_.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&ye(47125,{Pc:gx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function gx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function yx(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class da extends B_{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new px,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new px(e),this._firestoreClient=void 0,await e}}}function I9(n,e,t){t||(t=Vm);const i=n_(n,"firestore");if(i.isInitialized(t)){const s=i.getImmediate({identifier:t}),o=i.getOptions(t);if(So(o,e))return s;throw new ce(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ce(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T2)throw new ce(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Tu(e.host)&&LI(e.host),i.initialize({options:e,instanceIdentifier:t})}function F_(n){if(n._terminated)throw new ce(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||R9(n),n._firestoreClient}function R9(n){const e=n._freezeSettings(),t=(function(s,o,u,h){return new r5(s,o,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,sC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new E9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}class vi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vi(Lt.fromBase64String(e))}catch(t){throw new ce(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vi(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gh(e,vi._jsonSchema))return vi.fromBase64String(e.bytes)}}vi._jsonSchemaVersion="firestore/bytes/1.0",vi._jsonSchema={type:Yt("string",vi._jsonSchemaVersion),bytes:Yt("string")};class kp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class q_{constructor(e){this._methodName=e}}class mr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mr._jsonSchemaVersion}}static fromJSON(e){if(Gh(e,mr._jsonSchema))return new mr(e.latitude,e.longitude)}}mr._jsonSchemaVersion="firestore/geoPoint/1.0",mr._jsonSchema={type:Yt("string",mr._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};class pr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gh(e,pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pr(e.vectorValues);throw new ce(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pr._jsonSchemaVersion="firestore/vectorValue/1.0",pr._jsonSchema={type:Yt("string",pr._jsonSchemaVersion),vectorValues:Yt("object")};const C9=/^__.*__$/;class D9{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,t,this.fieldTransforms):new xu(e,this.data,t,this.fieldTransforms)}}class aC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:n})}}class H_{constructor(e,t,i,s,o,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new H_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $m(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oC(this.Ac)&&C9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class N9{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ip(e)}Cc(e,t,i,s=!1){return new H_({Ac:e,methodName:t,Dc:i,path:Et.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vp(n){const e=n._freezeSettings(),t=Ip(n._databaseId);return new N9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lC(n,e,t,i,s,o={}){const u=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);G_("Data must be an object, but it was:",u,i);const h=uC(i,u);let d,f;if(o.merge)d=new Un(u.fieldMask),f=u.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const _=bv(e,v,t);if(!u.contains(_))throw new ce(te.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);hC(g,_)||g.push(_)}d=new Un(g),f=u.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=u.fieldTransforms;return new D9(new bn(h),d,f)}class Mp extends q_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mp}}function k9(n,e,t,i){const s=n.Cc(1,e,t);G_("Data must be an object, but it was:",s,i);const o=[],u=bn.empty();ba(i,((d,f)=>{const g=K_(e,d,t);f=xn(f);const v=s.yc(g);if(f instanceof Mp)o.push(g);else{const _=Zh(f,v);_!=null&&(o.push(g),u.set(g,_))}}));const h=new Un(o);return new aC(u,h,s.fieldTransforms)}function V9(n,e,t,i,s,o){const u=n.Cc(1,e,t),h=[bv(e,i,t)],d=[s];if(o.length%2!=0)throw new ce(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)h.push(bv(e,o[_])),d.push(o[_+1]);const f=[],g=bn.empty();for(let _=h.length-1;_>=0;--_)if(!hC(f,h[_])){const S=h[_];let R=d[_];R=xn(R);const k=u.yc(S);if(R instanceof Mp)f.push(S);else{const V=Zh(R,k);V!=null&&(f.push(S),g.set(S,V))}}const v=new Un(f);return new aC(g,v,u.fieldTransforms)}function M9(n,e,t,i=!1){return Zh(t,n.Cc(i?4:3,e))}function Zh(n,e){if(cC(n=xn(n)))return G_("Unsupported field value:",e,n),uC(n,e);if(n instanceof q_)return(function(i,s){if(!oC(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let u=0;for(const h of i){let d=Zh(h,s.wc(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}})(n,e)}return(function(i,s){if((i=xn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return T5(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ze.fromDate(i);return{timestampValue:hu(s.serializer,o)}}if(i instanceof Ze){const o=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:hu(s.serializer,o)}}if(i instanceof mr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vi)return{bytesValue:t2(s.serializer,i._byteString)};if(i instanceof Ot){const o=s.databaseId,u=i.firestore._databaseId;if(!u.isEqual(o))throw s.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:T_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof pr)return(function(u,h){return{mapValue:{fields:{[d_]:{stringValue:f_},[su]:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return g_(h.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${hp(i)}`)})(n,e)}function uC(n,e){const t={};return _R(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(n,((i,s)=>{const o=Zh(s,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function cC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof mr||n instanceof vi||n instanceof Ot||n instanceof q_||n instanceof pr)}function G_(n,e,t){if(!cC(t)||!nR(t)){const i=hp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function bv(n,e,t){if((e=xn(e))instanceof kp)return e._internalPath;if(typeof e=="string")return K_(n,e);throw $m("Field path arguments must be of type string or ",n,!1,void 0,t)}const P9=new RegExp("[~\\*/\\[\\]]");function K_(n,e,t){if(e.search(P9)>=0)throw $m(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kp(...e.split("."))._internalPath}catch{throw $m(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $m(n,e,t,i,s){const o=i&&!i.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${i}`),u&&(d+=` in document ${s}`),d+=")"),new ce(te.INVALID_ARGUMENT,h+n+d)}function hC(n,e){return n.some((t=>t.isEqual(e)))}class dC{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class O9 extends dC{data(){return super.data()}}function $_(n,e){return typeof e=="string"?K_(n,e):e instanceof kp?e._internalPath:e._delegate._internalPath}function fC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q_{}class Y_ extends Q_{}function fa(n,e,...t){let i=[];e instanceof Q_&&i.push(e),i=i.concat(t),(function(o){const u=o.filter((d=>d instanceof W_)).length,h=o.filter((d=>d instanceof X_)).length;if(u>1||u>0&&h>0)throw new ce(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class X_ extends Y_{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new X_(e,t,i)}_apply(e){const t=this._parse(e);return mC(e._query,t),new ls(e.firestore,e.converter,sv(e._query,t))}_parse(e){const t=Vp(e.firestore);return(function(o,u,h,d,f,g,v){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ce(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){bx(v,g);const R=[];for(const k of v)R.push(_x(d,o,k));_={arrayValue:{values:R}}}else _=_x(d,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||bx(v,g),_=M9(h,u,v,g==="in"||g==="not-in");return Ke.create(f,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class W_ extends Q_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new W_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:st.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let u=s;const h=o.getFlattenedFilters();for(const d of h)mC(u,d),u=sv(u,d)})(e._query,t),new ls(e.firestore,e.converter,sv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Z_ extends Y_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Z_(e,t)}_apply(e){const t=(function(s,o,u){if(s.startAt!==null)throw new ce(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rh(o,u)})(e._query,this._field,this._direction);return new ls(e.firestore,e.converter,(function(s,o){const u=s.explicitOrderBy.concat([o]);return new Su(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function gu(n,e="asc"){const t=e,i=$_("orderBy",n);return Z_._create(i,t)}class J_ extends Y_{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new J_(e,t,i)}_apply(e){return new ls(e.firestore,e.converter,Om(e._query,this._limit,this._limitType))}}function vx(n){return J_._create("limit",n,"F")}function _x(n,e,t){if(typeof(t=xn(t))=="string"){if(t==="")throw new ce(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LR(e)&&t.indexOf("/")!==-1)throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(tt.fromString(t));if(!me.isDocumentKey(i))throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ah(n,new me(i))}if(t instanceof Ot)return Ah(n,t._key);throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hp(t)}.`)}function bx(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mC(n,e){const t=(function(s,o){for(const u of s)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class L9{convertValue(e,t="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ba(e,((s,o)=>{i[s]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[su].arrayValue?.values?.map((i=>bt(i.doubleValue)));return new pr(t)}convertGeoPoint(e){return new mr(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=yp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Sh(e));default:return null}}convertTimestamp(e){const t=Jr(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tt.fromString(e);Te(h2(i),9688,{name:e});const s=new Io(i.get(1),i.get(3)),o=new me(i.popFirst(5));return s.isEqual(t)||Pt(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function pC(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Wc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _o extends dC{constructor(e,t,i,s,o,u){super(e,t,i,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field($_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_o._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:Yt("string",_o._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class fm extends _o{data(e={}){return super.data(e)}}class bo{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Wc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new fm(this._firestore,this._userDataWriter,i.key,i,new Wc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((h=>{const d=new fm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Wc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const d=new fm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Wc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return h.type!==0&&(f=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),g=u.indexOf(h.doc.key)),{type:j9(h.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=r_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}bo._jsonSchemaVersion="firestore/querySnapshot/1.0",bo._jsonSchema={type:Yt("string",bo._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class eb extends L9{constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function Pp(n){n=zi(n,ls);const e=zi(n.firestore,da),t=F_(e),i=new eb(e);return fC(n._query),x9(t,n._query).then((s=>new bo(e,i,n,s)))}function tb(n,e,t){n=zi(n,Ot);const i=zi(n.firestore,da),s=pC(n.converter,e,t);return Up(i,[lC(Vp(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Tn.none())])}function Op(n,e,t,...i){n=zi(n,Ot);const s=zi(n.firestore,da),o=Vp(s);let u;return u=typeof(e=xn(e))=="string"||e instanceof kp?V9(o,"updateDoc",n._key,e,t,i):k9(o,"updateDoc",n._key,e),Up(s,[u.toMutation(n._key,Tn.exists(!0))])}function Lp(n){return Up(zi(n.firestore,da),[new wp(n._key,Tn.none())])}function jp(n,e){const t=zi(n.firestore,da),i=bi(n),s=pC(n.converter,e);return Up(t,[lC(Vp(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Tn.exists(!1))]).then((()=>i))}function zp(n,...e){n=xn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||yx(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(yx(e[i])){const d=e[i];e[i]=d.next?.bind(d),e[i+1]=d.error?.bind(d),e[i+2]=d.complete?.bind(d)}let o,u,h;if(n instanceof Ot)u=zi(n.firestore,da),h=_p(n._key.path),o={next:d=>{e[i]&&e[i](z9(u,n,d))},error:e[i+1],complete:e[i+2]};else{const d=zi(n,ls);u=zi(d.firestore,da),h=d._query;const f=new eb(u);o={next:g=>{e[i]&&e[i](new bo(u,f,d,g))},error:e[i+1],complete:e[i+2]},fC(n._query)}return(function(f,g,v,_){const S=new iC(_),R=new Y2(g,S,v);return f.asyncQueue.enqueueAndForget((async()=>$2(await _v(f),R))),()=>{S.Nu(),f.asyncQueue.enqueueAndForget((async()=>Q2(await _v(f),R)))}})(F_(u),h,s,o)}function Up(n,e){return(function(i,s){const o=new Xr;return i.asyncQueue.enqueueAndForget((async()=>a9(await S9(i),s,o))),o.promise})(F_(n),e)}function z9(n,e,t){const i=t.docs.get(e._key),s=new eb(n);return new _o(n,s,e._key,i,new Wc(t.hasPendingWrites,t.fromCache),e.converter)}class U9{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=H9(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function B9(n){return new U9(n)}class F9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=kh.provider,this._offlineComponentProvider={build:t=>new nC(t,e?.cacheSizeBytes,this.forceOwnership)}}}class q9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=kh.provider,this._offlineComponentProvider={build:t=>new T9(t,e?.cacheSizeBytes)}}}function H9(n){return new F9(n?.forceOwnership)}function G9(){return new q9}(function(e,t=!0){(function(s){wu=s})(Eu),Zl(new xo("firestore",((i,{instanceIdentifier:s,options:o})=>{const u=i.getProvider("app").getImmediate(),h=new da(new v3(i.getProvider("auth-internal")),new T3(u,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ce(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Io(f.options.projectId,g)})(u,s),u);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),ia(Zw,Jw,e),ia(Zw,Jw,"esm2020")})();var K9="firebase",$9="12.6.0";ia(K9,$9,"app");function gC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q9=gC,yC=new qh("auth","Firebase",gC());const Qm=new e_("@firebase/auth");function Y9(n,...e){Qm.logLevel<=Ge.WARN&&Qm.warn(`Auth (${Eu}): ${n}`,...e)}function mm(n,...e){Qm.logLevel<=Ge.ERROR&&Qm.error(`Auth (${Eu}): ${n}`,...e)}function ts(n,...e){throw nb(n,...e)}function gr(n,...e){return nb(n,...e)}function vC(n,e,t){const i={...Q9(),[e]:t};return new qh("auth","Firebase",i).create(e,{appName:n.name})}function To(n){return vC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nb(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return yC.create(n,...e)}function De(n,e,...t){if(!n)throw nb(e,...t)}function $r(n){const e="INTERNAL ASSERTION FAILED: "+n;throw mm(e),new Error(e)}function ns(n,e){n||$r(e)}function Tv(){return typeof self<"u"&&self.location?.href||""}function X9(){return Tx()==="http:"||Tx()==="https:"}function Tx(){return typeof self<"u"&&self.location?.protocol||null}function W9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X9()||XP()||"connection"in navigator)?navigator.onLine:!0}function Z9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Jh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ns(t>e,"Short delay should be less than long delay!"),this.isMobile=QP()||WP()}get(){return W9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ib(n,e){ns(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class _C{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const J9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const eL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tL=new Jh(3e4,6e4);function rb(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Cu(n,e,t,i,s={}){return bC(n,s,async()=>{let o={},u={};i&&(e==="GET"?u=i:o={body:JSON.stringify(i)});const h=Hh({key:n.config.apiKey,...u}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...o};return YP()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Tu(n.emulatorConfig.host)&&(f.credentials="include"),_C.fetch()(await TC(n,n.config.apiHost,t,h),f)})}async function bC(n,e,t){n._canInitEmulator=!1;const i={...J9,...e};try{const s=new iL(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Gf(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[d,f]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gf(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Gf(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Gf(n,"user-disabled",u);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw vC(n,g,f);ts(n,g)}}catch(s){if(s instanceof ss)throw s;ts(n,"network-request-failed",{message:String(s)})}}async function nL(n,e,t,i,s={}){const o=await Cu(n,e,t,i,s);return"mfaPendingCredential"in o&&ts(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function TC(n,e,t,i){const s=`${e}${t}?${i}`,o=n,u=o.config.emulator?ib(n.config,s):`${n.config.apiScheme}://${s}`;return eL.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}class iL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(gr(this.auth,"network-request-failed")),tL.get())})}}function Gf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=gr(n,e,i);return s.customData._tokenResponse=t,s}async function rL(n,e){return Cu(n,"POST","/v1/accounts:delete",e)}async function Ym(n,e){return Cu(n,"POST","/v1/accounts:lookup",e)}function uh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sL(n,e=!1){const t=xn(n),i=await t.getIdToken(e),s=sb(i);De(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o?.sign_in_provider;return{claims:s,token:i,authTime:uh(p0(s.auth_time)),issuedAtTime:uh(p0(s.iat)),expirationTime:uh(p0(s.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function p0(n){return Number(n)*1e3}function sb(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return mm("JWT malformed, contained fewer than 3 sections"),null;try{const s=VI(t);return s?JSON.parse(s):(mm("Failed to decode base64 JWT payload"),null)}catch(s){return mm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Ex(n){const e=sb(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Vh(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ss&&aL(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function aL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class oL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ev{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uh(this.lastLoginAt),this.creationTime=uh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xm(n){const e=n.auth,t=await n.getIdToken(),i=await Vh(n,Ym(e,{idToken:t}));De(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?EC(s.providerUserInfo):[],u=uL(n.providerData,o),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!u?.length,f=h?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new Ev(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function lL(n){const e=xn(n);await Xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uL(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function EC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function cL(n,e){const t=await bC(n,{},async()=>{const i=Hh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,u=await TC(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&Tu(n.emulatorConfig.host)&&(d.credentials="include"),_C.fetch()(u,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hL(n,e){return Cu(n,"POST","/v2/accounts:revokeToken",rb(n,e))}class $l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=Ex(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:o}=await cL(e,t);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:o}=t,u=new $l;return i&&(De(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),s&&(De(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(De(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $l,this.toJSON())}_performRefresh(){return $r("not implemented")}}function Gs(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Li{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new oL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ev(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Vh(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sL(this,e)}reload(){return lL(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Xm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(To(this.auth));const e=await this.getIdToken();return await Vh(this,rL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:S,providerData:R,stsTokenManager:k}=t;De(v&&k,e,"internal-error");const V=$l.fromJSON(this.name,k);De(typeof v=="string",e,"internal-error"),Gs(i,e.name),Gs(s,e.name),De(typeof _=="boolean",e,"internal-error"),De(typeof S=="boolean",e,"internal-error"),Gs(o,e.name),Gs(u,e.name),Gs(h,e.name),Gs(d,e.name),Gs(f,e.name),Gs(g,e.name);const j=new Li({uid:v,auth:e,email:s,emailVerified:_,displayName:i,isAnonymous:S,photoURL:u,phoneNumber:o,tenantId:h,stsTokenManager:V,createdAt:f,lastLoginAt:g});return R&&Array.isArray(R)&&(j.providerData=R.map(M=>({...M}))),d&&(j._redirectEventId=d),j}static async _fromIdTokenResponse(e,t,i=!1){const s=new $l;s.updateFromServerResponse(t);const o=new Li({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Xm(o),o}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];De(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?EC(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!o?.length,h=new $l;h.updateFromIdToken(i);const d=new Li({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ev(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const wx=new Map;function Qr(n){ns(n instanceof Function,"Expected a class definition");let e=wx.get(n);return e?(ns(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wx.set(n,e),e)}class wC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wC.type="NONE";const Sx=wC;function pm(n,e,t){return`firebase:${n}:${e}:${t}`}class Ql{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=pm(this.userKey,s.apiKey,o),this.fullPersistenceKey=pm("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ym(this.auth,{idToken:e}).catch(()=>{});return t?Li._fromGetAccountInfoResponse(this.auth,t,e):null}return Li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ql(Qr(Sx),e,i);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Qr(Sx);const u=pm(i,e.config.apiKey,e.name);let h=null;for(const f of t)try{const g=await f._get(u);if(g){let v;if(typeof g=="string"){const _=await Ym(e,{idToken:g}).catch(()=>{});if(!_)break;v=await Li._fromGetAccountInfoResponse(e,_,g)}else v=Li._fromJSON(e,g);f!==o&&(h=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Ql(o,e,i):(o=d[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(u)}catch{}})),new Ql(o,e,i))}}function xx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CC(e))return"Blackberry";if(DC(e))return"Webos";if(xC(e))return"Safari";if((e.includes("chrome/")||AC(e))&&!e.includes("edge/"))return"Chrome";if(RC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function SC(n=en()){return/firefox\//i.test(n)}function xC(n=en()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AC(n=en()){return/crios\//i.test(n)}function IC(n=en()){return/iemobile/i.test(n)}function RC(n=en()){return/android/i.test(n)}function CC(n=en()){return/blackberry/i.test(n)}function DC(n=en()){return/webos/i.test(n)}function ab(n=en()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dL(n=en()){return ab(n)&&!!window.navigator?.standalone}function fL(){return ZP()&&document.documentMode===10}function NC(n=en()){return ab(n)||RC(n)||DC(n)||CC(n)||/windows phone/i.test(n)||IC(n)}function kC(n,e=[]){let t;switch(n){case"Browser":t=xx(en());break;case"Worker":t=`${xx(en())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Eu}/${i}`}class mL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((u,h)=>{try{const d=e(o);u(d)}catch(d){h(d)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function pL(n,e={}){return Cu(n,"GET","/v2/passwordPolicy",rb(n,e))}const gL=6;class yL{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??gL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class vL{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ax(this),this.idTokenSubscription=new Ax(this),this.beforeStateQueue=new mL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ql.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ym(this,{idToken:e}),i=await Li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(cr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===u)&&h?.user&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(To(this));const t=e?xn(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(To(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(To(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pL(this),t=new yL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await hL(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qr(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Ql.create(this,[Qr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,s);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Y9(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ob(n){return xn(n)}class Ax{constructor(e){this.auth=e,this.observer=null,this.addObserver=rO(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let lb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _L(n){lb=n}function bL(n){return lb.loadJS(n)}function TL(){return lb.gapiScript}function EL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function wL(n,e){const t=n_(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(So(o,e??{}))return s;ts(s,"already-initialized")}return t.initialize({options:e})}function SL(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Qr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function xL(n,e,t){const i=ob(n);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=VC(e),{host:u,port:h}=AL(e),d=h===null?"":`:${h}`,f={url:`${o}//${u}${d}/`},g=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(So(f,i.config.emulator)&&So(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Tu(u)?(LI(`${o}//${u}${d}`),$P("Auth",!0)):IL()}function VC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AL(n){const e=VC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Ix(i.substr(o.length+1))}}else{const[o,u]=i.split(":");return{host:o,port:Ix(u)}}}function Ix(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function IL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class MC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,t){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}async function Yl(n,e){return nL(n,"POST","/v1/accounts:signInWithIdp",rb(n,e))}const RL="http://localhost";class Vo extends MC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ts("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=t;if(!i||!s)return null;const u=new Vo(i,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Yl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Yl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yl(e,t)}buildRequest(){const e={requestUri:RL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hh(t)}return e}}class PC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ed extends PC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ys extends ed{constructor(){super("facebook.com")}static credential(e){return Vo._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ys.PROVIDER_ID="facebook.com";class Xs extends ed{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vo._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Xs.credential(t,i)}catch{return null}}}Xs.GOOGLE_SIGN_IN_METHOD="google.com";Xs.PROVIDER_ID="google.com";class Ws extends ed{constructor(){super("github.com")}static credential(e){return Vo._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.GITHUB_SIGN_IN_METHOD="github.com";Ws.PROVIDER_ID="github.com";class Zs extends ed{constructor(){super("twitter.com")}static credential(e,t){return Vo._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Zs.credential(t,i)}catch{return null}}}Zs.TWITTER_SIGN_IN_METHOD="twitter.com";Zs.PROVIDER_ID="twitter.com";class yu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const o=await Li._fromIdTokenResponse(e,i,s),u=Rx(i);return new yu({user:o,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=Rx(i);return new yu({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function Rx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Wm extends ss{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Wm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Wm(e,t,i,s)}}function OC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Wm._fromErrorAndOperation(n,o,e,i):o})}async function CL(n,e,t=!1){const i=await Vh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return yu._forOperation(n,"link",i)}async function DL(n,e,t=!1){const{auth:i}=n;if(cr(i.app))return Promise.reject(To(i));const s="reauthenticate";try{const o=await Vh(n,OC(i,s,e,n),t);De(o.idToken,i,"internal-error");const u=sb(o.idToken);De(u,i,"internal-error");const{sub:h}=u;return De(n.uid===h,i,"user-mismatch"),yu._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ts(i,"user-mismatch"),o}}async function NL(n,e,t=!1){if(cr(n.app))return Promise.reject(To(n));const i="signIn",s=await OC(n,i,e),o=await yu._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(o.user),o}function kL(n,e,t,i){return xn(n).onIdTokenChanged(e,t,i)}function VL(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}const Zm="__sak";class LC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zm,"1"),this.storage.removeItem(Zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ML=1e3,PL=10;class jC extends LC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},o=this.storage.getItem(i);fL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,PL):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},ML)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jC.type="LOCAL";const OL=jC;class zC extends LC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zC.type="SESSION";const UC=zC;function LL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Bp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Bp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:o}=t.data,u=this.handlersMap[s];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(u).map(async f=>f(t.origin,o)),d=await LL(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bp.receivers=[];function ub(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class jL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((h,d)=>{const f=ub("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);u={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(_.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function yr(){return window}function zL(n){yr().location.href=n}function BC(){return typeof yr().WorkerGlobalScope<"u"&&typeof yr().importScripts=="function"}async function UL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BL(){return navigator?.serviceWorker?.controller||null}function FL(){return BC()?self:null}const FC="firebaseLocalStorageDb",qL=1,Jm="firebaseLocalStorage",qC="fbase_key";class td{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fp(n,e){return n.transaction([Jm],e?"readwrite":"readonly").objectStore(Jm)}function HL(){const n=indexedDB.deleteDatabase(FC);return new td(n).toPromise()}function wv(){const n=indexedDB.open(FC,qL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Jm,{keyPath:qC})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Jm)?e(i):(i.close(),await HL(),e(await wv()))})})}async function Cx(n,e,t){const i=Fp(n,!0).put({[qC]:e,value:t});return new td(i).toPromise()}async function GL(n,e){const t=Fp(n,!1).get(e),i=await new td(t).toPromise();return i===void 0?null:i.value}function Dx(n,e){const t=Fp(n,!0).delete(e);return new td(t).toPromise()}const KL=800,$L=3;class HC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>$L)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bp._getInstance(FL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await UL(),!this.activeServiceWorker)return;this.sender=new jL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wv();return await Cx(e,Zm,"1"),await Dx(e,Zm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Cx(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>GL(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Fp(s,!1).getAll();return new td(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HC.type="LOCAL";const QL=HC;new Jh(3e4,6e4);function YL(n,e){return e?Qr(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class cb extends MC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XL(n){return NL(n.auth,new cb(n),n.bypassAuthState)}function WL(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),DL(t,new cb(n),n.bypassAuthState)}async function ZL(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),CL(t,new cb(n),n.bypassAuthState)}class GC{constructor(e,t,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XL;case"linkViaPopup":case"linkViaRedirect":return ZL;case"reauthViaPopup":case"reauthViaRedirect":return WL;default:ts(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const JL=new Jh(2e3,1e4);class Ul extends GC{constructor(e,t,i,s,o){super(e,t,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Ul.currentPopupAction&&Ul.currentPopupAction.cancel(),Ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=ub();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JL.get())};e()}}Ul.currentPopupAction=null;const ej="pendingRedirect",gm=new Map;class tj extends GC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=gm.get(this.auth._key());if(!e){try{const i=await nj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}gm.set(this.auth._key(),e)}return this.bypassAuthState||gm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nj(n,e){const t=sj(e),i=rj(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function ij(n,e){gm.set(n._key(),e)}function rj(n){return Qr(n._redirectPersistence)}function sj(n){return pm(ej,n.config.apiKey,n.name)}async function aj(n,e,t=!1){if(cr(n.app))return Promise.reject(To(n));const i=ob(n),s=YL(i,e),u=await new tj(i,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const oj=600*1e3;class lj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!KC(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(gr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oj&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nx(e))}saveEventToCache(e){this.cachedEventUids.add(Nx(e)),this.lastProcessedEventTime=Date.now()}}function Nx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function KC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function uj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KC(n);default:return!1}}async function cj(n,e={}){return Cu(n,"GET","/v1/projects",e)}const hj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dj=/^https?/;async function fj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await cj(n);for(const t of e)try{if(mj(t))return}catch{}ts(n,"unauthorized-domain")}function mj(n){const e=Tv(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!dj.test(t))return!1;if(hj.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const pj=new Jh(3e4,6e4);function kx(){const n=yr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gj(n){return new Promise((e,t)=>{function i(){kx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kx(),t(gr(n,"network-request-failed"))},timeout:pj.get()})}if(yr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yr().gapi?.load)i();else{const s=EL("iframefcb");return yr()[s]=()=>{gapi.load?i():t(gr(n,"network-request-failed"))},bL(`${TL()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw ym=null,e})}let ym=null;function yj(n){return ym=ym||gj(n),ym}const vj=new Jh(5e3,15e3),_j="__/auth/iframe",bj="emulator/auth/iframe",Tj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ej=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wj(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ib(e,bj):`https://${n.config.authDomain}/${_j}`,i={apiKey:e.apiKey,appName:n.name,v:Eu},s=Ej.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Hh(i).slice(1)}`}async function Sj(n){const e=await yj(n),t=yr().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:wj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tj,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const u=gr(n,"network-request-failed"),h=yr().setTimeout(()=>{o(u)},vj.get());function d(){yr().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(u)})}))}const xj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Aj=500,Ij=600,Rj="_blank",Cj="http://localhost";class Vx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dj(n,e,t,i=Aj,s=Ij){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...xj,width:i.toString(),height:s.toString(),top:o,left:u},f=en().toLowerCase();t&&(h=AC(f)?Rj:t),SC(f)&&(e=e||Cj,d.scrollbars="yes");const g=Object.entries(d).reduce((_,[S,R])=>`${_}${S}=${R},`,"");if(dL(f)&&h!=="_self")return Nj(e||"",h),new Vx(null);const v=window.open(e||"",h,g);De(v,n,"popup-blocked");try{v.focus()}catch{}return new Vx(v)}function Nj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const kj="__/auth/handler",Vj="emulator/auth/handler",Mj=encodeURIComponent("fac");async function Mx(n,e,t,i,s,o){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Eu,eventId:s};if(e instanceof PC){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",iO(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))u[g]=v}if(e instanceof ed){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(u.scopes=g.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await n._getAppCheckToken(),f=d?`#${Mj}=${encodeURIComponent(d)}`:"";return`${Pj(n)}?${Hh(h).slice(1)}${f}`}function Pj({config:n}){return n.emulator?ib(n,Vj):`https://${n.authDomain}/${kj}`}const g0="webStorageSupport";class Oj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UC,this._completeRedirectFn=aj,this._overrideRedirectResult=ij}async _openPopup(e,t,i,s){ns(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Mx(e,t,i,Tv(),s);return Dj(e,o,ub())}async _openRedirect(e,t,i,s){await this._originValidation(e);const o=await Mx(e,t,i,Tv(),s);return zL(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(ns(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Sj(e),i=new lj(e);return t.register("authEvent",s=>(De(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(g0,{type:g0},s=>{const o=s?.[0]?.[g0];o!==void 0&&t(!!o),ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NC()||xC()||ab()}}const Lj=Oj;var Px="@firebase/auth",Ox="1.11.1";class jj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Uj(n){Zl(new xo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kC(n)},f=new vL(i,s,o,d);return SL(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Zl(new xo("auth-internal",e=>{const t=ob(e.getProvider("auth").getImmediate());return(i=>new jj(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ia(Px,Ox,zj(n)),ia(Px,Ox,"esm2020")}const Bj=300,Fj=OI("authIdTokenMaxAge")||Bj;let Lx=null;const qj=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Fj)return;const s=t?.token;Lx!==s&&(Lx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Hj(n=s3()){const e=n_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=wL(n,{popupRedirectResolver:Lj,persistence:[QL,OL,UC]}),i=OI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const u=qj(o.toString());VL(t,u,()=>u(t.currentUser)),kL(t,h=>u(h))}}const s=qP("auth");return s&&xL(t,`http://${s}`),t}function Gj(){return document.getElementsByTagName("head")?.[0]??document}_L({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=gr("internal-error");o.customData=s,t(o)},i.type="text/javascript",i.charset="UTF-8",Gj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Uj("Browser");const Kj={apiKey:"AIzaSyAQ5FdR_OjZvMkTOYy9auXDctOQXGtZPgg",authDomain:"house-budget-pwa.firebaseapp.com",projectId:"house-budget-pwa",storageBucket:"house-budget-pwa.firebasestorage.app",messagingSenderId:"7591891522",appId:"1:7591891522:web:ebf15777f6c206129753db",measurementId:"G-6QDXEYXPTE"},$C=HI(Kj),Nn=I9($C,{localCache:B9({tabManager:G9()})});Hj($C);const y0=n=>Np(Nn,"users",n,"transactions"),to={subscribeToTransactions:(n,e)=>{const t=fa(y0(n),gu("date","desc"));return zp(t,s=>{const o=s.docs.map(u=>({id:u.id,...u.data()}));e(o)})},getAllTransactions:async n=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${n}`);const e=fa(y0(n),gu("date","desc")),i=(await Pp(e)).docs.map(s=>({id:s.id,...s.data()}));return console.log(` Fetched ${i.length} transactions:`,i.map(s=>({id:s.id,description:s.description}))),i},addTransaction:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${t}`);try{console.log(" About to call addDoc with:",i);const s=await jp(y0(e),i);console.log(" addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`),console.log(` Document path: ${s.path}`);const o={id:s.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(s){throw console.error(" addDoc failed:",s),console.error("Error message:",s.message),s}},updateTransaction:async(n,e,t)=>{const i=bi(Nn,"users",n,"transactions",e);return await Op(i,t)},deleteTransaction:async(n,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${n}`);try{const t=bi(Nn,"users",n,"transactions",e);console.log(` Deleting document at path: ${t.path}`),await Lp(t),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(t){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,t),console.error("Error message:",t.message),t}}},v0=n=>Np(Nn,"users",n,"envelopes"),Kf={subscribeToEnvelopes:(n,e)=>{const t=fa(v0(n),gu("orderIndex","asc"));return zp(t,s=>{const o=s.docs.map(u=>({id:u.id,...u.data()}));e(o)})},getAllEnvelopes:async n=>{const e=fa(v0(n),gu("name","asc"));return(await Pp(e)).docs.map(i=>({id:i.id,...i.data()}))},createEnvelope:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create envelope");console.log(` EnvelopeService.createEnvelope: Adding envelope for user ${e}:`,i),console.log(` Original envelope had temp ID: ${t}`);try{const s=await jp(v0(e),i);console.log(" Envelope addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`);const o={id:s.id,...i,userId:e};return console.log(" Final envelope result object:",o),o}catch(s){throw console.error(" Envelope addDoc failed:",s),s}},saveEnvelope:async(n,e)=>{const t=bi(Nn,"users",n,"envelopes",e.id);return await tb(t,e,{merge:!0})},updateBalance:async(n,e,t)=>{const i=bi(Nn,"users",n,"envelopes",e);return await Op(i,{currentBalance:t,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(n,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${n}`);const t=bi(Nn,"users",n,"envelopes",e);await Lp(t),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},_0=n=>Np(Nn,"users",n,"distributionTemplates"),$f={subscribeToDistributionTemplates:(n,e)=>{const t=fa(_0(n),gu("lastUsed","desc"));return zp(t,s=>{const o=s.docs.map(u=>({id:u.id,...u.data()}));e(o)})},getAllDistributionTemplates:async n=>{const e=fa(_0(n),gu("lastUsed","desc"));return(await Pp(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async n=>{const{userId:e,id:t,...i}=n;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const s=await jp(_0(e),i);console.log(" Template addDoc succeeded, docRef:",s);const o={id:s.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(s){throw console.error(" Template addDoc failed:",s),s}},saveDistributionTemplate:async(n,e)=>{const t=bi(Nn,"users",n,"distributionTemplates",e.id);return await tb(t,e,{merge:!0})},updateDistributionTemplate:async(n,e,t)=>{const i=bi(Nn,"users",n,"distributionTemplates",e);return await Op(i,t)},deleteDistributionTemplate:async(n,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${n}`);const t=bi(Nn,"users",n,"distributionTemplates",e);await Lp(t),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},b0=n=>Np(Nn,"users",n,"appSettings"),Vl={subscribeToAppSettings:(n,e)=>{const t=fa(b0(n),vx(1));return zp(t,s=>{if(s.empty){e(null);return}const o=s.docs.map(u=>({id:u.id,...u.data()}))[0];e(o)})},getAppSettings:async n=>{const e=fa(b0(n),vx(1)),t=await Pp(e);if(t.empty)return null;const i=t.docs[0];return{id:i.id,...i.data()}},createAppSettings:async n=>{const{userId:e,...t}=n;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,t);try{const i=await jp(b0(e),t);console.log(" Settings addDoc succeeded, docRef:",i);const s={id:i.id,...t,userId:e};return console.log(" Final settings result object:",s),s}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(n,e)=>{const t=bi(Nn,"users",n,"appSettings",e.id);return await tb(t,e,{merge:!0})},updateAppSettings:async(n,e,t)=>{const i=bi(Nn,"users",n,"appSettings",e);return await Op(i,t)},deleteAppSettings:async(n,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${n}`);const t=bi(Nn,"users",n,"appSettings",e);await Lp(t),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},It="test-user-123",$j=async()=>{if(typeof navigator>"u"||!navigator.onLine)return!1;try{const n=new AbortController,e=setTimeout(()=>n.abort(),3e3);return await fetch("https://www.google.com/favicon.ico",{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:n.signal}),clearTimeout(e),!0}catch{return!1}},qr=n=>{const e=n?.code?.toLowerCase()||"",t=n?.message?.toLowerCase()||"",i=n?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||t.includes("network")||t.includes("offline")||t.includes("disconnected")||t.includes("connection")||t.includes("fetch")||t.includes("timeout")||t.includes("err_internet_disconnected")||t.includes("err_network_changed")||t.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&t==="undefined")},Bn=vI((n,e)=>({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,fetchData:async()=>{n({isLoading:!0,error:null});try{const[t,i,s,o]=await Promise.all([Kf.getAllEnvelopes(It).catch(u=>(console.warn("Failed to fetch envelopes:",u),[])),to.getAllTransactions(It).catch(u=>(console.warn("Failed to fetch transactions:",u),[])),$f.getAllDistributionTemplates(It).catch(u=>(console.warn("Failed to fetch templates:",u),[])),Vl.getAppSettings(It).catch(u=>(console.warn("Failed to fetch settings:",u),null))]);n(u=>{const h=M=>M.map(L=>({...L,date:L.date&&typeof L.date=="object"&&L.date.toDate?L.date.toDate().toISOString():L.date})),d=M=>({id:M.id,name:M.name,budget:M.currentBalance||0,category:void 0,currentBalance:M.currentBalance,lastUpdated:M.lastUpdated,isActive:M.isActive??!0,orderIndex:M.orderIndex??0}),f=t.map(d),g=new Set([...u.envelopes.map(M=>M.id),...t.map(M=>M.id)]),v=u.envelopes.filter(M=>M.id&&!t.some(L=>L.id===M.id)&&!M.id.startsWith("temp-")),_=u.transactions.filter(M=>M.id&&!i.some(L=>L.id===M.id)&&(!M.id.startsWith("temp-")||g.has(M.envelopeId)));let S,R=[];navigator.onLine?(S=s,console.log(` Online mode: Using Firebase templates only (${S.length} templates)`)):(R=u.distributionTemplates.filter(M=>M.id&&!s.some(L=>L.id===M.id)),S=s.concat(R),console.log(` Offline mode: Merged ${s.length} Firebase + ${R.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",u.envelopes.map(M=>({id:M.id,name:M.name}))),console.log("  Firebase envelopes:",t.map(M=>({id:M.id,name:M.name}))),console.log("  Store transactions:",u.transactions.map(M=>({id:M.id,envelopeId:M.envelopeId,description:M.description}))),console.log("  Firebase transactions:",i.map(M=>({id:M.id,envelopeId:M.envelopeId,description:M.description}))),console.log("  Store templates:",u.distributionTemplates.map(M=>({id:M.id,name:M.name}))),console.log("  Firebase templates:",s.map(M=>({id:M.id,name:M.name}))),console.log("  Local-only envelopes:",v.map(M=>({id:M.id,name:M.name}))),console.log("  Local-only transactions:",_.map(M=>({id:M.id,envelopeId:M.envelopeId,description:M.description}))),console.log("  Local-only templates:",R.map(M=>({id:M.id,name:M.name}))),console.log("  Total merged templates:",S.length,S.map(M=>({id:M.id,name:M.name})));const k=f.concat(v),V=h(i).concat(_);console.log("  Local-only envelopes:",v.map(M=>({id:M.id,name:M.name}))),console.log("  Merged envelopes will be:",k.length,k.map(M=>({id:M.id,name:M.name})));let j=o;if(o&&"isDarkMode"in o&&!("theme"in o)){const M=o;j={...M,theme:M.isDarkMode?"dark":"light"},delete j.isDarkMode,j&&j.id&&Vl.updateAppSettings(It,j.id,{theme:j.theme}).catch(L=>console.warn("Failed to migrate app settings:",L))}return{envelopes:k,transactions:V,distributionTemplates:S,appSettings:j,isLoading:!1,pendingSync:!1}})}catch(t){console.error("Sync Failed:",t),qr(t)?n({isLoading:!1,pendingSync:!0}):n({error:t.message,isLoading:!1})}},addTransaction:async t=>{const i=`temp-${Date.now()}-${Math.random()}`,s={...t,amount:t.amount.toString(),id:i,userId:It};if(n(o=>({transactions:[...o.transactions,s],isLoading:!0})),t.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${t.envelopeId}`),n({isLoading:!1,pendingSync:!0});else try{const o={...s,date:Ze.fromDate(new Date(s.date))},u=await to.addTransaction(o);console.log(` Replacing temp transaction ${i} with Firebase transaction:`,u);const h={...u,date:u.date&&typeof u.date=="object"&&u.date.toDate?u.date.toDate().toISOString():u.date};n(d=>({transactions:d.transactions.map(f=>f.id===i?h:f),isLoading:!1,pendingSync:!1}))}catch(o){console.error("Add Transaction Failed:",o),qr(o)?n({isLoading:!1,pendingSync:!0,error:null}):n(u=>({transactions:u.transactions.filter(h=>h.id!==i),error:o.message,isLoading:!1}))}},createEnvelope:async t=>{const i=t.budget&&t.budget>0,s=i?{...t,budget:0}:t,o=`temp-${Date.now()}-${Math.random()}`,u={...s,id:o};if(n(h=>({envelopes:[...h.envelopes,u],isLoading:!0})),i){console.log(` Creating initial deposit transaction locally first: ${u.name} (tempId: ${o})`);try{await e().addTransaction({description:"Initial Deposit",amount:t.budget.toString(),envelopeId:o,date:new Date().toISOString(),type:"income"}),console.log(" Initial deposit transaction created locally");const h=e().getEnvelopeBalance(o);console.log(` Test balance for temp envelope ${o}: $${h.toNumber()}`)}catch(h){console.error(" Failed to create initial deposit transaction locally:",h)}}try{console.log(" Attempting Firebase envelope creation...");const h={...s,userId:It},d=await Kf.createEnvelope(h);console.log(" Firebase envelope creation successful:",d);const f={id:d.id,name:d.name,budget:d.currentBalance||0,category:void 0,currentBalance:d.currentBalance,lastUpdated:d.lastUpdated,isActive:d.isActive??!0,orderIndex:d.orderIndex??0};if(n(g=>({envelopes:g.envelopes.map(v=>v.id===o?f:v),isLoading:!1,pendingSync:!1})),i){console.log(` Updating transactions from temp envelope ID ${o} to real ID ${d.id}`),console.log(" Transactions before update:",e().transactions.map(v=>({id:v.id,envelopeId:v.envelopeId,description:v.description}))),n(v=>({transactions:v.transactions.map(_=>_.envelopeId===o?{..._,envelopeId:d.id}:_)})),console.log(" Transactions after envelopeId update:",e().transactions.map(v=>({id:v.id,envelopeId:v.envelopeId,description:v.description})));const g=e().transactions.filter(v=>v.envelopeId===d.id&&v.id&&v.id.startsWith("temp-"));console.log(` Found ${g.length} transactions to sync for envelope ${d.id}:`,g.map(v=>({id:v.id,envelopeId:v.envelopeId})));for(const v of g)try{console.log(" Syncing transaction:",v);const _={...v,date:Ze.fromDate(new Date(v.date))},S=await to.addTransaction(_);console.log(" Transaction synced:",S);const R={...S,date:S.date&&typeof S.date=="object"&&S.date.toDate?S.date.toDate().toISOString():S.date};console.log(` Replacing temp transaction ${v.id} with Firebase transaction ${S.id}`),n(k=>({transactions:k.transactions.map(V=>V.id===v.id?R:V)}))}catch(_){console.error(` Failed to sync transaction ${v.id}:`,_)}console.log(" Final transactions after sync:",e().transactions.map(v=>({id:v.id,envelopeId:v.envelopeId,description:v.description}))),n({pendingSync:!1}),console.log(` All transactions synced for envelope ${d.id}`)}}catch(h){console.error("Create Envelope Failed:",h),console.log("Error details:",{code:h?.code,message:h?.message,name:h?.name,isNetworkError:qr(h)}),qr(h)?(console.log(" Treating as offline scenario - keeping temp envelope and transactions"),n({isLoading:!1,pendingSync:!0,error:null})):(console.log(" Real error - removing temp envelope"),n(d=>({envelopes:d.envelopes.filter(f=>f.id!==o),transactions:d.transactions.filter(f=>f.envelopeId!==o),error:h.message,isLoading:!1})))}},syncData:async()=>{if(e().isOnline){n({pendingSync:!0});try{await e().fetchData()}catch(t){console.error("Manual sync failed:",t)}}},updateOnlineStatus:async()=>{const t=await $j();n({isOnline:t})},addToEnvelope:async(t,i,s,o)=>{const u=o?typeof o=="string"?o:o.toISOString():new Date().toISOString();await e().addTransaction({description:s,amount:i.toString(),envelopeId:t,date:u,type:"income"})},spendFromEnvelope:async(t,i,s,o)=>{const u=o?typeof o=="string"?o:o.toISOString():new Date().toISOString();await e().addTransaction({description:s,amount:i.toString(),envelopeId:t,date:u,type:"expense"})},transferFunds:async(t,i,s,o,u)=>{console.log(`Transferring ${s} from ${t} to ${i} with note: ${o}`);const h=u?typeof u=="string"?u:u.toISOString():new Date().toISOString(),d=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(f=>f.id===i)?.name||"envelope"}`,amount:s.toString(),envelopeId:t,date:h,type:"expense",transferId:d}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(f=>f.id===t)?.name||"envelope"}`,amount:s.toString(),envelopeId:i,date:h,type:"income",transferId:d})},deleteEnvelope:async t=>{const i=e().transactions.filter(s=>s.envelopeId===t);n(s=>({envelopes:s.envelopes.filter(o=>o.id!==t),transactions:s.transactions.filter(o=>o.envelopeId!==t),isLoading:!0}));try{await Kf.deleteEnvelope(It,t);for(const s of i)s.id&&!s.id.startsWith("temp-")&&await to.deleteTransaction(It,s.id);n({isLoading:!1})}catch(s){if(console.error("Delete Envelope Failed:",s),qr(s))n({isLoading:!1,pendingSync:!0,error:null});else{const o=e().envelopes.find(u=>u.id===t);n(o?u=>({envelopes:[...u.envelopes,o],transactions:[...u.transactions,...i],error:s.message,isLoading:!1}):{error:s.message,isLoading:!1})}}},deleteTransaction:async t=>{const i=e().transactions.find(o=>o.id===t);if(!i)return;const s=[t];if(i.transferId){const o=e().transactions.find(u=>u.transferId===i.transferId&&u.id!==t);o&&o.id&&s.push(o.id)}n(o=>({transactions:o.transactions.filter(u=>u.id&&!s.includes(u.id)),isLoading:!0}));try{const o=s.filter(u=>!u.startsWith("temp-"));for(const u of o)console.log(` About to delete transaction ID: ${u}`),await to.deleteTransaction(It,u),console.log(` Deleted transaction ID: ${u}`);console.log(" All transaction deletions completed"),n({isLoading:!1})}catch(o){if(console.error("Delete Transaction Failed:",o),qr(o))n({isLoading:!1,pendingSync:!0,error:null});else{const u=s.map(h=>e().transactions.find(d=>d.id===h)||i).filter(Boolean);n(h=>({transactions:[...h.transactions,...u],error:o.message,isLoading:!1}))}}},updateTransaction:async t=>{console.log(" updateTransaction called:",t),n(i=>({transactions:i.transactions.map(s=>s.id===t.id?t:s),isLoading:!0}));try{const i=to.updateTransaction(It,t.id,{description:t.description,amount:t.amount,envelopeId:t.envelopeId,date:Ze.fromDate(new Date(t.date)),type:t.type}),s=new Promise((o,u)=>setTimeout(()=>u(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([i,s]),console.log(" Transaction updated in Firebase"),n({isLoading:!1})}catch(i){console.error("Update Transaction Failed:",i),console.log(" Error details:",{name:i?.name||"Unknown",message:i?.message||"Unknown",code:i?.code||"Unknown",isNetworkError:qr(i)}),qr(i)?(console.log(" Treating as offline scenario - keeping local transaction update"),n({isLoading:!1,pendingSync:!0,error:null})):n({error:i.message,isLoading:!1})}},restoreTransaction:async t=>{n(i=>({transactions:[...i.transactions,t],isLoading:!0}));try{n({isLoading:!1})}catch(i){console.error("Restore Transaction Failed:",i),n({error:i.message,isLoading:!1})}},importData:t=>{try{if(!t.envelopes||!t.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const i=t.envelopes.map(f=>({id:f.id,name:f.name,budget:f.budget||f.currentBalance||0,spent:f.spent||0,category:f.category||"General"})),s=t.transactions||[],o=t.distributionTemplates||[],u=t.appSettings||null;n({envelopes:i,transactions:s,distributionTemplates:o,appSettings:u,error:null,pendingSync:!1});const h=o.length,d=u?"Settings imported.":"";return{success:!0,message:`Loaded ${i.length} envelopes, ${s.length} transactions${h>0?`, ${h} templates`:""}.${d?` ${d}`:""}`}}catch(i){return console.error("Import failed:",i),{success:!1,message:"Failed to import data. Check file format."}}},resetData:async()=>{const t=e();try{console.log(" Starting complete data reset...");for(const i of t.envelopes)if(i.id)try{await Kf.deleteEnvelope(It,i.id),console.log(` Deleted envelope: ${i.name}`)}catch(s){console.error(` Failed to delete envelope ${i.name}:`,s)}for(const i of t.transactions)if(i.id)try{await to.deleteTransaction(It,i.id),console.log(` Deleted transaction: ${i.description}`)}catch(s){console.error(` Failed to delete transaction ${i.description}:`,s)}for(const i of t.distributionTemplates)if(i.id)try{await $f.deleteDistributionTemplate(It,i.id),console.log(` Deleted template: ${i.name}`)}catch(s){console.error(` Failed to delete template ${i.name}:`,s)}if(t.appSettings?.id)try{await Vl.deleteAppSettings(It,t.appSettings.id),console.log(" Deleted app settings")}catch(i){console.error(" Failed to delete app settings:",i)}console.log(" Data reset complete - all Firebase data deleted")}catch(i){console.error(" Error during data reset:",i)}n({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,pendingSync:!1}),console.log(" Local state cleared")},renameEnvelope:async(t,i)=>{n(s=>({envelopes:s.envelopes.map(o=>o.id===t?{...o,name:i}:o),isLoading:!0}));try{n({isLoading:!1})}catch(s){console.error("Rename Envelope Failed:",s),n({error:s.message,isLoading:!1})}},saveTemplate:async(t,i,s)=>{console.log(" saveTemplate called with:",{name:t,distributions:i,note:s});try{const o={id:`temp-${Date.now()}`,userId:It,name:t,note:s,lastUsed:new Date().toISOString(),distributions:i};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const u=$f.createDistributionTemplate(o),h=new Promise((f,g)=>setTimeout(()=>g(new Error("Firebase timeout - likely offline")),5e3)),d=await Promise.race([u,h]);console.log(" Firebase template save succeeded (online mode):",d),n(f=>{const g=[...f.distributionTemplates,d];return console.log(" Updating store - old templates:",f.distributionTemplates.length,"new templates:",g.length),{distributionTemplates:g}}),console.log(" Template saved to Firebase:",d),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(u){throw console.log(" Firebase template save failed or timed out:",u.message),u}}catch(o){console.error(" Failed to save template to Firebase, saving locally:",o),console.log(" Error details:",{name:o?.name||"Unknown",message:o?.message||"Unknown",code:o?.code||"Unknown",isNetworkError:qr(o)});const u={id:`local-${Date.now()}`,userId:It,name:t,note:s,lastUsed:new Date().toISOString(),distributions:i};console.log(" Saving template locally (offline):",u),n(h=>({distributionTemplates:[...h.distributionTemplates,u],pendingSync:!0})),console.log(" Template saved locally as fallback:",u),console.log(" Store now has templates:",e().distributionTemplates.length)}},deleteTemplate:async t=>{try{await $f.deleteDistributionTemplate(It,t),n(i=>({distributionTemplates:i.distributionTemplates.filter(s=>s.id!==t)})),console.log(" Template deleted from Firebase:",t)}catch(i){throw console.error(" Failed to delete template from Firebase:",i),i}},updateAppSettings:async t=>{const i=e();if(!i.appSettings){try{await i.initializeAppSettings();const s=e();if(s.appSettings){const o={...s.appSettings,...t};n({appSettings:o}),await Vl.updateAppSettings(It,s.appSettings.id,t),console.log(" App settings updated successfully")}}catch(s){console.error(" Failed to initialize/update settings:",s)}return}try{n(s=>({appSettings:{...s.appSettings,...t}})),await Vl.updateAppSettings(It,i.appSettings.id,t),console.log(" App settings updated successfully")}catch(s){throw console.error(" Failed to update app settings:",s),n(o=>({appSettings:o.appSettings})),s}},initializeAppSettings:async()=>{try{const t={userId:It,theme:"system"},i=await Vl.createAppSettings(t);n({appSettings:i}),console.log(" App settings initialized successfully")}catch(t){console.error(" Failed to initialize app settings:",t),n({appSettings:{id:"local-settings",userId:It,theme:"system"}})}},getEnvelopeBalance:t=>{const i=e();if(!i.envelopes.find(v=>v.id===t))return console.log(` getEnvelopeBalance: Envelope ${t} not found`),new Hr(0);const o=i.transactions.filter(v=>v.envelopeId===t),u=o.filter(v=>v.type==="expense"),h=o.filter(v=>v.type==="income"),d=u.reduce((v,_)=>v.plus(new Hr(_.amount||0)),new Hr(0));return h.reduce((v,_)=>v.plus(new Hr(_.amount||0)),new Hr(0)).minus(d)}}));typeof window<"u"&&(window.addEventListener("online",async()=>{await Bn.getState().updateOnlineStatus();const n=Bn.getState();n.isOnline&&n.pendingSync&&(console.log(" Auto-syncing pending operations..."),n.syncData())}),window.addEventListener("offline",()=>{Bn.setState({isOnline:!1})}),setTimeout(()=>{Bn.getState().updateOnlineStatus()},1e3));const Qj=({isOpen:n,onClose:e})=>{const{envelopes:t,addToEnvelope:i,distributionTemplates:s,saveTemplate:o,deleteTemplate:u,getEnvelopeBalance:h}=Bn(),[d,f]=U.useState(""),[g,v]=U.useState({}),[_,S]=U.useState(""),[R,k]=U.useState(!1),[V,j]=U.useState(!1),[M,L]=U.useState(""),J=U.useMemo(()=>t.sort((fe,H)=>fe.name.localeCompare(H.name)),[t]),ie=parseFloat(d)||0,ne=U.useMemo(()=>Object.values(g).reduce((fe,H)=>fe+H,0),[g]),C=ie-ne,A=Math.abs(C)<.01,N=ie>0&&A,P=ne>0&&A,D=(fe,H)=>{const ae=parseFloat(H);v(de=>({...de,[fe]:isNaN(ae)?0:ae}))},B=()=>{N&&(Object.entries(g).forEach(([fe,H])=>{H>0&&i(fe,H,_||"Deposit",new Date)}),f(""),v({}),S(""),e())},O=()=>{M.trim()&&(o(M,g,_),k(!1),L(""))},Ee=fe=>{const H=Object.fromEntries(Object.entries(fe.distributions).filter(([de])=>J.some(Ce=>Ce.id===de)));v(H);const ae=Object.values(H).reduce((de,Ce)=>de+Ce,0);f(ae.toFixed(2)),S(fe.note||""),j(!1)};return n?w.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-gray-50 dark:bg-black sm:bg-gray-100 dark:sm:bg-black",children:[w.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 flex items-center justify-between shadow-sm shrink-0",children:[w.jsx("button",{onClick:e,className:"text-blue-600 dark:text-blue-400 font-medium text-base",children:"Cancel"}),w.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:"Distribute Funds"}),w.jsx("button",{onClick:B,disabled:!N,className:`font-bold text-base ${N?"text-blue-600 dark:text-blue-400":"text-gray-300 dark:text-zinc-600"}`,children:"Apply"})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 relative",children:[w.jsxs("div",{className:"sticky top-0 z-10 bg-gray-50/95 dark:bg-black/95 backdrop-blur-sm border-b border-gray-200 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[w.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-zinc-400 mb-1",children:"Deposit Amount"}),w.jsxs("div",{className:"flex items-center",children:[w.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mr-2",children:"$"}),w.jsx("input",{type:"number",inputMode:"decimal",value:d,onChange:fe=>f(fe.target.value),placeholder:"0.00",className:"text-3xl font-bold text-black dark:text-white w-full focus:outline-none bg-white dark:bg-zinc-900 placeholder-gray-300 dark:placeholder-zinc-600 appearance-none",autoFocus:!0})]})]}),w.jsxs("div",{className:"flex justify-between items-center text-sm font-medium px-1",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Distributed"}),w.jsxs("span",{className:"text-gray-900 dark:text-white",children:["$",ne.toFixed(2)]})]}),w.jsxs("div",{className:"flex flex-col items-end",children:[w.jsx("span",{className:"text-gray-500 dark:text-zinc-400",children:"Remaining"}),w.jsxs("span",{className:`text-lg ${C===0?"text-green-600 dark:text-green-400":C<0?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:["$",C.toFixed(2)]})]})]}),!A&&ie>0&&w.jsx("div",{className:"text-center text-sm font-medium text-red-500 dark:text-red-400",children:C>0?`You still have $${C.toFixed(2)} to distribute`:`You have over-allocated by $${Math.abs(C).toFixed(2)}`}),w.jsx("div",{className:"pt-2",children:P?w.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[w.jsxs("button",{onClick:()=>j(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[w.jsx(wm,{size:16}),"Load Template"]}),w.jsxs("button",{onClick:()=>k(!0),className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 text-green-400 rounded-lg font-medium text-sm hover:bg-gray-700 transition-colors",children:[w.jsx(E4,{size:16}),"Save Template"]})]}):w.jsxs("div",{className:"flex flex-col gap-3",children:[w.jsxs("button",{onClick:()=>j(!0),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 dark:bg-zinc-800 rounded-lg text-blue-400 font-medium text-sm hover:bg-gray-700 transition-colors",children:[w.jsx(wm,{size:16}),"Load Template"]}),w.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center px-2 leading-relaxed",children:"You can save this as a template once the Deposit Amount and Total Distributed are equal (Remaining = $0)."})]})}),w.jsx("input",{type:"text",placeholder:"Distribution Note (Optional)",value:_,onChange:fe=>S(fe.target.value),className:"w-full p-3 text-sm bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:outline-none text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600"})]}),w.jsx("div",{className:"p-4 space-y-3",children:J.filter(fe=>fe.id).map(fe=>{const H=fe.id,ae=g[H]||0,de=ne>0?Math.round(ae/ne*100):0;return w.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex items-center justify-between",children:[w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[w.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:fe.name}),ae>0&&w.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:[de,"%"]})]}),w.jsxs("div",{className:"text-xs text-gray-400 dark:text-zinc-400",children:["Balance: $",h(fe.id).toNumber().toFixed(2)]})]}),w.jsxs("div",{className:"w-32 relative",children:[w.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",children:"$"}),w.jsx("input",{type:"number",inputMode:"decimal",value:g[H]===0?"":g[H],onChange:Ce=>D(H,Ce.target.value),placeholder:"0",className:"w-full pl-6 pr-6 py-2 text-right bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 outline-none font-mono text-gray-900 dark:text-white placeholder-gray-300 dark:placeholder-zinc-600 appearance-none"})]})]},H)})})]}),R&&w.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-gray-200 dark:border-zinc-700",children:[w.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Save Template"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Name your template to easily recall this distribution later."}),w.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g. Payday Split",value:M,onChange:fe=>L(fe.target.value),className:"w-full p-3 bg-gray-100 dark:bg-black rounded-xl mb-4 text-gray-900 dark:text-white border border-transparent focus:border-blue-500 outline-none"}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("button",{onClick:()=>k(!1),className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-semibold",children:"Cancel"}),w.jsx("button",{onClick:O,disabled:!M.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold disabled:opacity-50",children:"Save"})]})]})}),V&&w.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-end sm:items-center justify-center sm:p-4",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-t-2xl sm:rounded-2xl shadow-2xl border-t sm:border border-gray-200 dark:border-zinc-700 max-h-[80vh] flex flex-col",children:[w.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-zinc-800 flex justify-between items-center",children:[w.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Load Template"}),w.jsx("button",{onClick:()=>j(!1),className:"p-1 rounded-full bg-gray-100 dark:bg-zinc-800 text-gray-500",children:w.jsx(Zv,{size:20})})]}),w.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:s.length===0?w.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No templates saved yet."}):s.map(fe=>w.jsxs("div",{className:"flex items-center gap-2 p-3 hover:bg-gray-50 dark:hover:bg-zinc-800/50 rounded-xl group transition-colors",children:[w.jsxs("button",{onClick:()=>Ee(fe),className:"flex-1 text-left",children:[w.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:fe.name}),w.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: $",Object.values(fe.distributions).reduce((H,ae)=>H+ae,0).toFixed(2),fe.note&&w.jsxs("span",{className:"ml-2 opacity-75",children:[" ",fe.note]})]})]}),w.jsx("button",{onClick:H=>{H.stopPropagation(),confirm("Delete this template?")&&u(fe.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:w.jsx(Sm,{size:18})})]},fe.id))})]})})]}):null},Yj=()=>{const{envelopes:n,transactions:e,fetchData:t,isOnline:i,pendingSync:s,syncData:o,isLoading:u,getEnvelopeBalance:h}=Bn(),[d,f]=U.useState(!1),g=Po();U.useEffect(()=>{n.length===0&&t()},[]);const v=[...n].sort((S,R)=>S.name.localeCompare(R.name));console.log(" EnvelopeListView render - calculating balances"),console.log(" Current envelopes:",n.length),console.log(" Current transactions:",e.length);const _=n.reduce((S,R)=>{const k=h(R.id);return console.log(` Envelope ${R.name} (${R.id}): $${k.toNumber().toFixed(2)}`),S+k.toNumber()},0);return console.log(" Total balance:",_),w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[w.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-10",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("div",{className:"flex items-center gap-2",children:i?u?w.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[w.jsx(Mw,{size:16,className:"animate-spin"}),w.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):s?w.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[w.jsx(Mw,{size:16}),w.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):w.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[w.jsx(j4,{size:16}),w.jsx("span",{className:"text-sm font-medium",children:"Synced"})]}):w.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[w.jsx(O4,{size:16}),w.jsx("span",{className:"text-sm font-medium",children:u?"Offline (Saving...)":"Offline"})]})}),w.jsxs("div",{className:"flex gap-4 text-blue-500",children:[w.jsx("button",{onClick:()=>g("/transactions"),children:w.jsx(_4,{size:22})}),w.jsx("button",{onClick:()=>g("/settings"),children:w.jsx(A4,{size:22})})]})]}),w.jsx("div",{className:"mt-4",children:w.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"House Expenses"})})]}),w.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[w.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 space-y-4",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-gray-600 dark:text-zinc-400 font-medium",children:"Total Balance"}),w.jsxs("span",{className:`text-2xl font-bold ${_>=0?"text-green-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[_<0?"-":"","$",Math.abs(_).toFixed(2)]})]}),w.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-50 dark:bg-blue-900/40 text-blue-600 dark:text-blue-300 py-3 rounded-xl font-semibold active:bg-blue-100 dark:active:bg-blue-900/60 transition-colors",children:[w.jsx(y4,{size:20,className:"rotate-90"}),"Distribute Funds"]})]}),w.jsx("section",{children:v.length===0?w.jsxs("div",{className:"text-center py-10 space-y-3",children:[w.jsx(M4,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto"}),w.jsx("h3",{className:"text-gray-500 dark:text-zinc-400 font-medium",children:"No envelopes yet"}),w.jsx("button",{onClick:()=>g("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium",children:"Create First Envelope"})]}):w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex justify-between items-end px-1",children:[w.jsx("h2",{className:"text-sm font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-wider",children:"My Envelopes"}),w.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-300 font-medium",onClick:()=>g("/add-envelope"),children:"+ New Envelope"})]}),v.map(S=>w.jsxs("div",{onClick:()=>g(`/envelope/${S.id}`),className:"bg-white dark:bg-zinc-900 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 flex justify-between items-center active:scale-[0.99] transition-transform cursor-pointer",children:[w.jsx("div",{className:"flex flex-col",children:w.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:S.name})}),w.jsxs("span",{className:`font-bold ${h(S.id).toNumber()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-emerald-400"}`,children:[h(S.id).toNumber()<0?"-":"","$",Math.abs(h(S.id).toNumber()).toFixed(2)]})]},S.id))]})})]}),w.jsx("button",{onClick:()=>g("/add-transaction"),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform",children:w.jsx(o4,{size:28})}),w.jsx(Qj,{isOpen:d,onClose:()=>f(!1)})]})},hb=vI((n,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(t,i="neutral",s)=>{n({message:t,type:i,isVisible:!0,undoAction:s}),setTimeout(()=>{e().hideToast()},4e3)},hideToast:()=>{n({isVisible:!1})}})),QC=({isVisible:n,onClose:e,mode:t,currentEnvelope:i,initialTransaction:s})=>{const{addToEnvelope:o,spendFromEnvelope:u,updateTransaction:h,deleteTransaction:d}=Bn(),[f,g]=U.useState(""),[v,_]=U.useState(""),[S,R]=U.useState(new Date().toISOString().split("T")[0]);if(U.useEffect(()=>{if(!n)return;const L=window.setTimeout(()=>{if(t==="edit"&&s){g(s.amount),_(s.description);try{const J=new Date(s.date);isNaN(J.getTime())?(console.warn("Invalid date in transaction:",s.date),R(new Date().toISOString().split("T")[0])):R(J.toISOString().split("T")[0])}catch(J){console.error("Error parsing transaction date:",J),R(new Date().toISOString().split("T")[0])}}else g(""),_(""),R(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(L)},[n,t,s]),!n)return null;const k=L=>{L.preventDefault();const J=parseFloat(f);isNaN(J)||J<=0||(t==="add"?o(i.id,J,v,new Date(S)):t==="spend"?u(i.id,J,v,new Date(S)):t==="edit"&&s&&h({...s,amount:f,description:v,date:new Date(S).toISOString()}),e())},V=()=>{!s||!s.id||window.confirm("Are you sure you want to delete this transaction?")&&(d(s.id),e())},j=t==="add"?"Add Money":t==="spend"?"Spend Money":"Edit Transaction",M=t==="add"?"text-green-500":"text-red-500";return w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[w.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[w.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),w.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:j}),w.jsx("button",{onClick:k,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0,children:"Save"})]}),w.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),w.jsxs("div",{className:"relative inline-block",children:[w.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${M}`,children:"$"}),w.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:f,onChange:L=>{const J=L.target.value;(J===""||!isNaN(parseFloat(J))&&parseFloat(J)>=0)&&g(J)},onKeyDown:L=>{(L.key==="e"||L.key==="E"||L.key==="+"||L.key==="-")&&L.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${M} placeholder-gray-700`})]})]}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),w.jsx("input",{type:"text",value:v,onChange:L=>_(L.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),w.jsx("input",{type:"date",value:S,onChange:L=>{console.log("Date changed to:",L.target.value),R(L.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),t==="edit"&&w.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:w.jsxs("button",{type:"button",onClick:V,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[w.jsx(yI,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},Xj=({isVisible:n,onClose:e,sourceEnvelope:t})=>{const{envelopes:i,transferFunds:s}=Bn(),[o,u]=U.useState(""),[h,d]=U.useState(""),[f,g]=U.useState(""),[v,_]=U.useState(new Date().toISOString().split("T")[0]),S=i.filter(V=>V.id!==t.id);if(U.useEffect(()=>{if(!n)return;const V=window.setTimeout(()=>{u(""),d(""),g(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(V)},[n]),!n)return null;const R=V=>{V.preventDefault();const j=parseFloat(h);isNaN(j)||j<=0||!o||(s(t.id,o,j,f,new Date(v)),e())},k=i.find(V=>V.id===o);return w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[w.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[w.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),w.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),w.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!h||parseFloat(h)<=0||!o,children:"Transfer"})]}),w.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),w.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.name})]}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),w.jsxs("select",{value:o,onChange:V=>u(V.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[w.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),S.map(V=>w.jsx("option",{value:V.id,className:"bg-white dark:bg-zinc-900",children:V.name},V.id))]})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),w.jsxs("div",{className:"relative inline-block",children:[w.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),w.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:h,onChange:V=>d(V.target.value),onKeyDown:V=>{(V.key==="e"||V.key==="E"||V.key==="+"||V.key==="-")&&V.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),w.jsx("input",{type:"text",value:f,onChange:V=>g(V.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[w.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),w.jsx("input",{type:"date",value:v,onChange:V=>_(V.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),k&&h&&parseFloat(h)>0&&w.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",w.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(h).toFixed(2)]})," from"," ",w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t.name})," to"," ",w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:k.name})]})]})]})})},Wj=n=>{if(!n)return"No Date";try{let e;return n&&typeof n=="object"&&n.toDate&&typeof n.toDate=="function"?e=n.toDate():typeof n=="number"?n<1e10?e=new Date((n+978307200)*1e3):e=new Date(n):e=new Date(n),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},Zj=n=>{const e=typeof n=="string"?parseFloat(n):n;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},YC=({transaction:n,envelopeName:e,onReconcile:t,onEdit:i})=>{if(!n)return null;const s=n.type==="income",o=n.type==="expense";let u="text-gray-900 dark:text-white";return s&&(u="text-green-600 dark:text-green-400"),o&&(u="text-red-600 dark:text-red-400"),w.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[w.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:n.description||"No Description"}),n.reconciled&&w.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),w.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[w.jsx("span",{children:Wj(n.date)}),e&&w.jsxs(w.Fragment,{children:[w.jsx("span",{children:""}),w.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${u}`,children:[o?"-":s?"+":"",Zj(n.amount)]}),t?w.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),t()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":n.reconciled?"Mark as unreconciled":"Mark as reconciled",children:n.reconciled?w.jsx(kw,{className:"text-green-500",size:20}):w.jsx(Vw,{className:"text-gray-400",size:20})}):w.jsx("span",{children:n.reconciled?w.jsx(kw,{className:"text-green-500",size:20}):w.jsx(Vw,{className:"text-gray-400",size:20})})]})]})},db=U.createContext({});function qp(n){const e=U.useRef(null);return e.current===null&&(e.current=n()),e.current}const fb=typeof window<"u",mb=fb?U.useLayoutEffect:U.useEffect,Hp=U.createContext(null);function pb(n,e){n.indexOf(e)===-1&&n.push(e)}function gb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const is=(n,e,t)=>t>e?e:t<n?n:t;let yb=()=>{};const rs={},XC=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function WC(n){return typeof n=="object"&&n!==null}const ZC=n=>/^0[^.\s]+$/u.test(n);function vb(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ti=n=>n,Jj=(n,e)=>t=>e(n(t)),nd=(...n)=>n.reduce(Jj),Mh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class _b{constructor(){this.subscriptions=[]}add(e){return pb(this.subscriptions,e),()=>gb(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let o=0;o<s;o++){const u=this.subscriptions[o];u&&u(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vr=n=>n*1e3,_i=n=>n/1e3;function JC(n,e){return e?n*(1e3/e):0}const eD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,ez=1e-7,tz=12;function nz(n,e,t,i,s){let o,u,h=0;do u=e+(t-e)/2,o=eD(u,i,s)-n,o>0?t=u:e=u;while(Math.abs(o)>ez&&++h<tz);return u}function id(n,e,t,i){if(n===e&&t===i)return Ti;const s=o=>nz(o,0,1,n,t);return o=>o===0||o===1?o:eD(s(o),e,i)}const tD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,nD=n=>e=>1-n(1-e),iD=id(.33,1.53,.69,.99),bb=nD(iD),rD=tD(bb),sD=n=>(n*=2)<1?.5*bb(n):.5*(2-Math.pow(2,-10*(n-1))),Tb=n=>1-Math.sin(Math.acos(n)),aD=nD(Tb),oD=tD(Tb),iz=id(.42,0,1,1),rz=id(0,0,.58,1),lD=id(.42,0,.58,1),sz=n=>Array.isArray(n)&&typeof n[0]!="number",uD=n=>Array.isArray(n)&&typeof n[0]=="number",az={linear:Ti,easeIn:iz,easeInOut:lD,easeOut:rz,circIn:Tb,circInOut:oD,circOut:aD,backIn:bb,backInOut:rD,backOut:iD,anticipate:sD},oz=n=>typeof n=="string",jx=n=>{if(uD(n)){yb(n.length===4);const[e,t,i,s]=n;return id(e,t,i,s)}else if(oz(n))return az[n];return n},Qf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function lz(n,e){let t=new Set,i=new Set,s=!1,o=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){u.has(g)&&(f.schedule(g),n()),g(h)}const f={schedule:(g,v=!1,_=!1)=>{const R=_&&s?t:i;return v&&u.add(g),R.has(g)||R.add(g),g},cancel:g=>{i.delete(g),u.delete(g)},process:g=>{if(h=g,s){o=!0;return}s=!0,[t,i]=[i,t],t.forEach(d),t.clear(),s=!1,o&&(o=!1,f.process(g))}};return f}const uz=40;function cD(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,u=Qf.reduce((L,J)=>(L[J]=lz(o),L),{}),{setup:h,read:d,resolveKeyframes:f,preUpdate:g,update:v,preRender:_,render:S,postRender:R}=u,k=()=>{const L=rs.useManualTiming?s.timestamp:performance.now();t=!1,rs.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(L-s.timestamp,uz),1)),s.timestamp=L,s.isProcessing=!0,h.process(s),d.process(s),f.process(s),g.process(s),v.process(s),_.process(s),S.process(s),R.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(k))},V=()=>{t=!0,i=!0,s.isProcessing||n(k)};return{schedule:Qf.reduce((L,J)=>{const ie=u[J];return L[J]=(ne,C=!1,A=!1)=>(t||V(),ie.schedule(ne,C,A)),L},{}),cancel:L=>{for(let J=0;J<Qf.length;J++)u[Qf[J]].cancel(L)},state:s,steps:u}}const{schedule:Tt,cancel:ma,state:fn,steps:T0}=cD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ti,!0);let vm;function cz(){vm=void 0}const Fn={now:()=>(vm===void 0&&Fn.set(fn.isProcessing||rs.useManualTiming?fn.timestamp:performance.now()),vm),set:n=>{vm=n,queueMicrotask(cz)}},hD=n=>e=>typeof e=="string"&&e.startsWith(n),Eb=hD("--"),hz=hD("var(--"),wb=n=>hz(n)?dz.test(n.split("/*")[0].trim()):!1,dz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Du={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ph={...Du,transform:n=>is(0,1,n)},Yf={...Du,default:1},ch=n=>Math.round(n*1e5)/1e5,Sb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fz(n){return n==null}const mz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xb=(n,e)=>t=>!!(typeof t=="string"&&mz.test(t)&&t.startsWith(n)||e&&!fz(t)&&Object.prototype.hasOwnProperty.call(t,e)),dD=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,o,u,h]=i.match(Sb);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},pz=n=>is(0,255,n),E0={...Du,transform:n=>Math.round(pz(n))},mo={test:xb("rgb","red"),parse:dD("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+E0.transform(n)+", "+E0.transform(e)+", "+E0.transform(t)+", "+ch(Ph.transform(i))+")"};function gz(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Sv={test:xb("#"),parse:gz,transform:mo.transform},rd=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ks=rd("deg"),_r=rd("%"),Re=rd("px"),yz=rd("vh"),vz=rd("vw"),zx={..._r,parse:n=>_r.parse(n)/100,transform:n=>_r.transform(n*100)},Bl={test:xb("hsl","hue"),parse:dD("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+_r.transform(ch(e))+", "+_r.transform(ch(t))+", "+ch(Ph.transform(i))+")"},Qt={test:n=>mo.test(n)||Sv.test(n)||Bl.test(n),parse:n=>mo.test(n)?mo.parse(n):Bl.test(n)?Bl.parse(n):Sv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?mo.transform(n):Bl.transform(n),getAnimatableNone:n=>{const e=Qt.parse(n);return e.alpha=0,Qt.transform(e)}},_z=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bz(n){return isNaN(n)&&typeof n=="string"&&(n.match(Sb)?.length||0)+(n.match(_z)?.length||0)>0}const fD="number",mD="color",Tz="var",Ez="var(",Ux="${}",wz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Oh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let o=0;const h=e.replace(wz,d=>(Qt.test(d)?(i.color.push(o),s.push(mD),t.push(Qt.parse(d))):d.startsWith(Ez)?(i.var.push(o),s.push(Tz),t.push(d)):(i.number.push(o),s.push(fD),t.push(parseFloat(d))),++o,Ux)).split(Ux);return{values:t,split:h,indexes:i,types:s}}function pD(n){return Oh(n).values}function gD(n){const{split:e,types:t}=Oh(n),i=e.length;return s=>{let o="";for(let u=0;u<i;u++)if(o+=e[u],s[u]!==void 0){const h=t[u];h===fD?o+=ch(s[u]):h===mD?o+=Qt.transform(s[u]):o+=s[u]}return o}}const Sz=n=>typeof n=="number"?0:Qt.test(n)?Qt.getAnimatableNone(n):n;function xz(n){const e=pD(n);return gD(n)(e.map(Sz))}const pa={test:bz,parse:pD,createTransformer:gD,getAnimatableNone:xz};function w0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Az({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,o=0,u=0;if(!e)s=o=u=t;else{const h=t<.5?t*(1+e):t+e-t*e,d=2*t-h;s=w0(d,h,n+1/3),o=w0(d,h,n),u=w0(d,h,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:i}}function ep(n,e){return t=>t>0?e:n}const wt=(n,e,t)=>n+(e-n)*t,S0=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},Iz=[Sv,mo,Bl],Rz=n=>Iz.find(e=>e.test(n));function Bx(n){const e=Rz(n);if(!e)return!1;let t=e.parse(n);return e===Bl&&(t=Az(t)),t}const Fx=(n,e)=>{const t=Bx(n),i=Bx(e);if(!t||!i)return ep(n,e);const s={...t};return o=>(s.red=S0(t.red,i.red,o),s.green=S0(t.green,i.green,o),s.blue=S0(t.blue,i.blue,o),s.alpha=wt(t.alpha,i.alpha,o),mo.transform(s))},xv=new Set(["none","hidden"]);function Cz(n,e){return xv.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Dz(n,e){return t=>wt(n,e,t)}function Ab(n){return typeof n=="number"?Dz:typeof n=="string"?wb(n)?ep:Qt.test(n)?Fx:Vz:Array.isArray(n)?yD:typeof n=="object"?Qt.test(n)?Fx:Nz:ep}function yD(n,e){const t=[...n],i=t.length,s=n.map((o,u)=>Ab(o)(o,e[u]));return o=>{for(let u=0;u<i;u++)t[u]=s[u](o);return t}}function Nz(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=Ab(n[s])(n[s],e[s]));return s=>{for(const o in i)t[o]=i[o](s);return t}}function kz(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],u=n.indexes[o][i[o]],h=n.values[u]??0;t[s]=h,i[o]++}return t}const Vz=(n,e)=>{const t=pa.createTransformer(e),i=Oh(n),s=Oh(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?xv.has(n)&&!s.values.length||xv.has(e)&&!i.values.length?Cz(n,e):nd(yD(kz(i,s),s.values),t):ep(n,e)};function vD(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?wt(n,e,t):Ab(n)(n,e)}const Mz=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Tt.update(e,t),stop:()=>ma(e),now:()=>fn.isProcessing?fn.timestamp:Fn.now()}},_D=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)i+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},tp=2e4;function Ib(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<tp;)e+=t,i=n.next(e);return e>=tp?1/0:e}function Pz(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(Ib(i),tp);return{type:"keyframes",ease:o=>i.next(s*o).value/e,duration:_i(s)}}const Oz=5;function bD(n,e,t){const i=Math.max(e-Oz,0);return JC(t-n(i),e-i)}const Rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},x0=.001;function Lz({duration:n=Rt.duration,bounce:e=Rt.bounce,velocity:t=Rt.velocity,mass:i=Rt.mass}){let s,o,u=1-e;u=is(Rt.minDamping,Rt.maxDamping,u),n=is(Rt.minDuration,Rt.maxDuration,_i(n)),u<1?(s=f=>{const g=f*u,v=g*n,_=g-t,S=Av(f,u),R=Math.exp(-v);return x0-_/S*R},o=f=>{const v=f*u*n,_=v*t+t,S=Math.pow(u,2)*Math.pow(f,2)*n,R=Math.exp(-v),k=Av(Math.pow(f,2),u);return(-s(f)+x0>0?-1:1)*((_-S)*R)/k}):(s=f=>{const g=Math.exp(-f*n),v=(f-t)*n+1;return-x0+g*v},o=f=>{const g=Math.exp(-f*n),v=(t-f)*(n*n);return g*v});const h=5/n,d=zz(s,o,h);if(n=vr(n),isNaN(d))return{stiffness:Rt.stiffness,damping:Rt.damping,duration:n};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:u*2*Math.sqrt(i*f),duration:n}}}const jz=12;function zz(n,e,t){let i=t;for(let s=1;s<jz;s++)i=i-n(i)/e(i);return i}function Av(n,e){return n*Math.sqrt(1-e*e)}const Uz=["duration","bounce"],Bz=["stiffness","damping","mass"];function qx(n,e){return e.some(t=>n[t]!==void 0)}function Fz(n){let e={velocity:Rt.velocity,stiffness:Rt.stiffness,damping:Rt.damping,mass:Rt.mass,isResolvedFromDuration:!1,...n};if(!qx(n,Bz)&&qx(n,Uz))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,o=2*is(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Rt.mass,stiffness:s,damping:o}}else{const t=Lz(n);e={...e,...t,mass:Rt.mass},e.isResolvedFromDuration=!0}return e}function np(n=Rt.visualDuration,e=Rt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const o=t.keyframes[0],u=t.keyframes[t.keyframes.length-1],h={done:!1,value:o},{stiffness:d,damping:f,mass:g,duration:v,velocity:_,isResolvedFromDuration:S}=Fz({...t,velocity:-_i(t.velocity||0)}),R=_||0,k=f/(2*Math.sqrt(d*g)),V=u-o,j=_i(Math.sqrt(d/g)),M=Math.abs(V)<5;i||(i=M?Rt.restSpeed.granular:Rt.restSpeed.default),s||(s=M?Rt.restDelta.granular:Rt.restDelta.default);let L;if(k<1){const ie=Av(j,k);L=ne=>{const C=Math.exp(-k*j*ne);return u-C*((R+k*j*V)/ie*Math.sin(ie*ne)+V*Math.cos(ie*ne))}}else if(k===1)L=ie=>u-Math.exp(-j*ie)*(V+(R+j*V)*ie);else{const ie=j*Math.sqrt(k*k-1);L=ne=>{const C=Math.exp(-k*j*ne),A=Math.min(ie*ne,300);return u-C*((R+k*j*V)*Math.sinh(A)+ie*V*Math.cosh(A))/ie}}const J={calculatedDuration:S&&v||null,next:ie=>{const ne=L(ie);if(S)h.done=ie>=v;else{let C=ie===0?R:0;k<1&&(C=ie===0?vr(R):bD(L,ie,ne));const A=Math.abs(C)<=i,N=Math.abs(u-ne)<=s;h.done=A&&N}return h.value=h.done?u:ne,h},toString:()=>{const ie=Math.min(Ib(J),tp),ne=_D(C=>J.next(ie*C).value,ie,30);return ie+"ms "+ne},toTransition:()=>{}};return J}np.applyToOptions=n=>{const e=Pz(n,100,np);return n.ease=e.ease,n.duration=vr(e.duration),n.type="keyframes",n};function Iv({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:u,min:h,max:d,restDelta:f=.5,restSpeed:g}){const v=n[0],_={done:!1,value:v},S=A=>h!==void 0&&A<h||d!==void 0&&A>d,R=A=>h===void 0?d:d===void 0||Math.abs(h-A)<Math.abs(d-A)?h:d;let k=t*e;const V=v+k,j=u===void 0?V:u(V);j!==V&&(k=j-v);const M=A=>-k*Math.exp(-A/i),L=A=>j+M(A),J=A=>{const N=M(A),P=L(A);_.done=Math.abs(N)<=f,_.value=_.done?j:P};let ie,ne;const C=A=>{S(_.value)&&(ie=A,ne=np({keyframes:[_.value,R(_.value)],velocity:bD(L,A,_.value),damping:s,stiffness:o,restDelta:f,restSpeed:g}))};return C(0),{calculatedDuration:null,next:A=>{let N=!1;return!ne&&ie===void 0&&(N=!0,J(A),C(A)),ie!==void 0&&A>=ie?ne.next(A-ie):(!N&&J(A),_)}}}function qz(n,e,t){const i=[],s=t||rs.mix||vD,o=n.length-1;for(let u=0;u<o;u++){let h=s(n[u],n[u+1]);if(e){const d=Array.isArray(e)?e[u]||Ti:e;h=nd(d,h)}i.push(h)}return i}function Hz(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const o=n.length;if(yb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=qz(e,i,s),d=h.length,f=g=>{if(u&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const _=Mh(n[v],n[v+1],g);return h[v](_)};return t?g=>f(is(n[0],n[o-1],g)):f}function Gz(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=Mh(0,e,i);n.push(wt(t,1,s))}}function Kz(n){const e=[0];return Gz(e,n.length-1),e}function $z(n,e){return n.map(t=>t*e)}function Qz(n,e){return n.map(()=>e||lD).splice(0,n.length-1)}function hh({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=sz(i)?i.map(jx):jx(i),o={done:!1,value:e[0]},u=$z(t&&t.length===e.length?t:Kz(e),n),h=Hz(u,e,{ease:Array.isArray(s)?s:Qz(e,s)});return{calculatedDuration:n,next:d=>(o.value=h(d),o.done=d>=n,o)}}const Yz=n=>n!==null;function Rb(n,{repeat:e,repeatType:t="loop"},i,s=1){const o=n.filter(Yz),h=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!h||i===void 0?o[h]:i}const Xz={decay:Iv,inertia:Iv,tween:hh,keyframes:hh,spring:np};function TD(n){typeof n.type=="string"&&(n.type=Xz[n.type])}class Cb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Wz=n=>n/100;class Db extends Cb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Fn.now()&&this.tick(Fn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;TD(e);const{type:t=hh,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:u=0}=e;let{keyframes:h}=e;const d=t||hh;d!==hh&&typeof h[0]!="number"&&(this.mixKeyframes=nd(Wz,vD(h[0],h[1])),h=[0,100]);const f=d({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-u})),f.calculatedDuration===null&&(f.calculatedDuration=Ib(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:v,repeatType:_,repeatDelay:S,type:R,onUpdate:k,finalKeyframe:V}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const j=this.currentTime-f*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?j<0:j>s;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let L=this.currentTime,J=i;if(v){const A=Math.min(this.currentTime,s)/h;let N=Math.floor(A),P=A%1;!P&&A>=1&&(P=1),P===1&&N--,N=Math.min(N,v+1),!!(N%2)&&(_==="reverse"?(P=1-P,S&&(P-=S/h)):_==="mirror"&&(J=u)),L=is(0,1,P)*h}const ie=M?{done:!1,value:g[0]}:J.next(L);o&&(ie.value=o(ie.value));let{done:ne}=ie;!M&&d!==null&&(ne=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ne);return C&&R!==Iv&&(ie.value=Rb(g,this.options,V,this.speed)),k&&k(ie.value),C&&this.finish(),ie}then(e,t){return this.finished.then(e,t)}get duration(){return _i(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_i(e)}get time(){return _i(this.currentTime)}set time(e){e=vr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Fn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=_i(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Mz,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Zz(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const po=n=>n*180/Math.PI,Rv=n=>{const e=po(Math.atan2(n[1],n[0]));return Cv(e)},Jz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Rv,rotateZ:Rv,skewX:n=>po(Math.atan(n[1])),skewY:n=>po(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Cv=n=>(n=n%360,n<0&&(n+=360),n),Hx=Rv,Gx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Kx=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),eU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Gx,scaleY:Kx,scale:n=>(Gx(n)+Kx(n))/2,rotateX:n=>Cv(po(Math.atan2(n[6],n[5]))),rotateY:n=>Cv(po(Math.atan2(-n[2],n[0]))),rotateZ:Hx,rotate:Hx,skewX:n=>po(Math.atan(n[4])),skewY:n=>po(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Dv(n){return n.includes("scale")?1:0}function Nv(n,e){if(!n||n==="none")return Dv(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=eU,s=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Jz,s=h}if(!s)return Dv(e);const o=i[e],u=s[1].split(",").map(nU);return typeof o=="function"?o(u):u[o]}const tU=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Nv(t,e)};function nU(n){return parseFloat(n.trim())}const Nu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ku=new Set(Nu),$x=n=>n===Du||n===Re,iU=new Set(["x","y","z"]),rU=Nu.filter(n=>!iU.has(n));function sU(n){const e=[];return rU.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Eo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Nv(e,"x"),y:(n,{transform:e})=>Nv(e,"y")};Eo.translateX=Eo.x;Eo.translateY=Eo.y;const wo=new Set;let kv=!1,Vv=!1,Mv=!1;function ED(){if(Vv){const n=Array.from(wo).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=sU(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([o,u])=>{i.getValue(o)?.set(u)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Vv=!1,kv=!1,wo.forEach(n=>n.complete(Mv)),wo.clear()}function wD(){wo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Vv=!0)})}function aU(){Mv=!0,wD(),ED(),Mv=!1}class Nb{constructor(e,t,i,s,o,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=o,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(wo.add(this),kv||(kv=!0,Tt.read(wD),Tt.resolveKeyframes(ED))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const o=s?.get(),u=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const h=i.readValue(t,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),s&&o===void 0&&s.set(e[0])}Zz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),wo.delete(this)}cancel(){this.state==="scheduled"&&(wo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oU=n=>n.startsWith("--");function lU(n,e,t){oU(e)?n.style.setProperty(e,t):n.style[e]=t}const uU=vb(()=>window.ScrollTimeline!==void 0),cU={};function hU(n,e){const t=vb(n);return()=>cU[e]??t()}const SD=hU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zc=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Qx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zc([0,.65,.55,1]),circOut:Zc([.55,0,1,.45]),backIn:Zc([.31,.01,.66,-.59]),backOut:Zc([.33,1.53,.69,.99])};function xD(n,e){if(n)return typeof n=="function"?SD()?_D(n,e):"ease-out":uD(n)?Zc(n):Array.isArray(n)?n.map(t=>xD(t,e)||Qx.easeOut):Qx[n]}function dU(n,e,t,{delay:i=0,duration:s=300,repeat:o=0,repeatType:u="loop",ease:h="easeOut",times:d}={},f=void 0){const g={[e]:t};d&&(g.offset=d);const v=xD(h,s);Array.isArray(v)&&(g.easing=v);const _={delay:i,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),n.animate(g,_)}function AD(n){return typeof n=="function"&&"applyToOptions"in n}function fU({type:n,...e}){return AD(n)&&SD()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class mU extends Cb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:o,allowFlatten:u=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=u,this.options=e,yb(typeof e.type!="string");const f=fU(e);this.animation=dU(t,i,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Rb(s,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):lU(t,i,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return _i(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_i(e)}get time(){return _i(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=vr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&uU()?(this.animation.timeline=e,Ti):t(this)}}const ID={anticipate:sD,backInOut:rD,circInOut:oD};function pU(n){return n in ID}function gU(n){typeof n.ease=="string"&&pU(n.ease)&&(n.ease=ID[n.ease])}const Yx=10;class yU extends mU{constructor(e){gU(e),TD(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:o,...u}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new Db({...u,autoplay:!1}),d=vr(this.finishedTime??this.time);t.setWithVelocity(h.sample(d-Yx).value,h.sample(d).value,Yx),h.stop()}}const Xx=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(pa.test(n)||n==="0")&&!n.startsWith("url("));function vU(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function _U(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],u=Xx(s,e),h=Xx(o,e);return!u||!h?!1:vU(n)||(t==="spring"||AD(t))&&i}function Pv(n){n.duration=0,n.type="keyframes"}const bU=new Set(["opacity","clipPath","filter","transform"]),TU=vb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function EU(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:o,type:u}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return TU()&&t&&bU.has(t)&&(t!=="transform"||!f)&&!d&&!i&&s!=="mirror"&&o!==0&&u!=="inertia"}const wU=40;class SU extends Cb{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:u="loop",keyframes:h,name:d,motionValue:f,element:g,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Fn.now();const _={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:o,repeatType:u,name:d,motionValue:f,element:g,...v},S=g?.KeyframeResolver||Nb;this.keyframeResolver=new S(h,(R,k,V)=>this.onKeyframesResolved(R,k,_,!V),d,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:o,type:u,velocity:h,delay:d,isHandoff:f,onUpdate:g}=i;this.resolvedAt=Fn.now(),_U(e,o,u,h)||((rs.instantAnimations||!d)&&g?.(Rb(e,i,t)),e[0]=e[e.length-1],Pv(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>wU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},S=!f&&EU(_)?new yU({..._,element:_.motionValue.owner.current}):new Db(_);S.finished.then(()=>this.notifyFinished()).catch(Ti),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),aU()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const xU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function AU(n){const e=xU.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function RD(n,e,t=1){const[i,s]=AU(n);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const u=o.trim();return XC(u)?parseFloat(u):u}return wb(s)?RD(s,e,t+1):s}function kb(n,e){return n?.[e]??n?.default??n}const CD=new Set(["width","height","top","left","right","bottom",...Nu]),IU={test:n=>n==="auto",parse:n=>n},DD=n=>e=>e.test(n),ND=[Du,Re,_r,Ks,vz,yz,IU],Wx=n=>ND.find(DD(n));function RU(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||ZC(n):!0}const CU=new Set(["brightness","contrast","saturate","opacity"]);function DU(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Sb)||[];if(!i)return n;const s=t.replace(i,"");let o=CU.has(e)?1:0;return i!==t&&(o*=100),e+"("+o+s+")"}const NU=/\b([a-z-]*)\(.*?\)/gu,Ov={...pa,getAnimatableNone:n=>{const e=n.match(NU);return e?e.map(DU).join(" "):n}},Zx={...Du,transform:Math.round},kU={rotate:Ks,rotateX:Ks,rotateY:Ks,rotateZ:Ks,scale:Yf,scaleX:Yf,scaleY:Yf,scaleZ:Yf,skew:Ks,skewX:Ks,skewY:Ks,distance:Re,translateX:Re,translateY:Re,translateZ:Re,x:Re,y:Re,z:Re,perspective:Re,transformPerspective:Re,opacity:Ph,originX:zx,originY:zx,originZ:Re},Vb={borderWidth:Re,borderTopWidth:Re,borderRightWidth:Re,borderBottomWidth:Re,borderLeftWidth:Re,borderRadius:Re,radius:Re,borderTopLeftRadius:Re,borderTopRightRadius:Re,borderBottomRightRadius:Re,borderBottomLeftRadius:Re,width:Re,maxWidth:Re,height:Re,maxHeight:Re,top:Re,right:Re,bottom:Re,left:Re,padding:Re,paddingTop:Re,paddingRight:Re,paddingBottom:Re,paddingLeft:Re,margin:Re,marginTop:Re,marginRight:Re,marginBottom:Re,marginLeft:Re,backgroundPositionX:Re,backgroundPositionY:Re,...kU,zIndex:Zx,fillOpacity:Ph,strokeOpacity:Ph,numOctaves:Zx},VU={...Vb,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:Ov,WebkitFilter:Ov},kD=n=>VU[n];function VD(n,e){let t=kD(n);return t!==Ov&&(t=pa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const MU=new Set(["auto","none","0"]);function PU(n,e,t){let i=0,s;for(;i<n.length&&!s;){const o=n[i];typeof o=="string"&&!MU.has(o)&&Oh(o).values.length&&(s=n[i]),i++}if(s&&t)for(const o of e)n[o]=VD(t,s)}class OU extends Nb{constructor(e,t,i,s,o){super(e,t,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),wb(f))){const g=RD(f,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!CD.has(i)||e.length!==2)return;const[s,o]=e,u=Wx(s),h=Wx(o);if(u!==h)if($x(u)&&$x(h))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else Eo[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||RU(e[s]))&&i.push(s);i.length&&PU(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Eo[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,u=i[o];i[o]=Eo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,d])=>{e.getValue(h).set(d)}),this.resolveNoneKeyframes()}}function LU(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=t?.[n]??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const MD=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function PD(n){return WC(n)&&"offsetHeight"in n}const Jx=30,jU=n=>!isNaN(parseFloat(n));class zU{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=Fn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Fn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new _b);const i=this.events[e].add(t);return e==="change"?()=>{i(),Tt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Jx)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Jx);return JC(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vu(n,e){return new zU(n,e)}const{schedule:Mb}=cD(queueMicrotask,!1),Pi={x:!1,y:!1};function OD(){return Pi.x||Pi.y}function UU(n){return n==="x"||n==="y"?Pi[n]?null:(Pi[n]=!0,()=>{Pi[n]=!1}):Pi.x||Pi.y?null:(Pi.x=Pi.y=!0,()=>{Pi.x=Pi.y=!1})}function LD(n,e){const t=LU(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function eA(n){return!(n.pointerType==="touch"||OD())}function BU(n,e,t={}){const[i,s,o]=LD(n,t),u=h=>{if(!eA(h))return;const{target:d}=h,f=e(d,h);if(typeof f!="function"||!d)return;const g=v=>{eA(v)&&(f(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return i.forEach(h=>{h.addEventListener("pointerenter",u,s)}),o}const jD=(n,e)=>e?n===e?!0:jD(n,e.parentElement):!1,Pb=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,FU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qU(n){return FU.has(n.tagName)||n.tabIndex!==-1}const _m=new WeakSet;function tA(n){return e=>{e.key==="Enter"&&n(e)}}function A0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const HU=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=tA(()=>{if(_m.has(t))return;A0(t,"down");const s=tA(()=>{A0(t,"up")}),o=()=>A0(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function nA(n){return Pb(n)&&!OD()}function GU(n,e,t={}){const[i,s,o]=LD(n,t),u=h=>{const d=h.currentTarget;if(!nA(h))return;_m.add(d);const f=e(d,h),g=(S,R)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),_m.has(d)&&_m.delete(d),nA(S)&&typeof f=="function"&&f(S,{success:R})},v=S=>{g(S,d===window||d===document||t.useGlobalTarget||jD(d,S.target))},_=S=>{g(S,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return i.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",u,s),PD(h)&&(h.addEventListener("focus",f=>HU(f,s)),!qU(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function zD(n){return WC(n)&&"ownerSVGElement"in n}function KU(n){return zD(n)&&n.tagName==="svg"}const En=n=>!!(n&&n.getVelocity),$U=[...ND,Qt,pa],QU=n=>$U.find(DD(n)),Ob=U.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function iA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function YU(...n){return e=>{let t=!1;const i=n.map(s=>{const o=iA(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():iA(n[s],null)}}}}function XU(...n){return U.useCallback(YU(...n),n)}class WU extends U.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=PD(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ZU({children:n,isPresent:e,anchorX:t,root:i}){const s=U.useId(),o=U.useRef(null),u=U.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=U.useContext(Ob),d=XU(o,n?.ref);return U.useInsertionEffect(()=>{const{width:f,height:g,top:v,left:_,right:S}=u.current;if(e||!o.current||!f||!g)return;const R=t==="left"?`left: ${_}`:`right: ${S}`;o.current.dataset.motionPopId=s;const k=document.createElement("style");h&&(k.nonce=h);const V=i??document.head;return V.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${R}px !important;
            top: ${v}px !important;
          }
        `),()=>{V.contains(k)&&V.removeChild(k)}},[e]),w.jsx(WU,{isPresent:e,childRef:o,sizeRef:u,children:U.cloneElement(n,{ref:d})})}const JU=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:u,anchorX:h,root:d})=>{const f=qp(e8),g=U.useId();let v=!0,_=U.useMemo(()=>(v=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:S=>{f.set(S,!0);for(const R of f.values())if(!R)return;i&&i()},register:S=>(f.set(S,!1),()=>f.delete(S))}),[t,f,i]);return o&&v&&(_={..._}),U.useMemo(()=>{f.forEach((S,R)=>f.set(R,!1))},[t]),U.useEffect(()=>{!t&&!f.size&&i&&i()},[t]),u==="popLayout"&&(n=w.jsx(ZU,{isPresent:t,anchorX:h,root:d,children:n})),w.jsx(Hp.Provider,{value:_,children:n})};function e8(){return new Map}function UD(n=!0){const e=U.useContext(Hp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,o=U.useId();U.useEffect(()=>{if(n)return s(o)},[n]);const u=U.useCallback(()=>n&&i&&i(o),[o,i,n]);return!t&&i?[!1,u]:[!0]}const Xf=n=>n.key||"";function rA(n){const e=[];return U.Children.forEach(n,t=>{U.isValidElement(t)&&e.push(t)}),e}const Lb=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:u=!1,anchorX:h="left",root:d})=>{const[f,g]=UD(u),v=U.useMemo(()=>rA(n),[n]),_=u&&!f?[]:v.map(Xf),S=U.useRef(!0),R=U.useRef(v),k=qp(()=>new Map),[V,j]=U.useState(v),[M,L]=U.useState(v);mb(()=>{S.current=!1,R.current=v;for(let ne=0;ne<M.length;ne++){const C=Xf(M[ne]);_.includes(C)?k.delete(C):k.get(C)!==!0&&k.set(C,!1)}},[M,_.length,_.join("-")]);const J=[];if(v!==V){let ne=[...v];for(let C=0;C<M.length;C++){const A=M[C],N=Xf(A);_.includes(N)||(ne.splice(C,0,A),J.push(A))}return o==="wait"&&J.length&&(ne=J),L(rA(ne)),j(v),null}const{forceRender:ie}=U.useContext(db);return w.jsx(w.Fragment,{children:M.map(ne=>{const C=Xf(ne),A=u&&!f?!1:v===M||_.includes(C),N=()=>{if(k.has(C))k.set(C,!0);else return;let P=!0;k.forEach(D=>{D||(P=!1)}),P&&(ie?.(),L(R.current),u&&g?.(),i&&i())};return w.jsx(JU,{isPresent:A,initial:!S.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:A?void 0:N,anchorX:h,children:ne},C)})})},BD=U.createContext({strict:!1}),sA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_u={};for(const n in sA)_u[n]={isEnabled:e=>sA[n].some(t=>!!e[t])};function t8(n){for(const e in n)_u[e]={..._u[e],...n[e]}}const n8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ip(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||n8.has(n)}let FD=n=>!ip(n);function i8(n){typeof n=="function"&&(FD=e=>e.startsWith("on")?!ip(e):n(e))}try{i8(require("@emotion/is-prop-valid").default)}catch{}function r8(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(FD(s)||t===!0&&ip(s)||!e&&!ip(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const Gp=U.createContext({});function Kp(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Lh(n){return typeof n=="string"||Array.isArray(n)}const jb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zb=["initial",...jb];function $p(n){return Kp(n.animate)||zb.some(e=>Lh(n[e]))}function qD(n){return!!($p(n)||n.variants)}function s8(n,e){if($p(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Lh(t)?t:void 0,animate:Lh(i)?i:void 0}}return n.inherit!==!1?e:{}}function a8(n){const{initial:e,animate:t}=s8(n,U.useContext(Gp));return U.useMemo(()=>({initial:e,animate:t}),[aA(e),aA(t)])}function aA(n){return Array.isArray(n)?n.join(" "):n}const jh={};function o8(n){for(const e in n)jh[e]=n[e],Eb(e)&&(jh[e].isCSSVariable=!0)}function HD(n,{layout:e,layoutId:t}){return ku.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!jh[n]||n==="opacity")}const l8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},u8=Nu.length;function c8(n,e,t){let i="",s=!0;for(let o=0;o<u8;o++){const u=Nu[o],h=n[u];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(u.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||t){const f=MD(h,Vb[u]);if(!d){s=!1;const g=l8[u]||u;i+=`${g}(${f}) `}t&&(e[u]=f)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function Ub(n,e,t){const{style:i,vars:s,transformOrigin:o}=n;let u=!1,h=!1;for(const d in e){const f=e[d];if(ku.has(d)){u=!0;continue}else if(Eb(d)){s[d]=f;continue}else{const g=MD(f,Vb[d]);d.startsWith("origin")?(h=!0,o[d]=g):i[d]=g}}if(e.transform||(u||t?i.transform=c8(e,n.transform,t):i.transform&&(i.transform="none")),h){const{originX:d="50%",originY:f="50%",originZ:g=0}=o;i.transformOrigin=`${d} ${f} ${g}`}}const Bb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GD(n,e,t){for(const i in e)!En(e[i])&&!HD(i,t)&&(n[i]=e[i])}function h8({transformTemplate:n},e){return U.useMemo(()=>{const t=Bb();return Ub(t,e,n),Object.assign({},t.vars,t.style)},[e])}function d8(n,e){const t=n.style||{},i={};return GD(i,t,n),Object.assign(i,h8(n,e)),i}function f8(n,e){const t={},i=d8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const m8={offset:"stroke-dashoffset",array:"stroke-dasharray"},p8={offset:"strokeDashoffset",array:"strokeDasharray"};function g8(n,e,t=1,i=0,s=!0){n.pathLength=1;const o=s?m8:p8;n[o.offset]=Re.transform(-i);const u=Re.transform(e),h=Re.transform(t);n[o.array]=`${u} ${h}`}function KD(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:u=0,...h},d,f,g){if(Ub(n,h,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_}=n;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),s!==void 0&&g8(v,s,o,u,!1)}const $D=()=>({...Bb(),attrs:{}}),QD=n=>typeof n=="string"&&n.toLowerCase()==="svg";function y8(n,e,t,i){const s=U.useMemo(()=>{const o=$D();return KD(o,e,QD(i),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};GD(o,n.style,n),s.style={...o,...s.style}}return s}const v8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fb(n){return typeof n!="string"||n.includes("-")?!1:!!(v8.indexOf(n)>-1||/[A-Z]/u.test(n))}function _8(n,e,t,{latestValues:i},s,o=!1){const h=(Fb(n)?y8:f8)(e,i,s,n),d=r8(e,typeof n=="string",o),f=n!==U.Fragment?{...d,...h,ref:t}:{},{children:g}=e,v=U.useMemo(()=>En(g)?g.get():g,[g]);return U.createElement(n,{...f,children:v})}function oA(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function qb(n,e,t,i){if(typeof e=="function"){const[s,o]=oA(i);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=oA(i);e=e(t!==void 0?t:n.custom,s,o)}return e}function bm(n){return En(n)?n.get():n}function b8({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:T8(t,i,s,n),renderState:e()}}function T8(n,e,t,i){const s={},o=i(n,{});for(const _ in o)s[_]=bm(o[_]);let{initial:u,animate:h}=n;const d=$p(n),f=qD(n);e&&f&&!d&&n.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let g=t?t.initial===!1:!1;g=g||u===!1;const v=g?h:u;if(v&&typeof v!="boolean"&&!Kp(v)){const _=Array.isArray(v)?v:[v];for(let S=0;S<_.length;S++){const R=qb(n,_[S]);if(R){const{transitionEnd:k,transition:V,...j}=R;for(const M in j){let L=j[M];if(Array.isArray(L)){const J=g?L.length-1:0;L=L[J]}L!==null&&(s[M]=L)}for(const M in k)s[M]=k[M]}}}return s}const YD=n=>(e,t)=>{const i=U.useContext(Gp),s=U.useContext(Hp),o=()=>b8(n,e,i,s);return t?o():qp(o)};function Hb(n,e,t){const{style:i}=n,s={};for(const o in i)(En(i[o])||e.style&&En(e.style[o])||HD(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const E8=YD({scrapeMotionValuesFromProps:Hb,createRenderState:Bb});function XD(n,e,t){const i=Hb(n,e,t);for(const s in n)if(En(n[s])||En(e[s])){const o=Nu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=n[s]}return i}const w8=YD({scrapeMotionValuesFromProps:XD,createRenderState:$D}),S8=Symbol.for("motionComponentSymbol");function Fl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function x8(n,e,t){return U.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Fl(t)&&(t.current=i))},[e])}const Gb=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),A8="framerAppearId",WD="data-"+Gb(A8),ZD=U.createContext({});function I8(n,e,t,i,s){const{visualElement:o}=U.useContext(Gp),u=U.useContext(BD),h=U.useContext(Hp),d=U.useContext(Ob).reducedMotion,f=U.useRef(null);i=i||u.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:o,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,v=U.useContext(ZD);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&R8(f.current,t,s,v);const _=U.useRef(!1);U.useInsertionEffect(()=>{g&&_.current&&g.update(t,h)});const S=t[WD],R=U.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return mb(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),R.current&&g.animationState&&g.animationState.animateChanges())}),U.useEffect(()=>{g&&(!R.current&&g.animationState&&g.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),R.current=!1),g.enteringChildren=void 0)}),g}function R8(n,e,t,i){const{layoutId:s,layout:o,drag:u,dragConstraints:h,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:JD(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!u||h&&Fl(h),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:d,layoutRoot:f})}function JD(n){if(n)return n.options.allowProjection!==!1?n.projection:JD(n.parent)}function I0(n,{forwardMotionProps:e=!1}={},t,i){t&&t8(t);const s=Fb(n)?w8:E8;function o(h,d){let f;const g={...U.useContext(Ob),...h,layoutId:C8(h)},{isStatic:v}=g,_=a8(h),S=s(h,v);if(!v&&fb){D8();const R=N8(g);f=R.MeasureLayout,_.visualElement=I8(n,S,g,i,R.ProjectionNode)}return w.jsxs(Gp.Provider,{value:_,children:[f&&_.visualElement?w.jsx(f,{visualElement:_.visualElement,...g}):null,_8(n,h,x8(S,_.visualElement,d),S,v,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const u=U.forwardRef(o);return u[S8]=n,u}function C8({layoutId:n}){const e=U.useContext(db).id;return e&&n!==void 0?e+"-"+n:n}function D8(n,e){U.useContext(BD).strict}function N8(n){const{drag:e,layout:t}=_u;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function k8(n,e){if(typeof Proxy>"u")return I0;const t=new Map,i=(o,u)=>I0(o,u,n,e),s=(o,u)=>i(o,u);return new Proxy(s,{get:(o,u)=>u==="create"?i:(t.has(u)||t.set(u,I0(u,void 0,n,e)),t.get(u))})}function eN({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function V8({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function M8(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function R0(n){return n===void 0||n===1}function Lv({scale:n,scaleX:e,scaleY:t}){return!R0(n)||!R0(e)||!R0(t)}function oo(n){return Lv(n)||tN(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function tN(n){return lA(n.x)||lA(n.y)}function lA(n){return n&&n!=="0%"}function rp(n,e,t){const i=n-t,s=e*i;return t+s}function uA(n,e,t,i,s){return s!==void 0&&(n=rp(n,s,i)),rp(n,t,i)+e}function jv(n,e=0,t=1,i,s){n.min=uA(n.min,e,t,i,s),n.max=uA(n.max,e,t,i,s)}function nN(n,{x:e,y:t}){jv(n.x,e.translate,e.scale,e.originPoint),jv(n.y,t.translate,t.scale,t.originPoint)}const cA=.999999999999,hA=1.0000000000001;function P8(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,u;for(let h=0;h<s;h++){o=t[h],u=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Hl(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,nN(n,u)),i&&oo(o.latestValues)&&Hl(n,o.latestValues))}e.x<hA&&e.x>cA&&(e.x=1),e.y<hA&&e.y>cA&&(e.y=1)}function ql(n,e){n.min=n.min+e,n.max=n.max+e}function dA(n,e,t,i,s=.5){const o=wt(n.min,n.max,s);jv(n,e,t,o,i)}function Hl(n,e){dA(n.x,e.x,e.scaleX,e.scale,e.originX),dA(n.y,e.y,e.scaleY,e.scale,e.originY)}function iN(n,e){return eN(M8(n.getBoundingClientRect(),e))}function O8(n,e,t){const i=iN(n,t),{scroll:s}=e;return s&&(ql(i.x,s.offset.x),ql(i.y,s.offset.y)),i}const fA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gl=()=>({x:fA(),y:fA()}),mA=()=>({min:0,max:0}),Mt=()=>({x:mA(),y:mA()}),zv={current:null},rN={current:!1};function L8(){if(rN.current=!0,!!fb)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>zv.current=n.matches;n.addEventListener("change",e),e()}else zv.current=!1}const j8=new WeakMap;function z8(n,e,t){for(const i in e){const s=e[i],o=t[i];if(En(s))n.addValue(i,s);else if(En(o))n.addValue(i,vu(s,{owner:n}));else if(o!==s)if(n.hasValue(i)){const u=n.getValue(i);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=n.getStaticValue(i);n.addValue(i,vu(u!==void 0?u:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const pA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class U8{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Nb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Fn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Tt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=u;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=$p(t),this.isVariantNode=qD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const S=v[_];d[_]!==void 0&&En(S)&&S.set(d[_])}}mount(e){this.current=e,j8.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),rN.current||L8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ma(this.notifyUpdate),ma(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ku.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Tt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _u){const t=_u[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<pA.length;i++){const s=pA[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,u=e[o];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=z8(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=vu(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(XC(i)||ZC(i))?i=parseFloat(i):!QU(i)&&pa.test(t)&&(i=VD(e,t)),this.setBaseTarget(e,En(i)?i.get():i)),En(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const o=qb(this.props,t,this.presenceContext?.custom);o&&(i=o[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!En(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new _b),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Mb.render(this.render)}}class sN extends U8{constructor(){super(...arguments),this.KeyframeResolver=OU}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;En(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function aN(n,{style:e,vars:t},i,s){const o=n.style;let u;for(u in e)o[u]=e[u];s?.applyProjectionStyles(o,i);for(u in t)o.setProperty(u,t[u])}function B8(n){return window.getComputedStyle(n)}class F8 extends sN{constructor(){super(...arguments),this.type="html",this.renderInstance=aN}readValueFromInstance(e,t){if(ku.has(t))return this.projection?.isProjecting?Dv(t):tU(e,t);{const i=B8(e),s=(Eb(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return iN(e,t)}build(e,t,i){Ub(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Hb(e,t,i)}}const oN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function q8(n,e,t,i){aN(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(oN.has(s)?s:Gb(s),e.attrs[s])}class H8 extends sN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ku.has(t)){const i=kD(t);return i&&i.default||0}return t=oN.has(t)?t:Gb(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return XD(e,t,i)}build(e,t,i){KD(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){q8(e,t,i,s)}mount(e){this.isSVGTag=QD(e.tagName),super.mount(e)}}const G8=(n,e)=>Fb(n)?new H8(e):new F8(e,{allowProjection:n!==U.Fragment});function Xl(n,e,t){const i=n.getProps();return qb(i,e,t!==void 0?t:i.custom,n)}const Uv=n=>Array.isArray(n);function K8(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,vu(t))}function $8(n){return Uv(n)?n[n.length-1]||0:n}function Kb(n,e){const t=Xl(n,e);let{transitionEnd:i={},transition:s={},...o}=t||{};o={...o,...i};for(const u in o){const h=$8(o[u]);K8(n,u,h)}}function Q8(n){return!!(En(n)&&n.add)}function Bv(n,e){const t=n.getValue("willChange");if(Q8(t))return t.add(e);if(!t&&rs.WillChange){const i=new rs.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function lN(n){return n.props[WD]}const Y8=n=>n!==null;function X8(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(Y8),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}const W8={type:"spring",stiffness:500,damping:25,restSpeed:10},Z8=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),J8={type:"keyframes",duration:.8},eB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tB=(n,{keyframes:e})=>e.length>2?J8:ku.has(n)?n.startsWith("scale")?Z8(e[1]):W8:eB;function nB({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:u,repeatDelay:h,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const $b=(n,e,t,i={},s,o)=>u=>{const h=kb(i,n)||{},d=h.delay||i.delay||0;let{elapsed:f=0}=i;f=f-vr(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-f,onUpdate:_=>{e.set(_),h.onUpdate&&h.onUpdate(_)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:o?void 0:s};nB(h)||Object.assign(g,tB(n,g)),g.duration&&(g.duration=vr(g.duration)),g.repeatDelay&&(g.repeatDelay=vr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Pv(g),g.delay===0&&(v=!0)),(rs.instantAnimations||rs.skipAnimations)&&(v=!0,Pv(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,v&&!o&&e.get()!==void 0){const _=X8(g.keyframes,h);if(_!==void 0){Tt.update(()=>{g.onUpdate(_),g.onComplete()});return}}return h.isSync?new Db(g):new SU(g)};function iB({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function uN(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:u,...h}=e;i&&(o=i);const d=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const g in h){const v=n.getValue(g,n.latestValues[g]??null),_=h[g];if(_===void 0||f&&iB(f,g))continue;const S={delay:t,...kb(o||{},g)},R=v.get();if(R!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===R&&!S.velocity)continue;let k=!1;if(window.MotionHandoffAnimation){const j=lN(n);if(j){const M=window.MotionHandoffAnimation(j,g,Tt);M!==null&&(S.startTime=M,k=!0)}}Bv(n,g),v.start($b(g,v,_,n.shouldReduceMotion&&CD.has(g)?{type:!1}:S,n,k));const V=v.animation;V&&d.push(V)}return u&&Promise.all(d).then(()=>{Tt.update(()=>{u&&Kb(n,u)})}),d}function cN(n,e,t,i=0,s=1){const o=Array.from(n).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),u=n.size,h=(u-1)*i;return typeof t=="function"?t(o,u):s===1?o*i:h-o*i}function Fv(n,e,t={}){const i=Xl(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(uN(n,i,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:v}=s;return rB(n,e,d,f,g,v,t)}:()=>Promise.resolve(),{when:h}=s;if(h){const[d,f]=h==="beforeChildren"?[o,u]:[u,o];return d().then(()=>f())}else return Promise.all([o(),u(t.delay)])}function rB(n,e,t=0,i=0,s=0,o=1,u){const h=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),h.push(Fv(d,e,{...u,delay:t+(typeof i=="function"?0:i)+cN(n.variantChildren,d,i,s,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function hN(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(o=>Fv(n,o,t));i=Promise.all(s)}else if(typeof e=="string")i=Fv(n,e,t);else{const s=typeof e=="function"?Xl(n,e,t.custom):e;i=Promise.all(uN(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function dN(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const sB=zb.length;function fN(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?fN(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<sB;t++){const i=zb[t],s=n.props[i];(Lh(s)||s===!1)&&(e[i]=s)}return e}const aB=[...jb].reverse(),oB=jb.length;function lB(n){return e=>Promise.all(e.map(({animation:t,options:i})=>hN(n,t,i)))}function uB(n){let e=lB(n),t=gA(),i=!0;const s=d=>(f,g)=>{const v=Xl(n,g,d==="exit"?n.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:S,...R}=v;f={...f,...R,...S}}return f};function o(d){e=d(n)}function u(d){const{props:f}=n,g=fN(n.parent)||{},v=[],_=new Set;let S={},R=1/0;for(let V=0;V<oB;V++){const j=aB[V],M=t[j],L=f[j]!==void 0?f[j]:g[j],J=Lh(L),ie=j===d?M.isActive:null;ie===!1&&(R=V);let ne=L===g[j]&&L!==f[j]&&J;if(ne&&i&&n.manuallyAnimateOnMount&&(ne=!1),M.protectedKeys={...S},!M.isActive&&ie===null||!L&&!M.prevProp||Kp(L)||typeof L=="boolean")continue;const C=cB(M.prevProp,L);let A=C||j===d&&M.isActive&&!ne&&J||V>R&&J,N=!1;const P=Array.isArray(L)?L:[L];let D=P.reduce(s(j),{});ie===!1&&(D={});const{prevResolvedValues:B={}}=M,O={...B,...D},Ee=ae=>{A=!0,_.has(ae)&&(N=!0,_.delete(ae)),M.needsAnimating[ae]=!0;const de=n.getValue(ae);de&&(de.liveStyle=!1)};for(const ae in O){const de=D[ae],Ce=B[ae];if(S.hasOwnProperty(ae))continue;let Fe=!1;Uv(de)&&Uv(Ce)?Fe=!dN(de,Ce):Fe=de!==Ce,Fe?de!=null?Ee(ae):_.add(ae):de!==void 0&&_.has(ae)?Ee(ae):M.protectedKeys[ae]=!0}M.prevProp=L,M.prevResolvedValues=D,M.isActive&&(S={...S,...D}),i&&n.blockInitialAnimation&&(A=!1);const fe=ne&&C;A&&(!fe||N)&&v.push(...P.map(ae=>{const de={type:j};if(typeof ae=="string"&&i&&!fe&&n.manuallyAnimateOnMount&&n.parent){const{parent:Ce}=n,Fe=Xl(Ce,ae);if(Ce.enteringChildren&&Fe){const{delayChildren:q}=Fe.transition||{};de.delay=cN(Ce.enteringChildren,n,q)}}return{animation:ae,options:de}}))}if(_.size){const V={};if(typeof f.initial!="boolean"){const j=Xl(n,Array.isArray(f.initial)?f.initial[0]:f.initial);j&&j.transition&&(V.transition=j.transition)}_.forEach(j=>{const M=n.getBaseTarget(j),L=n.getValue(j);L&&(L.liveStyle=!0),V[j]=M??null}),v.push({animation:V})}let k=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(k=!1),i=!1,k?e(v):Promise.resolve()}function h(d,f){if(t[d].isActive===f)return Promise.resolve();n.variantChildren?.forEach(v=>v.animationState?.setActive(d,f)),t[d].isActive=f;const g=u(d);for(const v in t)t[v].protectedKeys={};return g}return{animateChanges:u,setActive:h,setAnimateFunction:o,getState:()=>t,reset:()=>{t=gA()}}}function cB(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!dN(e,n):!1}function no(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gA(){return{animate:no(!0),whileInView:no(),whileHover:no(),whileTap:no(),whileDrag:no(),whileFocus:no(),exit:no()}}class Ea{constructor(e){this.isMounted=!1,this.node=e}update(){}}class hB extends Ea{constructor(e){super(e),e.animationState||(e.animationState=uB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Kp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let dB=0;class fB extends Ea{constructor(){super(...arguments),this.id=dB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const mB={animation:{Feature:hB},exit:{Feature:fB}};function zh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function sd(n){return{point:{x:n.pageX,y:n.pageY}}}const pB=n=>e=>Pb(e)&&n(e,sd(e));function dh(n,e,t,i){return zh(n,e,pB(t),i)}const mN=1e-4,gB=1-mN,yB=1+mN,pN=.01,vB=0-pN,_B=0+pN;function Cn(n){return n.max-n.min}function bB(n,e,t){return Math.abs(n-e)<=t}function yA(n,e,t,i=.5){n.origin=i,n.originPoint=wt(e.min,e.max,n.origin),n.scale=Cn(t)/Cn(e),n.translate=wt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=gB&&n.scale<=yB||isNaN(n.scale))&&(n.scale=1),(n.translate>=vB&&n.translate<=_B||isNaN(n.translate))&&(n.translate=0)}function fh(n,e,t,i){yA(n.x,e.x,t.x,i?i.originX:void 0),yA(n.y,e.y,t.y,i?i.originY:void 0)}function vA(n,e,t){n.min=t.min+e.min,n.max=n.min+Cn(e)}function TB(n,e,t){vA(n.x,e.x,t.x),vA(n.y,e.y,t.y)}function _A(n,e,t){n.min=e.min-t.min,n.max=n.min+Cn(e)}function mh(n,e,t){_A(n.x,e.x,t.x),_A(n.y,e.y,t.y)}function yi(n){return[n("x"),n("y")]}const gN=({current:n})=>n?n.ownerDocument.defaultView:null,bA=(n,e)=>Math.abs(n-e);function EB(n,e){const t=bA(n.x,e.x),i=bA(n.y,e.y);return Math.sqrt(t**2+i**2)}class yN{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=D0(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,R=EB(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!R)return;const{point:k}=_,{timestamp:V}=fn;this.history.push({...k,timestamp:V});const{onStart:j,onMove:M}=this.handlers;S||(j&&j(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,_)},this.handlePointerMove=(_,S)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=C0(S,this.transformPagePoint),Tt.update(this.updatePoint,!0)},this.handlePointerUp=(_,S)=>{this.end();const{onEnd:R,onSessionEnd:k,resumeAnimation:V}=this.handlers;if(this.dragSnapToOrigin&&V&&V(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=D0(_.type==="pointercancel"?this.lastMoveEventInfo:C0(S,this.transformPagePoint),this.history);this.startEvent&&R&&R(_,j),k&&k(_,j)},!Pb(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=u,this.contextWindow=s||window;const h=sd(e),d=C0(h,this.transformPagePoint),{point:f}=d,{timestamp:g}=fn;this.history=[{...f,timestamp:g}];const{onSessionStart:v}=t;v&&v(e,D0(d,this.history)),this.removeListeners=nd(dh(this.contextWindow,"pointermove",this.handlePointerMove),dh(this.contextWindow,"pointerup",this.handlePointerUp),dh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ma(this.updatePoint)}}function C0(n,e){return e?{point:e(n.point)}:n}function TA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function D0({point:n},e){return{point:n,delta:TA(n,vN(e)),offset:TA(n,wB(e)),velocity:SB(e,.1)}}function wB(n){return n[0]}function vN(n){return n[n.length-1]}function SB(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=vN(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>vr(e)));)t--;if(!i)return{x:0,y:0};const o=_i(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const u={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function xB(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?wt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?wt(t,n,i.max):Math.min(n,t)),n}function EA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function AB(n,{top:e,left:t,bottom:i,right:s}){return{x:EA(n.x,t,s),y:EA(n.y,e,i)}}function wA(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function IB(n,e){return{x:wA(n.x,e.x),y:wA(n.y,e.y)}}function RB(n,e){let t=.5;const i=Cn(n),s=Cn(e);return s>i?t=Mh(e.min,e.max-i,n.min):i>s&&(t=Mh(n.min,n.max-s,e.min)),is(0,1,t)}function CB(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const qv=.35;function DB(n=qv){return n===!1?n=0:n===!0&&(n=qv),{x:SA(n,"left","right"),y:SA(n,"top","bottom")}}function SA(n,e,t){return{min:xA(n,e),max:xA(n,t)}}function xA(n,e){return typeof n=="number"?n:n[e]||0}const NB=new WeakMap;class kB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(sd(v).point)},u=(v,_)=>{const{drag:S,dragPropagation:R,onDragStart:k}=this.getProps();if(S&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UU(S),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yi(j=>{let M=this.getAxisMotionValue(j).get()||0;if(_r.test(M)){const{projection:L}=this.visualElement;if(L&&L.layout){const J=L.layout.layoutBox[j];J&&(M=Cn(J)*(parseFloat(M)/100))}}this.originPoint[j]=M}),k&&Tt.postRender(()=>k(v,_)),Bv(this.visualElement,"transform");const{animationState:V}=this.visualElement;V&&V.setActive("whileDrag",!0)},h=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:S,dragDirectionLock:R,onDirectionLock:k,onDrag:V}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:j}=_;if(R&&this.currentDirection===null){this.currentDirection=VB(j),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",_.point,j),this.updateAxis("y",_.point,j),this.visualElement.render(),V&&V(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>yi(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new yN(e,{onSessionStart:o,onStart:u,onMove:h,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:gN(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:u}=s;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&Tt.postRender(()=>h(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!Wf(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(u=xB(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Fl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=AB(i.layoutBox,e):this.constraints=!1,this.elastic=DB(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&yi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=CB(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Fl(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=O8(i,s.root,this.visualElement.getTransformPagePoint());let u=IB(s.layout.layoutBox,o);if(t){const h=t(V8(u));this.hasMutatedConstraints=!!h,h&&(u=eN(h))}return u}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},f=yi(g=>{if(!Wf(g,t,this.currentDirection))return;let v=d&&d[g]||{};u&&(v={min:0,max:0});const _=s?200:1e6,S=s?40:1e7,R={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,R)});return Promise.all(f).then(h)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Bv(this.visualElement,e),i.start($b(e,i,0,t,this.visualElement,!1))}stopAnimation(){yi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){yi(t=>{const{drag:i}=this.getProps();if(!Wf(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:u,max:h}=s.layout.layoutBox[t];o.set(e[t]-wt(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Fl(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};yi(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const d=h.get();s[u]=RB({min:d,max:d},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),yi(u=>{if(!Wf(u,e,null))return;const h=this.getAxisMotionValue(u),{min:d,max:f}=this.constraints[u];h.set(wt(d,f,s[u]))})}addListeners(){if(!this.visualElement.current)return;NB.set(this.visualElement,this);const e=this.visualElement.current,t=dh(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Fl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Tt.read(i);const u=zh(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(yi(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{u(),t(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:u=qv,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:u,dragMomentum:h}}}function Wf(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function VB(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class MB extends Ea{constructor(e){super(e),this.removeGroupControls=Ti,this.removeListeners=Ti,this.controls=new kB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ti}unmount(){this.removeGroupControls(),this.removeListeners()}}const AA=n=>(e,t)=>{n&&Tt.postRender(()=>n(e,t))};class PB extends Ea{constructor(){super(...arguments),this.removePointerDownListener=Ti}onPointerDown(e){this.session=new yN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:AA(e),onStart:AA(t),onMove:i,onEnd:(o,u)=>{delete this.session,s&&Tt.postRender(()=>s(o,u))}}}mount(){this.removePointerDownListener=dh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Gc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Re.test(n))n=parseFloat(n);else return n;const t=IA(n,e.target.x),i=IA(n,e.target.y);return`${t}% ${i}%`}},OB={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=pa.parse(n);if(s.length>5)return i;const o=pa.createTransformer(n),u=typeof s[0]!="number"?1:0,h=t.x.scale*e.x,d=t.y.scale*e.y;s[0+u]/=h,s[1+u]/=d;const f=wt(h,d,.5);return typeof s[2+u]=="number"&&(s[2+u]/=f),typeof s[3+u]=="number"&&(s[3+u]/=f),o(s)}};let N0=!1;class LB extends U.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=e;o8(jB),o&&(t.group&&t.group.add(o),i&&i.register&&s&&i.register(o),N0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Tm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:o}=this.props,{projection:u}=i;return u&&(u.isPresent=o,N0=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Tt.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Mb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;N0=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _N(n){const[e,t]=UD(),i=U.useContext(db);return w.jsx(LB,{...n,layoutGroup:i,switchLayoutGroup:U.useContext(ZD),isPresent:e,safeToRemove:t})}const jB={borderRadius:{...Gc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gc,borderTopRightRadius:Gc,borderBottomLeftRadius:Gc,borderBottomRightRadius:Gc,boxShadow:OB};function zB(n,e,t){const i=En(n)?n:vu(n);return i.start($b("",i,e,t)),i.animation}const UB=(n,e)=>n.depth-e.depth;class BB{constructor(){this.children=[],this.isDirty=!1}add(e){pb(this.children,e),this.isDirty=!0}remove(e){gb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(UB),this.isDirty=!1,this.children.forEach(e)}}function FB(n,e){const t=Fn.now(),i=({timestamp:s})=>{const o=s-t;o>=e&&(ma(i),n(o-e))};return Tt.setup(i,!0),()=>ma(i)}const bN=["TopLeft","TopRight","BottomLeft","BottomRight"],qB=bN.length,RA=n=>typeof n=="string"?parseFloat(n):n,CA=n=>typeof n=="number"||Re.test(n);function HB(n,e,t,i,s,o){s?(n.opacity=wt(0,t.opacity??1,GB(i)),n.opacityExit=wt(e.opacity??1,0,KB(i))):o&&(n.opacity=wt(e.opacity??1,t.opacity??1,i));for(let u=0;u<qB;u++){const h=`border${bN[u]}Radius`;let d=DA(e,h),f=DA(t,h);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||CA(d)===CA(f)?(n[h]=Math.max(wt(RA(d),RA(f),i),0),(_r.test(f)||_r.test(d))&&(n[h]+="%")):n[h]=f}(e.rotate||t.rotate)&&(n.rotate=wt(e.rotate||0,t.rotate||0,i))}function DA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const GB=TN(0,.5,aD),KB=TN(.5,.95,Ti);function TN(n,e,t){return i=>i<n?0:i>e?1:t(Mh(n,e,i))}function NA(n,e){n.min=e.min,n.max=e.max}function gi(n,e){NA(n.x,e.x),NA(n.y,e.y)}function kA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function VA(n,e,t,i,s){return n-=e,n=rp(n,1/t,i),s!==void 0&&(n=rp(n,1/s,i)),n}function $B(n,e=0,t=1,i=.5,s,o=n,u=n){if(_r.test(e)&&(e=parseFloat(e),e=wt(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=wt(o.min,o.max,i);n===o&&(h-=e),n.min=VA(n.min,e,t,h,s),n.max=VA(n.max,e,t,h,s)}function MA(n,e,[t,i,s],o,u){$B(n,e[t],e[i],e[s],e.scale,o,u)}const QB=["x","scaleX","originX"],YB=["y","scaleY","originY"];function PA(n,e,t,i){MA(n.x,e,QB,t?t.x:void 0,i?i.x:void 0),MA(n.y,e,YB,t?t.y:void 0,i?i.y:void 0)}function OA(n){return n.translate===0&&n.scale===1}function EN(n){return OA(n.x)&&OA(n.y)}function LA(n,e){return n.min===e.min&&n.max===e.max}function XB(n,e){return LA(n.x,e.x)&&LA(n.y,e.y)}function jA(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function wN(n,e){return jA(n.x,e.x)&&jA(n.y,e.y)}function zA(n){return Cn(n.x)/Cn(n.y)}function UA(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class WB{constructor(){this.members=[]}add(e){pb(this.members,e),e.scheduleRender()}remove(e){if(gb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ZB(n,e,t){let i="";const s=n.x.translate/e.x,o=n.y.translate/e.y,u=t?.z||0;if((s||o||u)&&(i=`translate3d(${s}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:v,rotateY:_,skewX:S,skewY:R}=t;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),v&&(i+=`rotateX(${v}deg) `),_&&(i+=`rotateY(${_}deg) `),S&&(i+=`skewX(${S}deg) `),R&&(i+=`skewY(${R}deg) `)}const h=n.x.scale*e.x,d=n.y.scale*e.y;return(h!==1||d!==1)&&(i+=`scale(${h}, ${d})`),i||"none"}const k0=["","X","Y","Z"],JB=1e3;let e7=0;function V0(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function SN(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=lN(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Tt,!(s||o))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&SN(i)}function xN({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(u={},h=e?.()){this.id=e7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(i7),this.nodes.forEach(o7),this.nodes.forEach(l7),this.nodes.forEach(r7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new BB)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new _b),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const d=this.eventHandlers.get(u);d&&d.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=zD(u)&&!KU(u),this.instance=u;const{layoutId:h,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),n){let g,v=0;const _=()=>this.root.updateBlockedByResize=!1;Tt.read(()=>{v=window.innerWidth}),n(u,()=>{const S=window.innerWidth;S!==v&&(v=S,this.root.updateBlockedByResize=!0,g&&g(),g=FB(_,250),Tm.hasAnimatedSinceResize&&(Tm.hasAnimatedSinceResize=!1,this.nodes.forEach(qA)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&f&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||f.getDefaultTransition()||f7,{onLayoutAnimationStart:k,onLayoutAnimationComplete:V}=f.getProps(),j=!this.targetLayout||!wN(this.targetLayout,S),M=!v&&_;if(this.options.layoutRoot||this.resumeFrom||M||v&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const L={...kb(R,"layout"),onPlay:k,onComplete:V};(f.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L),this.setAnimationOrigin(g,M)}else v||qA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ma(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(u7),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&SN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(FA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(a7),this.nodes.forEach(t7),this.nodes.forEach(n7)):this.nodes.forEach(FA),this.clearAllSnapshots();const h=Fn.now();fn.delta=is(0,1e3/60,h-fn.timestamp),fn.timestamp=h,fn.isProcessing=!0,T0.update.process(fn),T0.preRender.process(fn),T0.render.process(fn),fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Mb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(s7),this.sharedNodes.forEach(c7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Cn(this.snapshot.measuredBox.x)&&!Cn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!EN(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;u&&this.instance&&(h||oo(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return u&&(d=this.removeTransform(d)),m7(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Mt();const h=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(p7))){const{scroll:f}=this.root;f&&(ql(h.x,f.offset.x),ql(h.y,f.offset.y))}return h}removeElementScroll(u){const h=Mt();if(gi(h,u),this.scroll?.wasRoot)return h;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:g,options:v}=f;f!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&gi(h,u),ql(h.x,g.offset.x),ql(h.y,g.offset.y))}return h}applyTransform(u,h=!1){const d=Mt();gi(d,u);for(let f=0;f<this.path.length;f++){const g=this.path[f];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Hl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),oo(g.latestValues)&&Hl(d,g.latestValues)}return oo(this.latestValues)&&Hl(d,this.latestValues),d}removeTransform(u){const h=Mt();gi(h,u);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!oo(f.latestValues))continue;Lv(f.latestValues)&&f.updateSnapshot();const g=Mt(),v=f.measurePageBox();gi(g,v),PA(h,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return oo(this.latestValues)&&PA(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(u||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=fn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),mh(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mt(),this.targetWithTransforms=Mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),TB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gi(this.target,this.layout.layoutBox),nN(this.target,this.targetDelta)):gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),mh(this.relativeTargetOrigin,this.target,_.target),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Lv(this.parent.latestValues)||tN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),h=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===fn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;gi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;P8(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Mt());const{target:S}=u;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kA(this.prevProjectionDelta.x,this.projectionDelta.x),kA(this.prevProjectionDelta.y,this.projectionDelta.y)),fh(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!UA(this.projectionDelta.x,this.prevProjectionDelta.x)||!UA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gl(),this.projectionDelta=Gl(),this.projectionDeltaWithTransform=Gl()}setAnimationOrigin(u,h=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},v=Gl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const _=Mt(),S=d?d.source:void 0,R=this.layout?this.layout.source:void 0,k=S!==R,V=this.getStack(),j=!V||V.members.length<=1,M=!!(k&&!j&&this.options.crossfade===!0&&!this.path.some(d7));this.animationProgress=0;let L;this.mixTargetDelta=J=>{const ie=J/1e3;HA(v.x,u.x,ie),HA(v.y,u.y,ie),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mh(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h7(this.relativeTarget,this.relativeTargetOrigin,_,ie),L&&XB(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=Mt()),gi(L,this.relativeTarget)),k&&(this.animationValues=g,HB(g,f,this.latestValues,ie,M,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ie},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ma(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tt.update(()=>{Tm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vu(0)),this.currentAnimation=zB(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:d,layout:f,latestValues:g}=u;if(!(!h||!d||!f)){if(this!==u&&this.layout&&f&&AN(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Mt();const v=Cn(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+v;const _=Cn(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+_}gi(h,d),Hl(h,g),fh(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new WB),this.sharedNodes.get(u).add(h);const f=h.options.initialPromotionConfig;h.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const f={};d.z&&V0("z",u,f,this.animationValues);for(let g=0;g<k0.length;g++)V0(`rotate${k0[g]}`,u,f,this.animationValues),V0(`skew${k0[g]}`,u,f,this.animationValues);u.render();for(const g in f)u.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=bm(h?.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=bm(h?.pointerEvents)||""),this.hasProjected&&!oo(this.latestValues)&&(u.transform=d?d({},""):"none",this.hasProjected=!1);return}u.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=ZB(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),u.transform=v;const{x:_,y:S}=this.projectionDelta;u.transformOrigin=`${_.origin*100}% ${S.origin*100}% 0`,f.animationValues?u.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const R in jh){if(g[R]===void 0)continue;const{correct:k,applyTo:V,isCSSVariable:j}=jh[R],M=v==="none"?g[R]:k(g[R],f);if(V){const L=V.length;for(let J=0;J<L;J++)u[V[J]]=M}else j?this.options.visualElement.renderState.vars[R]=M:u[R]=M}this.options.layoutId&&(u.pointerEvents=f===this?bm(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(BA),this.root.sharedNodes.clear()}}}function t7(n){n.updateLayout()}function n7(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?yi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Cn(v);v.min=t[g].min,v.max=v.min+_}):AN(s,e.layoutBox,t)&&yi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Cn(t[g]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+_)});const u=Gl();fh(u,t,e.layoutBox);const h=Gl();o?fh(h,n.applyTransform(i,!0),e.measuredBox):fh(h,t,e.layoutBox);const d=!EN(u);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:_}=g;if(v&&_){const S=Mt();mh(S,e.layoutBox,v.layoutBox);const R=Mt();mh(R,t,_.layoutBox),wN(S,R)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=R,n.relativeTargetOrigin=S,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function i7(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function r7(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function s7(n){n.clearSnapshot()}function BA(n){n.clearMeasurements()}function FA(n){n.isLayoutDirty=!1}function a7(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function qA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function o7(n){n.resolveTargetDelta()}function l7(n){n.calcProjection()}function u7(n){n.resetSkewAndRotation()}function c7(n){n.removeLeadSnapshot()}function HA(n,e,t){n.translate=wt(e.translate,0,t),n.scale=wt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function GA(n,e,t,i){n.min=wt(e.min,t.min,i),n.max=wt(e.max,t.max,i)}function h7(n,e,t,i){GA(n.x,e.x,t.x,i),GA(n.y,e.y,t.y,i)}function d7(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const f7={duration:.45,ease:[.4,0,.1,1]},KA=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),$A=KA("applewebkit/")&&!KA("chrome/")?Math.round:Ti;function QA(n){n.min=$A(n.min),n.max=$A(n.max)}function m7(n){QA(n.x),QA(n.y)}function AN(n,e,t){return n==="position"||n==="preserve-aspect"&&!bB(zA(e),zA(t),.2)}function p7(n){return n!==n.root&&n.scroll?.wasRoot}const g7=xN({attachResizeListener:(n,e)=>zh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),M0={current:void 0},IN=xN({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!M0.current){const n=new g7({});n.mount(window),n.setOptions({layoutScroll:!0}),M0.current=n}return M0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),y7={pan:{Feature:PB},drag:{Feature:MB,ProjectionNode:IN,MeasureLayout:_N}};function YA(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=i[s];o&&Tt.postRender(()=>o(e,sd(e)))}class v7 extends Ea{mount(){const{current:e}=this.node;e&&(this.unmount=BU(e,(t,i)=>(YA(this.node,i,"Start"),s=>YA(this.node,s,"End"))))}unmount(){}}class _7 extends Ea{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nd(zh(this.node.current,"focus",()=>this.onFocus()),zh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function XA(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=i[s];o&&Tt.postRender(()=>o(e,sd(e)))}class b7 extends Ea{mount(){const{current:e}=this.node;e&&(this.unmount=GU(e,(t,i)=>(XA(this.node,i,"Start"),(s,{success:o})=>XA(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Hv=new WeakMap,P0=new WeakMap,T7=n=>{const e=Hv.get(n.target);e&&e(n)},E7=n=>{n.forEach(T7)};function w7({root:n,...e}){const t=n||document;P0.has(t)||P0.set(t,{});const i=P0.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(E7,{root:n,...e})),i[s]}function S7(n,e,t){const i=w7(e);return Hv.set(n,t),i.observe(n),()=>{Hv.delete(n),i.unobserve(n)}}const x7={some:0,all:1};class A7 extends Ea{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:o}=e,u={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:x7[s]},h=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=f?g:v;_&&_(d)};return S7(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(I7(e,t))&&this.startObserver()}unmount(){}}function I7({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const R7={inView:{Feature:A7},tap:{Feature:b7},focus:{Feature:_7},hover:{Feature:v7}},C7={layout:{ProjectionNode:IN,MeasureLayout:_N}},D7={...mB,...R7,...y7,...C7},Qp=k8(D7,G8);function N7(n){n.values.forEach(e=>e.stop())}function Gv(n,e){[...e].reverse().forEach(i=>{const s=n.getVariant(i);s&&Kb(n,s),n.variantChildren&&n.variantChildren.forEach(o=>{Gv(o,e)})})}function k7(n,e){if(Array.isArray(e))return Gv(n,e);if(typeof e=="string")return Gv(n,[e]);Kb(n,e)}function V7(){const n=new Set,e={subscribe(t){return n.add(t),()=>void n.delete(t)},start(t,i){const s=[];return n.forEach(o=>{s.push(hN(o,t,{transitionOverride:i}))}),Promise.all(s)},set(t){return n.forEach(i=>{k7(i,t)})},stop(){n.forEach(t=>{N7(t)})},mount(){return()=>{e.stop()}}};return e}function M7(){const n=qp(V7);return mb(n.mount,[]),n}const P7=M7,RN=({children:n,onDelete:e,threshold:t=-100})=>{const i=P7(),[s,o]=U.useState(!1),u=U.useRef(0),h=()=>{o(!0),u.current=Date.now()},d=async(f,g)=>{const v=g.offset.x,_=g.velocity.x;setTimeout(()=>o(!1),100),v<t||v<-50&&_<-500?e():i.start({x:0})};return w.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[w.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:w.jsx(Sm,{className:"text-white w-6 h-6"})}),w.jsx(Qp.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:h,onDragEnd:d,animate:i,className:"relative bg-white dark:bg-zinc-900 z-10 rounded-xl",style:{touchAction:"pan-y",pointerEvents:s?"none":"auto"},children:n})]})},WA=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),O7=()=>{const{id:n}=XV(),{envelopes:e,transactions:t,fetchData:i,isLoading:s,deleteEnvelope:o,renameEnvelope:u,updateTransaction:h,deleteTransaction:d,restoreTransaction:f,getEnvelopeBalance:g}=Bn(),{showToast:v}=hb(),_=Po(),S=ga(),[R,k]=U.useState(!1),[V,j]=U.useState(!1),[M,L]=U.useState(!1),[J,ie]=U.useState(null);U.useEffect(()=>{e.length===0&&i()},[]);const ne=e.find(D=>D.id===n);if(!ne)return s?w.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:w.jsx("p",{children:"Loading envelope..."})}):w.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:w.jsx("p",{children:"Envelope not found."})});const C=t.filter(D=>D.envelopeId===ne.id).sort((D,B)=>new Date(B.date).getTime()-new Date(D.date).getTime()),A=()=>{S.state?.fromGlobalFAB?_("/"):_(-1)},N=()=>{n&&(o(n),_(-1))},P=D=>{const B={...D,reconciled:!D.reconciled};h(B)};return w.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4",children:[w.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[w.jsx("button",{onClick:()=>{const D=prompt("Rename envelope:",ne.name);D&&D.trim()&&n&&u(n,D)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),w.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ne.name}),w.jsx("button",{onClick:A,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),w.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),w.jsx("span",{className:`text-xl font-bold ${g(ne.id).toNumber()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:WA(g(ne.id).toNumber())})]}),w.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-zinc-400",children:[w.jsx("span",{children:"Budget"}),w.jsx("span",{children:WA(ne.budget||0)})]})]}),w.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[w.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>k(!0),children:[w.jsx(n4,{className:"w-5 h-5 mr-3"}),"Add Money"]}),w.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>j(!0),children:[w.jsx(e4,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),w.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>L(!0),children:[w.jsx(WM,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),w.jsxs("section",{className:"mt-6",children:[w.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),w.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:C.length===0?w.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):w.jsx(Lb,{initial:!1,mode:"popLayout",children:C.map(D=>w.jsx(Qp.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:w.jsx(RN,{onDelete:()=>{if(!D.id)return;const B={...D};d(D.id),v("Transaction deleted","neutral",()=>f(B))},children:w.jsx(YC,{transaction:D,onReconcile:()=>P(D),onEdit:()=>ie(D)})})},D.id))})})]}),w.jsx("div",{className:"mt-8",children:w.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${ne.name}"? This will delete all transactions.`)&&N()},children:[w.jsx(yI,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(R||V||J)&&w.jsx(QC,{isVisible:R||V||!!J,onClose:()=>{k(!1),j(!1),ie(null)},mode:R?"add":V?"spend":"edit",currentEnvelope:ne,initialTransaction:J}),M&&w.jsx(Xj,{isVisible:M,onClose:()=>L(!1),sourceEnvelope:ne})]})},L7=()=>{const n=Po(),e=U.useRef(null),{envelopes:t,transactions:i,distributionTemplates:s,resetData:o,importData:u,getEnvelopeBalance:h,appSettings:d,updateAppSettings:f,initializeAppSettings:g}=Bn(),[v,_]=U.useState(null),[S,R]=U.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),k=978307200,V=d?.theme??"system";U.useEffect(()=>{d||g().catch(A=>{console.error("Failed to initialize app settings:",A)})},[d,g]);const j=(A,N)=>{_({type:A,text:N}),setTimeout(()=>_(null),3500)},M=U.useMemo(()=>{const A=t.length,N=i.length,P=s.length,D=t.reduce((fe,H)=>fe+h(H.id).toNumber(),0),B=0,O=i.reduce((fe,H)=>{let ae=0;if(typeof H.date=="string"){const de=Date.parse(H.date);ae=Number.isNaN(de)?0:de}else typeof H.date=="number"&&(ae=H.date<2e9?(H.date+k)*1e3:H.date);return Math.max(fe,ae)},0),Ee=B||O?new Date(Math.max(B,O)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:A,transactionCount:N,templateCount:P,totalBalance:D,lastUpdated:Ee}},[t,i,s]),L=()=>{try{const A={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:d||{theme:"system"},envelopes:t.map(O=>({...O,currentBalance:h(O.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:s},N=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),P=URL.createObjectURL(N),D=document.createElement("a");D.href=P,D.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(P);const B=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",B),R(B),j("success","Backup downloaded successfully.")}catch(A){console.error(A),j("error","Failed to create backup file.")}},J=()=>{try{const A=["Date","Description","Amount","Type","Envelope","Reconciled"],N=i.map(Ee=>{const fe=t.find(de=>de.id===Ee.envelopeId)?.name||"Unknown",H=(Ee.description||"").replace(/"/g,'""');let ae="Invalid Date";if(Ee.date){if(typeof Ee.date=="string")ae=Ee.date.split("T")[0];else if(typeof Ee.date=="number"){const de=Ee.date<2e9?(Ee.date+k)*1e3:Ee.date;ae=new Date(de).toISOString().split("T")[0]}}return[ae,`"${H}"`,parseFloat(Ee.amount).toFixed(2),Ee.type,`"${fe}"`,Ee.reconciled?"Yes":"No"].join(",")}),P=[A.join(","),...N].join(`
`),D=new Blob([P],{type:"text/csv;charset=utf-8;"}),B=URL.createObjectURL(D),O=document.createElement("a");O.href=B,O.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(B),j("success","CSV export ready to open in Excel/Numbers.")}catch(A){console.error(A),j("error","Failed to export CSV.")}},ie=()=>{e.current?.click()},ne=A=>{const N=A.target.files?.[0];if(!N)return;const P=new FileReader;P.onload=async D=>{try{const B=JSON.parse(D.target?.result),O=u(B);if(!O.success){j("error",O.message);return}if(B.appSettings?.theme)try{await f({theme:B.appSettings.theme})}catch(Ee){console.error("Failed to update imported settings:",Ee)}else if(B.appSettings?.isDarkMode!==void 0)try{const Ee=B.appSettings.isDarkMode?"dark":"light";await f({theme:Ee})}catch(Ee){console.error("Failed to update imported settings:",Ee)}j("success",`Loaded ${B.envelopes?.length??0} envelopes, ${B.transactions?.length??0} transactions, and ${B.distributionTemplates?.length??0} templates.`)}catch(B){console.error(B),j("error","Invalid backup file. Please verify the JSON.")}},P.readAsText(N),A.target.value=""},C=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),j("success","All data has been permanently deleted."),n("/")}catch(A){console.error("Reset failed:",A),j("error","Failed to delete all data. Some data may remain.")}};return w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[w.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),w.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),w.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[v&&w.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${v.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[v.type==="success"?w.jsx(r4,{size:18}):w.jsx(Sm,{size:18}),v.text]}),w.jsx("section",{children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(wm,{className:"text-blue-500",size:22}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),w.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),w.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:M.envelopeCount})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),w.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:M.transactionCount})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),w.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:M.templateCount})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),w.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:M.lastUpdated})]})]})]})}),w.jsxs("section",{children:[w.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[V==="light"&&w.jsx("span",{className:"text-orange-500 text-lg",children:""}),V==="dark"&&w.jsx("span",{className:"text-purple-500 text-lg",children:""}),V==="system"&&w.jsx("span",{className:"text-gray-500 text-lg",children:""}),w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),w.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:V})]}),w.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),w.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(A=>w.jsx("button",{onClick:async()=>{try{await f({theme:A.value})}catch(N){console.error("Failed to update theme setting:",N)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${V===A.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:A.label},A.value))})]})]}),w.jsxs("section",{children:[w.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[w.jsxs("button",{onClick:L,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(wm,{className:"text-blue-500",size:20}),w.jsxs("div",{className:"flex flex-col items-start",children:[w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),w.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",S]})]})]}),w.jsx(Kc,{className:"text-gray-400",size:18})]}),w.jsxs("button",{onClick:ie,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(k4,{className:"text-blue-500",size:20}),w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),w.jsx(Kc,{className:"text-gray-400",size:18})]}),w.jsxs("button",{onClick:J,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(h4,{className:"text-blue-500",size:20}),w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),w.jsx(Kc,{className:"text-gray-400",size:18})]}),w.jsx("input",{type:"file",ref:e,onChange:ne,accept:".json",className:"hidden"})]})]}),w.jsxs("section",{children:[w.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[w.jsx("p",{children:"Create regular backups before major changes."}),w.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),w.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),w.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),w.jsxs("section",{children:[w.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),w.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:w.jsxs("button",{onClick:C,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(Sm,{className:"text-red-500 group-hover:text-red-600",size:20}),w.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),w.jsx(Kc,{className:"text-gray-400",size:18})]})}),w.jsx("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500",children:"This clears every envelope, transaction, and template. Use with caution."})]}),w.jsx("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:"House Budget PWA  App Version 2.0.1"})]})]})},j7=()=>{const n=Po(),{createEnvelope:e}=Bn(),[t,i]=U.useState(""),[s,o]=U.useState(""),u=h=>{if(h.preventDefault(),!t.trim())return;const d=parseFloat(s),f=isNaN(d)?0:d;e({name:t,budget:f,category:"General"}),n("/")};return w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[w.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[w.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:w.jsx(gI,{size:24})}),w.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Envelope"})]}),w.jsx("div",{className:"p-4 max-w-md mx-auto",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[w.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:w.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:w.jsx(f4,{size:40})})}),w.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Envelope Name"}),w.jsx("input",{type:"text",id:"name",value:t,onChange:h=>i(h.target.value),placeholder:"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),w.jsxs("div",{className:"relative",children:[w.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),w.jsx("input",{type:"number",id:"balance",value:s,onChange:h=>o(h.target.value),onKeyDown:h=>{(h.key==="e"||h.key==="E"||h.key==="+"||h.key==="-")&&h.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),w.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later via the "Distribute Funds" screen.'})]}),w.jsxs("div",{className:"pt-4 flex gap-3",children:[w.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),w.jsx("button",{type:"submit",disabled:!t.trim(),className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${t.trim()?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:"Create Envelope"})]})]})]})})]})},z7=()=>{const n=Po(),{envelopes:e}=Bn(),t=[...e].sort((i,s)=>i.name.localeCompare(s.name));return w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[w.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[w.jsx("button",{onClick:()=>n(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),w.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),w.jsx("div",{className:"w-12"})," "]}),w.jsx("div",{className:"p-4 max-w-md mx-auto",children:w.jsx("section",{className:"mb-6",children:w.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[w.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:w.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:"SELECT ENVELOPE"})}),t.length===0?w.jsx("div",{className:"px-4 py-8 text-center text-gray-500 dark:text-zinc-400",children:w.jsx("p",{children:"No envelopes available"})}):w.jsx("div",{className:"divide-y divide-gray-200 dark:divide-zinc-700",children:t.map(i=>w.jsxs("button",{onClick:()=>n(`/envelope/${i.id}`,{state:{fromGlobalFAB:!0}}),className:"w-full px-4 py-4 text-left flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700 transition-colors",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.name}),w.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Balance calculation not available here"})]}),w.jsx(Kc,{size:20,className:"text-gray-400 dark:text-zinc-500"})]},i.id))})]})})})]})},U7=()=>{const n=Po(),{transactions:e,envelopes:t,updateTransaction:i,deleteTransaction:s,restoreTransaction:o}=Bn(),{showToast:u}=hb(),[h,d]=U.useState(!1),[f,g]=U.useState(""),[v,_]=U.useState("all"),[S,R]=U.useState("All"),[k,V]=U.useState(!1),[j,M]=U.useState(()=>{const P=new Date;return P.setMonth(P.getMonth()-1),P.toISOString().split("T")[0]}),[L,J]=U.useState(()=>new Date().toISOString().split("T")[0]),[ie,ne]=U.useState(null),C=U.useMemo(()=>e.map(D=>{if(!D)return null;let B=D.date;if(typeof D.date=="number"){const Ee=(D.date+978307200)*1e3;B=new Date(Ee).toISOString()}else if(!D.date||typeof D.date!="string")return null;return{...D,date:B}}).filter(Boolean).filter(D=>{if(f){const O=f.toLowerCase(),Ee=t.find(ae=>ae.id===D.envelopeId)?.name.toLowerCase()||"",fe=parseFloat(D.amount).toFixed(2);if(!(D.description.toLowerCase().includes(O)||Ee.includes(O)||fe.includes(O)))return!1}if(v!=="all"&&D.envelopeId!==v||S!=="All"&&D.type!==S.toLowerCase()||!D.date||typeof D.date!="string")return!1;const B=D.date.split("T")[0];return!(B<j||B>L||k&&!D.reconciled)}).sort((D,B)=>new Date(B.date).getTime()-new Date(D.date).getTime()),[e,t,f,v,S,j,L,k]),A=ie?t.find(P=>P.id===ie.envelopeId):null,N=P=>{const D={...P,reconciled:!P.reconciled};i(D)};return w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[w.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx("button",{onClick:()=>n(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:w.jsx(gI,{size:24})}),w.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),w.jsx("button",{onClick:()=>d(!h),className:`p-2 rounded-full transition-colors ${h?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:w.jsx(p4,{size:20,className:h?"fill-current":""})})]}),w.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${h?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:w.jsxs("div",{className:"p-4 space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx(S4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),w.jsx("input",{type:"text",placeholder:"Search transactions...",value:f,onChange:P=>g(P.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),f&&w.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:w.jsx(Zv,{size:16})})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),w.jsxs("select",{value:v,onChange:P=>_(P.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[w.jsx("option",{value:"all",children:"All Envelopes"}),t.sort((P,D)=>P.name.localeCompare(D.name)).map(P=>w.jsx("option",{value:P.id,children:P.name},P.id))]})]}),w.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(P=>w.jsx("button",{onClick:()=>R(P),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${S===P?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:P},P))}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),w.jsx("div",{className:"relative",children:w.jsx("input",{type:"date",value:j,onChange:P=>M(P.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),w.jsx("div",{className:"relative",children:w.jsx("input",{type:"date",value:L,onChange:P=>J(P.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),w.jsxs("div",{className:"flex items-center justify-between pt-2",children:[w.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),w.jsx("button",{onClick:()=>V(!k),className:`w-11 h-6 rounded-full transition-colors relative ${k?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:w.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${k?"translate-x-5":"translate-x-0"}`})})]})]})}),w.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:w.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:C.length===0?w.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):w.jsx(Lb,{initial:!1,mode:"popLayout",children:C.map(P=>{const D=t.find(B=>B.id===P.envelopeId);return w.jsx(Qp.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:w.jsx(RN,{onDelete:()=>{if(!P.id)return;const B={...P};s(P.id),u("Transaction deleted","neutral",()=>o(B))},children:w.jsx(YC,{transaction:P,envelopeName:D?.name||"Unknown Envelope",onReconcile:()=>N(P),onEdit:()=>{D?ne(P):alert("Cannot edit: Envelope deleted.")}})})},P.id)})})})}),ie&&A&&w.jsx(QC,{isVisible:!!ie,onClose:()=>ne(null),mode:"edit",currentEnvelope:A,initialTransaction:ie})]})},B7=()=>{const{message:n,type:e,isVisible:t,undoAction:i,hideToast:s}=hb(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return w.jsx(Lb,{children:t&&w.jsx(Qp.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:w.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[w.jsx("div",{className:"flex items-center flex-1 min-w-0",children:w.jsx("span",{className:"text-sm font-medium truncate pr-2",children:n})}),w.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&w.jsxs("button",{onClick:()=>{i(),s()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[w.jsx(D4,{size:14,className:"inline mr-1"}),"Undo"]}),w.jsx("button",{onClick:s,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:w.jsx(Zv,{size:16})})]})]})})})};function F7(){const[n,e]=U.useState(!0),{appSettings:t}=Bn();return U.useEffect(()=>{const i=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(i)},[]),U.useEffect(()=>{const i=document.documentElement,s=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{const u=t?.theme??"system",h=s.matches;u==="dark"||u==="system"&&h?i.classList.add("dark"):i.classList.remove("dark")};if(o(),t?.theme==="system")return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[t]),n?w.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-blue-600 text-white dark:bg-black",children:w.jsx("div",{className:"text-3xl font-bold animate-pulse",children:"House Budget"})}):w.jsxs(w.Fragment,{children:[w.jsx(MM,{children:w.jsxs(hM,{children:[w.jsx(io,{path:"/",element:w.jsx(Yj,{})}),w.jsx(io,{path:"/envelope/:id",element:w.jsx(O7,{})}),w.jsx(io,{path:"/add-envelope",element:w.jsx(j7,{})}),w.jsx(io,{path:"/add-transaction",element:w.jsx(z7,{})}),w.jsx(io,{path:"/transactions",element:w.jsx(U7,{})}),w.jsx(io,{path:"/settings",element:w.jsx(L7,{})})]})}),w.jsx(B7,{})]})}_V({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});pV.createRoot(document.getElementById("root")).render(w.jsx(U.StrictMode,{children:w.jsx(F7,{})}));
